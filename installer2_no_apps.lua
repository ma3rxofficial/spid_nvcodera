local pkg = {["SpeedAPI"]={["devices"]="function find(name,prior)!@#&  local sides = {!@#&  \"top\";!@#&  \"front\";!@#&  \"left\";!@#&  \"right\";!@#&  \"back\";!@#&  \"bottom\" }!@#&!@#&  if prior==nil then!@#&        p=1!@#&  else!@#&        p=prior!@#&  end!@#&!@#&  for n=1,6 do!@#&        if peripheral.getType(sides[n])==name then!@#&          if p==1 then!@#&                return sides[n]!@#&          else!@#&                p=p-1!@#&          end!@#&        end!@#&  end!@#&  return \"none\"!@#&end",["graph"]="local Graph = {!@#&	getColor = function(self, value, trace)!@#&		local colorIndex = math.ceil((value - self.min[trace]) / ((self.max[trace] - self.min[trace]) / #self.gradient[trace]))!@#&		if colorIndex == 0 then colorIndex = 1 end!@#&		if self.target.isColor() then!@#&			return self.gradient[trace][colorIndex]!@#&		else!@#&			return colors.white!@#&		end!@#&	end,!@#&	draw = function(self)!@#&		--get the updates first.!@#&		for i=1, #self.update do!@#&			self.history[i][#self.history[i] + 1] = self.update[i]()!@#&		end!@#&		if self.target.setTextScale then self.target.setTextScale(0.5) end!@#&		self.target.setBackgroundColor(colors.black)!@#&		self.target.setTextColor(colors.white)!@#&		self.target.clear()!@#&		local newMax, newMin = self.max[1], self.min[1]!@#&		--draw traces!@#&		for trace=1,#self.update do!@#&			if self.history[trace][#self.history[trace]] > self.max[trace] then!@#&				if self.sharedBounds and self.history[trace][#self.history[trace]] > newMax then!@#&					newMax = self.history[trace][#self.history[trace]]!@#&				else!@#&					self.max[trace] = self.history[trace][#self.history[trace]]!@#&				end!@#&			elseif self.history[trace][#self.history[trace]] < self.min[trace] then!@#&				if self.sharedBounds and self.history[trace][#self.history[trace]] < newMin then!@#&					newMin = self.history[trace][#self.history[trace]]!@#&				else!@#&					self.min[trace] = self.history[trace][#self.history[trace]]!@#&				end!@#&			end!@#&			local xLim, yLim = self.target.getSize()!@#&			if #self.history[trace] > xLim then table.remove(self.history[trace], 1) end!@#&			--we set up our value string for numeric value readout here, but draw it later so it doesn't interfere with the full-screen trace.!@#&			for i=1, #self.history[trace] do!@#&				self.target.setCursorPos(i, yLim - math.ceil((yLim - 1) * (self.history[trace][i] - self.min[trace]) / (self.max[trace] - self.min[trace])))!@#&				self.target.setBackgroundColor(self:getColor(self.history[trace][i], trace))!@#&				self.target.write(\" \")!@#&				self.target.setBackgroundColor(colors.black)!@#&			end!@#&		end!@#&		--adjust min-max for next round.!@#&		if self.sharedBounds then!@#&			for i=1, #self.update do!@#&				self.max[i] = newMax!@#&				self.min[i] = newMin!@#&			end!@#&		end!@#&		--draw trace labels.!@#&		for trace = 1, #self.update do!@#&			local valueString, cStart, cEnd = \"\"!@#&			if self.valueText[trace] then!@#&				valueString = self.valueText[trace]..\": \"!@#&				cStart = #valueString + 1!@#&				valueString = valueString..tostring(self.history[trace][#self.history[trace]])!@#&				cEnd = #valueString!@#&				valueString = valueString..\" / \"..self.max[trace]!@#&			end!@#&			local xLim, yLim = self.target.getSize()!@#&			if trace + 1 <= yLim then!@#&				self.target.setCursorPos(2, trace + 1)!@#&				for i=1, #valueString do!@#&					if i >= cStart and i <= cEnd then!@#&						self.target.setTextColor(self:getColor(self.history[trace][#self.history[trace]], trace))!@#&					end!@#&					self.target.write(string.sub(valueString, i, i))!@#&					self.target.setTextColor(colors.white)!@#&				end!@#&			end!@#&		end!@#&	end,!@#&	tostring = function(self)!@#&		local valueString = \"\"!@#&		if self.valueText[1] then!@#&			valueString = self.valueText[1]..\": \"!@#&		end!@#&		valueString = valueString..tostring(self.history[1][#self.history[1]])..\" / \"..self.max[1]!@#&		return valueString!@#&	end,!@#&}!@#&!@#&local gmetatable = {!@#&	__index = Graph,!@#&	__tostring = function(g) return g:tostring() end,!@#&}!@#&!@#&function new(target, updateFunction, valueText, gradientTable, min, max, sharedBounds)!@#&	if not target then return nil, \"Must specify output target!\" end!@#&	if not updateFunction then return nil, \"Must specify update function!\" end!@#&	local g = {!@#&		min = type(min) == \"table\" and min or {},!@#&		max = type(max) == \"table\" and max or {},!@#&		target = target,!@#&		update = type(updateFunction) == \"table\" and updateFunction or {updateFunction},!@#&		history = {},!@#&		gradient = {},!@#&		valueText = type(valueText) == \"table\" and valueText or {valueText},!@#&		sharedBounds = shareBounds or false!@#&	}!@#&	for i=1, #g.update do!@#&		g.history[i] = {}!@#&	end!@#&	if type(min) ~= \"table\" then!@#&		local setMin = min or 0!@#&		for i=1, #g.update do!@#&			g.min[i] = setMin!@#&		end!@#&	end!@#&	if type(max) ~= \"table\" then!@#&		local setMax = max or 1!@#&		for i=1, #g.update do!@#&			g.max[i] = setMax!@#&		end!@#&	end!@#&	if gradientTable and type(gradientTable) == \"table\" and type(gradientTable[1]) == \"table\" then!@#&		g.gradient = gradientTable!@#&	elseif gradientTable and type(gradientTable) == \"table\" then!@#&		for i=1, #g.update do!@#&			g.gradient[i] = gradientTable!@#&		end!@#&	else!@#&		for i=1, #g.update do!@#&			g.gradient[i] = {colors.red, colors.orange, colors.yellow, colors.lime, colors.green}!@#&		end!@#&	end!@#&	setmetatable(g, gmetatable)!@#&	return g!@#&end",["sensor"]="local function waitForResponse( _id )!@#&	while true do!@#&		local event = {os.pullEvent()}!@#&		if event[2] == _id then!@#&			if event[1] == \"ocs_success\" then!@#&				return event[3]!@#&			elseif event[1] == \"ocs_error\" then!@#&				return nil, event[3]!@#&			end!@#&		end!@#&	end!@#&end!@#&!@#&function wrap(side)!@#&	local wrappedTable = {}!@#&	if peripheral.getType(side) == \"sensor\" then!@#&		local periph = peripheral.wrap(side)!@#&		for k,v in pairs(periph) do!@#&			if type(k) == \"string\" and type(v) == \"function\" then!@#&				wrappedTable[k] = function(...)!@#&					local id = periph[k](...)!@#&					if id == -1 then!@#&						return false!@#&					end!@#&					return waitForResponse(id)!@#&				end!@#&			end!@#&		end!@#&		return wrappedTable!@#&	else!@#&		return nil, \"not a sensor\"!@#&	end!@#&end!@#&!@#&function call(side, ...)!@#&	if peripheral.getType(side) == \"sensor\" then!@#&		local id = peripheral.call(side, ...)!@#&		if id == -1 then!@#&			return false!@#&		end!@#&		return waitForResponse(id)!@#&	else!@#&		return nil, \"not a sensor\"!@#&	end!@#&end",["bbpack"]="-- +---------------------+------------+---------------------+!@#&-- |                     |            |                     |!@#&-- |                     |   BBPack   |                     |!@#&-- |                     |            |                     |!@#&-- +---------------------+------------+---------------------+!@#&!@#&local version = \"Version 1.6.1\"!@#&!@#&-- Pastebin uploader/downloader for ComputerCraft, by Jeffrey Alexander (aka Bomb Bloke).!@#&-- Handles multiple files in a single paste, as well as non-ASCII symbols within files.!@#&-- Used to be called \"package\".!@#&-- http://www.computercraft.info/forums2/index.php?/topic/21801-!@#&-- pastebin get cUYTGbpb bbpack!@#&!@#&---------------------------------------------!@#&------------Variable Declarations------------!@#&---------------------------------------------!@#&!@#&local band, brshift, blshift = bit.band, bit.brshift, bit.blshift!@#&!@#&local b64 = {}!@#&for i = 1, 64 do!@#&	b64[i - 1] = (\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\"):byte(i)!@#&	b64[(\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\"):sub(i, i)] = i - 1!@#&end!@#&!@#&---------------------------------------------!@#&------------Function Declarations------------!@#&---------------------------------------------!@#&!@#&local unpack = unpack or table.unpack!@#&!@#&local function snooze()!@#&	local myEvent = tostring({})!@#&	os.queueEvent(myEvent)!@#&	os.pullEvent(myEvent)!@#&end!@#&!@#&local function toBase64Internal(inputlist)!@#&	if type(inputlist) ~= \"table\" then error(\"bbpack.toBase64: Expected: table or file handle\", 2) end!@#&!@#&	if inputlist.read then!@#&		local templist, len = {}, 1!@#&!@#&		for byte in inputlist.read do!@#&			templist[len] = byte!@#&			len = len + 1!@#&		end!@#&!@#&		inputlist.close()!@#&		inputlist = templist!@#&	elseif inputlist.readLine then!@#&		inputlist.close()!@#&		error(\"bbpack.toBase64: Use a binary-mode file handle\", 2)!@#&	end!@#&!@#&	if #inputlist == 0 then return \"\" end!@#&!@#&	local curbit, curbyte, outputlist, len = 32, 0, {}, 1!@#&!@#&	for i = 1, #inputlist do!@#&		local inByte, mask = inputlist[i], 128!@#&!@#&		for j = 1, 8 do!@#&			if band(inByte, mask) == mask then curbyte = curbyte + curbit end!@#&			curbit, mask = curbit / 2, mask / 2!@#&!@#&			if curbit < 1 then!@#&				outputlist[len] = b64[curbyte]!@#&				curbit, curbyte, len = 32, 0, len + 1!@#&			end!@#&		end!@#&	end!@#&!@#&	if curbit > 1 then outputlist[len] = b64[curbyte] end!@#&!@#&	return string.char(unpack(outputlist))!@#&end!@#&!@#&local function fromBase64Internal(inData)!@#&	if type(inData) ~= \"string\" and type(inData) ~= \"table\" then error(\"bbpack.fromBase64: Expected: string or file handle\", 2) end!@#&!@#&	if type(inData) == \"table\" then!@#&		if inData.readLine then!@#&			local temp = inData.readAll()!@#&			inData.close()!@#&			inData = temp!@#&		else!@#&			if inData.close then inData.close() end!@#&			error(\"bbpack.fromBase64: Use text-mode file handles\", 2)!@#&		end!@#&	end!@#&!@#&	if #inData == 0 then return {} end!@#&!@#&	local curbyte, curbit, outputlist, len = 0, 128, {}, 1!@#&!@#&	for i = 1, #inData do!@#&		local mask, curchar = 32, b64[inData:sub(i, i)]!@#&!@#&		for j = 1, 6 do!@#&			if band(curchar, mask) == mask then curbyte = curbyte + curbit end!@#&			curbit, mask = curbit / 2, mask / 2!@#&!@#&			if curbit < 1 then!@#&				outputlist[len] = curbyte!@#&				curbit, curbyte, len = 128, 0, len + 1!@#&			end!@#&		end!@#&	end!@#&!@#&	if curbit > 1 and curbyte > 0 then outputlist[len] = curbyte end!@#&!@#&	return outputlist!@#&end!@#&!@#&local function compressIterator(ClearCode)!@#&	local startCodeSize = 1!@#&	while math.pow(2, startCodeSize) < ClearCode do startCodeSize = startCodeSize + 1 end!@#&!@#&	local EOI, ClearCode = math.pow(2, startCodeSize) + 1, math.pow(2, startCodeSize)!@#&	startCodeSize = startCodeSize + 1!@#&!@#&	local curstring, len, curbit, curbyte, outputlist, codes, CodeSize, MaxCode, nextcode, curcode = \"\", 2, 1, 0, {0}, {}, startCodeSize, math.pow(2, startCodeSize) - 1, EOI + 1!@#&!@#&	local function packByte(num)!@#&		local mask = 1!@#&!@#&		for i = 1, CodeSize do!@#&			if band(num, mask) == mask then curbyte = curbyte + curbit end!@#&			curbit, mask = curbit * 2, mask * 2!@#&!@#&			if curbit > 128 or (i == CodeSize and num == EOI) then!@#&				local counter = blshift(brshift(#outputlist - 1, 8), 8) + 1!@#&				outputlist[counter] = outputlist[counter] + 1!@#&!@#&				if outputlist[counter] > 255 then!@#&					outputlist[counter], outputlist[counter + 256], len = 255, 1, len + 1!@#&					snooze()!@#&				end!@#&!@#&				outputlist[len] = curbyte!@#&				curbit, curbyte, len = 1, 0, len + 1!@#&			end!@#&		end!@#&	end!@#&!@#&	packByte(ClearCode)!@#&!@#&	return function(incode)!@#&		if not incode then!@#&			if curcode then packByte(curcode) end!@#&			packByte(EOI)!@#&			outputlist[#outputlist + 1] = 0!@#&			return outputlist!@#&		end!@#&!@#&		if not curcode then!@#&			curcode = incode!@#&			return!@#&		end!@#&!@#&		curstring = curstring .. string.char(incode)!@#&		local thisCode = codes[curstring]!@#&!@#&		if thisCode then!@#&			curcode = thisCode!@#&		else!@#&			codes[curstring] = nextcode!@#&			nextcode = nextcode + 1!@#&!@#&			packByte(curcode)!@#&!@#&			if nextcode == MaxCode + 2 then!@#&				CodeSize = CodeSize + 1!@#&				MaxCode = math.pow(2, CodeSize) - 1!@#&			end!@#&!@#&			if nextcode == 4095 then!@#&				packByte(ClearCode)!@#&				CodeSize, MaxCode, nextcode, codes = startCodeSize, math.pow(2, startCodeSize) - 1, EOI + 1, {}!@#&			end!@#&!@#&			curcode, curstring = incode, string.char(incode)!@#&		end!@#&	end!@#&end!@#&!@#&local function compressInternal(inputlist, valRange)!@#&	if type(inputlist) ~= \"table\" and type(inputlist) ~= \"string\" then error(\"bbpack.compress: Expected: table, string or file handle\", 2) end!@#&!@#&	if not valRange then valRange = 256 end!@#&	if type(valRange) ~= \"number\" or valRange < 2 or valRange > 256 then error(\"bbpack.compress: Value range must be a number between 2 - 256.\", 2) end!@#&!@#&	if type(inputlist) == \"table\" and inputlist.close then!@#&		local templist!@#&		if inputlist.readAll then!@#&			templist = inputlist.readAll()!@#&		else!@#&			local len = 1!@#&			templist = {}!@#&			for thisByte in inputlist.read do!@#&				templist[len] = thisByte!@#&				len = len + 1!@#&			end!@#&		end!@#&		inputlist.close()!@#&		inputlist = templist!@#&	end!@#&!@#&	if type(inputlist) == \"string\" then inputlist = {inputlist:byte(1, #inputlist)} end!@#&!@#&	if #inputlist == 0 then return {} end!@#&!@#&	local compressIt = compressIterator(valRange)!@#&!@#&	local sleepCounter = 0!@#&	for i = 1, #inputlist do!@#&		compressIt(inputlist[i])!@#&!@#&		sleepCounter = sleepCounter + 1!@#&		if sleepCounter > 1023 then!@#&			sleepCounter = 0!@#&			snooze()!@#&		end!@#&	end!@#&!@#&	return compressIt(false)!@#&end!@#&!@#&local function decompressIterator(ClearCode, codelist)!@#&	local startCodeSize = 1!@#&	while math.pow(2, startCodeSize) < ClearCode do startCodeSize = startCodeSize + 1 end!@#&!@#&	local EOI, ClearCode = math.pow(2, startCodeSize) + 1, math.pow(2, startCodeSize)!@#&	startCodeSize = startCodeSize + 1!@#&!@#&	local lastcounter, curbyte, spot, CodeSize, MaxCode, maskbit, nextcode, codes, gotbytes = codelist[1], codelist[2], 3, startCodeSize, math.pow(2, startCodeSize) - 1, 1, EOI + 1, {}, 1!@#&	for i = 0, ClearCode - 1 do codes[i] = string.char(i) end!@#&!@#&	return function()!@#&		while true do!@#&			local curcode, curbit = 0, 1!@#&!@#&			for i = 1, CodeSize do!@#&				if band(curbyte, maskbit) == maskbit then curcode = curcode + curbit end!@#&				curbit, maskbit = curbit * 2, maskbit * 2!@#&!@#&				if maskbit > 128 and not (i == CodeSize and curcode == EOI) then!@#&					maskbit, curbyte, gotbytes = 1, codelist[spot], gotbytes + 1!@#&					spot = spot + 1!@#&!@#&					if gotbytes > lastcounter then!@#&						if curbyte == 0 then break end!@#&						lastcounter, gotbytes = curbyte, 1!@#&						curbyte = codelist[spot]!@#&						spot = spot + 1!@#&						snooze()!@#&					end!@#&				end!@#&			end!@#&!@#&			if curcode == ClearCode then!@#&				CodeSize, MaxCode, nextcode, codes = startCodeSize, math.pow(2, startCodeSize) - 1, EOI + 1, {}!@#&				for i = 0, ClearCode - 1 do codes[i] = string.char(i) end!@#&			elseif curcode ~= EOI then!@#&				if codes[nextcode - 1] then codes[nextcode - 1] = codes[nextcode - 1] .. codes[curcode]:sub(1, 1) else codes[nextcode - 1] = codes[curcode]:sub(1, 1) end!@#&!@#&				if nextcode < 4096 then!@#&					codes[nextcode] = codes[curcode]!@#&					nextcode = nextcode + 1!@#&				end!@#&!@#&				if nextcode - 2 == MaxCode then!@#&					CodeSize = CodeSize + 1!@#&					MaxCode = math.pow(2, CodeSize) - 1!@#&				end!@#&!@#&				return codes[curcode]!@#&			else return end!@#&		end!@#&	end!@#&end!@#&!@#&local function decompressInternal(codelist, outputText, valRange)!@#&	if type(codelist) ~= \"table\" then error(\"bbpack.decompress: Expected: table or file handle\", 2) end!@#&!@#&	if not valRange then valRange = 256 end!@#&	if type(valRange) ~= \"number\" or valRange < 2 or valRange > 256 then error(\"bbpack.decompress: Value range must be a number between 2 - 256.\", 2) end!@#&!@#&	if codelist.readLine then!@#&		codelist.close()!@#&		error(\"bbpack.decompress: Use binary-mode file handles\", 2)!@#&	elseif codelist.readAll then!@#&		codelist = codelist.readAll()!@#&		codelist = {codelist:byte(1, #codelist)}!@#&	elseif codelist.read then!@#&		local data, len = {}, 1!@#&		while true do!@#&			local amount = codelist.read()!@#&			data[len] = amount!@#&			len = len + 1!@#&!@#&			if amount == 0 then break end!@#&!@#&			for i = 1, amount do!@#&				data[len] = codelist.read()!@#&				len = len + 1!@#&			end!@#&!@#&			snooze()!@#&		end!@#&		codelist = data!@#&	elseif #codelist == 0 then return outputText and \"\" or {} end!@#&!@#&	local outputlist, decompressIt, len = {}, decompressIterator(valRange, codelist), 1!@#&!@#&	local sleepCounter = 0!@#&	while true do!@#&		local output = decompressIt()!@#&!@#&		if output then!@#&			outputlist[len] = output!@#&			len = len + 1!@#&		else break end!@#&	end!@#&!@#&	outputlist = table.concat(outputlist)!@#&!@#&	return outputText and outputlist or {outputlist:byte(1, #outputlist)}!@#&end!@#&!@#&local function uploadPasteInternal(name, content)!@#&	if type(name) ~= \"string\" or (type(content) ~= \"string\" and type(content) ~= \"table\") then error(\"bbpack.uploadPaste: Expected: (string) paste name, (string or file handle) paste content\", 2) end!@#&!@#&	if type(content) == \"table\" then!@#&		if content.readLine then!@#&			local temp = content.readAll()!@#&			content.close()!@#&			content = temp!@#&		else!@#&			if content.close then content.close() end!@#&			error(\"bbpack.uploadPaste: Use text-mode file handles\", 2)!@#&		end!@#&	end!@#&!@#&	local webHandle = http.post(!@#&		\"https://pastebin.com/api/api_post.php\", !@#&		\"api_option=paste&\" ..!@#&		\"api_dev_key=147764e5c6ac900a3015d77811334df1&\" ..!@#&		\"api_paste_format=lua&\" ..!@#&		\"api_paste_name=\" .. textutils.urlEncode(name) .. \"&\" ..!@#&		\"api_paste_code=\" .. textutils.urlEncode(content))!@#&!@#&	if webHandle then!@#&		local response = webHandle.readAll()!@#&		webHandle.close()!@#&		return string.match(response, \"[^/]+$\")!@#&	else error(\"Connection to pastebin failed. http API config in ComputerCraft.cfg is enabled, but may be set to block pastebin - or pastebin servers may be busy.\") end!@#&end!@#&!@#&local function downloadPasteInternal(pasteID)!@#&	if type(pasteID) ~= \"string\" then error(\"bbpack.downloadPaste: Expected: (string) paste ID\", 2) end!@#&!@#&	local webHandle = http.get(\"https://pastebin.com/raw/\" .. textutils.urlEncode(pasteID))!@#&!@#&	if webHandle then!@#&		local incoming = webHandle.readAll()!@#&		webHandle.close()!@#&		return incoming!@#&	else error(\"Connection to pastebin failed. http API config in ComputerCraft.cfg is enabled, but may be set to block pastebin - or pastebin servers may be busy.\") end!@#&end!@#&!@#&if shell then!@#&	---------------------------------------------!@#&	------------     Main Program    ------------!@#&	---------------------------------------------!@#&!@#&	if not bbpack then os.loadAPI(\"bbpack\") end!@#&!@#&	local args = {...}!@#&	if #args > 0 then args[1] = args[1]:lower() end!@#&!@#&	if #args < 1 or not (args[1] == \"put\" or args[1] == \"get\" or args[1] == \"fileput\" or args[1] == \"fileget\" or args[1] == \"mount\" or args[1] == \"compress\" or args[1] == \"decompress\" or args[1] == \"cluster\" or args[1] == \"update\") then!@#&		textutils.pagedPrint(\"Usage:\\n\")!@#&!@#&		textutils.pagedPrint(\"Uploads specified file or directory:\")!@#&		textutils.pagedPrint(\"bbpack put [file/directory name]\\n\")!@#&!@#&		textutils.pagedPrint(\"Dumps paste into specified file or directory:\")!@#&		textutils.pagedPrint(\"bbpack get <pasteID> [file/directory name]\\n\")!@#&!@#&		textutils.pagedPrint(\"Writes specified file or directory to archive file:\")!@#&		textutils.pagedPrint(\"bbpack fileput [file/directory name] <target file>\\n\")!@#&!@#&		textutils.pagedPrint(\"Unpacks archive file to specified file or directory:\")!@#&		textutils.pagedPrint(\"bbpack fileget <source file> [file/directory name]\\n\")!@#&!@#&		print(\"For the above options, if [file/directory name] is omitted the root of the drive will be used instead.\\n\")!@#&!@#&		textutils.pagedPrint(\"Enables automatic compression on hdd and compresses all existing files:\")!@#&		textutils.pagedPrint(\"bbpack compress\\n\")!@#&!@#&		textutils.pagedPrint(\"Disables automatic compression on hdd and decompresses all existing files:\")!@#&		textutils.pagedPrint(\"bbpack decompress\\n\")!@#&!@#&		textutils.pagedPrint(\"Mounts a given URL as the specified local file:\")!@#&		textutils.pagedPrint(\"bbpack mount <URL> <fileName>\\n\")!@#&!@#&		textutils.pagedPrint(\"Turns the system into a server for the specified cluster:\")!@#&		textutils.pagedPrint(\"bbpack cluster <clusterName>\\n\")!@#&!@#&		textutils.pagedPrint(\"Mounts the specified cluster as a drive:\")!@#&		textutils.pagedPrint(\"bbpack mount <clusterName>\\n\")!@#&!@#&		textutils.pagedPrint(\"Updates package, reboots, and instructs all mounted cluster servers to do the same:\")!@#&		textutils.pagedPrint(\"bbpack update\\n\")!@#&!@#&		return!@#&	end!@#&!@#&	if (args[1] == \"put\" or args[1] == \"get\") and not http then!@#&		print(\"BBPack's pastebin functionality requires that the http API be enabled.\")!@#&		print(\"Shut down MineCraft game/server, set http_enable to true in ComputerCraft.cfg, then restart.\")!@#&		error()!@#&	end!@#&!@#&	---------------------------------------------!@#&	------------      Uploading      ------------!@#&	---------------------------------------------!@#&!@#&	if args[1] == \"put\" or args[1] == \"fileput\" then!@#&		local toFile!@#&		if args[1] == \"fileput\" then toFile = table.remove(args, #args) end!@#&!@#&		local uploadName, parent!@#&!@#&		if not args[2] then!@#&			print(\"Full system upload - are you sure? (y/n)\")!@#&			if read():sub(1, 1):lower() ~= \"y\" then!@#&				print(\"Aborted.\")!@#&				error()!@#&			end!@#&!@#&			uploadName = os.getComputerLabel()!@#&			if not uploadName then!@#&				print(\"Enter paste title:\")!@#&				uploadName = read()!@#&			end!@#&!@#&			args[2] = \"\"!@#&		end!@#&!@#&		local target, output = shell.resolve(args[2]), {}!@#&		uploadName = uploadName or target!@#&!@#&		if not fs.exists(target) then!@#&			print(\"Invalid target.\")!@#&			error()!@#&		end!@#&!@#&		if fs.isDir(target) then!@#&			local fileList = fs.list(target)!@#&			parent = target!@#&			while #fileList > 0 do!@#&				if fs.isDir(shell.resolve(fs.combine(parent, fileList[#fileList]))) then!@#&					local thisDir = table.remove(fileList, #fileList)!@#&					local newList = fs.list(shell.resolve(fs.combine(parent, thisDir)))!@#&					for i = 1, #newList do fileList[#fileList + 1] = fs.combine(thisDir, newList[i]) end!@#&					if #newList == 0 then output[#output + 1] = thisDir end!@#&				else output[#output + 1] = table.remove(fileList, #fileList) end!@#&			end!@#&			target = output!@#&			output = {}!@#&		else parent, target = \"\", {target} end!@#&!@#&		snooze()!@#&!@#&		for i = #target, 1, -1 do!@#&			if fs.combine(parent, target[i]) ~= shell.getRunningProgram() and not (parent == \"\" and fs.getDrive(target[i]) ~= \"hdd\") then!@#&				if fs.isDir(fs.combine(parent, target[i])) then!@#&					print(target[i])!@#&					output[#output + 1] = {target[i], true}!@#&				else!@#&					print(target[i])!@#&					output[#output + 1] = {target[i], toBase64Internal(compressInternal(fs.open(fs.combine(parent, target[i]), \"rb\")))}!@#&					snooze()!@#&				end!@#&			end!@#&		end!@#&!@#&		if toFile then!@#&			output = textutils.serialize(output)!@#&			if fs.getFreeSpace(shell.dir()) < #output then error(\"Output \"..#output..\" bytes, disk space available \"..fs.getFreeSpace(shell.dir())..\" bytes: file not written.\") end!@#&!@#&			write(\"Writing to file \\\"\" .. toFile .. \"\\\"... \")!@#&!@#&			toFile = fs.open(shell.resolve(toFile), \"w\")!@#&			toFile.write(output)!@#&			toFile.close()!@#&			print(\"Success.\")!@#&		else!@#&			write(\"Connecting to pastebin.com... \")!@#&			local response = uploadPasteInternal(uploadName, textutils.serialize(output))!@#&			print(\"Success.\")!@#&!@#&			print(\"Uploaded to paste ID: \" .. response)!@#&			print(\"Run \\\"bbpack get \" .. response .. (parent == \"\" and \"\" or \" \" .. parent) .. \"\\\" to download.\")!@#&		end!@#&!@#&	---------------------------------------------!@#&	------------     Downloading     ------------!@#&	---------------------------------------------!@#&!@#&	elseif args[1] == \"get\" or args[1] == \"fileget\" then!@#&		local incoming!@#&		if args[1] == \"fileget\" then!@#&			write(\"Attempting to read from archive... \")!@#&			if not fs.exists(shell.resolve(args[2])) then error(\"Can't find \\\"\" .. shell.resolve(args[2]) .. \"\\\".\") end!@#&			local inFile = fs.open(shell.resolve(args[2]), \"r\")!@#&			incoming = textutils.unserialize(inFile.readAll())!@#&			inFile.close()!@#&			print(\"Success.\")!@#&		else!@#&			write(\"Connecting to pastebin.com... \")!@#&			incoming = textutils.unserialize(downloadPasteInternal(args[2]))!@#&			print(\"Downloaded.\")!@#&		end!@#&!@#&		local function getParent(path)!@#&			local pos = #path!@#&			if path:sub(pos,pos) == \"/\" then pos = pos - 1 end!@#&			while pos > 0 and path:sub(pos,pos) ~= \"/\" do pos = pos - 1 end!@#&			return pos > 0 and path:sub(1, pos - 1) or \"\"!@#&		end!@#&!@#&		local function writeFile(filePath, fileContent)!@#&			local path = fs.combine(shell.resolve(\".\"), filePath)!@#&			if not fs.exists(getParent(path)) then fs.makeDir(getParent(path)) end!@#&			if fs.getFreeSpace(shell.dir()) < #fileContent then error(path..\" \"..#fileContent..\" bytes, disk space available \"..fs.getFreeSpace(shell.dir())..\" bytes: file not written.\") end!@#&!@#&			snooze()!@#&!@#&			local myFile = fs.open(path, \"wb\")!@#&			for i = 1, #fileContent do myFile.write(fileContent[i]) end!@#&			myFile.close()!@#&!@#&			snooze()!@#&		end!@#&!@#&		args[3] = args[3] or \"\"!@#&		if args[3] ~= \"\" and #incoming == 1 then!@#&			print(incoming[1][1] .. \" => \"..args[3])!@#&			writeFile(args[3], decompressInternal(fromBase64Internal(incoming[1][2])))!@#&		else!@#&			for i = 1, #incoming do!@#&				print(incoming[i][1])!@#&				if type(incoming[i][2]) == \"string\" then!@#&					writeFile(fs.combine(args[3], incoming[i][1]), decompressInternal(fromBase64Internal(incoming[i][2])))!@#&				else fs.makeDir(fs.combine(shell.resolve(\".\"), fs.combine(args[3], incoming[i][1]))) end!@#&				incoming[i] = nil!@#&			end	!@#&		end!@#&!@#&	---------------------------------------------!@#&	------------     Compress FS     ------------!@#&	---------------------------------------------!@#&!@#&	elseif args[1] == \"compress\" then!@#&		bbpack.fileSys(true)!@#&		print(\"Filesystem compression enabled.\")!@#&!@#&	---------------------------------------------!@#&	------------    Decompress FS    ------------!@#&	---------------------------------------------!@#&!@#&	elseif args[1] == \"decompress\" then!@#&		print(bbpack.fileSys(false) and \"Filesystem compression disabled.\" or \"Filesystem compression disabled, but space is insufficient to decompress all files.\")!@#&!@#&	---------------------------------------------!@#&	------------        Mount        ------------!@#&	---------------------------------------------!@#&!@#&	elseif args[1] == \"mount\" then!@#&		bbpack.fileSys(args[2], args[3] and shell.resolve(args[3]))!@#&		print(\"Successfully mounted.\")!@#&!@#&	---------------------------------------------!@#&	------------       Cluster       ------------!@#&	---------------------------------------------!@#&!@#&	elseif args[1] == \"cluster\" then!@#&		local cluster, protocol = args[2], rednet.host and args[2]!@#&!@#&		rfs.makeDir(cluster)!@#&!@#&		for _, side in pairs(rs.getSides()) do if peripheral.getType(side) == \"modem\" then rednet.open(side) end end!@#&!@#&		print(\"Running as part of cluster \\\"\" .. cluster .. \"\\\"...\")!@#&!@#&		local function locFile(path)!@#&			local matches = rfs.find(path .. \"*\")!@#&!@#&			for i = 1, #matches do!@#&				local thisMatch = matches[i]!@#&				if #thisMatch == #path + 3 and thisMatch:sub(1, #path) == path then return thisMatch end!@#&			end!@#&!@#&			return nil!@#&		end!@#&		!@#&		return (function() while true do!@#&			local sender, msg = rednet.receive(protocol)!@#&!@#&			if type(msg) == \"table\" and msg.cluster == cluster then!@#&				local command, par1, par2 = unpack(msg)!@#&!@#&				if command == \"rollcall\" then!@#&					rednet.send(sender, {[\"cluster\"] = cluster, [\"uuid\"] = msg.uuid, \"rollcallResponse\"}, protocol)!@#&				elseif command == \"isDir\" then!@#&					rednet.send(sender, {[\"cluster\"] = cluster, [\"uuid\"] = msg.uuid, rfs.isDir(par1)}, protocol)!@#&				elseif command == \"makeDir\" then!@#&					rfs.makeDir(par1)!@#&				elseif command == \"exists\" then!@#&					rednet.send(sender, {[\"cluster\"] = cluster, [\"uuid\"] = msg.uuid, type(locFile(par1)) == \"string\"}, protocol)!@#&				elseif command == \"getFreeSpace\" then!@#&					rednet.send(sender, {[\"cluster\"] = cluster, [\"uuid\"] = msg.uuid, {rfs.getFreeSpace(\"\") - 10000, os.getComputerID()}}, protocol)!@#&				elseif command == \"getSize\" then!@#&					local path = locFile(par1)!@#&					rednet.send(sender, {[\"cluster\"] = cluster, [\"uuid\"] = msg.uuid, path and rfs.getSize(path) or 0}, protocol)!@#&				elseif command == \"delete\" then!@#&					local path = locFile(par1)!@#&					if path then rfs.delete(path) end!@#&				elseif command == \"list\" then!@#&					local list = rfs.list(par1)!@#&!@#&					for i = 1, #list do!@#&						local entry = list[i]!@#&						if not fs.isDir(fs.combine(par1, entry)) then list[i] = entry:sub(1, -4) end!@#&					end!@#&!@#&					rednet.send(sender, {[\"cluster\"] = cluster, [\"uuid\"] = msg.uuid, list}, protocol)!@#&				elseif command == \"get\" then!@#&					local path = locFile(par1)!@#&!@#&					if path then!@#&						local file, content = rfs.open(path, \"rb\")!@#&!@#&						if file.readAll then!@#&							content = file.readAll()!@#&						else!@#&							content = {}!@#&							local counter = 1!@#&							for byte in file.read do!@#&								content[counter] = byte!@#&								counter = counter + 1!@#&							end!@#&							content = string.char(unpack(content))!@#&						end!@#&!@#&						file.close()!@#&!@#&						rednet.send(sender, {[\"cluster\"] = cluster, [\"uuid\"] = msg.uuid, {tonumber(path:sub(-3)), content}}, protocol)!@#&					end!@#&					!@#&					rednet.send(sender, {[\"cluster\"] = cluster, [\"uuid\"] = msg.uuid, false}, protocol)!@#&				elseif command == \"put\" then!@#&					local file = rfs.open(par1, \"wb\")!@#&!@#&					if term.setPaletteColour then!@#&						file.write(par2)!@#&					else!@#&						par2 = {par2:byte(1, #par2)}!@#&						for i = 1, #par2 do file.write(par2[i]) end!@#&					end!@#&!@#&					file.close()!@#&				elseif command == \"update\" then!@#&					local file = rfs.open(\"bbpack\", \"w\")!@#&					file.write(downloadPasteInternal(\"cUYTGbpb\"))!@#&					file.close()!@#&!@#&					os.reboot()!@#&				end!@#&			end!@#&		end end)()!@#&!@#&	---------------------------------------------!@#&	------------        Update       ------------!@#&	---------------------------------------------!@#&!@#&	elseif args[1] == \"update\" then!@#&		bbpack.update()!@#&	end!@#&else!@#&	---------------------------------------------!@#&	------------     Load As API     ------------!@#&	---------------------------------------------!@#&!@#&	compress =      compressInternal!@#&	decompress =    decompressInternal!@#&!@#&	toBase64 =      toBase64Internal!@#&	fromBase64 =    fromBase64Internal!@#&!@#&	uploadPaste =   uploadPasteInternal!@#&	downloadPaste = downloadPasteInternal!@#&!@#&	function open(file, mode, valRange)!@#&		if (type(file) ~= \"table\" and type(file) ~= \"string\") or type(mode) ~= \"string\" then error(\"bbpack.open: Expected: file (string or handle), mode (string). Got: \" .. type(file) .. \", \" .. type(mode) .. \".\", 2) end!@#&!@#&		mode = mode:lower()!@#&		local binary, append, read, write, newhandle = mode:find(\"b\") ~= nil, mode:find(\"a\") ~= nil, mode:find(\"r\") ~= nil, mode:find(\"w\") ~= nil, {}!@#&!@#&		if not valRange then valRange = 256 end!@#&		if type(valRange) ~= \"number\" or valRange < 2 or valRange > 256 then error(\"bbpack.decompress: Value range must be a number between 2 - 256.\", 2) end!@#&!@#&		if not (append or write or read) then error(\"bbpack.open: Invalid file mode: \" .. mode, 2) end!@#&!@#&		if type(file) == \"string\" then!@#&			if append and rfs.exists(file) then!@#&				local oldfile = open(file, binary and \"rb\" or \"r\", valRange)!@#&				if not oldfile then return nil end!@#&				local olddata = oldfile.readAll()!@#&				oldfile.close()!@#&!@#&				newhandle = open(file, binary and \"wb\" or \"w\", valRange)!@#&				newhandle.write(olddata)!@#&				return newhandle!@#&			end!@#&!@#&			file = rfs.open(file, (read and \"r\" or \"w\") .. \"b\")!@#&			if not file then return nil end!@#&		else!@#&			if (write and (file.writeLine or not file.write)) or (read and not file.read) then error(\"bbpack.open: Handle / mode mismatch.\", 2) end!@#&!@#&			local tempfile, keys = {}, {}!@#&!@#&			for key, _ in pairs(file) do keys[#keys + 1] = key end!@#&			for i = 1, #keys do!@#&				tempfile[keys[i]] = file[keys[i]]!@#&				file[keys[i]] = nil!@#&			end!@#&!@#&			file = tempfile!@#&		end!@#&!@#&		if read then!@#&			local data = {}!@#&			if file.readAll then!@#&				local len = 1!@#&!@#&				while true do!@#&					local amount = file.read()!@#&					data[len] = string.char(amount)!@#&					len = len + 1!@#&!@#&					if amount == 0 then break end!@#&!@#&					data[len] = file.read(amount)!@#&					len = len + 1!@#&				end!@#&!@#&				data = table.concat(data)!@#&				data = {data:byte(1, #data)}!@#&			else!@#&				local len = 1!@#&!@#&				while true do!@#&					local amount = file.read()!@#&					data[len] = amount!@#&					len = len + 1!@#&!@#&					if amount == 0 then break end!@#&!@#&					for i = 1, amount do!@#&						data[len] = file.read()!@#&						len = len + 1!@#&					end!@#&!@#&					snooze()!@#&				end!@#&			end!@#&!@#&			local decompressIt, outputlist = decompressIterator(valRange, data), \"\"!@#&!@#&			if binary then!@#&				function newhandle.read(amount)!@#&					if not outputlist then return nil end!@#&!@#&					if type(amount) ~= \"number\" then!@#&						if #outputlist == 0 then!@#&							outputlist = decompressIt()!@#&							if not outputlist then return nil end!@#&						end!@#&!@#&						local result = outputlist:byte(1)!@#&						outputlist = outputlist:sub(2)!@#&						return result!@#&					else!@#&						while #outputlist < amount do!@#&							local new = decompressIt()!@#&!@#&							if not new then!@#&								new = outputlist!@#&								outputlist = nil!@#&								if #new > 0 then return new else return end!@#&							end!@#&!@#&							outputlist = outputlist .. new!@#&						end!@#&!@#&						local result = outputlist:sub(1, amount)!@#&						outputlist = outputlist:sub(amount + 1)!@#&						return result!@#&					end!@#&				end!@#&!@#&				function newhandle.readAll()!@#&					if not outputlist then return nil end!@#&!@#&					local result, len = {outputlist}, 2!@#&					for data in decompressIt do!@#&						result[len] = data!@#&						len = len + 1!@#&					end!@#&!@#&					outputlist = nil!@#&!@#&					return table.concat(result)!@#&				end!@#&			else!@#&				function newhandle.readLine()!@#&					if not outputlist then return nil end!@#&!@#&					while not outputlist:find(\"\\n\") do!@#&						local new = decompressIt()!@#&!@#&						if not new then!@#&							new = outputlist!@#&							outputlist = nil!@#&							if #new > 0 then return new else return end!@#&						end!@#&!@#&						outputlist = outputlist .. new!@#&					end!@#&!@#&					local result = outputlist:sub(1, outputlist:find(\"\\n\") - 1)!@#&					outputlist = outputlist:sub(outputlist:find(\"\\n\") + 1)!@#&!@#&					if outputlist:byte(1) == 13 then outputlist = outputlist:sub(2) end!@#&!@#&					return result!@#&				end!@#&!@#&				function newhandle.readAll()!@#&					if not outputlist then return nil end!@#&!@#&					local result, len = {outputlist}, 2!@#&					for data in decompressIt do!@#&						result[len] = data!@#&						len = len + 1!@#&					end!@#&!@#&					outputlist = nil!@#&!@#&					return table.concat(result)!@#&				end!@#&			end!@#&!@#&			function newhandle.extractHandle()!@#&				local keys = {}!@#&				for key, _ in pairs(newhandle) do keys[#keys + 1] = key end!@#&				for i = 1, #keys do newhandle[keys[i]] = nil end!@#&				return file!@#&			end!@#&		else!@#&			local compressIt = compressIterator(valRange)!@#&!@#&			if binary then!@#&				function newhandle.write(data)!@#&					if type(data) == \"number\" then!@#&						compressIt(data)!@#&					elseif type(data) == \"string\" then!@#&						data = {data:byte(1, #data)}!@#&						for i = 1, #data do compressIt(data[i]) end!@#&					else error(\"bbpackHandle.write: bad argument #1 (string or number expected, got \" .. type(data) .. \")\", 2) end!@#&				end!@#&			else!@#&				function newhandle.write(text)!@#&					text = tostring(text)!@#&					text = {text:byte(1, #text)}!@#&					for i = 1, #text do compressIt(text[i]) end!@#&				end!@#&!@#&				function newhandle.writeLine(text)!@#&					text = tostring(text)!@#&					text = {text:byte(1, #text)}!@#&					for i = 1, #text do compressIt(text[i]) end!@#&					compressIt(10)!@#&				end!@#&			end!@#&!@#&			newhandle.flush = file.flush!@#&!@#&			function newhandle.extractHandle()!@#&				local output, fWrite = compressIt(false), file.write!@#&				for j = 1, #output do fWrite(output[j]) end!@#&				local keys = {}!@#&				for key, _ in pairs(newhandle) do keys[#keys + 1] = key end!@#&				for i = 1, #keys do newhandle[keys[i]] = nil end!@#&				return file!@#&			end!@#&		end!@#&!@#&		function newhandle.close()!@#&			newhandle.extractHandle().close()!@#&		end!@#&!@#&		return newhandle!@#&	end!@#&!@#&	function lines(file)!@#&		if type(file) == \"string\" then!@#&			file = open(file, \"r\")!@#&		elseif type(file) ~= \"table\" or not file.readLine then!@#&			error(\"bbpack.lines: Expected: file (string or \\\"r\\\"-mode handle).\", 2)!@#&		end!@#&!@#&		return function()!@#&			if not file.readLine then return nil end!@#&!@#&			local line = file.readLine()!@#&			if line then!@#&				return line!@#&			else!@#&				file.close()!@#&				return nil!@#&			end!@#&		end!@#&	end!@#&	!@#&	local function dividePath(path)!@#&		local result = {}!@#&		for element in path:gmatch(\"[^/]+\") do result[#result + 1] = element end!@#&		return result!@#&	end!@#&	!@#&	local function getGithubRepo(repo)!@#&		local elements = dividePath(repo)!@#&		for i = 1, #elements do if table.remove(elements, 1) == \"github.com\" then break end end!@#&		if #elements < 2 or elements[3] == \"raw\" then return end!@#&		repo = elements[1] .. \"/\" .. elements[2]!@#&		local branch = (elements[3] == \"tree\") and elements[4] or \"master\"!@#&		!@#&		local webHandle = http.get(\"https://api.github.com/repos/\" .. repo .. \"/git/trees/\" .. branch .. \"?recursive=1\")!@#&		if not webHandle then return end!@#&		local json = textutils.unserialize(webHandle.readAll():gsub(\"\\10\", \"\"):gsub(\" \", \"\"):gsub(\"%[\", \"{\"):gsub(\"]\", \"}\"):gsub(\"{\\\"\", \"{[\\\"\"):gsub(\",\\\"\", \",[\\\"\"):gsub(\"\\\":\", \"\\\"]=\"))!@#&		webHandle.close()!@#&		if json.message == \"Not Found\" then return end!@#&		!@#&		local tree, results = json.tree, {}!@#&		!@#&		for i = 1, #tree do if tree[i].type == \"blob\" then!@#&			local path, cur = tree[i].path, results!@#&			local elements = dividePath(path)!@#&			!@#&			for i = 1, #elements - 1 do!@#&				local element = elements[i]!@#&				if not cur[element] then cur[element] = {} end!@#&				cur = cur[element]!@#&			end!@#&			!@#&			cur[elements[#elements]] = \"https://raw.githubusercontent.com/\" .. repo .. \"/\" .. branch .. \"/\" .. path!@#&		end end!@#&		!@#&		if #elements > 4 then for i = 5, #elements do results = results[elements[i]] end end!@#&		!@#&		return (type(results) == \"table\") and results!@#&	end!@#&	!@#&	local configTable = {[\"webMounts\"] = {}, [\"githubRepos\"] = {}, [\"clusters\"] = {}, [\"compressedFS\"] = false}!@#&!@#&	if fs.exists(\".bbpack.cfg\") then!@#&		local file = rfs and rfs.open(\".bbpack.cfg\", \"r\") or fs.open(\".bbpack.cfg\", \"r\")!@#&		local input = textutils.unserialize(file.readAll())!@#&		file.close()!@#&		!@#&		if type(input) == \"table\" then!@#&			if type(input.webMounts) == \"table\" then configTable.webMounts = input.webMounts end!@#&			if type(input.githubRepos) == \"table\" then configTable.githubRepos = input.githubRepos end!@#&			if type(input.clusters) == \"table\" then configTable.clusters = input.clusters end!@#&			if type(input.compressedFS) == \"boolean\" then configTable.compressedFS = input.compressedFS end!@#&		end!@#&	end!@#&	!@#&	local webMountList, clusterList, repoList = configTable.webMounts, configTable.clusters, {}!@#&	for path, url in pairs(configTable.githubRepos) do repoList[path] = getGithubRepo(url) end!@#&	if next(clusterList) then for _, side in pairs(rs.getSides()) do if peripheral.getType(side) == \"modem\" then rednet.open(side) end end end!@#&	local blacklist = {\"bbpack\", \"bbpack.lua\", \"startup\", \"startup.lua\", \".settings\", \".gif\", \".zip\", \".bbpack.cfg\"}!@#&!@#&	if not _G.rfs then!@#&		local rfs, ramdisk = {}, {}!@#&!@#&		for key, value in pairs(fs) do rfs[key] = value end!@#&		!@#&		local function clusterTalk(cluster, answer, ...)!@#&			local target, uuid, result, sender, msg = clusterList[cluster], math.random(1, 0x7FFFFFFF), {}!@#&!@#&			for i = 1, #target do rednet.send(target[i], {[\"cluster\"] = cluster, [\"uuid\"] = uuid, unpack(arg)}, rednet.host and cluster) end!@#&!@#&			if answer then!@#&				for i = 1, #target do!@#&					repeat sender, msg = rednet.receive(rednet.host and cluster) until type(msg) == \"table\" and msg.cluster == cluster and msg.uuid == uuid!@#&					result[i] = msg[1]!@#&				end!@#&!@#&				return result!@#&			end!@#&		end!@#&!@#&		_G.fs.list = function(path)!@#&			if type(path) ~= \"string\" then error(\"bad argument #1 (expected string, got \" .. type(path) .. \")\", 2 ) end!@#&			!@#&			path = fs.combine(path, \"\")!@#&			local elements = dividePath(path)!@#&!@#&			if not fs.isDir(path) then error(\"Not a directory\", 2) end!@#&!@#&			if fs.getDrive(path) == \"hdd\" then!@#&				local results = rfs.list(path)!@#&!@#&				for i = 1, #results do!@#&					local thisResult = results[i]!@#&					if thisResult:sub(-4) == \".bbp\" then results[i] = thisResult:sub(1, -5) end!@#&				end!@#&!@#&				for mount in pairs(webMountList) do!@#&					local mountElements = dividePath(mount)!@#&!@#&					if #elements == #mountElements - 1 then!@#&						local match = true!@#&!@#&						for i = 1, #elements do if elements[i] ~= mountElements[i] then!@#&							match = false!@#&							break!@#&						end end!@#&!@#&						if match then results[#results + 1] = mountElements[#mountElements] end!@#&					end!@#&				end!@#&!@#&				if path == \"\" then!@#&					results[#results + 1] = \"ram\"!@#&					for cluster in pairs(clusterList) do results[#results + 1] = cluster end!@#&					for repo in pairs(repoList) do results[#results + 1] = repo end!@#&				end!@#&!@#&				table.sort(results)!@#&!@#&				return results!@#&			elseif clusterList[elements[1]] then!@#&				local results = {}!@#&!@#&				local lists = clusterTalk(elements[1], true, \"list\", path)!@#&				for i = 1, #clusterList[elements[1]] do!@#&					local subList = lists[i]!@#&!@#&					for i = 1, #subList do!@#&						local found, thisSub = false, subList[i]!@#&!@#&						for j = 1, #results do if results[j] == thisSub then!@#&							found = true!@#&							break!@#&						end end!@#&!@#&						if not found then results[#results + 1] = thisSub end!@#&					end!@#&				end!@#&!@#&				table.sort(results)!@#&!@#&				return results!@#&			elseif elements[1] == \"ram\" or repoList[elements[1]] then!@#&				local cur, results = (elements[1] == \"ram\") and ramdisk or repoList[elements[1]], {}!@#&!@#&				for i = 2, #elements do cur = cur[elements[i]] end!@#&!@#&				for entry in pairs(cur) do results[#results + 1] = entry end!@#&!@#&				table.sort(results)!@#&!@#&				return results!@#&			else!@#&				return rfs.list(path)!@#&			end!@#&		end!@#&!@#&		_G.fs.exists = function(path)!@#&			if type(path) ~= \"string\" then error(\"bad argument #1 (expected string, got \" .. type(path) .. \")\", 2 ) end!@#&			path = fs.combine(path, \"\")!@#&			local elements = dividePath(path)!@#&!@#&			if webMountList[path] then!@#&				return true!@#&			elseif clusterList[elements[1]] then!@#&				if #elements == 1 then return true end!@#&				local list = clusterTalk(elements[1], true, \"exists\", path)!@#&				for i = 1, #list do if list[i] then return true end end!@#&				return false!@#&			elseif elements[1] == \"ram\" or repoList[elements[1]] then!@#&				local cur = (elements[1] == \"ram\") and ramdisk or repoList[elements[1]]!@#&!@#&				for i = 2, #elements do!@#&					cur = cur[elements[i]]!@#&					if not cur then return false end!@#&				end!@#&!@#&				return true!@#&			else!@#&				return rfs.exists(path..\".bbp\") or rfs.exists(path)!@#&			end!@#&		end!@#&!@#&		_G.fs.isDir = function(path)!@#&			if type(path) ~= \"string\" then error(\"bad argument #1 (expected string, got \" .. type(path) .. \")\", 2 ) end!@#&			if not fs.exists(path) then return false end!@#&			path = fs.combine(path, \"\")!@#&			local elements = dividePath(path)!@#&!@#&			if clusterList[elements[1]] then!@#&				if #elements == 1 then return true end!@#&				local list = clusterTalk(elements[1], true, \"isDir\", path)!@#&				return list[1]!@#&			elseif elements[1] == \"ram\" or repoList[elements[1]] then!@#&				local cur = (elements[1] == \"ram\") and ramdisk or repoList[elements[1]]!@#&!@#&				for i = 2, #elements do!@#&					cur = cur[elements[i]]!@#&				end!@#&!@#&				return type(cur) == \"table\"!@#&			else!@#&				return rfs.isDir(path)!@#&			end!@#&		end!@#&!@#&		_G.fs.isReadOnly = function(path)!@#&			if type(path) ~= \"string\" then error(\"bad argument #1 (expected string, got \" .. type(path) .. \")\", 2 ) end!@#&			path = fs.combine(path, \"\")!@#&			local elements = dividePath(path)!@#&!@#&			if webMountList[path] or repoList[elements[1]] then!@#&				return true!@#&			elseif clusterList[elements[1]] or elements[1] == \"ram\" then!@#&				return false!@#&			else!@#&				return rfs.isReadOnly(rfs.exists(path..\".bbp\") and (path..\".bbp\") or path)!@#&			end!@#&		end!@#&!@#&		_G.fs.getDrive = function(path)!@#&			if type(path) ~= \"string\" then error(\"bad argument #1 (expected string, got \" .. type(path) .. \")\", 2 ) end!@#&			path = fs.combine(path, \"\")!@#&			local elements = dividePath(path)!@#&!@#&			if clusterList[elements[1]] or elements[1] == \"ram\" or repoList[elements[1]] then!@#&				return fs.exists(path) and elements[1]!@#&			else!@#&				return rfs.getDrive(rfs.exists(path..\".bbp\") and (path..\".bbp\") or path)!@#&			end!@#&		end!@#&!@#&		_G.fs.getSize = function(path)!@#&			if type(path) ~= \"string\" then error(\"bad argument #1 (expected string, got \" .. type(path) .. \")\", 2 ) end!@#&			path = fs.combine(path, \"\")!@#&			local elements = dividePath(path)!@#&!@#&			if webMountList[path] or repoList[elements[1]] then!@#&				return 0!@#&			elseif clusterList[elements[1]] then!@#&				if #elements == 1 then return 0 end!@#&				if not fs.exists(path) then error(\"No such file\", 2) end!@#&!@#&				local size, list = 0, clusterTalk(elements[1], true, \"getSize\", path)!@#&				for i = 1, #clusterList[elements[1]] do size = size + list[i] end!@#&				return size!@#&			elseif elements[1] == \"ram\" then!@#&				local cur = ramdisk!@#&!@#&				for i = 2, #elements do!@#&					cur = cur[elements[i]]!@#&					if not cur then error(\"No such file\", 2) end!@#&				end!@#&!@#&				return type(cur) == \"string\" and #cur or 0!@#&			else!@#&				return rfs.getSize(rfs.exists(path..\".bbp\") and (path..\".bbp\") or path)!@#&			end!@#&		end!@#&!@#&		_G.fs.getFreeSpace = function(path)!@#&			if type(path) ~= \"string\" then error(\"bad argument #1 (expected string, got \" .. type(path) .. \")\", 2 ) end!@#&			path = fs.combine(path, \"\")!@#&			local elements = dividePath(path)!@#&!@#&			if clusterList[elements[1]] then!@#&				local size, list = 0, clusterTalk(elements[1], true, \"getFreeSpace\")!@#&				for i = 1, #clusterList[elements[1]] do size = size + list[i][1] end!@#&				return size!@#&			elseif elements[1] == \"ram\" then!@#&				return math.huge!@#&			elseif repoList[elements[1]] then!@#&				return 0!@#&			else!@#&				return rfs.getFreeSpace(path)!@#&			end!@#&		end!@#&!@#&		_G.fs.makeDir = function(path)!@#&			if type(path) ~= \"string\" then error(\"bad argument #1 (expected string, got \" .. type(path) .. \")\", 2 ) end!@#&			path = fs.combine(path, \"\")!@#&			local elements = dividePath(path)!@#&!@#&			if fs.exists(path) then!@#&				if fs.isDir(path) then!@#&					return!@#&				else!@#&					error(\"File exists\", 2)!@#&				end!@#&			end!@#&!@#&			if clusterList[elements[1]] then!@#&				clusterTalk(elements[1], false, \"makeDir\", path)!@#&			elseif elements[1] == \"ram\" then!@#&				local cur = ramdisk!@#&!@#&				for i = 2, #elements do!@#&					local next = cur[elements[i]]!@#&!@#&					if next then!@#&						cur = next!@#&					else!@#&						cur[elements[i]] = {}!@#&						cur = cur[elements[i]]!@#&					end!@#&				end!@#&			elseif repoList[elements[1]] then!@#&				error(\"Access denied\", 2)!@#&			else!@#&				return rfs.makeDir(path)!@#&			end!@#&		end!@#&!@#&		_G.fs.move = function(path1, path2)!@#&			if type(path1) ~= \"string\" then error(\"bad argument #1 (expected string, got \" .. type(path1) .. \")\", 2 ) end!@#&			if type(path2) ~= \"string\" then error(\"bad argument #2 (expected string, got \" .. type(path2) .. \")\", 2 ) end!@#&			path1, path2 = fs.combine(path1, \"\"), fs.combine(path2, \"\")!@#&!@#&			if not fs.exists(path1) then error(\"No such file\", 2) end!@#&			if fs.exists(path2) then error(\"File exists\", 2) end!@#&			if fs.isReadOnly(path1) or fs.isReadOnly(path2) or (#dividePath(path1) == 1 and fs.getDrive(path1) ~= \"hdd\") then error(\"Access denied\", 2) end!@#&			if #dividePath(path1) < #dividePath(path2) and path2:sub(#path1) == path1 then error(\"Can't copy a directory inside itself\", 2) end!@#&			-- ... and if we run out of space we'll just let things fall over at the writing level.!@#&!@#&			if fs.isDir(path1) then!@#&				fs.makeDir(path2)!@#&				local list = fs.list(path1)!@#&				for i = 1, #list do fs.move(fs.combine(path1, list[i]), fs.combine(path2, list[i])) end!@#&			else!@#&				local input, output = fs.open(path1, \"rb\"), fs.open(path2, \"wb\")!@#&!@#&				if input.readAll then!@#&					output.write(input.readAll())!@#&				else!@#&					for byte in input.read do output.write(byte) end!@#&				end!@#&!@#&				input.close()!@#&				output.close()!@#&			end!@#&!@#&			fs.delete(path1)!@#&		end!@#&!@#&		_G.fs.copy = function(path1, path2)!@#&			if type(path1) ~= \"string\" then error(\"bad argument #1 (expected string, got \" .. type(path1) .. \")\", 2 ) end!@#&			if type(path2) ~= \"string\" then error(\"bad argument #2 (expected string, got \" .. type(path2) .. \")\", 2 ) end!@#&			path1, path2 = fs.combine(path1, \"\"), fs.combine(path2, \"\")!@#&!@#&			if not fs.exists(path1) then error(\"No such file\", 2) end!@#&			if fs.exists(path2) then error(\"File exists\", 2) end!@#&			if fs.isReadOnly(path2) then error(\"Access denied\", 2) end!@#&			if #dividePath(path1) < #dividePath(path2) and path2:sub(#path1) == path1 then error(\"Can't copy a directory inside itself\", 2) end!@#&			-- ... and if we run out of space we'll just let things fall over at the writing level.!@#&!@#&			if fs.isDir(path1) then!@#&				fs.makeDir(path2)!@#&				local list = fs.list(path1)!@#&				for i = 1, #list do fs.copy(fs.combine(path1, list[i]), fs.combine(path2, list[i])) end!@#&			else!@#&				local input, output = fs.open(path1, \"rb\"), fs.open(path2, \"wb\")!@#&!@#&				if input.readAll then!@#&					output.write(input.readAll())!@#&				else!@#&					for byte in input.read do output.write(byte) end!@#&				end!@#&!@#&				input.close()!@#&				output.close()!@#&			end!@#&		end!@#&!@#&		_G.fs.delete = function(path)!@#&			if type(path) ~= \"string\" then error(\"bad argument #1 (expected string, got \" .. type(path) .. \")\", 2 ) end!@#&			path = fs.combine(path, \"\")!@#&			local elements = dividePath(path)!@#&!@#&			if not fs.exists(path) then return end!@#&!@#&			if webMountList[path] then!@#&				webMountList[path] = nil!@#&				local file = rfs.open(\".bbpack.cfg\", \"w\")!@#&				file.write(textutils.serialize(configTable))!@#&				file.close()!@#&			elseif clusterList[elements[1]] then!@#&				if #elements == 1 then!@#&					clusterList[elements[1]] = nil!@#&					local file = rfs.open(\".bbpack.cfg\", \"w\")!@#&					file.write(textutils.serialize(configTable))!@#&					file.close()!@#&				else!@#&					clusterTalk(elements[1], false, \"delete\", path)!@#&				end!@#&			elseif repoList[elements[1]] then!@#&				if #elements == 1 then!@#&					repoList[elements[1]], configTable.githubRepos[elements[1]] = nil, nil!@#&					local file = rfs.open(\".bbpack.cfg\", \"w\")!@#&					file.write(textutils.serialize(configTable))!@#&					file.close()!@#&				else!@#&					error(\"Access denied\", 2)!@#&				end!@#&			elseif elements[1] == \"ram\" then!@#&				if #elements == 1 then error(\"Access denied\", 2) end!@#&!@#&				local cur = ramdisk!@#&!@#&				for i = 2, #elements - 1 do!@#&					cur = cur[elements[i]]!@#&					if not cur then return end!@#&				end!@#&!@#&				cur[elements[#elements]] = nil!@#&			else!@#&				if fs.isDir(path) then!@#&					local list = fs.list(path)!@#&					!@#&					for i = 1, #list do!@#&						local ok, err = pcall(fs.delete, fs.combine(path, list[i]))!@#&						if not ok then error(err:gsub(\"pcall: \", \"\"), 2) end!@#&					end!@#&					!@#&					return rfs.delete(path)!@#&				else!@#&					return rfs.delete(rfs.exists(path..\".bbp\") and (path..\".bbp\") or path)!@#&				end!@#&			end!@#&		end!@#&!@#&		_G.fs.open = function(path, mode)!@#&			if type(path) ~= \"string\" then error(\"bad argument #1 (expected string, got \" .. type(path) .. \")\", 2 ) end!@#&			if type(mode) ~= \"string\" then error(\"bad argument #2 (expected string, got \" .. type(mode) .. \")\", 2 ) end!@#&			path = fs.combine(path, \"\")!@#&			local elements = dividePath(path)!@#&!@#&			mode = mode:lower()!@#&			local binary, append, read, write = mode:find(\"b\") ~= nil, mode:find(\"a\") ~= nil, mode:find(\"r\") ~= nil, mode:find(\"w\") ~= nil!@#&!@#&			if webMountList[path] or clusterList[elements[1]] or elements[1] == \"ram\" or repoList[elements[1]] then!@#&				if not (append or write or read) then error(\"Invalid file mode: \" .. mode, 2) end!@#&!@#&				if read then!@#&					if not fs.exists(path) or fs.isDir(path) then return nil, \"No such file\" end!@#&!@#&					local data!@#&					local handle = {[\"close\"] = function() data = nil end}!@#&!@#&					if webMountList[path] then!@#&						local webHandle = http.get(webMountList[path], nil, term.setPaletteColour and true)!@#&						data = webHandle.readAll()!@#&						webHandle.close()!@#&					elseif clusterList[elements[1]] then!@#&						data = {}!@#&						local list = clusterTalk(elements[1], true, \"get\", path)!@#&						for i = 1, #clusterList[elements[1]] do if list[i] then data[list[i][1]] = list[i][2] end end!@#&						data = table.concat(data)!@#&						data = decompressInternal({data:byte(1, #data)}, true)!@#&					elseif repoList[elements[1]] then!@#&						data = repoList[elements[1]]!@#&						for i = 2, #elements do data = data[elements[i]] end!@#&						local webHandle = http.get(data, nil, term.setPaletteColour and true)!@#&						data = webHandle.readAll()!@#&						webHandle.close()!@#&					else!@#&						data = ramdisk!@#&						for i = 2, #elements do data = data[elements[i]] end!@#&					end!@#&!@#&					if #data == 0 then data = nil end!@#&!@#&					if binary then!@#&						handle.read = function(amount)!@#&							if not data then return nil end!@#&!@#&							local result!@#&							if type(amount) ~= \"number\" then!@#&								result = data:byte(1)!@#&								data = data:sub(2)!@#&							else!@#&								result = data:sub(1, amount)!@#&								data = data:sub(amount + 1)!@#&							end!@#&!@#&							if #data == 0 then data = nil end!@#&							return result!@#&						end!@#&!@#&						handle.readAll = function()!@#&							if not data then return nil end!@#&!@#&							local result = data!@#&							data = nil!@#&							return result!@#&						end!@#&					else!@#&						handle.readLine = function()!@#&							if not data then return nil end!@#&!@#&							if data:find(\"\\n\") then!@#&								local result = data:sub(1, data:find(\"\\n\") - 1)!@#&								data = data:sub(data:find(\"\\n\") + 1)!@#&								if data:byte(1) == 13 then data = data:sub(2) end!@#&								return result!@#&							else!@#&								local result = data!@#&								data = nil!@#&								return data!@#&							end!@#&						end!@#&!@#&						handle.readAll = function()!@#&							if not data then return nil end!@#&!@#&							local result = data!@#&							data = nil!@#&							return result!@#&						end!@#&					end!@#&!@#&					return handle!@#&				elseif write or append then!@#&					if webMountList[path] or repoList[elements[1]] then return nil, \"Access denied\" end!@#&					if fs.isDir(path) then return nil, \"Cannot write to directory\" end!@#&					fs.makeDir(fs.getDir(path))!@#&!@#&					local handle, output, counter = {}, {}, 1!@#&!@#&					if binary then!@#&						handle.write = function(data)!@#&							if type(data) ~= \"string\" and type(data) ~= \"number\" then error(\"bad argument #1 (string or number expected, got \" .. type(data) .. \")\", 2) end!@#&							output[counter] = type(data) == \"number\" and string.char(data) or data!@#&							counter = counter + 1!@#&						end!@#&					else!@#&						handle.write = function(data)!@#&							output[counter] = tostring(data)!@#&							counter = counter + 1!@#&						end!@#&!@#&						handle.writeLine = function(data)!@#&							output[counter] = tostring(data)!@#&							output[counter + 1] = \"\\n\"!@#&							counter = counter + 2!@#&						end!@#&					end!@#&!@#&					local ramLink, ramIndex!@#&					if clusterList[elements[1]] and append and fs.exists(path) then!@#&						local data, list = {}, clusterTalk(elements[1], true, \"get\", path)!@#&						for i = 1, #list do if list[i] then data[list[i][1]] = list[i][2] end end!@#&						data = table.concat(data)!@#&						output[1], counter = decompressInternal({data:byte(1, #data)}, true), 2!@#&					elseif elements[1] == \"ram\" then!@#&						ramLink = ramdisk!@#&						for i = 2, #elements - 1 do ramLink = ramLink[elements[i]] end!@#&						ramIndex = elements[#elements]!@#&						if (append and not ramLink[ramIndex]) or not append then ramLink[ramIndex] = \"\" end!@#&					end!@#&!@#&					handle.flush = function()!@#&						if clusterList[elements[1]] then!@#&							output, counter = {table.concat(output)}, 1!@#&							local data, segs, pos, totalSpace, thisCluster = string.char(unpack(compressInternal(output[1]))), 1, 1, fs.getFreeSpace(elements[1]), clusterList[elements[1]]!@#&							if fs.exists(path) then totalSpace = totalSpace + fs.getSize(path) end!@#&							if totalSpace < #data then error(\"Out of space\", 2) end!@#&!@#&							fs.delete(path)!@#&							!@#&							local spaceList = clusterTalk(elements[1], true, \"getFreeSpace\")!@#&							!@#&							for i = 1, #thisCluster do!@#&								local thisSpace = spaceList[i][1]!@#&								!@#&								if thisSpace > 0 then!@#&									local segString = tostring(segs)!@#&									rednet.send(spaceList[i][2], {[\"cluster\"] = elements[1], \"put\", path .. string.rep(\"0\", 3 - #segString) .. segString, data:sub(pos, pos + thisSpace - 1)}, rednet.host and elements[1])!@#&									pos, segs = pos + thisSpace, segs + 1!@#&								end!@#&!@#&								if pos > #data then break end!@#&							end!@#&						else!@#&							output = table.concat(output)!@#&							if append then output = ramLink[ramIndex] .. output end!@#&							ramLink[ramIndex] = output!@#&							output, counter, append = {}, 1, true!@#&						end!@#&					end!@#&!@#&					handle.close = function()!@#&						handle.flush()!@#&						for key in pairs(handle) do handle[key] = function() end end!@#&					end!@#&!@#&					return handle!@#&				end!@#&			else!@#&				if (write or append) and rfs.isReadOnly(path) then return nil, \"Access denied\" end!@#&!@#&				for i = 1, #blacklist do!@#&					local check = blacklist[i]!@#&					if path:sub(-#check):lower() == check then return rfs.open(path, mode) end!@#&				end!@#&!@#&				if read then!@#&					return rfs.exists(path .. \".bbp\") and open(path .. \".bbp\", mode) or rfs.open(path, mode)!@#&				elseif configTable.compressedFS then!@#&					if rfs.getDrive(elements[1]) and rfs.getDrive(elements[1]) ~= \"hdd\" then!@#&						return rfs.open(path, mode)!@#&					elseif append then!@#&						if rfs.exists(path) then!@#&							local file, content = rfs.open(path, binary and \"rb\" or \"r\")!@#&!@#&							if file.readAll then!@#&								content = file.readAll()!@#&							else!@#&								content = {}!@#&								for byte in file.read do content[#content + 1] = byte end!@#&								content = string.char(unpack(content))!@#&							end!@#&!@#&							file.close()!@#&!@#&							rfs.delete(path)!@#&!@#&							file = open(path .. \".bbp\", binary and \"wb\" or \"w\")!@#&							file.write(content)!@#&							return file!@#&						else return open(path .. \".bbp\", mode) end!@#&					elseif write then!@#&						if rfs.exists(path) then rfs.delete(path) end!@#&						return open(path .. \".bbp\", mode)!@#&					end!@#&				else!@#&					if append then!@#&						if rfs.exists(path .. \".bbp\") then!@#&							local file = open(path .. \".bbp\", binary and \"rb\" or \"r\")!@#&							local content = file.readAll()!@#&							file.close()!@#&!@#&							rfs.delete(path .. \".bbp\")!@#&!@#&							file = rfs.open(path, binary and \"wb\" or \"w\")!@#&!@#&							if file.writeLine or term.setPaletteColour then!@#&								file.write(content)!@#&							else!@#&								content = {string.byte(1, #content)}!@#&								for i = 1, #content do file.write(content[i]) end!@#&							end!@#&!@#&							return file!@#&						else return rfs.open(path, mode) end!@#&					elseif write then!@#&						if rfs.exists(path .. \".bbp\") then rfs.delete(path .. \".bbp\") end!@#&						return rfs.open(path, mode)!@#&					end!@#&				end!@#&!@#&				error(\"Unsupported mode\", 2)!@#&			end!@#&		end!@#&!@#&		_G.fs.find = function(path)!@#&			if type(path) ~= \"string\" then error(\"bad argument #1 (expected string, got \" .. type(path) .. \")\", 2 ) end!@#&			local pathParts, results, curfolder = {}, {}, \"/\"!@#&			for part in path:gmatch(\"[^/]+\") do pathParts[#pathParts + 1] = part:gsub(\"*\", \"[^/]*\") end!@#&			if #pathParts == 0 then return {} end!@#&!@#&			local prospects = fs.list(curfolder)!@#&			for i = 1, #prospects do prospects[i] = {[\"parent\"] = curfolder, [\"depth\"] = 1, [\"name\"] = prospects[i]} end!@#&!@#&			while #prospects > 0 do!@#&				local thisProspect = table.remove(prospects, 1)!@#&				local fullPath = fs.combine(thisProspect.parent, thisProspect.name)!@#&!@#&				if thisProspect.name == thisProspect.name:match(pathParts[thisProspect.depth]) then!@#&					if thisProspect.depth == #pathParts then!@#&						results[#results + 1] = fullPath!@#&					elseif fs.isDir(fullPath) and thisProspect.depth < #pathParts then!@#&						local newList = fs.list(fullPath)!@#&						for i = 1, #newList do prospects[#prospects + 1] = {[\"parent\"] = fullPath, [\"depth\"] = thisProspect.depth + 1, [\"name\"] = newList[i]} end!@#&					end!@#&				end!@#&			end!@#&!@#&			return results!@#&		end!@#&!@#&		_G.rfs = rfs!@#&	end!@#&!@#&	update = bbpack and bbpack.update or function()!@#&		for cluster, ids in pairs(clusterList) do for i = 1, #ids do!@#&			rednet.send(ids[i], {[\"cluster\"] = cluster, \"update\"}, rednet.host and cluster)!@#&		end end!@#&!@#&		local file = rfs.open(\"bbpack\", \"w\")!@#&		file.write(downloadPasteInternal(\"cUYTGbpb\"))!@#&		file.close()!@#&!@#&		os.reboot()!@#&	end!@#&!@#&	fileSys = bbpack and bbpack.fileSys or function(par1, par2)!@#&		if type(par1) == \"boolean\" or (type(par1) == \"string\" and type(par2) == \"boolean\") then!@#&			-- Compress / decompress hdd contents.!@#&			local list!@#&			if type(par1) == \"boolean\" then!@#&				list = rfs.list(\"\")!@#&				configTable.compressedFS = par1!@#&			else!@#&				list = {par1}!@#&				par1 = par2!@#&			end!@#&!@#&			while #list > 0 do!@#&				local entry = list[#list]!@#&				list[#list] = nil!@#&!@#&				if rfs.getDrive(entry) == \"hdd\" and not webMountList[entry] then!@#&					if rfs.isDir(entry) then!@#&						local newList, curLen = rfs.list(entry), #list!@#&						for i = 1, #newList do list[curLen + i] = fs.combine(entry, newList[i]) end!@#&					else!@#&						local blacklisted = false!@#&!@#&						for i = 1, #blacklist do!@#&							local check = blacklist[i]!@#&							if entry:sub(-#check):lower() == check then!@#&								blacklisted = true!@#&								break!@#&							end!@#&						end!@#&!@#&						if not blacklisted then!@#&							if par1 and entry:sub(-4) ~= \".bbp\" then!@#&								-- Compress this file.!@#&								local file, content = rfs.open(entry, \"rb\")!@#&								if file.readAll then!@#&									content = file.readAll()!@#&								else!@#&									content = {}!@#&									local counter = 1!@#&									for byte in file.read do!@#&										content[counter] = byte!@#&										counter = counter + 1!@#&									end!@#&									content = string.char(unpack(content))!@#&								end!@#&								file.close()!@#&								!@#&								content = compressInternal(content)!@#&								if rfs.getFreeSpace(entry) + rfs.getSize(entry) < #content then return false end!@#&								rfs.delete(entry)!@#&								snooze()!@#&!@#&								file = rfs.open(entry .. \".bbp\", \"wb\")!@#&!@#&								if term.setPaletteColor then!@#&									file.write(string.char(unpack(content)))!@#&								else!@#&									for i = 1, #content do file.write(content[i]) end!@#&								end!@#&!@#&								file.close()!@#&!@#&								snooze()!@#&							elseif not par1 and entry:sub(-4) == \".bbp\" then!@#&								-- Decompress this file.!@#&								local file = open(entry, \"rb\")!@#&								local content = file.readAll()!@#&								file.close()!@#&!@#&								if rfs.getFreeSpace(entry) + rfs.getSize(entry) < #content then return false end!@#&								rfs.delete(entry)!@#&								snooze()!@#&!@#&								file = rfs.open(entry:sub(1, -5), \"wb\")!@#&!@#&								if term.setPaletteColor then!@#&									file.write(content)!@#&								else!@#&									content = {content:byte(1, #content)}!@#&									for i = 1, #content do file.write(content[i]) end!@#&								end!@#&!@#&								file.close()!@#&!@#&								snooze()!@#&							end!@#&						end!@#&					end!@#&				end!@#&			end!@#&		elseif type(par1) == \"string\" and type(par2) == \"string\" then!@#&			-- New web mount.!@#&			local url, path = par1, fs.combine(par2, \"\")!@#&			local elements = dividePath(path)!@#&			!@#&			local repo = getGithubRepo(url)!@#&			if repo then!@#&				if #elements > 1 then error(\"bbpack.mount: Github repos must be mounted at the root of your file system\", 2) end!@#&				repoList[path] = repo!@#&				configTable.githubRepos[path] = url!@#&			else!@#&				if fs.getDrive(elements[1]) and fs.getDrive(elements[1]) ~= \"hdd\" then error(\"bbpack.mount: web mounts must be located on the main hdd\", 2) end!@#&!@#&				local get = http.get(url)!@#&				if not get then error(\"bbpack.mount: Can't connect to URL: \"..url, 2) end!@#&				get.close()!@#&!@#&				webMountList[path] = url!@#&			end!@#&		elseif type(par1) == \"string\" then!@#&			-- New cluster mount.!@#&			local cluster, uuid = par1, math.random(1, 0x7FFFFFFF)!@#&			for _, side in pairs(rs.getSides()) do if peripheral.getType(side) == \"modem\" then rednet.open(side) end end!@#&			rednet.broadcast({[\"cluster\"] = cluster, [\"uuid\"] = uuid, \"rollcall\"}, rednet.host and cluster)!@#&			clusterList[cluster] = nil!@#&			local myTimer, map = os.startTimer(5), {}!@#&!@#&			while true do!@#&				local event, par1, par2 = os.pullEvent()!@#&!@#&				if event == \"timer\" and par1 == myTimer then!@#&					break!@#&				elseif event == \"rednet_message\" and type(par2) == \"table\" and par2.cluster == cluster and par2.uuid == uuid and par2[1] == \"rollcallResponse\" then!@#&					map[#map + 1] = par1!@#&				end!@#&			end!@#&!@#&			if #map == 0 then error(\"bbpack.mount: Can't connect to cluster: \" .. cluster, 2) end!@#&			clusterList[cluster] = map!@#&		end!@#&!@#&		local file = rfs.open(\".bbpack.cfg\", \"w\")!@#&		file.write(textutils.serialize(configTable))!@#&		file.close()!@#&!@#&		return true!@#&	end!@#&end",["json"]="------------------------------------------------------------------ utils!@#&local controls = {[\"\\n\"]=\"\\\\n\", [\"\\r\"]=\"\\\\r\", [\"\\t\"]=\"\\\\t\", [\"\\b\"]=\"\\\\b\", [\"\\f\"]=\"\\\\f\", [\"\\\"\"]=\"\\\\\\\"\", [\"\\\\\"]=\"\\\\\\\\\"}!@#&!@#&local function isArray(t)!@#&	local max = 0!@#&	for k,v in pairs(t) do!@#&		if type(k) ~= \"number\" then!@#&			return false!@#&		elseif k > max then!@#&			max = k!@#&		end!@#&	end!@#&	return max == #t!@#&end!@#&!@#&local whites = {['\\n']=true; ['\\r']=true; ['\\t']=true; [' ']=true; [',']=true; [':']=true}!@#&function removeWhite(str)!@#&	while whites[str:sub(1, 1)] do!@#&		str = str:sub(2)!@#&	end!@#&	return str!@#&end!@#&!@#&------------------------------------------------------------------ encoding!@#&!@#&local function encodeCommon(val, pretty, tabLevel, tTracking)!@#&	local str = \"\"!@#&!@#&	-- Tabbing util!@#&	local function tab(s)!@#&		str = str .. (\"\\t\"):rep(tabLevel) .. s!@#&	end!@#&!@#&	local function arrEncoding(val, bracket, closeBracket, iterator, loopFunc)!@#&		str = str .. bracket!@#&		if pretty then!@#&			str = str .. \"\\n\"!@#&			tabLevel = tabLevel + 1!@#&		end!@#&		for k,v in iterator(val) do!@#&			tab(\"\")!@#&			loopFunc(k,v)!@#&			str = str .. \",\"!@#&			if pretty then str = str .. \"\\n\" end!@#&		end!@#&		if pretty then!@#&			tabLevel = tabLevel - 1!@#&		end!@#&		if str:sub(-2) == \",\\n\" then!@#&			str = str:sub(1, -3) .. \"\\n\"!@#&		elseif str:sub(-1) == \",\" then!@#&			str = str:sub(1, -2)!@#&		end!@#&		tab(closeBracket)!@#&	end!@#&!@#&	-- Table encoding!@#&	if type(val) == \"table\" then!@#&		assert(not tTracking[val], \"Cannot encode a table holding itself recursively\")!@#&		tTracking[val] = true!@#&		if isArray(val) then!@#&			arrEncoding(val, \"[\", \"]\", ipairs, function(k,v)!@#&				str = str .. encodeCommon(v, pretty, tabLevel, tTracking)!@#&			end)!@#&		else!@#&			arrEncoding(val, \"{\", \"}\", pairs, function(k,v)!@#&				assert(type(k) == \"string\", \"JSON object keys must be strings\", 2)!@#&				str = str .. encodeCommon(k, pretty, tabLevel, tTracking)!@#&				str = str .. (pretty and \": \" or \":\") .. encodeCommon(v, pretty, tabLevel, tTracking)!@#&			end)!@#&		end!@#&	-- String encoding!@#&	elseif type(val) == \"string\" then!@#&		str = '\"' .. val:gsub(\"[%c\\\"\\\\]\", controls) .. '\"'!@#&	-- Number encoding!@#&	elseif type(val) == \"number\" or type(val) == \"boolean\" then!@#&		str = tostring(val)!@#&	else!@#&		error(\"JSON only supports arrays, objects, numbers, booleans, and strings\", 2)!@#&	end!@#&	return str!@#&end!@#&!@#&function encode(val)!@#&	return encodeCommon(val, false, 0, {})!@#&end!@#&!@#&function encodePretty(val)!@#&	return encodeCommon(val, true, 0, {})!@#&end!@#&!@#&------------------------------------------------------------------ decoding!@#&!@#&local decodeControls = {}!@#&for k,v in pairs(controls) do!@#&	decodeControls[v] = k!@#&end!@#&!@#&function parseBoolean(str)!@#&	if str:sub(1, 4) == \"true\" then!@#&		return true, removeWhite(str:sub(5))!@#&	else!@#&		return false, removeWhite(str:sub(6))!@#&	end!@#&end!@#&!@#&function parseNull(str)!@#&	return nil, removeWhite(str:sub(5))!@#&end!@#&!@#&local numChars = {['e']=true; ['E']=true; ['+']=true; ['-']=true; ['.']=true}!@#&function parseNumber(str)!@#&	local i = 1!@#&	while numChars[str:sub(i, i)] or tonumber(str:sub(i, i)) do!@#&		i = i + 1!@#&	end!@#&	local val = tonumber(str:sub(1, i - 1))!@#&	str = removeWhite(str:sub(i))!@#&	return val, str!@#&end!@#&!@#&function parseString(str)!@#&	str = str:sub(2)!@#&	local s = \"\"!@#&	while str:sub(1,1) ~= \"\\\"\" do!@#&		local next = str:sub(1,1)!@#&		str = str:sub(2)!@#&		assert(next ~= \"\\n\", \"Unclosed string\")!@#&!@#&		if next == \"\\\\\" then!@#&			local escape = str:sub(1,1)!@#&			str = str:sub(2)!@#&!@#&			next = assert(decodeControls[next..escape], \"Invalid escape character\")!@#&		end!@#&!@#&		s = s .. next!@#&	end!@#&	return s, removeWhite(str:sub(2))!@#&end!@#&!@#&function parseArray(str)!@#&	str = removeWhite(str:sub(2))!@#&!@#&	local val = {}!@#&	local i = 1!@#&	while str:sub(1, 1) ~= \"]\" do!@#&		local v = nil!@#&		v, str = parseValue(str)!@#&		val[i] = v!@#&		i = i + 1!@#&		str = removeWhite(str)!@#&	end!@#&	str = removeWhite(str:sub(2))!@#&	return val, str!@#&end!@#&!@#&function parseObject(str)!@#&	str = removeWhite(str:sub(2))!@#&!@#&	local val = {}!@#&	while str:sub(1, 1) ~= \"}\" do!@#&		local k, v = nil, nil!@#&		k, v, str = parseMember(str)!@#&		val[k] = v!@#&		str = removeWhite(str)!@#&	end!@#&	str = removeWhite(str:sub(2))!@#&	return val, str!@#&end!@#&!@#&function parseMember(str)!@#&	local k = nil!@#&	k, str = parseValue(str)!@#&	local val = nil!@#&	val, str = parseValue(str)!@#&	return k, val, str!@#&end!@#&!@#&function parseValue(str)!@#&	local fchar = str:sub(1, 1)!@#&	if fchar == \"{\" then!@#&		return parseObject(str)!@#&	elseif fchar == \"[\" then!@#&		return parseArray(str)!@#&	elseif tonumber(fchar) ~= nil or numChars[fchar] then!@#&		return parseNumber(str)!@#&	elseif str:sub(1, 4) == \"true\" or str:sub(1, 5) == \"false\" then!@#&		return parseBoolean(str)!@#&	elseif fchar == \"\\\"\" then!@#&		return parseString(str)!@#&	elseif str:sub(1, 4) == \"null\" then!@#&		return parseNull(str)!@#&	end!@#&	return nil!@#&end!@#&!@#&function decode(str)!@#&	str = removeWhite(str)!@#&	t = parseValue(str)!@#&	return t!@#&end!@#&!@#&function decodeFromFile(path)!@#&	local file = assert(fs.open(path, \"r\"))!@#&	local decoded = decode(file.readAll())!@#&	file.close()!@#&	return decoded!@#&end",["xml"]="function parseargs(s)!@#&  local arg = {}!@#&  string.gsub(s, \"([%-%w]+)=([\\\"'])(.-)%2\", function (w, _, a)!@#&    arg[w] = a!@#&  end)!@#&  return arg!@#&end!@#&   !@#&function collect(s)!@#&  local stack = {}!@#&  local top = {}!@#&  table.insert(stack, top)!@#&  local ni,c,label,xarg, empty!@#&  local i, j = 1, 1!@#&  while true do!@#&    ni,j,c,label,xarg, empty = string.find(s, \"<(%/?)([%w:]+)(.-)(%/?)>\", i)!@#&    if not ni then break end!@#&    local text = string.sub(s, i, ni-1)!@#&    if not string.find(text, \"^%s*$\") then!@#&      table.insert(top, text)!@#&    end!@#&    if empty == \"/\" then  -- empty element tag!@#&      table.insert(top, {label=label, xarg=parseargs(xarg), empty=1})!@#&    elseif c == \"\" then   -- start tag!@#&      top = {label=label, xarg=parseargs(xarg)}!@#&      table.insert(stack, top)   -- new level!@#&    else  -- end tag!@#&      local toclose = table.remove(stack)  -- remove top!@#&      top = stack[#stack]!@#&      if #stack < 1 then!@#&        error(\"nothing to close with \"..label)!@#&      end!@#&      if toclose.label ~= label then!@#&        error(\"trying to close \"..toclose.label..\" with \"..label)!@#&      end!@#&      table.insert(top, toclose)!@#&    end!@#&    i = j+1!@#&  end!@#&  local text = string.sub(s, i)!@#&  if not string.find(text, \"^%s*$\") then!@#&    table.insert(stack[#stack], text)!@#&  end!@#&  if #stack > 1 then!@#&    error(\"unclosed \"..stack[#stack].label)!@#&  end!@#&  return stack[1]!@#&end",["config"]="function read(pathToConfig,whatToRead)!@#&        if not fs.exists(pathToConfig) then error(\"No such file\") end!@#&        local file = fs.open(pathToConfig,\"r\")!@#&        while true do!@#&                local line = file.readLine()!@#&                if line ~= nil then!@#&                        local key, value = string.match(line,\"(.*)=(.*)\")!@#&                        if value ~= nil and key == whatToRead then!@#&                                file.close()!@#&                                return value!@#&                        end!@#&                else!@#&                        file.close()!@#&                        break!@#&                end!@#&        end!@#&end!@#& !@#&function write(pathToConfig,key,value)!@#&        if not fs.exists(pathToConfig) then!@#&                local file = fs.open(pathToConfig,\"w\")!@#&                file.close()!@#&        end!@#& !@#&        local file = fs.open(pathToConfig,\"r\")!@#&        local Massiv = {}!@#&       !@#&        local lineCounter = 1!@#&        while true do!@#&                local line = file.readLine()!@#&                if line ~= nil then!@#&                        Massiv[lineCounter] = line!@#&                else!@#&                        file.close()!@#&                        break!@#&                end!@#&                lineCounter = lineCounter + 1!@#&        end!@#& !@#&        local success = false!@#&        for i=1,#Massiv do!@#&                local key1, value1 = string.match(Massiv[i],\"(.*)=(.*)\")!@#&                if value1 ~= nil and key1 == key then!@#&                        Massiv[i] = key..\"=\"..value!@#&                        success = true!@#&                end!@#&        end!@#& !@#&        if success == false then Massiv[#Massiv+1] = key..\"=\"..value end!@#& !@#&        local file = fs.open(pathToConfig,\"w\")!@#&        for i=1,#Massiv do!@#&                file.writeLine(Massiv[i])!@#&        end!@#&        file.close()!@#&end",["image"]="function draw(startX,startY,image)!@#&        local Colors = {!@#&                [\"0\"] = 1,!@#&                [\"1\"] = 2,!@#&                [\"2\"] = 4,!@#&                [\"3\"] = 8,!@#&                [\"4\"] = 16,!@#&                [\"5\"] = 32,!@#&                [\"6\"] = 64,!@#&                [\"7\"] = 128,!@#&                [\"8\"] = 256,!@#&                [\"9\"] = 512,!@#&                [\"a\"] = 1024,!@#&                [\"b\"] = 2048,!@#&                [\"c\"] = 4096,!@#&                [\"d\"] = 8192,!@#&                [\"e\"] = 16384,!@#&                [\"f\"] = 32768!@#&        }!@#&        local Pixels = {}!@#& !@#&        local function convert(mode,color)!@#&                if mode == \"from cc\" then!@#&                        for key,value in pairs(Colors) do!@#&                                if color == value then!@#&                                        return key!@#&                                end!@#&                        end!@#&                else!@#&                        if color == \"#\" then!@#&                                return \"0\"!@#&                        else!@#&                                return Colors[color]!@#&                        end!@#&                end!@#&        end!@#& !@#&        local function load(path)!@#&                local file = fs.open(path,\"r\")!@#&                local lineCounter = 1!@#&                while true do!@#&                        local line = file.readLine()!@#&                        Pixels[lineCounter]={}!@#&                        if line ~= nil then!@#&                                for i=1,#line,3 do!@#&                                        Pixels[lineCounter][(i+2)/3]={}!@#&                                        Pixels[lineCounter][(i+2)/3][\"symbol\"] = string.sub(line,i,i)!@#&                                        Pixels[lineCounter][(i+2)/3][\"textColor\"] = convert(\"to cc\",string.sub(line,i+1,i+1))!@#&                                        Pixels[lineCounter][(i+2)/3][\"backColor\"] = convert(\"to cc\",string.sub(line,i+2,i+2))!@#&                                end!@#&                                lineCounter = lineCounter + 1!@#&                        else!@#&                                break!@#&                        end!@#&                end!@#&                file.close()!@#&        end!@#& !@#&        load(image)!@#& !@#&        for y=1,#Pixels do!@#&                for x=1,#Pixels[y] do!@#&                        if Pixels[y][x][\"symbol\"] ~= \"#\" then!@#&                                term.setTextColor(Pixels[y][x][\"textColor\"])!@#&                                term.setBackgroundColor(Pixels[y][x][\"backColor\"])!@#&                                term.setCursorPos(startX+x-1,startY+y-1)!@#&                                term.write(Pixels[y][x][\"symbol\"])!@#&                        end!@#&                end!@#&        end!@#& !@#&end",["bsod"]="function bsod(error)!@#&  -- for the following 2 functions are from my Extended String Library...!@#&  local trim = function(str) return (str:gsub(\"^%s*(.-)%s*$\", \"%1\")) end!@#&!@#&  -- localize these as they are only used here!@#&  local setColors = function(bg, txt) if not (term.isColor and term.isColor()) then return false end if txt then term.setTextColor(txt) end if bg then term.setBackgroundColor(bg) end end!@#&  local clear = function(col) if col then term.setBackgroundColor(col) end term.clear() end!@#&  local cwrite = function(msg, y, offset) local sw,sh = term.getSize() term.setCursorPos(sw/2-#msg/2, (y or (sh/2)) + (offset or 0)) write(msg) end!@#&  local errHeader = function(text, y, centre) setColors(colors.white, colors.blue) if centre then cwrite(text, y) else term.setCursorPos(1,y) print(text) end setColors(colors.blue, colors.white) end!@#&  local printMsg = function(text, y) term.setCursorPos(1,y) print(text) end!@#&  local waitForKey = function() while true do local e,k=os.pullEventRaw(\"key\") if k == 28 or k == 156 then break end end end!@#&  local sw,sh = term.getSize()!@#&!@#&  clear(colors.blue)!@#&!@#&  -- the error headers!@#&  errHeader(\" ERROR :  SpeedOS(id: \"..os.getComputerID()..\")\", 2, true)!@#&  errHeader(\" Description:  \"..error, 7, false)!@#&  errHeader(\" Reporting the Issue \", sh-7, false)!@#&!@#&  -- BSOD content!@#&  printMsg(\"An error has occurred during runtime with and the program has ceased working.\", 4)!@#&  printMsg(\"If this problem persists please try reinstall SpeedOS and if the problem still persists report the issue to Ma3rX. Thanks!\",sh-5)!@#&!@#&  cwrite(\"Press enter to quit...\",sh-1)!@#&  waitForKey()!@#&!@#&  term.clear(colors.black)!@#&  term.setCursorPos(1,1)!@#&end",["speedtext"]="--Central Printing--!@#&function cPrint(string, y2)!@#&        local tX, tY = term.getSize()!@#&        local b = string.len(string) / 2!@#&        local x = (tX / 2) - b!@#&	local y = tY / 2!@#&	!@#&	if y2 then!@#&	  y = y2!@#&	end!@#&!@#&        term.setCursorPos(x, y)!@#&        write(string)!@#&end!@#&!@#&--Central Cursoring--!@#&function cCursor(string)!@#&        local tX, tY = term.getSize()!@#&        local b = string.len(string) / 2!@#&        local x = (tX / 2) - b!@#&	local y = tY / 2!@#&	!@#&	if y2 then!@#&	  y = y2!@#&	end!@#&!@#&        return {x, y}!@#&end!@#&!@#&--Line of \"-\" printing--!@#&function line()!@#&	print(\"---------------------------------------------------\")!@#&end!@#&!@#&--Extra exiting from program--!@#&function extraExit()!@#&	term.setBackgroundColor(colors.black)!@#&	term.setTextColor(colors.white)!@#&	term.setCursorPos(1, 1)!@#&	term.clear()!@#&	error()!@#&end",["zip"]="function archive(chto,vochto)!@#&        local Massiv2 = {}!@#&        local function FileList(path)!@#&                local Massiv = fs.list(path)!@#&                if #Massiv==0 then!@#&                        local Massiv2Id = #Massiv2 + 1!@#&                        Massiv2[Massiv2Id] = {}!@#&                        Massiv2[Massiv2Id][\"path\"] = path!@#&                        Massiv2[Massiv2Id][\"text\"] = \"@empty@empty\"!@#&                else!@#&                        for i=1,#Massiv do!@#&                                if fs.isDir(path..\"/\"..Massiv[i]) and Massiv[i] ~= \"/rom\" and Massiv[i] ~= \"rom\" then!@#&                                        FileList(path..\"/\"..Massiv[i])!@#&                                elseif not fs.isDir(path..\"/\"..Massiv[i]) and Massiv[i] ~= \"/rom\" and Massiv[i] ~= \"rom\" then!@#&                                        local Massiv2Id = #Massiv2 + 1!@#&                                        Massiv2[Massiv2Id] = {}!@#&                                        Massiv2[Massiv2Id][\"path\"] = path..\"/\"..Massiv[i]!@#&                                        local file = fs.open(path..\"/\"..Massiv[i],\"r\")!@#&                                        Massiv2[Massiv2Id][\"text\"] = file.readAll()!@#&                                        file.close()!@#&                                end!@#&                        end!@#&                end!@#&        end!@#&        FileList(chto)!@#&        file=fs.open(vochto..\".zip\",\"w\")!@#&        file.write(textutils.serialise(Massiv2))!@#&        file.close()!@#&        return Massiv2!@#&end!@#& !@#&function unarchive(chto,kuda)!@#&        --shell.run(\"cd \"..kuda)!@#&        shell.run(chto)!@#&        --local file = fs.open(chto,\"r\")!@#&        --Massiv = textutils.unserialise(file.readAll())!@#&        --file.close()!@#&        --for i=1,#Massiv do!@#&        --        if Massiv[i][\"text\"] == \"@empty@empty\" then!@#&        --                fs.makeDir(kuda..\"/\"..Massiv[i][\"path\"])!@#&        --        else!@#&        --                local file = fs.open(kuda..\"/\"..Massiv[i][\"path\"],\"w\")!@#&        --                file.write(Massiv[i][\"text\"])!@#&        --                file.close()!@#&       --         end!@#&       -- end!@#&end",["peripheral"]="-- v1.4.1!@#&native = peripheral.native or peripheral!@#&local native = native!@#&!@#&function getNames()!@#&	local tResults = {}!@#&	for n,sSide in ipairs( rs.getSides() ) do!@#&		if peripheral.isPresent( sSide ) then!@#&			table.insert( tResults, sSide )!@#&			local isWireless = false!@#&			--if pcall(function()isWireless = peripheral.call(sSide, 'isWireless') end) then!@#&			isWireless = true!@#&			--end     !@#&		end!@#&	end!@#&	return tResults!@#&end!@#&!@#&function find( sType, cable )!@#& _color = {\"white\",!@#&           \"orange\",!@#&           \"magenta\",!@#&           \"lightBlue\",!@#&           \"yellow\",!@#&           \"lime\",!@#&           \"pink\",!@#&           \"gray\",!@#& --          \"lightGray\",!@#&           \"cyan\",!@#&           \"purple\",!@#&           \"blue\",!@#&           \"brown\",!@#&           \"green\",!@#&           \"red\",!@#&           \"black\"} !@#& !@#& for _, value in pairs(rs.getSides()) do!@#&  	if peripheral.getType(value) == sType then!@#&    	  return value!@#&   end!@#&   !@#&   if cable then!@#&     for _, _value in pairs(_color) do!@#&       if peripheral.getType(value..\":\".._value) == sType then!@#&        return value..\":\".._value         !@#&       end!@#&     end!@#&   end!@#& end!@#&end!@#&!@#&local function decode(side)!@#&	local lside, color = side:match(\"(%w%w*):(%w%w*)\")!@#&	!@#&	if lside then!@#&		return lside, color!@#&	end!@#&	!@#&	return side!@#&end!@#&!@#&-- This can remain the same!@#&wrap = native.wrap!@#&!@#&function isPresent(side)!@#&	local color!@#&	side, color = decode(side)!@#&	!@#&	if not native.isPresent(side) then !@#&		return false!@#&	end!@#&	!@#&	if color then !@#&		if native.getType(side) ~= \"cable\" then!@#&			return false!@#&		end!@#&		return native.call(side, \"isPresent\", color)!@#&	end!@#&	!@#&	return true!@#&end!@#&!@#&function getType(side)!@#&	local color!@#&	side, color = decode(side)!@#&	!@#&	if color then !@#&		if native.getType(side) ~= \"cable\" then!@#&			return nil!@#&		end!@#&		return native.call(side, \"getType\", color)!@#&	end!@#&	!@#&	return native.getType(side)!@#&end!@#&!@#&function getMethods(side)!@#&	local color!@#&	side, color = decode(side)!@#&	!@#&	if color then !@#&		if native.getType(side) ~= \"cable\" then!@#&			return nil!@#&		end!@#&		return native.call(side, \"getMethods\", color)!@#&	end!@#&	!@#&	return native.getMethods(side)!@#&end!@#&!@#&function call(side, method, ...)!@#&	local color!@#&	side, color = decode(side)!@#&	!@#&	if color then !@#&		if native.getType(side) ~= \"cable\" then!@#&			error(\"No peripheral attached\")!@#&		end!@#&		return native.call(side, \"call\", color, method, ...)!@#&	end!@#&	!@#&	return native.call(side, method, ...)!@#&end!@#&!@#&function getSides()!@#&	local sides = rs.getSides()!@#&	!@#&	for i,side in ipairs(rs.getSides()) do!@#&		if native.getType(side) == \"cable\" then!@#&			local lsides = { native.call(side, \"list\") }!@#&			for _,ls in ipairs(lsides) do!@#&				table.insert(sides, i, ls)!@#&			end!@#&		end!@#&	end!@#&	!@#&	return sides!@#&end",["encryptor"]="os.loadAPI(\"/SpeedAPI/config\")!@#& !@#&local symbols = {!@#&        \"a\",!@#&        \"b\",!@#&        \"c\",!@#&        \"d\",!@#&        \"e\",!@#&        \"f\",!@#&        \"g\",!@#&        \"h\",!@#&        \"i\",!@#&        \"j\",!@#&        \"k\",!@#&        \"l\",!@#&        \"m\",!@#&        \"n\",!@#&        \"o\",!@#&        \"p\",!@#&        \"q\",!@#&        \"r\",!@#&        \"s\",!@#&        \"t\",!@#&        \"u\",!@#&        \"v\",!@#&        \"w\",!@#&        \"x\",!@#&        \"y\",!@#&        \"z\",!@#&        \"0\",!@#&        \"1\",!@#&        \"2\",!@#&        \"3\",!@#&        \"4\",!@#&        \"5\",!@#&        \"6\",!@#&        \"7\",!@#&        \"8\",!@#&        \"9\",!@#&}!@#& !@#&local symbolsFromConfig = {}!@#&for i=1,#symbols do!@#&        symbolsFromConfig[symbols[i]] = config.read(\"System/API/encryptor.cfg\",symbols[i])!@#&end!@#& !@#&local function stringReplace(stroka,chto,nachto)!@#&        while true do!@#&                local starting = 1!@#&                local starting,ending = string.find(stroka,chto,starting)!@#&                if ending ~= nil then!@#&                        stroka = string.sub(stroka,1,starting-1)..nachto..string.sub(stroka,ending+1,-1)!@#&                        starting = starting + #nachto!@#&                else!@#&                        break!@#&                end!@#&        end!@#&        return stroka!@#&end!@#& !@#&function code(stroka)!@#&        local array = {}!@#&        for i=1,#stroka do!@#&                array[i] = string.sub(stroka,i,i)!@#&                for key,val in pairs(symbolsFromConfig) do!@#&                        if array[i] == key then array[i] = val end!@#&                end!@#&        end!@#&        local text = \"\"!@#&        for i=1,#array do!@#&                text = text..array[i]!@#&        end!@#&        return text!@#&end!@#& !@#&function decode(stroka)!@#&        for key,val in pairs(symbolsFromConfig) do!@#&                stroka = stringReplace(stroka,val,key)!@#&        end!@#&        return stroka!@#&end!@#& !@#& !@#&--[[print(\" \")!@#&local cyka = \"hello world! heh kek lol \"!@#&print(\"Standart=\"..cyka)!@#&print(\" \")!@#&local codedcyka = code(cyka)!@#&print(\"Coded=\"..codedcyka)!@#&print(\" \")!@#&local decodedcyka = decode(codedcyka)!@#&print(\"Encoded=\"..decodedcyka)!@#&print(\" \")]]",["speedgui"]="dofunction = 1!@#&xmin = 2!@#&xmax = 4!@#&ymin = 3!@#&ymax = 5!@#&enable = 6!@#&textcolor = 8!@#&backcolor = 9!@#&text = 10!@#&width = 11!@#&btnindx = { }!@#&prgindx = { }!@#&gui =!@#&{!@#&    button =!@#&    {!@#&	    index = function (func,x1,y1,x2,y2,color,tcolor,bcolor,text,w)!@#&		  	if type(func) ~= \"function\" then error(\"Invalid argument 1 of gui.button.index, expected function, got \".. type(func) .. \", wanted function to run\",2) end!@#&		  	if type(x1) ~= \"number\" then error(\"Invalid argument 2 of gui.button.index, expected number, got \".. type(x1) .. \", wanted x1 value\",2) end!@#&		  	if type(y1) ~= \"number\" then error(\"Invalid argument 3 of gui.button.index, expected number, got \".. type(y2) .. \", wanted y1 value\",2) end!@#&		  	if type(x2) ~= \"number\" then error(\"Invalid argument 4 of gui.button.index, expected number, got \".. type(x2) .. \", wanted x2 value\",2) end!@#&		  	if type(y2) ~= \"number\" then error(\"Invalid argument 5 of gui.button.index, expected number, got \".. type(y2) .. \", wanted y2 value\",2) end!@#&		  	if type(color) ~= \"boolean\" then error(\"Invalid argument 6 of gui.button.index, expected number, got \".. type(color) .. \", wanted weather or not to draw button\",2) end!@#&		  	if type(tcolor) ~= \"number\" and type(tcolor) ~=  \"nil\" then error(\"Invalid argument 7 of gui.button.index, expected number, got \".. type(tcolor) .. \",wanted text color\",2) end!@#&		  	if type(bcolor) ~= \"number\" and type(bcolor) ~= \"nil\" then error(\"Invalid argument 8 of gui.button.index, expected number, got \".. type(bcolor) .. \",wanted background color\",2) end!@#&		  	if type(text) ~= \"string\" and type(text) ~= \"nil\" then error(\"Invalid argument 9 of gui.button.index, expected string, got \".. type(text) .. \", wanted button caption\",2) end!@#&		  	if type(w) ~= \"number\" and type(w) ~= \"nil\" then error(\"Invalid argument 10 of gui.button.index, expected number, got \".. type(w) .. \", wanted button width\",2) end!@#&		  	if tcolor == nil or bcolor == nil or text == nil then tcolor = \" \"; bcolor = \" \"; text = \" \" end!@#&		 	table.insert(btnindx,{func,x1,y1,x2,y2,true,color,tcolor,bcolor,text,w})!@#&		  	return #btnindx!@#&		end,!@#&	    draw = function (text, x,y,w,h, tcolor, bcolor)!@#&		    if type(text) ~= \"string\" then error(\"Invalid argument 1 of gui.button.draw, expected string, got \".. type(text) .. \", wanted button caption\",2) end!@#&		  	if type(x) ~= \"number\" then error(\"Invalid argument 2 of gui.button.draw, expected number, got \".. type(x) .. \", wanted x value\",2) end!@#&		  	if type(y) ~= \"number\" then error(\"Invalid argument 3 of gui.button.draw, expected number, got \".. type(y) .. \", wanted y value\",2) end!@#&		  	if type(w) ~= \"number\" then error(\"Invalid argument 4 of gui.button.draw, expected number, got \".. type(w) .. \", wanted button horizantal spacing\",2) end!@#&		  	if type(h) ~= \"number\" then error(\"Invalid argument 5 of gui.button.draw, expected number, got \".. type(h) .. \", wanted button height\",2) end!@#&		  	if type(tcolor) ~= \"number\" then error(\"Invalid argument 6 of gui.button.draw, expected number, got \".. type(y) .. \",wanted text color\",2) end!@#&		  	if type(bcolor) ~= \"number\" then error(\"Invalid argument 7 of gui.button.draw, expected number, got \".. type(y) .. \",wanted background color\",2) end!@#&		  	l = string.len(text)!@#&		  	gui.shape.rect(x,y,(w * 2) + l,h,bcolor)!@#&		  	term.setCursorPos(w+x,(h/2)+y)!@#&		  	term.setTextColor(tcolor)!@#&		  	term.write(text)!@#&		end,!@#&		add = function (text, func, x,y,w,h, tcolor, bcolor)!@#&		  	if type(text) ~= \"string\" then error(\"Invalid argument 1 of gui.button.add, expected string, got \".. type(text) .. \", wanted button caption\",2) end!@#&		  	if type(func) ~= \"function\" then error(\"Invalid argument 2 of gui.button.add, expected function, got \".. type(func) .. \", wanted function to run\",2) end!@#&		  	if type(x) ~= \"number\" then error(\"Invalid argument 3 of gui.button.add, expected number, got \".. type(x) .. \", wanted x value\",2) end!@#&		  	if type(y) ~= \"number\" then error(\"Invalid argument 4 of gui.button.add, expected number, got \".. type(y) .. \", wanted y value\",2) end!@#&		  	if type(w) ~= \"number\" then error(\"Invalid argument 5 of gui.button.add, expected number, got \".. type(w) .. \", wanted button horizantal spacing\",2) end!@#&		  	if type(h) ~= \"number\" then error(\"Invalid argument 6 of gui.button.add, expected number, got \".. type(h) .. \", wanted button height\",2) end!@#&		  	if type(tcolor) ~= \"number\" then error(\"Invalid argument 7 of gui.button.add, expected number, got \".. type(y) .. \",wanted text color\",2) end!@#&		  	if type(bcolor) ~= \"number\" then error(\"Invalid argument 8 of gui.button.add, expected number, got \".. type(y) .. \",wanted background color\",2) end!@#&		  	gui.button.draw(text,x,y,w,h,tcolor,bcolor)!@#&		  	return gui.button.index(func,x,y,x + string.len(text) + (w * 2) - 1,y + h - 1,true,tcolor,bcolor,text,w)!@#&		end,!@#&		gray = function (key)!@#&			if type(key) ~= \"number\" then error(\"Invalid argument of gui.button.gray, expected number, got \".. type(key) .. \", wanted button ID to gray\",2) end!@#&		  	if btnindx[key] == nil then error(\"Invalid argument of gui.button.gray, specified button ID does not exist\",2) end!@#&		  	if btnindx[key][6] == true then!@#&		  		btnindx[key][6] = false!@#&		  		if btnindx[key][7] == true then!@#&		  			gui.button.draw(btnindx[key][text], btnindx[key][xmin], btnindx[key][ymin], btnindx[key][width], (btnindx[key][ymax] - btnindx[key][ymin]) + 1, colors.white, colors.gray)!@#&		  		end!@#&!@#&		  	else!@#&		  		btnindx[key][6] = true!@#&		  		if btnindx[key][7] == true then!@#&		  			gui.button.draw(btnindx[key][text], btnindx[key][xmin], btnindx[key][ymin], btnindx[key][width], (btnindx[key][ymax] - btnindx[key][ymin]) + 1, btnindx[key][textcolor],btnindx[key][backcolor])!@#&		  			!@#&		  		end!@#&		  	end!@#&		end!@#&    },!@#&    shape =!@#&    {!@#&		 altrect = function (x1,y1,x2,y2,color)!@#&		  	if type(x1) ~= \"number\" then error(\"Invalid argument 1 of gui.shape.altrect, expected number, got \".. type(x1) .. \", wanted x1 value\",2) end!@#&		  	if type(y1) ~= \"number\" then error(\"Invalid argument 2 of gui.shape.altrect, expected number, got \".. type(y2) .. \", wanted y1 value\",2) end!@#&		  	if type(x2) ~= \"number\" then error(\"Invalid argument 3 of gui.shape.altrect, expected number, got \".. type(x2) .. \", wanted x2 value\",2) end!@#&		  	if type(y2) ~= \"number\" then error(\"Invalid argument 4 of gui.shape.altrect, expected number, got \".. type(y2) .. \", wanted y2 value\",2) end!@#&		  	if type(color) ~= \"number\" then error(\"Invalid argument 5 of gui.shape.altrect, expected number, got \".. type(color) .. \", wanted color\",2) end!@#&		  	for ydraw = y1,y2 - 1 do!@#&		  		for xdraw = x1,x2 - 1 do!@#&		  			gui.fill(xdraw,ydraw,color)!@#&		  		end!@#&		  	end!@#&		end,!@#&		rect = function (x,y,w,h,color)!@#&		  	if type(x) ~= \"number\" then error(\"Invalid argument 1 of gui.shape.rect, expected number, got \".. type(x) .. \", wanted x value\",2) end!@#&		  	if type(y) ~= \"number\" then error(\"Invalid argument 2 of gui.shape.rect, expected number, got \".. type(y2) .. \", wanted y value\",2) end!@#&		  	if type(w) ~= \"number\" then error(\"Invalid argument 3 of gui.shape.rect, expected number, got \".. type(x2) .. \", wanted width value\",2) end!@#&		  	if type(h) ~= \"number\" then error(\"Invalid argument 4 of gui.shape.rect, expected number, got \".. type(y2) .. \", wanted height value\",2) end!@#&		  	if type(color) ~= \"number\" then error(\"Invalid argument 5 of gui.shape.rect, expected number, got \".. type(color) .. \", wanted color\",2) end!@#&		  	gui.shape.altrect(x,y,x+w,y+h,color)!@#&		end,!@#&		line = function (x1,y1,x2,y2,color)!@#&		  	if type(x1) ~= \"number\" then error(\"Invalid argument 1 of gui.shape.line, expected number, got \".. type(x1) .. \", wanted x1 value\",2) end!@#&		  	if type(y1) ~= \"number\" then error(\"Invalid argument 2 of gui.shape.line, expected number, got \".. type(y1) .. \", wanted y1 value\",2) end!@#&		  	if type(x2) ~= \"number\" then error(\"Invalid argument 3 of gui.shape.line, expected number, got \".. type(x2) .. \", wanted x2 value\",2) end!@#&		  	if type(y2) ~= \"number\" then error(\"Invalid argument 3 of gui.shape.line, expected number, got \".. type(y2) .. \", wanted y2 value\",2) end!@#&		  	if type(color) ~= \"number\" then error(\"Invalid argument 4 of gui.shape.line, expected number, got \".. type(color) .. \", wanted color value\",2) end!@#&		  	--local m = (y2 - y1) / (x2 / x1)!@#&			--for lx = x1, x2 do!@#&	 		--	local ly = (m * lx) + y1!@#&	 		--	gui.fill(lx, ly, color)!@#&			--end!@#&			rise = y2 - y1!@#&			run = x2 - x1!@#&			m = rise / run!@#&			if x1 == x2 or y1 == y2 then!@#&				gui.shapes.altrect(x1, x2, y1, y2, color)!@#&			else!@#&				for i = x1, x2 do!@#&					y = (m * i) + y1!@#&					gui.fill(i, y, color)!@#&				end!@#&			end!@#&		end!@#&    },!@#&    progbar =!@#&    {!@#&	 	add = function (x, y, width, percent, forecolor, backcolor)!@#&	 		if type(x) ~= \"number\" then error(\"Invalid argument 1 of gui.progbar.add, expected number, got \".. type(x) .. \", wanted x value\",2) end!@#&	 		if type(y) ~= \"number\" then error(\"Invalid argument 2 of gui.progbar.add, expected number, got \".. type(y) .. \", wanted y value\",2) end!@#&	 		if type(width) ~= \"number\" then error(\"Invalid argument 3 of gui.progbar.add, expected number, got \".. type(width) .. \", wanted width value\",2) end!@#&	 		if type(percent) ~= \"number\" then error(\"Invalid argument 4 of gui.progbar.add, expected number, got \".. type(percent) .. \", wanted percent value\",2) end!@#&	 		if type(forecolor) ~= \"number\" then error(\"Invalid argument 5 of gui.progbar.add, expected number, got \".. type(forecolor) .. \", wanted forecolor value)\",2) end!@#&	 		if type(backcolor) ~= \"number\" then error(\"Invalid argument 6 of gui.progbar.add, expected number, got \".. type(backcolor) .. \", wanted x backcolor\",2) end!@#&	  		gui.shape.rect(x,y,width,1,backcolor)!@#&	 		if percent > 100 then percent = 100 end!@#&	 		gui.shape.rect(x,y,(percent / 100) * width,1,forecolor)!@#&	 		table.insert(prgindx,{x,y,width,percent,forecolor,backcolor})!@#&	 		return #prgindx!@#&	 	end,!@#&	 	increment = function (key, percent)!@#&	 		if type(key) ~= \"number\" then error(\"Invalid argument 1 of gui.progbar.increment, expected number, got \".. type(key) .. \", wanted progress bar ID value\",2) end!@#&	 		if type(percent) ~= \"number\" then error(\"Invalid argument 2 of gui.progbar.increment, expected number, got \".. type(percent) .. \", wanted percent incriment value\",2) end!@#&	  		prgindx[key][4] = prgindx[key][4] + percent!@#&	 		if prgindx[key][4] > 100 then prgindx[key][4] = 100 end!@#&	 		gui.shape.rect(prgindx[key][1],prgindx[key][2],prgindx[key][3],1,prgindx[key][6])!@#&	 		gui.shape.rect(prgindx[key][1],prgindx[key][2],(prgindx[key][4] / 100) * prgindx[key][3],1,prgindx[key][5])!@#&	 		return prgindx[key][4]!@#&	 	end,!@#&	 	set = function (key, percent)!@#&	 		if type(key) ~= \"number\" then error(\"Invalid argument 1 of gui.progbar.set, expected number, got \".. type(key) .. \", wanted progress bar ID value\",2) end!@#&	 		if type(percent) ~= \"number\" then error(\"Invalid argument 2 of gui.progbar.set, expected number, got \".. type(percent) .. \", wanted percent incriment value\",2) end!@#&	 		prgindx[key][4] = percent!@#&	 		if prgindx[key][4] > 100 then prgindx[key][4] = 100 end!@#&	 		gui.shape.rect(prgindx[key][1],prgindx[key][2],prgindx[key][3],1,prgindx[key][6])!@#&	 		gui.shape.rect(prgindx[key][1],prgindx[key][2],(prgindx[key][4] / 100) * prgindx[key][3],1,prgindx[key][5])!@#&	 	end!@#&	},!@#&	fill = function (x,y,color, char)!@#&		if type(x) ~= \"number\" then error(\"Invalid argument 1 of gui.fill, expected number, got \".. type(x) .. \", wanted x value\",2) end!@#&	 	if type(y) ~= \"number\" then error(\"Invalid argument 2 of gui.fill, expected number, got \".. type(y) .. \", wanted y value\",2) end!@#&	 	if type(color) ~= \"number\" then error(\"Invalid argument 3 of gui.fill, expected number, got \".. type(color) .. \", wanted color\",2) end!@#&	 	if type(char) ~= \"string\" and type(char) ~= \"nil\" then error(\"Invalid argument 4 of gui.fill, expected string, got \".. type(char) .. \", wanted single character (string)\",2) end!@#&	 	if type(char) ~= \"nil\" then if string.len(char) ~= 1 then error(\"Invalid argument 4 of gui.fill, expected 1 charecter, got\".. string.len(char) .. \" charectars, wanted charecter or nil\",2) end end!@#&		term.setCursorPos(x,y)!@#&		term.setBackgroundColor(color)!@#&		if type(char) == \"nil\" then term.write(\" \") else term.write(char) end!@#&	end!@#&}!@#&!@#&---------------------------------------------------!@#&--       ||                             ||       --!@#&--      _||_  Place your methods here  _||_      --!@#&--      \\  /                           \\  /      --  !@#&--       \\/                             \\/       --!@#&---------------------------------------------------!@#&!@#&!@#&!@#&---------------------------------------------------!@#&--       /\\                             /\\       --!@#&--      /  \\                           /  \\      --!@#&--      ~||~  Place your methods here  ~||~      --!@#&--       ||                             ||       --!@#&---------------------------------------------------!@#&!@#&thisway = function ()!@#&!@#&---------------------------------------------------!@#&--         ||                        ||          --!@#&--        _||_ Place your code here _||_         --!@#&--        \\  /                      \\  /         --!@#&--         \\/                        \\/          --!@#&---------------------------------------------------!@#&!@#&--HOLYSHITNOTHEREIMACOMMENT!!!!!!!!!!!!!!!!!!!!!!--!@#&!@#&---------------------------------------------------!@#&--         /\\                        /\\          --!@#&--        /  \\                      /  \\         --!@#&--        ~||~ Place your code here ~||~         --!@#&--         ||                        ||          --!@#&---------------------------------------------------!@#&!@#&end!@#&start = function ()!@#&	dof = true!@#&	while dof == true do!@#&		local event, button, xpos, ypos = os.pullEvent(\"mouse_click\")!@#&		for i = 1, #btnindx do!@#&			if xpos >= btnindx[i][2] and xpos <= btnindx[i][4] and ypos >= btnindx[i][3] and ypos <= btnindx[i][5] and btnindx[i][6] == true then!@#&				btnindx[i][1]()!@#&			end!@#&		end!@#&	end!@#&end!@#&stop = function ()!@#&	dof = false!@#&end!@#&!@#&if Is_running_in_portable_mode == true then parallel.waitForAll(thisway,start) end!@#&!@#&--Leonard Henry Phelan IV",["context"]="function menu(...)!@#&        --   < 3      TABLE,      API!@#&        if #arg < 3 or type(arg[3]) ~= \"table\" then error(\"Usage: menu(number x,number y,table Element1,table Element2, table Element3...) \\nReturns: string Action \\n<Element> structure: {string Name[, boolean isElementHidden][,number colorOfText]}\") end!@#&       !@#&        --  !@#&        local xSize, ySize = term.getSize()!@#& !@#&        --        !@#&        local function text(x,y,text1,color)!@#&                term.setTextColor(color)!@#&                term.setCursorPos(x,y)!@#&                term.write(text1)!@#&        end!@#& !@#&        --    (   ,     )!@#&        local Objects = {}!@#&        local function newObj(name,isHidden,xStart,xEnd,y)!@#&                Objects[name]={}!@#&                Objects[name][\"isHidden\"] = isHidden!@#&                Objects[name][\"xStart\"] = xStart!@#&                Objects[name][\"xEnd\"] = xEnd!@#&                Objects[name][\"y\"] = y!@#&        end!@#&       !@#&        --    -   !@#&        local theLongestElement = #arg[3][1]!@#&        for i=3,#arg do!@#&                if arg[i] ~= \"-\" and theLongestElement < #arg[i][1] then!@#&                        theLongestElement = #arg[i][1]!@#&                end!@#&        end!@#& !@#&        --  !@#&        local xSizeOfMenu = theLongestElement + 4!@#&        local ySizeOfMenu = #arg-2!@#& !@#&        local xStartToDisplay = nil!@#&        local yStartToDisplay = nil!@#& !@#&        --   !@#&        local function square(x1,y1,width,height,color)!@#&                local string = string.rep(\" \",width)!@#&                term.setBackgroundColor(color)!@#&                for y=y1,(y1+height-1) do!@#&                        term.setCursorPos(x1,y)!@#&                        term.write(string)!@#&                end!@#&        end!@#& !@#&        --   !@#&        local function drawSeparator(x,y,size)!@#&                term.setTextColor(colors.lightGray)!@#&                term.setCursorPos(x,y)!@#&                term.write(string.rep(\"-\",size))!@#&        end!@#&       !@#&        --   !@#&        local function drawMenu(xMenu,yMenu)!@#& !@#&                --  ,      !@#&                if yMenu+ySizeOfMenu - 1  >= ySize then yMenu = yMenu - (yMenu+ySizeOfMenu - 1 - ySize) - 1 end!@#&                if xMenu+xSizeOfMenu - 1  >= xSize then xMenu = xMenu - (xMenu+xSizeOfMenu - 1 - xSize) - 1 end!@#& !@#&                --      !@#&                xStartToDisplay = xMenu + 2!@#&                yStartToDisplay = yMenu!@#& !@#&                --  !@#&                square(xMenu+1,yMenu+1,xSizeOfMenu,ySizeOfMenu,colors.gray)!@#& !@#&                --   !@#&                square(xMenu,yMenu,xSizeOfMenu,ySizeOfMenu,colors.white)!@#& !@#&                --    ,    !@#&                for i=3,#arg do!@#&                        --     , !@#&                        if arg[i] ~= \"-\" then!@#&                                --      !@#&                                local contextColor = colors.black!@#&                                -- _2 (/ )  _3 (  )     , !@#&                                if arg[i][2] == nil and arg[i][3] == nil then!@#&                                        contextColor = colors.black!@#&                                --  2 = FALSE   3  , !@#&                                elseif arg[i][2] == false and arg[i][3] == nil then!@#&                                        contextColor = colors.black!@#&                                --  2 = FALSE   3 , !@#&                                elseif arg[i][2] == false and arg[i][3] ~= nil then!@#&                                        contextColor = arg[i][3]!@#&                                --  2 = TRUE,   !@#&                                elseif arg[i][2] == true then!@#&                                        contextColor = colors.lightGray!@#&                                end!@#& !@#&                                --     !@#&                                text(xStartToDisplay,yStartToDisplay+i-3,arg[i][1],contextColor)!@#&                                --    ,      !@#&                                newObj(arg[i][1],arg[i][2],xMenu,xMenu+xSizeOfMenu-1,yStartToDisplay+i-3)!@#& !@#&                        --  - , !@#&                        else!@#&                                drawSeparator(xMenu,yStartToDisplay+i-3,xSizeOfMenu)!@#&                        end!@#&                end!@#&        end!@#&       !@#&        -- ,  !@#&        drawMenu(arg[1],arg[2])!@#& !@#&        --  !@#&        local event,side,xClick,yClick = os.pullEvent()!@#&        if event == \"monitor_touch\" then side = 1 end!@#&        if event == \"mouse_click\" or event == \"monitor_touch\" then!@#&                --          ( = , KEY = VAL)!@#&                for key,val in pairs(Objects) do!@#&                        --    ,      , !@#&                        if xClick >= Objects[key][\"xStart\"] and xClick <= Objects[key][\"xEnd\"] and yClick == Objects[key][\"y\"] and Objects[key][\"isHidden\"] == false or xClick >= Objects[key][\"xStart\"] and xClick <= Objects[key][\"xEnd\"] and yClick == Objects[key][\"y\"] and Objects[key][\"isHidden\"] == nil then!@#&                                --    !@#&                                for i=Objects[key][\"xStart\"],Objects[key][\"xEnd\"] do!@#&                                        paintutils.drawPixel(i,Objects[key][\"y\"],colors.blue)!@#&                                end!@#&                                --   ,   !@#&                                text(xStartToDisplay,Objects[key][\"y\"],key,colors.white)!@#&                                --  !@#&                                sleep(0.3)!@#&                                --  KEY (     )    !@#&                                return key!@#&                        end!@#&                        --       ,    NIL!@#&                end!@#&        end!@#&end",["lddfm"]="--[[!@#&	LDDFM!@#&	 File Manager API!!@#&	Select files with ease!!@#&	!@#&	Just do something like!@#&	  local path = makeMenu()!@#&	and you're set!!@#&	!@#&	Get with:!@#&	  pastebin get wfdb986Z lddfm!@#&	  std ld lddfm lddfm!@#&	  std PB wfdb986Z lddfm!@#&--]]!@#&!@#&local lddfm = { --main API!@#&	scroll = 0,!@#&	ypaths = {},!@#&}!@#&!@#&lddfm.scr_x, lddfm.scr_y = term.getSize()!@#&!@#&lddfm.setPalate = function(_p)!@#&	if type(_p) ~= \"table\" then!@#&		_p = {}!@#&	end!@#&	lddfm.p = { --the DEFAULT color palate!@#&		bg =        _p.bg or colors.gray,			-- whole background color!@#&		d_txt =     _p.d_txt or colors.yellow,		-- directory text color!@#&		d_bg =      _p.d_bg or colors.gray,			-- directory bg color!@#&		f_txt =     _p.f_txt or colors.white,		-- file text color!@#&		f_bg =      _p.f_bg or colors.gray,			-- file bg color!@#&		p_txt =     _p.p_txt or colors.black,		-- path text color!@#&		p_bg =      _p.p_bg or colors.lightGray,	-- path bg color!@#&		close_txt = _p.close_txt or colors.gray,	-- close button text color!@#&		close_bg =  _p.close_bg or colors.lightGray,-- close button bg color!@#&		scr =       _p.scr or colors.lightGray,		-- scrollbar color!@#&		scrbar =    _p.scrbar or colors.gray,		-- scroll tab color!@#&	}!@#&end!@#&!@#&lddfm.setPalate()!@#&!@#&lddfm.foldersOnTop = function(floop,path)!@#&	local output = {}!@#&	for a = 1, #floop do!@#&		if fs.isDir(fs.combine(path,floop[a])) then!@#&			table.insert(output,1,floop[a])!@#&		else!@#&			table.insert(output,floop[a])!@#&		end!@#&	end!@#&	return output!@#&end!@#&!@#&lddfm.filterFileFolders = function(list,path,_noFiles,_noFolders,_noCD,_doHidden)!@#&	local output = {}!@#&	for a = 1, #list do!@#&		local entry = fs.combine(path,list[a])!@#&		if fs.isDir(entry) then!@#&			if entry == \"..\" then!@#&				if not (_noCD or _noFolders) then table.insert(output,list[a]) end!@#&			else!@#&				if not ((not _doHidden) and list[a]:sub(1,1) == \".\") then!@#&					if not _noFolders then table.insert(output,list[a]) end!@#&				end!@#&			end!@#&		else!@#&			if not ((not _doHidden) and list[a]:sub(1,1) == \".\") then!@#&				if not _noFiles then table.insert(output,list[a]) end!@#&			end!@#&		end!@#&	end!@#&	return output!@#&end!@#&!@#&lddfm.isColor = function(col)!@#&	for k,v in pairs(colors) do!@#&		if v == col then!@#&			return true, k!@#&		end!@#&	end!@#&	return false!@#&end!@#&!@#&lddfm.clearLine = function(x1,x2,_y,_bg,_char)!@#&	local cbg, bg = colors.black!@#&	local x,y = term.getCursorPos()!@#&	local sx,sy = term.getSize()!@#&	if type(_char) == \"string\" then char = _char else char = \" \" end!@#&	if type(_bg) == \"number\" then!@#&		if lddfm.isColor(_bg) then bg = _bg!@#&		else bg = cbg end!@#&	else bg = cbg end!@#&	term.setCursorPos(x1 or 1, _y or y)!@#&	term.setBackgroundColor(bg)!@#&	if x2 then --it pains me to add an if statement to something as simple as this!@#&		term.write((char or \" \"):rep(x2-x1))!@#&	else!@#&		term.write((char or \" \"):rep(sx-(x1 or 0)))!@#&	end!@#&	term.setBackgroundColor(cbg)!@#&	term.setCursorPos(x,y)!@#&end!@#&!@#&lddfm.render = function(_x1,_y1,_x2,_y2,_rlist,_path,_rscroll,_canClose,_scrbarY)!@#&	local tsv = term!@#&	local px,py = term.getCursorPos()!@#&	local x1, x2, y1, y2 = _x1 or 1, _x2 or lddfm.scr_x, _y1 or 1, _y2 or lddfm.scr_y!@#&	local rlist = _rlist or {\"Invalid directory.\"}!@#&	local path = _path or \"And that's terrible.\"!@#&	ypaths = {}!@#&	local rscroll = _rscroll or 0!@#&	for a = y1, y2 do!@#&		lddfm.clearLine(x1,x2,a,lddfm.p.bg)!@#&	end!@#&	term.setCursorPos(x1,y1)!@#&	term.setTextColor(lddfm.p.p_txt)!@#&	lddfm.clearLine(x1,x2+1,y1,lddfm.p.p_bg)!@#&	term.setBackgroundColor(lddfm.p.p_bg)!@#&	term.write((\"/\"..path):sub(1,x2-x1))!@#&	for a = 1,(y2-y1) do!@#&		if rlist[a+rscroll] then!@#&			term.setCursorPos(x1,a+(y1))!@#&			if fs.isDir(fs.combine(path,rlist[a+rscroll])) then!@#&				lddfm.clearLine(x1,x2,a+(y1),lddfm.p.d_bg)!@#&				term.setTextColor(lddfm.p.d_txt)!@#&				term.setBackgroundColor(lddfm.p.d_bg)!@#&			else!@#&				lddfm.clearLine(x1,x2,a+(y1),lddfm.p.f_bg)!@#&				term.setTextColor(lddfm.p.f_txt)!@#&				term.setBackgroundColor(lddfm.p.f_bg)!@#&			end!@#&			term.write(rlist[a+rscroll]:sub(1,x2-x1))!@#&			ypaths[a+(y1)] = rlist[a+rscroll]!@#&		else!@#&			lddfm.clearLine(x1,x2,a+(y1),lddfm.p.bg)!@#&		end!@#&	end!@#&	local scrbarY = _scrbarY or math.ceil( (y1+1)+( (_rscroll/(#_rlist-(y2-(y1+1))))*(y2-(y1+1)) ) )!@#&	for a = y1+1, y2 do!@#&		term.setCursorPos(x2,a)!@#&		if a == scrbarY then!@#&			term.setBackgroundColor(lddfm.p.scrbar)!@#&		else!@#&			term.setBackgroundColor(lddfm.p.scr)!@#&		end!@#&		term.write(\" \")!@#&	end!@#&	if _canClose then!@#&		term.setCursorPos(x2-4,y1)!@#&		term.setTextColor(lddfm.p.close_txt)!@#&		term.setBackgroundColor(lddfm.p.close_bg)!@#&		term.write(\"close\")!@#&	end!@#&	term.setCursorPos(px,py)!@#&	return scrbarY!@#&end!@#&!@#&lddfm.coolOutro = function(x1,y1,x2,y2,_bg,_txt,char)!@#&	local cx, cy = term.getCursorPos()!@#&	local bg, txt = term.getBackgroundColor(), term.getTextColor()!@#&	term.setTextColor(_txt or colors.white)!@#&	term.setBackgroundColor(_bg or colors.black)!@#&	local _uwah = 0!@#&	for y = y1, y2 do!@#&		for x = x1, x2 do!@#&			_uwah = _uwah + 1!@#&			term.setCursorPos(x,y)!@#&			term.write(char or \" \")!@#&			if _uwah >= math.ceil((x2-x1)*1.63) then sleep(0) _uwah = 0 end!@#&		end!@#&	end!@#&	term.setTextColor(txt)!@#&	term.setBackgroundColor(bg)!@#&	term.setCursorPos(cx,cy)!@#&end!@#&!@#&lddfm.scrollMenu = function(amount,list,y1,y2)!@#&	if #list >= y2-y1 then!@#&		lddfm.scroll = lddfm.scroll + amount!@#&		if lddfm.scroll < 0 then!@#&			lddfm.scroll = 0!@#&		end!@#&		if lddfm.scroll > #list-(y2-y1) then!@#&			lddfm.scroll = #list-(y2-y1)!@#&		end!@#&	end!@#&end!@#&!@#&--[[!@#& a quick explanation of the arguments:!@#&!@#&x1 and y1: top-left corner coordinates of menu window. defaults to the top-left corner of the screen!@#&x2 and y2: bottom-right corner coordinates of menu window. defaults to the bottom-right corner of the screen!@#&_path: path to start viewing. defaults to \"/\"!@#&_noFiles: whether or not to view files in the menu, mainly for picking a path for installing something. defaults to false!@#&_noFolders: whether or not to view folders in the menu, mainly for choosing a file to run or whatever. defaults to false!@#&_noCD: whether or not you can change the directory, mainly to limit choices to a single folder. defaults to false!@#&_noSelectFolders: whether or not you can select folders to return. defaults to false!@#&_doHidden: whether or not to hide hidden files (starts with \".\"). defaults to false!@#&_p: the palate. has: bg, d_txt, d_bg, f_txt, t_bg, p_txt, p_bg, scr, scrbar. 'd' is for directory, 'f' is for file, 'p' is for path bar.!@#&_canClose: whether or not you can click on the little top-right \"Cancel\" button.!@#&--]]!@#&!@#&makeMenu = function(_x1,_y1,_x2,_y2,_path,_noFiles,_noFolders,_noCD,_noSelectFolders,_doHidden,_p,_canClose)!@#&	if _noFiles and _noFolders then!@#&		return false, \"C'mon, man...\"!@#&	end!@#&	if _x1 == true then!@#&		return false, \"arguments: x1, y1, x2, y2, path, noFiles, noFolders, noCD, noSelectFolders, doHidden, palate, canClose\" -- a little help!@#&	end!@#&	lddfm.setPalate(_p)!@#&	local path, list = _path or \"\"!@#&	lddfm.scroll = 0!@#&	local _pbg, _ptxt = colors.black, colors.white!@#&	local x1, x2, y1, y2 = _x1 or 1, _x2 or lddfm.scr_x, _y1 or 1, _y2 or lddfm.scr_y!@#&	local keysDown = {}!@#&	local _barrY!@#&	while true do!@#&		list = lddfm.foldersOnTop(lddfm.filterFileFolders(fs.list(path),path,_noFiles,_noFolders,_noCD,_doHidden),path)!@#&		if (path ~= \"..\") and not (_noCD or _noFolders) then!@#&			table.insert(list,1,\"..\")!@#&		end!@#&		_res, _barrY = pcall( function() return lddfm.render(x1,y1,x2,y2,list,path,lddfm.scroll,_canClose) end)!@#&		if not _res then!@#&			error(_barrY)!@#&		end!@#&		local evt = {os.pullEvent()}!@#&		if evt[1] == \"mouse_scroll\" then!@#&			lddfm.scrollMenu(evt[2],list,y1,y2)!@#&		elseif evt[1] == \"mouse_click\" then!@#&			local butt,mx,my = evt[2],evt[3],evt[4]!@#&			if (butt == 1 and my == y1 and mx <= x2 and mx >= x2-4) and _canClose then!@#&				--lddfm.coolOutro(x1,y1,x2,y2)!@#&				term.setTextColor(_ptxt) term.setBackgroundColor(_pbg)!@#&				return false!@#&			elseif ypaths[my] and (mx >= x1 and mx < x2) then --x2 is reserved for the scrollbar, breh!@#&				if fs.isDir(fs.combine(path,ypaths[my])) then!@#&					if _noCD or butt == 3 then!@#&						if not _noSelectFolders or _noFolders then!@#&							--lddfm.coolOutro(x1,y1,x2,y2)!@#&							term.setTextColor(_ptxt) term.setBackgroundColor(_pbg)!@#&							return fs.combine(path,ypaths[my])!@#&						end!@#&					else!@#&						path = fs.combine(path,ypaths[my])!@#&						lddfm.scroll = 0!@#&					end!@#&				else!@#&					term.setTextColor(_ptxt) term.setBackgroundColor(_pbg)!@#&					return fs.combine(path,ypaths[my])!@#&				end!@#&			end!@#&		elseif evt[1] == \"key\" then!@#&			keysDown[evt[2]] = true!@#&			if evt[2] == keys.enter and not (_noFolders or _noCD or _noSelectFolders) then --the logic for _noCD being you'd normally need to go back a directory to select the current directory.!@#&				--lddfm.coolOutro(x1,y1,x2,y2)!@#&				term.setTextColor(_ptxt) term.setBackgroundColor(_pbg)!@#&				return path!@#&			end!@#&			if evt[2] == keys.up then!@#&				lddfm.scrollMenu(-1,list,y1,y2)!@#&			elseif evt[2] == keys.down then!@#&				lddfm.scrollMenu(1,list,y1,y2)!@#&			end!@#&			if evt[2] == keys.pageUp then!@#&				lddfm.scrollMenu(y1-y2,list,y1,y2)!@#&			elseif evt[2] == keys.pageDown then!@#&				lddfm.scrollMenu(y2-y1,list,y1,y2)!@#&			end!@#&			if evt[2] == keys.home then!@#&				lddfm.scroll = 0!@#&			elseif evt[2] == keys[\"end\"] then!@#&				if #list > (y2-y1) then!@#&					lddfm.scroll = #list-(y2-y1)!@#&				end!@#&			end!@#&			if evt[2] == keys.h then!@#&				if keysDown[keys.leftCtrl] or keysDown[keys.rightCtrl] then!@#&					_doHidden = not _doHidden!@#&				end!@#&			end!@#&		elseif evt[1] == \"key_up\" then!@#&			keysDown[evt[2]] = false!@#&		end!@#&	end!@#&end!@#&!@#&return makeMenu",["grid"]="!@#&-- ] Created by: Redxone(Lewisk3) [ -- !@#&-- ] 	(c)Lewisk3 Corpz 2016	  [ -- !@#&!@#&-- DOCUMENTATION (Sorta...) -- !@#&--] grid.create(width,height)!@#&--] grid:set(x,y,thing)!@#&--] grid:find(obj) - returns the found objects x and y location!@#&--] grid:findByAttrib(attrib,compare)!@#&--] grid:get(x,y) - returns the object in the x any y of the grid!@#&--] grid:getByAttrib(attrib,compare)!@#&--] grid:getWidth() - returns width of grid!@#&--] grid:getHeight() - returns grid height!@#&--] grid:unset(x,y) - set grid spot to {}!@#&--] grid:getRaw() - returns entire grid unserialized!@#&--] grid:getSerial() - returns entire grid serialized!@#&--] grid:replace(newgrid) - replaces grid with another grid!@#&--] grid:draw()!@#&--] grid:drawAttrib(attrib)!@#&--] grid:fill(with) - fills grid with something!@#&--] grid:setRegion(startx,starty,endx,endy,with) - fills grid from start x and start y to ends with something!@#&--] grid:drawRegion(startx,starty,endx,endy)!@#&!@#&function create(w, h)!@#&	local gridtable = {!@#&		maxw = w,!@#&		maxh = h,!@#&		grid = {},!@#&!@#&		set = function(self,x,y,obj)!@#&			if(x <= self.maxw and y <= self.maxh)then!@#&				self.grid[y][x] = obj!@#&			else!@#&				error(\"grid:set -> Invaild X and/or Y param(s).\")!@#&			end!@#&		end,!@#&!@#&		find = function(self,obj)!@#&			for y = 0, self.maxh do!@#&			 	for x = 0, self.maxw do!@#&			 		if(textutils.serialize(self.grid[y][x]) == textutils.serialize(obj))then!@#&			 			return x, y!@#&			 		end!@#&			 	end!@#&			 end!@#&		end,!@#&!@#&		get = function(self,x,y)!@#&			local tbl = {}!@#&			if(x <= self.maxw and y <= self.maxh )then!@#&				return self.grid[y][x]!@#&			else!@#&				return tbl!@#&			end!@#&		end,!@#&!@#&		getByAttribEqual = function(self,a,c)!@#&			local gx, gy = 0, 0!@#&			for y = 0, self.maxh do!@#&			 	for x = 0, self.maxw do!@#&			 		if(self.grid[y][x][a] == c)then!@#&			 			gx = x!@#&			 			gy = y!@#&			 		end!@#&			 	end!@#&			 end!@#&			return self:get(gx,gy)!@#&		end,!@#&!@#&		checkAttribEqual = function(self,x,y,a,e)!@#&			 if(self.grid[y][x][a] == c)then!@#&			 	return true!@#&			 else!@#&			 	return false!@#&			 end!@#&		end,!@#&!@#&		getByAttrib = function(self,a)!@#&			local xx, yy = 0, 0!@#&			for y = 0, self.maxh do!@#&			 	for x = 0, self.maxw do!@#&			 		if(self.grid[y][x][a] ~= nil)then!@#&			 			 xx = x!@#&			 			 yy = y!@#&			 		end!@#&			 	end!@#&			 end!@#&!@#&			 if(xx ~= 0 and yy ~= 0)then!@#&				return self:get(xx,yy)[a]!@#&			 else!@#&				return {}!@#&			 end!@#&		end,!@#&!@#&		setByAttrib = function(self,a,n)!@#&			for y = 0, self.maxh do!@#&			 	for x = 0, self.maxw do!@#&			 		if(self.grid[y][x][a] ~= nil)then!@#&			 			 local bset = self.grid[y][x]!@#&			 			 bset[a] = n!@#&			 			 self:set(x,y,bset)!@#&			 		end!@#&			 	end!@#&			 end!@#&		end,!@#&!@#&		getWidth = function(self)!@#&			return self.maxw!@#&		end,!@#&!@#&		getHeight = function(self)!@#&			return self.maxh!@#&		end,!@#&!@#&		unset = function(self,x,y)!@#&			if(x <= self.maxw and y <= self.maxh)then!@#&				self.grid[y][x] = {}!@#&			else!@#&				error(\"grid:unset -> Invaild X and/or Y param(s).\")!@#&			end!@#&		end,!@#&!@#&		getRaw = function(self)!@#&			return self.grid!@#&		end,!@#&!@#&		getSerial = function(self)!@#&			return textutils.serialize(self.grid):gsub(\"\\n%s*\",\"\")!@#&		end,!@#&!@#&		replace = function(self,grid)!@#&			if(type(grid) ~= \"table\")then error(\"grid:replace -> Invalid grid type. \") end!@#&			 -- calculating grid size... --!@#&			 self.maxh = 0!@#&			 self.maxw = 0!@#&!@#&			 for iy = 1, #grid do!@#&			 	self.maxh = self.maxh + 1!@#&			 end!@#&!@#&			 for ix = 1, #grid[0] do!@#&				self.maxw = self.maxw + 1!@#&		     end!@#&!@#&		     self.grid = grid!@#&!@#&			 if(self.maxh <= 0 or self.maxw <= 0)then error(\"grid:replace -> Grid is malformed.\") end!@#&!@#&		end,!@#&!@#&		draw = function(self)!@#&			for y = 0, self.maxh do!@#&			 	for x = 0, self.maxw do!@#&			 		term.setCursorPos(x,y)!@#&			 		if(self.grid[y][x] ~= {})then!@#&						term.write(self.grid[y][x])!@#&					end!@#&			 	end!@#&			 end!@#&		end,!@#&!@#&		swap = function(self,fromx,fromy,tox,toy)!@#&			local prevo = self.grid[fromy][fromx] !@#&			local too = self.grid[toy][tox]!@#&			self.grid[fromy][fromx] = too!@#&			self.grid[toy][tox] = prevo!@#&		end,!@#&!@#&		moveInto = function(self,obj,x,y,uap,flags)!@#&			local prloc = self:get(x,y)!@#&			local ox, oy = self:find(obj)!@#&			-- only take place if flags on other block are met --!@#&			if(type(flags) == \"table\")then!@#&				for k, v in pairs(flags) do!@#&					if(not self:checkAttribEqual(x,y,k,v))then!@#&						return false!@#&					end!@#&				end!@#&			end!@#&			-- if passes flags -- !@#&			if(type(uap) == \"table\")then!@#&				for k, v in pairs(uap) do!@#&					obj[k] = v!@#&				end				!@#&			end!@#&			self:set(ox,oy,prloc)!@#&			self:set(x,y,obj)!@#&		end,!@#&!@#&		renderSwap = function(self, charattrib, tcolattrib, bcolattrib, fromx,fromy,tox,toy)!@#&			self:swap(fromx,fromy,tox,toy)		!@#&			self:renderRegion(charattrib, tcolattrib, bcolattrib,tox,toy,tox,toy)!@#&			self:renderRegion(charattrib, tcolattrib, bcolattrib,fromx,fromy,fromx,fromy)!@#&		end,!@#&!@#&		render = function(self,charattrib,tcolattrib,bcolattrib)!@#&			local ta = colors.white!@#&			local ba = colors.black!@#&			for y = 0, self.maxh do!@#&			 	for x = 0, self.maxw do!@#&			 		term.setCursorPos(x,y)!@#&			 		term.setTextColor(self.grid[y][x][tcolattrib])!@#&			 		term.setBackgroundColor(self.grid[y][x][bcolattrib])!@#&					 	ta = colors.white!@#&					 	ba = colors.black!@#&					 	if(type(tcolattrib) == \"number\")then ta = tcolattrib end!@#&					 	if(type(bcolattrib) == \"number\")then ba = bcolattrib end!@#&					 	if(self.grid[y][x][charattrib] ~= nil)then!@#&					 		if(self.grid[y][x][tcolattrib] ~= nil)then!@#&					 			ta = self.grid[y][x][tcolattrib]!@#&					 		end!@#&					 		if(self.grid[y][x][bcolattrib] ~= nil)then!@#&					 			ba = self.grid[y][x][bcolattrib]!@#&					 		end!@#&						 	term.setTextColor(ta)!@#&				 			term.setBackgroundColor(ba)!@#&					 		term.write(self.grid[y][x][charattrib])!@#&					 	end!@#&				end!@#&			 end!@#&		end,!@#&!@#&		drawAttrib = function(self,a)!@#&			for y = 0, self.maxh do!@#&			 	for x = 0, self.maxw do!@#&			 		term.setCursorPos(x,y)!@#&			 		if(self.grid[y][x][a] ~= nil)then!@#&			 			term.write(self.grid[y][x][a])!@#&			 		end!@#&			 	end!@#&			 end!@#&		end,!@#&!@#&		fill = function(self,obj)!@#&			for y = 0, self.maxh do!@#&			 	for x = 0, self.maxw do!@#&			 		self.grid[y][x] = obj!@#&			 	end!@#&			 end!@#&		end,!@#&!@#&		setCursorPos = function(self,x,y)!@#&			term.setCursorPos(y,x)!@#&		end,!@#&!@#&		loop = function(self,f,startx,starty,endx,endy)!@#&			if(startx == nil)then startx = 0 end!@#&			if(starty == nil)then starty = 0 end!@#&			if(endx == nil and startx ~= nil)then endx = startx end!@#&			if(endy == nil and starty ~= nil)then endy = starty end!@#&			if(endx == nil)then endx = self.maxw end!@#&			if(endy == nil)then endy = self.maxh end!@#&			for y = tonumber(starty), tonumber(endy) do!@#&				for x = tonumber(startx), tonumber(endx) do!@#&					f(x,y)!@#&				end!@#&			end!@#&		end,!@#&!@#&		setRegion = function(self, sx, sy, ex, ey, obj)!@#&			if(sx <= self.maxw and sy <= self.maxh and ex <= self.maxw and ey <= self.maxh)then!@#&				for y = tonumber(sy), tonumber(ey) do!@#&				 	for x = tonumber(sx), tonumber(ex) do!@#&				 		self.grid[y][x] = obj!@#&				 	end!@#&				 end!@#&			else!@#&				error(\"grid:setRegion -> Invaild X and/or Y param(s).\")!@#&			end!@#&		end,!@#&!@#&		drawRegion = function(self, sx, sy, ex, ey)!@#&			if(sx <= self.maxw and sy <= self.maxh and ex <= self.maxw and ey <= self.maxh)then!@#&				for y = tonumber(sy), tonumber(ey) do!@#&				 	for x = tonumber(sx), tonumber(ex) do!@#&					 	term.setCursorPos(x,y)!@#&				 		if(self.grid[y][x] ~= {})then!@#&							term.write(self.grid[y][x])!@#&						end!@#&				 	end!@#&				 end!@#&			else!@#&				error(\"grid:drawRegion -> Invaild X and/or Y param(s).\")!@#&			end!@#&		end,!@#&!@#&		renderRegion = function(self, charattrib, tcolattrib, bcolattrib, sx, sy, ex, ey)!@#&			if(sx <= self.maxw and sy <= self.maxh and ex <= self.maxw and ey <= self.maxh)then!@#&				local ta = colors.white!@#&			 	local ba = colors.black!@#&				for y = tonumber(sy), tonumber(ey) do!@#&				 	for x = tonumber(sx), tonumber(ex) do!@#&					 	term.setCursorPos(x,y)!@#&					 	ta = colors.white!@#&					 	ba = colors.black!@#&					 	if(self.grid[y][x][charattrib] ~= nil)then!@#&					 		if(self.grid[y][x][tcolattrib] ~= nil)then!@#&					 			ta = self.grid[y][x][tcolattrib]!@#&					 		end!@#&					 		if(self.grid[y][x][bcolattrib] ~= nil)then!@#&					 			ba = self.grid[y][x][bcolattrib]!@#&					 		end!@#&						 	term.setTextColor(ta)!@#&				 			term.setBackgroundColor(ba)!@#&					 		term.write(self.grid[y][x][charattrib])!@#&					 	end!@#&				 	end!@#&				 end!@#&			else!@#&				error(\"grid:renderRegion -> Invaild X and/or Y param(s).\")!@#&			end!@#&		end,!@#&!@#&	}!@#&!@#&!@#&	-- generate grid locally --!@#&	for y = 0, h do!@#&		gridtable.grid[y] = {}!@#&		for x = 0, w do!@#&			gridtable.grid[y][x] = {}!@#&		end!@#&	end!@#&!@#&	-- return grid to user --!@#&	return gridtable!@#&end",["GIF"]="-- +---------------------+-----------+---------------------+!@#&-- |                     |           |                     |!@#&-- |                     |    GIF    |                     |!@#&-- |                     |           |                     |!@#&-- +---------------------+-----------+---------------------+!@#&!@#&local version = \"Version 1.3.0pr1\"!@#&!@#&-- Loads and renders GIF files in ComputerCraft.!@#&-- Capable of handling animations.!@#&-- http://www.computercraft.info/forums2/index.php?/topic/23056-gif-renderer!@#&!@#&---------------------------------------------!@#&------------Variable Declarations------------!@#&---------------------------------------------!@#&!@#&if not bbpack then os.loadAPI(\"/SpeedAPI/bbpack\") end!@#&!@#&local CCPal = io.lines and  -- CC 1.55 adds this function, and also changes the colours, so...!@#&		{[0] = {240,240,240},{242,178, 51},{229,127,216},{153,178,242},!@#&		{222,222,108},{127,204, 25},{242,178,204},{ 76, 76, 76},!@#&		{153,153,153},{ 76,153,178},{178,102,229},{ 51,102,204},!@#&		{127,102, 76},{ 87,166, 78},{204, 76, 76},{ 25, 25, 25}}!@#&	or!@#&		{[0] = {240,240,240},{235,136, 68},{195, 84,205},{102,137,211},!@#&		{222,222,108},{65,205, 52},{216,129,152},{ 67, 67, 67},!@#&		{153,153,153},{ 40,118,151},{123, 47,190},{ 37, 49,146},!@#&		{ 81, 48, 26},{ 59, 81, 26},{179, 49, 44},{  0,  0,  0}}!@#&!@#&local GIF87a, GIF89a, colourNum = {71,73,70,56,55,97}, {71,73,70,56,57,97}, {}!@#&!@#&do!@#&	local hex = \"0123456789abcdef\"!@#&	for i = 1, 16 do colourNum[i - 1] = hex:sub(i, i) end!@#&	for i = 1, 16 do colourNum[hex:sub(i, i)] = i - 1 end!@#&end!@#&!@#&---------------------------------------------!@#&------------Function Declarations------------!@#&---------------------------------------------!@#&!@#&local function snooze()!@#&	local myEvent = tostring({})!@#&	os.queueEvent(myEvent)!@#&	os.pullEvent(myEvent)!@#&end!@#&!@#&local function simpleWindow(terminal, xPos, yPos, width, height)!@#&	local results, curX, curY = {}, 1, 1!@#&	!@#&	results.clear = function(colour)!@#&		local text = string.rep(colour, width)!@#&		for y = 1, height do results[y] = text end!@#&	end!@#&	!@#&	results.draw = function(x1, y1, x2, y2)!@#&		if x1 then!@#&			local text = string.rep(\" \", x2 - x1 + 1)!@#&			for y = y1, y2 do!@#&				local snip = results[y]:sub(x1, x2)!@#&				terminal.setCursorPos(xPos + x1 - 1, yPos + y - 1)!@#&				terminal.blit(text, snip, snip)!@#&			end!@#&		else!@#&			local text = string.rep(\" \", width)!@#&			for y = 1, height do!@#&				terminal.setCursorPos(xPos, yPos + y - 1)!@#&				terminal.blit(text, results[y], results[y])!@#&			end!@#&		end!@#&	end!@#&	!@#&	results.setCursorPos = function(newX, newY)!@#&		curX, curY = newX, newY!@#&	end!@#&	!@#&	results.blit = function(_, _, colString)!@#&		if curY < 1 or curY > height or curX > width or curX + #colString < 2 then return end!@#&		!@#&		local ending = (curX + #colString - 1 > width) and (width - curX + 1) or #colString!@#&		if curX < 1 then!@#&			colString = colString:sub(2 - curX, ending)!@#&			curX = 1!@#&		elseif ending ~= #colString then colString = colString:sub(1, ending) end!@#&		!@#&		if curX > 1 then!@#&			if curX + #colString - 1 < width then!@#&				results[curY] = results[curY]:sub(1, curX - 1) .. colString .. results[curY]:sub(curX + #colString)!@#&			else!@#&				results[curY] = results[curY]:sub(1, curX - 1) .. colString!@#&			end!@#&		elseif #colString < width then!@#&			results[curY] = colString .. results[curY]:sub(curX + #colString)!@#&		else results[curY] = colString end!@#&	end!@#&	!@#&	return results!@#&end!@#&!@#&-- ComputerCraft builds prior to 1.74 lack term.blit(). This function implements a substitute:!@#&local function checkTerm(terminal)!@#&	if not terminal.blit then terminal.blit = function(_, _, backCol)!@#&		local counter, lastChar = 1, backCol:sub(1, 1)!@#&!@#&		for i = 2, #backCol do if backCol:sub(i, i) ~= lastChar then!@#&			terminal.setBackgroundColour(bit.blshift(1, colourNum[lastChar]))!@#&			terminal.write(string.rep(\" \", counter))!@#&			counter, lastChar = 1, backCol:sub(i, i)!@#&		else counter = counter + 1 end end!@#&!@#&		terminal.setBackgroundColour(bit.blshift(1, colourNum[lastChar]))!@#&		terminal.write(string.rep(\" \", counter))!@#&		!@#&		snooze()!@#&	end end!@#&end!@#&!@#&if term.setPaletteColour then!@#&	function applyPalette(image, terminal)!@#&		terminal = terminal or term!@#&!@#&		local col, pal = 1, image.pal!@#&!@#&		for i = 0, #pal do!@#&			local thisCol = pal[i]!@#&			terminal.setPaletteColour(col, thisCol[1] / 255, thisCol[2] / 255, thisCol[3] / 255)!@#&			col = col * 2!@#&		end!@#&	end!@#&end!@#&!@#&function drawGIF(image, xPos, yPos, terminal)!@#&	xPos, yPos, terminal = xPos or 1, yPos or 1, terminal or term!@#&	if type(image[1][1]) == \"table\" then image = image[1] end!@#&	checkTerm(terminal)!@#&	!@#&	for y = 1, image.yend do!@#&		local x, ystart, imageY = image.xstart + 1, image.ystart, image[y]!@#&		for i = 1, #imageY do!@#&			local imageYI = imageY[i]!@#&			if type(imageYI) == \"number\" then!@#&				x = x + imageYI!@#&			else!@#&				terminal.setCursorPos(x + xPos - 1, y + ystart + yPos - 1)!@#&				terminal.blit(string.rep(\" \", #imageYI), imageYI, imageYI)!@#&				x = x + #imageYI!@#&			end!@#&		end!@#&	end!@#&end!@#&!@#&function animateGIF(image, xPos, yPos, terminal)!@#&	if terminal == term or not terminal then terminal = term.current() end!@#&	checkTerm(terminal)!@#&	local buffer = simpleWindow(terminal, xPos, yPos, image.width, image.height)!@#&		!@#&	while true do for i = 1, #image do!@#&		local imageI, imageIneg1 = image[i], image[i - 1]!@#&		if i == 1 then buffer.clear(image.backgroundCol2) end!@#&		!@#&		drawGIF(imageI, 1, 1, buffer)!@#&		!@#&		if i == 1 then!@#&			buffer.draw()!@#&		elseif imageIneg1.disposal == 2 then!@#&			buffer.draw(math.min(imageIneg1.xstart, imageI.xstart) + 1, math.min(imageIneg1.ystart, imageI.ystart) + 1, math.max(imageIneg1.xstart + imageIneg1.xend, imageI.xstart + imageI.xend), math.max(imageIneg1.ystart + imageIneg1.yend, imageI.ystart + imageI.yend))!@#&		else!@#&			buffer.draw(imageI.xstart + 1, imageI.ystart + 1, imageI.xstart + imageI.xend, imageI.ystart + imageI.yend)!@#&		end!@#&		!@#&		sleep(imageI.delay)!@#&		!@#&		if imageI.disposal == 2 then!@#&			local blit = string.rep(image.backgroundCol2, imageI.xend)!@#&			for y = 1, imageI.yend do!@#&				buffer.setCursorPos(imageI.xstart + 1, y + imageI.ystart)!@#&				buffer.blit(nil, nil, blit)!@#&			end!@#&		end!@#&	end end!@#&end!@#&!@#&local function rasteriseGIF(image)!@#&	local results, buffer = {[\"width\"] = image.width, [\"height\"] = image.height, [\"backgroundCol\"] = image.backgroundCol, [\"backgroundCol2\"] = image.backgroundCol2, [\"pal\"] = image.pal}, {}!@#&	!@#&	for i = 1, image.height do!@#&		local temp = {}!@#&		for j = 1, image.width do temp[j] = \" \" end!@#&		buffer[i] = temp!@#&	end!@#&	!@#&	for i = 1, #image do!@#&		local thisImg = image[i]!@#&		local xStart, yStart = thisImg.xstart + 1, thisImg.ystart!@#&		!@#&		for y = 1, thisImg.yend do!@#&			local x, thisImgY, buffY = xStart, thisImg[y], buffer[y + yStart]!@#&			for i = 1, #thisImgY do!@#&				local thisImgYI = thisImgY[i]!@#&				if type(thisImgYI) == \"number\" then!@#&					x = x + thisImgYI!@#&				elseif type(thisImgYI) == \"string\" then!@#&					for j = 1, #thisImgYI do buffY[x + j - 1] = colourNum[thisImgYI:sub(j, j)] end!@#&					x = x + #thisImgYI!@#&				else!@#&					for j = 1, #thisImgYI do buffY[x + j - 1] = thisImgYI[j] end!@#&					x = x + #thisImgYI!@#&				end!@#&			end!@#&		end!@#&!@#&		local resultsI = {[\"delay\"] = thisImg.delay or 0.1}!@#&		for j = 1, #buffer do!@#&			local newRow, buffRow = {}, buffer[j]!@#&			for k = 1, #buffRow do newRow[k] = buffRow[k] end!@#&			resultsI[j] = newRow!@#&		end!@#&		results[i] = resultsI!@#&!@#&		if thisImg.disposal == 2 then!@#&			local xEnd = thisImg.xstart + thisImg.xend!@#&			for y = yStart + 1, yStart + thisImg.yend do!@#&				local bufferY = buffer[y]!@#&				for x = xStart, xEnd do bufferY[x] = \" \" end!@#&			end!@#&		end!@#&!@#&		snooze()!@#&	end!@#&!@#&	return results	!@#&end!@#&!@#&function flattenGIF(image, optimise, prerastered)!@#&	if not prerastered then image = rasteriseGIF(image) end!@#&	!@#&	local width, bump, cacheImg = image.width, 0!@#&	for i = 1, #image do!@#&		local prevImg, thisImg, nextImg, same = image[i - 1 - bump], image[i - bump], image[i + 1 - bump], true!@#&		if not thisImg then break end!@#&		local txStart, txEnd, tyStart, tyEnd, cxStart, cxEnd, cyStart, cyEnd = image.width, 1, image.height, 1!@#&		if cacheImg then cxStart, cxEnd, cyStart, cyEnd = cacheImg.xstart, cacheImg.xend, cacheImg.ystart, cacheImg.yend end!@#&		!@#&		if optimise and i > 1 then!@#&			local prevDisp = prevImg.disposal!@#&			for y = 1, #thisImg do!@#&				local thisImgY, cacheImgY = thisImg[y], cacheImg[y]!@#&				for x = 1, width do if thisImgY[x] ~= ((prevDisp == 2 and not (x < cxStart + 1 or y < cyStart + 1 or x > cxStart + cxEnd or y > cyStart + cyEnd)) and \" \" or cacheImgY[x]) then!@#&					same = false!@#&					if y < tyStart + 1 then tyStart = y - 1 end!@#&					if y > tyEnd then tyEnd = y end!@#&					if x < txStart + 1 then txStart = x - 1 end!@#&					if x > txEnd then txEnd = x end!@#&					snooze()!@#&				end end!@#&			end!@#&		elseif optimise == false then!@#&			same = false!@#&			for y = 1, #thisImg do!@#&				local thisImgY = thisImg[y]!@#&				for x = 1, width do if thisImgY[x] ~= \" \" then!@#&					if y < tyStart + 1 then tyStart = y - 1 end!@#&					if y > tyEnd then tyEnd = y end!@#&					if x < txStart + 1 then txStart = x - 1 end!@#&					if x > txEnd then txEnd = x end!@#&				end end!@#&				snooze()!@#&			end!@#&		else!@#&			same, txStart, txEnd, tyStart, tyEnd = false, 0, width, 0, #thisImg!@#&		end!@#&		!@#&		if same and i > 1 then!@#&			image[i - 1 - bump].delay = prevImg.delay + thisImg.delay!@#&			table.remove(image, i - bump)!@#&			bump = bump + 1!@#&			snooze()!@#&		else!@#&			if i - bump ~= #image and optimise ~= nil then!@#&				local obscured = true!@#&				for y = 1, #thisImg do!@#&					local thisImgY, nextImgY = thisImg[y], nextImg[y]!@#&					for x = 1, width do if thisImgY[x] ~= \" \" and nextImgY[x] == \" \" then!@#&						obscured = false!@#&						if y < tyStart + 1 then tyStart = y - 1 end!@#&						if y > tyEnd then tyEnd = y end!@#&						if x < txStart + 1 then txStart = x - 1 end!@#&						if x > txEnd then txEnd = x end!@#&					end end!@#&					snooze()!@#&				end!@#&				thisImg.disposal = obscured and 1 or 2!@#&			else thisImg.disposal = 1 end!@#&!@#&			if txStart > txEnd then txStart, txEnd, tyStart, tyEnd = 0, 1, 0, 1 end!@#&			!@#&			local nxStart, nxEnd, nyStart, nyEnd, cacheDisp = txStart, txEnd - txStart, tyStart, tyEnd - tyStart, cacheImg and cacheImg.disposal!@#&			newImg = {[\"delay\"] = thisImg.delay, [\"disposal\"] = thisImg.disposal, [\"xstart\"] = nxStart, [\"xend\"] = nxEnd, [\"ystart\"] = nyStart, [\"yend\"] = nyEnd}!@#&			!@#&			for y = 1, nyEnd do!@#&				local skip, chars, temp, thisImgY, cacheImgY = 0, {}, {}, thisImg[y + nyStart], cacheImg and cacheImg[y + nyStart]!@#&				for x = nxStart + 1, nxStart + nxEnd do!@#&					local thisVal = thisImgY[x]!@#&					if optimise ~= nil and cacheImg and thisVal == cacheImgY[x] and (cacheDisp == 1 or (cacheDisp == 2 and (x < cxStart + 1 or y + nyStart < cyStart + 1 or x > cxStart + cxEnd or y + nyStart > cyStart + cyEnd))) then thisVal = \" \" end!@#&					!@#&					if thisVal == \" \" then!@#&						skip = skip + 1!@#&						if #chars > 0 then!@#&							temp[#temp + 1] = (image.pal and image.pal[1][4]) and chars or table.concat(chars)!@#&							chars = {}!@#&						end!@#&					else!@#&						chars[#chars + 1] = (image.pal and image.pal[1][4]) and thisVal or colourNum[thisVal]!@#&						if skip > 0 then!@#&							temp[#temp + 1] = skip!@#&							skip = 0!@#&						end!@#&					end!@#&				end!@#&				if skip == 0 then temp[#temp + 1] = (image.pal and image.pal[1][4]) and chars or table.concat(chars) end!@#&				newImg[y] = temp!@#&				snooze()!@#&			end!@#&			thisImg.xstart, thisImg.xend, thisImg.ystart, thisImg.yend = txStart, txEnd, tyStart, tyEnd!@#&			cacheImg = thisImg!@#&			image[i - bump] = newImg!@#&		end!@#&	end!@#&	!@#&	return image!@#&end!@#&!@#&function resizeGIF(image, width, height)!@#&	if not width then width = math.floor(height / image.height * image.width) end!@#&	if not height then height = math.floor(width / image.width * image.height) end!@#&	local xInc, yInc, pal = image.width / width, image.height / height, image.pal or CCPal!@#&	image = rasteriseGIF(image)!@#&	!@#&	for i = 1, #image do!@#&		local oldFrame, yPos2 = image[i], 1!@#&		local newFrame = {[\"delay\"] = oldFrame.delay or 0.1}!@#&		for y = 1, height do!@#&			local thisLine, xPos2 = {}, 1!@#&			for x = 1, width do!@#&				local remY, R, G, B, totalWeight, yPos = yInc, 0, 0, 0, 0, yPos2!@#&				while remY > 0 do!@#&					local remX, maxInc, oldFrameY, xPos, yWeight = xInc, (math.floor(yPos) == yPos) and 1 or (math.ceil(yPos) - yPos), oldFrame[math.min(math.floor(yPos), image.height)], xPos2!@#&					if remY < maxInc then yWeight = remY remY = 0 else yWeight = maxInc remY = remY - maxInc end!@#&					while remX > 0 do!@#&						local maxInc, thisChar, xWeight = (math.floor(xPos) == xPos) and 1 or (math.ceil(xPos) - xPos), oldFrameY[math.min(math.floor(xPos), image.width)]!@#&						if remX < maxInc then xWeight = remX remX = 0 else xWeight = maxInc remX = remX - maxInc end!@#&!@#&						if thisChar ~= \" \" then!@#&							local thisWeight = xWeight * yWeight!@#&							totalWeight, thisChar = totalWeight + thisWeight, pal[thisChar]!@#&							R, G, B = R + thisChar[1] * thisWeight, G + thisChar[2] * thisWeight, B + thisChar[3] * thisWeight!@#&						end!@#&						!@#&						xPos = (maxInc < 1 and xWeight == maxInc) and math.ceil(xPos) or (xPos + xWeight)!@#&					end!@#&					yPos = (maxInc < 1 and yWeight == maxInc) and math.ceil(yPos) or (yPos + yWeight)!@#&				end!@#&				!@#&				if totalWeight > (xInc * yInc) / 2 then!@#&					local closest, difference = 0, 10000!@#&					R, G, B = R / totalWeight, G / totalWeight, B / totalWeight!@#&					for j = 0, #pal do!@#&						local thisDiff = math.abs(pal[j][1] - R) + math.abs(pal[j][2] - G) + math.abs(pal[j][3] - B)!@#&						if thisDiff < difference then!@#&							difference = thisDiff!@#&							closest = j!@#&							if difference == 0 then break end!@#&						end!@#&					end!@#&					thisLine[#thisLine + 1] = closest!@#&				else thisLine[#thisLine + 1] = \" \" end!@#&				xPos2 = xPos2 + xInc!@#&			end!@#&			yPos2 = yPos2 + yInc!@#&			newFrame[y] = thisLine!@#&			snooze()!@#&		end!@#&		image[i] = newFrame!@#&	end!@#&	!@#&	image.width, image.height = width, height!@#&	!@#&	return flattenGIF(image, false, true)!@#&end!@#&!@#&function loadGIF(targetfile, pal)!@#&	local results, fileread = {[\"backgroundCol\"] = 0}, fs.open(targetfile, \"rb\")!@#&	if not fileread then error(\"GIF.loadGIF(): Unable to open \" .. targetfile .. \" for input.\", 2) end!@#&	!@#&	if type(pal) == \"string\" then!@#&		local file = fs.open(pal, \"r\")!@#&		pal = textutils.unserialize(file.readAll())!@#&		file.close()!@#&		for i = 1, #pal do!@#&			local palI = pal[i]!@#&			if not palI[5] then palI[5] = 0 end!@#&		end!@#&		if not pal[0] then pal[0] = {1000, 1000, 1000, \"minecraft:air\", 0} end!@#&		results.pal = pal!@#&	elseif pal then!@#&		-- Construct a reduced palette from the GIF's own.!@#&		if not fileread.readAll then error(\"Installed version of CC does not support palette alterations.\") end!@#&!@#&		pal = {}!@#&		!@#&		fileread.read(10)!@#&		local temp, counter = fileread.read(), 0!@#&		fileread.read(2)!@#&!@#&		-- Read in global palette:!@#&		if bit.band(temp, 128) == 128 then for i = 1, 2 ^ (bit.band(temp, 7) + 1) do!@#&			local thisCol, found = fileread.read(3), false!@#&!@#&			for i = 1, counter do if pal[i] == thisCol then!@#&				found = true!@#&				break!@#&			end end!@#&!@#&			if not found then!@#&				counter = counter + 1!@#&				pal[counter] = thisCol!@#&			end!@#&		end end!@#&		!@#&		-- Read in any additional palettes:!@#&		while true do!@#&			local record = fileread.read()!@#&			!@#&			if record == 33 then!@#&				fileread.read()!@#&				!@#&				while true do!@#&					record = fileread.read()!@#&					if record == 0 then break end!@#&					fileread.read(record)!@#&					snooze()!@#&				end!@#&			elseif record == 44 then!@#&				fileread.read(8)!@#&				!@#&				record = fileread.read()!@#&!@#&				if bit.band(record, 128) == 128 then for i = 1, 2 ^ (bit.band(record, 7) + 1) do!@#&					local thisCol, found = fileread.read(3), false!@#&!@#&					for i = 1, counter do if pal[i] == thisCol then!@#&						found = true!@#&						break!@#&					end end!@#&!@#&					if not found then!@#&						counter = counter + 1!@#&						pal[counter] = thisCol!@#&					end!@#&				end end!@#&				!@#&				fileread.read()!@#&				!@#&				while true do!@#&					record = fileread.read()!@#&					if record == 0 then break end!@#&					fileread.read(record)!@#&					snooze()!@#&				end!@#&			elseif record == 59 then!@#&				fileread.close()!@#&				break!@#&			else!@#&				error(\"Malformed record\")!@#&			end!@#&		end!@#&!@#&		-- Condense palette:!@#&		for i = 1, counter do pal[i] = {pal[i]:byte(1, 3)} end!@#&		!@#&		while #pal > 16 do!@#&			local matches, tally, bestDiff, curLen = {}, tally, 1000, #pal!@#&			!@#&			for i = 1, curLen - 1 do!@#&				local palI, found = pal[i], false!@#&				!@#&				for j = i + 1, curLen do!@#&					local palJ = pal[j]!@#&					local thisDiff = math.abs(palJ[1] - palI[1]) + math.abs(palJ[2] - palI[2]) + math.abs(palJ[3] - palI[3])!@#&					!@#&					if thisDiff < bestDiff then!@#&						matches, tally, bestDiff, found = {[j] = i}, 1, thisDiff, true!@#&					elseif thisDiff == bestDiff and not matches[j] and not matches[i] and not found then!@#&						matches[j], tally, found = i, tally + 1, true!@#&					end!@#&				end!@#&			end!@#&			!@#&			local counter, max = 1, (curLen - tally > 15) and tally or (curLen - 16)!@#&			for i, j in pairs(matches) do!@#&				local palI, palJ = pal[i], pal[j]!@#&				--print(#pal,i,j,type(palI),type(palJ))!@#&				pal[i] = {math.floor((palI[1] + palJ[1]) / 2), math.floor((palI[2] + palJ[2]) / 2), math.floor((palI[3] + palJ[3]) / 2)}!@#&				pal[j], counter = \"remove\", counter + 1!@#&				if counter > max then break end!@#&			end!@#&			!@#&			for i = curLen, 1, -1 do if pal[i] == \"remove\" then table.remove(pal, i) end end!@#&		end!@#&		!@#&		pal[0] = pal[#pal]!@#&		pal[#pal] = nil!@#&		results.pal = pal!@#&		!@#&		fileread = fs.open(targetfile, \"rb\")!@#&	else pal = CCPal end!@#&	!@#&	local readByte = fileread.read!@#&	!@#&	local readBytes = fileread.readAll and!@#&		function(num)!@#&			local output = readByte(num)!@#&			return {output:byte(1, #output)}!@#&		end!@#&	or!@#&		function(num)!@#&			local output = {}!@#&			for i = 1, num do output[#output + 1] = readByte() end!@#&			return output!@#&		end!@#&	!@#&	local function readInt()!@#&		local results = readByte()!@#&		return results + readByte() * 256!@#&	end!@#&!@#&	-- GIF signature:!@#&	local temp = readBytes(6)!@#&	for i = 1, 6 do if temp[i] ~= GIF87a[i] and temp[i] ~= GIF89a[i] then!@#&		fileread.close()!@#&		error(\"GIF.loadGIF(): \" .. targetfile .. \" does not appear to be a GIF.\", 2)!@#&	end end!@#&!@#&	-- Screen discriptor:!@#&	local width = readInt()!@#&	local height = readInt()!@#&	results.width, results.height = width, height!@#&	!@#&	local cacheFrame, cacheBackup = {}!@#&	for y = 1, height do !@#&		local cacheFrameY = {}!@#&		for x = 1, width do cacheFrameY[x] = \" \" end!@#&		cacheFrame[y] = cacheFrameY!@#&	end!@#&		!@#&	temp = readByte()!@#&	local globalColourCount = 2 ^ (bit.band(temp, 7) + 1)!@#&	readInt()  -- This is the background colour, which we'll ignore, and instead pick something that contrasts the image later.!@#&	snooze()!@#&!@#&	-- Palette:!@#&	local globalPal = bit.band(temp, 128) == 128!@#&	if globalPal then!@#&		globalPal = {}!@#&		for i = 0, globalColourCount - 1 do globalPal[i] = readBytes(3) end!@#&	end!@#&	!@#&	-- Read image records:!@#&	while true do!@#&		local thisImg, interlace, thisPal, transparent = {}!@#&		!@#&		-- Read image headers:!@#&		while true do!@#&			snooze()!@#&			local record = readByte()!@#&!@#&			if record == 33 then!@#&				record = readByte()!@#&!@#&				-- Gif extensions:!@#&				if record == 249 then!@#&					-- Graphics control extension:!@#&					readByte()!@#&					local flags = readByte()!@#&					local isTransparent = bit.band(flags, 1) == 1!@#&					thisImg.inputExpected = bit.band(flags, 2) == 2!@#&					thisImg.disposal = bit.brshift(bit.band(flags, 28), 2)!@#&					thisImg.delay = readInt()!@#&					thisImg.delay = (thisImg.delay > 0) and (thisImg.delay / 100) or nil!@#&					transparent = readByte()!@#&					if not isTransparent then transparent = nil end!@#&					readByte()!@#&				elseif record == 254 then!@#&					-- File comment:!@#&					local fullComment = {}!@#&					!@#&					repeat!@#&						local length = readByte()!@#&						if length > 0 then fullComment[#fullComment + 1] = string.char(unpack(readBytes(length))) end!@#&					until length == 0!@#&							!@#&					results.comment = table.concat(fullComment)!@#&				elseif record == 1 then!@#&					-- Plain text extension:!@#&					readBytes(readByte())!@#&					!@#&					local fullText = {}!@#&					!@#&					repeat!@#&						local length = readByte()!@#&						if length > 0 then fullText[#fullText + 1] = string.char(unpack(readBytes(length))) end!@#&					until length == 0!@#&							!@#&					results.text = table.concat(fullText)!@#&				else!@#&					-- All other extensions we skip past:!@#&					repeat!@#&						local length = readByte()!@#&						if length > 0 then readBytes(length) end!@#&					until length == 0!@#&				end!@#&			elseif record == 44 then!@#&				-- Image descriptor:!@#&				thisImg.xstart = readInt()!@#&				thisImg.ystart = readInt()!@#&				thisImg.xend = readInt()!@#&				thisImg.yend = readInt()!@#&!@#&				record = readByte()!@#&				interlace = bit.band(record, 64) == 64!@#&!@#&				if bit.band(record, 128) == 128 then!@#&					-- Local colour map:!@#&					thisPal = {[0] = readBytes(3)}!@#&					for i = 2, 2 ^ (bit.band(record, 7) + 1) do thisPal[#thisPal + 1] = readBytes(3) end!@#&				else!@#&					-- Global colour map:!@#&					thisPal = textutils.unserialize(textutils.serialize(globalPal))!@#&				end!@#&				!@#&				local used = {}!@#&				for i = 0, #thisPal do!@#&					local closest, difference, thisPalI = 0, 10000, thisPal[i]!@#&!@#&					for j = 0, #pal do!@#&						local palJ = pal[j]!@#&						local thisDiff = math.abs(palJ[1] - thisPalI[1]) + math.abs(palJ[2] - thisPalI[2]) + math.abs(palJ[3] - thisPalI[3])!@#&!@#&						if thisDiff < difference then!@#&							difference = thisDiff!@#&							closest = j!@#&							if difference == 0 then break end!@#&						end!@#&					end!@#&!@#&					thisPal[i] = closest!@#&					if i ~= transparent then used[closest + 1] = true end!@#&				end!@#&				!@#&				local bgCol, bgCol2  = 2 ^ math.min(#used, 15), colourNum[math.min(#used, 15)]!@#&				if bgCol > results.backgroundCol then!@#&					results.backgroundCol = bgCol!@#&					results.backgroundCol2 = bgCol2!@#&				end!@#&				!@#&				-- Image data follows, go read it:!@#&				break!@#&			elseif record == 59 then!@#&				-- End of file.!@#&				fileread.close()!@#&				return flattenGIF(results, false, true)!@#&			end!@#&		end!@#&		!@#&		local xStart, yStart, xEnd, yEnd = thisImg.xstart, thisImg.ystart, thisImg.xend, thisImg.yend!@#&		!@#&		if thisImg.disposal == 3 then!@#&			cacheBackup = {}!@#&			for y = 1, math.min(height - yStart, yEnd) do!@#&				local cacheBackupY, cacheFrameY = {}, cacheFrame[y + yStart]!@#&				for x = 1, math.min(width - xStart, xEnd) do cacheBackupY[x]  = cacheFrameY[x + xStart] end!@#&				cacheBackup[y] = cacheBackupY!@#&			end!@#&		end!@#&		!@#&		-- Read image body:!@#&		!@#&		fileread = bbpack.open(fileread, \"rb\", 2 ^ fileread.read())!@#&		readByte = fileread.read!@#&!@#&		local y, passnum, stepsize = 1, 8, 8!@#&		while y < yEnd + 1 do!@#&			local cacheFrameY = cacheFrame[y + yStart]!@#&			if y <= height then!@#&				for x = 1, xEnd do!@#&					local thisVal = readByte()!@#&					if thisVal ~= transparent and x + xStart <= width then cacheFrameY[x + xStart] = thisPal[thisVal] end!@#&				end!@#&			else for x = 1, xEnd do readByte() end end!@#&			!@#&			if interlace then!@#&				y = y + stepsize!@#&!@#&				while y > yEnd and passnum > 1 do!@#&					stepsize = passnum!@#&					passnum = passnum / 2!@#&					y = passnum + 1!@#&				end!@#&			else y = y + 1 end!@#&			!@#&			snooze()!@#&		end!@#&		!@#&		for y = 1, height do!@#&			local thisImgY, cacheFrameY = {}, cacheFrame[y]!@#&			for x = 1, width do thisImgY[x] = cacheFrameY[x] end!@#&			thisImg[y] = thisImgY!@#&		end!@#&		if not thisImg.delay then thisImg.delay = 0.1 end!@#&		!@#&		if thisImg.disposal == 2 then!@#&			for y = 1, math.min(height - yStart, yEnd) do!@#&				local cacheFrameY = cacheFrame[y + yStart]!@#&				for x = 1, math.min(width - xStart, xEnd) do cacheFrameY[x + xStart] = \" \" end!@#&			end!@#&		elseif thisImg.disposal == 3 then!@#&			for y = 1, math.min(height - yStart, yEnd) do!@#&				local cacheFrameY, cacheBackupY = cacheFrame[y + yStart], cacheBackup[y]!@#&				for x = 1, math.min(width - xStart, xEnd) do cacheFrameY[x + xStart] = cacheBackupY[x] end!@#&			end!@#&			cacheBackup = nil!@#&		end!@#&		!@#&		fileread = fileread.extractHandle()!@#&		readByte = fileread.read!@#&		!@#&		results[#results + 1] = thisImg!@#&	end!@#&end!@#&!@#&function setBackgroundColour(image, colour)!@#&	if type(colour) ~= \"number\" and not colourNum[colour] then error(\"GIF.setBackgroundColour: Bad colour.\", 2) end!@#&	!@#&	if type(colour) == \"number\" then!@#&		local counter = 0!@#&		while colour > 1 do!@#&			colour = bit.brshift(colour, 1)!@#&			counter = counter + 1!@#&		end!@#&		image.backgroundCol = 2 ^ counter!@#&		image.backgroundCol2 = colourNum[counter]!@#&	else!@#&		image.backgroundCol = 2 ^ colourNum[colour]!@#&		image.backgroundCol2 = colour!@#&	end!@#&end!@#&setBackgroundColor = setBackgroundColour!@#&!@#&function toPaintutils(image)!@#&	if type(image[1][1]) == \"table\" then image = image[1] end!@#&	!@#&	local results = {}!@#&	!@#&	if not image.yend then error(\"wtf\",2) end!@#&	for y = 1, image.yend do!@#&		local resultsY, imageY = {}, image[y]!@#&		local x = image.xstart + 1!@#&		for i = 1, #imageY do!@#&			local imageYI = imageY[i]!@#&			if type(imageYI) == \"number\" then!@#&				for j = 1, imageYI do resultsY[#resultsY + 1] = 0 end!@#&			else!@#&				for j = 1, #imageYI do resultsY[#resultsY + 1] = 2 ^ colourNum[imageYI:sub(j, j)] end!@#&			end!@#&		end!@#&		results[y] = resultsY!@#&	end!@#&	!@#&	for i = #results[1] + 1, image.xstart + image.xend do results[1][i] = 0 end!@#&	!@#&	return results!@#&end!@#&!@#&function buildGIF(...)!@#&	local colourChar, hex, width, height, used = {[0] = \" \"}, \"0123456789abcdef\", 0, 0, 0!@#&	for i = 1, 16 do colourChar[2 ^ (i - 1)] = hex:sub(i, i) end!@#&	!@#&	for i = 1, #arg do!@#&		local argI = arg[i]!@#&		if #argI > height then height = #argI end!@#&		for y = 1, #argI do if #argI[y] > width then width = #argI[y] end end!@#&	end!@#&	!@#&	for i = 1, #arg do!@#&		local thisImage, argI = {[\"delay\"] = 0.1}, arg[i]!@#&		!@#&		for y = 1, #argI do!@#&			local thisLine, argIY = {}, argI[y]!@#&			!@#&			for x = 1, width do!@#&				local argIYX = argIY[x] or 0!@#&				if argIYX > used then used = argIYX end!@#&				thisLine[x] = colourNum[colourChar[argIYX]] or \" \"!@#&			end!@#&				!@#&			thisImage[y] = thisLine!@#&		end!@#&		!@#&		for y = #argI + 1, height do!@#&			local thisLine = {}!@#&			for x = 1, width do thisLine[x] = \" \" end!@#&			thisImage[y] = thisLine!@#&		end!@#&		!@#&		arg[i] = thisImage!@#&	end!@#&	!@#&	arg.width, arg.height, arg.backgroundCol, arg.backgroundCol2 = width, height, used, colourChar[used]!@#&	!@#&	return flattenGIF(arg, true, true)!@#&end!@#&!@#&function saveGIF(image, file)!@#&	if not (image.width or image.xstart) then!@#&		-- \"paintutils\" image.!@#&		image = buildGIF(image)!@#&	elseif not image.width then!@#&		-- Single frame of an image.!@#&		image = {width = image.xstart + image.xend, height = image.ystart + image.yend, image}!@#&	end!@#&	!@#&	local file, power, transCol = fs.open(file, \"wb\"), 5!@#&	if not file then error(\"Unable to open file for output.\", 2) end!@#&	local writeByte = file.write!@#&	!@#&	local function writeBytes(bytes)!@#&		for i = 1, #bytes do writeByte(bytes[i]) end!@#&	end!@#&	!@#&	local function writeInt(num)!@#&		writeByte(bit.band(num, 255))!@#&		writeByte(bit.brshift(num, 8))!@#&	end!@#&!@#&	-- GIF signature:!@#&	writeBytes(GIF89a)!@#&	!@#&	-- Screen discriptor:!@#&	writeInt(image.width)!@#&	writeInt(image.height)!@#&	!@#&	if image.pal then!@#&		local pal = image.pal!@#&		power = 1!@#&		while 2 ^ power < (#pal + 1) do power = power + 1 end!@#&		writeByte(127 + power)!@#&		transCol = 0!@#&		writeInt(transCol)!@#&!@#&		-- Palette:!@#&		for i = 0, #pal do!@#&			local palI = pal[i]!@#&			for j = 1, 3 do writeByte(palI[j]) end!@#&		end!@#&		for i = #pal + 2, 2 ^ power do writeBytes({127, 127, 127}) end!@#&	else!@#&		writeByte(132)!@#&		transCol = #CCPal + 1!@#&		writeInt(transCol)!@#&!@#&		-- Palette:!@#&		for i = 0, 15 do writeBytes(CCPal[i]) end!@#&		for i = 0, 15 do writeBytes({127, 127, 127}) end!@#&	end!@#&	!@#&	-- Loop extension:!@#&	if #image > 1 then!@#&		writeBytes({33, 255, 11})!@#&		for i = 1, 11 do writeByte(string.byte(\"NETSCAPE2.0\", i)) end!@#&		writeBytes({3, 1, 0, 0, 0})!@#&	end!@#&	!@#&	-- Write image records:!@#&	for i = 1, #image do!@#&		local image = image[i]!@#&		!@#&		writeBytes({33, 249, 4})!@#&		writeByte(image.disposal and (1 + bit.blshift(image.disposal, 2)) or 1)!@#&		writeInt((not image.delay) and 0 or math.floor(image.delay * 100))!@#&		writeInt(transCol)!@#&		!@#&		writeByte(44)!@#&		writeInt(image.xstart)!@#&		writeInt(image.ystart)!@#&		writeInt(image.xend)!@#&		writeInt(image.yend)!@#&		writeByte(0)!@#&		writeByte(power)!@#&!@#&		file = bbpack.open(file, \"wb\", 2 ^ power)!@#&		writeByte = file.write!@#&		!@#&		for y = 1, image.yend do!@#&			local rowLen, imageY = 0, image[y]!@#&			for i = 1, #imageY do!@#&				local imageYI = imageY[i]!@#&				if type(imageYI) == \"number\" then!@#&					for j = 1, imageYI do writeByte(transCol) end!@#&					rowLen = rowLen + imageYI!@#&				elseif type(imageYI) == \"string\" then!@#&					for j = 1, #imageYI do writeByte(colourNum[imageYI:sub(j, j)]) end!@#&					rowLen = rowLen + #imageYI!@#&				else!@#&					for j = 1, #imageYI do writeByte(imageYI[j]) end!@#&					rowLen = rowLen + #imageYI!@#&				end!@#&			end!@#&			for i = 1, image.xend - rowLen do writeByte(transCol) end!@#&			snooze()!@#&		end!@#&		!@#&		file = file.extractHandle()!@#&		writeByte = file.write!@#&	end!@#&	!@#&	writeByte(59)!@#&	file.close()!@#&end",["filemanager"]="os.loadAPI(\"SpeedAPI/windows\")!@#&os.loadAPI(\"SpeedAPI/image\")!@#&os.loadAPI(\"SpeedAPI/context\")!@#& !@#&local mode = \"open\"!@#&local workPath = \"\"!@#&local workPathHistory = {}!@#&local input = \"\"!@#& !@#&local xSize,ySize = term.getSize()!@#& !@#&local managerX = xSize-3!@#&local managerY = ySize-1!@#& !@#&local xStart = 2!@#&local yStart = 1!@#&local xEnd = xStart+managerX-1!@#&local yEnd = yStart+managerY-1!@#& !@#&local leftBarSize = 14!@#&local leftBarLimit = leftBarSize-3!@#& !@#&local sizeOfInputBar = 26!@#&local startOfInputBar = xStart+3!@#&local endOfInputBar = startOfInputBar+sizeOfInputBar-1!@#&local sizeOfSearchBar = managerX - sizeOfInputBar - 3 - 8 - 1!@#&local startOfSearchBar = xEnd-sizeOfSearchBar!@#& !@#&local xStartOfDrawingApps = xStart+leftBarSize+1!@#&local yStartOfDrawingApps = yStart+4!@#&local xSizeOfAppsArea = managerX-leftBarSize!@#&local ySizeOfAppsArea = managerY-3!@#&local xAppSize = 6!@#&local yAppSize = 6!@#&local xSpaceBetweenApps = 2!@#&local ySpaceBetweenApps = 1!@#&local countOfAppsByX = math.floor(xSizeOfAppsArea/(xAppSize+xSpaceBetweenApps))!@#&local countOfAppsByY = math.floor(ySizeOfAppsArea/(yAppSize+ySpaceBetweenApps))!@#&local countOfDesktops = 1!@#& !@#&local currentDesktop = 1!@#& !@#&local hideFileFormat = true!@#& !@#&--local main = window.create(term.native(),xStart,yStart,managerX+1,managerY+1)!@#& !@#&--------------------       --------------------!@#& !@#&local function clickedAtArea(x,y,sx,sy,ex,ey)!@#&    if (x >= sx) and (x <= ex) and (y >= sy) and (y <= ey) then return true end    !@#&    return false!@#&end!@#& !@#&local Favourites = {!@#&        [\"Root\"] = \"\",!@#&        [\"Applications\"] = \"/Applications\",!@#&        [\"Documents\"] = \"/Documents\",!@#&        [\"Images\"] = \"/Images\",!@#&        [\"rom\"] = \"/rom\",!@#&}!@#& !@#&local function saveConfig()!@#&        local path = \"System/Filemanager/Favourites.cfg\"!@#&        local f = fs.open(path,\"w\")!@#&        f.write(textutils.serialise(Favourites))!@#&        f.close()!@#&end!@#& !@#&local function loadConfig()!@#&        local path = \"System/Filemanager/Favourites.cfg\"!@#&        if fs.exists(path) then!@#&                local f = fs.open(path,\"r\")!@#&                local text = f.readAll()!@#&                Favourites = textutils.unserialise(text)!@#&                f.close()!@#&        end!@#&end!@#& !@#&local objects = {}!@#&local function newObj(class,name,key,value)!@#&        objects[class] = objects[class] or {}!@#&        objects[class][name] = objects[class][name] or {}!@#&        objects[class][name][key] = value!@#&end!@#& !@#&function drawSeparator(x1,y1,width,height,textColor,backColor,symbol)!@#&        local string = string.rep(symbol,width)!@#&        term.setBackgroundColor(backColor)!@#&        term.setTextColor(textColor)!@#&        for y=y1,(y1+height-1) do!@#&                windows.usualText(x1,y,string)!@#&        end!@#&end!@#& !@#&local function getFoldersList(workPath)!@#& !@#&end!@#& !@#&local function drawLeftBar()!@#&        objects[\"Favourites\"] = {}!@#& !@#&        windows.square(xStart,yStart+3,leftBarSize,yEnd-3,colors.white)!@#& !@#&        local y = yStart+4!@#&        local Peripherals = peripheral.getNames()!@#&        drawSeparator(xStart+leftBarSize-1,y-1,1,ySizeOfAppsArea,colors.lightGray,colors.white,\"|\")!@#& !@#&        local sFavourites = 0!@#&        for key,val in pairs(Favourites) do!@#&                sFavourites = sFavourites + 1!@#&        end!@#& !@#&        if sFavourites > 0 then!@#&                windows.colorText(xStart+1,y,\"Places\",colors.gray)!@#&                y = y + 1!@#& !@#&                for key,val in pairs(Favourites) do!@#&                        newObj(\"Favourites\",key,\"x1\",xStart)!@#&                        newObj(\"Favourites\",key,\"x2\",xStart+leftBarSize-1)!@#&                        newObj(\"Favourites\",key,\"y1\",y)!@#&                        newObj(\"Favourites\",key,\"path\",Favourites[key])!@#& !@#&                        if workPath == Favourites[key] then!@#&                                windows.square(xStart,y,leftBarSize-1,1,colors.blue)!@#&                                windows.colorText(xStart+2,y,windows.stringLimit(\"end\",key,leftBarLimit),colors.white)!@#&                        else!@#&                                windows.square(xStart,y,leftBarSize-1,1,colors.white)!@#&                                windows.colorText(xStart+2,y,windows.stringLimit(\"end\",key,leftBarLimit),colors.lightGray)!@#&                        end!@#& !@#&                        y = y + 1!@#&                end!@#& !@#&                y = y + 1!@#&        end!@#& !@#&        term.setBackgroundColor(colors.white)!@#&        if #Peripherals > 0 then!@#&                windows.colorText(xStart+1,y,\"Peripherals\",colors.gray)!@#&                y = y + 1!@#&                for i=1,#Peripherals do!@#&                        windows.colorText(xStart+2,y,windows.stringLimit(\"end\",Peripherals[i],leftBarLimit),colors.lightGray)!@#&                        y = y + 1!@#&                end!@#&        end!@#&end!@#& !@#&local function drawTopBar()!@#&        local posY = yStart + 1!@#&        windows.square(xStart,yStart,managerX,3,colors.lightGray)!@#&        windows.square(xStart+3,posY,sizeOfInputBar,1,colors.white)!@#&        windows.colorText(xStart+3,posY,windows.stringLimit(\"start\",input,sizeOfInputBar),colors.gray)!@#& !@#&        local text = mode!@#&        windows.colorTextWithBack(math.floor(xStart+managerX/2-#text/2-1),yStart,text,colors.white,colors.lightGray)!@#& !@#&        windows.square(startOfSearchBar,posY,sizeOfSearchBar,1,colors.white)!@#&        windows.colorText(startOfSearchBar,posY,\"Search\",colors.lightGray)!@#&        newObj(\"windowControls\",\"search\",\"x1\",startOfSearchBar);newObj(\"windowControls\",\"search\",\"x2\",startOfSearchBar+sizeOfSearchBar-1);newObj(\"windowControls\",\"search\",\"y\",posY)!@#&       !@#&        local colorCyka = nil!@#&        if #workPathHistory == 0 then colorCyka = colors.lightGray else colorCyka = colors.black end!@#&        windows.colorTextWithBack(xStart+1,posY,\"<\",colorCyka,colors.white)!@#& !@#&        local posX = startOfSearchBar - 7!@#&        windows.colorTextWithBack(posX,posY,\" \"..mode..\" \",colors.white,colors.lightBlue)!@#&        newObj(\"windowControls\",\"ok\",\"x1\",posX);newObj(\"windowControls\",\"ok\",\"x2\",posX+5);newObj(\"windowControls\",\"ok\",\"y\",posY)!@#&end!@#& !@#&local function drawWindow()!@#&        windows.square(xStart,yStart+3,managerX,ySizeOfAppsArea,colors.white)!@#&        drawTopBar()!@#&        --DRAW SHADOW!@#&        for x=(xStart+1),(xStart+managerX) do!@#&                paintutils.drawPixel(x,yStart+managerY,colors.gray)!@#&        end!@#&        for y=(yStart+1),(yStart+managerY) do!@#&                paintutils.drawPixel(xStart+managerX,y,colors.gray)!@#&        end!@#&end!@#& !@#&------------------------------------------------------------------------------------------------------!@#& !@#&local function drawKonkretnoApp(x,y,name,backColor)!@#&        --                           !@#&        newObj(\"apps\",name,\"x1\",x)!@#&        newObj(\"apps\",name,\"x2\",x+xAppSize-1)!@#&        newObj(\"apps\",name,\"y1\",y)!@#&        newObj(\"apps\",name,\"y2\",y+yAppSize-1)!@#&        newObj(\"apps\",name,\"fileFormat\",windows.getFileFormat(name))!@#& !@#&        --                !@#&        windows.drawOSIcon(x,y,workPath,name,objects[\"apps\"][name][\"fileFormat\"])!@#& !@#&        --                          !@#&        term.setBackgroundColor(backColor)!@#&        if fs.isReadOnly(workPath..\"/\"..name) then!@#&                term.setTextColor(colors.red)!@#&        else!@#&                term.setTextColor(colors.black)!@#&        end!@#&        if windows.isFileHidden(name) then!@#&                term.setTextColor(colors.gray)!@#&        end!@#&        if hideFileFormat then!@#&                name = windows.hideFileFormat(name)!@#&        end!@#&        name = windows.stringLimit(\"end\",name,xAppSize,true)!@#&        windows.usualText(math.floor(x+xAppSize/2-#name/2),y+yAppSize-1,name)!@#&end!@#& !@#&local function drawApps(x,y,currentDesktop)!@#& !@#&        objects[\"apps\"] = {}!@#& !@#&        windows.square(x,y,xSizeOfAppsArea-2,ySizeOfAppsArea-2,colors.white)!@#& !@#&        local fileList = fs.list(workPath)!@#&        fileList = windows.reorganizeFilesAndFolders(workPath,fileList,true,true)!@#& !@#&        countOfDesktops = math.ceil(#fileList/(countOfAppsByY*countOfAppsByX))!@#&        local appCounter = 1 + currentDesktop * countOfAppsByY * countOfAppsByX - countOfAppsByY * countOfAppsByX!@#& !@#&        for j=1,countOfAppsByY do!@#&                for i=1,countOfAppsByX do!@#&                        if fileList[appCounter] then!@#&                                drawKonkretnoApp(x+i*(xAppSize+xSpaceBetweenApps)-(xAppSize+xSpaceBetweenApps),y+j*(yAppSize+ySpaceBetweenApps)-(yAppSize+ySpaceBetweenApps),fileList[appCounter],colors.white)!@#&                                appCounter = appCounter + 1!@#&                        else!@#&                                break!@#&                        end!@#&                end!@#&        end!@#&end!@#& !@#&------------------------------------------------------------------------------------------------------!@#& !@#&local function drawManager(x,y)!@#& !@#&        if x~=nil or y~=nil then!@#&                xStart = x!@#&                yStart = y!@#&                xStartOfDrawingApps = xStart+leftBarSize+1!@#&                yStartOfDrawingApps = yStart+4!@#&        end!@#& !@#&        currentDesktop = 1!@#&        --windows.emptyWindow(xStart,yStart,managerX,managerY,fs.getName(workPath))!@#&        drawWindow()!@#&        --windows.colorTextWithBack(xStart,yStart,\"x\",colors.black,colors.red);windows.colorTextWithBack(xStart+1,yStart,\"-\",colors.black,colors.orange);windows.colorTextWithBack(xStart+2,yStart,\"+\",colors.black,colors.lime)!@#&        drawLeftBar()!@#&        drawApps(xStartOfDrawingApps,yStartOfDrawingApps,currentDesktop)!@#&        windows.scrollBar(xEnd,yStart+3,managerY-3,countOfDesktops,currentDesktop,colors.lightGray,colors.lightBlue)!@#&end!@#& !@#&newObj(\"windowControls\",\"<\",\"x\",xStart+1);newObj(\"windowControls\",\"<\",\"y\",yStart+1)!@#& !@#&local function initializeProgram(mode1)!@#&        if mode1==\"open\" then mode = \"Open\" else mode = \"Save\" end!@#& !@#&        loadConfig()!@#&        saveConfig()!@#& !@#&        input = \"/\"..workPath!@#&        drawManager()!@#&       !@#&        local exit = false!@#&        while true do!@#& !@#&                local breakCycles = false!@#& !@#&                if exit then break end!@#& !@#&                local event,side,x,y = os.pullEvent()!@#&                if event == \"mouse_click\" then!@#& !@#&                        for key,val in pairs(objects[\"Favourites\"]) do!@#&                                if breakCycles then break end!@#& !@#&                                if clickedAtArea(x,y,objects[\"Favourites\"][key][\"x1\"],objects[\"Favourites\"][key][\"y1\"],objects[\"Favourites\"][key][\"x2\"],objects[\"Favourites\"][key][\"y1\"]) then!@#&                                       !@#&                                        if side == 1 then!@#&                                                if not fs.exists(objects[\"Favourites\"][key][\"path\"]) then fs.makeDir(key) end!@#&                                                workPathHistory[#workPathHistory+1] = workPath!@#&                                                workPath = objects[\"Favourites\"][key][\"path\"]!@#&                                                input = \"/\"..workPath!@#&                                                drawManager()!@#&                                        else!@#&                                                windows.square(xStart,objects[\"Favourites\"][key][\"y1\"],leftBarSize-1,1,colors.lightGray)!@#&                                                windows.colorText(xStart+2,objects[\"Favourites\"][key][\"y1\"],windows.stringLimit(\"end\",key,leftBarLimit),colors.white)!@#&                                                --sleep(0.2)!@#& !@#&                                                local action = context.menu(x,y,{\"Remove from sidebar\"})!@#&                                                if action == \"Remove from sidebar\" then!@#& !@#&                                                        Favourites[key] = nil!@#&                                                        saveConfig()!@#& !@#&                                                end!@#&                                                drawManager()!@#&                                        end!@#& !@#&                                        breakCycles = true!@#&                                        break!@#&                                end!@#&                        end!@#& !@#& !@#& !@#&                        for key,val in pairs(objects[\"apps\"]) do!@#&                                if breakCycles then break end!@#&                                if clickedAtArea(x,y,objects[\"apps\"][key][\"x1\"],objects[\"apps\"][key][\"y1\"],objects[\"apps\"][key][\"x2\"],objects[\"apps\"][key][\"y2\"]) then!@#&                                       !@#&                                        if side == 1 then!@#&                                                if fs.isDir(workPath..\"/\"..key) and windows.getFileFormat(key) ~= \".app\" then!@#&                                                        windows.square(objects[\"apps\"][key][\"x1\"]-1,objects[\"apps\"][key][\"y1\"],xAppSize+2,yAppSize,colors.blue)!@#&                                                        drawKonkretnoApp(objects[\"apps\"][key][\"x1\"],objects[\"apps\"][key][\"y1\"],key,colors.blue)!@#&                                                        sleep(0.2)!@#&                                                        workPathHistory[#workPathHistory+1] = workPath!@#&                                                        workPath = workPath..\"/\"..key!@#&                                                        input = \"/\"..workPath!@#&                                                        drawManager()!@#&                                                elseif not fs.isDir(workPath..\"/\"..key) and mode == \"Save\" then!@#&                                                        windows.square(objects[\"apps\"][key][\"x1\"]-1,objects[\"apps\"][key][\"y1\"],xAppSize+2,yAppSize,colors.red)!@#&                                                        drawKonkretnoApp(objects[\"apps\"][key][\"x1\"],objects[\"apps\"][key][\"y1\"],key,colors.red)!@#&                                                        sleep(0.2)!@#&                                                        windows.square(objects[\"apps\"][key][\"x1\"]-1,objects[\"apps\"][key][\"y1\"],xAppSize+2,yAppSize,colors.white)!@#&                                                        drawKonkretnoApp(objects[\"apps\"][key][\"x1\"],objects[\"apps\"][key][\"y1\"],key,colors.white)!@#&                                                elseif not fs.isDir(workPath..\"/\"..key) and mode ~= \"Save\" or fs.isDir(workPath..\"/\"..key) and windows.getFileFormat(key) == \".app\" and mode ~= \"Save\" then!@#&                                                        windows.square(objects[\"apps\"][key][\"x1\"]-1,objects[\"apps\"][key][\"y1\"],xAppSize+2,yAppSize,colors.blue)!@#&                                                        drawKonkretnoApp(objects[\"apps\"][key][\"x1\"],objects[\"apps\"][key][\"y1\"],key,colors.blue)!@#&                                                        sleep(0.2)!@#&                                                        windows.square(objects[\"apps\"][key][\"x1\"]-1,objects[\"apps\"][key][\"y1\"],xAppSize+2,yAppSize,colors.white)!@#&                                                        drawKonkretnoApp(objects[\"apps\"][key][\"x1\"],objects[\"apps\"][key][\"y1\"],key,colors.white)!@#&                                                        input = \"/\"..workPath..\"/\"..key!@#&                                                        drawTopBar()!@#&                                                end!@#&                                        else!@#&                                                if fs.isDir(workPath..\"/\"..key) then!@#&                                                        windows.square(objects[\"apps\"][key][\"x1\"]-1,objects[\"apps\"][key][\"y1\"],xAppSize+2,yAppSize,colors.lightGray)!@#&                                                        drawKonkretnoApp(objects[\"apps\"][key][\"x1\"],objects[\"apps\"][key][\"y1\"],key,colors.lightGray)!@#&                                               !@#&                                                        local action = context.menu(x,y,{\"Add to sidebar\"})!@#&                                                        if action == \"Add to sidebar\" then!@#& !@#&                                                                Favourites[key] = workPath..\"/\"..key!@#&                                                                saveConfig()!@#& !@#&                                                        end!@#&                                                        drawManager()!@#&                                                end!@#&                                        end!@#& !@#&                                        breakCycles = true!@#&                                        break!@#&                                end    !@#&                        end!@#& !@#&                        if clickedAtArea(x,y,objects[\"windowControls\"][\"<\"][\"x\"],objects[\"windowControls\"][\"<\"][\"y\"],objects[\"windowControls\"][\"<\"][\"x\"],objects[\"windowControls\"][\"<\"][\"y\"]) then!@#&                                if #workPathHistory > 0 then!@#&                                        windows.colorTextWithBack(objects[\"windowControls\"][\"<\"][\"x\"],objects[\"windowControls\"][\"<\"][\"y\"],\"<\",colors.white,colors.blue)!@#&                                        sleep(0.2)!@#&                                        workPath = workPathHistory[#workPathHistory]!@#&                                        input = \"/\"..workPath!@#&                                        workPathHistory[#workPathHistory] = nil!@#&                                        drawManager()!@#&                                end!@#&                        elseif clickedAtArea(x,y,objects[\"windowControls\"][\"ok\"][\"x1\"],objects[\"windowControls\"][\"ok\"][\"y\"],objects[\"windowControls\"][\"ok\"][\"x2\"],objects[\"windowControls\"][\"ok\"][\"y\"]) then!@#&                                windows.colorTextWithBack(objects[\"windowControls\"][\"ok\"][\"x1\"],objects[\"windowControls\"][\"ok\"][\"y\"],\" \"..mode..\" \",colors.white,colors.blue)!@#&                                sleep(0.3)!@#&                                return string.sub(input,2,-1)!@#&                        elseif clickedAtArea(x,y,objects[\"windowControls\"][\"search\"][\"x1\"],objects[\"windowControls\"][\"search\"][\"y\"],objects[\"windowControls\"][\"search\"][\"x2\"],objects[\"windowControls\"][\"search\"][\"y\"]) then!@#&                                local searchResult = windows.search(xEnd-27,yStart,28,2,\"Search\")!@#&                                if searchResult ~= nil then!@#&                                        --windows.error(\"=\"..searchResult)!@#&                                        if fs.isDir(searchResult) then!@#&                                                workPathHistory[#workPathHistory+1] = workPath!@#&                                                workPath = searchResult!@#&                                                input = \"/\"..workPath!@#&                                        else!@#&                                                workPathHistory[#workPathHistory+1] = workPath!@#&                                                workPath = string.sub(searchResult,1,#searchResult-#fs.getName(searchResult)-1)!@#&                                                input = \"/\"..workPath..\"/\"..fs.getName(searchResult)!@#&                                        end!@#&                                end!@#&                                drawManager()!@#& !@#&                        elseif clickedAtArea(x,y,startOfInputBar,yStart+1,endOfInputBar,yStart+1) and mode ~= \"Open\" then!@#& !@#&                                local cursor = nil!@#& !@#&                                input = input..\"/\"!@#&                                drawTopBar()!@#& !@#&                                local accept = false!@#& !@#&                                while true do!@#& !@#&                                        cursor = startOfInputBar+#input!@#&                                        if cursor > startOfInputBar+sizeOfInputBar then cursor = startOfInputBar+sizeOfInputBar-1 end!@#&                                       !@#&                                        term.setCursorPos(cursor,yStart+1)!@#&                                        term.setTextColor(colors.black)!@#&                                        term.setCursorBlink(true)!@#& !@#&                                        local event1,side1,x1,y1 = os.pullEvent()!@#&                                        if event1 == \"char\" then!@#& !@#&                                                input = input..side1!@#&                                                drawTopBar()!@#&                                        elseif event1 == \"key\" then!@#&                                                if side1 == 28 then!@#&                                                        windows.colorTextWithBack(objects[\"windowControls\"][\"ok\"][\"x1\"],objects[\"windowControls\"][\"ok\"][\"y\"],\" \"..mode..\" \",colors.white,colors.blue)!@#&                                                        sleep(0.3)!@#&                                                        accept = true!@#&                                                        break!@#&                                                elseif side1 == 14 then!@#&                                                        if #input > 1 then!@#&                                                                input = string.sub(input,1,-2)!@#&                                                                drawTopBar()!@#&                                                        end!@#& !@#&                                                end!@#&                                        elseif event1 == \"mouse_click\" then!@#&                                                if clickedAtArea(x1,y1,objects[\"windowControls\"][\"ok\"][\"x1\"],objects[\"windowControls\"][\"ok\"][\"y\"],objects[\"windowControls\"][\"ok\"][\"x2\"],objects[\"windowControls\"][\"ok\"][\"y\"]) then!@#&                                                        accept = true!@#&                                                        drawTopBar()!@#&                                                else!@#&                                                        drawTopBar()!@#&                                                        break!@#&                                                end!@#&                                        end!@#& !@#&                                        term.setCursorBlink(false)!@#&                                end!@#& !@#&                                term.setCursorBlink(false)!@#& !@#&                                if accept then return string.sub(input,2,-1) end!@#& !@#&                        end!@#& !@#&                elseif event == \"mouse_scroll\" then!@#&                        if clickedAtArea(x,y,xStart+leftBarSize,yStart+1,xEnd-1,yEnd) then!@#&                                if side == 1 then!@#&                                        currentDesktop = currentDesktop + 1!@#&                                        if currentDesktop > countOfDesktops then!@#&                                                currentDesktop = countOfDesktops!@#&                                        else!@#&                                                drawApps(xStartOfDrawingApps,yStartOfDrawingApps,currentDesktop)!@#&                                                windows.scrollBar(xEnd,yStart+3,managerY-3,countOfDesktops,currentDesktop,colors.lightGray,colors.lightBlue)!@#&                                        end!@#&                                else!@#&                                        currentDesktop = currentDesktop - 1!@#&                                        if currentDesktop < 1 then!@#&                                                currentDesktop = 1!@#&                                        else!@#&                                                drawApps(xStartOfDrawingApps,yStartOfDrawingApps,currentDesktop)!@#&                                                windows.scrollBar(xEnd,yStart+3,managerY-3,countOfDesktops,currentDesktop,colors.lightGray,colors.lightBlue)!@#&                                        end!@#&                                end!@#&                        end!@#&                elseif event == \"key\" then!@#&                        if side == 28 then!@#&                                return string.sub(input,2,-1)!@#&                        end!@#&                end!@#&        end!@#& !@#&end!@#& !@#&function open(cykaWorkPath)!@#&        if cykaWorkPath then workPath = cykaWorkPath end!@#& !@#&        for i=(1-managerY),1,2 do!@#&                drawManager(2,i)!@#&                sleep(0)!@#&        end!@#& !@#&        return initializeProgram(\"open\")!@#&end!@#& !@#&function save(cykaWorkPath)!@#&        if cykaWorkPath then workPath = cykaWorkPath end!@#& !@#&        for i=(1-managerY),1,2 do!@#&                drawManager(2,i)!@#&                sleep(0)!@#&        end!@#& !@#&        return initializeProgram(\"save\")!@#&end!@#& !@#&-------------------------------------!@#& !@#&--[[windows.clearScreen(colors.black)!@#& !@#&local path = open(\"\")!@#& !@#&term.setTextColor(colors.white)!@#&windows.clearScreen(colors.black)!@#&if path == \"\" then!@#&        windows.usualText(2,2,\"NIL!!\")!@#&else!@#&        windows.usualText(2,2,\"Path=\"..path)!@#&end]]",["alphanumeric"]="-- valid characters are:!@#&-- abcdefghijklmnopqrstuvwxyz1234567890!@#$%^&*()-=_+[]{};':\"\\|,./<>?`~!@#&function charToImg(char,c,x,y)!@#&  char = tostring(char)!@#&  local img = {}!@#&  if char == \"a\" or char == \"A\" then!@#&    img[1] = {0,c,c,c,0}!@#&    img[2] = {c,0,0,0,c}!@#&    img[3] = {c,c,c,c,c}!@#&    img[4] = {c,0,0,0,c}!@#&    img[5] = {c,0,0,0,c}!@#&  elseif char == \"b\" or char == \"B\" then!@#&    img[1] = {c,c,c,c,0}!@#&    img[2] = {c,0,0,0,c}!@#&    img[3] = {c,c,c,c,0}!@#&    img[4] = {c,0,0,0,c}!@#&    img[5] = {c,c,c,c,0}!@#&  elseif char == \"c\" or char == \"C\" then!@#&    img[1] = {0,c,c,c,c}!@#&    img[2] = {c,0,0,0,0}!@#&    img[3] = {c,0,0,0,0}!@#&    img[4] = {c,0,0,0,0}!@#&    img[5] = {0,c,c,c,c}!@#&  elseif char == \"d\" or char == \"D\" then!@#&    img[1] = {c,c,c,c,0}!@#&    img[2] = {c,0,0,0,c}!@#&    img[3] = {c,0,0,0,c}!@#&    img[4] = {c,0,0,0,c}!@#&    img[5] = {c,c,c,c,0}!@#&  elseif char == \"e\" or char == \"E\" then!@#&    img[1] = {c,c,c,c,c}!@#&    img[2] = {c,0,0,0,0}!@#&    img[3] = {c,c,c,c,0}!@#&    img[4] = {c,0,0,0,0}!@#&    img[5] = {c,c,c,c,c}!@#&  elseif char == \"f\" or char == \"F\" then!@#&    img[1] = {c,c,c,c,c}!@#&    img[2] = {c,0,0,0,0}!@#&    img[3] = {c,c,c,c,0}!@#&    img[4] = {c,0,0,0,0}!@#&    img[5] = {c,0,0,0,0}!@#&  elseif char == \"g\" or char == \"G\" then!@#&    img[1] = {c,c,c,c,c}!@#&    img[2] = {c,0,0,0,0}!@#&    img[3] = {c,0,0,c,c}!@#&    img[4] = {c,0,0,0,c}!@#&    img[5] = {c,c,c,c,c}!@#&  elseif char == \"h\" or char == \"H\" then!@#&    img[1] = {c,0,0,0,c}!@#&    img[2] = {c,0,0,0,c}!@#&    img[3] = {c,c,c,c,c}!@#&    img[4] = {c,0,0,0,c}!@#&    img[5] = {c,0,0,0,c}!@#&  elseif char == \"i\" or char == \"I\" then!@#&    img[1] = {c,c,c,c,c}!@#&    img[2] = {0,0,c,0,0}!@#&    img[3] = {0,0,c,0,0}!@#&    img[4] = {0,0,c,0,0}!@#&    img[5] = {c,c,c,c,c}!@#&  elseif char == \"j\" or char == \"J\" then!@#&    img[1] = {c,c,c,c,c}!@#&    img[2] = {0,0,c,0,0}!@#&    img[3] = {0,0,c,0,0}!@#&    img[4] = {c,0,c,0,0}!@#&    img[5] = {c,c,c,0,0}!@#&  elseif char == \"k\" or char == \"K\" then!@#&    img[1] = {c,0,0,c,0}!@#&    img[2] = {c,0,c,0,0}!@#&    img[3] = {c,c,c,0,0}!@#&    img[4] = {c,0,0,c,0}!@#&    img[5] = {c,0,0,0,c}!@#&  elseif char == \"l\" or char == \"L\" then!@#&    img[1] = {c,0,0,0,0}!@#&    img[2] = {c,0,0,0,0}!@#&    img[3] = {c,0,0,0,0}!@#&    img[4] = {c,0,0,0,0}!@#&    img[5] = {c,c,c,c,c}!@#&  elseif char == \"m\" or char == \"M\" then!@#&    img[1] = {c,c,c,c,c}!@#&    img[2] = {c,0,c,0,c}!@#&    img[3] = {c,0,c,0,c}!@#&    img[4] = {c,0,0,0,c}!@#&    img[5] = {c,0,0,0,c}!@#&  elseif char == \"n\" or char == \"N\" then!@#&    img[1] = {c,c,c,c,c}!@#&    img[2] = {c,0,0,0,c}!@#&    img[3] = {c,0,0,0,c}!@#&    img[4] = {c,0,0,0,c}!@#&    img[5] = {c,0,0,0,c}!@#&  elseif char == \"o\" or char == \"O\" then!@#&    img[1] = {c,c,c,c,c}!@#&    img[2] = {c,0,0,0,c}!@#&    img[3] = {c,0,0,0,c}!@#&    img[4] = {c,0,0,0,c}!@#&    img[5] = {c,c,c,c,c}!@#&  elseif char == \"p\" or char == \"P\" then!@#&    img[1] = {c,c,c,c,c}!@#&    img[2] = {c,0,0,0,c}!@#&    img[3] = {c,c,c,c,c}!@#&    img[4] = {c,0,0,0,0}!@#&    img[5] = {c,0,0,0,0}!@#&  elseif char == \"q\" or char == \"Q\" then!@#&    img[1] = {c,c,c,c,c}!@#&    img[2] = {c,0,0,0,c}!@#&    img[3] = {c,0,c,0,c}!@#&    img[4] = {c,0,0,c,0}!@#&    img[5] = {c,c,c,0,c}!@#&  elseif char == \"r\" or char == \"R\" then!@#&    img[1] = {c,c,c,c,0}!@#&    img[2] = {c,0,0,0,c}!@#&    img[3] = {c,c,c,c,0}!@#&    img[4] = {c,0,0,c,0}!@#&    img[5] = {c,0,0,0,c}!@#&  elseif char == \"s\" or char == \"S\" then!@#&    img[1] = {0,c,c,c,c}!@#&    img[2] = {c,0,0,0,0}!@#&    img[3] = {0,c,c,c,0}!@#&    img[4] = {0,0,0,0,c}!@#&    img[5] = {c,c,c,c,0}!@#&  elseif char == \"t\" or char == \"T\" then!@#&    img[1] = {c,c,c,c,c}!@#&    img[2] = {0,0,c,0,0}!@#&    img[3] = {0,0,c,0,0}!@#&    img[4] = {0,0,c,0,0}!@#&    img[5] = {0,0,c,0,0}!@#&  elseif char == \"u\" or char == \"U\" then!@#&    img[1] = {c,0,0,0,c}!@#&    img[2] = {c,0,0,0,c}!@#&    img[3] = {c,0,0,0,c}!@#&    img[4] = {c,0,0,0,c}!@#&    img[5] = {c,c,c,c,c}!@#&  elseif char == \"v\" or char == \"V\" then!@#&    img[1] = {c,0,0,0,c}!@#&    img[2] = {c,0,0,0,c}!@#&    img[3] = {0,c,0,c,0}!@#&    img[4] = {0,c,0,c,0}!@#&    img[5] = {0,0,c,0,0}!@#&  elseif char == \"w\" or char == \"W\" then!@#&    img[1] = {c,0,0,0,c}!@#&    img[2] = {c,0,0,0,c}!@#&    img[3] = {c,0,c,0,c}!@#&    img[4] = {c,0,c,0,c}!@#&    img[5] = {c,c,c,c,c}!@#&  elseif char == \"x\" or char == \"X\" then!@#&    img[1] = {c,0,0,0,c}!@#&    img[2] = {0,c,0,c,0}!@#&    img[3] = {0,0,c,0,0}!@#&    img[4] = {0,c,0,c,0}!@#&    img[5] = {c,0,0,0,c}!@#&  elseif char == \"y\" or char == \"Y\" then!@#&    img[1] = {c,0,0,0,c}!@#&    img[2] = {0,c,0,c,0}!@#&    img[3] = {0,0,c,0,0}!@#&    img[4] = {0,0,c,0,0}!@#&    img[5] = {0,0,c,0,0}!@#&  elseif char == \"z\" or char == \"Z\" then!@#&    img[1] = {c,c,c,c,c}!@#&    img[2] = {0,0,0,c,0}!@#&    img[3] = {0,0,c,0,0}!@#&    img[4] = {0,c,0,0,0}!@#&    img[5] = {c,c,c,c,c}!@#&  elseif char == \"1\" then!@#&    img[1] = {0,c,c,0,0}!@#&    img[2] = {c,0,c,0,0}!@#&    img[3] = {0,0,c,0,0}!@#&    img[4] = {0,0,c,0,0}!@#&    img[5] = {c,c,c,c,c}!@#&  elseif char == \"2\" then!@#&    img[1] = {c,c,c,c,c}!@#&    img[2] = {0,0,0,0,c}!@#&    img[3] = {c,c,c,c,c}!@#&    img[4] = {c,0,0,0,0}!@#&    img[5] = {c,c,c,c,c}!@#&  elseif char == \"3\" then!@#&    img[1] = {c,c,c,c,c}!@#&    img[2] = {0,0,0,0,c}!@#&    img[3] = {0,c,c,c,c}!@#&    img[4] = {0,0,0,0,c}!@#&    img[5] = {c,c,c,c,c}!@#&  elseif char == \"4\" then!@#&    img[1] = {c,0,0,0,c}!@#&    img[2] = {c,0,0,0,c}!@#&    img[3] = {c,c,c,c,c}!@#&    img[4] = {0,0,0,0,c}!@#&    img[5] = {0,0,0,0,c}!@#&  elseif char == \"5\" then!@#&    img[1] = {c,c,c,c,c}!@#&    img[2] = {c,0,0,0,0}!@#&    img[3] = {c,c,c,c,c}!@#&    img[4] = {0,0,0,0,c}!@#&    img[5] = {c,c,c,c,c}!@#&  elseif char == \"6\" then!@#&    img[1] = {c,c,c,c,c}!@#&    img[2] = {c,0,0,0,0}!@#&    img[3] = {c,c,c,c,c}!@#&    img[4] = {c,0,0,0,c}!@#&    img[5] = {c,c,c,c,c}!@#&  elseif char == \"7\" then!@#&    img[1] = {c,c,c,c,c}!@#&    img[2] = {0,0,0,c,0}!@#&    img[3] = {0,0,c,0,0}!@#&    img[4] = {0,c,0,0,0}!@#&    img[5] = {c,0,0,0,0}!@#&  elseif char == \"8\" then!@#&    img[1] = {c,c,c,c,c}!@#&    img[2] = {c,0,0,0,c}!@#&    img[3] = {c,c,c,c,c}!@#&    img[4] = {c,0,0,0,c}!@#&    img[5] = {c,c,c,c,c}!@#&  elseif char == \"9\" then!@#&    img[1] = {c,c,c,c,c}!@#&    img[2] = {c,0,0,0,c}!@#&    img[3] = {c,c,c,c,c}!@#&    img[4] = {0,0,0,0,c}!@#&    img[5] = {c,c,c,c,c}!@#&  elseif char == \"0\" then!@#&    img[1] = {c,c,c,c,c}!@#&    img[2] = {c,0,0,0,c}!@#&    img[3] = {c,0,0,0,c}!@#&    img[4] = {c,0,0,0,c}!@#&    img[5] = {c,c,c,c,c}!@#&  elseif char == \"!\" then!@#&    img[1] = {0,0,c,0,0}!@#&    img[2] = {0,0,c,0,0}!@#&    img[3] = {0,0,c,0,0}!@#&    img[4] = {0,0,0,0,0}!@#&    img[5] = {0,0,c,0,0}!@#&  elseif char == \"@\" then!@#&    img[1] = {c,c,c,c,0}!@#&    img[2] = {c,0,0,c,0}!@#&    img[3] = {c,0,c,c,0}!@#&    img[4] = {c,0,0,0,0}!@#&    img[5] = {c,c,c,c,c}!@#&  elseif char == \"#\" then!@#&    img[1] = {0,c,0,c,0}!@#&    img[2] = {c,c,c,c,c}!@#&    img[3] = {0,c,0,c,0}!@#&    img[4] = {c,c,c,c,c}!@#&    img[5] = {0,c,0,c,0}!@#&  elseif char == \"$\" then!@#&    img[1] = {0,c,c,c,c}!@#&    img[2] = {c,0,c,0,0}!@#&    img[3] = {0,c,c,c,0}!@#&    img[4] = {0,0,c,0,c}!@#&    img[5] = {c,c,c,c,0}!@#&  elseif char == \"%\" then!@#&    img[1] = {c,0,0,0,c}!@#&    img[2] = {0,0,0,c,0}!@#&    img[3] = {0,0,c,0,0}!@#&    img[4] = {0,c,0,0,0}!@#&    img[5] = {c,0,0,0,c}!@#&  elseif char == \"^\" then!@#&    img[1] = {0,0,c,0,0}!@#&    img[2] = {0,c,0,c,0}!@#&    img[3] = {c,0,0,0,c}!@#&    img[4] = {0,0,0,0,0}!@#&    img[5] = {0,0,0,0,0}!@#&  elseif char == \"&\" then!@#&    img[1] = {0,c,0,0,0}!@#&    img[2] = {c,0,c,0,0}!@#&    img[3] = {0,c,c,0,c}!@#&    img[4] = {c,0,0,c,0}!@#&    img[5] = {0,c,c,0,c}!@#&  elseif char == \"*\" then!@#&    img[1] = {c,0,c,0,c}!@#&    img[2] = {0,c,c,c,0}!@#&    img[3] = {c,c,c,c,c}!@#&    img[4] = {0,c,c,c,0}!@#&    img[5] = {c,0,c,0,c}!@#&  elseif char == \"(\" then!@#&    img[1] = {0,0,c,0,0}!@#&    img[2] = {0,c,0,0,0}!@#&    img[3] = {0,c,0,0,0}!@#&    img[4] = {0,c,0,0,0}!@#&    img[5] = {0,0,c,0,0}!@#&  elseif char == \")\" then!@#&    img[1] = {0,0,c,0,0}!@#&    img[2] = {0,0,0,c,0}!@#&    img[3] = {0,0,0,c,0}!@#&    img[4] = {0,0,0,c,0}!@#&    img[5] = {0,0,c,0,0}!@#&  elseif char == \"-\" then!@#&    img[1] = {0,0,0,0,0}!@#&    img[2] = {0,0,0,0,0}!@#&    img[3] = {0,c,c,c,0}!@#&    img[4] = {0,0,0,0,0}!@#&    img[5] = {0,0,0,0,0}!@#&  elseif char == \"_\" then!@#&    img[1] = {0,0,0,0,0}!@#&    img[2] = {0,0,0,0,0}!@#&    img[3] = {0,0,0,0,0}!@#&    img[4] = {0,0,0,0,0}!@#&    img[5] = {c,c,c,c,c}!@#&  elseif char == \"=\" then!@#&    img[1] = {0,0,0,0,0}!@#&    img[2] = {c,c,c,c,c}!@#&    img[3] = {0,0,0,0,0}!@#&    img[4] = {c,c,c,c,c}!@#&    img[5] = {0,0,0,0,0}!@#&  elseif char == \"+\" then!@#&    img[1] = {0,0,c,0,0}!@#&    img[2] = {0,0,c,0,0}!@#&    img[3] = {c,c,c,c,c}!@#&    img[4] = {0,0,c,0,0}!@#&    img[5] = {0,0,c,0,0}!@#&  elseif char == \"`\" then!@#&    img[1] = {c,0,0,0,0}!@#&    img[2] = {0,c,0,0,0}!@#&    img[3] = {0,0,c,0,0}!@#&    img[4] = {0,0,0,0,0}!@#&    img[5] = {0,0,0,0,0}!@#&  elseif char == \"~\" then!@#&    img[1] = {0,0,0,0,0}!@#&    img[2] = {0,c,0,0,0}!@#&    img[3] = {c,0,c,0,c}!@#&    img[4] = {0,0,0,c,0}!@#&    img[5] = {0,0,0,0,0}!@#&  elseif char == \"?\" then!@#&    img[1] = {0,c,c,c,0}!@#&    img[2] = {c,0,0,0,c}!@#&    img[3] = {0,0,c,c,0}!@#&    img[4] = {0,0,0,0,0}!@#&    img[5] = {0,0,c,0,0}!@#&  elseif char == \"/\" then!@#&    img[1] = {0,0,0,0,c}!@#&    img[2] = {0,0,0,c,0}!@#&    img[3] = {0,0,c,0,0}!@#&    img[4] = {0,c,0,0,0}!@#&    img[5] = {c,0,0,0,0}!@#&  elseif char == \"<\" then!@#&    img[1] = {0,0,c,0,0}!@#&    img[2] = {0,c,0,0,0}!@#&    img[3] = {c,0,0,0,0}!@#&    img[4] = {0,c,0,0,0}!@#&    img[5] = {0,0,c,0,0}!@#&  elseif char == \">\" then!@#&    img[1] = {0,0,c,0,0}!@#&    img[2] = {0,0,0,c,0}!@#&    img[3] = {0,0,0,0,c}!@#&    img[4] = {0,0,0,c,0}!@#&    img[5] = {0,0,c,0,0}!@#&  elseif char == \",\" then!@#&    img[1] = {0,0,0,0,0}!@#&    img[2] = {0,0,0,0,0}!@#&    img[3] = {0,0,0,0,0}!@#&    img[4] = {0,c,0,0,0}!@#&    img[5] = {c,0,0,0,0}!@#&  elseif char == \".\" then!@#&    img[1] = {0,0,0,0,0}!@#&    img[2] = {0,0,0,0,0}!@#&    img[3] = {0,0,0,0,0}!@#&    img[4] = {0,0,0,0,0}!@#&    img[5] = {c,0,0,0,0}!@#&  elseif char == \":\" then!@#&    img[1] = {0,0,0,0,0}!@#&    img[2] = {0,0,c,0,0}!@#&    img[3] = {0,0,0,0,0}!@#&    img[4] = {0,0,c,0,0}!@#&    img[5] = {0,0,0,0,0}!@#&  elseif char == \";\" then!@#&    img[1] = {0,0,0,0,0}!@#&    img[2] = {0,0,c,0,0}!@#&    img[3] = {0,0,0,0,0}!@#&    img[4] = {0,0,c,0,0}!@#&    img[5] = {0,c,0,0,0}!@#&  elseif char == \"'\" then!@#&    img[1] = {0,0,c,0,0}!@#&    img[2] = {0,c,0,0,0}!@#&    img[3] = {0,0,0,0,0}!@#&    img[4] = {0,0,0,0,0}!@#&    img[5] = {0,0,0,0,0}!@#&  elseif char == \"\\\"\" then!@#&    img[1] = {0,0,c,0,c}!@#&    img[2] = {0,c,0,c,0}!@#&    img[3] = {0,0,0,0,0}!@#&    img[4] = {0,0,0,0,0}!@#&    img[5] = {0,0,0,0,0}!@#&  elseif char == \"{\" then!@#&    img[1] = {0,0,c,c,0}!@#&    img[2] = {0,0,c,0,0}!@#&    img[3] = {0,c,0,0,0}!@#&    img[4] = {0,0,c,0,0}!@#&    img[5] = {0,0,c,c,0}!@#&  elseif char == \"[\" then!@#&    img[1] = {0,0,c,c,0}!@#&    img[2] = {0,0,c,0,0}!@#&    img[3] = {0,0,c,0,0}!@#&    img[4] = {0,0,c,0,0}!@#&    img[5] = {0,0,c,c,0}!@#&  elseif char == \"}\" then!@#&    img[1] = {0,c,c,0,0}!@#&    img[2] = {0,0,c,0,0}!@#&    img[3] = {0,0,0,c,0}!@#&    img[4] = {0,0,c,0,0}!@#&    img[5] = {0,c,c,0,0}!@#&  elseif char == \"]\" then!@#&    img[1] = {0,c,c,0,0}!@#&    img[2] = {0,0,c,0,0}!@#&    img[3] = {0,0,c,0,0}!@#&    img[4] = {0,0,c,0,0}!@#&    img[5] = {0,c,c,0,0}!@#&  elseif char == \"|\" then!@#&    img[1] = {0,0,c,0,0}!@#&    img[2] = {0,0,c,0,0}!@#&    img[3] = {0,0,0,0,0}!@#&    img[4] = {0,0,c,0,0}!@#&    img[5] = {0,0,c,0,0}!@#&  elseif char == \"\\\\\" then!@#&    img[1] = {c,0,0,0,0}!@#&    img[2] = {0,c,0,0,0}!@#&    img[3] = {0,0,c,0,0}!@#&    img[4] = {0,0,0,c,0}!@#&    img[5] = {0,0,0,0,c}!@#&  else!@#&    img[1] = {0,0,0,0,0}!@#&    img[2] = {0,0,0,0,0}!@#&    img[3] = {0,0,0,0,0}!@#&    img[4] = {0,0,0,0,0}!@#&    img[5] = {0,0,0,0,0}!@#&  end!@#&  paintutils.drawImage(img,x,y)!@#&  term.setBackgroundColor(colors.black)!@#&end!@#&function stringToImg(_str,_color,_x,_y)!@#&  local maxX,maxY = term.getSize()!@#&  local iterator = 1!@#&  local _str = tostring(_str)!@#&  for i = 1, #_str do!@#&    local _char = _str:sub(i,i)!@#&    x = _x + ((iterator-1)*6)!@#&    if x+5 > maxX then!@#&      x = _x!@#&      _y = _y + 6!@#&      iterator = 1!@#&    end!@#&    charToImg(_char,_color,x,_y)!@#&    iterator = iterator + 1!@#&  end!@#&end!@#&!@#&local args={...}!@#&local command = args[1]!@#&if command==\"help\" then!@#&  term.clear()!@#&  term.setCursorPos(1,1)!@#&  print(\"This program is a simple api which allows programs to print large characters of text without having to resize the font size.\")!@#&  print(\"Functions:\\n  stringToImg(\\\"Text Here\\\",color,x,y)\\n  charToImg(\\\"c\\\",color,x,y)\")!@#&  print(\"Characters are 5x5. x and y point to the top left corner of where the characters should appear\")!@#&  print(\"Supported characters - a-z A-Z 0-9 !@#$%^&*()-=_+[]{};':\\\"\\\\|,./<>?~\")!@#&  print(\" \")!@#&  print(\"stringToImg(\\\"See It?\\\",colors.red,2,h-6) = \")!@#&  local w,h = term.getSize()!@#&  stringToImg(\"See It?\",colors.red,2,h-5)!@#&  print(\" \")!@#&end",["windows"]="---------------------------------------------------------------------------------------------------------------------------!@#& !@#&-- colorText(int _, int y_, string , int _)!@#&--      .     .!@#& !@#& !@#&-- usualText(int _, int y_, string )!@#&--      .!@#& !@#& !@#&-- square(int x_, int x_, int , int , int )!@#&--      (,   ).    .!@#& !@#& !@#&-- clearScreen(int )!@#&--     .!@#& !@#& !@#&-- fadeIn(int )!@#&-- fadeOut(int )!@#&--           .     0.!@#& !@#& !@#&-- tv(int )!@#&--      .     0.!@#& !@#& !@#&-- emptyWindow(int _, int y_, int , int , string )!@#&--        .!@#& !@#& !@#&-- sampleWindow(int _, int y_, int , int )!@#&--    ,   .!@#& !@#& !@#&-- drawProgressBar(int _, int y_, int , int , int __, int __, int __)!@#&--       .!@#& !@#& !@#&-- scrollBar(int _, int y_, int ___, int __, int _, int __, int __)!@#&--    .!@#&--    ,  ,    .!@#&--  ,       100,      50,!@#&--         .!@#& !@#&------------------------- -------------------------------------------------------------------------------------!@#& !@#&-- error(string _)!@#&--      .!@#& !@#& !@#&-- attention(table _, table _)!@#&--   \"!\"  - .!@#&--    -     ,     .!@#&--!@#&--  : attention({\"Hey!\",\"This is attention window!\"},{\"And this is information!\"})!@#& !@#& !@#&-- input(int x_, int y_, string _ , int _, table _1, table _2 ... table _N)!@#&--      .!@#&--   -    {string _, string ____}!@#&--      ,      .!@#&--!@#&--  x_  y_   \"auto\",   !@#&--            .!@#&--!@#&--  : myData = input(\"auto\",\"auto\",\"Login\",20,{\"Username\",\"\"},{\"Password\",\"\"})!@#&--      Username \"Igor\",    Password \"12345\",!@#&--      {\"Igor\",\"12345\"}!@#&--!@#&--  ,        ctrl+v!@#& !@#& !@#&-- select(table , table , table 1, table 2 ... table N)!@#&--        .!@#&--!@#&--     : {string 1, string 2 ... string N}!@#&--   : {string _, int _, int __}!@#&--!@#&--         .!@#&--!@#&--  : pressedButton = windows.select({\"Hello!\"},{\"Do you want to load OS\",\"when computer starts?\"},{\"No\",colors.lightGray,colors.black},{\"Yes\",colors.lightBlue,colors.black})!@#& !@#& !@#&-- aboutFile(int _, int y_, int _, string __)!@#&--        .!@#&--   .!@#& !@#& !@#&-- progressBar(int _, int y_, int _, string , string , int )!@#&--         ,   .!@#& !@#& !@#&-- search(int _, int y_, int _, int ___, string __)!@#&--        .!@#&--     .!@#&--          .!@#&--     .!@#&--        ,      .!@#& !@#&-------------------------  -------------------------------------------------------------------------------------!@#& !@#&-- getFileFormat(string __)!@#&--       .zip, .app  .   ,  nil.!@#& !@#&-- hideFileFormat(string __)!@#&--    ,        .   ,    .!@#& !@#&-- isFileHidden(string __)!@#&--        \".\",    true.  ,  false.!@#& !@#&-- getFileSize(string __)!@#&--         .        .!@#& !@#&-- getFileType(string __)!@#&--    . ,    .zip,    - Application.!@#& !@#&-- stringLimit(string , string , int _)!@#&--      .  :!@#&--!@#&-- local s = \"HelloWorldBitches!\"!@#&-- print(stringLimit(\"start\", s, 10))!@#&-- print(stringLimit(\"end\", s, 10))!@#&--!@#&--    :!@#&-- ...itches!!@#&-- HelloWo...!@#& !@#&-----------------------------------------------------------------------------------------------------------------------------------!@#& !@#& !@#&local xSize,ySize = term.getSize()!@#&local centerX,centerY = math.floor(xSize/2),math.floor(ySize/2)!@#& !@#&-- !@#&function findPeripheral(whatToFind)!@#&  local PeriList = rs.getSides()!@#&  for i=1,#PeriList do!@#&    if peripheral.getType(PeriList[i]) == whatToFind then!@#&      return PeriList[i]!@#&    end!@#&  end!@#&end!@#& !@#&--  !@#&function findWirelessModem()!@#&        local periList = rs.getSides() --peripheral.getNames()!@#&        for i=1,#periList do!@#&                if peripheral.getType(periList[i]) == \"modem\" then!@#&                        local govno = peripheral.wrap(periList[i])!@#&                        --if govno.isWireless() then!@#&                        return periList[i]!@#&                        --end!@#&                end!@#&        end!@#&end!@#& !@#&--   !@#&function clickedAtArea(x,y,sx,sy,ex,ey)!@#&    if (x >= sx) and (x <= ex) and (y >= sy) and (y <= ey) then return true end    !@#&    return false!@#&end!@#& !@#&-- ,  !@#&function toboolean(s)!@#&        if s == \"true\" then!@#&                return true!@#&        else!@#&                return false!@#&        end!@#&end!@#& !@#&-- !@#&function colorText(x,y,text,textColor)!@#&        term.setTextColor(textColor)!@#&        term.setCursorPos(x,y)!@#&        term.write(text)!@#&end!@#& !@#&--   !@#&function colorTextWithBack(x,y,text,textColor,backColor)!@#&        term.setTextColor(textColor)!@#&        term.setBackgroundColor(backColor)!@#&        term.setCursorPos(x,y)!@#&        term.write(text)!@#&end!@#& !@#&--    !@#&function usualText(x,y,text)!@#&        term.setCursorPos(x,y)!@#&        term.write(text)!@#&end!@#& !@#&--       !@#&function centerText(how,coord,text,textColor,backColor)!@#&        term.setTextColor(textColor)!@#&        term.setBackgroundColor(backColor)!@#&        if how == \"xy\" then!@#&                term.setCursorPos(math.floor(xSize/2-#text/2),math.floor(ySize/2))!@#&        elseif how == \"x\" then!@#&                term.setCursorPos(math.floor(xSize/2-#text/2),coord)!@#&        elseif how == \"y\" then!@#&                term.setCursorPos(coord,math.floor(ySize/2))!@#&        end!@#&        term.write(text)!@#&end!@#& !@#&--   !@#&function square(x1,y1,width,height,color)!@#&        local string = string.rep(\" \",width)!@#&        term.setBackgroundColor(color)!@#&        for y=y1,(y1+height-1) do!@#&                usualText(x1,y,string)!@#&        end!@#&end!@#& !@#&-- !@#&function circle(cx, cy, radius, char, backColor, textColor)!@#&        local x = radius!@#&    local y = 0!@#&    local radiusError = 1 - x!@#&    term.setTextColor(textColor)!@#&    term.setBackgroundColor(backColor)!@#&    while (x >= y) do!@#&        usualText(x + cx, y + cy, char)!@#&        usualText(y + cx, x + cy, char)!@#&        usualText(-x + cx, y + cy, char)!@#&        usualText(-y + cx, x + cy, char)!@#&        usualText(-x + cx, -y + cy, char)!@#&        usualText(-y + cx, -x + cy, char)!@#&        usualText(x + cx, -y + cy, char)!@#&        usualText(y + cx, -x + cy, char)!@#&        y = y + 1!@#&        if (radiusError < 0) then!@#&            radiusError = radiusError + (2 * y + 1)!@#&        else!@#&            x = x - 1!@#&            radiusError = radiusError + (2 * (y - x + 1))!@#&        end!@#&    end!@#&end!@#& !@#&--  !@#&function clearScreen(color)!@#&        term.setBackgroundColor(color)!@#&        term.clear()!@#&end!@#& !@#&--  !@#&function fadeIn(time)!@#&        clearScreen(colors.gray)!@#&        sleep(time)!@#&        clearScreen(colors.lightGray)!@#&        sleep(time)!@#&        clearScreen(colors.white)!@#&        sleep(time)!@#&end!@#& !@#&--  !@#&function fadeOut(time)!@#&        clearScreen(colors.lightGray)!@#&        sleep(time)!@#&        clearScreen(colors.gray)!@#&        sleep(time)!@#&        clearScreen(colors.black)!@#&        sleep(time)!@#&        term.setCursorPos(1,1)!@#&        term.setTextColor(colors.white)!@#&end!@#& !@#&--    !@#&function emptyWindow(xStart,yStart,xWindowSize,yWindowSize,title)!@#&        --DRAW WINDOW!@#&        square(xStart,yStart,xWindowSize,1,colors.lightGray)!@#&        colorText(math.floor(xStart+xWindowSize/2-#title/2),yStart,title,colors.white)!@#& !@#&        square(xStart,yStart+1,xWindowSize,yWindowSize-1,colors.white)!@#&       !@#&        --DRAW SHADOW!@#&        for x=(xStart+1),(xStart+xWindowSize) do!@#&                paintutils.drawPixel(x,yStart+yWindowSize,colors.gray)!@#&        end!@#&        for y=(yStart+1),(yStart+yWindowSize) do!@#&                paintutils.drawPixel(xStart+xWindowSize,y,colors.gray)!@#&        end!@#&end!@#& !@#&--   !@#&function sampleWindow(xStart,yStart,xWindowSize,yWindowSize)!@#&        square(xStart,yStart,xWindowSize,yWindowSize,colors.white)!@#&        --DRAW SHADOW!@#&        for x=(xStart+1),(xStart+xWindowSize) do!@#&                paintutils.drawPixel(x,yStart+yWindowSize,colors.gray)!@#&        end!@#&        for y=(yStart+1),(yStart+yWindowSize) do!@#&                paintutils.drawPixel(xStart+xWindowSize,y,colors.gray)!@#&        end!@#&end!@#& !@#&--  !@#&function stringLimit(mode,text,size,noDots)!@#&        if string.len(text)<=size then return text end!@#&        if mode == \"start\" then!@#&                if noDots then!@#&                        return string.sub(text,#text-size+1,-1)!@#&                else!@#&                        return \"...\"..string.sub(text,#text-size+4,-1)!@#&                end!@#&        else!@#&                if noDots then!@#&                        return string.sub(text,1,size)!@#&                else!@#&                        return string.sub(text,1,size-3)..\"...\"!@#&                end!@#&        end!@#&end!@#& !@#&--  !@#&function getFileFormat(path)!@#&        local name = fs.getName(path)!@#&        local starting,ending = string.find(name,\"(.)%.[%d%w]*$\")!@#&        if starting == nil then!@#&                return nil!@#&        else!@#&                return string.sub(name,starting+1,-1)!@#&        end!@#&end!@#& !@#&--,   !@#&function isFileHidden(path)!@#&        local name = fs.getName(path)!@#&        local starting,ending = string.find(name,\"^%.(.*)$\")!@#&        if starting == nil then!@#&                return false!@#&        else!@#&                return true!@#&        end!@#&end!@#& !@#&--  !@#&function hideFileFormat(path)!@#&        local name = fs.getName(path)!@#&        local fileFormat = getFileFormat(name)!@#&        if fileFormat == nil then!@#&                return name!@#&        else!@#&                return string.sub(name,1,#name-#fileFormat)!@#&        end!@#&end!@#& !@#&--    !@#&function getFileSize(path)!@#&        local allFilesSize = 0!@#&        if fs.isDir(path) then!@#&                local fileList = fs.list(path)!@#&                for i=1,#fileList do!@#&                        allFilesSize = allFilesSize + getFileSize(path..\"/\"..fileList[i])!@#&                end!@#&        else!@#&                allFilesSize = allFilesSize + fs.getSize(path)!@#&        end!@#&        return allFilesSize!@#&end!@#& !@#&--  !@#&function getFileType(path)!@#&        local fileTypes = {!@#&                [\".png\"] = \"Image\",!@#&                [\".cfg\"] = \"Config\",!@#&                [\".zip\"] = \"Archive\",!@#&                [\".app\"] = \"Application\",!@#&        }!@#& !@#&        local currentFileType = nil!@#& !@#&        local fileFormat = getFileFormat(path)!@#&        if fileFormat == nil then!@#&                if fs.isDir(path) then!@#&                        currentFileType = \"Folder\"!@#&                else!@#&                        currentFileType = \"Lua script\"!@#&                end!@#&        else!@#&                currentFileType = fileTypes[fileFormat] or fileFormat!@#&        end!@#&       !@#&        return currentFileType!@#&end!@#& !@#&--   -!@#&function reorganizeFilesAndFolders(workPath,massivSudaPihay,showHiddenFiles,showSystemFolders)!@#&        local reorganizedMassiv = {}!@#&        local function doGovno(i)!@#&                if showHiddenFiles then!@#&                        reorganizedMassiv[#reorganizedMassiv+1] = massivSudaPihay[i]!@#&                else!@#&                        if not windows.isFileHidden(workPath..\"/\"..massivSudaPihay[i]) then!@#&                                reorganizedMassiv[#reorganizedMassiv+1] = massivSudaPihay[i]!@#&                        end!@#&                end!@#&        end!@#&        local filePath = nil!@#&        for i=1,#massivSudaPihay do!@#&                filePath = workPath..\"/\"..massivSudaPihay[i]!@#&                if fs.isDir(filePath) and windows.getFileFormat(filePath) ~= \".app\" then!@#&                        if showSystemFolders then!@#&                                doGovno(i)!@#&                        else!@#&                                if massivSudaPihay[i] ~= \"rom\" and massivSudaPihay[i] ~= \"System\" then!@#&                                        --windows.attention({\"massiv[i] = \"..massivSudaPihay[i]},{\"heh\"})!@#&                                        doGovno(i)!@#&                                end!@#&                        end!@#&                end!@#&        end!@#&        for i=1,#massivSudaPihay do!@#&                filePath = workPath..\"/\"..massivSudaPihay[i]!@#&                if not fs.isDir(filePath) and massivSudaPihay[i] ~= \"OS\" or fs.isDir(filePath) and windows.getFileFormat(filePath) == \".app\" then!@#&                        doGovno(i)!@#&                end!@#&        end!@#&        return reorganizedMassiv!@#&end!@#& !@#&--   !@#&function drawOSIcon(xIconPos,yIconPos,workPath,name,fileFormat)!@#&        --   !@#&        if not fs.isDir(workPath..\"/\"..name) then!@#&                if fileFormat == \".png\" then!@#&                        image.draw(xIconPos,yIconPos,\"System/OS/Icons/image.png\")!@#&		elseif fileFormat == \".nfp\" then!@#&                        image.draw(xIconPos,yIconPos,\"System/OS/Icons/nfp.png\")!@#&		elseif fileFormat == \".skch\" then!@#&                        image.draw(xIconPos,yIconPos,\"System/OS/Icons/nfp.png\")!@#&		elseif fileFormat == \".gif\" then!@#&                        image.draw(xIconPos,yIconPos,\"System/OS/Icons/gif.png\")!@#&                elseif fileFormat == \".cfg\" then!@#&                        image.draw(xIconPos,yIconPos,\"System/OS/Icons/config.png\")!@#&                elseif fileFormat == \".zip\" then!@#&                        image.draw(xIconPos,yIconPos,\"System/OS/Icons/zip.png\")!@#&                else!@#&                        image.draw(xIconPos,yIconPos,\"System/OS/Icons/default.png\")!@#&                end!@#&        --  !@#&        else!@#&                local iconPath = workPath..\"/\"..name..\"/Resources/icon.png\"!@#&                if fileFormat == \".app\" and fs.exists(iconPath) then!@#&                        image.draw(xIconPos,yIconPos,iconPath)!@#&                elseif string.sub(name,1,4)==\"disk\" then!@#&                        image.draw(xIconPos,yIconPos,\"System/OS/Icons/disk.png\")!@#&                else!@#&                        image.draw(xIconPos,yIconPos,\"System/OS/Icons/folder.png\")!@#&                end!@#&        end!@#&end!@#& !@#&--  !@#&local function correctStartCoords(xStart,yStart,xWindowSize,yWindowSize)!@#&        if xStart == \"auto\" then!@#&                xStart = math.floor(xSize/2 - xWindowSize/2)!@#&        end!@#&        if yStart == \"auto\" then!@#&                yStart = math.floor(ySize/2 - yWindowSize/2)!@#&        end!@#&        return xStart,yStart!@#&end!@#& !@#&-- !@#&function button(x,y,xOffset,yOffset,text,textColor,backColor)!@#&        local width = xOffset*2+#text!@#&        local height = yOffset*2+1!@#&        x,y = correctStartCoords(x,y,width,height)!@#&        square(x,y,width,height,backColor)!@#&        colorText(x+xOffset,y+yOffset,text,textColor)!@#&        return x,y,x+width-1,y+height-1!@#&end!@#& !@#&--  !@#&local function drawProgressBar(xStart,yStart,width,height,frontColor,backColor,percent)!@#&        local doneSize = math.ceil(percent/100*width)!@#& !@#&        square(xStart,yStart,width,height,backColor)!@#&        square(xStart,yStart,doneSize,height,frontColor)!@#&end!@#& !@#&--  !@#&function scrollBar(xStart,yStart,height,countOfAllElements,currentElement,backColor,frontColor)!@#&        local percent = 1/countOfAllElements!@#&        local sizeOfScrollBar = math.ceil(percent * height)!@#&        local displayBarFrom = math.floor(yStart + height*((currentElement-1)/countOfAllElements))!@#& !@#&        for i=yStart,(yStart+height-1) do!@#&                paintutils.drawPixel(xStart,i,backColor)!@#&        end!@#& !@#&        for i=displayBarFrom,(displayBarFrom+sizeOfScrollBar-1) do!@#&                paintutils.drawPixel(xStart,i,frontColor)!@#&        end!@#&end!@#& !@#&-- -   !@#&local function searchInAllFiles(path,whatToFind)!@#& !@#&        local function poiskSovpadeniya(name)!@#&                local starting,ending = string.find(string.lower(name),string.lower(whatToFind))!@#&                if starting == nil then!@#&                        return false!@#&                else!@#&                        return true!@#&                end!@#&        end!@#& !@#&        local searchMassiv = {}!@#& !@#&        local function createFileMassiv(path,whatToFind)!@#&                local fileList = fs.list(path)!@#&                for i=1,#fileList do!@#&                        if fs.isDir(path..\"/\"..fileList[i]) then!@#&                                if poiskSovpadeniya(fileList[i]) then!@#&                                        searchMassiv[#searchMassiv+1] = {[\"path\"]=path,[\"name\"]=fileList[i],[\"isDir\"]=true,[\"fileSize\"]=getFileSize(path..\"/\"..fileList[i]),[\"fileType\"]=getFileType(path..\"/\"..fileList[i]),[\"fileFormat\"]=getFileFormat(path..\"/\"..fileList[i])}!@#&                                end!@#&                                createFileMassiv(path..\"/\"..fileList[i],whatToFind)!@#&                        else!@#&                                if poiskSovpadeniya(fileList[i]) then!@#&                                        searchMassiv[#searchMassiv+1] = {[\"path\"]=path,[\"name\"]=fileList[i],[\"isDir\"]=false,[\"fileSize\"]=getFileSize(path..\"/\"..fileList[i]),[\"fileType\"]=getFileType(path..\"/\"..fileList[i]),[\"fileFormat\"]=getFileFormat(path..\"/\"..fileList[i])}!@#&                                end!@#&                        end!@#&                end!@#&        end!@#&        createFileMassiv(path,whatToFind)!@#&        return searchMassiv!@#& !@#&end!@#& !@#&--       &6, &c, &a  ..!@#&local colorCodes = {!@#&        {[\"code\"] = \"&0\", [\"color\"] = 1},!@#&        {[\"code\"] = \"&1\", [\"color\"] = 2},!@#&        {[\"code\"] = \"&2\", [\"color\"] = 4},!@#&        {[\"code\"] = \"&3\", [\"color\"] = 8},!@#&        {[\"code\"] = \"&4\", [\"color\"] = 16},!@#&        {[\"code\"] = \"&5\", [\"color\"] = 32},!@#&        {[\"code\"] = \"&6\", [\"color\"] = 64},!@#&        {[\"code\"] = \"&7\", [\"color\"] = 128},!@#&        {[\"code\"] = \"&8\", [\"color\"] = 256},!@#&        {[\"code\"] = \"&9\", [\"color\"] = 512},!@#&        {[\"code\"] = \"&a\", [\"color\"] = 1024},!@#&        {[\"code\"] = \"&b\", [\"color\"] = 2048},!@#&        {[\"code\"] = \"&c\", [\"color\"] = 4096},!@#&        {[\"code\"] = \"&d\", [\"color\"] = 8192},!@#&        {[\"code\"] = \"&e\", [\"color\"] = 16384},!@#&        {[\"code\"] = \"&f\", [\"color\"] = 32768},!@#&}!@#& !@#&function foramattedText(text)!@#&        local color = colors.white!@#&        term.setTextColor(color)!@#&        local sText = #text!@#&        local searchFrom = 1!@#& !@#&        local exit = false!@#&        while true do!@#&                if exit then break end!@#&                local founded = false!@#&                local s,e = string.find(text,\"&\",searchFrom)!@#&                if s then!@#&                        local code = string.sub(text,s,s+1)!@#&                        for i=1,16 do!@#&                                if code == colorCodes[i][\"code\"] then!@#& !@#&                                        local cyka = string.sub(text,searchFrom,s-1)!@#&                                        term.write(cyka)!@#& !@#&                                        color = colorCodes[i][\"color\"]!@#&                                        term.setTextColor(color)!@#& !@#&                                        founded = true!@#&                                        searchFrom = searchFrom + #cyka + 2!@#&                                        break!@#&                                end!@#&                        end!@#&                end!@#&               !@#&                if not founded then!@#&                        term.write(string.sub(text,searchFrom,-1))!@#&                        exit = true!@#&                end!@#&        end!@#&end!@#& !@#&---------------------------------------------------------------------------------------------------------------!@#& !@#&function error(text1)!@#&       !@#&        local title = \"Error\"!@#&        local limit = xSize - 16 - 11!@#&        local sizeOfText1 = #text1!@#& !@#&        local parsedErr = {}!@#&        for i=1,(math.ceil(sizeOfText1/limit)) do!@#&                parsedErr[#parsedErr+1] = string.sub(text1,i*limit+1-limit,i*limit)!@#&        end!@#& !@#&        local theLongestElement = #title!@#&        for i=1,#parsedErr do!@#&                local size = #parsedErr[i]!@#&                if size > theLongestElement then theLongestElement = size end!@#&        end!@#&       !@#&        local xWindowSize = 9 + theLongestElement + 2!@#&        local yWindowSize = 2 + 1 + 1 + #parsedErr + 3!@#&        local xStart = math.floor(xSize/2-xWindowSize/2)!@#&        local yStart = math.floor(ySize/2-yWindowSize/2)!@#&       !@#&        --  !@#&        emptyWindow(xStart,yStart,xWindowSize,yWindowSize,\" \")!@#& !@#&        --DRAW ICON!@#&        paintutils.drawPixel(xStart+4,yStart+2,colors.red)!@#&        paintutils.drawPixel(xStart+3,yStart+3,colors.red)!@#&        paintutils.drawPixel(xStart+4,yStart+3,colors.red)!@#&        paintutils.drawPixel(xStart+5,yStart+3,colors.red)!@#&        paintutils.drawPixel(xStart+2,yStart+4,colors.red)!@#&        paintutils.drawPixel(xStart+3,yStart+4,colors.red)!@#&        paintutils.drawPixel(xStart+4,yStart+4,colors.red)!@#&        paintutils.drawPixel(xStart+5,yStart+4,colors.red)!@#&       !@#&        paintutils.drawPixel(xStart+6,yStart+4,colors.red)!@#&        colorText(xStart+4,yStart+3,\"!\",colors.white)!@#&       !@#&        --ERROR TEXT!@#&        term.setBackgroundColor(colors.white)!@#& !@#&        colorText(xStart+9,yStart+2,title,colors.gray)!@#& !@#&        for i=1,#parsedErr do!@#&                colorText(xStart+9,yStart+3+i,parsedErr[i],colors.lightGray)!@#&        end!@#& !@#&        --BUTTON!@#&        local function drawButton(color,color2)!@#&                for x=(xStart+xWindowSize-8),(xStart+xWindowSize-3) do!@#&                        paintutils.drawPixel(x,yStart+yWindowSize-2,color)!@#&                end!@#&                colorText(xStart+xWindowSize-6,yStart+yWindowSize-2,\"OK\",color2)!@#&        end!@#&        drawButton(colors.lightBlue,colors.black)!@#&       !@#&        while true do!@#&                local event,side,x,y = os.pullEvent()!@#&                if event == \"mouse_click\" then!@#&                        if x>=xStart+xWindowSize-8 and x<=xStart+xWindowSize-3 and y == yStart+yWindowSize-2 then!@#&                                drawButton(colors.blue,colors.white)!@#&                                sleep(0.2)!@#&                                break!@#&                        end!@#&                elseif event == \"key\" then!@#&                        if side == 28 then!@#&                                drawButton(colors.blue,colors.white)!@#&                                sleep(0.2)!@#&                                break!@#&                        end!@#&                end!@#&        end!@#&end!@#& !@#&---------------------------------------------------------------------------------------------------------------!@#& !@#&function attention(text1,text2)!@#& !@#&        local sizeOfText1 = #text1!@#&        local sizeOfText2 = #text2!@#& !@#&        local theLongestElement = 0!@#&        for i=1,sizeOfText1 do!@#&                if #text1[i] > theLongestElement then theLongestElement = #text1[i] end!@#&        end!@#&        for i=1,sizeOfText2 do!@#&                if #text2[i] > theLongestElement then theLongestElement = #text2[i] end!@#&        end!@#& !@#&        local xWindowSize = 9 + theLongestElement + 2!@#&        local yWindowSize = 2 + sizeOfText1 + 1 + sizeOfText2 + 3!@#&        local xStart = math.floor(xSize/2-xWindowSize/2)!@#&        local yStart = math.floor(ySize/2-yWindowSize/2)!@#&       !@#&        --  !@#&        emptyWindow(xStart,yStart,xWindowSize,yWindowSize,\" \")!@#& !@#&        --DRAW ICON!@#&        paintutils.drawPixel(xStart+4,yStart+2,colors.yellow)!@#&        paintutils.drawPixel(xStart+3,yStart+3,colors.yellow)!@#&        paintutils.drawPixel(xStart+4,yStart+3,colors.yellow)!@#&        paintutils.drawPixel(xStart+5,yStart+3,colors.yellow)!@#&        paintutils.drawPixel(xStart+2,yStart+4,colors.yellow)!@#&        paintutils.drawPixel(xStart+3,yStart+4,colors.yellow)!@#&        paintutils.drawPixel(xStart+4,yStart+4,colors.yellow)!@#&        paintutils.drawPixel(xStart+5,yStart+4,colors.yellow)!@#&        paintutils.drawPixel(xStart+6,yStart+4,colors.yellow)!@#&        colorText(xStart+4,yStart+3,\"!\",colors.white)!@#&       !@#&        --ERROR TEXT!@#&        term.setBackgroundColor(colors.white)!@#&        for i=1,sizeOfText1 do!@#&                colorText(xStart+9,yStart+1+i,text1[i],colors.gray)!@#&        end!@#&        for i=1,sizeOfText2 do!@#&                colorText(xStart+9,yStart+3+i,text2[i],colors.lightGray)!@#&        end!@#& !@#&        --BUTTON!@#&        local function drawButton(color,color2)!@#&                for x=(xStart+xWindowSize-8),(xStart+xWindowSize-3) do!@#&                        paintutils.drawPixel(x,yStart+yWindowSize-2,color)!@#&                end!@#&                colorText(xStart+xWindowSize-6,yStart+yWindowSize-2,\"OK\",color2)!@#&        end!@#&        drawButton(colors.lightBlue,colors.black)!@#&       !@#&        while true do!@#&                local event,side,x,y = os.pullEvent()!@#&                if event == \"mouse_click\" then!@#&                        if x>=xStart+xWindowSize-8 and x<=xStart+xWindowSize-3 and y == yStart+yWindowSize-2 then!@#&                                drawButton(colors.blue,colors.white)!@#&                                sleep(0.2)!@#&                                break!@#&                        end!@#&                elseif event == \"key\" then!@#&                        if side == 28 then!@#&                                drawButton(colors.blue,colors.white)!@#&                                sleep(0.2)!@#&                                break!@#&                        end!@#&                end!@#&        end!@#&end!@#& !@#&---------------------------------------------------------------------------------------------------------------!@#& !@#&function input(...)!@#&       !@#&        local xStart = arg[1]!@#&        local yStart = arg[2]!@#&        local title = arg[3]!@#&        local sizeOfInputRow = arg[4]!@#& !@#&        local sizeOfText1 = #arg-4!@#& !@#&        local Inputs = {}!@#& !@#&        local allowToPressOk = true!@#& !@#&        local inputCounter = 1!@#& !@#&        local theLongestElement = 0!@#&        for i=1,sizeOfText1 do!@#&                if #arg[i+4][1] > theLongestElement then theLongestElement = #arg[i+4][1] end!@#&        end!@#& !@#&        local xWindowSize = 2 + theLongestElement + 1 + sizeOfInputRow + 2!@#&        local yWindowSize = 2 + sizeOfText1 * 2 + 1 + 1!@#& !@#&        xStart, yStart = correctStartCoords(xStart,yStart,xWindowSize,yWindowSize)!@#& !@#&        --    , !@#&        for i=1,sizeOfText1 do!@#&                Inputs[i]=arg[i+4][2]!@#&        end!@#& !@#&        -- !@#&        local Objects = {}!@#&        local function newObj(class,name,x1,y1,width,height)!@#&                Objects[class] = Objects[class] or {}!@#&                Objects[class][name] = {}!@#&                Objects[class][name][\"x1\"]=x1!@#&                Objects[class][name][\"y1\"]=y1!@#&                Objects[class][name][\"x2\"]=x1+width-1!@#&                Objects[class][name][\"y2\"]=y1+height-1!@#&        end!@#& !@#&        --  !@#&        emptyWindow(xStart,yStart,xWindowSize,yWindowSize,title)!@#& !@#&        --BUTTON!@#&        local function drawButton(color,color2)!@#&                for x=(xStart+xWindowSize-8),(xStart+xWindowSize-3) do!@#&                        paintutils.drawPixel(x,yStart+yWindowSize-2,color)!@#&                end!@#&                colorText(xStart+xWindowSize-6,yStart+yWindowSize-2,\"OK\",color2)!@#&        end!@#&       !@#&        local function drawInputs()!@#&                for i=1,sizeOfText1 do!@#&                        local xPosOfInput = xStart+xWindowSize - 2 - sizeOfInputRow!@#&                        local yPosOfInput = yStart+i*2!@#& !@#&                        local inputArgument = arg[i+4]!@#& !@#&                        term.setBackgroundColor(colors.white)!@#&                        if inputCounter == i then!@#&                                colorText(xStart+2,yPosOfInput,inputArgument[1],colors.gray)!@#&                        else!@#&                                colorText(xStart+2,yPosOfInput,inputArgument[1],colors.lightGray)!@#&                        end!@#& !@#&                        square(xPosOfInput,yPosOfInput,sizeOfInputRow,1,colors.lightGray)!@#&                        newObj(\"inputs\",i,xPosOfInput,yPosOfInput,sizeOfInputRow,1)!@#& !@#&                        if Inputs[i] ~= nil then!@#&                                if inputArgument[3] == nil then!@#&                                        colorText(xPosOfInput,yPosOfInput,stringLimit(\"start\",Inputs[i],sizeOfInputRow),colors.black)!@#&                                else!@#&                                        colorText(xPosOfInput,yPosOfInput,stringLimit(\"start\",string.rep(\"*\",#Inputs[i]),sizeOfInputRow),colors.black)!@#&                                end!@#&                        end!@#&                       !@#&                        if inputCounter > sizeOfText1 then allowToPressOk = true end!@#&                end!@#& !@#&                if allowToPressOk then!@#&                        drawButton(colors.lightBlue,colors.black)!@#&                else!@#&                        drawButton(colors.lightGray,colors.black)!@#&                end!@#&        end!@#& !@#&        drawInputs()!@#&       !@#&        local currentInput = \"\"!@#& !@#&        while true do!@#&                if Inputs[inputCounter] ~= nil then currentInput = Inputs[inputCounter] end!@#& !@#&                term.setCursorBlink(false)!@#&                drawInputs(inputCounter)!@#&                term.setCursorBlink(true)!@#& !@#&                if #currentInput < sizeOfInputRow and inputCounter <= sizeOfText1 then!@#&                        term.setCursorPos(xStart+xWindowSize-2-sizeOfInputRow+#currentInput,yStart+inputCounter*2)!@#&                elseif #currentInput >= sizeOfInputRow and inputCounter <= sizeOfText1 then!@#&                        term.setCursorPos(xStart+xWindowSize-3,yStart+inputCounter*2)!@#&                else!@#&                        term.setCursorBlink(false)!@#&                end!@#& !@#&                local event,side,x,y = os.pullEvent()!@#&                if event == \"key\" then!@#&                        --!@#&                        if side == 28 then!@#&                                if currentInput ~= \"\" then!@#&                                        currentInput = \"\"!@#&                                else!@#&                                        Inputs[inputCounter] = currentInput    !@#&                                end!@#& !@#&                                if inputCounter < sizeOfText1 then!@#&                                        inputCounter = inputCounter + 1!@#&                                else!@#&                                        term.setCursorBlink(false)!@#&                                        drawButton(colors.blue,colors.white)!@#&                                        sleep(0.2)!@#&                                        return Inputs!@#&                                end!@#&                        --!@#&                        elseif side == 14 then!@#&                                currentInput = string.sub(currentInput,1,-2)!@#&                                Inputs[inputCounter] = currentInput!@#&                        -- -!@#&                        elseif side == 200 then!@#&                                inputCounter = inputCounter - 1!@#&                                if inputCounter < 1 then inputCounter = 1 end!@#&                        elseif side == 208 then!@#&                                inputCounter = inputCounter + 1!@#&                                if inputCounter > #Inputs then inputCounter = #Inputs end!@#&                        end!@#&                elseif event == \"mouse_click\" then!@#&                        term.setCursorBlink(false)!@#&                        if x>=xStart+xWindowSize-8 and x<=xStart+xWindowSize-3 and y == yStart+yWindowSize-2 and allowToPressOk == true then!@#&                                drawButton(colors.blue,colors.white)!@#&                                sleep(0.2)!@#&                                return Inputs!@#&                        end!@#&                        for key,val in pairs(Objects[\"inputs\"]) do!@#&                                if x>=Objects[\"inputs\"][key][\"x1\"] and x<=Objects[\"inputs\"][key][\"x2\"] and y==Objects[\"inputs\"][key][\"y1\"] then!@#&                                        inputCounter = key!@#&                                        break!@#&                                end!@#&                        end!@#&                elseif event == \"char\" then!@#&                        currentInput = currentInput..side!@#&                        Inputs[inputCounter] = currentInput!@#&                elseif event == \"paste\" then!@#&                        currentInput = currentInput..side!@#&                        Inputs[inputCounter] = currentInput!@#&                end!@#&        end!@#&end!@#& !@#&---------------------------------------------------------------------------------------------------------------------!@#& !@#&function tv(speed)!@#&        term.setBackgroundColor(colors.black)!@#&        for i=1,centerY do!@#&                term.setCursorPos(1,i)!@#&                term.clearLine()!@#&                term.setCursorPos(1,ySize-i+1)!@#&                term.clearLine()!@#&                sleep(speed)!@#&        end!@#&        for i=1,centerX do!@#&                paintutils.drawPixel(i,centerY+1,colors.black)!@#&                paintutils.drawPixel(xSize-i+1,centerY+1,colors.black)!@#&                sleep(speed)!@#&        end!@#&        sleep(0.2)!@#&        clearScreen(colors.black)!@#&        term.setTextColor(colors.white)!@#&        term.setCursorPos(1,1)!@#&end!@#& !@#&---------------------------------------------------------------------------------------------------------------------!@#& !@#&function select(...)!@#& !@#&        -- !@#&        local Objects = {}!@#&        local function newObj(class,name,x1,y1,width,height)!@#&                --if not Objects[class] then Objects[class] = {} end!@#&                Objects[class] = Objects[class] or {}!@#&                Objects[class][name] = {}!@#&                Objects[class][name][\"x1\"]=x1!@#&                Objects[class][name][\"y1\"]=y1!@#&                Objects[class][name][\"x2\"]=x1+width-1!@#&                Objects[class][name][\"y2\"]=y1+height-1!@#&        end!@#& !@#&        local function drawButton(x,y,name,textColor,backColor)!@#&                local sizeOfButton = 2+#name+2!@#&                square(x,y,sizeOfButton,1,backColor)!@#&                colorText(x+2,y,name,textColor)!@#&                newObj(\"buttons\",name,x,y,sizeOfButton,1)!@#&        end!@#& !@#&        local text1 = arg[1]!@#&        local text2 = arg[2]!@#& !@#&        local sizeOfText1 = #text1!@#&        local sizeOfText2 = #text2!@#&        local hereIsOnlyOneElement = false!@#&        if sizeOfText1 == 0 then hereIsOnlyOneElement = true end!@#& !@#&        --     !@#&        local theLongestElement = 0!@#&        for i=1,sizeOfText1 do!@#&                if #text1[i] > theLongestElement then theLongestElement = #text1[i] end!@#&        end!@#&        for i=1,sizeOfText2 do!@#&                if #text2[i] > theLongestElement then theLongestElement = #text2[i] end!@#&        end!@#& !@#&        --      !@#&        local countOfButtons = #arg-2!@#&        local sizeOfAllButtons = 0!@#&        for i=1,countOfButtons do!@#&                sizeOfAllButtons = sizeOfAllButtons + 2+#arg[2+i][1]+2 + 1!@#&        end!@#&        sizeOfAllButtons = sizeOfAllButtons - 1!@#&        if sizeOfAllButtons>theLongestElement then theLongestElement=sizeOfAllButtons end!@#& !@#&        --     !@#&        local xWindowSize = 2 + theLongestElement + 2!@#&        local yWindowSize = nil!@#&        if hereIsOnlyOneElement then!@#&                yWindowSize = 2 + sizeOfText2 + 3!@#&        else!@#&                yWindowSize = 2 + sizeOfText1 + 1 + sizeOfText2 + 3!@#&        end!@#& !@#&        local xStart = math.floor(xSize/2-xWindowSize/2)!@#&        local yStart = math.floor(ySize/2-yWindowSize/2)!@#&       !@#&        --  !@#&        emptyWindow(xStart,yStart,xWindowSize,yWindowSize,\" \")!@#& !@#&        --TEXTS!@#&        term.setBackgroundColor(colors.white)!@#&        for i=1,sizeOfText1 do!@#&                colorText(xStart+2,yStart+1+i,text1[i],colors.gray)!@#&        end!@#&        for i=1,sizeOfText2 do!@#&                if hereIsOnlyOneElement then!@#&                        colorText(xStart+2,yStart+1+sizeOfText1+i,text2[i],colors.lightGray)!@#&                else!@#&                        colorText(xStart+2,yStart+2+sizeOfText1+i,text2[i],colors.lightGray)!@#&                end!@#&        end!@#& !@#&        local xStartForButtons = xStart+xWindowSize-1 - sizeOfAllButtons - 1!@#&        local yStartForButtons = yStart+yWindowSize-2!@#&        for i=1,countOfButtons do!@#&                local text = arg[2+i][1]!@#&                local textColor = tonumber(arg[2+i][3])!@#&                local backColor = tonumber(arg[2+i][2])!@#& !@#&                drawButton(xStartForButtons,yStartForButtons,text,textColor,backColor)!@#&                xStartForButtons = xStartForButtons + 2+#arg[2+i][1]+2+1!@#&        end!@#& !@#&        while true do!@#&                local event,side,x,y = os.pullEvent()!@#&                if event == \"mouse_click\" then!@#&                        for key,val in pairs(Objects[\"buttons\"]) do!@#&                                if x>=Objects[\"buttons\"][key][\"x1\"] and x<=Objects[\"buttons\"][key][\"x2\"] and y==Objects[\"buttons\"][key][\"y1\"] then!@#&                                        drawButton(Objects[\"buttons\"][key][\"x1\"],Objects[\"buttons\"][key][\"y1\"],key,colors.white,colors.blue)!@#&                                        sleep(0.2)!@#&                                        return key!@#&                                end!@#&                        end!@#&                end!@#&        end!@#&end!@#& !@#&---------------------------------------------------------------------------------------------------------------------!@#& !@#&function aboutFile(x,y,xWindowSize,path)!@#&        os.loadAPI(\"SpeedAPI/image\")!@#& !@#&        local name = fs.getName(path)!@#&        local limitOfText = xWindowSize - 2!@#&        local yWindowSize = 16!@#& !@#&        -- !@#&        local Objects = {}!@#&        local function newObj(class,name,x1,y1,width,height)!@#&                Objects[class] = Objects[class] or {}!@#&                Objects[class][name] = {}!@#&                Objects[class][name][\"x1\"]=x1!@#&                Objects[class][name][\"y1\"]=y1!@#&                Objects[class][name][\"x2\"]=x1+width-1!@#&                Objects[class][name][\"y2\"]=y1+height-1!@#&        end!@#& !@#&        -- !@#&        local function drawButton(x,y,name,textColor,backColor)!@#&                local sizeOfButton = 2+#name+2!@#&                square(x,y,sizeOfButton,1,backColor)!@#&                colorText(x+2,y,name,textColor)!@#&                newObj(\"buttons\",name,x,y,sizeOfButton,1)!@#&        end!@#& !@#&        --------------- , !@#& !@#&        local info = {}!@#& !@#&        info[\"fileFormat\"] = getFileFormat(path)!@#& !@#&        info[\"fileType\"] = getFileType(path)!@#& !@#&        info[\"fileSize\"] = math.ceil(getFileSize(path)/1024)..\"KB\"!@#& !@#&        info[\"readOnly\"] = tostring(fs.isReadOnly(path))!@#&        --------------- !@#& !@#&        --  GOVNA,      !@#&        if y+yWindowSize - 1  >= ySize then y = y - (y+yWindowSize - 1 - ySize) - 1 end!@#&        if x+xWindowSize - 1  >= xSize then x = x - (x+xWindowSize - 1 - xSize) - 1 end!@#& !@#&        -- !@#&        emptyWindow(x,y,xWindowSize,yWindowSize,\"Properties\")!@#& !@#&        --, !@#&        drawOSIcon(x+1,y+2,path,name,info[\"fileFormat\"])!@#& !@#&        --  !@#&        square(x,y+7,xWindowSize,1,colors.lightGray)!@#&        colorText(x+1,y+7,\"Info\",colors.white)!@#& !@#&        --   !@#&        term.setBackgroundColor(colors.white)!@#&        colorText(x+8,y+3,stringLimit(\"start\",name,xWindowSize-9),colors.gray)!@#&        colorText(x+8,y+4,info[\"fileSize\"],colors.lightGray)!@#& !@#&        --  !@#&        local textStart = y+9!@#&        colorText(x+1,textStart,\"Type:\",colors.gray)!@#&        usualText(x+1,textStart+1,\"Size:\",colors.gray)!@#&        usualText(x+1,textStart+2,\"Path:\",colors.gray)!@#&        usualText(x+1,textStart+3,\"Read only:\",colors.gray)!@#& !@#&        colorText(x+7,textStart,info[\"fileType\"],colors.lightGray)!@#&        usualText(x+7,textStart+1,info[\"fileSize\"])!@#&        usualText(x+7,textStart+2,stringLimit(\"start\",path,xWindowSize-8))!@#&        usualText(x+12,textStart+3,info[\"readOnly\"])!@#& !@#&        --!@#&        drawButton(x+xWindowSize-11,y+yWindowSize-2,\"Close\",colors.black,colors.lightBlue)!@#& !@#&        --   !@#&        while true do!@#&                local event,side,x,y = os.pullEvent()!@#&                if event == \"mouse_click\" then!@#&                        for key,val in pairs(Objects[\"buttons\"]) do!@#&                                if x>=Objects[\"buttons\"][key][\"x1\"] and x<=Objects[\"buttons\"][key][\"x2\"] and y==Objects[\"buttons\"][key][\"y1\"] then!@#&                                        drawButton(Objects[\"buttons\"][key][\"x1\"],Objects[\"buttons\"][key][\"y1\"],key,colors.white,colors.blue)!@#&                                        sleep(0.2)!@#&                                        return key!@#&                                end!@#&                        end!@#&                end!@#&        end!@#&end!@#& !@#&---------------------------------------------------------------------------------------------------------------------!@#& !@#&function progressBar(xStart,yStart,xWindowSize,title,text,speed)!@#&        --  !@#&        if xWindowSize < 4+#text then!@#&                xWindowSize = 4+#text!@#&        end!@#& !@#&        local yWindowSize = 6!@#&        local sizeOfProgressBar = xWindowSize - 4!@#& !@#&        -- !@#&        xStart,yStart = correctStartCoords(xStart,yStart,xWindowSize,yWindowSize)!@#& !@#&        -- !@#&        emptyWindow(xStart,yStart,xWindowSize,yWindowSize,title)!@#& !@#&        -- !@#&        term.setBackgroundColor(colors.white)!@#&        colorText(math.floor(xStart+(xWindowSize/2-#text/2)),yStart+2,text,colors.gray)!@#& !@#&        --  !@#&        local xProgressBarPos = xStart+2!@#&        local yProgressBarPos = yStart+4!@#&        drawProgressBar(xProgressBarPos,yProgressBarPos,sizeOfProgressBar,1,colors.lightBlue,colors.lightGray,0)!@#&        sleep(0)!@#&        for i=1,100,speed do!@#&                drawProgressBar(xProgressBarPos,yProgressBarPos,sizeOfProgressBar,1,colors.lightBlue,colors.lightGray,i)!@#&                sleep(0)!@#&        end!@#&        drawProgressBar(xProgressBarPos,yProgressBarPos,sizeOfProgressBar,1,colors.lightBlue,colors.lightGray,100)!@#&end!@#& !@#&---------------------------------------------------------------------------------------------------------------------!@#& !@#&function search(xStart,yStart,xWindowSize,limitOfElements,searchText)!@#& !@#&        os.loadAPI(\"SpeedAPI/image\")!@#& !@#&        local searchList = {}!@#& !@#&        local sizeOfOneElement = 5!@#&        local yWindowSize = 4 + sizeOfOneElement*limitOfElements!@#&        local sizeOfSearchBar = xWindowSize - #searchText - 3!@#&        local xStartOfSearchBar = xStart + 2 + #searchText!@#&        local yStartOfSearchBar = yStart + 1!@#&        local limitOfAllText = xWindowSize - 10!@#&        local xWindowEnd = xStart + xWindowSize - 1!@#&        local yWindowEnd = yStart + yWindowSize - 1!@#& !@#&        local fromElement = 1!@#&        local searchInput = \"\"!@#& !@#&        -- !@#&        local Objects = {}!@#&        local function newObj(class,name,x1,y1,width,height,fileType,fileSize,path,fileName,fileFormat)!@#&                Objects[class] = Objects[class] or {}!@#&                Objects[class][name] = {}!@#&                Objects[class][name][\"x1\"]=x1!@#&                Objects[class][name][\"y1\"]=y1!@#&                Objects[class][name][\"x2\"]=x1+width-1!@#&                Objects[class][name][\"y2\"]=y1+height-1!@#&                Objects[class][name][\"fileType\"]=fileType!@#&                Objects[class][name][\"fileSize\"]=fileSize!@#&                Objects[class][name][\"path\"]=path!@#&                Objects[class][name][\"fileName\"]=fileName!@#&                Objects[class][name][\"fileFormat\"]=fileFormat!@#&        end!@#& !@#&        local function drawConcretnoIcon(xStart,yStart,path,name,fileType,fileSize,backColor,fileFormat)!@#&                drawOSIcon(xStart,yStart,path,name,fileFormat)!@#&                term.setBackgroundColor(backColor)!@#&                colorText(xStart+8,yStart,stringLimit(\"end\",name,limitOfAllText),colors.gray)!@#&                colorText(xStart+8,yStart+1,stringLimit(\"start\",path,limitOfAllText),colors.lightGray)!@#&                colorText(xStart+8,yStart+2,stringLimit(\"start\",\"Type: \"..fileType,limitOfAllText),colors.lightGray)!@#&                colorText(xStart+8,yStart+3,stringLimit(\"start\",\"Size: \"..math.ceil(fileSize/1024)..\"KB\",limitOfAllText),colors.lightGray)!@#& !@#&                newObj(\"icon\",path..\"/\"..name,xStart,yStart,xWindowSize,4,fileType,fileSize,path,name,fileFormat)!@#&        end!@#& !@#&        local function drawSearches(fromElement)!@#&                -- !@#&                Objects = {}!@#&                newObj(\"icon\",\"cykaBlyad\",-5,-5,1,1,\"hehe\",5)          !@#& !@#&                --  !@#&                square(xStart,yStart+3,xWindowSize-1,yWindowSize-3,colors.white)!@#& !@#&                if #searchList == 0 then!@#&                        colorText(xStart+1,yStart+4,\"No mathes found.\",colors.lightGray)!@#&                else!@#&                        local iconCounter = 1!@#&                        for i=fromElement,#searchList do!@#&                                local yIconPos = yStart+4 + iconCounter*sizeOfOneElement - sizeOfOneElement!@#&                               !@#&                                drawConcretnoIcon(xStart+1,yIconPos,searchList[i][\"path\"],searchList[i][\"name\"],searchList[i][\"fileType\"],searchList[i][\"fileSize\"],colors.white,searchList[i][\"fileFormat\"])!@#& !@#&                                iconCounter = iconCounter + 1!@#&                                if iconCounter > limitOfElements then break end!@#&                        end!@#&                end!@#& !@#&                scrollBar(xWindowEnd,yStart+3,yWindowSize-3,#searchList,fromElement,colors.lightGray,colors.lightBlue)!@#&        end!@#& !@#&        local function textOnSearchBar()!@#&                term.setBackgroundColor(colors.white)!@#&                usualText(xStartOfSearchBar,yStartOfSearchBar,string.rep(\" \",sizeOfSearchBar))!@#&                colorText(xStartOfSearchBar,yStartOfSearchBar,stringLimit(\"start\",searchInput,sizeOfSearchBar),colors.black)!@#&        end!@#& !@#&        --!@#&        sampleWindow(xStart,yStart,xWindowSize,yWindowSize)!@#&        -- !@#&        square(xStart,yStart,xWindowSize,3,colors.blue)!@#&        colorText(xStart+1,yStart+1,searchText,colors.white)!@#&        square(xStartOfSearchBar,yStartOfSearchBar,sizeOfSearchBar,1,colors.white)!@#& !@#&        drawSearches(fromElement)!@#& !@#&        while true do!@#&                textOnSearchBar(searchInput)!@#&                if #searchInput > sizeOfSearchBar then!@#&                        term.setCursorPos(xStartOfSearchBar+sizeOfSearchBar-1,yStartOfSearchBar)!@#&                else!@#&                        term.setCursorPos(xStartOfSearchBar+#searchInput,yStartOfSearchBar)!@#&                end!@#& !@#&                term.setCursorBlink(true)!@#& !@#&                local event,side,x,y = os.pullEvent()!@#&                if event == \"mouse_scroll\" then!@#&                        term.setCursorBlink(false)!@#&                        if side == 1 then!@#&                                fromElement = fromElement + 1!@#&                                if fromElement > #searchList then!@#&                                        fromElement = #searchList!@#&                                else!@#&                                        drawSearches(fromElement)!@#&                                end!@#&                        else!@#&                                fromElement = fromElement - 1!@#&                                if fromElement < 1 then!@#&                                        fromElement = 1!@#&                                else!@#&                                        drawSearches(fromElement)!@#&                                end!@#&                        end!@#&                elseif event == \"mouse_click\" then!@#&                        for key,val in pairs(Objects[\"icon\"]) do!@#&                                if x>=Objects[\"icon\"][key][\"x1\"] and x<=Objects[\"icon\"][key][\"x2\"] and y>=Objects[\"icon\"][key][\"y1\"] and y<=Objects[\"icon\"][key][\"y2\"] then!@#&                                        square(Objects[\"icon\"][key][\"x1\"]-1,Objects[\"icon\"][key][\"y1\"],xWindowSize-1,4,colors.blue)!@#&                                        drawConcretnoIcon(Objects[\"icon\"][key][\"x1\"],Objects[\"icon\"][key][\"y1\"],Objects[\"icon\"][key][\"path\"],Objects[\"icon\"][key][\"fileName\"],Objects[\"icon\"][key][\"fileType\"],Objects[\"icon\"][key][\"fileSize\"],colors.blue,Objects[\"icon\"][key][\"fileFormat\"])!@#&                                        sleep(0.3)!@#&                                        term.setCursorBlink(false)!@#&                                        return string.sub(key,2,-1)!@#&                                end!@#&                        end!@#&                        term.setCursorBlink(false)!@#&                        return nil!@#& !@#&                elseif event == \"char\" then!@#&                        fromElement = 1!@#&                        searchInput = searchInput..side!@#&                        searchList = searchInAllFiles(\"/\",searchInput)!@#&                        drawSearches(fromElement)!@#&                elseif event == \"key\" then!@#&                        if side == 14 then!@#&                                fromElement = 1!@#&                                searchInput = string.sub(searchInput,1,-2)!@#&                                searchList = searchInAllFiles(\"/\",searchInput)!@#&                                drawSearches(fromElement)!@#&                        end!@#&                end!@#&        end!@#&end!@#& !@#&--print(\"You selected: \"..search(2,2,28,2,\"Search\"))!@#& !@#& !@#&---------------------------------------------------------------------------------------------------------------------!@#& !@#&function info(xStart,yStart,title,text)!@#&        local sizeOfText = #text!@#&        local xWindowSize = 4+sizeOfText!@#&        local yWindowSize = 4!@#&        local xStart,yStart = correctStartCoords(xStart,yStart,xWindowSize,yWindowSize)!@#& !@#&        emptyWindow(xStart,yStart,xWindowSize,yWindowSize,title)!@#& !@#&        term.setBackgroundColor(colors.white)!@#&        colorText(xStart+2,yStart+2,text,colors.gray)!@#&end!@#& !@#&---------------------------------------------------------------------------------------------------------------------!@#& !@#&--[[function fileManager(mode,workPath)!@#&        if workPath == nil then workPath = \"\" end!@#& !@#&        local xSize,ySize = term.getSize()!@#& !@#&        local managerX = xSize-3!@#&        local managerY = ySize-3!@#& !@#&        local xStart = 2!@#&        local yStart = 2!@#& !@#&        local main = window.create(term.native(),xStart,yStart,managerX+1,managerY+1)!@#&        term.redirect(main)!@#& !@#&        local function getFoldersList(workPath)!@#& !@#&        end!@#& !@#&        local function drawManager()!@#&                local currentPath = fs.getName(workPath)!@#&                emptyWindow(1,1,managerX,managerY,currentPath)!@#&                colorTextWithBack(1,1,\"x\",colors.black,colors.red);colorTextWithBack(2,1,\"-\",colors.black,colors.orange);colorTextWithBack(3,1,\"+\",colors.black,colors.lime)!@#&        end!@#& !@#&        local function clickedAtArea(x,y,sx,sy,ex,ey)!@#&        if (x >= sx) and (x <= ex) and (y >= sy) and (y <= ey) then return true end    !@#&        return false!@#&        end!@#& !@#&        drawManager()!@#& !@#&        term.redirect(term.native())!@#&end]]",},["encryptor.cfg"]="1=eafazf!@#&2=ezffqq!@#&3=ezfvfp!@#&4=eafooz!@#&5=eafaiz!@#&6=ezviio!@#&7=ezvzvi!@#&8=eqfooz!@#&9=eommqo!@#&0=ezivup!@#&a=ealajo!@#&b=eopxzj!@#&c=evmsyo!@#&d=ebiiql!@#&e=epovuz!@#&f=efivmt!@#&g=ezvito!@#&h=ezlfbh!@#&i=eaquat!@#&j=etirra!@#&k=emorta!@#&l=etampl!@#&m=enodus!@#&n=ezviri!@#&o=eponis!@#&p=enuihu!@#&q=exyupi!@#&r=ezdads!@#&s=eigurd!@#&t=eamati!@#&u=ebalro!@#&v=etshat!@#&w=ealsis!@#&x=ekizli!@#&y=eltrya!@#&z=espopu",["System"]={["OS"]={["monitor.cfg"]="false",["Icons"]={["zip.png"]=",70-70-70-70,70###!@#&|70 70 70 00|70###!@#&z07i07p07 70|70###!@#&|70_70_70_70|70###",["gif.png"]=" 30 3b 3b 3b 3b 30!@#& 30 0bP0bS0b 0b 30!@#& 30 fb fb fb fb 30!@#& 30.f0gf0if0ff0 30",["disk.png"]=" 07 07 07 07 07 07!@#& 07 5f 5f 5f 5f 07!@#& 08 f8 08 f8.e8.58!@#& 08d78i78s78k78 08",["nfp.png"]=" 30 3b 3b 3b 3b 30!@#& 30 0bP0bS0b 0b 30!@#& 30 fb fb fb fb 30!@#& 30.f0if0mf0gf0 30",["os.png"]=" 80 80 80 80 80 80!@#& 80 80O70S70 80 80!@#& 80 80 80 80 80 80!@#& 80v80380.80080 80",["default.png"]=" 0f 0f 0f 0f 0f 0f!@#& 0f>4f_0f 0f 0f 0f!@#& 0f 0f 0f 0f 0f 0f!@#& 0f 0f 0f 0f 0f 0f",["config.png"]="###-80-80-80-80###!@#&###-80-80-80-80###!@#&###-80-80-80-80###!@#&###.e0ce0fe0ge0###",["folder.png"]=" 04 04############!@#&-04-04-04-04-04-04!@#& 04 04 04 04 04 04!@#&ff4of4lf4df4ef4rf4",["image.png"]=" 30 3b 3b 3b 3b 30!@#& 30 0bP0bS0b 0b 30!@#& 30 fb fb fb fb 30!@#& 30.f0pf0nf0gf0 30",},["userdata.cfg"]="showSystemFolders=true!@#&showHiddenFiles=true!@#&hideFileFormat=true",},["Graph"]={["userdata.cfg"]="formula=x*math.sin(x)!@#&scale=2!@#&step=0.1",},["NewsTicker"]={["userdata.cfg"]="string=Suka!@#&scale=5!@#&delay=10!@#&speed=0.1",},["Photoshop"]={["pslogo.png"]="",},["MineCode"]={["logo.png"]="",["syntax_colors.cfg"]="",},["Clipboard.temp"]="{[1]={[\"Visible\"]=true,[\"Pixels\"]={[1]=\"4f               \",[2]=\"4f f             4 \",[3]=\"4f f 4> 0eblan4     4 \",[4]=\"4f f   4 f         4 \",[5]=\"4f f             4 \",[6]=\"4f f             4 \",[7]=\"4f f             4 \",[8]=\"4f f             4 \",[9]=\"4f f        5.e .f  4 \",[10]=\"4f               \",},[\"Index\"]=1,[\"Name\"]=\"Background\",[\"BackgroundColour\"]=-1,},}",["API"]={["zip"]="function archive(chto,vochto)!@#&        local Massiv2 = {}!@#&        local function FileList(path)!@#&                local Massiv = fs.list(path)!@#&                if #Massiv==0 then!@#&                        local Massiv2Id = #Massiv2 + 1!@#&                        Massiv2[Massiv2Id] = {}!@#&                        Massiv2[Massiv2Id][\"path\"] = path!@#&                        Massiv2[Massiv2Id][\"text\"] = \"@empty@empty\"!@#&                else!@#&                        for i=1,#Massiv do!@#&                                if fs.isDir(path..\"/\"..Massiv[i]) and Massiv[i] ~= \"/rom\" and Massiv[i] ~= \"rom\" then!@#&                                        FileList(path..\"/\"..Massiv[i])!@#&                                elseif not fs.isDir(path..\"/\"..Massiv[i]) and Massiv[i] ~= \"/rom\" and Massiv[i] ~= \"rom\" then!@#&                                        local Massiv2Id = #Massiv2 + 1!@#&                                        Massiv2[Massiv2Id] = {}!@#&                                        Massiv2[Massiv2Id][\"path\"] = path..\"/\"..Massiv[i]!@#&                                        local file = fs.open(path..\"/\"..Massiv[i],\"r\")!@#&                                        Massiv2[Massiv2Id][\"text\"] = file.readAll()!@#&                                        file.close()!@#&                                end!@#&                        end!@#&                end!@#&        end!@#&        FileList(chto)!@#&        file=fs.open(vochto..\".zip\",\"w\")!@#&        file.write(textutils.serialise(Massiv2))!@#&        file.close()!@#&        return Massiv2!@#&end!@#& !@#&function unarchive(chto,kuda)!@#&        local file = fs.open(chto,\"r\")!@#&        Massiv = textutils.unserialise(file.readAll())!@#&        file.close()!@#&        for i=1,#Massiv do!@#&                if Massiv[i][\"text\"] == \"@empty@empty\" then!@#&                        fs.makeDir(kuda..\"/\"..Massiv[i][\"path\"])!@#&                else!@#&                        local file = fs.open(kuda..\"/\"..Massiv[i][\"path\"],\"w\")!@#&                        file.write(Massiv[i][\"text\"])!@#&                        file.close()!@#&                end!@#&        end!@#&end",["cluster"]="--[[!@#&:!@#&        AC: x  y -  !@#&        RC: x  y -  !@#&]]--!@#&--monitors[j][i][id/xSize/ySize/xStart/xEnd/yStart/yEnd]!@#&----!@#&local CurrentMonitor = nil!@#&local Monitors       = nil!@#& !@#&local CursorPosX, CursorPosY = 1, 1!@#& !@#&local BGColor = colors.black!@#&local TextColor = colors.white!@#&local Scale = 1!@#& !@#&-- --!@#&function PointInRect(x, y, sx, sy, ex, ey)!@#&        if (x >= sx) and (x <= ex) and (y >= sy) and (y <= ey) then return true end!@#&       !@#&        return false!@#&end!@#& !@#&----!@#& !@#&--      !@#&function GetRelativeCursorPos(ax, ay)!@#&        local MonitorID = nil!@#&        local PosX  = nil!@#&        local PosY  = nil!@#&       !@#&        for j = 1, Monitors[\"monitorsCountInHeight\"], 1 do!@#&                for i = 1, Monitors[\"monitorsCountInWidth\"], 1 do!@#&                       !@#&                        if PointInRect(ax, ay, Monitors[j][i][\"xStart\"], Monitors[j][i][\"yStart\"], Monitors[j][i][\"xEnd\"], Monitors[j][i][\"yEnd\"]) then!@#&                                PosX = ax - Monitors[j][i][\"xStart\"] + 1!@#&                                PosY = ay - Monitors[j][i][\"yStart\"] + 1!@#&                                MonitorID = Monitors[j][i][\"id\"]!@#&                                return MonitorID, PosX, PosY, i, j!@#&                        end!@#&                end!@#&        end!@#&       !@#&        return nil!@#&end!@#& !@#&--      !@#&function GetAbsoluteCursorPos(MonitorID, rx, ry)!@#&        local PosX = nil!@#&        local PosY = nil!@#& !@#&        for j = 1, Monitors[\"monitorsCountInHeight\"], 1 do!@#&                for i = 1, Monitors[\"monitorsCountInWidth\"], 1 do!@#&                        if Monitors[j][i][\"id\"] == MonitorID then!@#&                                PosX = Monitors[j][i][\"xStart\"] + rx - 1!@#&                                PosY = Monitors[j][i][\"yStart\"] + ry - 1!@#&                                return PosX, PosY, i, j!@#&                        end!@#&                end!@#&        end!@#&       !@#&        return nil!@#&end!@#& !@#&-- API!@#&function Init()!@#&        if not fs.exists(\"System/ClusterCalibration.cfg\") then error(\"Calibration config not found.\") end!@#&        file = fs.open(\"System/ClusterCalibration.cfg\", \"r\")!@#&        local _data = file.readAll(monitors)!@#&        file.close()!@#&       !@#&        Monitors = textutils.unserialise(_data)!@#&        SetMonitorParameters(nil, nil, Monitors[\"monitorsScale\"])!@#&        SetCursorPos(CursorPosX, CursorPosY)!@#&end!@#& !@#&--  !@#&function SetCursorPos(ax, ay)!@#&        CursorPosX, CursorPosY = ax, ay!@#&       !@#&        local _m, _rx, _ry = GetRelativeCursorPos(CursorPosX, CursorPosY)!@#&        CurrentMonitor = peripheral.wrap(_m)!@#&        CurrentMonitor.setCursorPos(_rx, _ry)!@#&end!@#& !@#&-- !@#&function WriteText(str)!@#&        for s in string.gmatch(str, \".\") do!@#&                if CursorPosY > Monitors[\"totalMonitorSizeY\"] then!@#&                        break!@#&                elseif s == '\\n' then!@#&                        CursorPosX = 0!@#&                        CursorPosY = CursorPosY + 1!@#&                elseif CursorPosX + 1 > Monitors[\"totalMonitorSizeX\"] then!@#&                        CurrentMonitor.write(s)!@#&                        CursorPosX = 1!@#&                        CursorPosY = CursorPosY + 1!@#&                        SetCursorPos(CursorPosX, CursorPosY)!@#&                else!@#&                        CurrentMonitor.write(s)!@#&                        CursorPosX = CursorPosX + 1!@#&                        SetCursorPos(CursorPosX, CursorPosY)!@#&                end!@#&        end!@#&end!@#& !@#&-- \\ !@#&function SetMonitorParameters(backgroundcolor, textcolor, scale)!@#&        BGColor = backgroundcolor or BGColor!@#&        TextColor = textcolor or TextColor!@#&        Scale = scale or Scale!@#&       !@#&        for j = 1, Monitors[\"monitorsCountInHeight\"], 1 do!@#&                for i = 1, Monitors[\"monitorsCountInWidth\"], 1 do!@#&                        local _m = peripheral.wrap(Monitors[j][i][\"id\"])!@#&                        _m.setBackgroundColor(BGColor)!@#&                        _m.setTextColor(TextColor)!@#&                        _m.setTextScale(Scale)!@#&                end!@#&        end!@#&end!@#& !@#&--!@#&function ClearAll()!@#&        for j = 1, Monitors[\"monitorsCountInHeight\"], 1 do!@#&                for i = 1, Monitors[\"monitorsCountInWidth\"], 1 do!@#&                        local _m = peripheral.wrap(Monitors[j][i][\"id\"])!@#&                        _m.setBackgroundColor(BGColor)!@#&                        _m.setTextColor(TextColor)!@#&                        _m.clear()!@#&                end!@#&        end!@#&end!@#& !@#&Init()",["syntax"]="os.loadAPI(\"System/API/config\")!@#& !@#&local Colors = {!@#&        [\"text\"] = tonumber(config.read(\"System/MineCode/syntax_colors.cfg\",\"text\")),!@#&        [\"commands\"] = tonumber(config.read(\"System/MineCode/syntax_colors.cfg\",\"commands\")),!@#&        [\"api\"] = tonumber(config.read(\"System/MineCode/syntax_colors.cfg\",\"api\")),!@#&        [\"string\"] = tonumber(config.read(\"System/MineCode/syntax_colors.cfg\",\"string\")),!@#&        [\"comments\"] = tonumber(config.read(\"System/MineCode/syntax_colors.cfg\",\"comments\")),!@#&        [\"compares\"] = tonumber(config.read(\"System/MineCode/syntax_colors.cfg\",\"compares\")),!@#&        [\"loops\"] = tonumber(config.read(\"System/MineCode/syntax_colors.cfg\",\"basics\")),!@#&        [\"boolean\"] = tonumber(config.read(\"System/MineCode/syntax_colors.cfg\",\"boolean\")),!@#&        [\"number\"] = tonumber(config.read(\"System/MineCode/syntax_colors.cfg\",\"number\")),!@#&}!@#& !@#&local KeyWords = {!@#&        {[\"pattern\"]=\"for\", [\"color\"]=Colors[\"loops\"]},!@#&        {[\"pattern\"]=\"while\", [\"color\"]=Colors[\"loops\"]},!@#&        {[\"pattern\"]=\"true\", [\"color\"]=Colors[\"boolean\"]},!@#&        {[\"pattern\"]=\"false\", [\"color\"]=Colors[\"boolean\"]},!@#&        {[\"pattern\"]=\"if\", [\"color\"]=Colors[\"loops\"]},!@#&        {[\"pattern\"]=\"then\", [\"color\"]=Colors[\"loops\"]},!@#&        {[\"pattern\"]=\"else\", [\"color\"]=Colors[\"loops\"]},!@#&        {[\"pattern\"]=\"elseif\", [\"color\"]=Colors[\"loops\"]},!@#&        {[\"pattern\"]=\"do\", [\"color\"]=Colors[\"loops\"]},!@#&        {[\"pattern\"]=\"break\", [\"color\"]=colors.red},!@#&        {[\"pattern\"]=\"function\", [\"color\"]=Colors[\"loops\"]},!@#&        {[\"pattern\"]=\"and\", [\"color\"]=Colors[\"loops\"]},!@#&        {[\"pattern\"]=\"not\", [\"color\"]=Colors[\"loops\"]},!@#&        {[\"pattern\"]=\"or\", [\"color\"]=Colors[\"loops\"]},!@#&        {[\"pattern\"]=\"in\", [\"color\"]=Colors[\"loops\"]},!@#&        {[\"pattern\"]=\"until\", [\"color\"]=Colors[\"loops\"]},!@#&        {[\"pattern\"]=\"return\", [\"color\"]=Colors[\"loops\"]},!@#&        {[\"pattern\"]=\"repeat\", [\"color\"]=Colors[\"loops\"]},!@#&        {[\"pattern\"]=\"nil\", [\"color\"]=Colors[\"boolean\"]},!@#&        {[\"pattern\"]=\"local\", [\"color\"]=Colors[\"loops\"]},!@#&}!@#&       !@#&local Compares = {!@#&        \"=\",!@#&        \"==\",!@#&        \"~=\",!@#&        \">\",!@#&        \"<\",!@#&        \">=\",!@#&        \"<=\",!@#&        \"+\",!@#&        \"-\",!@#&        \"*\",!@#&        \"/\",!@#&        \"%^\",!@#&        \"%.%.\",!@#&        \"%#\",!@#&}!@#& !@#&local sKeyWords = #KeyWords!@#&local sCompares = #Compares!@#& !@#&--   !@#&local function findAndReplace(x,y,text,pattern,color,obrezatSleva,obrezatSprava,vichestIzStartaPoiska)!@#&        local findPos = 1!@#&        while true do!@#&                local s,e = string.find(text,pattern,findPos)!@#&                if s ~= nil and e ~= nil then!@#&                        term.setTextColor(color)!@#&                        term.setCursorPos(1-x+s+obrezatSleva,y)!@#&                        term.write(string.sub(text,s+obrezatSleva,e-obrezatSprava))!@#&                else!@#&                        break!@#&                end!@#&                findPos = e + 1 - vichestIzStartaPoiska!@#&        end!@#&end!@#& !@#&--   !@#&function highlight(x,y,text)!@#&        --    !@#&        term.setTextColor(Colors[\"text\"])!@#&        term.setCursorPos(x,y)!@#&        term.write(text)!@#& !@#&        --      .    !@#&        for i=1,sKeyWords do!@#&                findAndReplace(x,y,text,\" \"..KeyWords[i][\"pattern\"]..\" \",KeyWords[i][\"color\"],0,0,0)!@#&                findAndReplace(x,y,text,\" \"..KeyWords[i][\"pattern\"]..\"$\",KeyWords[i][\"color\"],0,0,0)!@#&                findAndReplace(x,y,text,\"^\"..KeyWords[i][\"pattern\"]..\" \",KeyWords[i][\"color\"],0,0,0)!@#&        end!@#& !@#&        -- !@#&        findAndReplace(x,y,text,\"[%a%d%_%-]*%(\",Colors[\"commands\"],0,1,0)!@#&        findAndReplace(x,y,text,\"%.(.*)%(\",Colors[\"commands\"],1,1,0)!@#& !@#&        --  !@#&        findAndReplace(x,y,text,\"os%.loadAPI%(\",Colors[\"api\"],0,1,0)   !@#& !@#&        -- END,    !@#&        findAndReplace(x,y,text,\"end$\",Colors[\"loops\"],0,0,0)  !@#& !@#&        --     =, ==, >=  ..!@#&        for i=1,sCompares do!@#&                findAndReplace(x,y,text,\" \"..Compares[i]..\" \",Colors[\"compares\"],0,0,0)!@#&                findAndReplace(x,y,text,\"(.)\"..Compares[i]..\"(.)\",Colors[\"compares\"],1,1,0)!@#&                findAndReplace(x,y,text,\"(.)\"..Compares[i],Colors[\"compares\"],1,0,0)!@#&                findAndReplace(x,y,text,Compares[i]..\"(.)\",Colors[\"compares\"],0,1,0)!@#&        end!@#& !@#&        -- !@#&        findAndReplace(x,y,text,\"[^%a%d](%d*)[^%a%d]\",Colors[\"number\"],1,1,1)!@#&        findAndReplace(x,y,text,\"[^%a%d](%d*)$\",Colors[\"number\"],1,0,0)!@#& !@#&        --    !@#&        findAndReplace(x,y,text,\"\\\".-[^\\\"\\\"]\\\"\",Colors[\"string\"],0,0,0)!@#& !@#&        --  !@#&        findAndReplace(x,y,text,\"%-%-.*\",Colors[\"comments\"],0,0,0)!@#& !@#&end!@#& !@#& !@#&------------------------------------------------------------------------------------------------------------------!@#& !@#& !@#&--[[term.setBackgroundColor(colors.white)!@#&term.setTextColor(colors.black)!@#&term.setCursorPos(1,1)!@#&term.clear()!@#& !@#&local strings = {!@#&        \"os.loadAPI(123)\",!@#&        \"term.setCursorPos(1,1)\",!@#&        \"while true do\",!@#&        \"  if x >= 12 then\",!@#&        \"    break\",!@#&        \"  end\",!@#&        \"end\",!@#&        \" \",!@#&        \"local function hehe(heh123, 123)\",!@#&        \"  print(heh123)\",!@#&        \"end\",!@#&        \" \",!@#&        \"print(\\\"Pruf Piru, chto ono ne laget\\\"..123..\\\"hehe\\\")\",!@#&        \"term.clear()\",!@#&        \"local input = cyka()\",!@#&        \" \",!@#&        \"--Comment, bitch!\",!@#&}!@#& !@#& !@#&local try = 1!@#&while true do!@#&        term.clear()!@#&        highlight(1,1,\"Popitka napisaniya: \"..try)!@#& !@#&        for i=1,#strings do!@#&                highlight(1,i+2,strings[i])!@#&        end!@#& !@#&        sleep(0.1)!@#&        try = try + 1!@#&end]]!@#& !@#& !@#&--[[print(\"Write something:\")!@#& !@#&local stro4ka = \"\"!@#&local CursorPosX = 1!@#&local CursorPosY = 3!@#&term.setCursorBlink(true)!@#&while true do!@#&        term.setCursorPos(CursorPosX,CursorPosY)!@#&        local event,side = os.pullEvent()!@#&        if event == \"char\" then!@#&                stro4ka = stro4ka..side!@#&                CursorPosX = CursorPosX + 1!@#&                highlight(1,CursorPosY,stro4ka)!@#&        elseif event == \"key\" then!@#&                if side == 28 then!@#&                        stro4ka = \"\"!@#&                        CursorPosX = 1!@#&                        CursorPosY = CursorPosY + 1!@#&                elseif side == 14 then!@#&                        if #stro4ka > 0 then!@#&                                highlight(1,CursorPosY,string.rep(\" \",#stro4ka))!@#&                                stro4ka = string.sub(stro4ka,1,-2)!@#&                                highlight(1,CursorPosY,stro4ka)!@#&                                CursorPosX = CursorPosX - 1!@#&                        end!@#&                end!@#&        end!@#&end!@#& !@#&os.pullEvent(\"key\")]]",["context"]="unction menu(...)!@#&        --   < 3      TABLE,      API!@#&        if #arg < 3 or type(arg[3]) ~= \"table\" then error(\"Usage: menu(number x,number y,table Element1,table Element2, table Element3...) \\nReturns: string Action \\n<Element> structure: {string Name[, boolean isElementHidden][,number colorOfText]}\") end!@#&       !@#&        --  !@#&        local xSize, ySize = term.getSize()!@#& !@#&        --        !@#&        local function text(x,y,text1,color)!@#&                term.setTextColor(color)!@#&                term.setCursorPos(x,y)!@#&                term.write(text1)!@#&        end!@#& !@#&        --    (   ,     )!@#&        local Objects = {}!@#&        local function newObj(name,isHidden,xStart,xEnd,y)!@#&                Objects[name]={}!@#&                Objects[name][\"isHidden\"] = isHidden!@#&                Objects[name][\"xStart\"] = xStart!@#&                Objects[name][\"xEnd\"] = xEnd!@#&                Objects[name][\"y\"] = y!@#&        end!@#&       !@#&        --    -   !@#&        local theLongestElement = #arg[3][1]!@#&        for i=3,#arg do!@#&                if arg[i] ~= \"-\" and theLongestElement < #arg[i][1] then!@#&                        theLongestElement = #arg[i][1]!@#&                end!@#&        end!@#& !@#&        --  !@#&        local xSizeOfMenu = theLongestElement + 4!@#&        local ySizeOfMenu = #arg-2!@#& !@#&        local xStartToDisplay = nil!@#&        local yStartToDisplay = nil!@#& !@#&        --   !@#&        local function square(x1,y1,width,height,color)!@#&                local string = string.rep(\" \",width)!@#&                term.setBackgroundColor(color)!@#&                for y=y1,(y1+height-1) do!@#&                        term.setCursorPos(x1,y)!@#&                        term.write(string)!@#&                end!@#&        end!@#& !@#&        --   !@#&        local function drawSeparator(x,y,size)!@#&                term.setTextColor(colors.lightGray)!@#&                term.setCursorPos(x,y)!@#&                term.write(string.rep(\"-\",size))!@#&        end!@#&       !@#&        --   !@#&        local function drawMenu(xMenu,yMenu)!@#& !@#&                --  ,      !@#&                if yMenu+ySizeOfMenu - 1  >= ySize then yMenu = yMenu - (yMenu+ySizeOfMenu - 1 - ySize) - 1 end!@#&                if xMenu+xSizeOfMenu - 1  >= xSize then xMenu = xMenu - (xMenu+xSizeOfMenu - 1 - xSize) - 1 end!@#& !@#&                --      !@#&                xStartToDisplay = xMenu + 2!@#&                yStartToDisplay = yMenu!@#& !@#&                --  !@#&                square(xMenu+1,yMenu+1,xSizeOfMenu,ySizeOfMenu,colors.gray)!@#& !@#&                --   !@#&                square(xMenu,yMenu,xSizeOfMenu,ySizeOfMenu,colors.white)!@#& !@#&                --    ,    !@#&                for i=3,#arg do!@#&                        --     , !@#&                        if arg[i] ~= \"-\" then!@#&                                --      !@#&                                local contextColor = colors.black!@#&                                -- _2 (/ )  _3 (  )     , !@#&                                if arg[i][2] == nil and arg[i][3] == nil then!@#&                                        contextColor = colors.black!@#&                                --  2 = FALSE   3  , !@#&                                elseif arg[i][2] == false and arg[i][3] == nil then!@#&                                        contextColor = colors.black!@#&                                --  2 = FALSE   3 , !@#&                                elseif arg[i][2] == false and arg[i][3] ~= nil then!@#&                                        contextColor = arg[i][3]!@#&                                --  2 = TRUE,   !@#&                                elseif arg[i][2] == true then!@#&                                        contextColor = colors.lightGray!@#&                                end!@#& !@#&                                --     !@#&                                text(xStartToDisplay,yStartToDisplay+i-3,arg[i][1],contextColor)!@#&                                --    ,      !@#&                                newObj(arg[i][1],arg[i][2],xMenu,xMenu+xSizeOfMenu-1,yStartToDisplay+i-3)!@#& !@#&                        --  - , !@#&                        else!@#&                                drawSeparator(xMenu,yStartToDisplay+i-3,xSizeOfMenu)!@#&                        end!@#&                end!@#&        end!@#&       !@#&        -- ,  !@#&        drawMenu(arg[1],arg[2])!@#& !@#&        --  !@#&        local event,side,xClick,yClick = os.pullEvent()!@#&        if event == \"monitor_touch\" then side = 1 end!@#&        if event == \"mouse_click\" or event == \"monitor_touch\" then!@#&                --          ( = , KEY = VAL)!@#&                for key,val in pairs(Objects) do!@#&                        --    ,      , !@#&                        if xClick >= Objects[key][\"xStart\"] and xClick <= Objects[key][\"xEnd\"] and yClick == Objects[key][\"y\"] and Objects[key][\"isHidden\"] == false or xClick >= Objects[key][\"xStart\"] and xClick <= Objects[key][\"xEnd\"] and yClick == Objects[key][\"y\"] and Objects[key][\"isHidden\"] == nil then!@#&                                --    !@#&                                for i=Objects[key][\"xStart\"],Objects[key][\"xEnd\"] do!@#&                                        paintutils.drawPixel(i,Objects[key][\"y\"],colors.blue)!@#&                                end!@#&                                --   ,   !@#&                                text(xStartToDisplay,Objects[key][\"y\"],key,colors.white)!@#&                                --  !@#&                                sleep(0.3)!@#&                                --  KEY (     )    !@#&                                return key!@#&                        end!@#&                        --       ,    NIL!@#&                end!@#&        end!@#&end",["xml"]="function parseargs(s)!@#&  local arg = {}!@#&  string.gsub(s, \"([%-%w]+)=([\\\"'])(.-)%2\", function (w, _, a)!@#&    arg[w] = a!@#&  end)!@#&  return arg!@#&end!@#&   !@#&function collect(s)!@#&  local stack = {}!@#&  local top = {}!@#&  table.insert(stack, top)!@#&  local ni,c,label,xarg, empty!@#&  local i, j = 1, 1!@#&  while true do!@#&    ni,j,c,label,xarg, empty = string.find(s, \"<(%/?)([%w:]+)(.-)(%/?)>\", i)!@#&    if not ni then break end!@#&    local text = string.sub(s, i, ni-1)!@#&    if not string.find(text, \"^%s*$\") then!@#&      table.insert(top, text)!@#&    end!@#&    if empty == \"/\" then  -- empty element tag!@#&      table.insert(top, {label=label, xarg=parseargs(xarg), empty=1})!@#&    elseif c == \"\" then   -- start tag!@#&      top = {label=label, xarg=parseargs(xarg)}!@#&      table.insert(stack, top)   -- new level!@#&    else  -- end tag!@#&      local toclose = table.remove(stack)  -- remove top!@#&      top = stack[#stack]!@#&      if #stack < 1 then!@#&        error(\"nothing to close with \"..label)!@#&      end!@#&      if toclose.label ~= label then!@#&        error(\"trying to close \"..toclose.label..\" with \"..label)!@#&      end!@#&      table.insert(top, toclose)!@#&    end!@#&    i = j+1!@#&  end!@#&  local text = string.sub(s, i)!@#&  if not string.find(text, \"^%s*$\") then!@#&    table.insert(stack[#stack], text)!@#&  end!@#&  if #stack > 1 then!@#&    error(\"unclosed \"..stack[#stack].label)!@#&  end!@#&  return stack[1]!@#&end",["filemanager"]="os.loadAPI(\"System/API/windows\")!@#&os.loadAPI(\"System/API/image\")!@#&os.loadAPI(\"System/API/context\")!@#& !@#&local mode = \"open\"!@#&local workPath = \"\"!@#&local workPathHistory = {}!@#&local input = \"\"!@#& !@#&local xSize,ySize = term.getSize()!@#& !@#&local managerX = xSize-3!@#&local managerY = ySize-1!@#& !@#&local xStart = 2!@#&local yStart = 1!@#&local xEnd = xStart+managerX-1!@#&local yEnd = yStart+managerY-1!@#& !@#&local leftBarSize = 14!@#&local leftBarLimit = leftBarSize-3!@#& !@#&local sizeOfInputBar = 26!@#&local startOfInputBar = xStart+3!@#&local endOfInputBar = startOfInputBar+sizeOfInputBar-1!@#&local sizeOfSearchBar = managerX - sizeOfInputBar - 3 - 8 - 1!@#&local startOfSearchBar = xEnd-sizeOfSearchBar!@#& !@#&local xStartOfDrawingApps = xStart+leftBarSize+1!@#&local yStartOfDrawingApps = yStart+4!@#&local xSizeOfAppsArea = managerX-leftBarSize!@#&local ySizeOfAppsArea = managerY-3!@#&local xAppSize = 6!@#&local yAppSize = 6!@#&local xSpaceBetweenApps = 2!@#&local ySpaceBetweenApps = 1!@#&local countOfAppsByX = math.floor(xSizeOfAppsArea/(xAppSize+xSpaceBetweenApps))!@#&local countOfAppsByY = math.floor(ySizeOfAppsArea/(yAppSize+ySpaceBetweenApps))!@#&local countOfDesktops = 1!@#& !@#&local currentDesktop = 1!@#& !@#&local hideFileFormat = true!@#& !@#&--local main = window.create(term.native(),xStart,yStart,managerX+1,managerY+1)!@#& !@#&----------------------------------------!@#& !@#&local function clickedAtArea(x,y,sx,sy,ex,ey)!@#&    if (x >= sx) and (x <= ex) and (y >= sy) and (y <= ey) then return true end    !@#&    return false!@#&end!@#& !@#&local Favourites = {!@#&        [\"Root\"] = \"\",!@#&        [\"Applications\"] = \"/Applications\",!@#&        [\"Documents\"] = \"/Documents\",!@#&        [\"Images\"] = \"/Images\",!@#&        [\"rom\"] = \"/rom\",!@#&}!@#& !@#&local function saveConfig()!@#&        local path = \"System/Filemanager/Favourites.cfg\"!@#&        local f = fs.open(path,\"w\")!@#&        f.write(textutils.serialise(Favourites))!@#&        f.close()!@#&end!@#& !@#&local function loadConfig()!@#&        local path = \"System/Filemanager/Favourites.cfg\"!@#&        if fs.exists(path) then!@#&                local f = fs.open(path,\"r\")!@#&                local text = f.readAll()!@#&                Favourites = textutils.unserialise(text)!@#&                f.close()!@#&        end!@#&end!@#& !@#&local objects = {}!@#&local function newObj(class,name,key,value)!@#&        objects[class] = objects[class] or {}!@#&        objects[class][name] = objects[class][name] or {}!@#&        objects[class][name][key] = value!@#&end!@#& !@#&function drawSeparator(x1,y1,width,height,textColor,backColor,symbol)!@#&        local string = string.rep(symbol,width)!@#&        term.setBackgroundColor(backColor)!@#&        term.setTextColor(textColor)!@#&        for y=y1,(y1+height-1) do!@#&                windows.usualText(x1,y,string)!@#&        end!@#&end!@#& !@#&local function getFoldersList(workPath)!@#& !@#&end!@#& !@#&local function drawLeftBar()!@#&        objects[\"Favourites\"] = {}!@#& !@#&        windows.square(xStart,yStart+3,leftBarSize,yEnd-3,colors.white)!@#& !@#&        local y = yStart+4!@#&        local Peripherals = peripheral.getNames()!@#&        drawSeparator(xStart+leftBarSize-1,y-1,1,ySizeOfAppsArea,colors.lightGray,colors.white,\"|\")!@#& !@#&        local sFavourites = 0!@#&        for key,val in pairs(Favourites) do!@#&                sFavourites = sFavourites + 1!@#&        end!@#& !@#&        if sFavourites > 0 then!@#&                windows.colorText(xStart+1,y,\"Places\",colors.gray)!@#&                y = y + 1!@#& !@#&                for key,val in pairs(Favourites) do!@#&                        newObj(\"Favourites\",key,\"x1\",xStart)!@#&                        newObj(\"Favourites\",key,\"x2\",xStart+leftBarSize-1)!@#&                        newObj(\"Favourites\",key,\"y1\",y)!@#&                        newObj(\"Favourites\",key,\"path\",Favourites[key])!@#& !@#&                        if workPath == Favourites[key] then!@#&                                windows.square(xStart,y,leftBarSize-1,1,colors.blue)!@#&                                windows.colorText(xStart+2,y,windows.stringLimit(\"end\",key,leftBarLimit),colors.white)!@#&                        else!@#&                                windows.square(xStart,y,leftBarSize-1,1,colors.white)!@#&                                windows.colorText(xStart+2,y,windows.stringLimit(\"end\",key,leftBarLimit),colors.lightGray)!@#&                        end!@#& !@#&                        y = y + 1!@#&                end!@#& !@#&                y = y + 1!@#&        end!@#& !@#&        term.setBackgroundColor(colors.white)!@#&        if #Peripherals > 0 then!@#&                windows.colorText(xStart+1,y,\"Peripherals\",colors.gray)!@#&                y = y + 1!@#&                for i=1,#Peripherals do!@#&                        windows.colorText(xStart+2,y,windows.stringLimit(\"end\",Peripherals[i],leftBarLimit),colors.lightGray)!@#&                        y = y + 1!@#&                end!@#&        end!@#&end!@#& !@#&local function drawTopBar()!@#&        local posY = yStart + 1!@#&        windows.square(xStart,yStart,managerX,3,colors.lightGray)!@#&        windows.square(xStart+3,posY,sizeOfInputBar,1,colors.white)!@#&        windows.colorText(xStart+3,posY,windows.stringLimit(\"start\",input,sizeOfInputBar),colors.gray)!@#& !@#&        local text = mode!@#&        windows.colorTextWithBack(math.floor(xStart+managerX/2-#text/2-1),yStart,text,colors.white,colors.lightGray)!@#& !@#&        windows.square(startOfSearchBar,posY,sizeOfSearchBar,1,colors.white)!@#&        windows.colorText(startOfSearchBar,posY,\"Search\",colors.lightGray)!@#&        newObj(\"windowControls\",\"search\",\"x1\",startOfSearchBar);newObj(\"windowControls\",\"search\",\"x2\",startOfSearchBar+sizeOfSearchBar-1);newObj(\"windowControls\",\"search\",\"y\",posY)!@#&       !@#&        local colorCyka = nil!@#&        if #workPathHistory == 0 then colorCyka = colors.lightGray else colorCyka = colors.black end!@#&        windows.colorTextWithBack(xStart+1,posY,\"<\",colorCyka,colors.white)!@#& !@#&        local posX = startOfSearchBar - 7!@#&        windows.colorTextWithBack(posX,posY,\" \"..mode..\" \",colors.white,colors.lightBlue)!@#&        newObj(\"windowControls\",\"ok\",\"x1\",posX);newObj(\"windowControls\",\"ok\",\"x2\",posX+5);newObj(\"windowControls\",\"ok\",\"y\",posY)!@#&end!@#& !@#&local function drawWindow()!@#&        windows.square(xStart,yStart+3,managerX,ySizeOfAppsArea,colors.white)!@#&        drawTopBar()!@#&        --DRAW SHADOW!@#&        for x=(xStart+1),(xStart+managerX) do!@#&                paintutils.drawPixel(x,yStart+managerY,colors.gray)!@#&        end!@#&        for y=(yStart+1),(yStart+managerY) do!@#&                paintutils.drawPixel(xStart+managerX,y,colors.gray)!@#&        end!@#&end!@#& !@#&------------------------------------------------------------------------------------------------------!@#& !@#&local function drawKonkretnoApp(x,y,name,backColor)!@#&        --  !@#&        newObj(\"apps\",name,\"x1\",x)!@#&        newObj(\"apps\",name,\"x2\",x+xAppSize-1)!@#&        newObj(\"apps\",name,\"y1\",y)!@#&        newObj(\"apps\",name,\"y2\",y+yAppSize-1)!@#&        newObj(\"apps\",name,\"fileFormat\",windows.getFileFormat(name))!@#& !@#&        -- !@#&        windows.drawOSIcon(x,y,workPath,name,objects[\"apps\"][name][\"fileFormat\"])!@#& !@#&        --  !@#&        term.setBackgroundColor(backColor)!@#&        if fs.isReadOnly(workPath..\"/\"..name) then!@#&                term.setTextColor(colors.red)!@#&        else!@#&                term.setTextColor(colors.black)!@#&        end!@#&        if windows.isFileHidden(name) then!@#&                term.setTextColor(colors.gray)!@#&        end!@#&        if hideFileFormat then!@#&                name = windows.hideFileFormat(name)!@#&        end!@#&        name = windows.stringLimit(\"end\",name,xAppSize,true)!@#&        windows.usualText(math.floor(x+xAppSize/2-#name/2),y+yAppSize-1,name)!@#&end!@#& !@#&local function drawApps(x,y,currentDesktop)!@#& !@#&        objects[\"apps\"] = {}!@#& !@#&        windows.square(x,y,xSizeOfAppsArea-2,ySizeOfAppsArea-2,colors.white)!@#& !@#&        local fileList = fs.list(workPath)!@#&        fileList = windows.reorganizeFilesAndFolders(workPath,fileList,true,true)!@#& !@#&        countOfDesktops = math.ceil(#fileList/(countOfAppsByY*countOfAppsByX))!@#&        local appCounter = 1 + currentDesktop * countOfAppsByY * countOfAppsByX - countOfAppsByY * countOfAppsByX!@#& !@#&        for j=1,countOfAppsByY do!@#&                for i=1,countOfAppsByX do!@#&                        if fileList[appCounter] then!@#&                                drawKonkretnoApp(x+i*(xAppSize+xSpaceBetweenApps)-(xAppSize+xSpaceBetweenApps),y+j*(yAppSize+ySpaceBetweenApps)-(yAppSize+ySpaceBetweenApps),fileList[appCounter],colors.white)!@#&                                appCounter = appCounter + 1!@#&                        else!@#&                                break!@#&                        end!@#&                end!@#&        end!@#&end!@#& !@#&------------------------------------------------------------------------------------------------------!@#& !@#&local function drawManager(x,y)!@#& !@#&        if x~=nil or y~=nil then!@#&                xStart = x!@#&                yStart = y!@#&                xStartOfDrawingApps = xStart+leftBarSize+1!@#&                yStartOfDrawingApps = yStart+4!@#&        end!@#& !@#&        currentDesktop = 1!@#&        --windows.emptyWindow(xStart,yStart,managerX,managerY,fs.getName(workPath))!@#&        drawWindow()!@#&        --windows.colorTextWithBack(xStart,yStart,\"x\",colors.black,colors.red);windows.colorTextWithBack(xStart+1,yStart,\"-\",colors.black,colors.orange);windows.colorTextWithBack(xStart+2,yStart,\"+\",colors.black,colors.lime)!@#&        drawLeftBar()!@#&        drawApps(xStartOfDrawingApps,yStartOfDrawingApps,currentDesktop)!@#&        windows.scrollBar(xEnd,yStart+3,managerY-3,countOfDesktops,currentDesktop,colors.lightGray,colors.lightBlue)!@#&end!@#& !@#&newObj(\"windowControls\",\"<\",\"x\",xStart+1);newObj(\"windowControls\",\"<\",\"y\",yStart+1)!@#& !@#&local function initializeProgram(mode1)!@#&        if mode1==\"open\" then mode = \"Open\" else mode = \"Save\" end!@#& !@#&        loadConfig()!@#&        saveConfig()!@#& !@#&        input = \"/\"..workPath!@#&        drawManager()!@#&       !@#&        local exit = false!@#&        while true do!@#& !@#&                local breakCycles = false!@#& !@#&                if exit then break end!@#& !@#&                local event,side,x,y = os.pullEvent()!@#&                if event == \"mouse_click\" then!@#& !@#&                        for key,val in pairs(objects[\"Favourites\"]) do!@#&                                if breakCycles then break end!@#& !@#&                                if clickedAtArea(x,y,objects[\"Favourites\"][key][\"x1\"],objects[\"Favourites\"][key][\"y1\"],objects[\"Favourites\"][key][\"x2\"],objects[\"Favourites\"][key][\"y1\"]) then!@#&                                       !@#&                                        if side == 1 then!@#&                                                if not fs.exists(objects[\"Favourites\"][key][\"path\"]) then fs.makeDir(key) end!@#&                                                workPathHistory[#workPathHistory+1] = workPath!@#&                                                workPath = objects[\"Favourites\"][key][\"path\"]!@#&                                                input = \"/\"..workPath!@#&                                                drawManager()!@#&                                        else!@#&                                                windows.square(xStart,objects[\"Favourites\"][key][\"y1\"],leftBarSize-1,1,colors.lightGray)!@#&                                                windows.colorText(xStart+2,objects[\"Favourites\"][key][\"y1\"],windows.stringLimit(\"end\",key,leftBarLimit),colors.white)!@#&                                                --sleep(0.2)!@#& !@#&                                                local action = context.menu(x,y,{\"Remove from sidebar\"})!@#&                                                if action == \"Remove from sidebar\" then!@#& !@#&                                                        Favourites[key] = nil!@#&                                                        saveConfig()!@#& !@#&                                                end!@#&                                                drawManager()!@#&                                        end!@#& !@#&                                        breakCycles = true!@#&                                        break!@#&                                end!@#&                        end!@#& !@#& !@#& !@#&                        for key,val in pairs(objects[\"apps\"]) do!@#&                                if breakCycles then break end!@#&                                if clickedAtArea(x,y,objects[\"apps\"][key][\"x1\"],objects[\"apps\"][key][\"y1\"],objects[\"apps\"][key][\"x2\"],objects[\"apps\"][key][\"y2\"]) then!@#&                                       !@#&                                        if side == 1 then!@#&                                                if fs.isDir(workPath..\"/\"..key) and windows.getFileFormat(key) ~= \".app\" then!@#&                                                        windows.square(objects[\"apps\"][key][\"x1\"]-1,objects[\"apps\"][key][\"y1\"],xAppSize+2,yAppSize,colors.blue)!@#&                                                        drawKonkretnoApp(objects[\"apps\"][key][\"x1\"],objects[\"apps\"][key][\"y1\"],key,colors.blue)!@#&                                                        sleep(0.2)!@#&                                                        workPathHistory[#workPathHistory+1] = workPath!@#&                                                        workPath = workPath..\"/\"..key!@#&                                                        input = \"/\"..workPath!@#&                                                        drawManager()!@#&                                                elseif not fs.isDir(workPath..\"/\"..key) and mode == \"Save\" then!@#&                                                        windows.square(objects[\"apps\"][key][\"x1\"]-1,objects[\"apps\"][key][\"y1\"],xAppSize+2,yAppSize,colors.red)!@#&                                                        drawKonkretnoApp(objects[\"apps\"][key][\"x1\"],objects[\"apps\"][key][\"y1\"],key,colors.red)!@#&                                                        sleep(0.2)!@#&                                                        windows.square(objects[\"apps\"][key][\"x1\"]-1,objects[\"apps\"][key][\"y1\"],xAppSize+2,yAppSize,colors.white)!@#&                                                        drawKonkretnoApp(objects[\"apps\"][key][\"x1\"],objects[\"apps\"][key][\"y1\"],key,colors.white)!@#&                                                elseif not fs.isDir(workPath..\"/\"..key) and mode ~= \"Save\" or fs.isDir(workPath..\"/\"..key) and windows.getFileFormat(key) == \".app\" and mode ~= \"Save\" then!@#&                                                        windows.square(objects[\"apps\"][key][\"x1\"]-1,objects[\"apps\"][key][\"y1\"],xAppSize+2,yAppSize,colors.blue)!@#&                                                        drawKonkretnoApp(objects[\"apps\"][key][\"x1\"],objects[\"apps\"][key][\"y1\"],key,colors.blue)!@#&                                                        sleep(0.2)!@#&                                                        windows.square(objects[\"apps\"][key][\"x1\"]-1,objects[\"apps\"][key][\"y1\"],xAppSize+2,yAppSize,colors.white)!@#&                                                        drawKonkretnoApp(objects[\"apps\"][key][\"x1\"],objects[\"apps\"][key][\"y1\"],key,colors.white)!@#&                                                        input = \"/\"..workPath..\"/\"..key!@#&                                                        drawTopBar()!@#&                                                end!@#&                                        else!@#&                                                if fs.isDir(workPath..\"/\"..key) then!@#&                                                        windows.square(objects[\"apps\"][key][\"x1\"]-1,objects[\"apps\"][key][\"y1\"],xAppSize+2,yAppSize,colors.lightGray)!@#&                                                        drawKonkretnoApp(objects[\"apps\"][key][\"x1\"],objects[\"apps\"][key][\"y1\"],key,colors.lightGray)!@#&                                               !@#&                                                        local action = context.menu(x,y,{\"Add to sidebar\"})!@#&                                                        if action == \"Add to sidebar\" then!@#& !@#&                                                                Favourites[key] = workPath..\"/\"..key!@#&                                                                saveConfig()!@#& !@#&                                                        end!@#&                                                        drawManager()!@#&                                                end!@#&                                        end!@#& !@#&                                        breakCycles = true!@#&                                        break!@#&                                end    !@#&                        end!@#& !@#&                        if clickedAtArea(x,y,objects[\"windowControls\"][\"<\"][\"x\"],objects[\"windowControls\"][\"<\"][\"y\"],objects[\"windowControls\"][\"<\"][\"x\"],objects[\"windowControls\"][\"<\"][\"y\"]) then!@#&                                if #workPathHistory > 0 then!@#&                                        windows.colorTextWithBack(objects[\"windowControls\"][\"<\"][\"x\"],objects[\"windowControls\"][\"<\"][\"y\"],\"<\",colors.white,colors.blue)!@#&                                        sleep(0.2)!@#&                                        workPath = workPathHistory[#workPathHistory]!@#&                                        input = \"/\"..workPath!@#&                                        workPathHistory[#workPathHistory] = nil!@#&                                        drawManager()!@#&                                end!@#&                        elseif clickedAtArea(x,y,objects[\"windowControls\"][\"ok\"][\"x1\"],objects[\"windowControls\"][\"ok\"][\"y\"],objects[\"windowControls\"][\"ok\"][\"x2\"],objects[\"windowControls\"][\"ok\"][\"y\"]) then!@#&                                windows.colorTextWithBack(objects[\"windowControls\"][\"ok\"][\"x1\"],objects[\"windowControls\"][\"ok\"][\"y\"],\" \"..mode..\" \",colors.white,colors.blue)!@#&                                sleep(0.3)!@#&                                return string.sub(input,2,-1)!@#&                        elseif clickedAtArea(x,y,objects[\"windowControls\"][\"search\"][\"x1\"],objects[\"windowControls\"][\"search\"][\"y\"],objects[\"windowControls\"][\"search\"][\"x2\"],objects[\"windowControls\"][\"search\"][\"y\"]) then!@#&                                local searchResult = windows.search(xEnd-27,yStart,28,2,\"Search\")!@#&                                if searchResult ~= nil then!@#&                                        --windows.error(\"=\"..searchResult)!@#&                                        if fs.isDir(searchResult) then!@#&                                                workPathHistory[#workPathHistory+1] = workPath!@#&                                                workPath = searchResult!@#&                                                input = \"/\"..workPath!@#&                                        else!@#&                                                workPathHistory[#workPathHistory+1] = workPath!@#&                                                workPath = string.sub(searchResult,1,#searchResult-#fs.getName(searchResult)-1)!@#&                                                input = \"/\"..workPath..\"/\"..fs.getName(searchResult)!@#&                                        end!@#&                                end!@#&                                drawManager()!@#& !@#&                        elseif clickedAtArea(x,y,startOfInputBar,yStart+1,endOfInputBar,yStart+1) and mode ~= \"Open\" then!@#& !@#&                                local cursor = nil!@#& !@#&                                input = input..\"/\"!@#&                                drawTopBar()!@#& !@#&                                local accept = false!@#& !@#&                                while true do!@#& !@#&                                        cursor = startOfInputBar+#input!@#&                                        if cursor > startOfInputBar+sizeOfInputBar then cursor = startOfInputBar+sizeOfInputBar-1 end!@#&                                       !@#&                                        term.setCursorPos(cursor,yStart+1)!@#&                                        term.setTextColor(colors.black)!@#&                                        term.setCursorBlink(true)!@#& !@#&                                        local event1,side1,x1,y1 = os.pullEvent()!@#&                                        if event1 == \"char\" then!@#& !@#&                                                input = input..side1!@#&                                                drawTopBar()!@#&                                        elseif event1 == \"key\" then!@#&                                                if side1 == 28 then!@#&                                                        windows.colorTextWithBack(objects[\"windowControls\"][\"ok\"][\"x1\"],objects[\"windowControls\"][\"ok\"][\"y\"],\" \"..mode..\" \",colors.white,colors.blue)!@#&                                                        sleep(0.3)!@#&                                                        accept = true!@#&                                                        break!@#&                                                elseif side1 == 14 then!@#&                                                        if #input > 1 then!@#&                                                                input = string.sub(input,1,-2)!@#&                                                                drawTopBar()!@#&                                                        end!@#& !@#&                                                end!@#&                                        elseif event1 == \"mouse_click\" then!@#&                                                if clickedAtArea(x1,y1,objects[\"windowControls\"][\"ok\"][\"x1\"],objects[\"windowControls\"][\"ok\"][\"y\"],objects[\"windowControls\"][\"ok\"][\"x2\"],objects[\"windowControls\"][\"ok\"][\"y\"]) then!@#&                                                        accept = true!@#&                                                        drawTopBar()!@#&                                                else!@#&                                                        drawTopBar()!@#&                                                        break!@#&                                                end!@#&                                        end!@#& !@#&                                        term.setCursorBlink(false)!@#&                                end!@#& !@#&                                term.setCursorBlink(false)!@#& !@#&                                if accept then return string.sub(input,2,-1) end!@#& !@#&                        end!@#& !@#&                elseif event == \"mouse_scroll\" then!@#&                        if clickedAtArea(x,y,xStart+leftBarSize,yStart+1,xEnd-1,yEnd) then!@#&                                if side == 1 then!@#&                                        currentDesktop = currentDesktop + 1!@#&                                        if currentDesktop > countOfDesktops then!@#&                                                currentDesktop = countOfDesktops!@#&                                        else!@#&                                                drawApps(xStartOfDrawingApps,yStartOfDrawingApps,currentDesktop)!@#&                                                windows.scrollBar(xEnd,yStart+3,managerY-3,countOfDesktops,currentDesktop,colors.lightGray,colors.lightBlue)!@#&                                        end!@#&                                else!@#&                                        currentDesktop = currentDesktop - 1!@#&                                        if currentDesktop < 1 then!@#&                                                currentDesktop = 1!@#&                                        else!@#&                                                drawApps(xStartOfDrawingApps,yStartOfDrawingApps,currentDesktop)!@#&                                                windows.scrollBar(xEnd,yStart+3,managerY-3,countOfDesktops,currentDesktop,colors.lightGray,colors.lightBlue)!@#&                                        end!@#&                                end!@#&                        end!@#&                elseif event == \"key\" then!@#&                        if side == 28 then!@#&                                return string.sub(input,2,-1)!@#&                        end!@#&                end!@#&        end!@#& !@#&end!@#& !@#&function open(cykaWorkPath)!@#&        if cykaWorkPath then workPath = cykaWorkPath end!@#& !@#&        for i=(1-managerY),1,2 do!@#&                drawManager(2,i)!@#&                sleep(0)!@#&        end!@#& !@#&        return initializeProgram(\"open\")!@#&end!@#& !@#&function save(cykaWorkPath)!@#&        if cykaWorkPath then workPath = cykaWorkPath end!@#& !@#&        for i=(1-managerY),1,2 do!@#&                drawManager(2,i)!@#&                sleep(0)!@#&        end!@#& !@#&        return initializeProgram(\"save\")!@#&end!@#& !@#&-------------------------------------!@#& !@#&--[[windows.clearScreen(colors.black)!@#& !@#&local path = open(\"\")!@#& !@#&term.setTextColor(colors.white)!@#&windows.clearScreen(colors.black)!@#&if path == \"\" then!@#&        windows.usualText(2,2,\"NIL!!\")!@#&else!@#&        windows.usualText(2,2,\"Path=\"..path)!@#&end]]",["image"]="function draw(startX,startY,image)!@#&        local Colors = {!@#&                [\"0\"] = 1,!@#&                [\"1\"] = 2,!@#&                [\"2\"] = 4,!@#&                [\"3\"] = 8,!@#&                [\"4\"] = 16,!@#&                [\"5\"] = 32,!@#&                [\"6\"] = 64,!@#&                [\"7\"] = 128,!@#&                [\"8\"] = 256,!@#&                [\"9\"] = 512,!@#&                [\"a\"] = 1024,!@#&                [\"b\"] = 2048,!@#&                [\"c\"] = 4096,!@#&                [\"d\"] = 8192,!@#&                [\"e\"] = 16384,!@#&                [\"f\"] = 32768!@#&        }!@#&        local Pixels = {}!@#& !@#&        local function convert(mode,color)!@#&                if mode == \"from cc\" then!@#&                        for key,value in pairs(Colors) do!@#&                                if color == value then!@#&                                        return key!@#&                                end!@#&                        end!@#&                else!@#&                        if color == \"#\" then!@#&                                return \"0\"!@#&                        else!@#&                                return Colors[color]!@#&                        end!@#&                end!@#&        end!@#& !@#&        local function load(path)!@#&                local file = fs.open(path,\"r\")!@#&                local lineCounter = 1!@#&                while true do!@#&                        local line = file.readLine()!@#&                        Pixels[lineCounter]={}!@#&                        if line ~= nil then!@#&                                for i=1,#line,3 do!@#&                                        Pixels[lineCounter][(i+2)/3]={}!@#&                                        Pixels[lineCounter][(i+2)/3][\"symbol\"] = string.sub(line,i,i)!@#&                                        Pixels[lineCounter][(i+2)/3][\"textColor\"] = convert(\"to cc\",string.sub(line,i+1,i+1))!@#&                                        Pixels[lineCounter][(i+2)/3][\"backColor\"] = convert(\"to cc\",string.sub(line,i+2,i+2))!@#&                                end!@#&                                lineCounter = lineCounter + 1!@#&                        else!@#&                                break!@#&                        end!@#&                end!@#&                file.close()!@#&        end!@#& !@#&        load(image)!@#& !@#&        for y=1,#Pixels do!@#&                for x=1,#Pixels[y] do!@#&                        if Pixels[y][x][\"symbol\"] ~= \"#\" then!@#&                                term.setTextColor(Pixels[y][x][\"textColor\"])!@#&                                term.setBackgroundColor(Pixels[y][x][\"backColor\"])!@#&                                term.setCursorPos(startX+x-1,startY+y-1)!@#&                                term.write(Pixels[y][x][\"symbol\"])!@#&                        end!@#&                end!@#&        end!@#& !@#&end",["encryptor"]="os.loadAPI(\"System/API/config\")!@#& !@#&local symbols = {!@#&        \"a\",!@#&        \"b\",!@#&        \"c\",!@#&        \"d\",!@#&        \"e\",!@#&        \"f\",!@#&        \"g\",!@#&        \"h\",!@#&        \"i\",!@#&        \"j\",!@#&        \"k\",!@#&        \"l\",!@#&        \"m\",!@#&        \"n\",!@#&        \"o\",!@#&        \"p\",!@#&        \"q\",!@#&        \"r\",!@#&        \"s\",!@#&        \"t\",!@#&        \"u\",!@#&        \"v\",!@#&        \"w\",!@#&        \"x\",!@#&        \"y\",!@#&        \"z\",!@#&        \"0\",!@#&        \"1\",!@#&        \"2\",!@#&        \"3\",!@#&        \"4\",!@#&        \"5\",!@#&        \"6\",!@#&        \"7\",!@#&        \"8\",!@#&        \"9\",!@#&}!@#& !@#&local symbolsFromConfig = {}!@#&for i=1,#symbols do!@#&        symbolsFromConfig[symbols[i]] = config.read(\"System/API/encryptor.cfg\",symbols[i])!@#&end!@#& !@#&local function stringReplace(stroka,chto,nachto)!@#&        while true do!@#&                local starting = 1!@#&                local starting,ending = string.find(stroka,chto,starting)!@#&                if ending ~= nil then!@#&                        stroka = string.sub(stroka,1,starting-1)..nachto..string.sub(stroka,ending+1,-1)!@#&                        starting = starting + #nachto!@#&                else!@#&                        break!@#&                end!@#&        end!@#&        return stroka!@#&end!@#& !@#&function code(stroka)!@#&        local array = {}!@#&        for i=1,#stroka do!@#&                array[i] = string.sub(stroka,i,i)!@#&                for key,val in pairs(symbolsFromConfig) do!@#&                        if array[i] == key then array[i] = val end!@#&                end!@#&        end!@#&        local text = \"\"!@#&        for i=1,#array do!@#&                text = text..array[i]!@#&        end!@#&        return text!@#&end!@#& !@#&function decode(stroka)!@#&        for key,val in pairs(symbolsFromConfig) do!@#&                stroka = stringReplace(stroka,val,key)!@#&        end!@#&        return stroka!@#&end!@#& !@#& !@#&--[[print(\" \")!@#&local cyka = \"hello world! heh kek lol \"!@#&print(\"Standart=\"..cyka)!@#&print(\" \")!@#&local codedcyka = code(cyka)!@#&print(\"Coded=\"..codedcyka)!@#&print(\" \")!@#&local decodedcyka = decode(codedcyka)!@#&print(\"Encoded=\"..decodedcyka)!@#&print(\" \")]]",["config"]="function read(pathToConfig,whatToRead)!@#&        if not fs.exists(pathToConfig) then error(\"No such file\") end!@#&        local file = fs.open(pathToConfig,\"r\")!@#&        while true do!@#&                local line = file.readLine()!@#&                if line ~= nil then!@#&                        local key, value = string.match(line,\"(.*)=(.*)\")!@#&                        if value ~= nil and key == whatToRead then!@#&                                file.close()!@#&                                return value!@#&                        end!@#&                else!@#&                        file.close()!@#&                        break!@#&                end!@#&        end!@#&end!@#& !@#&function write(pathToConfig,key,value)!@#&        if not fs.exists(pathToConfig) then!@#&                local file = fs.open(pathToConfig,\"w\")!@#&                file.close()!@#&        end!@#& !@#&        local file = fs.open(pathToConfig,\"r\")!@#&        local Massiv = {}!@#&       !@#&        local lineCounter = 1!@#&        while true do!@#&                local line = file.readLine()!@#&                if line ~= nil then!@#&                        Massiv[lineCounter] = line!@#&                else!@#&                        file.close()!@#&                        break!@#&                end!@#&                lineCounter = lineCounter + 1!@#&        end!@#& !@#&        local success = false!@#&        for i=1,#Massiv do!@#&                local key1, value1 = string.match(Massiv[i],\"(.*)=(.*)\")!@#&                if value1 ~= nil and key1 == key then!@#&                        Massiv[i] = key..\"=\"..value!@#&                        success = true!@#&                end!@#&        end!@#& !@#&        if success == false then Massiv[#Massiv+1] = key..\"=\"..value end!@#& !@#&        local file = fs.open(pathToConfig,\"w\")!@#&        for i=1,#Massiv do!@#&                file.writeLine(Massiv[i])!@#&        end!@#&        file.close()!@#&end",["windows"]=" !@#& !@#&local xSize,ySize = term.getSize()!@#&local centerX,centerY = math.floor(xSize/2),math.floor(ySize/2)!@#& !@#&-- !@#&function findPeripheral(whatToFind)!@#&  local PeriList = peripheral.getNames()!@#&  for i=1,#PeriList do!@#&    if peripheral.getType(PeriList[i]) == whatToFind then!@#&      return PeriList[i]!@#&    end!@#&  end!@#&end!@#& !@#&--  !@#&function findWirelessModem()!@#&        local periList = rs.getSides() --peripheral.getNames()!@#&        for i=1,#periList do!@#&                if peripheral.getType(periList[i]) == \"modem\" then!@#&                        local govno = peripheral.wrap(periList[i])!@#&                        --if govno.isWireless() then!@#&                        return periList[i]!@#&                        --end!@#&                end!@#&        end!@#&end!@#& !@#&--   !@#&function clickedAtArea(x,y,sx,sy,ex,ey)!@#&    if (x >= sx) and (x <= ex) and (y >= sy) and (y <= ey) then return true end    !@#&    return false!@#&end!@#& !@#&-- ,  !@#&function toboolean(s)!@#&        if s == \"true\" then!@#&                return true!@#&        else!@#&                return false!@#&        end!@#&end!@#& !@#&-- !@#&function colorText(x,y,text,textColor)!@#&        term.setTextColor(textColor)!@#&        term.setCursorPos(x,y)!@#&        term.write(text)!@#&end!@#& !@#&--   !@#&function colorTextWithBack(x,y,text,textColor,backColor)!@#&        term.setTextColor(textColor)!@#&        term.setBackgroundColor(backColor)!@#&        term.setCursorPos(x,y)!@#&        term.write(text)!@#&end!@#& !@#&--    !@#&function usualText(x,y,text)!@#&        term.setCursorPos(x,y)!@#&        term.write(text)!@#&end!@#& !@#&--       !@#&function centerText(how,coord,text,textColor,backColor)!@#&        term.setTextColor(textColor)!@#&        term.setBackgroundColor(backColor)!@#&        if how == \"xy\" then!@#&                term.setCursorPos(math.floor(xSize/2-#text/2),math.floor(ySize/2))!@#&        elseif how == \"x\" then!@#&                term.setCursorPos(math.floor(xSize/2-#text/2),coord)!@#&        elseif how == \"y\" then!@#&                term.setCursorPos(coord,math.floor(ySize/2))!@#&        end!@#&        term.write(text)!@#&end!@#& !@#&--   !@#&function square(x1,y1,width,height,color)!@#&        local string = string.rep(\" \",width)!@#&        term.setBackgroundColor(color)!@#&        for y=y1,(y1+height-1) do!@#&                usualText(x1,y,string)!@#&        end!@#&end!@#&function circle(cx, cy, radius, char, backColor, textColor)!@#&        local x = radius!@#&    local y = 0!@#&    local radiusError = 1 - x!@#&    term.setTextColor(textColor)!@#&    term.setBackgroundColor(backColor)!@#&    while (x >= y) do!@#&        usualText(x + cx, y + cy, char)!@#&        usualText(y + cx, x + cy, char)!@#&        usualText(-x + cx, y + cy, char)!@#&        usualText(-y + cx, x + cy, char)!@#&        usualText(-x + cx, -y + cy, char)!@#&        usualText(-y + cx, -x + cy, char)!@#&        usualText(x + cx, -y + cy, char)!@#&        usualText(y + cx, -x + cy, char)!@#&        y = y + 1!@#&        if (radiusError < 0) then!@#&            radiusError = radiusError + (2 * y + 1)!@#&        else!@#&            x = x - 1!@#&            radiusError = radiusError + (2 * (y - x + 1))!@#&        end!@#&    end!@#&end!@#& !@#&--  !@#&function clearScreen(color)!@#&        term.setBackgroundColor(color)!@#&        term.clear()!@#&end!@#& !@#&--  !@#&function fadeIn(time)!@#&        clearScreen(colors.gray)!@#&        sleep(time)!@#&        clearScreen(colors.lightGray)!@#&        sleep(time)!@#&        clearScreen(colors.white)!@#&        sleep(time)!@#&end!@#& !@#&--  !@#&function fadeOut(time)!@#&        clearScreen(colors.lightGray)!@#&        sleep(time)!@#&        clearScreen(colors.gray)!@#&        sleep(time)!@#&        clearScreen(colors.black)!@#&        sleep(time)!@#&        term.setCursorPos(1,1)!@#&        term.setTextColor(colors.white)!@#&end!@#& !@#&--    !@#&function emptyWindow(xStart,yStart,xWindowSize,yWindowSize,title)!@#&        --DRAW WINDOW!@#&        square(xStart,yStart,xWindowSize,1,colors.lightGray)!@#&        colorText(math.floor(xStart+xWindowSize/2-#title/2),yStart,title,colors.white)!@#& !@#&        square(xStart,yStart+1,xWindowSize,yWindowSize-1,colors.white)!@#&       !@#&        --DRAW SHADOW!@#&        for x=(xStart+1),(xStart+xWindowSize) do!@#&                paintutils.drawPixel(x,yStart+yWindowSize,colors.gray)!@#&        end!@#&        for y=(yStart+1),(yStart+yWindowSize) do!@#&                paintutils.drawPixel(xStart+xWindowSize,y,colors.gray)!@#&        end!@#&end!@#& !@#&--   !@#&function sampleWindow(xStart,yStart,xWindowSize,yWindowSize)!@#&        square(xStart,yStart,xWindowSize,yWindowSize,colors.white)!@#&        --DRAW SHADOW!@#&        for x=(xStart+1),(xStart+xWindowSize) do!@#&                paintutils.drawPixel(x,yStart+yWindowSize,colors.gray)!@#&        end!@#&        for y=(yStart+1),(yStart+yWindowSize) do!@#&                paintutils.drawPixel(xStart+xWindowSize,y,colors.gray)!@#&        end!@#&end!@#& !@#&--  !@#&function stringLimit(mode,text,size,noDots)!@#&        if string.len(text)<=size then return text end!@#&        if mode == \"start\" then!@#&                if noDots then!@#&                        return string.sub(text,#text-size+1,-1)!@#&                else!@#&                        return \"...\"..string.sub(text,#text-size+4,-1)!@#&                end!@#&        else!@#&                if noDots then!@#&                        return string.sub(text,1,size)!@#&                else!@#&                        return string.sub(text,1,size-3)..\"...\"!@#&                end!@#&        end!@#&end!@#& !@#&--  !@#&function getFileFormat(path)!@#&        local name = fs.getName(path)!@#&        local starting,ending = string.find(name,\"(.)%.[%d%w]*$\")!@#&        if starting == nil then!@#&                return nil!@#&        else!@#&                return string.sub(name,starting+1,-1)!@#&        end!@#&end!@#& !@#&--,   !@#&function isFileHidden(path)!@#&        local name = fs.getName(path)!@#&        local starting,ending = string.find(name,\"^%.(.*)$\")!@#&        if starting == nil then!@#&                return false!@#&        else!@#&                return true!@#&        end!@#&end!@#& !@#&--  !@#&function hideFileFormat(path)!@#&        local name = fs.getName(path)!@#&        local fileFormat = getFileFormat(name)!@#&        if fileFormat == nil then!@#&                return name!@#&        else!@#&                return string.sub(name,1,#name-#fileFormat)!@#&        end!@#&end!@#& !@#&--    !@#&function getFileSize(path)!@#&        local allFilesSize = 0!@#&        if fs.isDir(path) then!@#&                local fileList = fs.list(path)!@#&                for i=1,#fileList do!@#&                        allFilesSize = allFilesSize + getFileSize(path..\"/\"..fileList[i])!@#&                end!@#&        else!@#&                allFilesSize = allFilesSize + fs.getSize(path)!@#&        end!@#&        return allFilesSize!@#&end!@#& !@#&--  !@#&function getFileType(path)!@#&        local fileTypes = {!@#&                [\".png\"] = \"Image\",!@#&                [\".cfg\"] = \"Config\",!@#&                [\".zip\"] = \"Archive\",!@#&                [\".app\"] = \"Application\",!@#&        }!@#& !@#&        local currentFileType = nil!@#& !@#&        local fileFormat = getFileFormat(path)!@#&        if fileFormat == nil then!@#&                if fs.isDir(path) then!@#&                        currentFileType = \"Folder\"!@#&                else!@#&                        currentFileType = \"Lua script\"!@#&                end!@#&        else!@#&                currentFileType = fileTypes[fileFormat] or fileFormat!@#&        end!@#&       !@#&        return currentFileType!@#&end!@#& !@#&--   -!@#&function reorganizeFilesAndFolders(workPath,massivSudaPihay,showHiddenFiles,showSystemFolders)!@#&        local reorganizedMassiv = {}!@#&        local function doGovno(i)!@#&                if showHiddenFiles then!@#&                        reorganizedMassiv[#reorganizedMassiv+1] = massivSudaPihay[i]!@#&                else!@#&                        if not windows.isFileHidden(workPath..\"/\"..massivSudaPihay[i]) then!@#&                                reorganizedMassiv[#reorganizedMassiv+1] = massivSudaPihay[i]!@#&                        end!@#&                end!@#&        end!@#&        local filePath = nil!@#&        for i=1,#massivSudaPihay do!@#&                filePath = workPath..\"/\"..massivSudaPihay[i]!@#&                if fs.isDir(filePath) and windows.getFileFormat(filePath) ~= \".app\" then!@#&                        if showSystemFolders then!@#&                                doGovno(i)!@#&                        else!@#&                                if massivSudaPihay[i] ~= \"rom\" and massivSudaPihay[i] ~= \"System\" then!@#&                                        --windows.attention({\"massiv[i] = \"..massivSudaPihay[i]},{\"heh\"})!@#&                                        doGovno(i)!@#&                                end!@#&                        end!@#&                end!@#&        end!@#&        for i=1,#massivSudaPihay do!@#&                filePath = workPath..\"/\"..massivSudaPihay[i]!@#&                if not fs.isDir(filePath) and massivSudaPihay[i] ~= \"OS\" or fs.isDir(filePath) and windows.getFileFormat(filePath) == \".app\" then!@#&                        doGovno(i)!@#&                end!@#&        end!@#&        return reorganizedMassiv!@#&end!@#& !@#&--   !@#&function drawOSIcon(xIconPos,yIconPos,workPath,name,fileFormat)!@#&        --   !@#&        if not fs.isDir(workPath..\"/\"..name) then!@#&                if fileFormat == \".png\" then!@#&                        image.draw(xIconPos,yIconPos,\"System/OS/Icons/image.png\")!@#&                elseif fileFormat == \".cfg\" then!@#&                        image.draw(xIconPos,yIconPos,\"System/OS/Icons/config.png\")!@#&                elseif fileFormat == \".zip\" then!@#&                        image.draw(xIconPos,yIconPos,\"System/OS/Icons/zip.png\")!@#&                else!@#&                        image.draw(xIconPos,yIconPos,\"System/OS/Icons/default.png\")!@#&                end!@#&        --  !@#&        else!@#&                local iconPath = workPath..\"/\"..name..\"/Resources/icon.png\"!@#&                if fileFormat == \".app\" and fs.exists(iconPath) then!@#&                        image.draw(xIconPos,yIconPos,iconPath)!@#&                elseif string.sub(name,1,4)==\"disk\" then!@#&                        image.draw(xIconPos,yIconPos,\"System/OS/Icons/disk.png\")!@#&                else!@#&                        image.draw(xIconPos,yIconPos,\"System/OS/Icons/folder.png\")!@#&                end!@#&        end!@#&end!@#& !@#&--  !@#&local function correctStartCoords(xStart,yStart,xWindowSize,yWindowSize)!@#&        if xStart == \"auto\" then!@#&                xStart = math.floor(xSize/2 - xWindowSize/2)!@#&        end!@#&        if yStart == \"auto\" then!@#&                yStart = math.floor(ySize/2 - yWindowSize/2)!@#&        end!@#&        return xStart,yStart!@#&end!@#& !@#&-- !@#&function button(x,y,xOffset,yOffset,text,textColor,backColor)!@#&        local width = xOffset*2+#text!@#&        local height = yOffset*2+1!@#&        x,y = correctStartCoords(x,y,width,height)!@#&        square(x,y,width,height,backColor)!@#&        colorText(x+xOffset,y+yOffset,text,textColor)!@#&        return x,y,x+width-1,y+height-1!@#&end!@#& !@#&--  !@#&local function drawProgressBar(xStart,yStart,width,height,frontColor,backColor,percent)!@#&        local doneSize = math.ceil(percent/100*width)!@#& !@#&        square(xStart,yStart,width,height,backColor)!@#&        square(xStart,yStart,doneSize,height,frontColor)!@#&end!@#& !@#&--  !@#&function scrollBar(xStart,yStart,height,countOfAllElements,currentElement,backColor,frontColor)!@#&        local percent = 1/countOfAllElements!@#&        local sizeOfScrollBar = math.ceil(percent * height)!@#&        local displayBarFrom = math.floor(yStart + height*((currentElement-1)/countOfAllElements))!@#& !@#&        for i=yStart,(yStart+height-1) do!@#&                paintutils.drawPixel(xStart,i,backColor)!@#&        end!@#& !@#&        for i=displayBarFrom,(displayBarFrom+sizeOfScrollBar-1) do!@#&                paintutils.drawPixel(xStart,i,frontColor)!@#&        end!@#&end!@#& !@#&-- -   !@#&local function searchInAllFiles(path,whatToFind)!@#& !@#&        local function poiskSovpadeniya(name)!@#&                local starting,ending = string.find(string.lower(name),string.lower(whatToFind))!@#&                if starting == nil then!@#&                        return false!@#&                else!@#&                        return true!@#&                end!@#&        end!@#& !@#&        local searchMassiv = {}!@#& !@#&        local function createFileMassiv(path,whatToFind)!@#&                local fileList = fs.list(path)!@#&                for i=1,#fileList do!@#&                        if fs.isDir(path..\"/\"..fileList[i]) then!@#&                                if poiskSovpadeniya(fileList[i]) then!@#&                                        searchMassiv[#searchMassiv+1] = {[\"path\"]=path,[\"name\"]=fileList[i],[\"isDir\"]=true,[\"fileSize\"]=getFileSize(path..\"/\"..fileList[i]),[\"fileType\"]=getFileType(path..\"/\"..fileList[i]),[\"fileFormat\"]=getFileFormat(path..\"/\"..fileList[i])}!@#&                                end!@#&                                createFileMassiv(path..\"/\"..fileList[i],whatToFind)!@#&                        else!@#&                                if poiskSovpadeniya(fileList[i]) then!@#&                                        searchMassiv[#searchMassiv+1] = {[\"path\"]=path,[\"name\"]=fileList[i],[\"isDir\"]=false,[\"fileSize\"]=getFileSize(path..\"/\"..fileList[i]),[\"fileType\"]=getFileType(path..\"/\"..fileList[i]),[\"fileFormat\"]=getFileFormat(path..\"/\"..fileList[i])}!@#&                                end!@#&                        end!@#&                end!@#&        end!@#&        createFileMassiv(path,whatToFind)!@#&        return searchMassiv!@#& !@#&end!@#& !@#&--       &6, &c, &a  ..!@#&local colorCodes = {!@#&        {[\"code\"] = \"&0\", [\"color\"] = 1},!@#&        {[\"code\"] = \"&1\", [\"color\"] = 2},!@#&        {[\"code\"] = \"&2\", [\"color\"] = 4},!@#&        {[\"code\"] = \"&3\", [\"color\"] = 8},!@#&        {[\"code\"] = \"&4\", [\"color\"] = 16},!@#&        {[\"code\"] = \"&5\", [\"color\"] = 32},!@#&        {[\"code\"] = \"&6\", [\"color\"] = 64},!@#&        {[\"code\"] = \"&7\", [\"color\"] = 128},!@#&        {[\"code\"] = \"&8\", [\"color\"] = 256},!@#&        {[\"code\"] = \"&9\", [\"color\"] = 512},!@#&        {[\"code\"] = \"&a\", [\"color\"] = 1024},!@#&        {[\"code\"] = \"&b\", [\"color\"] = 2048},!@#&        {[\"code\"] = \"&c\", [\"color\"] = 4096},!@#&        {[\"code\"] = \"&d\", [\"color\"] = 8192},!@#&        {[\"code\"] = \"&e\", [\"color\"] = 16384},!@#&        {[\"code\"] = \"&f\", [\"color\"] = 32768},!@#&}!@#& !@#&function foramattedText(text)!@#&        local color = colors.white!@#&        term.setTextColor(color)!@#&        local sText = #text!@#&        local searchFrom = 1!@#& !@#&        local exit = false!@#&        while true do!@#&                if exit then break end!@#&                local founded = false!@#&                local s,e = string.find(text,\"&\",searchFrom)!@#&                if s then!@#&                        local code = string.sub(text,s,s+1)!@#&                        for i=1,16 do!@#&                                if code == colorCodes[i][\"code\"] then!@#& !@#&                                        local cyka = string.sub(text,searchFrom,s-1)!@#&                                        term.write(cyka)!@#& !@#&                                        color = colorCodes[i][\"color\"]!@#&                                        term.setTextColor(color)!@#& !@#&                                        founded = true!@#&                                        searchFrom = searchFrom + #cyka + 2!@#&                                        break!@#&                                end!@#&                        end!@#&                end!@#&               !@#&                if not founded then!@#&                        term.write(string.sub(text,searchFrom,-1))!@#&                        exit = true!@#&                end!@#&        end!@#&end!@#& !@#&---------------------------------------------------------------------------------------------------------------!@#& !@#&function error(text1)!@#&       !@#&        local title = \"Error\"!@#&        local limit = xSize - 16 - 11!@#&        local sizeOfText1 = #text1!@#& !@#&        local parsedErr = {}!@#&        for i=1,(math.ceil(sizeOfText1/limit)) do!@#&                parsedErr[#parsedErr+1] = string.sub(text1,i*limit+1-limit,i*limit)!@#&        end!@#& !@#&        local theLongestElement = #title!@#&        for i=1,#parsedErr do!@#&                local size = #parsedErr[i]!@#&                if size > theLongestElement then theLongestElement = size end!@#&        end!@#&       !@#&        local xWindowSize = 9 + theLongestElement + 2!@#&        local yWindowSize = 2 + 1 + 1 + #parsedErr + 3!@#&        local xStart = math.floor(xSize/2-xWindowSize/2)!@#&        local yStart = math.floor(ySize/2-yWindowSize/2)!@#&       !@#&        --  !@#&        emptyWindow(xStart,yStart,xWindowSize,yWindowSize,\" \")!@#& !@#&        --DRAW ICON!@#&        paintutils.drawPixel(xStart+4,yStart+2,colors.red)!@#&        paintutils.drawPixel(xStart+3,yStart+3,colors.red)!@#&        paintutils.drawPixel(xStart+4,yStart+3,colors.red)!@#&        paintutils.drawPixel(xStart+5,yStart+3,colors.red)!@#&        paintutils.drawPixel(xStart+2,yStart+4,colors.red)!@#&        paintutils.drawPixel(xStart+3,yStart+4,colors.red)!@#&        paintutils.drawPixel(xStart+4,yStart+4,colors.red)!@#&        paintutils.drawPixel(xStart+5,yStart+4,colors.red)!@#&       !@#&        paintutils.drawPixel(xStart+6,yStart+4,colors.red)!@#&        colorText(xStart+4,yStart+3,\"!\",colors.white)!@#&       !@#&        --ERROR TEXT!@#&        term.setBackgroundColor(colors.white)!@#& !@#&        colorText(xStart+9,yStart+2,title,colors.gray)!@#& !@#&        for i=1,#parsedErr do!@#&                colorText(xStart+9,yStart+3+i,parsedErr[i],colors.lightGray)!@#&        end!@#& !@#&        --BUTTON!@#&        local function drawButton(color,color2)!@#&                for x=(xStart+xWindowSize-8),(xStart+xWindowSize-3) do!@#&                        paintutils.drawPixel(x,yStart+yWindowSize-2,color)!@#&                end!@#&                colorText(xStart+xWindowSize-6,yStart+yWindowSize-2,\"OK\",color2)!@#&        end!@#&        drawButton(colors.lightBlue,colors.black)!@#&       !@#&        while true do!@#&                local event,side,x,y = os.pullEvent()!@#&                if event == \"mouse_click\" then!@#&                        if x>=xStart+xWindowSize-8 and x<=xStart+xWindowSize-3 and y == yStart+yWindowSize-2 then!@#&                                drawButton(colors.blue,colors.white)!@#&                                sleep(0.2)!@#&                                break!@#&                        end!@#&                elseif event == \"key\" then!@#&                        if side == 28 then!@#&                                drawButton(colors.blue,colors.white)!@#&                                sleep(0.2)!@#&                                break!@#&                        end!@#&                end!@#&        end!@#&end!@#& !@#&---------------------------------------------------------------------------------------------------------------!@#& !@#&function attention(text1,text2)!@#& !@#&        local sizeOfText1 = #text1!@#&        local sizeOfText2 = #text2!@#& !@#&        local theLongestElement = 0!@#&        for i=1,sizeOfText1 do!@#&                if #text1[i] > theLongestElement then theLongestElement = #text1[i] end!@#&        end!@#&        for i=1,sizeOfText2 do!@#&                if #text2[i] > theLongestElement then theLongestElement = #text2[i] end!@#&        end!@#& !@#&        local xWindowSize = 9 + theLongestElement + 2!@#&        local yWindowSize = 2 + sizeOfText1 + 1 + sizeOfText2 + 3!@#&        local xStart = math.floor(xSize/2-xWindowSize/2)!@#&        local yStart = math.floor(ySize/2-yWindowSize/2)!@#&       !@#&        --  !@#&        emptyWindow(xStart,yStart,xWindowSize,yWindowSize,\" \")!@#& !@#&        --DRAW ICON!@#&        paintutils.drawPixel(xStart+4,yStart+2,colors.yellow)!@#&        paintutils.drawPixel(xStart+3,yStart+3,colors.yellow)!@#&        paintutils.drawPixel(xStart+4,yStart+3,colors.yellow)!@#&        paintutils.drawPixel(xStart+5,yStart+3,colors.yellow)!@#&        paintutils.drawPixel(xStart+2,yStart+4,colors.yellow)!@#&        paintutils.drawPixel(xStart+3,yStart+4,colors.yellow)!@#&        paintutils.drawPixel(xStart+4,yStart+4,colors.yellow)!@#&        paintutils.drawPixel(xStart+5,yStart+4,colors.yellow)!@#&        paintutils.drawPixel(xStart+6,yStart+4,colors.yellow)!@#&        colorText(xStart+4,yStart+3,\"!\",colors.white)!@#&       !@#&        --ERROR TEXT!@#&        term.setBackgroundColor(colors.white)!@#&        for i=1,sizeOfText1 do!@#&                colorText(xStart+9,yStart+1+i,text1[i],colors.gray)!@#&        end!@#&        for i=1,sizeOfText2 do!@#&                colorText(xStart+9,yStart+3+i,text2[i],colors.lightGray)!@#&        end!@#& !@#&        --BUTTON!@#&        local function drawButton(color,color2)!@#&                for x=(xStart+xWindowSize-8),(xStart+xWindowSize-3) do!@#&                        paintutils.drawPixel(x,yStart+yWindowSize-2,color)!@#&                end!@#&                colorText(xStart+xWindowSize-6,yStart+yWindowSize-2,\"OK\",color2)!@#&        end!@#&        drawButton(colors.lightBlue,colors.black)!@#&       !@#&        while true do!@#&                local event,side,x,y = os.pullEvent()!@#&                if event == \"mouse_click\" then!@#&                        if x>=xStart+xWindowSize-8 and x<=xStart+xWindowSize-3 and y == yStart+yWindowSize-2 then!@#&                                drawButton(colors.blue,colors.white)!@#&                                sleep(0.2)!@#&                                break!@#&                        end!@#&                elseif event == \"key\" then!@#&                        if side == 28 then!@#&                                drawButton(colors.blue,colors.white)!@#&                                sleep(0.2)!@#&                                break!@#&                        end!@#&                end!@#&        end!@#&end!@#& !@#&---------------------------------------------------------------------------------------------------------------!@#& !@#&function input(...)!@#&       !@#&        local xStart = arg[1]!@#&        local yStart = arg[2]!@#&        local title = arg[3]!@#&        local sizeOfInputRow = arg[4]!@#& !@#&        local sizeOfText1 = #arg-4!@#& !@#&        local Inputs = {}!@#& !@#&        local allowToPressOk = true!@#& !@#&        local inputCounter = 1!@#& !@#&        local theLongestElement = 0!@#&        for i=1,sizeOfText1 do!@#&                if #arg[i+4][1] > theLongestElement then theLongestElement = #arg[i+4][1] end!@#&        end!@#& !@#&        local xWindowSize = 2 + theLongestElement + 1 + sizeOfInputRow + 2!@#&        local yWindowSize = 2 + sizeOfText1 * 2 + 1 + 1!@#& !@#&        xStart, yStart = correctStartCoords(xStart,yStart,xWindowSize,yWindowSize)!@#& !@#&        --    , !@#&        for i=1,sizeOfText1 do!@#&                Inputs[i]=arg[i+4][2]!@#&        end!@#& !@#&        -- !@#&        local Objects = {}!@#&        local function newObj(class,name,x1,y1,width,height)!@#&                Objects[class] = Objects[class] or {}!@#&                Objects[class][name] = {}!@#&                Objects[class][name][\"x1\"]=x1!@#&                Objects[class][name][\"y1\"]=y1!@#&                Objects[class][name][\"x2\"]=x1+width-1!@#&                Objects[class][name][\"y2\"]=y1+height-1!@#&        end!@#& !@#&        --  !@#&        emptyWindow(xStart,yStart,xWindowSize,yWindowSize,title)!@#& !@#&        --BUTTON!@#&        local function drawButton(color,color2)!@#&                for x=(xStart+xWindowSize-8),(xStart+xWindowSize-3) do!@#&                        paintutils.drawPixel(x,yStart+yWindowSize-2,color)!@#&                end!@#&                colorText(xStart+xWindowSize-6,yStart+yWindowSize-2,\"OK\",color2)!@#&        end!@#&       !@#&        local function drawInputs()!@#&                for i=1,sizeOfText1 do!@#&                        local xPosOfInput = xStart+xWindowSize - 2 - sizeOfInputRow!@#&                        local yPosOfInput = yStart+i*2!@#& !@#&                        local inputArgument = arg[i+4]!@#& !@#&                        term.setBackgroundColor(colors.white)!@#&                        if inputCounter == i then!@#&                                colorText(xStart+2,yPosOfInput,inputArgument[1],colors.gray)!@#&                        else!@#&                                colorText(xStart+2,yPosOfInput,inputArgument[1],colors.lightGray)!@#&                        end!@#& !@#&                        square(xPosOfInput,yPosOfInput,sizeOfInputRow,1,colors.lightGray)!@#&                        newObj(\"inputs\",i,xPosOfInput,yPosOfInput,sizeOfInputRow,1)!@#& !@#&                        if Inputs[i] ~= nil then!@#&                                if inputArgument[3] == nil then!@#&                                        colorText(xPosOfInput,yPosOfInput,stringLimit(\"start\",Inputs[i],sizeOfInputRow),colors.black)!@#&                                else!@#&                                        colorText(xPosOfInput,yPosOfInput,stringLimit(\"start\",string.rep(\"*\",#Inputs[i]),sizeOfInputRow),colors.black)!@#&                                end!@#&                        end!@#&                       !@#&                        if inputCounter > sizeOfText1 then allowToPressOk = true end!@#&                end!@#& !@#&                if allowToPressOk then!@#&                        drawButton(colors.lightBlue,colors.black)!@#&                else!@#&                        drawButton(colors.lightGray,colors.black)!@#&                end!@#&        end!@#& !@#&        drawInputs()!@#&       !@#&        local currentInput = \"\"!@#& !@#&        while true do!@#&                if Inputs[inputCounter] ~= nil then currentInput = Inputs[inputCounter] end!@#& !@#&                term.setCursorBlink(false)!@#&                drawInputs(inputCounter)!@#&                term.setCursorBlink(true)!@#& !@#&                if #currentInput < sizeOfInputRow and inputCounter <= sizeOfText1 then!@#&                        term.setCursorPos(xStart+xWindowSize-2-sizeOfInputRow+#currentInput,yStart+inputCounter*2)!@#&                elseif #currentInput >= sizeOfInputRow and inputCounter <= sizeOfText1 then!@#&                        term.setCursorPos(xStart+xWindowSize-3,yStart+inputCounter*2)!@#&                else!@#&                        term.setCursorBlink(false)!@#&                end!@#& !@#&                local event,side,x,y = os.pullEvent()!@#&                if event == \"key\" then!@#&                        --!@#&                        if side == 28 then!@#&                                if currentInput ~= \"\" then!@#&                                        currentInput = \"\"!@#&                                else!@#&                                        Inputs[inputCounter] = currentInput    !@#&                                end!@#& !@#&                                if inputCounter < sizeOfText1 then!@#&                                        inputCounter = inputCounter + 1!@#&                                else!@#&                                        term.setCursorBlink(false)!@#&                                        drawButton(colors.blue,colors.white)!@#&                                        sleep(0.2)!@#&                                        return Inputs!@#&                                end!@#&                        --!@#&                        elseif side == 14 then!@#&                                currentInput = string.sub(currentInput,1,-2)!@#&                                Inputs[inputCounter] = currentInput!@#&                        -- -!@#&                        elseif side == 200 then!@#&                                inputCounter = inputCounter - 1!@#&                                if inputCounter < 1 then inputCounter = 1 end!@#&                        elseif side == 208 then!@#&                                inputCounter = inputCounter + 1!@#&                                if inputCounter > #Inputs then inputCounter = #Inputs end!@#&                        end!@#&                elseif event == \"mouse_click\" then!@#&                        term.setCursorBlink(false)!@#&                        if x>=xStart+xWindowSize-8 and x<=xStart+xWindowSize-3 and y == yStart+yWindowSize-2 and allowToPressOk == true then!@#&                                drawButton(colors.blue,colors.white)!@#&                                sleep(0.2)!@#&                                return Inputs!@#&                        end!@#&                        for key,val in pairs(Objects[\"inputs\"]) do!@#&                                if x>=Objects[\"inputs\"][key][\"x1\"] and x<=Objects[\"inputs\"][key][\"x2\"] and y==Objects[\"inputs\"][key][\"y1\"] then!@#&                                        inputCounter = key!@#&                                        break!@#&                                end!@#&                        end!@#&                elseif event == \"char\" then!@#&                        currentInput = currentInput..side!@#&                        Inputs[inputCounter] = currentInput!@#&                elseif event == \"paste\" then!@#&                        currentInput = currentInput..side!@#&                        Inputs[inputCounter] = currentInput!@#&                end!@#&        end!@#&end!@#& !@#&---------------------------------------------------------------------------------------------------------------------!@#& !@#&function tv(speed)!@#&        term.setBackgroundColor(colors.black)!@#&        for i=1,centerY do!@#&                term.setCursorPos(1,i)!@#&                term.clearLine()!@#&                term.setCursorPos(1,ySize-i+1)!@#&                term.clearLine()!@#&                sleep(speed)!@#&        end!@#&        for i=1,centerX do!@#&                paintutils.drawPixel(i,centerY+1,colors.black)!@#&                paintutils.drawPixel(xSize-i+1,centerY+1,colors.black)!@#&                sleep(speed)!@#&        end!@#&        sleep(0.2)!@#&        clearScreen(colors.black)!@#&        term.setTextColor(colors.white)!@#&        term.setCursorPos(1,1)!@#&end!@#& !@#&---------------------------------------------------------------------------------------------------------------------!@#& !@#&function select(...)!@#& !@#&        -- !@#&        local Objects = {}!@#&        local function newObj(class,name,x1,y1,width,height)!@#&                --if not Objects[class] then Objects[class] = {} end!@#&                Objects[class] = Objects[class] or {}!@#&                Objects[class][name] = {}!@#&                Objects[class][name][\"x1\"]=x1!@#&                Objects[class][name][\"y1\"]=y1!@#&                Objects[class][name][\"x2\"]=x1+width-1!@#&                Objects[class][name][\"y2\"]=y1+height-1!@#&        end!@#& !@#&        local function drawButton(x,y,name,textColor,backColor)!@#&                local sizeOfButton = 2+#name+2!@#&                square(x,y,sizeOfButton,1,backColor)!@#&                colorText(x+2,y,name,textColor)!@#&                newObj(\"buttons\",name,x,y,sizeOfButton,1)!@#&        end!@#& !@#&        local text1 = arg[1]!@#&        local text2 = arg[2]!@#& !@#&        local sizeOfText1 = #text1!@#&        local sizeOfText2 = #text2!@#&        local hereIsOnlyOneElement = false!@#&        if sizeOfText1 == 0 then hereIsOnlyOneElement = true end!@#& !@#&        --     !@#&        local theLongestElement = 0!@#&        for i=1,sizeOfText1 do!@#&                if #text1[i] > theLongestElement then theLongestElement = #text1[i] end!@#&        end!@#&        for i=1,sizeOfText2 do!@#&                if #text2[i] > theLongestElement then theLongestElement = #text2[i] end!@#&        end!@#& !@#&        --      !@#&        local countOfButtons = #arg-2!@#&        local sizeOfAllButtons = 0!@#&        for i=1,countOfButtons do!@#&                sizeOfAllButtons = sizeOfAllButtons + 2+#arg[2+i][1]+2 + 1!@#&        end!@#&        sizeOfAllButtons = sizeOfAllButtons - 1!@#&        if sizeOfAllButtons>theLongestElement then theLongestElement=sizeOfAllButtons end!@#& !@#&        --     !@#&        local xWindowSize = 2 + theLongestElement + 2!@#&        local yWindowSize = nil!@#&        if hereIsOnlyOneElement then!@#&                yWindowSize = 2 + sizeOfText2 + 3!@#&        else!@#&                yWindowSize = 2 + sizeOfText1 + 1 + sizeOfText2 + 3!@#&        end!@#& !@#&        local xStart = math.floor(xSize/2-xWindowSize/2)!@#&        local yStart = math.floor(ySize/2-yWindowSize/2)!@#&       !@#&        --  !@#&        emptyWindow(xStart,yStart,xWindowSize,yWindowSize,\" \")!@#& !@#&        --TEXTS!@#&        term.setBackgroundColor(colors.white)!@#&        for i=1,sizeOfText1 do!@#&                colorText(xStart+2,yStart+1+i,text1[i],colors.gray)!@#&        end!@#&        for i=1,sizeOfText2 do!@#&                if hereIsOnlyOneElement then!@#&                        colorText(xStart+2,yStart+1+sizeOfText1+i,text2[i],colors.lightGray)!@#&                else!@#&                        colorText(xStart+2,yStart+2+sizeOfText1+i,text2[i],colors.lightGray)!@#&                end!@#&        end!@#& !@#&        local xStartForButtons = xStart+xWindowSize-1 - sizeOfAllButtons - 1!@#&        local yStartForButtons = yStart+yWindowSize-2!@#&        for i=1,countOfButtons do!@#&                local text = arg[2+i][1]!@#&                local textColor = tonumber(arg[2+i][3])!@#&                local backColor = tonumber(arg[2+i][2])!@#& !@#&                drawButton(xStartForButtons,yStartForButtons,text,textColor,backColor)!@#&                xStartForButtons = xStartForButtons + 2+#arg[2+i][1]+2+1!@#&        end!@#& !@#&        while true do!@#&                local event,side,x,y = os.pullEvent()!@#&                if event == \"mouse_click\" then!@#&                        for key,val in pairs(Objects[\"buttons\"]) do!@#&                                if x>=Objects[\"buttons\"][key][\"x1\"] and x<=Objects[\"buttons\"][key][\"x2\"] and y==Objects[\"buttons\"][key][\"y1\"] then!@#&                                        drawButton(Objects[\"buttons\"][key][\"x1\"],Objects[\"buttons\"][key][\"y1\"],key,colors.white,colors.blue)!@#&                                        sleep(0.2)!@#&                                        return key!@#&                                end!@#&                        end!@#&                end!@#&        end!@#&end!@#& !@#&---------------------------------------------------------------------------------------------------------------------!@#& !@#&function aboutFile(x,y,xWindowSize,path)!@#&        os.loadAPI(\"System/API/image\")!@#& !@#&        local name = fs.getName(path)!@#&        local limitOfText = xWindowSize - 2!@#&        local yWindowSize = 16!@#& !@#&        -- !@#&        local Objects = {}!@#&        local function newObj(class,name,x1,y1,width,height)!@#&                Objects[class] = Objects[class] or {}!@#&                Objects[class][name] = {}!@#&                Objects[class][name][\"x1\"]=x1!@#&                Objects[class][name][\"y1\"]=y1!@#&                Objects[class][name][\"x2\"]=x1+width-1!@#&                Objects[class][name][\"y2\"]=y1+height-1!@#&        end!@#& !@#&        -- !@#&        local function drawButton(x,y,name,textColor,backColor)!@#&                local sizeOfButton = 2+#name+2!@#&                square(x,y,sizeOfButton,1,backColor)!@#&                colorText(x+2,y,name,textColor)!@#&                newObj(\"buttons\",name,x,y,sizeOfButton,1)!@#&        end!@#& !@#&        --------------- , !@#& !@#&        local info = {}!@#& !@#&        info[\"fileFormat\"] = getFileFormat(path)!@#& !@#&        info[\"fileType\"] = getFileType(path)!@#& !@#&        info[\"fileSize\"] = math.ceil(getFileSize(path)/1024)..\"KB\"!@#& !@#&        info[\"readOnly\"] = tostring(fs.isReadOnly(path))!@#&        --------------- !@#& !@#&        --  GOVNA,      !@#&        if y+yWindowSize - 1  >= ySize then y = y - (y+yWindowSize - 1 - ySize) - 1 end!@#&        if x+xWindowSize - 1  >= xSize then x = x - (x+xWindowSize - 1 - xSize) - 1 end!@#& !@#&        -- !@#&        emptyWindow(x,y,xWindowSize,yWindowSize,\"Properties\")!@#& !@#&        --, !@#&        drawOSIcon(x+1,y+2,path,name,info[\"fileFormat\"])!@#& !@#&        --  !@#&        square(x,y+7,xWindowSize,1,colors.lightGray)!@#&        colorText(x+1,y+7,\"Info\",colors.white)!@#& !@#&        --   !@#&        term.setBackgroundColor(colors.white)!@#&        colorText(x+8,y+3,stringLimit(\"start\",name,xWindowSize-9),colors.gray)!@#&        colorText(x+8,y+4,info[\"fileSize\"],colors.lightGray)!@#& !@#&        --  !@#&        local textStart = y+9!@#&        colorText(x+1,textStart,\"Type:\",colors.gray)!@#&        usualText(x+1,textStart+1,\"Size:\",colors.gray)!@#&        usualText(x+1,textStart+2,\"Path:\",colors.gray)!@#&        usualText(x+1,textStart+3,\"Read only:\",colors.gray)!@#& !@#&        colorText(x+7,textStart,info[\"fileType\"],colors.lightGray)!@#&        usualText(x+7,textStart+1,info[\"fileSize\"])!@#&        usualText(x+7,textStart+2,stringLimit(\"start\",path,xWindowSize-8))!@#&        usualText(x+12,textStart+3,info[\"readOnly\"])!@#& !@#&        --!@#&        drawButton(x+xWindowSize-11,y+yWindowSize-2,\"Close\",colors.black,colors.lightBlue)!@#& !@#&        --   !@#&        while true do!@#&                local event,side,x,y = os.pullEvent()!@#&                if event == \"mouse_click\" then!@#&                        for key,val in pairs(Objects[\"buttons\"]) do!@#&                                if x>=Objects[\"buttons\"][key][\"x1\"] and x<=Objects[\"buttons\"][key][\"x2\"] and y==Objects[\"buttons\"][key][\"y1\"] then!@#&                                        drawButton(Objects[\"buttons\"][key][\"x1\"],Objects[\"buttons\"][key][\"y1\"],key,colors.white,colors.blue)!@#&                                        sleep(0.2)!@#&                                        return key!@#&                                end!@#&                        end!@#&                end!@#&        end!@#&end!@#& !@#&---------------------------------------------------------------------------------------------------------------------!@#& !@#&function progressBar(xStart,yStart,xWindowSize,title,text,speed)!@#&        --  !@#&        if xWindowSize < 4+#text then!@#&                xWindowSize = 4+#text!@#&        end!@#& !@#&        local yWindowSize = 6!@#&        local sizeOfProgressBar = xWindowSize - 4!@#& !@#&        -- !@#&        xStart,yStart = correctStartCoords(xStart,yStart,xWindowSize,yWindowSize)!@#& !@#&        -- !@#&        emptyWindow(xStart,yStart,xWindowSize,yWindowSize,title)!@#& !@#&        -- !@#&        term.setBackgroundColor(colors.white)!@#&        colorText(math.floor(xStart+(xWindowSize/2-#text/2)),yStart+2,text,colors.gray)!@#& !@#&        --  !@#&        local xProgressBarPos = xStart+2!@#&        local yProgressBarPos = yStart+4!@#&        drawProgressBar(xProgressBarPos,yProgressBarPos,sizeOfProgressBar,1,colors.lightBlue,colors.lightGray,0)!@#&        sleep(0)!@#&        for i=1,100,speed do!@#&                drawProgressBar(xProgressBarPos,yProgressBarPos,sizeOfProgressBar,1,colors.lightBlue,colors.lightGray,i)!@#&                sleep(0)!@#&        end!@#&        drawProgressBar(xProgressBarPos,yProgressBarPos,sizeOfProgressBar,1,colors.lightBlue,colors.lightGray,100)!@#&end!@#& !@#&---------------------------------------------------------------------------------------------------------------------!@#& !@#&function search(xStart,yStart,xWindowSize,limitOfElements,searchText)!@#& !@#&        os.loadAPI(\"System/API/image\")!@#& !@#&        local searchList = {}!@#& !@#&        local sizeOfOneElement = 5!@#&        local yWindowSize = 4 + sizeOfOneElement*limitOfElements!@#&        local sizeOfSearchBar = xWindowSize - #searchText - 3!@#&        local xStartOfSearchBar = xStart + 2 + #searchText!@#&        local yStartOfSearchBar = yStart + 1!@#&        local limitOfAllText = xWindowSize - 10!@#&        local xWindowEnd = xStart + xWindowSize - 1!@#&        local yWindowEnd = yStart + yWindowSize - 1!@#& !@#&        local fromElement = 1!@#&        local searchInput = \"\"!@#& !@#&        -- !@#&        local Objects = {}!@#&        local function newObj(class,name,x1,y1,width,height,fileType,fileSize,path,fileName,fileFormat)!@#&                Objects[class] = Objects[class] or {}!@#&                Objects[class][name] = {}!@#&                Objects[class][name][\"x1\"]=x1!@#&                Objects[class][name][\"y1\"]=y1!@#&                Objects[class][name][\"x2\"]=x1+width-1!@#&                Objects[class][name][\"y2\"]=y1+height-1!@#&                Objects[class][name][\"fileType\"]=fileType!@#&                Objects[class][name][\"fileSize\"]=fileSize!@#&                Objects[class][name][\"path\"]=path!@#&                Objects[class][name][\"fileName\"]=fileName!@#&                Objects[class][name][\"fileFormat\"]=fileFormat!@#&        end!@#& !@#&        local function drawConcretnoIcon(xStart,yStart,path,name,fileType,fileSize,backColor,fileFormat)!@#&                drawOSIcon(xStart,yStart,path,name,fileFormat)!@#&                term.setBackgroundColor(backColor)!@#&                colorText(xStart+8,yStart,stringLimit(\"end\",name,limitOfAllText),colors.gray)!@#&                colorText(xStart+8,yStart+1,stringLimit(\"start\",path,limitOfAllText),colors.lightGray)!@#&                colorText(xStart+8,yStart+2,stringLimit(\"start\",\"Type: \"..fileType,limitOfAllText),colors.lightGray)!@#&                colorText(xStart+8,yStart+3,stringLimit(\"start\",\"Size: \"..math.ceil(fileSize/1024)..\"KB\",limitOfAllText),colors.lightGray)!@#& !@#&                newObj(\"icon\",path..\"/\"..name,xStart,yStart,xWindowSize,4,fileType,fileSize,path,name,fileFormat)!@#&        end!@#& !@#&        local function drawSearches(fromElement)!@#&                -- !@#&                Objects = {}!@#&                newObj(\"icon\",\"cykaBlyad\",-5,-5,1,1,\"hehe\",5)          !@#& !@#&                --  !@#&                square(xStart,yStart+3,xWindowSize-1,yWindowSize-3,colors.white)!@#& !@#&                if #searchList == 0 then!@#&                        colorText(xStart+1,yStart+4,\"No mathes found.\",colors.lightGray)!@#&                else!@#&                        local iconCounter = 1!@#&                        for i=fromElement,#searchList do!@#&                                local yIconPos = yStart+4 + iconCounter*sizeOfOneElement - sizeOfOneElement!@#&                               !@#&                                drawConcretnoIcon(xStart+1,yIconPos,searchList[i][\"path\"],searchList[i][\"name\"],searchList[i][\"fileType\"],searchList[i][\"fileSize\"],colors.white,searchList[i][\"fileFormat\"])!@#& !@#&                                iconCounter = iconCounter + 1!@#&                                if iconCounter > limitOfElements then break end!@#&                        end!@#&                end!@#& !@#&                scrollBar(xWindowEnd,yStart+3,yWindowSize-3,#searchList,fromElement,colors.lightGray,colors.lightBlue)!@#&        end!@#& !@#&        local function textOnSearchBar()!@#&                term.setBackgroundColor(colors.white)!@#&                usualText(xStartOfSearchBar,yStartOfSearchBar,string.rep(\" \",sizeOfSearchBar))!@#&                colorText(xStartOfSearchBar,yStartOfSearchBar,stringLimit(\"start\",searchInput,sizeOfSearchBar),colors.black)!@#&        end!@#& !@#&        --!@#&        sampleWindow(xStart,yStart,xWindowSize,yWindowSize)!@#&        -- !@#&        square(xStart,yStart,xWindowSize,3,colors.blue)!@#&        colorText(xStart+1,yStart+1,searchText,colors.white)!@#&        square(xStartOfSearchBar,yStartOfSearchBar,sizeOfSearchBar,1,colors.white)!@#& !@#&        drawSearches(fromElement)!@#& !@#&        while true do!@#&                textOnSearchBar(searchInput)!@#&                if #searchInput > sizeOfSearchBar then!@#&                        term.setCursorPos(xStartOfSearchBar+sizeOfSearchBar-1,yStartOfSearchBar)!@#&                else!@#&                        term.setCursorPos(xStartOfSearchBar+#searchInput,yStartOfSearchBar)!@#&                end!@#& !@#&                term.setCursorBlink(true)!@#& !@#&                local event,side,x,y = os.pullEvent()!@#&                if event == \"mouse_scroll\" then!@#&                        term.setCursorBlink(false)!@#&                        if side == 1 then!@#&                                fromElement = fromElement + 1!@#&                                if fromElement > #searchList then!@#&                                        fromElement = #searchList!@#&                                else!@#&                                        drawSearches(fromElement)!@#&                                end!@#&                        else!@#&                                fromElement = fromElement - 1!@#&                                if fromElement < 1 then!@#&                                        fromElement = 1!@#&                                else!@#&                                        drawSearches(fromElement)!@#&                                end!@#&                        end!@#&                elseif event == \"mouse_click\" then!@#&                        for key,val in pairs(Objects[\"icon\"]) do!@#&                                if x>=Objects[\"icon\"][key][\"x1\"] and x<=Objects[\"icon\"][key][\"x2\"] and y>=Objects[\"icon\"][key][\"y1\"] and y<=Objects[\"icon\"][key][\"y2\"] then!@#&                                        square(Objects[\"icon\"][key][\"x1\"]-1,Objects[\"icon\"][key][\"y1\"],xWindowSize-1,4,colors.blue)!@#&                                        drawConcretnoIcon(Objects[\"icon\"][key][\"x1\"],Objects[\"icon\"][key][\"y1\"],Objects[\"icon\"][key][\"path\"],Objects[\"icon\"][key][\"fileName\"],Objects[\"icon\"][key][\"fileType\"],Objects[\"icon\"][key][\"fileSize\"],colors.blue,Objects[\"icon\"][key][\"fileFormat\"])!@#&                                        sleep(0.3)!@#&                                        term.setCursorBlink(false)!@#&                                        return string.sub(key,2,-1)!@#&                                end!@#&                        end!@#&                        term.setCursorBlink(false)!@#&                        return nil!@#& !@#&                elseif event == \"char\" then!@#&                        fromElement = 1!@#&                        searchInput = searchInput..side!@#&                        searchList = searchInAllFiles(\"/\",searchInput)!@#&                        drawSearches(fromElement)!@#&                elseif event == \"key\" then!@#&                        if side == 14 then!@#&                                fromElement = 1!@#&                                searchInput = string.sub(searchInput,1,-2)!@#&                                searchList = searchInAllFiles(\"/\",searchInput)!@#&                                drawSearches(fromElement)!@#&                        end!@#&                end!@#&        end!@#&end!@#& !@#&--print(\"You selected: \"..search(2,2,28,2,\"Search\"))!@#& !@#& !@#&---------------------------------------------------------------------------------------------------------------------!@#& !@#&function info(xStart,yStart,title,text)!@#&        local sizeOfText = #text!@#&        local xWindowSize = 4+sizeOfText!@#&        local yWindowSize = 4!@#&        local xStart,yStart = correctStartCoords(xStart,yStart,xWindowSize,yWindowSize)!@#& !@#&        emptyWindow(xStart,yStart,xWindowSize,yWindowSize,title)!@#& !@#&        term.setBackgroundColor(colors.white)!@#&        colorText(xStart+2,yStart+2,text,colors.gray)!@#&end!@#& !@#&---------------------------------------------------------------------------------------------------------------------!@#& !@#&--[[function fileManager(mode,workPath)!@#&        if workPath == nil then workPath = \"\" end!@#& !@#&        local xSize,ySize = term.getSize()!@#& !@#&        local managerX = xSize-3!@#&        local managerY = ySize-3!@#& !@#&        local xStart = 2!@#&        local yStart = 2!@#& !@#&        local main = window.create(term.native(),xStart,yStart,managerX+1,managerY+1)!@#&        term.redirect(main)!@#& !@#&        local function getFoldersList(workPath)!@#& !@#&        end!@#& !@#&        local function drawManager()!@#&                local currentPath = fs.getName(workPath)!@#&                emptyWindow(1,1,managerX,managerY,currentPath)!@#&                colorTextWithBack(1,1,\"x\",colors.black,colors.red);colorTextWithBack(2,1,\"-\",colors.black,colors.orange);colorTextWithBack(3,1,\"+\",colors.black,colors.lime)!@#&        end!@#& !@#&        local function clickedAtArea(x,y,sx,sy,ex,ey)!@#&        if (x >= sx) and (x <= ex) and (y >= sy) and (y <= ey) then return true end    !@#&        return false!@#&        end!@#& !@#&        drawManager()!@#& !@#&        term.redirect(term.native())!@#&end]]",["encryptor.cfg"]="1=eafazf!@#&2=ezffqq!@#&3=ezfvfp!@#&4=eafooz!@#&5=eafaiz!@#&6=ezviio!@#&7=ezvzvi!@#&8=eqfooz!@#&9=eommqo!@#&0=ezivup!@#&a=ealajo!@#&b=eopxzj!@#&c=evmsyo!@#&d=ebiiql!@#&e=epovuz!@#&f=efivmt!@#&g=ezvito!@#&h=ezlfbh!@#&i=eaquat!@#&j=etirra!@#&k=emorta!@#&l=etampl!@#&m=enodus!@#&n=ezviri!@#&o=eponis!@#&p=enuihu!@#&q=exyupi!@#&r=ezdads!@#&s=eigurd!@#&t=eamati!@#&u=ebalro!@#&v=etshat!@#&w=ealsis!@#&x=ekizli!@#&y=eltrya!@#&z=espopu",},},["OS"]="-----------------------                 ----------------------!@#&local Args = {...}!@#&os.loadAPI(\"SpeedAPI/context\")!@#&os.loadAPI(\"SpeedAPI/image\")!@#&os.loadAPI(\"SpeedAPI/windows\")!@#&os.loadAPI(\"SpeedAPI/config\")!@#&os.loadAPI(\"SpeedAPI/zip\")!@#&os.loadAPI(\"SpeedAPI/lddfm\")!@#&os.loadAPI(\"SpeedAPI/peripheral\")!@#& !@#&----------------------            !@#&!@#&if peripheral.find(\"modem\") then!@#&  rednet.close(peripheral.find(\"modem\"))!@#&end!@#&!@#&local function findPeripheral(whatToFind)!@#&  local PeriList = rs.getSides()!@#&  for i=1,#PeriList do!@#&    if peripheral.getType(PeriList[i]) == whatToFind then!@#&      return PeriList[i]!@#&    end!@#&  end!@#&end!@#& !@#&--               !@#&local m = findPeripheral(\"monitor\")!@#&if Args[1] == \"m\" then!@#&        if m ~= nil then!@#&                m = peripheral.wrap(m)!@#&                if Args[2] ~= nil then!@#&                        m.setTextScale(tonumber(Args[2]))!@#&                end!@#&                term.redirect(m)!@#&        end!@#&end!@#& !@#&if not term.isColor() then error(\"This program will work only on advanced computer.\") end!@#& !@#&--[[                     !@#&local standartErrorFunction = error!@#&error = windows.error]]!@#& !@#&----------------------           !@#&local xSize, ySize = term.getSize()!@#&local centerX = math.floor(xSize/2)!@#&local centerY = math.floor(ySize/2)!@#&local appWidth = 10!@#&local appHeight = 6!@#& !@#&local countOfAppsByX = math.floor((xSize-2)/(appWidth+2))!@#&local countOfAppsByY = math.floor((ySize-5)/(appHeight+1))!@#&local countOfAppsOnDesktop = countOfAppsByX*countOfAppsByY!@#& !@#&local countOfDesktops = nil!@#& !@#&local startDisplayAllAppsFromX = centerX - math.floor((countOfAppsByX*(appWidth+2)-2)/2) + 1!@#&local startDisplayAllAppsFromY = centerY - math.floor((countOfAppsByY*(appHeight+1)-1)/2) + 1!@#& !@#&local currentDesktop = 1!@#&local currentBackground = colors.lightBlue!@#&local topBarColor = colors.gray!@#& !@#&--                !@#&local Obj = {}!@#&local ObjBottom = {}!@#&local ObjApp = {}!@#& !@#&local clipboardName = nil!@#& !@#&local workPath = \"\"!@#&local workPathHistory = {}!@#& !@#&local hideFileFormat = true!@#&local showHiddenFiles = true!@#&local showSystemFolders = true!@#& !@#&local Notification = nil!@#&local sizeOfNotification = 24!@#& !@#&local findedModem = windows.findPeripheral(\"modem\")!@#&local modem = nil!@#& !@#&----------------------                  ----------------------!@#& !@#&--                            !@#&local function newObjApp(name,x1,y1,width,height,id,fileFormat)!@#&        ObjApp[name]={}!@#&        ObjApp[name][\"x1\"]=x1!@#&        ObjApp[name][\"y1\"]=y1!@#&        ObjApp[name][\"x2\"]=x1+width-1!@#&        ObjApp[name][\"y2\"]=y1+height-1!@#&        ObjApp[name][\"id\"]=id!@#&        ObjApp[name][\"fileFormat\"]=fileFormat!@#&end!@#& !@#&--                        !@#&local function newObj(name,x1,y1,width,height)!@#&        Obj[name]={}!@#&        Obj[name][\"x1\"]=x1!@#&        Obj[name][\"y1\"]=y1!@#&        Obj[name][\"x2\"]=x1+width-1!@#&        Obj[name][\"y2\"]=y1+height-1!@#&end!@#& !@#&--                      !@#&local function newObjBottom(name,x1,y1,width,height)!@#&        ObjBottom[name]={}!@#&        ObjBottom[name][\"x1\"]=x1!@#&        ObjBottom[name][\"y1\"]=y1!@#&        ObjBottom[name][\"x2\"]=x1+width-1!@#&        ObjBottom[name][\"y2\"]=y1+height-1!@#&end!@#& !@#&--                           !@#&local function pastebin(mode,paste,filename)!@#&        if mode == \"get\" then!@#&	    term.setBackgroundColor(colors.black)!@#&	    term.setTextColor(colors.white)!@#&	    term.setCursorPos(1,1)!@#&	    term.clear()!@#&            shell.run(\"pastebin \"..mode..\" \"..paste..\" \"..workPath..\"/\"..filename)!@#&        elseif mode == \"put\" then      !@#&	    term.setBackgroundColor(colors.black)!@#&	    term.setTextColor(colors.white)!@#&	    term.setCursorPos(1,1)!@#&	    term.clear()    !@#&            shell.run(\"pastebin put \"..workPath..\"/\"..filename)!@#&	elseif mode == \"run\" then !@#&            term.setBackgroundColor(colors.black)!@#&	    term.setTextColor(colors.white)!@#&	    term.setCursorPos(1,1)!@#&	    term.clear()         !@#&            shell.run(\"pastebin get \"..paste..\" cyka\")!@#&	    shell.run(\"cyka\")!@#&	    fs.delete(\"cyka\")!@#&        end!@#&end!@#& !@#&--                        !@#&local function stringLimit(text,size)!@#&        if string.len(text)<=size then return text end!@#&        return string.sub(text,1,size-3)..\"...\"!@#&end!@#& !@#&--                        !@#&local function stringLimitFromStart(text,size)!@#&        if string.len(text)<=size then return text end!@#&        return \"...\"..string.sub(text,string.len(text)-size+4,string.len(text))!@#&end!@#& !@#&--                                         !@#&local function usualText(x,y,text)!@#&        term.setCursorPos(x,y)!@#&        term.write(text)!@#&end!@#& !@#&--                             !@#&local function square(x1,y1,width,height,color)!@#&        local string = string.rep(\" \",width)!@#&        term.setBackgroundColor(color)!@#&        for y=y1,(y1+height-1) do!@#&                usualText(x1,y,string)!@#&        end!@#&end!@#& !@#&--                     !@#&local function clearScreen(color)!@#&        term.setBackgroundColor(color)!@#&        term.clear()!@#&end!@#& !@#&--                                      1, 1!@#&local function prepareToExit()!@#&        clearScreen(colors.black)!@#&        term.setTextColor(colors.white)!@#&        term.setCursorPos(1,1)!@#&	if peripheral.find(\"modem\") then!@#&		rednet.open(peripheral.find(\"modem\"))!@#&	end!@#&end!@#& !@#&--                        !@#&local function fadeIn(time)!@#&        clearScreen(colors.gray)!@#&        sleep(time)!@#&        clearScreen(colors.lightGray)!@#&        sleep(time)!@#&        clearScreen(colors.white)!@#&        sleep(time)!@#&end!@#& !@#&--                        !@#&local function fadeOut(time)!@#&        clearScreen(colors.lightGray)!@#&        sleep(time)!@#&        clearScreen(colors.gray)!@#&        sleep(time)!@#&        clearScreen(colors.black)!@#&        sleep(time)!@#&        term.setCursorPos(1,1)!@#&        term.setTextColor(colors.white)!@#&end!@#& !@#&--                                                  !@#&local function setWallpaper(path)!@#&        fs.delete(\"System/OS/wallpaper.png\")!@#&        fs.copy(path,\"System/OS/wallpaper.png\")!@#&end!@#& !@#&--                        ,            ,                     !@#&local function askForReplaceFile(path)!@#&        if fs.exists(path) then!@#&                local action = windows.select({\"File already exists.\"},{\"Do you want to replace it?\"},{\"No\",colors.lightGray,colors.black},{\"Yes\",colors.lightBlue,colors.black})!@#&                if action == \"Yes\" then!@#&                        return true!@#&                else!@#&                        return false!@#&                end!@#&        end!@#&        return true!@#&end!@#& !@#&--                                             !@#&local function copy(whatToCopy)!@#&        fs.delete(\"System/Clipboard.temp\")!@#&        fs.copy(whatToCopy,\"System/Clipboard.temp\")!@#&end!@#& !@#&local function paste(path,name)!@#&        local agree = askForReplaceFile(path..\"/\"..name)!@#&        if agree then!@#&                fs.delete(path..\"/\"..name)!@#&                fs.copy(\"System/Clipboard.temp\",path..\"/\"..name)!@#&        end!@#&end!@#& !@#&local function cut(path)!@#&        fs.delete(\"System/Clipboard.temp\")!@#&        fs.copy(path,\"System/Clipboard.temp\")!@#&        fs.delete(path)!@#&end!@#& !@#&local function rename(path,name,renameToName)!@#&        local agree = askForReplaceFile(path..\"/\"..renameToName)!@#&        if agree then!@#&                fs.delete(\"System/OS/rename.temp\")!@#&                fs.move(path..\"/\"..name,\"System/OS/rename.temp\")!@#&                fs.delete(path..\"/\"..renameToName)!@#&                fs.move(\"System/OS/rename.temp\",path..\"/\"..renameToName)!@#&        end!@#&end    !@#& !@#&--       ,                                              !@#&local function programFinished()!@#&        local xCusor,yCursor = term.getCursorPos()!@#&        term.setBackgroundColor(colors.black)!@#&        term.setTextColor(colors.white)!@#&	if peripheral.find(\"modem\") then!@#&		rednet.close(peripheral.find(\"modem\"))!@#&	end!@#&!@#&        usualText(1,yCursor+1,\"Press any key to quit.\")!@#& !@#&        while true do!@#&                local event = os.pullEvent()!@#&                if event == \"monitor_touch\" or event == \"mouse_click\" or event == \"key\" then break end!@#&        end!@#&end!@#& !@#&--                            !@#&local function topBar(topBarColor)!@#&        local time = textutils.formatTime(os.time(),true)!@#&        local string = \" OS \"..string.rep(\" \",xSize-6-#time)..time..\" S\"!@#&        term.setBackgroundColor(topBarColor)!@#&        windows.colorText(1,1,string,colors.white)!@#&        windows.colorText(6,1,\"View\",colors.lightGray) !@#&end!@#&newObj(\"OS\",1,1,4,1)!@#&newObj(\"Search\",xSize,1,1,1)!@#&newObj(\"View\",5,1,6,1)!@#& !@#&--                                                          !@#&local function drawKonkretnoApp(x,y,name,background,id)!@#& !@#&        --                           !@#&        newObjApp(name,x,y,appWidth,appHeight,id,windows.getFileFormat(name))!@#& !@#&        --                !@#&        windows.drawOSIcon(x+2,y,workPath,name,ObjApp[name][\"fileFormat\"],showSystemFolders)!@#& !@#&        --                          !@#&        term.setBackgroundColor(background)!@#&        if fs.isReadOnly(workPath..\"/\"..name) then!@#&                term.setTextColor(colors.red)!@#&        else!@#&                term.setTextColor(colors.black)!@#&        end!@#&        if windows.isFileHidden(name) then!@#&                term.setTextColor(colors.gray)!@#&        end!@#&        if hideFileFormat then!@#&                name = windows.hideFileFormat(name)!@#&        end!@#&        name = stringLimit(name,10)!@#&        usualText(math.floor(x+5-#name/2),y+5,name)!@#& !@#&end!@#& !@#&--                                                         !@#&local function displayApps(workPath,currentDesktop,background)!@#& !@#&        --                  !@#&        ObjApp = {}!@#&        ObjBottom = {}!@#& !@#&        --               !@#&        --clearScreen(background)!@#&        square(1,2,xSize,ySize-1,background)!@#&        if fs.exists(\"System/OS/wallpaper.png\") then!@#&		huy = paintutils.loadImage(\"System/OS/wallpaper.png\")!@#&                paintutils.drawImage(huy, 1,1)!@#&        end!@#& !@#&        --                       !@#&        topBar(topBarColor)!@#&       !@#&        --                                /       !@#&        local files = fs.list(workPath)!@#&        --                     ,                         !@#&        files = windows.reorganizeFilesAndFolders(workPath,files,showHiddenFiles,showSystemFolders)!@#& !@#&        local countOfFiles = #files!@#&        countOfDesktops = math.ceil(countOfFiles/(countOfAppsByY*countOfAppsByX))!@#& !@#&        --                       !@#&        local bottomButtonsStartX = nil!@#&        if #workPathHistory == 0 then!@#&                bottomButtonsStartX = centerX - math.floor((countOfDesktops*2+1)/2)!@#&        else!@#&                bottomButtonsStartX = centerX - math.floor((countOfDesktops*2-1)/2)!@#&        end!@#&        local bottomY = ySize-1!@#&        for i=1,countOfDesktops do!@#&                local bottomX = bottomButtonsStartX + i * 2!@#&                if currentDesktop == i then!@#&                        paintutils.drawPixel(bottomX,bottomY,colors.white)!@#&                else!@#&                        paintutils.drawPixel(bottomX,bottomY,colors.lightGray)!@#&                end!@#&                newObjBottom(i,bottomX,bottomY,1,1)!@#&        end!@#&        if #workPathHistory>0 then!@#&                paintutils.drawPixel(bottomButtonsStartX,bottomY,colors.white)!@#&                term.setTextColor(colors.black)!@#&                usualText(bottomButtonsStartX,bottomY,\"<\")!@#&                newObj(\"<\",bottomButtonsStartX,bottomY,1,1)!@#&        end!@#& !@#&        --                          !@#&        local appCounter = 1 + currentDesktop * countOfAppsByY * countOfAppsByX - countOfAppsByY * countOfAppsByX!@#&        for y = 1,countOfAppsByY do!@#&                for x = 1,countOfAppsByX do!@#&                        if files[appCounter] ~= nil then!@#&                                drawKonkretnoApp(startDisplayAllAppsFromX+x*(appWidth+2)-(appWidth+2),startDisplayAllAppsFromY+y*(appHeight+1)-(appHeight+1),files[appCounter],background,appCounter)!@#&                                appCounter = appCounter + 1!@#&                        else!@#&                                break!@#&                        end!@#&                end!@#&        end!@#& !@#&        --                    !@#&        if Notification then!@#&                local yNoti = 2!@#&                local xNoti = math.floor(centerX - sizeOfNotification/2)!@#&                windows.square(xNoti,yNoti,sizeOfNotification,2,colors.white)!@#&                windows.colorText(xNoti+1,yNoti,windows.stringLimit(\"end\",Notification[\"title\"],sizeOfNotification-2),colors.gray)!@#&                windows.colorText(xNoti+1,yNoti+1,windows.stringLimit(\"end\",Notification[\"text\"],sizeOfNotification-2),colors.lightGray)!@#&                windows.colorText(xNoti+sizeOfNotification-1,yNoti,\"x\",colors.black)!@#&                newObj(\"closeNoti\",xNoti+sizeOfNotification-1,yNoti,1,1)!@#&        end!@#&end!@#& !@#&local function askForMakingOSAsStartup()!@#&        local action = windows.select({\"Hello!\"},{\"Do you want to load OS\",\"when computer starts?\"},{\"No\",colors.lightGray,colors.black},{\"Yes\",colors.lightBlue,colors.black})!@#&        if action == \"Yes\" then!@#&                fs.copy(\"OS\",\"startup\")!@#&                config.write(\"System/OS/startup.cfg\",\"load when computer starts\",\"true\")!@#&        else!@#&                config.write(\"System/OS/startup.cfg\",\"load when computer starts\",\"false\")!@#&        end!@#&end!@#& !@#&--                                 !@#&local function launchFile(path,fileFormat,arguments)!@#&        if fileFormat == nil then!@#&                local success,err = loadfile(path)!@#&                if success ~= nil then!@#&                        fadeOut(0)!@#&                        prepareToExit()!@#&                        if arguments == nil then!@#&                                shell.run(path)!@#&                        else!@#&                                shell.run(path..\" \"..arguments)!@#&                        end!@#&                        programFinished()!@#&                        fadeIn(0)!@#&                else!@#&                        windows.error(err)!@#&                end!@#&        elseif fileFormat == \".nfp\" then!@#&                fadeOut(0)!@#&                shell.run(\"/SpeedOS/Applications/Sketch \"..path)!@#&		if peripheral.find(\"modem\") then!@#&			rednet.close(peripheral.find(\"modem\"))!@#&		end!@#&                fadeIn(0)!@#&        elseif fileFormat == \".nfa\" then!@#&                fadeOut(0)!@#&                shell.run(\"/SpeedOS/Applications/OLD_NPaint \"..path)!@#&		if peripheral.find(\"modem\") then!@#&			rednet.close(peripheral.find(\"modem\"))!@#&		end!@#&                fadeIn(0)!@#&        elseif fileFormat == \".skch\" then!@#&                fadeOut(0)!@#&                shell.run(\"/SpeedOS/Applications/Sketch \"..path)!@#&		if peripheral.find(\"modem\") then!@#&			rednet.close(peripheral.find(\"modem\"))!@#&		end!@#&                fadeIn(0)!@#&        elseif fileFormat == \".ink\" then!@#&                fadeOut(0)!@#&                shell.run(\"/SpeedOS/Applications/Word \"..path)!@#&		if peripheral.find(\"modem\") then!@#&			rednet.close(peripheral.find(\"modem\"))!@#&		end!@#&                fadeIn(0)!@#&        elseif fileFormat == \".txt\" then!@#&                fadeOut(0)!@#&                shell.run(\"/SpeedOS/Applications/Word \"..path)!@#&		if peripheral.find(\"modem\") then!@#&			rednet.close(peripheral.find(\"modem\"))!@#&		end!@#&                fadeIn(0)!@#&        elseif fileFormat == \".cfg\" then!@#&                fadeOut(0)!@#&                shell.run(\"/SpeedOS/Applications/SpeedCode \"..path)!@#&		if peripheral.find(\"modem\") then!@#&			rednet.close(peripheral.find(\"modem\"))!@#&		end!@#&                fadeIn(0)!@#&        elseif fileFormat == \".lua\" then!@#&                fadeOut(0)!@#&                shell.run(\"/SpeedOS/Applications/SpeedCode \"..path)!@#&		if peripheral.find(\"modem\") then!@#&			rednet.close(peripheral.find(\"modem\"))!@#&		end!@#&                fadeIn(0)!@#&	elseif fileFormat == \".gif\" then!@#&                fadeOut(0)!@#&                shell.run(\"/SpeedOS/Applications/GIFAnimator \"..path)!@#&		if peripheral.find(\"modem\") then!@#&			rednet.close(peripheral.find(\"modem\"))!@#&		end!@#&                fadeIn(0)!@#&	elseif fileFormat == \".png\" then!@#&                fadeOut(0)!@#&                shell.run(\"/SpeedOS/Applications/Sketch \"..path)!@#&		if peripheral.find(\"modem\") then!@#&			rednet.close(peripheral.find(\"modem\"))!@#&		end!@#&                fadeIn(0)!@#&        elseif fileFormat == \".app\" then!@#&                path = path..\"/main\"!@#&                local success,err = loadfile(path)!@#&                if success ~= nil then!@#&                        fadeOut(0)!@#&                        prepareToExit()!@#&                        if arguments == nil then!@#&                                shell.run(path)!@#&                        else!@#&                                shell.run(path..\" \"..arguments)!@#&                        end!@#&                        --programFinished()!@#&                        fadeIn(0)!@#&			if peripheral.find(\"modem\") then!@#&				rednet.close(peripheral.find(\"modem\"))!@#&			end!@#&                else!@#&                        windows.error(err)!@#&                end!@#&        end!@#&end!@#& !@#&--                              !@#&local function gotoDirectory(path)!@#&        workPathHistory[#workPathHistory+1] = workPath!@#&        workPath = path!@#&        currentDesktop = 1!@#&end!@#& !@#&----------------------------------               ----------------------------------------!@#& !@#&if fs.exists(\"System/OS/userdata.cfg\") then!@#&        showSystemFolders = windows.toboolean(config.read(\"System/OS/userdata.cfg\",\"showSystemFolders\"))!@#&        showHiddenFiles = windows.toboolean(config.read(\"System/OS/userdata.cfg\",\"showHiddenFiles\"))!@#&        hideFileFormat = windows.toboolean(config.read(\"System/OS/userdata.cfg\",\"hideFileFormat\"))!@#&else!@#&        config.write(\"System/OS/userdata.cfg\",\"showSystemFolders\",\"true\")!@#&        config.write(\"System/OS/userdata.cfg\",\"showHiddenFiles\",\"true\")!@#&        config.write(\"System/OS/userdata.cfg\",\"hideFileFormat\",\"true\")!@#&end!@#& !@#&--                            !@#&displayApps(workPath,currentDesktop,currentBackground)!@#& !@#&if not fs.exists(\"startup\") then!@#&        if not fs.exists(\"System/OS/startup.cfg\") then!@#&                askForMakingOSAsStartup()!@#&                displayApps(workPath,currentDesktop,currentBackground)!@#&        else!@#&                local govno = config.read(\"System/OS/startup.cfg\",\"load when computer starts\")!@#&                if govno ~= nil and govno ~= \"false\" then!@#&                        askForMakingOSAsStartup()!@#&                        displayApps(workPath,currentDesktop,currentBackground)!@#&                end!@#&        end!@#&end!@#& !@#&--                 !@#&local exitFromProgram = false!@#&while true do!@#& !@#&        if exitFromProgram then break end!@#& !@#&        --                  ,           1                         !@#&        local appCounter = 1 + currentDesktop * countOfAppsByY * countOfAppsByX - countOfAppsByY * countOfAppsByX!@#& !@#&        local event,side,x,y = os.pullEvent()!@#&        --                     ,                   ,                      !@#&        if event == \"monitor_touch\" then side = 1 end!@#&        if event == \"mouse_click\" or event == \"monitor_touch\" then!@#& !@#&                if side == 1 then!@#& !@#&                        --                                ,                                                      BREAK!@#&                        local exit1 = false!@#& !@#&                        --                     \"     \"!@#&                        if #workPathHistory > 0 then!@#&                                if x==Obj[\"<\"][\"x1\"] and y==Obj[\"<\"][\"y1\"] and #workPathHistory > 0 then!@#&                                                --   !@#&                                                term.setBackgroundColor(colors.blue)!@#&                                                term.setTextColor(colors.white)!@#&                                                usualText(Obj[\"<\"][\"x1\"],Obj[\"<\"][\"y1\"],\"<\")!@#&                                                sleep(0.2)!@#&                                                --      !@#&                                                workPath = workPathHistory[#workPathHistory]!@#&                                                workPathHistory[#workPathHistory] = nil!@#&                                                currentDesktop = 1!@#&                                                displayApps(workPath,currentDesktop,currentBackground)!@#&                                                exit1 = true!@#&                                end!@#&                        end!@#& !@#&                        --     ,      ,                                                               !@#&                        for i=1,#ObjBottom do!@#&                                if exit1 then break end!@#&                                if x==ObjBottom[i][\"x1\"] and y==ObjBottom[i][\"y1\"] then!@#&                                        currentDesktop = i!@#&                                        displayApps(workPath,currentDesktop,currentBackground)!@#&                                        exit1=true!@#&                                end!@#&                        end!@#& !@#&                        --              - - - - !@#&                        --     ,      !@#&                        --            !@#&                        --       !@#&                        --               ,                                                    !@#&                        --     ,          ,        !@#&                        for key,val in pairs(ObjApp) do!@#&                                if exit1 then break end!@#&                                for i=appCounter,(appCounter+countOfAppsOnDesktop-1) do!@#&                                        if exit1 then break end!@#&                                        if ObjApp[key][\"id\"] == i then!@#&                                                if x>=ObjApp[key][\"x1\"] and x<=ObjApp[key][\"x2\"] and y>=ObjApp[key][\"y1\"] and y<=ObjApp[key][\"y2\"] then!@#&                                                        square(ObjApp[key][\"x1\"],ObjApp[key][\"y1\"],appWidth,appHeight,colors.blue)!@#&                                                        drawKonkretnoApp(ObjApp[key][\"x1\"],ObjApp[key][\"y1\"],key,colors.blue,ObjApp[key][\"id\"])!@#&                                                        sleep(0.2)!@#& !@#&                                                        --     ,     !!@#&                                                        local fileFormat = ObjApp[key][\"fileFormat\"]!@#& !@#&                                                        if not fs.isDir(workPath..\"/\"..key) then!@#& !@#&                                                                if key ~= \"OS\" and key ~= \"os\" and fileFormat == nil then!@#&                                                                        launchFile(workPath..\"/\"..key,fileFormat)!@#& !@#&                                                                elseif fileFormat == \".nfa\" then!@#&                                                                        launchFile(workPath..\"/\"..key,fileFormat)!@#&                                                                !@#&                                                                elseif fileFormat == \".nfp\" then!@#&                                                                        launchFile(workPath..\"/\"..key,fileFormat)!@#&!@#&                                                                elseif fileFormat == \".skch\" then!@#&                                                                        launchFile(workPath..\"/\"..key,fileFormat)!@#&!@#&                                                                elseif fileFormat == \".txt\" then!@#&                                                                        launchFile(workPath..\"/\"..key,fileFormat)!@#&!@#&                                                                elseif fileFormat == \".lua\" then!@#&                                                                        launchFile(workPath..\"/\"..key,fileFormat)!@#&!@#&                                                                elseif fileFormat == \".ink\" then!@#&                                                                        launchFile(workPath..\"/\"..key,fileFormat)!@#&!@#&								elseif fileFormat == \".gif\" then!@#&                                                                        launchFile(workPath..\"/\"..key,fileFormat)!@#& !@#&                                                                elseif fileFormat == \".zip\" then!@#&                                                                        windows.progressBar(\"auto\",\"auto\",20,\" \",\"Unarchiving\",5)!@#&									shell.run(\"cd \"..workPath)!@#&                                                                        shell.run(workPath..\"/\"..key)!@#&									if peripheral.find(\"modem\") then!@#&										rednet.close(peripheral.find(\"modem\"))!@#&									end!@#&                                                                elseif fileFormat == \".cfg\" then!@#&                                                                        launchFile(workPath..\"/\"..key,fileFormat)!@#& !@#&                                                                elseif key == \"OS\" or key == \"os\" then!@#&                                                                        windows.attention({\"Can't open OS\"},{\"Cause it's already\",\"running.\"})!@#& !@#&                                                                else!@#&                                                                        shell.run(\"SpeedOS/Applications/SpeedCode \"..workPath..\"/\"..key) --windows.attention({\"Can't open this\"},{\"Unknown file extension\"})!@#&									if peripheral.find(\"modem\") then!@#&										rednet.close(peripheral.find(\"modem\"))!@#&									end!@#&                                                                end!@#& !@#&                                                                exit1 = true!@#&                                                                displayApps(workPath,currentDesktop,currentBackground)!@#&                                                        else!@#&                                                                if fileFormat == \".app\" then!@#&                                                                        launchFile(workPath..\"/\"..key,fileFormat)!@#&                                                                        displayApps(workPath,currentDesktop,currentBackground)!@#&                                                                else!@#&                                                                        gotoDirectory(workPath..\"/\"..key)!@#&                                                                        appCounter = 1!@#&                                                                        displayApps(workPath,currentDesktop,currentBackground)!@#&                                                                end!@#&                                                                exit1 = true!@#&                                                        end!@#&                                                end!@#&                                        end!@#&                                end!@#&                        end!@#& !@#&                        if x>=Obj[\"OS\"][\"x1\"] and x<=Obj[\"OS\"][\"x2\"] and y>=Obj[\"OS\"][\"y1\"] and y<=Obj[\"OS\"][\"y2\"] then!@#&                                term.setBackgroundColor(colors.blue)!@#&                                term.setTextColor(colors.white)!@#&                                usualText(1,1,\" OS \")!@#& !@#&                                contextAction = context.menu(Obj[\"OS\"][\"x1\"]+1,Obj[\"OS\"][\"y1\"]+1,{\"About\"},{\"Update\"},\"-\",{\"Reboot\"},{\"Shutdown\"},\"-\",{\"Use Craft OS\"})!@#&                                if contextAction == \"About\" then!@#&                                        launchFile(\"SpeedOS/Applications/About\")!@#&                                        displayApps(workPath,currentDesktop,currentBackground)!@#& !@#&                                elseif contextAction == \"Update\" then!@#&                                        windows.clearScreen(colors.black)!@#&                                        shell.run(\"pastebin run VWYEMZAB\")!@#&                                        fadeOut(0)!@#&                                        os.reboot()!@#& !@#&                                elseif contextAction == \"Reboot\" then!@#&                                        fadeOut(0)!@#&                                        os.reboot()!@#& !@#&                                elseif contextAction == \"Shutdown\" then!@#&                                        windows.tv(0)!@#&                                        os.shutdown()!@#& !@#&                                elseif contextAction == \"Use Craft OS\" then!@#&                                        exitFromProgram = true!@#& !@#&                                elseif contextAction == nil then!@#&                                        displayApps(workPath,currentDesktop,currentBackground)!@#&                                end!@#& !@#&                        elseif x>=Obj[\"Search\"][\"x1\"] and x<=Obj[\"Search\"][\"x2\"] and y>=Obj[\"Search\"][\"y1\"] and y<=Obj[\"Search\"][\"y2\"] then!@#&                                term.setBackgroundColor(colors.blue)!@#&                                windows.colorText(xSize,1,\"S\",colors.white)!@#&                                local searchedPath = windows.search(xSize-27,2,28,2,\"Search\")!@#&                                if searchedPath ~= nil then!@#&                                        if fs.isDir(searchedPath) then!@#&                                                gotoDirectory(searchedPath)!@#&                                                displayApps(workPath,currentDesktop,currentBackground)!@#&                                        else!@#&                                                launchFile(searchedPath,windows.getFileFormat(searchedPath))!@#&                                        end!@#&                                end!@#&                                displayApps(workPath,currentDesktop,currentBackground)!@#& !@#&                        elseif x>=Obj[\"View\"][\"x1\"] and x<=Obj[\"View\"][\"x2\"] and y>=Obj[\"View\"][\"y1\"] and y<=Obj[\"View\"][\"y2\"] then!@#&                               !@#&                                term.setBackgroundColor(colors.blue)!@#&                                windows.colorText(Obj[\"View\"][\"x1\"],Obj[\"View\"][\"y1\"],\" View \",colors.white)!@#&                               !@#&                                local s1 = \"Show hidden files\"; if showHiddenFiles then s1 = \"Hide hidden files\" end!@#&                                local s2 = \"Show system files\"; if showSystemFolders then s2 = \"Hide system files\" end!@#&                                local s3 = \"Hide file format\"; if hideFileFormat then s3 = \"Show file format\" end!@#& !@#&                                local contextAction = context.menu(Obj[\"View\"][\"x1\"],Obj[\"OS\"][\"y1\"]+1,{s1},{s2},\"-\",{s3})!@#&                                if contextAction == \"Show hidden files\" then!@#&                                        showHiddenFiles = true!@#&                                        config.write(\"System/OS/userdata.cfg\",\"showHiddenFiles\",\"true\")!@#&                                elseif contextAction == \"Hide hidden files\" then!@#&                                        showHiddenFiles = false!@#&                                        config.write(\"System/OS/userdata.cfg\",\"showHiddenFiles\",\"false\")!@#&                                elseif contextAction == \"Show file format\" then!@#&                                        hideFileFormat = false!@#&                                        config.write(\"System/OS/userdata.cfg\",\"hideFileFormat\",\"false\")!@#&                                elseif contextAction == \"Hide file format\" then!@#&                                        hideFileFormat = true!@#&                                        config.write(\"System/OS/userdata.cfg\",\"hideFileFormat\",\"true\")!@#&                                elseif contextAction == \"Show system files\" then!@#&                                        showSystemFolders = true!@#&                                        config.write(\"System/OS/userdata.cfg\",\"showSystemFolders\",\"true\")!@#&                                elseif contextAction == \"Hide system files\" then!@#&                                        showSystemFolders = false!@#&                                        config.write(\"System/OS/userdata.cfg\",\"showSystemFolders\",\"false\")!@#&                                end!@#& !@#&                                displayApps(workPath,currentDesktop,currentBackground)!@#&                       !@#&                        elseif Obj[\"closeNoti\"] ~= nil and x==Obj[\"closeNoti\"][\"x1\"] and y==Obj[\"closeNoti\"][\"y1\"] then!@#&                                term.setBackgroundColor(colors.blue)!@#&                                windows.colorText(Obj[\"closeNoti\"][\"x1\"],Obj[\"closeNoti\"][\"y1\"],\"x\",colors.white)!@#&                                sleep(0.2)!@#&                                Notification = nil!@#&                                displayApps(workPath,currentDesktop,currentBackground)!@#&                        elseif x==xSize and y==ySize then!@#&                                Notification = {[\"type\"]=\"Notification\",[\"title\"]=\"Message\",[\"text\"]=\"Cyka, mat tvoy ebal, pidor!\"}!@#&                                displayApps(workPath,currentDesktop,currentBackground)!@#&                        end!@#& !@#&                else!@#&                        local appSelected = false!@#&                        local exit1 = false!@#&                        for key,val in pairs(ObjApp) do!@#&                                if exit1 then break end!@#&                                for i=appCounter,(appCounter+countOfAppsOnDesktop-1) do!@#&                                        if exit1 then break end!@#&                                        if ObjApp[key][\"id\"] == i then!@#&                                                if x>=ObjApp[key][\"x1\"] and x<=ObjApp[key][\"x2\"] and y>=ObjApp[key][\"y1\"] and y<=ObjApp[key][\"y2\"] then!@#&                                                        square(ObjApp[key][\"x1\"],ObjApp[key][\"y1\"],appWidth,appHeight,colors.blue)!@#&                                                        drawKonkretnoApp(ObjApp[key][\"x1\"],ObjApp[key][\"y1\"],key,colors.blue,ObjApp[key][\"id\"])!@#&                                                       !@#&                                                        local fileFormat = ObjApp[key][\"fileFormat\"]!@#&                                                        local thisIsDir = fs.isDir(workPath..\"/\"..key)!@#&                                                        local thisIsReadOnly = fs.isReadOnly(workPath..\"/\"..key)!@#&                                                        local thisIsArchive = false; if fileFormat == \".zip\" then thisIsArchive = true end!@#&                                                        local contextAction = nil!@#&                                                        if fileFormat == \".png\" then!@#&                                                                contextAction = context.menu(x,y,{\"Set as wallpaper\"},\"-\",{\"Cut\"},{\"Copy\"},{\"Delete\"},{\"Rename\"},\"-\",{\"Upload to pastebin\",thisIsDir},{\"Add to archive\"},\"-\",{\"Properties\"})!@#&							elseif fileFormat == \".nfp\" then!@#&								contextAction = context.menu(x,y,{\"Set as wallpaper\"},\"-\",{\"Cut\"},{\"Copy\"},{\"Delete\"},{\"Rename\"},\"-\",{\"Upload to pastebin\",thisIsDir},{\"Add to archive\"},\"-\",{\"Properties\"})!@#&							elseif fileFormat == \".skch\" then!@#&								contextAction = context.menu(x,y,{\"Set as wallpaper\"},\"-\",{\"Cut\"},{\"Copy\"},{\"Delete\"},{\"Rename\"},\"-\",{\"Upload to pastebin\",thisIsDir},{\"Add to archive\"},\"-\",{\"Properties\"})!@#&!@#&                                                        elseif fileFormat == \".app\" then!@#&                                                                contextAction = context.menu(x,y,{\"Show content\"},{\"Run with arguments\"},\"-\",{\"Cut\",thisIsReadOnly},{\"Copy\"},{\"Delete\",thisIsReadOnly},{\"Rename\",thisIsReadOnly},\"-\",{\"Add to archive\",thisIsArchive},\"-\",{\"Properties\"})!@#&                                                        else!@#&                                                                contextAction = context.menu(x,y,{\"Edit\",thisIsDir},{\"Run with arguments\",thisIsDir},\"-\",{\"Cut\",thisIsReadOnly},{\"Copy\"},{\"Delete\",thisIsReadOnly},{\"Rename\",thisIsReadOnly},\"-\",{\"Upload to pastebin\",thisIsDir},{\"Add to archive\",thisIsArchive},\"-\",{\"Properties\"})!@#&                                                        end!@#& !@#&                                                        if contextAction == \"Edit\" then!@#&                                                                exit = true!@#&                                                                fadeOut(0)!@#&                                                                prepareToExit()!@#&                                                                shell.run(\"/SpeedOS/Applications/SpeedCode \"..workPath..\"/\"..key)!@#&								if peripheral.find(\"modem\") then!@#&									rednet.close(peripheral.find(\"modem\"))!@#&								end!@#&                                                                fadeIn(0)!@#& !@#&                                                        elseif contextAction == \"Cut\" then!@#&                                                                cut(workPath..\"/\"..key)!@#&                                                                clipboardName = key!@#& !@#&                                                        elseif contextAction == \"Copy\" then!@#&                                                                copy(workPath..\"/\"..key)!@#&                                                                clipboardName = key!@#& !@#&                                                        elseif contextAction == \"Delete\" then!@#&                                                                fs.delete(workPath..\"/\"..key)                                                          !@#& !@#&                                                        elseif contextAction == \"Rename\" then!@#&                                                                local fileFormat2 = windows.getFileFormat(key) or \"\"!@#&                                                                local data = windows.input(\"auto\",\"auto\",\"New name\",15,{\"Name\",windows.hideFileFormat(key)},{\"Format\",fileFormat2})!@#&                                                                data[1] = windows.hideFileFormat(data[1])!@#&                                                                if data[1] == \"\" then data[1] = \"MyProgram\" end!@#&                                                                rename(workPath,key,data[1]..data[2])!@#& !@#&                                                        elseif contextAction == \"Set as wallpaper\" then!@#&                                                                setWallpaper(workPath..\"/\"..key)!@#& !@#&                                                        elseif contextAction == \"Run with arguments\" then!@#&                                                                local arguments = windows.input(\"auto\",\"auto\",\"Run\",15,{\"Arguments\",\"\"})!@#&                                                                exit = true!@#&                                                                launchFile(workPath..\"/\"..key,fileFormat,arguments[1])!@#& !@#&                                                        elseif contextAction == \"Upload to pastebin\" then!@#&								term.setBackgroundColor(colors.black)!@#&								term.setTextColor(colors.white)!@#&								term.setCursorPos(1, 1)!@#&								term.clear()!@#&                                                                shell.run(\"pastebin put \"..workPath..\"/\"..key)!@#&								io.read()!@#&                                                                --windows.progressBar(\"auto\",\"auto\",5,\" \",\"Uploading to pastebin\",10)!@#&                                                                --pastebin(\"put\",\"cyka\",workPath..\"/\"..key)!@#& !@#&                                                        elseif contextAction == \"Add to archive\" then!@#&                                                                windows.progressBar(\"auto\",\"auto\",20,\" \",\"Archiving\",10)!@#&								term.setBackgroundColor(colors.black)!@#&								term.setTextColor(colors.white)!@#&								term.clear()!@#&								term.setCursorPos(1,1)!@#&								!@#&                                                                shell.run(\"pkg \"..workPath..\"/\"..key..\" \"..workPath..\"/\"..key..\".zip\")!@#&								sleep(3)!@#& !@#&                                                        elseif contextAction == \"Properties\" then!@#&                                                                displayApps(workPath,currentDesktop,currentBackground)!@#&                                                                windows.aboutFile(x,y,26,workPath..\"/\"..key)!@#& !@#&                                                        elseif contextAction == \"Show content\" then!@#&                                                                gotoDirectory(workPath..\"/\"..key)!@#&                                                        end!@#& !@#&                                                        exit1 = true!@#&                                                        appSelected = true!@#&                                                        displayApps(workPath,currentDesktop,currentBackground)!@#&                                                end!@#&                                        end!@#&                                end!@#&                        end!@#& !@#&                        if y>=2 and appSelected == false then!@#& !@#&                                local thisIsReadOnly = fs.isReadOnly(workPath)!@#&                                local isClipboardEmpty = true!@#&                                if clipboardName ~= nil then isClipboardEmpty = false end!@#&                                if isClipboardEmpty == false then isClipboardEmpty = thisIsReadOnly end!@#& !@#&                                local contextAction = context.menu(x,y,{\"New file\",thisIsReadOnly},{\"New folder\",thisIsReadOnly},{\"Paste\",isClipboardEmpty},\"-\",{\"Run from pastebin\"},{\"Get from pastebin\",thisIsReadOnly},{\"Make URL-file\",thisIsReadOnly})!@#& !@#&                                if contextAction == \"New file\" then!@#& !@#&                                        local filePath = windows.input(\"auto\",\"auto\",\"New file\",15,{\"Name\",\"\"})!@#&                                        fadeOut(0)!@#&                                        prepareToExit()!@#&                                        shell.run(\"/SpeedOS/Applications/SpeedCode \"..workPath..\"/\"..filePath[1])!@#&                                        fadeIn(0)!@#& !@#&                                elseif contextAction == \"New folder\" then!@#& !@#&                                        local filePath = windows.input(\"auto\",\"auto\",\"New folder\",15,{\"Name\",\"\"})!@#&                                        fs.makeDir(workPath..\"/\"..filePath[1])!@#&                               !@#&                                elseif contextAction == \"Paste\" then!@#& !@#&                                        if clipboardName ~= nil and fs.exists(\"System/Clipboard.temp\") then!@#&                                                paste(workPath,clipboardName)!@#&                                        end!@#& !@#&                                elseif contextAction == \"Run from pastebin\" then!@#&                                        local paste = windows.input(\"auto\",\"auto\",\"Run from pastebin\",15,{\"Paste name\",\"\"})!@#&                                        pastebin(\"run\",paste[1],\"cyka\")!@#& !@#&                                elseif contextAction == \"Get from pastebin\" then!@#&                                        local paste = windows.input(\"auto\",\"auto\",\"Get from pastebin\",15,{\"Paste name\",\"\"},{\"File name\",\"\"})!@#&                                        pastebin(\"get\",paste[1],paste[2])!@#&!@#&				elseif contextAction == \"Make URL-file\" then!@#& !@#&                                        local urlPath = windows.input(\"auto\",\"auto\",\"New URL-file\",15,{\"Name\",\"\"},{\"URL\",\"\"})!@#&                                        f = http.get(urlPath[2]).readAll()!@#&                  		        f2 = fs.open(workPath..\"/\"..urlPath[1], \"w\")!@#&					f2.write(f)!@#&					f2.close()!@#&				!@#&				end!@#& !@#&                                displayApps(workPath,currentDesktop,currentBackground)!@#&                        end!@#&                end!@#&                --                                                           !@#&                topBar(topBarColor)!@#&                --                                           ,                         !@#&                term.setCursorBlink(false)!@#& !@#&        --                     ,                              !@#&        elseif event == \"mouse_scroll\" then!@#&                if side == -1 then!@#&                        currentDesktop = currentDesktop + 1!@#&                        if currentDesktop > countOfDesktops then!@#&                                currentDesktop = countOfDesktops!@#&                        else!@#&                                displayApps(workPath,currentDesktop,currentBackground)!@#&                        end!@#&                elseif side == 1 then!@#&                        currentDesktop = currentDesktop - 1!@#&                        if currentDesktop < 1 then!@#&                                currentDesktop = 1!@#&                        else!@#&                                displayApps(workPath,currentDesktop,currentBackground)!@#&                        end!@#&                end!@#&        elseif event == \"disk\" then!@#&                displayApps(workPath,currentDesktop,currentBackground)!@#&        elseif event == \"disk_eject\" then!@#&                currentDesktop = 1!@#&                workPath = \"\"!@#&                workPathHistory = {}!@#&                displayApps(workPath,currentDesktop,currentBackground)!@#&        --[[elseif event == \"rednet_message\" then!@#&                local msg = textutils.unserialize(x)!@#&                if msg ~= nil then!@#&                        if msg[\"type\"] ~= nil and msg[\"type\"] == \"Notification\" then!@#&                                Notification = msg!@#&                                displayApps(workPath,currentDesktop,currentBackground)!@#&                        end!@#&                end]]!@#&        end!@#&end!@#& !@#&fadeOut(0)!@#&prepareToExit()!@#&--windows.tv(0)",["startup"]="local install_files = {\"VMYEMZAB\", \"installer2\"}!@#&local mon_cfg = \"System/OS/monitor.cfg\"!@#&local use_mon!@#&local side!@#&!@#&for _, value in pairs(install_files) do!@#&  if fs.exists(value) then!@#&    fs.delete(value)!@#&  end!@#&end!@#&!@#&if not fs.exists(mon_cfg) then!@#&  mon_cfg2 = fs.open(mon_cfg, \"w\")!@#&  mon_cfg2.write(\"false\")!@#&  mon_cfg2.close()!@#&!@#&else!@#&  mon_cfg2 = fs.open(mon_cfg, \"r\")!@#&  data_cfg = mon_cfg2.readAll()!@#&  if data_cfg == \"false\" then!@#&    use_mon = false!@#&  else!@#&    use_mon = true!@#&  end!@#&end!@#&!@#&if use_mon then!@#&  for _, value in pairs(rs.getSides()) do!@#&    if peripheral.getType(value) == \"monitor\" then!@#&      side = value     !@#&      break!@#&    end!@#&  end!@#&  !@#&  shell.run(\"monitor \"..side..\" SpeedOS/APILoader\")  !@#&  shell.run(\"monitor \"..side..\" os\")!@#&!@#&else!@#&  shell.run(\"SpeedOS/APILoader\")!@#&  shell.run(\"os\")!@#&end",["SpeedOS"]={["APILoader"]="local dir_api = \"/SpeedAPI/\"!@#&local dir_utils = \"/SpeedOS/Applications/Utils/\"!@#&!@#&-----????????? ?????-----!@#&os.loadAPI(dir_api..\"SpeedText\")!@#&!@#&local loading_api = 0.1!@#&local loading_utils = 0.1!@#&local sleep_before_start = 1!@#&!@#&local list_api = fs.list(dir_api)!@#&local list_utils = fs.list(dir_utils)!@#&!@#&term.setTextColor(colors.lightGray)!@#&term.setBackgroundColor(colors.gray)!@#&term.setCursorPos(1, 1)!@#&term.clear()!@#&!@#&for _, value in pairs(list_api) do!@#&  os.unloadAPI(dir_api..value)!@#&  if not value == \"SpeedText\" then!@#&    os.loadAPI(dir_api..value)!@#&  end!@#&  SpeedText.cPrint(\"API \"..value..\" loaded!\")!@#&  sleep(loading_api)!@#&  term.clear()!@#&end!@#&!@#&for _, value in pairs(list_utils) do!@#&  shell.setAlias(value, dir_utils..value)!@#&  SpeedText.cPrint(\"Alias \"..value..\" loading done!\")!@#&  sleep(loading_utils)  !@#&  term.clear()!@#&end!@#&!@#&sleep(sleep_before_start)!@#&SpeedText.cPrint(\"Done!\")!@#&sleep(0.5)",["Pictures"]={["Litva2.nfp"]="1111111111111111111111111111111111111111111111111111111111111111111111111111111111!@#&1111111111111111111111111111111111111111111111111111111111111111111111111111111111!@#&1111111111111111111111111111111111111111111111111111111111111111111111111111111111!@#&1111111111111111111111111111111111111111111111111111111111111111111111111111111111!@#&1111111111111111111111111111111111111111111111111111111111111111111111111111111111!@#&1111111111111111111111111111111111111111111111111111111111111111111111111111111111!@#&1111111111111111111111111111111111111111111111111111111111111111111111111111111111!@#&1111111111111111111111111111111111111111111111111111111111111111111111111111111111!@#&1111111111111111111111111111111111111111111111111111111111111111111111111111111111!@#&1111111111111111111111111111111111111111111111111111111111111111111111111111111111!@#&1111111111111111111111111111111111111111111111111111111111111111111111111111111111!@#&dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd!@#&dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd!@#&dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd!@#&dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd!@#&dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd!@#&dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd!@#&dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd!@#&dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd!@#&dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd!@#&dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd!@#&dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd!@#&eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee!@#&eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee!@#&eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee!@#&eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee!@#&eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee!@#&eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee!@#&eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee!@#&eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee!@#&eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee!@#&eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee!@#&eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",["TechWorld.nfp"]="0000000000000000000000000000000000000099999999800000000000000000000000000000000000!@#&0000000000000000000000000000000000000999999999999999999000000000000000000000000000!@#&0000000000000000000000099000000000000999999b000a9999999999990000000000000000000000!@#&0000000000000000000099999990000000000999999a0a999999996099999990000000000000000000!@#&0000000000000000009999999999000000009999999a0999999999a0b9999999990000000000000000!@#&000000000000000000099999999999999999999992060999999000a0a9999999999980000000000000!@#&00000000000000000000999999999999999999999999999999600aaa9999999a099999900000000000!@#&00000000000000000000099999999999999999999999999999999a0b99960a90a99999990000000000!@#&000000000000000000009999999999999800000000000000099999999999a200999999999900000000!@#&000000099999b0000099999999999000000000000000000000000899999bb999999999999990000000!@#&00000099999999999999999999000000000000000000000000000000899999999ba900990999900000!@#&000009999999999999999999000000000000008b99bb80000000000000099999920990069999990000!@#&00000099999999999999990000000000899999999999999999000000000009999000a9999999998000!@#&00000000009999999999800000000099999999999999999999999000000000999999999999aa999000!@#&000000000009999999900000000099999999999999999999999999900000000999999a000a99999900!@#&0000000000099999990000000099999999999999999999999999999900000000999990a99ba0299980!@#&000000000099999999000000099999999999000000000009999999999000000009990002a999999990!@#&000000000999999990000000999999999b000000000000000999999999000000099999999999999990!@#&0999999999999999900000009999999980000000000000000099999999b00000009999999999a99990!@#&099999999999999990000000999999990000000000000000000999999990000000999920a0a0099999!@#&0999999999999999900000009999999900000000000000000009999999900000009990062206999999!@#&0899999999999999900000009999999900000000000000000089999999900000009999999999999990!@#&00000000099999999000000089999999900000000000000000999999990000000b9999999999999990!@#&00000000009999999b00000009999999999000000000000099999999900000000999a60006a9999990!@#&000000000009999999000000009999999999990000000999999999990000000099999900a960a99900!@#&00000000000999999990000000009999999999999999999999999990000000099999999900a9999900!@#&0000000009999999999990000000009999999999999999999999900000000099999999999999999000!@#&000000999999999999999900000000000999999999999999990000000000999999a009999999990000!@#&0000099999999999999999990000000000000009bbb80000000000000089999996a6002a0999980000!@#&00000099999999999999999999000000000000000000000000000000999999999999600a9999800000!@#&0000000899990000009999999999980000000000000000000000099999999aa2999999999990000000!@#&0000000000000000000099999999999999800000000000009999999999920a99999999999900000000!@#&0000000000000000000009999999999999999999999999999999999a9999900a099999990000000000!@#&00000000000000000000999999999999999999999999999999990000a99999a0a99999000000000000!@#&00000000000000000009999999999999999999999999209999999990a9999999a99900000000000000!@#&000000000000000000999999999900000000999999990009999999a090099999990000000000000000!@#&00000000000000000000b99999b000000000099999900960b999996099999990000000000000000000!@#&000000000000000000000008900000000000099999a0a00a0a99999999900000000000000000000000!@#&0000000000000000000000000000000000000999999999999999990000000000000000000000000000!@#&0000000000000000000000000000000000000009999980000000000000000000000000000000000000",["SpeedOS_SECRET.nfp"]="eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee!@#&eeeeeeeeeeeeeeeeee000000000000000eeeeeeeeeeeeeeeeee!@#&eeeeeeeeeeeeeee0000000000000000000000eeeeeeeeeeeeee!@#&eeeeeeeeeee00000000000000000000000000000eeeeeeeeeee!@#&eeeeeeeee000000000000000000000000000000000eeeeeeeee!@#&eeeeeee0000000000000000000000000000000000000eeeeeee!@#&eeeee00000000fff70ffffff0ff7ff0fffff0ff7ff0000eeeee!@#&eeeee07707700ff7f0ffffff0f7fff0fffff0f7fff0770eeeee!@#&eeeee0ff0ff00f7000ff00ff07f0000ff00007f0000ff0eeeee!@#&eeeee0f00f0007fff0ffffff0ff7f00ffff00ff7f00f00eeeee!@#&eeeee0ff0ff00fff707fffff0f7ff00ffff00f7ff00ff0eeeee!@#&eeeee0f00f000007f07ff00007f0000ff00007f0000f00eeeee!@#&eeeee0ff0ff007fff07f70000fff7f0fffff0fff7f0ff0eeeee!@#&eeeeeee0000007fff07f70000ff7ff0fffff0ff7ff00eeeeeee!@#&eeeeeeeee000000000000000000000000000000000eeeeeeeee!@#&eeeeeeeeeee00000000000000000000000000000eeeeeeeeeee!@#&eeeeeeeeeeeeeee000000000000000000000eeeeeeeeeeeeeee!@#&eeeeeeeeeeeeeeeee00000000000000000eeeeeeeeeeeeeeeee!@#&eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",["Logo.skch"]="",["Computer.skch"]="{[1]={[\"Visible\"]=true,[\"Pixels\"]={[1]=\"4f               \",[2]=\"4f f             4 \",[3]=\"4f f 4> 0eblan4     4 \",[4]=\"4f f   4 f         4 \",[5]=\"4f f             4 \",[6]=\"4f f             4 \",[7]=\"4f f             4 \",[8]=\"4f f             4 \",[9]=\"4f f        5.e .f  4 \",[10]=\"4f               \",},[\"Index\"]=1,[\"Name\"]=\"Background\",[\"BackgroundColour\"]=-1,},}",["GrammatikFrei.nfp"]="eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee!@#&eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee!@#&eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee!@#&eeeeeeeeeeeeeeeee000000000000000000eeeeeeeeeeeeeeee!@#&eeeeeeeeeeeee0000000000fff000000000000eeeeeeeeeeeee!@#&eeeeeeeeeee0000000008ffffff00000000000000eeeeeeeeee!@#&eeeeeeeeee00000000ffffff0000000ff000000000eeeeeeeee!@#&eeeeeeeee000000ffffff0000000ffffffff0000000eeeeeeee!@#&eeeeeeee0000fffffff0000000fffffffffffff00000eeeeeee!@#&eeeeeeee000fffffff00000fffffff000007ffffff00eeeeeee!@#&eeeeeeee000000fffffff0000ff00000000fffff000eeeeeeee!@#&eeeeeeeee00000000fffffff00000000fffff700000eeeeeeee!@#&eeeeeeeeee000000000ffffffff00ffffff0000006eeeeeeeee!@#&eeeeeeeeeeee0000000000ffffffffff00000000eeeeeeeeeee!@#&eeeeeeeeeeeeee60000000000ffff00000000eeeeeeeeeeeeee!@#&eeeeeeeeeeeeeeeeeee00000000000000eeeeeeeeeeeeeeeeee!@#&eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee!@#&eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee!@#&eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",["Litva.nfp"]="111111111111111111111111111111111111111111111111111!@#&111111111111111111111111111111111111111111111111111!@#&111111111111111111111111111111111111111111111111111!@#&111111111111111111111111111111111111111111111111111!@#&111111111111111111111111111111111111111111111111111!@#&111111111111111111111111111111111111111111111111111!@#&ddddddddddddddddddddddddddddddddddddddddddddddddddd!@#&ddddddddddddddddddddddddddddddddddddddddddddddddddd!@#&ddddddddddddddddddddddddddddddddddddddddddddddddddd!@#&ddddddddddddddddddddddddddddddddddddddddddddddddddd!@#&ddddddddddddddddddddddddddddddddddddddddddddddddddd!@#&ddddddddddddddddddddddddddddddddddddddddddddddddddd!@#&ddddddddddddddddddddddddddddddddddddddddddddddddddd!@#&eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee!@#&eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee!@#&eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee!@#&eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee!@#&eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee!@#&eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",["Smile.nfp"]="000000000000000!@#&0000f00000f0000!@#&000000000000000!@#&000000000000000!@#&00f000000000f00!@#&000ff00000ff000!@#&00000fffff00000!@#&000000000000000!@#&000000000000000!@#&000000000000000",["Penguin.gif"]="GIF89a2\0002\000\000\000\"\"\"***333;;;DDDLLLfff\000\000 4Sz\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000!NETSCAPE2.0\000\000\000!100% by Angelishi\000!d\000\000,\000\000\000\0002\0002\000\000 \"dIhfeJt=pv>KGD\000j@r	#2'`mouzBynzV|}0^h7Q3jJ\\5\000u'4^{c3(@g72		e\"x+^	!@#&!@#&4*54!@#&!@#&	!@#&!@#&	he3!@#&~-\"06+eC`l+)/%BrKNBZI:bBzt4#!@#&AJ<R`LCJ-z$p\000Q_!@#&:K]5BW1=S-Af%#x7^LH80a\000rE`sR-mjYF(hM4C]63  _g }\000c]g>3k>-o=|~.gL3Q`ra~tSL7(D p!`\000$`5	(#.?f$O>;&0\000\000!\000\000,\000\000$\000\000\000( hhj-!(/)g\000!\000\000,\000\000$\000\000\000 A Hl;g\000IKDm \000!\000\000,\000\000$\000\000\000! Q\000 hl:'\000Mbx+6 ?& GL\000!\000\000,\000\000$\000\000\0002 @ h)BS4,$t?:G,\000F#R\000L<M!U\000!\000\000,\000\000$\000\000\000( hhj-!(/)g\000!\000\000,\000\000$\000\000\000 A Hl;g\000IKDm \000!\000\000,\000\000$\000\000\000! Q\000 hl:'\000Mbx+6 ?& GL\000!2\000\000,\000\000$\000\000\0002 @ h)BS4,$t?:G,\000F#R\000L<M!U\000!\000\000,\000\000$\000\000\000( hhj-!(/)g\000!\000\000,\000\000$\000\000\000 A Hl;g\000IKDm \000!\000\000,\000\000$\000\000\000! Q\000 hl:'\000Mbx+6 ?& GL\000;",},["Downloads"]={},["Songs"]={["EvasiveAction"]="9gkKQgoJwcKbeYthmSvlbn9UAUmPdz1a!@#&ThinkInvisible - CTracker song file!@#&You probably shouldn't change this manually!@#&1.0!@#&6.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&60.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&60.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&60.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&60.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&39.0!@#&-1.0!@#&51.0!@#&-1.0!@#&63.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&39.0!@#&-1.0!@#&51.0!@#&-1.0!@#&63.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&41.0!@#&-1.0!@#&53.0!@#&-1.0!@#&65.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&41.0!@#&-1.0!@#&53.0!@#&-1.0!@#&65.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&24.0!@#&-1.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&24.0!@#&-1.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&24.0!@#&-1.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&24.0!@#&-1.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&27.0!@#&-1.0!@#&39.0!@#&-1.0!@#&51.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&27.0!@#&-1.0!@#&39.0!@#&-1.0!@#&51.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&29.0!@#&-1.0!@#&41.0!@#&-1.0!@#&53.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&29.0!@#&-1.0!@#&41.0!@#&-1.0!@#&53.0!@#&-1.0!@#&72.0!@#&-2.0!@#&-1.0!@#&-1.0!@#&60.0!@#&-2.0!@#&-1.0!@#&-1.0!@#&72.0!@#&-2.0!@#&-1.0!@#&-1.0!@#&60.0!@#&-2.0!@#&-1.0!@#&-1.0!@#&72.0!@#&-2.0!@#&-1.0!@#&-1.0!@#&60.0!@#&-2.0!@#&-1.0!@#&-1.0!@#&72.0!@#&-2.0!@#&-1.0!@#&-1.0!@#&60.0!@#&-2.0!@#&-1.0!@#&-1.0!@#&72.0!@#&-2.0!@#&-1.0!@#&-1.0!@#&60.0!@#&-2.0!@#&75.0!@#&-2.0!@#&72.0!@#&-2.0!@#&-1.0!@#&-1.0!@#&60.0!@#&-2.0!@#&77.0!@#&-2.0!@#&72.0!@#&-2.0!@#&-1.0!@#&-1.0!@#&60.0!@#&-2.0!@#&75.0!@#&-2.0!@#&72.0!@#&-2.0!@#&-1.0!@#&-1.0!@#&60.0!@#&77.0!@#&-2.0!@#&-1.0!@#&48.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&60.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&48.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&60.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&51.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&53.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&54.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&55.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&48.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&60.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&48.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&60.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&51.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&53.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&54.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&55.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&60.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&60.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&60.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&60.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&39.0!@#&-1.0!@#&51.0!@#&-1.0!@#&63.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&39.0!@#&-1.0!@#&51.0!@#&-1.0!@#&63.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&41.0!@#&-1.0!@#&53.0!@#&-1.0!@#&65.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&41.0!@#&-1.0!@#&53.0!@#&-1.0!@#&65.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&24.0!@#&-1.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&24.0!@#&-1.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&24.0!@#&-1.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&24.0!@#&-1.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&27.0!@#&-1.0!@#&39.0!@#&-1.0!@#&51.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&27.0!@#&-1.0!@#&39.0!@#&-1.0!@#&51.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&29.0!@#&-1.0!@#&41.0!@#&-1.0!@#&53.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&29.0!@#&-1.0!@#&41.0!@#&-1.0!@#&53.0!@#&-1.0!@#&72.0!@#&-2.0!@#&-1.0!@#&-1.0!@#&60.0!@#&-2.0!@#&-1.0!@#&-1.0!@#&72.0!@#&-2.0!@#&-1.0!@#&-1.0!@#&60.0!@#&-2.0!@#&-1.0!@#&-1.0!@#&72.0!@#&-2.0!@#&-1.0!@#&-1.0!@#&60.0!@#&-2.0!@#&-1.0!@#&-1.0!@#&72.0!@#&-2.0!@#&-1.0!@#&-1.0!@#&60.0!@#&-2.0!@#&-1.0!@#&-1.0!@#&72.0!@#&-2.0!@#&-1.0!@#&-1.0!@#&60.0!@#&-2.0!@#&75.0!@#&-2.0!@#&72.0!@#&-2.0!@#&-1.0!@#&-1.0!@#&60.0!@#&-2.0!@#&77.0!@#&-2.0!@#&54.0!@#&48.0!@#&-2.0!@#&-1.0!@#&55.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&51.0!@#&48.0!@#&-1.0!@#&-1.0!@#&51.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&48.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&60.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&48.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&60.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&51.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&53.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&54.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&55.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&48.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&60.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&48.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&60.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&66.0!@#&60.0!@#&-2.0!@#&-1.0!@#&67.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&63.0!@#&60.0!@#&-1.0!@#&-1.0!@#&72.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&51.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&48.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&51.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&48.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&54.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&53.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&51.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&48.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&51.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&48.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&51.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&53.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&60.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&60.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&60.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&60.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&39.0!@#&-1.0!@#&51.0!@#&-1.0!@#&63.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&39.0!@#&-1.0!@#&51.0!@#&-1.0!@#&63.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&41.0!@#&-1.0!@#&53.0!@#&-1.0!@#&65.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&41.0!@#&-1.0!@#&53.0!@#&-1.0!@#&65.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&24.0!@#&-1.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&24.0!@#&-1.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&24.0!@#&-1.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&24.0!@#&-1.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&27.0!@#&-1.0!@#&39.0!@#&-1.0!@#&51.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&27.0!@#&-1.0!@#&39.0!@#&-1.0!@#&51.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&29.0!@#&-1.0!@#&41.0!@#&-1.0!@#&53.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&29.0!@#&-1.0!@#&41.0!@#&-1.0!@#&53.0!@#&-1.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&67.0!@#&63.0!@#&-2.0!@#&-1.0!@#&72.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&66.0!@#&-1.0!@#&-1.0!@#&53.0!@#&-1.0!@#&-1.0!@#&63.0!@#&-1.0!@#&67.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&72.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&75.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&72.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&53.0!@#&55.0!@#&-2.0!@#&-1.0!@#&60.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&53.0!@#&55.0!@#&-2.0!@#&-1.0!@#&60.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&75.0!@#&72.0!@#&-2.0!@#&-1.0!@#&75.0!@#&72.0!@#&-2.0!@#&-1.0!@#&75.0!@#&72.0!@#&-2.0!@#&-1.0!@#&75.0!@#&72.0!@#&-2.0!@#&-1.0!@#&60.0!@#&60.0!@#&-2.0!@#&-1.0!@#&60.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&54.0!@#&-1.0!@#&-1.0!@#&65.0!@#&-1.0!@#&-1.0!@#&51.0!@#&-1.0!@#&55.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&60.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&63.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&60.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&65.0!@#&67.0!@#&-2.0!@#&-1.0!@#&72.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&65.0!@#&67.0!@#&-2.0!@#&-1.0!@#&72.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&63.0!@#&60.0!@#&-2.0!@#&-1.0!@#&63.0!@#&60.0!@#&-2.0!@#&-1.0!@#&63.0!@#&60.0!@#&-2.0!@#&-1.0!@#&63.0!@#&60.0!@#&-2.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&63.0!@#&60.0!@#&60.0!@#&60.0!@#&63.0!@#&60.0!@#&60.0!@#&60.0!@#&63.0!@#&60.0!@#&60.0!@#&60.0!@#&66.0!@#&65.0!@#&63.0!@#&60.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&60.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&60.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&60.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&60.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&39.0!@#&-1.0!@#&51.0!@#&-1.0!@#&63.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&39.0!@#&-1.0!@#&51.0!@#&-1.0!@#&63.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&41.0!@#&-1.0!@#&53.0!@#&-1.0!@#&65.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&41.0!@#&-1.0!@#&53.0!@#&-1.0!@#&65.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&24.0!@#&-1.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&24.0!@#&-1.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&24.0!@#&-1.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&24.0!@#&-1.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&27.0!@#&-1.0!@#&39.0!@#&-1.0!@#&51.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&27.0!@#&-1.0!@#&39.0!@#&-1.0!@#&51.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&29.0!@#&-1.0!@#&41.0!@#&-1.0!@#&53.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&29.0!@#&-1.0!@#&41.0!@#&-1.0!@#&53.0!@#&-1.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&67.0!@#&63.0!@#&-2.0!@#&-1.0!@#&72.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&67.0!@#&-1.0!@#&-1.0!@#&63.0!@#&-1.0!@#&-1.0!@#&55.0!@#&-1.0!@#&63.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&67.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&72.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&63.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&67.0!@#&60.0!@#&-2.0!@#&-1.0!@#&60.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&53.0!@#&55.0!@#&-2.0!@#&-1.0!@#&60.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&67.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&66.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&65.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&63.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&60.0!@#&60.0!@#&-2.0!@#&-1.0!@#&60.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&63.0!@#&-1.0!@#&-1.0!@#&60.0!@#&-1.0!@#&-1.0!@#&63.0!@#&-1.0!@#&60.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&63.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&63.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&60.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&63.0!@#&55.0!@#&-2.0!@#&-1.0!@#&72.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&65.0!@#&67.0!@#&-2.0!@#&-1.0!@#&72.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&63.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&62.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&61.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&60.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&60.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&60.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&60.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&60.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&39.0!@#&-1.0!@#&51.0!@#&-1.0!@#&63.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&39.0!@#&-1.0!@#&51.0!@#&-1.0!@#&63.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&41.0!@#&-1.0!@#&53.0!@#&-1.0!@#&65.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&41.0!@#&-1.0!@#&53.0!@#&-1.0!@#&65.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&24.0!@#&-1.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&24.0!@#&-1.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&24.0!@#&-1.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&24.0!@#&-1.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&27.0!@#&-1.0!@#&39.0!@#&-1.0!@#&51.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&27.0!@#&-1.0!@#&39.0!@#&-1.0!@#&51.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&29.0!@#&-1.0!@#&41.0!@#&-1.0!@#&53.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&29.0!@#&-1.0!@#&41.0!@#&-1.0!@#&53.0!@#&-1.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&63.0!@#&-2.0!@#&-2.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&60.0!@#&-2.0!@#&-2.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-2.0!@#&-2.0!@#&-2.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-2.0!@#&-2.0!@#&-2.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-2.0!@#&-2.0!@#&-2.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&60.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&60.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&60.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&60.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&39.0!@#&-1.0!@#&51.0!@#&-1.0!@#&63.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&39.0!@#&-1.0!@#&51.0!@#&-1.0!@#&63.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&41.0!@#&-1.0!@#&53.0!@#&-1.0!@#&65.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&41.0!@#&-1.0!@#&53.0!@#&-1.0!@#&65.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&24.0!@#&-1.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&24.0!@#&-1.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&24.0!@#&-1.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&24.0!@#&-1.0!@#&36.0!@#&-1.0!@#&48.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&27.0!@#&-1.0!@#&39.0!@#&-1.0!@#&51.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&27.0!@#&-1.0!@#&39.0!@#&-1.0!@#&51.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&29.0!@#&-1.0!@#&41.0!@#&-1.0!@#&53.0!@#&-1.0!@#&-2.0!@#&-1.0!@#&29.0!@#&-1.0!@#&41.0!@#&-1.0!@#&53.0!@#&-1.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&48.0!@#&-2.0!@#&48.0!@#&-2.0!@#&48.0!@#&63.0!@#&-2.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&60.0!@#&-2.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&-1.0!@#&54.0",},["Documents"]={["House2.nfa"]="        !@#&        !@#&        !@#&        !@#&   44444!@#&   4ccc4!@#&   4ccc4!@#&   4ccc4!@#&   44444!@#&     1  !@#&~!@#&        !@#&        !@#&        !@#&        !@#&   44444!@#&   4   4!@#&   4   4!@#&   4   4!@#&   44 44!@#&        !@#&~!@#&        !@#&        !@#&        !@#&        !@#&   44944!@#&   4   4!@#&   9   9!@#&   4   4!@#&   44 44!@#&        !@#&~!@#&        !@#&        !@#&        !@#&        !@#&   44444!@#&   4   4!@#&   4   4!@#&   4   4!@#&   44444!@#&        !@#&~!@#&        !@#&        !@#&        !@#&        !@#&   44444!@#&   4cc 4!@#&   4ccc4!@#&   4ccc4!@#&   44444!@#&        !@#&~!@#&        !@#&        !@#&        !@#&        !@#&   fffff!@#&   f   f!@#&   f   f!@#&   f   f!@#&   fffff!@#&        ",["House.nfa"]="!@#&!@#&!@#&!@#&!@#&     4444444!@#&     4ccccc4!@#&     4ccccc4!@#&     4ccccc4!@#&     4ccccc4!@#&     4ccccc4!@#&     4444444!@#&~!@#&!@#&!@#&!@#&!@#&!@#&     4444444!@#&     4     4!@#&     4     4!@#&     4     4!@#&     4     4!@#&     4     4!@#&     4444444!@#&~!@#&!@#&!@#&!@#&!@#&!@#&     4444444!@#&     4     4!@#&     4     4!@#&     4     4!@#&     4     4!@#&     4     4!@#&     4444444!@#&~!@#&!@#&!@#&!@#&!@#&!@#&     4444444!@#&     4     4!@#&     4     4!@#&     4     4!@#&     4     4!@#&     4     4!@#&     4444444!@#&~!@#&!@#&!@#&!@#&!@#&!@#&     4444444!@#&     4ccccc4!@#&     4ccccc4!@#&     4ccccc4!@#&     4ccccc4!@#&     4ccccc4!@#&     4444444",},["Applications"]={["GameBox"]={["eShip1.img"]="                eeeeeeee!@#&               e1   111!@#&              e11   e!@#&              11e   e!@#&               1e   1ee!@#&                11111111",["Worm"]="term.setBackgroundColor(colors.black)!@#&term.setTextColor(colors.white)!@#&shell.run(\"worm\")",["falloutLock"]="--=================================!@#&--FalloutLock created by Savior67!@#&--Do not Redistribute!@#&--=================================!@#&--CONFIG OPTIONS-------------------!@#&local output = \"bottom\"   --output side!@#&local wordFile = \"codes\"  --where the words are stored!@#&local textColor = colors.lime!@#&local attempts = 4        --how many attempts to guess the word?!@#&local permLockout = true  --lock the terminal permanently?!@#&--only way to enter if permLockout==true is with disk!@#&--then delete lock_status, or edit and set Locked=false!@#&----------------------------------!@#&!@#&local usedWords = {}!@#&local status = {}!@#&!@#&--check for advanced monitor!@#&if not term.isColor() then!@#&  print(\"This program needs an advanced monitor.\")!@#&  return!@#&end!@#&--check for wordFile!@#&if not fs.exists(wordFile) then!@#&  print(\"The word file \\\"\"..wordFile..\"\\\" is not populated.\")!@#&  return!@#&end!@#&--centers the x value of a string!@#&function center(str,y)!@#&  local maxX,maxY = term.getSize()!@#&  term.setCursorPos(math.floor(maxX/2)-math.floor(string.len(str)/2),y)!@#&  term.write(str)!@#&end!@#&--locks the terminal!@#&function lockout()!@#&  term.clear()!@#&  term.setTextColor(textColor)!@#&  center(\"TERMINAL LOCKED\",8)!@#&  center(\"PLEASE CONTACT AN ADMINISTRATOR\",10)!@#&  local h = fs.open(\"lock_status\",\"w\")!@#&  h.writeLine(\"Locked: true\")!@#&  h.close()!@#&  while true do!@#&    sleep(1000)!@#&  end!@#&  os.reboot()!@#&end!@#&--check for permLock!@#&if not fs.exists(\"lock_status\") then!@#&  local h = fs.open(\"lock_status\",\"w\")!@#&  h.writeLine(\"Locked: false\")!@#&  h.close()!@#&else!@#&  local h = fs.open(\"lock_status\",\"r\")!@#&  local isLocked = string.sub(h.readLine(),9)!@#&  if isLocked==\"true\" and permLockout then!@#&    --lockout()!@#&  end!@#&end!@#&!@#&function main()!@#&  local rows=12!@#&  local cols=10!@#&  term.clear()!@#&  term.setCursorPos(1,1)!@#&  local dict = readWords(wordFile)!@#&  local eString1 = getEncoded(rows*cols,dict)!@#&  local eString2 = getEncoded(rows*cols,dict)!@#&  drawTitle()!@#&  drawAttempts(attempts)!@#&  drawHex(2,7)!@#&  drawHex(20,7)!@#&  drawEncoded(9,7,rows,cols,eString1)!@#&  drawEncoded(27,7,rows,cols,eString2)!@#&  password=getPass()!@#&  eventListener(eString1,eString2,password)!@#&  term.setCursorPos(1,1)!@#&end!@#&!@#&function getStatus(choice,pass)!@#&  local sameChars = commonLetters(choice,pass)!@#&  table.insert(status,string.upper(choice))!@#&  if sameChars==#pass and string.len(choice)==string.len(pass) then!@#&     table.insert(status,\"Exact match!\")!@#&     table.insert(status,\"Please wait\")!@#&     table.insert(status,\"while system\")!@#&     table.insert(status,\"is accessed.\")!@#&  else!@#&     table.insert(status,\"Entry denied\")!@#&     table.insert(status,sameChars..\"/\"..string.len(pass)..\" correct.\")!@#&     attempts=attempts-1!@#&  end!@#&!@#&  if attempts==0 then!@#&    lockout()!@#&  end  !@#&end!@#&!@#&!@#&!@#&function drawStatus()!@#&  local startX=38!@#&  local startY=16!@#&  local currentStat=#status!@#&  repeat!@#&    if status[currentStat]==nil then break end!@#&    clearFrom(startX,startY)!@#&    term.setCursorPos(startX,startY)!@#&    term.write(\">\"..status[currentStat])!@#&    currentStat=currentStat-1!@#&    startY=startY-1!@#&  until startY<=6!@#&end!@#&!@#&--highlights part of an eString!@#&!@#&--detects keypresses!@#&function eventListener(leftStr,rightStr,pass)!@#&  local side=\"left\"     --which eString is it!@#&  local charPos=1       --which  number character!@#&  local cmdLineX,cmdLineY=38,18!@#&  local selection = string.sub(leftStr,1,1)!@#&  local onWord=false!@#&  local cursorX,cursorY=9,7!@#&  local upperX,upperY=36,18 --upper limits!@#&  local lowerX,lowerY=9,7   --lower limits!@#&  local keys = {200,208,203,205}!@#&!@#&  highlight(cursorX,cursorY,selection)!@#&  while true do!@#&    local ev,p1,p2,p3 = os.pullEvent()!@#&    if ev==\"key\" then!@#&      if inTable(p1,keys) and not onWord then!@#&        lowlight(cursorX,cursorY,selection)!@#&      elseif inTable(p1,keys) and onWord then!@#&        if side==\"left\" then!@#&          lowWord(selection,leftStr,side)!@#&        else!@#&          lowWord(selection,rightStr,side)!@#&        end!@#&      end!@#&      !@#&      if p1==200 and cursorY>lowerY then  --up arrow!@#&         cursorY=cursorY-1!@#&      elseif p1==208 and cursorY<upperY then --down arrow!@#&         cursorY=cursorY+1!@#&      elseif p1==203 and cursorX>lowerX then --left arrow!@#&         if cursorX==27 then!@#&           side=\"left\"!@#&           cursorX=cursorX-9!@#&         else!@#&           cursorX=cursorX-1!@#&         end!@#&      elseif p1==205 and cursorX<upperX then --right arrow!@#&         if cursorX==18 then!@#&           side=\"right\"!@#&           cursorX=cursorX+9!@#&         else!@#&           cursorX=cursorX+1!@#&         end!@#&      elseif p1==28 then                     --enter key!@#&        getStatus(selection,pass)!@#&        drawStatus()!@#&        drawAttempts(attempts)!@#&	if selection==pass then!@#&          sleep(2) !@#&          endSequence()!@#&          rs.setOutput(output,true)!@#&          sleep(3)!@#&          rs.setOutput(output,false)!@#&        	 os.exit()!@#&	 !@#&        end!@#&      end!@#&    --elseif ev==\"mouse_click\" and p1==1 then --left mouse button!@#&    --  if lowerX<=p2 and p2<=upperX and lowerY<=p3 and p3<=upperY then!@#&    --    cursorX,cursorY=p2,p3!@#&    --  end!@#&    end!@#&    !@#&    if side==\"left\" then!@#&      charPos=math.floor(((cursorY-7)*10)+(cursorX-9)+1)!@#&      selection=string.sub(leftStr,charPos,charPos)!@#&    else!@#&      charPos=math.floor(((cursorY-7)*10)+(cursorX-27)+1)!@#&      selection=string.sub(rightStr,charPos,charPos)!@#&    end!@#&    !@#&    if isalpha(selection) and side==\"left\" then!@#&      selection = findWord(cursorX,cursorY,charPos,leftStr,side)!@#&      lightWord(selection,leftStr,side)!@#&      onWord=true!@#&    elseif isalpha(selection) and side==\"right\" then!@#&      selection = findWord(cursorX,cursorY,charPos,rightStr,side)!@#&      lightWord(selection,rightStr,side)!@#&      onWord=true!@#&    else!@#&      onWord=false!@#&      highlight(cursorX,cursorY,selection)!@#&    end!@#&    clearFrom(cmdLineX,cmdLineY)!@#&    term.setCursorPos(cmdLineX,cmdLineY)!@#&    term.write(\">\"..selection)!@#&  end!@#&end!@#&!@#&function lightWord(sel,eString,side)!@#&  local j=1!@#&  local l,r = string.find(eString,sel)!@#&  for i=l,r do!@#&    local x,y=posToCoords(i,side)!@#&    highlight(x,y,string.sub(sel,j,j))!@#&    j=j+1!@#&  end!@#&end!@#&!@#&function lowWord(sel,eString,side)!@#&  local j=1!@#&  local l,r = string.find(eString,sel)!@#&  for i=l,r do!@#&    local x,y = posToCoords(i,side)!@#&    lowlight(x,y,string.sub(sel,j,j))!@#&    j=j+1!@#&  end!@#&end!@#&!@#&function findWord(x,y,charPos,eString,side)!@#&  --check left and right!@#&  local left = charPos!@#&  local right = charPos!@#&  while isalpha(string.sub(eString,left-1,left-1)) do!@#&    left=left-1!@#&  end!@#&  while isalpha(string.sub(eString,right+1,right+1)) do!@#&    right=right+1!@#&  end!@#&  --highlight the word!@#&  for i=left,right do!@#&    local x,y = posToCoords(i,side)!@#&    highlight(x,y,string.sub(eString,i,i))!@#&  end!@#&  return(string.sub(eString,left,right))  !@#&end!@#&!@#&function posToCoords(pos,side)!@#&  local x,y=0,0!@#&  if side==\"left\" then!@#&    if pos%10~=0 then !@#&      x=pos%10+8!@#&      y=math.floor(pos/10)+7!@#&    else !@#&      x=10+8!@#&      y=math.floor(pos/10)+6!@#&    end!@#&  else!@#&    if pos%10~=0 then !@#&      x=pos%10+26!@#&      y=math.floor(pos/10)+7!@#&    else !@#&      x=10+26!@#&      y=math.floor(pos/10)+6!@#&    end!@#&  end!@#&  return x,y!@#&end!@#&!@#&function highlight(x,y,sel)!@#&  term.setBackgroundColor(textColor)!@#&  term.setTextColor(colors.black)!@#&  term.setCursorPos(x,y)!@#&  term.write(sel)!@#&  term.setBackgroundColor(colors.black)!@#&  term.setTextColor(textColor)!@#&end!@#&!@#&function lowlight(x,y,sel)!@#&  term.setBackgroundColor(colors.black)!@#&  term.setTextColor(textColor)!@#&  term.setCursorPos(x,y)!@#&  term.write(sel)!@#&end!@#&!@#&--returns a password from the usedWords list!@#&function getPass()!@#&  return(usedWords[math.random(1,#usedWords)])!@#&end!@#&!@#&function drawTitle()!@#&  term.setCursorPos(2,2)!@#&  term.setTextColor(textColor)!@#&  term.write(\"ROBCO INDUSTRIES (TM) TERMLINK PROTOCOL\")!@#&  term.setCursorPos(2,3)!@#&  term.write(\"ENTER PASSWORD NOW\")!@#&end!@#&!@#&function drawAttempts(a)!@#&  term.setCursorPos(2,5)!@#&  term.setTextColor(textColor)!@#&  term.clearLine()!@#&  term.write(a..\" ATTEMPT(S) LEFT: \")!@#&  local x = 21!@#&  for i=1,a do!@#&    term.setBackgroundColor(textColor)!@#&    term.setCursorPos(x,5)!@#&    term.write(\" \")!@#&    x = x + 2!@#&  end!@#&  term.setBackgroundColor(colors.black)!@#&end!@#&!@#&function drawHex(x,y)!@#&  local rows = 12!@#&  term.setTextColor(textColor)!@#&  for i=1,rows do!@#&    term.setCursorPos(x,y)!@#&    local hstring=\"0x\"!@#&    for j=1,4 do hstring=hstring..randomHex() end!@#&    term.write(hstring)!@#&    y = y + 1!@#&  end    !@#&end!@#&!@#&--returns string containing random nonletter characters!@#&--and various words. does not have '\\n' included!@#&function getEncoded(size,words)!@#&  local step = 1!@#&  local totalWords=0!@#&  local curWord = nil!@#&  local onWord = false!@#&  local charIter = 1 --what letter in curWord are we at?!@#&  local chance = 0!@#&  local encodedString=nonletter()!@#&  local lastIsWord=false!@#&  !@#&  --fills encodedString with nonletter chars and words!@#&  repeat!@#&    step=step+1!@#&    chance = math.random(1,13)  !@#&    if chance==6 and not onWord and not lastIsWord and totalWords<=8 then!@#&      local reps=0!@#&      repeat !@#&        if reps>20 then break end!@#&        curWord=words[math.random(1,#words)]!@#&        reps=reps+1!@#&      until not inTable(curWord,usedWords) and step+#curWord<size!@#&      if reps<=20 then onWord=true end!@#&    end!@#&    --determines whether to add random nonletter or char from curWord!@#&    if onWord then!@#&      encodedString=encodedString..string.sub(curWord,charIter,charIter)!@#&      charIter=charIter+1!@#&      if charIter>#curWord then!@#&         table.insert(usedWords,curWord) !@#&         onWord=false!@#&         totalWords=totalWords+1!@#&         lastIsWord=true !@#&         charIter=1!@#&       end!@#&    else!@#&      encodedString=encodedString..nonletter()!@#&      lastIsWord=false!@#&    end!@#&  until string.len(encodedString)==size!@#&  return encodedString!@#&end!@#&!@#&function isalpha(char)!@#&  local alpha=\"abcdefghijklmnopqrstuvwxyz\"!@#&  for i=1,string.len(alpha) do!@#&    if string.sub(alpha,i,i)==char then return true end!@#&  end!@#&  return false!@#&end!@#&--lightS is a table {x1,y1} and lightE is table {x2,y2}!@#&function drawEncoded(x,y,rows,cols,eString,lightS,lightE)!@#&  term.setTextColor(textColor)!@#&  local curX=x!@#&  local curY=y!@#&  for i=1,rows*cols do!@#&    term.setCursorPos(curX,curY)!@#&    term.write(string.sub(eString,i,i))!@#&    if i%cols==0 then !@#&       curY=curY+1!@#&       curX=x!@#&    else!@#&       curX=curX+1!@#&    end!@#&  end!@#&end!@#&!@#&--read the codewords from the file!@#&--returns list!@#&function readWords(fileName)!@#&  local dict = {}!@#&  local h = fs.open(fileName,\"r\")!@#&  for word in string.gmatch(h.readAll(), \"%a+\") do table.insert(dict,word) end!@#&  return dict!@#&end!@#&!@#&!@#&function findPattern(text,pattern,start)!@#&  return string.sub(text,string.find(text,pattern,start))!@#&end!@#&!@#&--returns one nonletter char (random)!@#&function nonletter()!@#&  local possible = {'!','@','#','$','%','^','&','*',!@#&                   '(',')','_','-','+','=','[','{',!@#&                   ']','|',',','\\'','\\\"','}',!@#&                   ';',':','.','>','<','?'}!@#&  return(possible[math.random(1,#possible)])!@#&end  !@#&!@#&--returns one valid hex num (random)!@#&function randomHex()!@#&  local possible = {'A','B','C','D','E','F'}!@#&  for i=0,9 do!@#&    table.insert(possible,i)!@#&  end!@#&  return(possible[math.random(1,#possible)])!@#&end!@#&!@#&--returns int of same letters in same positions in two strings.!@#&function commonLetters(s1,s2)!@#&  charsInCommon=0!@#&  local long,short=nil,nil!@#&  if string.len(s1)>=string.len(s2) then long,short=s1,s2 !@#&  else long,short=s2,s1 end!@#&  for i=1,#long do!@#&    if string.sub(long,i,i)==string.sub(short,i,i) then!@#&      charsInCommon=charsInCommon+1!@#&    elseif string.sub(short,i,i)==nil then!@#&      break!@#&    end!@#&  end!@#&  return charsInCommon !@#&end!@#&!@#&--clears a line from x,y till the end of the screen!@#&function clearFrom(x,y)!@#&  term.setCursorPos(x,y)!@#&  for i=0,51-x do!@#&    term.setCursorPos(x+i,y)!@#&    term.write(\" \")!@#&  end!@#&end!@#&!@#&--checks if a value is in a given table!@#&function inTable(val,t)!@#&  for k,v in ipairs(t) do!@#&    if v==val then!@#&      return true!@#&    end!@#&  end!@#&  return false!@#&end!@#&!@#&function writeSlow(text,pass)!@#&  for i=1,#text,1 do!@#&    if(pass)then!@#&      write(\"*\")!@#&    else!@#&      write(string.sub(text,i,i))!@#&    end!@#&    sleep(.1)!@#&  end!@#&  print()!@#&end!@#&!@#&function endSequence()!@#&  term.clear()!@#&  term.setCursorPos(1,1)!@#&  print(\"WELCOME TO ROBOCO INDUSTRIES (TM) TERMLINK\")!@#&  print()!@#&  sleep(.5)!@#&  write(\"> \")!@#&  writeSlow(\"LOGON ADMIN\",false)!@#&  sleep(.5)!@#&  print()!@#&  print(\"ENTER PASSWORD NOW\")!@#&  print()!@#&  write(\"> \")!@#&  writeSlow(password,true)!@#&end!@#&main()",["fileClientBG"]="bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb!@#&000000000000000000000000000000000000000000000000000!@#&000000000000000000000000000000000000000000000000000!@#&000000000000000000000000000000000000000000000000000!@#&000000000000000000000000000000000000000000000000000!@#&000000000000000000000000000000000000000000000000000!@#&000000000000000000000000000000000000000000000000000!@#&000000000000000000000000000000000000000000000000000!@#&000000000000000000000000000000000000000000000000000!@#&000000000000000000000000000000000000000000000000000!@#&000000000000000000000000000000000000000000000000000!@#&000000000000000000000000000000000000000000000000000!@#&000000000000000000000000000000000000000000000000000!@#&000000000000000000000000000000000000000000000000000!@#&000000000000000000000000000000000000000000000000000!@#&000000000000000000000000000000000000000000000000000!@#&000000000000000000000000000000000000000000000000000!@#&000000000000000000000000000000000000000000000000000!@#&000000000000000000000000000000000000000000000000000",["server"]="running = true!@#&--time = os.startTimer(.8333)!@#&rednet.open(\"back\")!@#&!@#&words = {}!@#&if (fs.exists(\"main\")==false) then!@#&	fs.makeDir(\"main\")!@#&end!@#&!@#&function title()!@#&	local monitor = peripheral.wrap(\"top\")!@#&	term.clear()!@#&	term.setCursorPos(1,1)!@#&	monitor.clear()!@#&end!@#&!@#&function getwinner()!@#&	local monitor = peripheral.wrap(\"top\")!@#&	monitor.clear()!@#&	local winningnumbers = {}!@#&	x,y = monitor.getSize()!@#&	for newnumber = 1,5,1 do!@#&		winningnumbers[newnumber] = math.random(1,9)!@#&	end!@#&	monitor.setCursorPos(x/2-5,1)!@#&	monitor.setTextScale(2)!@#&	monitor.write(\"[\"..winningnumbers[1]..\"-\"..winningnumbers[2]..\"-\"..winningnumbers[3]..\"-\"..winningnumbers[4]..\"-\"..winningnumbers[5]..\"]\")!@#&	monitor.setCursorPos(x/2-3,3)!@#&	local count = 1!@#&	for derp = 1,60,1 do!@#&		monitor.setCursorPos(x/2-3,3)!@#&		monitor.clearLine()!@#&		monitor.setCursorPos(x/2-3,3)!@#&		if(count==1)then!@#&			monitor.write(\"Winners\")!@#&			count = count+1!@#&		elseif(count==2)then!@#&			count = count-1!@#&		end!@#&		sleep(.3)!@#&	end!@#&	monitor.setBackgroundColor(colors.black)!@#&	fs.delete(\"main\")!@#&	running = false!@#&end!@#&!@#&function getdata(senderid,msg)!@#&	rednet.send(senderid , \"received\")!@#&	!@#&	if(fs.exists(\"main/machine\"..senderid)==false)then!@#&		fs.makeDir(\"main/machine\"..senderid)!@#&	end!@#&	count = 1!@#&	for name,value in msg:gmatch(\"([^%s]+)-(.*)\") do!@#&		player = name!@#&		numbers = value!@#&	end!@#&	print(\"**[\"..player..\"] \"..textutils.formatTime(os.time(),false)..\"**\")!@#&	open = fs.open(\"main/machine\"..senderid..\"/\"..player,\"w\")!@#&	open.writeLine(numbers)!@#&	open.close()!@#&end!@#&!@#&function getevent()!@#&	Event, pram1, pram2, pram3 = os.pullEvent()!@#&	return Event,pram1,pram2,pram3!@#&end!@#&!@#&function promptuser()!@#&	title()!@#&	time = os.startTimer(5)!@#&	derp = true!@#&	print(\"Would you like to get the winning numbers?\")!@#&	print(\"(Y/N)\")!@#&	while derp do!@#&		local Event,key = getevent()!@#&		if(Event==\"key\")then!@#&			if(key==21)then!@#&				getwinner()!@#&				derp = false!@#&			elseif(key==49)then!@#&				return!@#&			end!@#&		elseif(Event==\"timer\")then!@#&			return!@#&		end!@#&	end!@#&end!@#&!@#&title()!@#&!@#&term.clear()!@#&term.setCursorPos(1,1)	!@#&print(\"Running...\")!@#&print()!@#&!@#&while running do!@#&	local Event,pram1,pram2,pram3 = getevent()!@#&	if(Event==\"key\")then!@#&		if(pram1==28)then!@#&			promptuser()!@#&		end!@#&	elseif(Event==\"rednet_message\")then!@#&		getdata(pram1,pram2)!@#&	elseif(Event==\"timer\")then!@#&	end!@#&end",["lottery"]="if (fs.exists(\"lotterycomputer\")==false) then!@#&	fs.makeDir(\"lotterycomputer\")!@#&	open = fs.open(\"lotterycomputer/count\",\"w\")!@#&	open.writeLine(\"1\")!@#&	open.close()!@#&end!@#&!@#&!@#&	function resetnumbers()!@#&		number[1] = \"-\"!@#&		number[2] = \"-\"!@#&		number[3] = \"-\"!@#&		number[4] = \"-\"!@#&		number[5] = \"-\"!@#&	end!@#&!@#&running = true!@#&mainserver = 4!@#&rednet.open(\"back\")!@#&while running do!@#&	term.setTextColor(colors.white)!@#&	number = {}!@#&	!@#&	resetnumbers()!@#&	!@#&	function zeros(number)!@#&		local numberlength = string.len(number)!@#&		newnumber = \"\"!@#&		for derp = 1,4-numberlength,1 do!@#&			newnumber = newnumber..\"0\"!@#&		end!@#&		newnumber = newnumber..number!@#&		return newnumber!@#&	end!@#&	!@#&		!@#&	function title(place)!@#&		numplace = {}!@#&		local count = 1!@#&		term.clear()!@#&		term.setCursorPos(1,1)!@#&		print(\"Enter a number (\"..6-place..\") left\")!@#&		print()!@#&		print(\"|\"..number[1]..\"|\"..number[2]..\"|\"..number[3]..\"|\"..number[4]..\"|\"..number[5]..\"|\")!@#&		print()!@#&		for herp = 1,3,1 do!@#&			write(\" \")!@#&			for derp = 1,3,1 do!@#&				term.setBackgroundColor(colors.gray)!@#&				local x,y = term.getCursorPos()!@#&				numplace[count] = x..y!@#&				term.write(\" \")!@#&				term.setCursorPos(x,y)!@#&				write(count)!@#&				term.setBackgroundColor(colors.black)!@#&				term.write(\" \")!@#&				count = count+1!@#&			end!@#&			print()!@#&			print()!@#&		end!@#&		term.setBackgroundColor(colors.gray)!@#&		term.setCursorPos(2,11)!@#&		write(\"Random\")!@#&		term.setBackgroundColor(colors.black)!@#&		term.setBackgroundColor(colors.gray)!@#&		term.setCursorPos(9,11)!@#&		write(\"Clear\")!@#&		term.setBackgroundColor(colors.black)!@#&	end!@#&	!@#&	function printTicket()!@#&		open = fs.open(\"lotterycomputer/count\" , \"r\")!@#&		local ticketnumber = open.readLine()!@#&		open.close()!@#&		term.clear()!@#&		term.setCursorPos(1,1)!@#&		printer = peripheral.wrap(\"left\")!@#&		printer.newPage()!@#&		printer.setPageTitle(\"Lottery Ticket\")!@#&		x,y = printer.getPageSize()!@#&		printer.write(textutils.formatTime(os.time(),false))!@#&		printer.setCursorPos(x-string.len(name),1)!@#&		printer.write(name)!@#&		printer.setCursorPos(x/2-10,2)!@#&		printer.write(\"**Minecraft Lottery**\")!@#&		printer.setCursorPos(1,3)!@#&		for derp = 0 , x , 1 do!@#&		  printer.write(\"-\")!@#&		end!@#&		printer.setCursorPos(x/2-8,y/2)!@#&		printer.write(\"your numbers are\")!@#&		printer.setCursorPos(x/2-5,y/2+1)!@#&		printer.write(number[1]..\"-\"..number[2]..\"-\"..number[3]..\"-\"..number[4]..\"-\"..number[5])!@#&		printer.setCursorPos(x/2-10,y)!@#&		printer.write(\"Ticket number \"..zeros(math.floor(ticketnumber)))!@#&		printer.endPage()!@#&		term.setBackgroundColor(colors.red)!@#&		term.setCursorPos(1,3)!@#&		write(\"Thanks for playing MineCraft Lottery!\")!@#&		term.setBackgroundColor(colors.black)!@#&		term.setBackgroundColor(colors.red)!@#&		term.setCursorPos(1,4)!@#&		write(\"Please pick up your lottery ticket\")!@#&		print()!@#&		print()!@#&		term.setBackgroundColor(colors.black)!@#&		term.setTextColor(colors.yellow)!@#&		write(\"<---------------------------------\")!@#&		term.setTextColor(colors.black)!@#&		open = fs.open(\"lotterycomputer/count\",\"w\")!@#&		ticketnumber = math.floor(ticketnumber+1)!@#&		sleep(1)!@#&		open.writeLine(ticketnumber)!@#&		open.close()!@#&		done = false!@#&		--while done==false do!@#&			local choices = textutils.serialize(number)!@#&			--rednet.send(mainserver , name..\"-\"..choices)!@#&			--local derp , msg = rednet.receive(.5)!@#&			--if(derp==nil)then!@#&			--	rednet.send(mainserver , name..\"-\"..choices)!@#&			--else!@#&			--	done = true!@#&			--end!@#&		--end!@#&!@#&		sleep(4)!@#&	end!@#&	!@#&	function confirm()!@#&		running = true!@#&		term.setBackgroundColor(colors.green)!@#&		term.setCursorPos(2,13)!@#&		write(\"Confirm\")!@#&		term.setBackgroundColor(colors.black)!@#&		term.setBackgroundColor(colors.red)!@#&		term.setCursorPos(10,13)!@#&		write(\"Cancel\")!@#&		term.setBackgroundColor(colors.black)!@#&		while running do!@#&			local Event, key, pram1, pram2 = os.pullEvent(\"mouse_click\")!@#&			if(pram2==13)then!@#&				if(pram1>=1 and pram1<=9)then!@#&					return \"done\"!@#&				elseif(pram1>=10 and pram1<=16)then!@#&					return \"notdone\"!@#&				end!@#&			end!@#&		end!@#&	end!@#&	!@#&	function choosenumbers()!@#&		local count = 1!@#&		while count<6 do!@#&			title(count) !@#&			running = true!@#&			while running do!@#&				local Event, key, pram1, pram2 = os.pullEvent(\"mouse_click\")!@#&				for points = 1,9,1 do!@#&					if(numplace[points]==pram1..pram2)then!@#&						number[count] = points!@#&						running = false!@#&					end	!@#&					if(pram2==11)then!@#&						if(pram1>=2 and pram1<=8)then!@#&							for newnumber = 1,5,1 do!@#&								number[newnumber] = math.random(1,9)!@#&							end!@#&							running = false!@#&							title(6)!@#&							return!@#&						elseif(pram1>=9 and pram1<=14)then!@#&							resetnumbers()!@#&							title(1)!@#&							count= 1!@#&						end!@#&					end!@#&				end!@#&			end!@#&			count = count+1!@#&		end!@#&		title(6)!@#&	end!@#&	!@#&	--PROGRAM STARTS HERE--!@#&	!@#&	done = false!@#&	term.clear()!@#&	term.setCursorPos(1,1)!@#&	print(\"Enter your name\")!@#&	write(\":> \")!@#&	name = io.read()!@#&	!@#&	choosenumbers()!@#&	!@#&	while done ==false do!@#&		response = confirm()!@#&		if(response==\"done\")then!@#&			done = true!@#&		else!@#&			choosenumbers()!@#&		end!@#&	end!@#&	printTicket()!@#&end!@#&sleep(1)!@#&term.clear()!@#&term.setCursorPos(1,1)",[".Lasers_Data"]={["Themes"]={["Lasers"]="activeTextCol = white!@#&bColor = white!@#&defaultTextCol = red!@#&headerTextCol = white!@#&headerBackCol = red!@#&activeBackCol = red",},["Settings"]={["settings.cfg"]="{[\"nickname\"]=\"<Nickname>\",[\"theme\"]=\"Lasers\",[\"lang\"]=1,}",},["APIs"]={["rNet"]="--[[!@#&    [API] rNet!@#&    @version 1.0, 30/12/2013, HK!@#&    @author Hellkid98, HK!@#&--]]!@#&!@#&!@#&!@#&!@#&!@#&--[[!@#&    @description    \"Opens all modems available\"!@#&	!@#&	@return         nil!@#&--]]!@#&function openSides()!@#&    !@#&	local bool = false!@#&    for _, side in pairs( rs.getSides() ) do!@#&        if peripheral.getType( side ) == \"modem\" then!@#&            rednet.open( side )!@#&			bool = true!@#&	    end!@#&    end!@#&	return bool!@#&end!@#&!@#&!@#&--[[!@#&    @description    \"Closes all modems available\"!@#&	!@#&	@return         nil!@#&--]]!@#&function closeSides()!@#&!@#&    for _, side in pairs( rs.getSides() ) do!@#&        if peripheral.getType(side) == \"modem\" then!@#&            rednet.close(side)!@#&	    end!@#&    end!@#&end!@#&!@#&!@#&--[[!@#&    @description    \"Checks all modems available\"!@#&	!@#&	@return         table!@#&--]]!@#&function checkOpenSides()!@#&!@#&    local tOpenSides = {}!@#&    for _,side in pairs(rs.getSides()) do!@#&        if peripheral.getType(side) == \"modem\" then!@#&            if rednet.isOpen(side) then !@#&			    table.insert(tOpenSides,side) !@#&			end!@#&	    end!@#&    end!@#&  return tOpenSides!@#&end!@#&!@#&!@#&--[[!@#&    @description    \"Receive messages from only allowed IDs\"!@#&	!@#&	@param          tIDs,    table!@#&	@param       timeout,   number!@#&	!@#&	@return         table, boolean!@#&--]]!@#&function receive(tIDs,timeout)!@#&!@#&    local tData = {}!@#&    local response = false!@#&    for i = 1,#tIDs do!@#&        local rID, msg = rednet.receive(timeout)!@#&        if rID == tIDs[i] then!@#&            nMsg = {}!@#&            nMsg.id = rID!@#&            nMsg.msg = msg!@#&            table.insert(tData,nMsg)!@#&            response = true!@#&        end!@#&    end!@#&     return tData, response!@#&end!@#&!@#&!@#&--[[!@#&    @description    \"Sending messages to multiple computers\"!@#&	!@#&	@param          msg,    string!@#&	@param         tIDs,    table!@#&	!@#&	@return         nil!@#&--]]!@#&function send(msg,tIDs)!@#&!@#&    for i = 1,#tIDs do!@#&        rednet.send(tIDs[i],msg)!@#&    end!@#&end!@#&!@#&!@#&--[[!@#&    @description    \"Sends multiple messages to one computer\"!@#&	!@#&	@param          messages,    table!@#&	@param                id,    number!@#&	!@#&	@return         nil!@#&--]]!@#&function sendMessages(messages,id)!@#&    for i = 1,#messages do!@#&	    rednet.send(id,messages[i])!@#&	end!@#&end!@#&!@#&!@#&--[[!@#&    @description    \"Sends a table over rednet\"!@#&	!@#&	@param          id,    number!@#&	@param           t,    table!@#&--]]!@#&function sendTable(id,t)!@#&    rednet.send(id,textutils.serialize(t))!@#&end!@#&!@#&--[[!@#&    @description    \"Receives a table over rednet\"!@#&	!@#&	@return         table!@#&--]]!@#&function receiveTable()!@#&    local id, msg = rednet.receive()!@#&	textutils.unserialize(msg)!@#&	return id, msg!@#&end!@#&!@#&!@#&--[[!@#&    @description    \"Waits for one message\"!@#&	!@#&	@param          tIDs,    table!@#&	!@#&	@return         id, string!@#&--]]!@#&function waitForMessage(tIDs)!@#&!@#&    evt, rID, msg = os.pullEvent(\"rednet_message\")!@#&    for i = 1,#tIDs do!@#&        if rID == tIDs[i] then!@#&            return rID, msg!@#&        end!@#&    end!@#&end!@#&!@#&!@#&--[[!@#&    @description    \"Waiting until all messages are received from all computers\"!@#&	!@#&	@param          tIDs,    table!@#&	@return         table!@#&--]]!@#&function waitForAllMessages(tIDs)!@#&!@#&    local tData = {}!@#&    while true do!@#&        evt, rID, msg = os.pullEvent(\"rednet_message\")!@#&            for i = 1,#tIDs do!@#&                if rID == tIDs[i] then!@#&                    local add = true!@#&	!@#&                    for k = 1,#tData do!@#&	                    if rID == tData[k].id then!@#&	                        add = false!@#&	                    end!@#&	                end!@#&	!@#&	                if add then!@#&	                    local nData = {}!@#&	                    nData.id = rID!@#&	                    nData.msg = msg!@#&	                    table.insert(tData,nData)!@#&                	end!@#&	            end!@#&	            if #tData == #tIDs then return tData end!@#&            end!@#&    end!@#&end!@#&!@#&!@#&--[[!@#&    @description    \"Waits for a specific message and returns the ID\"!@#&	!@#&	@param          msg,    string!@#&	@return         id!@#&--]]!@#&function getID( msg )!@#&    repeat !@#&	    id, message = rednet.receive()!@#&	until message == msg!@#&	!@#&	return id!@#&end",["gui"]="--[[!@#&    [API] GUI!@#&    @version 0.7, 22/12/2013, HK98!@#&    @author Hellkid98, HK98!@#&--]]!@#&!@#&local w,h = term.getSize()!@#&!@#&!@#&!@#&!@#&!@#&!@#&!@#&!@#&--[[ Utils/File Handling ]]--!@#&!@#&--[[ !@#& @description    \"Gets the table from a file\"!@#& !@#& @param          fileName,    string!@#& @return         table!@#&--]]!@#&function getTable(fileName)!@#&     file = fs.open(fileName,\"r\"); !@#&	 nTable = textutils.unserialize(file.readAll()); !@#&	 file.close()!@#&     return nTable!@#&end!@#&!@#&!@#&!@#&--[[ !@#& @description    \"Converts whole file into table\"!@#& !@#& @param          fileName,    string!@#& @return         table!@#&--]]!@#&function convertFileToTable(fileName)!@#&!@#&    if fs.exists(fileName) then!@#&	    file = fs.open(fileName,\"r\")!@#&        local nTable = {}!@#&        local line = file.readLine()!@#&            repeat!@#&                table.insert(nTable,line)!@#&                line = file.readLine()!@#&            until line == nil!@#&        !@#&		  file.close()!@#&		  return nTable!@#&	else!@#&	    error(\"File didn't exist: \"..fileName,2)!@#&	end!@#&	!@#&end!@#&!@#&!@#&!@#&--[[ !@#& @description    \"Saves table to file\"!@#& !@#& @param          fileName,    string!@#& @param          nTable,      table!@#& @return         nil!@#&--]]!@#&function saveTable(fileName,nTable)!@#&     file = fs.open(fileName,\"w\"); !@#&	 file.writeLine(textutils.serialize(nTable)); !@#&	 file.close()!@#&end!@#&!@#&!@#&--[[!@#&    @description    \"Converts a table to a table with pages :P\"!@#&	!@#&	@param          hTable,    table!@#&	@param              sY,    number,    Minium value!@#&	@param              fY,    number,    Max value!@#&--]]!@#&function table_pages(hTable, sY, fY)!@#&    !@#&	local max_entries = 0!@#&	for i = sY, fY do!@#&	   max_entries = max_entries + 1!@#&	end!@#&    !@#&	local pages = math.ceil(#hTable/max_entries)!@#&	!@#&	local oldValue = 0!@#&	local tPages = {}!@#&	for i = 1,pages do!@#&	!@#&	    local nPage = {}!@#&		if i ~= pages then!@#&		    for v = 1, max_entries do!@#&			    table.insert(nPage, hTable[v + oldValue])!@#&			end!@#&			oldValue = oldValue + max_entries!@#&			table.insert(tPages, nPage)!@#&		!@#&		else!@#&		    for v = oldValue + 1, #hTable do!@#&			    table.insert(nPage, hTable[v])!@#&		    end!@#&			table.insert(tPages, nPage)!@#&		end!@#&		!@#&	end!@#&	for i = 1,#tPages do!@#&	    if #tPages[i] == 0 then!@#&		    table.remove(tPages, i)!@#&			break!@#&		end!@#&	end!@#&	return tPages!@#&end!@#&!@#&!@#&!@#&!@#&!@#&!@#&!@#&!@#&--[[ HTTP functions ]]--!@#&!@#&--[[ !@#& @description    \"Downloads a file from pastebin\"!@#& !@#& @param          fileName,    string!@#& @param          hCode,       string!@#& @return         nil!@#&--]]!@#&local function pGet(hCode,file)!@#&!@#&   hResponse = http.get(\"http://pastebin.com/raw.php?i=\"..textutils.urlEncode(hCode))!@#&          if hResponse then!@#&	          hFile = fs.open(file,\"w\")!@#&              local sCode = hResponse.readAll()!@#&		      hResponse.close()!@#&              hFile.write(sCode)!@#&              hFile.close() --Always important to close file :3!@#&	 !@#&	      else !@#&		      error(\"Error getting the file \" .. file, 0)!@#&          end!@#&end!@#&!@#&!@#&!@#&--[[!@#&    @description    \"Uploads a file to pastebin\"!@#&	!@#&	@param          file,    string!@#&	@param          name,    string!@#&--]]!@#&function pPut(file, name)!@#&    local f = fs.open(file, \"r\")!@#&	local code = f.readAll()!@#&	f.close()!@#&	!@#&	local key = \"0ec2eb25b6166c0c27a394ae118ad829\"!@#&	local response = http.post(!@#&		\"http://pastebin.com/api/api_post.php\", !@#&		\"api_option=paste&\"..!@#&		\"api_dev_key=\"..key..\"&\"..!@#&		\"api_paste_format=lua&\"..!@#&		\"api_paste_name=\"..textutils.urlEncode(name)..\"&\"..!@#&		\"api_paste_code=\"..textutils.urlEncode(code)!@#&		)!@#&		!@#&	if not response then!@#&	    error(\"Error uploading the file \" .. file, 0)	!@#&	else!@#&	    local sResponse = response.readAll()!@#&		response.close()!@#&		!@#&		local sCode = string.match(sResponse, \"[^/]+$\")!@#&	    return name, sCode!@#&	end!@#&end!@#&!@#&!@#&!@#&!@#&!@#&!@#&!@#&!@#&--[[ Drawing functions ]]--!@#&!@#&--[[!@#&    @description    \"Draws text at the specified position\"!@#&	!@#&	@param          x,    xPosition!@#&	@param          y,    yPositon!@#&	@return         nil,!@#&--]]!@#&function drawAt(x,y,text)!@#&    term.setCursorPos(x,y) !@#&	write(text)!@#&end!@#& !@#& !@#&--[[!@#&    @description    \"Clears the screen and sets the cursor pos to x=1, y=1\"!@#&	!@#&	@return         nil,!@#&--]]!@#&function clear(bColor)!@#&    if bColor ~= nil then!@#&	    term.setBackgroundColor(bColor)!@#&	end!@#&    term.clear()!@#&    term.setCursorPos(1,1)!@#&end!@#&!@#& !@#&--[[!@#&    @description    \"Draws a box from starting value to finish values\"!@#&	!@#&	@param          sX,    number!@#&	@param          fX,    number!@#&	@param          sY,    number!@#&	@param          fY,    number!@#&	@param      bColor,    color!@#&!@#&--]]!@#&function drawBox(sX,fX,sY,fY,bColor)!@#&!@#&    if bColor ~= nil then!@#&        term.setBackgroundColor(bColor)!@#&	else!@#&	    error(\"nil bColor\",2)!@#&    end!@#&!@#&	!@#&        local str = \"\"!@#&		!@#&    for x = sX, fX do!@#&        str = str..\" \"!@#&    end!@#&	!@#&   for y = sY, fY do!@#&       drawAt(sX,y,str)!@#&   end!@#&   !@#&end   !@#&   !@#&  !@#&--[[!@#&    @description    \"Draws a single line at the y position\"!@#&	!@#&	@param          sX,    number!@#&	@param          fX,    number!@#&	@param           y,    number!@#&	@param      tColor,    color or nil!@#&	@param      bColor,    color or nil!@#&	@param          ch,    string or nil!@#&--]]!@#&function drawLine(sX,fX,y,tColor,bColor,ch)!@#& !@#&    if ch == nil then!@#&        ch = \" \"!@#&    end!@#& !@#&    if tColor ~= nil then!@#&        term.setTextColor(tColor)!@#&    end!@#& !@#&    if bColor ~= nil then!@#&        term.setBackgroundColor(bColor)!@#&    end!@#& !@#&        local str = \"\" !@#&		!@#&    for x = sX, fX do!@#&        str = str..ch !@#&    end!@#&        drawAt(sX,y,str)!@#&end!@#&!@#&!@#&--[[!@#&    @description    \"Centers and draws text at the desired yPosition\"!@#&	!@#&	@param          y,    number!@#&	@param     tColor,    color or nil!@#&	@param     bColor,    color or nil!@#&	@param       text,    string!@#&--]]!@#&function centerPrint(y,tColor,bColor,text)!@#&    if tColor ~= nil then!@#&        term.setTextColor(tColor)!@#&    end!@#&   !@#&    if bColor ~= nil then!@#&        term.setBackgroundColor(bColor) !@#&    end	!@#&	!@#&	if text == nil then !@#&	    error(\"text was nil\",2) !@#&	end!@#&	!@#&        term.setCursorPos(math.ceil(w/2 - #text/2),y)!@#&        write(text)!@#&end!@#&!@#&!@#&!@#&!@#&!@#&!@#&!@#&!@#&--[[ Bars ]]--!@#&!@#&--[[!@#&    @description    \"Creates a bar with the param values\"!@#&	!@#&	!@#&	@param                 sX,    number!@#&	@param                 fX,    number!@#&	@param                  y,    number!@#&	@param    currentProgress,    number!@#&	@param             maxLen,    number!@#&	@param                box,   boolean!@#&	!@#&	@return          table!@#&--]]!@#&function initBar(sX, fX, y, currentProgress, maxLen, box)!@#&    local bar = {}!@#&	bar.sX = math.ceil(sX)!@#&	bar.fX = math.ceil(fX)!@#&	bar.y  = math.ceil(y)!@#&	bar.currentProgress = currentProgress or 0!@#&	bar.maxLen = maxLen!@#&	bar.percent = (currentProgress/maxLen) * 100!@#&	bar.barWidth = 0!@#&    for i = sX,fX do!@#&        bar.barWidth = bar.barWidth + 1!@#&    end!@#&    bar.box = box or false!@#&	return bar!@#&end!@#&!@#&--[[!@#&    @description    \"Draws the bar\"!@#&	!@#&	!@#&	@param               bar,    table!@#&	@param     artProperties,    table!@#&	!@#&	@return         nil!@#&--]]!@#&function drawBar(bar,artProperties)!@#&!@#&    local boxColor!@#&	local barColor!@#&	local barBackgroundColor!@#&    if artProperties then!@#&        boxColor = artProperties.boxColor or colors.lightGray!@#&	    barColor = artProperties.barColor or colors.lime!@#&	    barBackgroundColor = artProperties.barBackgroundColor or colors.gray!@#&	else!@#&	    boxColor = colors.lightGray!@#&		barColor = colors.lime!@#&		barBackgroundColor = colors.gray!@#&	end!@#&	!@#&	if bar.box then!@#&        gui.drawBox(bar.sX - 1,bar.fX + 1,bar.y - 1,bar.y + 1,boxColor)!@#&	end!@#&	for i = 1, bar.barWidth do!@#&		term.setCursorPos( ( bar.sX - 1 ) + i, bar.y)!@#&		local char = ' '!@#&		if i < (( bar.currentProgress / bar.maxLen ) * bar.barWidth + 1) then!@#&				term.setBackgroundColor( barColor )!@#&		else!@#&				term.setBackgroundColor( barBackgroundColor )!@#&		end!@#&		write( char )!@#&	end!@#&end!@#&	!@#&!@#&--[[!@#&    @description    \"Updates the 'bar table' with a new value for the current progress and draws it\"!@#&	!@#&	!@#&	@param          newValue,    number!@#&	@param     artProperties,    table!@#&	!@#&	@return         nil!@#&--]]!@#&function updateBar(bar,newValue,artProperties)!@#&    bar.currentProgress = newValue!@#&	bar.percent = (bar.currentProgress/bar.maxLen) * 100!@#&	drawBar(bar,artProperties)!@#&end!@#&!@#&!@#&!@#&!@#&!@#&!@#&!@#&!@#&--[[ Menus ]]--!@#&!@#&--[[ !@#& @description    \"Loading the theme file for a menu\"!@#&!@#& @param          destination,    string !@#& @return         table!@#&--]]!@#&function loadTheme(destination)!@#&!@#&    local names = {\"activeTextCol\", \"bColor\", \"defaultTextCol\", \"headerTextCol\", \"headerBackCol\", \"activeBackCol\",}!@#&	local colorTable = {}!@#&	!@#&   --  Loading the theme file and converting it into a color table.!@#&    local menuTheme = convertFileToTable(destination)!@#&!@#&	  --  Now we get the index names for the table!@#&	    for i, v in ipairs(menuTheme) do!@#&		     for k = 1,#names do!@#&			     if string.find(v,names[k]) then name = names[k] break end!@#&		     end!@#&            colorTable[name] = colors[v:match(\"%=% *(%w+)\")]!@#&        end!@#&	        return colorTable!@#&			!@#&end!@#&!@#&!@#&--[[!@#&    @description    \"Handles menu tables and events\"!@#&!@#&	@param           tMenu,    table!@#&	@param        language,    string!@#&	@param   artProperties,    table!@#&    @return            nil!@#&--]]!@#&function handleMenu(tMenu,artProperties)!@#&!@#&    local menu = tMenu.defMenu --# The default/starting menu you will enter the first time!@#&	local language = tMenu.defLanguage!@#&    local visitedMenus = {}!@#&    local runAnim = false!@#&    local mNum = 1!@#&!@#&	!@#&    while true do!@#&       language = tMenu.defLanguage!@#&	      --# Adding the positions of the options in the menu so we can check where they are on the screen when clicking!@#&          for i = 1, #tMenu[language][menu] do!@#&	          tMenu[language][menu][i].sX = math.ceil(w/2 - (#tMenu[language][menu][i].name/2 + 1))!@#&		      tMenu[language][menu][i].fX = math.floor(w/2 + (#tMenu[language][menu][i].name/2 + 1))!@#&		      tMenu[language][menu][i].y = 5 + i!@#&	      end!@#&	!@#&          --# We start with drawing the menu, Then we wait for the events!@#&          if artProperties == nil then !@#&	          error(\"Failed, Theme was corrupt/empty\",2)!@#&	      end!@#& !@#& !@#& !@#&--# Local variables that are used for drawing the menu, They are the ones that set text color etc.!@#&          local mBackCol        = artProperties.bColor!@#&	      local mDefaultTextCol = artProperties.defaultTextCol!@#&	      local mActiveTextCol  = artProperties.activeTextCol!@#&	      local mActiveBackCol  = artProperties.activeBackCol!@#&	      local headerBackCol   = artProperties.headerBackCol!@#&	      local headerTextCol   = artProperties.headerTextCol!@#&	!@#&  !@#&--# Actually start drawing the menu!@#&local function drawMenu()!@#&    term.setBackgroundColor(mBackCol)!@#&    clear()!@#&    drawBox(1,w,1,3,headerBackCol)!@#&    centerPrint(2,headerTextCol,headerBackCol,tMenu[language][menu].title)!@#&!@#&    for i = 1,#tMenu[language][menu] do!@#&!@#&        if mNum == i then!@#&            centerPrint(5 + i,mActiveTextCol,mActiveBackCol,\" \"..tMenu[language][menu][i].name..\" \")!@#&        else!@#&            centerPrint(5 + i,mDefaultTextCol,mBackCol,tMenu[language][menu][i].name)!@#&        end!@#&    end!@#&end!@#&!@#&	        drawMenu()!@#&			  !@#&!@#&--# An menu animation function, Doesn't return anything!@#&local function mAnimation(text,y,boolean)!@#&    if boolean then!@#&	    local sX = w/2 - #text/2!@#&	    local fX = w/2 + #text/2!@#&	    !@#&		for i = w/2 - #text/2, w/2 do!@#&		    term.setBackgroundColor(mActiveBackCol)!@#&            drawAt(sX,y,\" \")!@#&			drawAt(fX,y,\" \")!@#&						   !@#&	        term.setBackgroundColor(mBackCol)!@#&            drawAt(sX - 1,y,\" \")!@#&			drawAt(fX + 1,y,\" \")!@#&						   !@#&			sX = sX + 1!@#&			fX = fX - 1!@#&			sleep(0.05)!@#&		end!@#&	else!@#&		local sX = w/2!@#&	    local fX = w/2!@#&				   !@#&		local str = \"\"!@#&		for i = 1,#text + 2 do!@#&		    str = str..\" \"!@#&		end!@#&			centerPrint(y,nil,mBackColor,str)!@#&					!@#&	    for i = w/2, w/2 + #text/2 do!@#&		    term.setBackgroundColor(mActiveBackCol)!@#&            drawAt(sX,y,\" \")!@#&			drawAt(fX,y,\" \")!@#&						   !@#&			term.setBackgroundColor(mBackCol)!@#&            drawAt(sX - 1,y,\" \")!@#&			drawAt(fX + 1,y,\" \")!@#&						   !@#&			sX = sX - 1!@#&			fX = fX + 1!@#&			sleep(0.05)!@#&	    end!@#&			       !@#&    end			!@#&end!@#&!@#&!@#&!@#&		   !@#&if runAnim then!@#&	mAnimation(tMenu[language][menu][mNum].name,tMenu[language][menu][mNum].y,false)!@#&	runAnim = false!@#&	drawMenu()!@#&end!@#&!@#& --# Here we wait for the events and handle them!@#&  local evt, p1, mX, mY = os.pullEvent()!@#&        if evt == \"key\" then!@#&		!@#&            if p1 == 200 then!@#&	            mNum = mNum  - 1  if mNum < 1 then mNum = 1 end!@#&	!@#&	        elseif p1 == 208 then!@#&	            mNum = mNum + 1!@#&	                if mNum > #tMenu[language][menu] then mNum = #tMenu[language][menu] end!@#&	!@#&	        elseif p1 == 28 then!@#&					if tMenu[language][menu][mNum].destination ~= nil then!@#&					     mAnimation(tMenu[language][menu][mNum].name,tMenu[language][menu][mNum].y,true)!@#&	                end  !@#&	            !@#&				if tMenu[language][menu][mNum].destination ~= nil and tMenu[language][menu][mNum].destination ~= \"_back\" and tMenu[language][menu][mNum].destination ~= \"_exit\" and tMenu[language][menu][mNum].destination ~= \"_function\" then !@#&	                runAnim = true!@#&					table.insert(visitedMenus,menu)!@#&	                menu = tMenu[language][menu][mNum].destination!@#&	                mNum = 1!@#&	 !@#&	 !@#&	            elseif tMenu[language][menu][mNum].destination == \"_back\" then --# Going back to the previous menu that you were in!@#&	                mNum = 1!@#&	                menu = visitedMenus[#visitedMenus]!@#&							    if #visitedMenus ~= 0 then!@#&                                    runAnim = true!@#&                                end	!@#&	                table.remove(visitedMenus,#visitedMenus)!@#&	 !@#&	            elseif tMenu[language][menu][mNum].destination == \"_function\" then!@#&	                functionName = tMenu[language][menu][mNum][\"tFunction\"].name!@#&	  !@#&	                if tMenu[language][menu][mNum][\"tFunction\"][\"args\"] ~= nil then!@#&	                    args = tMenu[language][menu][mNum][\"tFunction\"][\"args\"]!@#&	                else!@#&	                    args = \"\"!@#&	                end!@#&	  !@#&	  !@#&	                if #args ~= 0 then!@#&	                    functionName(unpack(args)) --# Calling the function from the table with arguments!@#&	                else!@#&					    functionName()!@#&				    end!@#&	 !@#&	            elseif tMenu[language][menu][mNum].destination == \"_exit\" then --# Exiting the program/game if the destination in the table is \"_exit\"!@#&	                term.setTextColor(colors.white) term.setBackgroundColor(colors.black)!@#&	                clear()!@#&	                error()!@#&	            end!@#&	 !@#&            end!@#&			!@#&			!@#&			!@#&		elseif evt == \"mouse_click\" or evt == \"monitor_touch\" then!@#&		!@#&		    for i = 1, #tMenu[language][menu] do!@#&		        if mX >= tMenu[language][menu][i].sX and mX <= tMenu[language][menu][i].fX and mY == tMenu[language][menu][i].y then!@#&				    if mNum ~= i then!@#&					    mNum = i!@#&					    break!@#&					else!@#&					!@#&					if tMenu[language][menu][mNum].destination ~= nil then!@#&					     mAnimation(tMenu[language][menu][mNum].name,tMenu[language][menu][mNum].y,true)!@#&	                end    !@#&						if tMenu[language][menu][mNum].destination ~= nil and tMenu[language][menu][mNum].destination ~= \"_back\" and tMenu[language][menu][mNum].destination ~= \"_exit\" and tMenu[language][menu][mNum].destination ~= \"_function\" then !@#&	                        runAnim = true!@#&							table.insert(visitedMenus,menu)!@#&	                        menu = tMenu[language][menu][mNum].destination!@#&	                        mNum = 1!@#&							break!@#&	 !@#&	 !@#&	                    elseif tMenu[language][menu][mNum].destination == \"_back\" then --# Going back to the previous menu that you were in!@#&	                        mNum = 1!@#&	                        menu = visitedMenus[#visitedMenus]!@#&							    if #visitedMenus ~= 0 then!@#&                                    runAnim = true!@#&                                end	!@#&	                        table.remove(visitedMenus,#visitedMenus)								!@#&							break!@#&	 !@#&	                    elseif tMenu[language][menu][mNum].destination == \"_function\" then!@#&	                        functionName = tMenu[language][menu][mNum][\"tFunction\"].name!@#&	  !@#&	                        if tMenu[language][menu][mNum][\"tFunction\"][\"args\"] ~= nil then!@#&	                            args = tMenu[language][menu][mNum][\"tFunction\"][\"args\"]!@#&	  !@#&	                        else!@#&	                            args = \"\"!@#&	                        end!@#&	                          !@#&							  if #args ~= 0 then!@#&	                              functionName(unpack(args)) --# Calling the function from the table with arguments!@#&	                          else!@#&							      functionName()!@#&							  end!@#&							  !@#&	                    elseif tMenu[language][menu][mNum].destination == \"_exit\" then --# Exiting the program/game if the destionation in the table is \"_exit\"!@#&	                        term.setTextColor(colors.white) term.setBackgroundColor(colors.black)!@#&	                        clear()!@#&	                        error()!@#&	                    end!@#&					    !@#&					  !@#&					end!@#&				end!@#&			end!@#&			!@#&        end!@#&    end!@#&  !@#&end!@#&!@#&!@#&!@#&!@#&!@#&!@#&!@#&!@#&--[[ Misc ]]--!@#&!@#&--[[!@#&    @description    \"A modified reading function\"!@#&	!@#&	@param          properties,    table!@#&	@return         string!@#&--]]!@#&function mRead(properties)!@#&!@#&--[[!@#&    --# Properties!@#& !@#&        * textLength: The maxium textlength!@#&        * allowedChars: The allowed chars to type, This will block all except them, Example: cRead({textLength = 4, allowedChars = \"1234567890\"}) will only allow numbers from 0-9!@#&        * blockedChars: The chars that is blocked from being typed.!@#&	    * replaceChar: replaces the char like read(\"*\") --> replaceChar = \"*\"!@#&        * exitOnKey: Exits on the desired key and returns nil!@#&]]--!@#&    !@#&  --# Initializing variables, functions etc.!@#&	term.setCursorBlink(true)!@#&    local curX, curY = term.getCursorPos()!@#&    local text = \"\"!@#&!@#&local function reDraw()!@#&    if properties ~= nil and properties.centeredText ~= nil and properties.centeredText then!@#&	   local str = \"\"!@#&	   for i = 1,#text + 2 do!@#&	       str = str..\" \"!@#&	   end!@#&	   centerPrint(curY,nil,nil,str)!@#&	else!@#&        for i = 1,#text + 1 do!@#&            drawAt(curX - 1 + i,curY,\" \")!@#&        end!@#&	end!@#&end!@#&!@#&!@#&-- Locals!@#&    local textLength!@#&    local repChar!@#&    local charTable!@#&	local bChars!@#&    local exitKey!@#&!@#& !@#&    while true do!@#&	  --# Checking the table properties!@#&        if properties ~= nil then!@#&            !@#&			if properties.replaceChar ~= nil then!@#&                repChar = string.sub(properties.replaceChar,1,1)!@#&            end!@#&            if properties.textLength ~= nil then!@#&                textLength = properties.textLength!@#&            end!@#&            if properties.allowedChars ~= nil then!@#&                charTable = {} !@#&			        for i = 1,#properties.allowedChars do !@#&				        table.insert(charTable,string.sub(properties.allowedChars,i,i)) !@#&			        end!@#&            end!@#&		    if properties.blockedChars ~= nil then!@#&		        bChars = {}!@#&                    for i = 1, #properties.blockedChars do!@#&                        table.insert(bChars,string.sub(properties.blockedChars,i,i))!@#&                    end!@#&            end				   !@#&            if properties.exitOnKey ~= nil then!@#&                exitKey = properties.exitOnKey!@#&            end!@#&        !@#&		end!@#&!@#&		!@#&		!@#&local function charCheck(str,string)!@#&    if properties ~= nil and properties.blockedChars ~= nil then!@#&        for i = 1,#bChars do!@#&            str = string.gsub(str,bChars[i],\"\")!@#&        end!@#&    end	!@#&!@#&    if properties ~= nil and properties.allowedChars ~= nil then!@#&        if #charTable ~= 0 then local add = false !@#&!@#&     		for i = 1,#charTable do !@#&                if str == charTable[i] then add = true break end !@#&            end!@#&			!@#&          if add then string = string..str end!@#&          end!@#&    else!@#&          string = string..str!@#&    end!@#&          return string!@#&end!@#&!@#&!@#&!@#& --# Drawing the text to the screen!@#&  reDraw()!@#&      if repChar == nil then!@#&	      if properties ~= nil and properties.centeredText ~= nil and properties.centeredText then!@#&		      centerPrint(curY,nil,nil,text)!@#&		  else!@#&              drawAt(curX,curY,text)!@#&		  end!@#&      else!@#&          local str = \"\"!@#&          for i = 1,#text do!@#&              str = str..repChar!@#&          end!@#&		  !@#&		  if properties ~= nil and properties.centeredText ~= nil and properties.centeredText then!@#&              centerPrint(curY,nil,nil,str)!@#&		  else		  !@#&              drawAt(curX,curY,str)!@#&		  end!@#&      end!@#&!@#&!@#&	  !@#&	  !@#&local evt, p1 = os.pullEvent()!@#&    if evt == \"char\" then !@#&        if textLength ~= nil then !@#&            if #text < textLength then text = charCheck(p1,text) end!@#&        else!@#&            text = charCheck(p1,text)!@#&        end!@#&!@#&    elseif evt == \"key\" then !@#&        if exitKey ~= nil then if p1 == exitKey then term.setCursorBlink(false) return nil end end!@#&            if p1 == 14 then text = string.sub(text,1,#text - 1)!@#&    !@#&            elseif p1 == 57 then text = text..\"\"!@#&    !@#&            elseif p1 == 28 then term.setCursorBlink(false) return text!@#&	!@#&            end!@#&    end!@#&    end!@#&end!@#&!@#&!@#&--[[!@#&    @description    \"Loads apis from a folder, With GUI or not\"!@#&	!@#&	!@#&	@param             path,    string!@#&	@param          barMode,    boolean!@#&	@param                y,    number!@#&	@param           bColor,    number!@#&	@param           tColor,    number!@#&	@param    artProperties,    table!@#&	!@#&	@return         nil!@#&]]--!@#&function loadAPIs(path, barMode, y, tColor, bColor, artProperties)!@#&    local files = {}!@#&	for _, file in ipairs(fs.list(path)) do!@#&	    table.insert(files, path .. file)!@#&	end!@#&	if barMode then!@#&	    local bCol = bColor or colors.black!@#&		local tCol = tColor or colors.white!@#&	    local bar = initBar(2, w - 1, y, 0, #files)!@#&		if y < 4 then!@#&		    y = 4!@#&		end!@#&		if y > h - 1 then!@#&		    y = h - 1!@#&		end!@#&		!@#&	    for i = 1,#files do!@#&		    clear(bCol)!@#&		    os.loadAPI(files[i])!@#&			drawBox(bar.sX, bar.fX, bar.y - 3, bar.y + 1,artProperties.boxColor)!@#&			updateBar(bar, i, artProperties)!@#&			local s, f = string.find(files[i], path)!@#&			local file = string.sub(files[i],f + 1,#files[i])!@#&			centerPrint(bar.y - 3,tCol, artProperties.boxColor,\"Loading APIs\")!@#&			centerPrint(bar.y - 1,tCol, artProperties.boxColor,i .. \"/\" .. #files)!@#&			centerPrint(bar.y + 1,tCol, artProperties.boxColor,\"Loading API: \" .. file)!@#&			sleep(.2) -- Just so you can see when it's loading!@#&		end!@#&	!@#&	else!@#&	    for i = 1,#files do!@#&		    os.loadAPI(files[i])!@#&		end!@#&	end!@#&end!@#&!@#&!@#&--[[!@#&    @description    \"Lists all files/folders in the desired path and returns a table\"!@#&	!@#&	!@#&	@param          path,    string!@#&	@param          mode,    string!@#&	!@#&	@return        table!@#&--]]!@#&function list( path, mode )!@#&    local files = {}!@#&	mode = mode or nil!@#&    for _, file in ipairs( fs.list( path ) ) do!@#&	!@#&	    if mode ~= nil then!@#&		    if mode == \"files\" then!@#&			    if not fs.isDir( path .. file ) then!@#&				    table.insert( files, path .. file )!@#&				end!@#&			elseif mode == \"folders\" then!@#&			    if fs.isDir( path .. file ) then!@#&				    table.insert( files, path .. file )!@#&				end!@#&			end!@#&		else!@#&            table.insert(files, path .. file)!@#&		end!@#&		!@#&    end!@#&	return files!@#&end",},},["ui"]="0000 00000000000000000000                   00000!@#&!@#&00000000000000!@#&!@#&00000!@#&0000             000000!@#&0000000000       00000000!@#&0                   00000000!@#&                     00000000!@#&                    00000000!@#&                 0000000!@#&                 000000!@#&!@#&!@#&!@#&                    00000 00000",["toy"]="--[[!@#& pastebin get tfyqv2ww toy!@#& std pb tfyqv2ww toy!@#&--]]!@#&!@#&local channel = 180!@#&local modem!@#&local scr_x, scr_y = term.getSize()!@#&local valchar = \"#\"      --character used for fading!@#&local hedchar = \"@\"      --character used for tip of line!@#&local s = {              --default color combinations!@#&	[1] = { --A classical black-and-white color fade, perfect for looking classy and pretentious.!@#&		colors.black,!@#&		colors.gray,!@#&		colors.lightGray,!@#&		colors.white,!@#&	},!@#&	[2] = { --If you're feeling blue, then this randomly selected set of four colors should make you feel even worse!!@#&		colors.black,!@#&		colors.blue,!@#&		colors.cyan,!@#&		colors.lightBlue,!@#&	},!@#&	[3] = { --This one's purple. Tha-that's it. Like purple? Good.!@#&		colors.black,!@#&		colors.red,!@#&		colors.magenta,!@#&		colors.pink,!@#&	},!@#&	[4] = { --I'll admit, the creativity is lacking in this color. I mean, what was I thinking?!@#&		colors.black,!@#&		colors.gray,!@#&		colors.green,!@#&		colors.lime,!@#&	},!@#&	[5] = { --NOBODY CALLS ME YELLOW!@#&		colors.black,!@#&		colors.brown,!@#&		colors.orange,!@#&		colors.yellow,!@#&	},!@#&}!@#&local p = math.random(1,#s)!@#&local g = function(num,sa) --This interprets the color palate and turns it into a fadey thing.!@#&	if not sa then sa = s[p] end!@#&	local values = {!@#&		[1] = {bg=sa[1], txt=sa[1], char=valchar},!@#&		[2] = {bg=sa[1], txt=sa[2], char=valchar},!@#&		[3] = {bg=sa[2], txt=sa[1], char=valchar},!@#&		[4] = {bg=sa[2], txt=sa[2], char=valchar},!@#&		[5] = {bg=sa[3], txt=sa[2], char=valchar},!@#&		[6] = {bg=sa[3], txt=sa[3], char=valchar},!@#&		[7] = {bg=sa[3], txt=sa[4], char=valchar},!@#&		[8] = {bg=sa[4], txt=sa[3], char=valchar},!@#&		[9] = {bg=sa[4], txt=sa[4], char=hedchar},!@#&	}!@#&	if not num then return #values end!@#&	return values[num]!@#&end!@#&local size = g()!@#&local grid = {}!@#&local ah = {}!@#&for b = 1, scr_x do!@#&	ah[b] = {v = 0, r = s[p]}!@#&end!@#&for b = 1, scr_y do!@#&	grid[b] = ah!@#&end!@#&!@#&local between = function(num,min,max)!@#&	return (num > min and num or min) < max and num or max!@#&end!@#&!@#&local getDotsInLine = function( startX, startY, endX, endY ) --graciously stolen from the paintutils, and PAIN!@#&    local out = {}!@#&    startX = math.floor(startX)!@#&    startY = math.floor(startY)!@#&    endX = math.floor(endX)!@#&    endY = math.floor(endY)!@#&    if startX == endX and startY == endY then!@#&        out = {{x=startX,y=startY}}!@#&        return out!@#&    end!@#&    local minX = math.min( startX, endX )!@#&    if minX == startX then!@#&        minY = startY!@#&        maxX = endX!@#&        maxY = endY!@#&    else!@#&        minY = endY!@#&        maxX = startX!@#&        maxY = startY!@#&    end!@#&    local xDiff = maxX - minX!@#&    local yDiff = maxY - minY!@#&    if xDiff > math.abs(yDiff) then!@#&        local y = minY!@#&        local dy = yDiff / xDiff!@#&        for x=minX,maxX do!@#&            table.insert(out,{x=x,y=math.floor(y+0.5)})!@#&            y = y + dy!@#&        end!@#&    else!@#&        local x = minX!@#&        local dx = xDiff / yDiff!@#&        if maxY >= minY then!@#&            for y=minY,maxY do!@#&                table.insert(out,{x=math.floor(x+0.5),y=y})!@#&                x = x + dx!@#&            end!@#&        else!@#&            for y=minY,maxY,-1 do!@#&                table.insert(out,{x=math.floor(x+0.5),y=y})!@#&                x = x - dx!@#&            end!@#&        end!@#&    end!@#&    return out!@#&end!@#&local getModemInput = function()!@#&	while true do!@#&		local _,side,freq,rfreq,msg,dist = os.pullEvent(\"modem_message\")!@#&		if freq == channel then!@#&			if type(msg) == \"table\" then!@#&				if type(msg.x) == \"number\" and type(msg.y) == \"number\" and type(msg.r) == \"table\" then!@#&					if (msg.x >= 1 and msg.x <= scr_x) and (msg.y >= 1 and msg.y <= scr_y) and (#msg.r == 4) then!@#&						grid[msg.y][msg.x] = {v = size, r = msg.r}!@#&					end!@#&				end!@#&			end!@#&		end!@#&	end!@#&end!@#&local render = function(grid)!@#&	local q!@#&	for y = 1, #grid do!@#&		for x = 1, #grid[y] do!@#&			q = grid[y][x]!@#&			if q then!@#&				term.setCursorPos(x,y)!@#&				term.setTextColor(g( between( q.v+1, 1, size ),  q.r ).txt )!@#&				term.setBackgroundColor(g( between(q.v+1,1,size), q.r ).bg )!@#&				term.write(g(between(q.v+1,1,size),q.r).char)!@#&			end!@#&		end!@#&	end!@#&end!@#&local downByOne = function(grid)!@#&	local output = {}!@#&	for y = 1, #grid do!@#&		output[y] = {}!@#&		for x = 1, #grid[y] do!@#&			output[y][x] = {}!@#&			if grid[y][x].v > 0 then!@#&				output[y][x].v = grid[y][x].v - 1!@#&			else!@#&				output[y][x].v = 0!@#&			end!@#&			output[y][x].r = grid[y][x].r!@#&		end!@#&	end!@#&	return output!@#&end!@#&local getInput = function()!@#&	local mx,my,oldx,oldy,dots!@#&	while true do!@#&		local evt = {os.pullEvent()}!@#&		modem = nil!@#&		if modem then rednet.open(modem) end!@#&		if evt[1] == \"key\" then!@#&			if evt[2] == keys.q then!@#&				sleep(0)!@#&				return!@#&			end!@#&		elseif evt[1] == \"mouse_click\" or evt[1] == \"mouse_drag\" then!@#&			oldx,oldy = mx or evt[3],my or evt[4]!@#&			mx,my = evt[3],evt[4]!@#&			dots = getDotsInLine(oldx,oldy,mx,my)!@#&			for a = 1, #dots do!@#&				grid[dots[a].y][dots[a].x] = {v = size, r = s[p]}!@#&				if modem then!@#&					modem.transmit(channel,channel,{x=dots[a].x, y=dots[a].y, r=s[p]})!@#&				end!@#&			end!@#&		elseif evt[1] == \"mouse_up\" then!@#&			mx,my = nil,nil!@#&		end!@#&	end!@#&end!@#&local dothRendering = function()!@#&	local t = false --term.current().setVisible!@#&	while true do!@#&		if t then t(false) end!@#&		render(grid)!@#&		if t then t(true) end!@#&		grid = downByOne(grid)!@#&		sleep(0)!@#&	end!@#&end!@#&!@#&local funclist = {!@#&	getInput,!@#&	dothRendering,!@#&	getModemInput,!@#&}!@#&!@#&parallel.waitForAny(unpack(funclist))",["blockbreaker"]="lifes = 3!@#&ready = true!@#&paddleLength = 8!@#&paddlePos = 25!@#&ballX = 29!@#&ballY = 16!@#&score = 0!@#&choice = \"Basic\"!@#&fs.makeDir(\"/SpeedOS/Applications/GameBox/BOmaps\")!@#&colorTable = {colors.red,colors.blue,colors.green,colors.orange,colors.purple,colors.lime,colors.yellow}!@#&blocks = {}!@#&!@#&function addSpaces(number)!@#&	temp = tostring(number)!@#&	for place=1,3-string.len(temp),1 do!@#&		temp = temp..\" \"!@#&	end!@#&	return temp!@#&end!@#&!@#&function getMaps()!@#&	local count = 1!@#&	local numblocks = 0!@#&	if(fs.exists(\"BOmaps/\"..choice))then!@#&		open = fs.open(\"BOmaps/\"..choice , \"r\")!@#&		for derp=1,5,1 do!@#&			map = open.readLine()!@#&			for letter in string.gmatch(map,\"%a\") do!@#&				blocks[count] = {}!@#&				blocks[count][1] = letter!@#&				blocks[count][2] = (((count-1)%13)*4+1)..\"-\"..derp+1!@#&				blocks[count][3] = colorTable[math.random(1,7)]!@#&				count = count+1!@#&				if(letter==\"Y\")then!@#&					numblocks = numblocks+1!@#&				end!@#&			end!@#&		end!@#&		open.close()!@#&	else!@#&		for y=1,5,1 do!@#&			for x=0,12,1 do!@#&				blocks[count] = {}!@#&				blocks[count][1] = \"Y\"!@#&				blocks[count][2] = (4*x+1)..\"-\"..y+1!@#&				blocks[count][3] = colorTable[math.random(1,7)]!@#&				count = count+1!@#&				numblocks = numblocks+1!@#&			end!@#&		end!@#&	end!@#&	return numblocks!@#&end!@#&!@#&function pickMapGUI(choice)!@#&	clear()!@#&	local maps = {}!@#&	term.setBackgroundColor(colors.blue)!@#&	term.setCursorPos(45,19)!@#&	write(\"Confrim\")!@#&	term.setBackgroundColor(colors.black)!@#&	term.setCursorPos(25,1)!@#&	print(\"Maps\")!@#&	term.setCursorPos(49,1)!@#&	term.setBackgroundColor(colors.red)!@#&	write(\" X \")!@#&	term.setBackgroundColor(colors.black)!@#&	for place=1,52,1 do!@#&		write(\"-\")!@#&	end!@#&	local count = 1!@#&	term.setCursorPos(1,3)!@#&	local filename = fs.list(\"BOmaps\") !@#&	for _,file in ipairs( filename ) do !@#&		if(choice==file)then!@#&			term.setBackgroundColor(colors.blue)!@#&		else	!@#&			term.setBackgroundColor(colors.black)!@#&		end!@#&		print(addSpaces(count)..\": \"..file)!@#&		maps[count] = file!@#&		count = count+1!@#&	end!@#&	if(choice==\"Baisc\")then!@#&		term.setBackgroundColor(colors.blue)!@#&	else	!@#&		term.setBackgroundColor(colors.black)!@#&	end!@#&	print(addSpaces(count)..\": Basic\")!@#&	return maps!@#&end!@#&!@#&function pickMap()!@#&	while true do!@#&		local maps = pickMapGUI(choice)!@#&		local Event, key, pram1, pram2 = os.pullEvent(\"mouse_click\")!@#&		if(pram2-2<=table.getn(maps) and pram2~=1)then!@#&			choice = maps[pram2-2]!@#&		elseif(pram2-2==table.getn(maps)+1)then!@#&			choice = \"Baisc\"!@#&		elseif(pram2==1)then!@#&			if(pram1>=49)then!@#&				choice = \"Baisc\"!@#&				break!@#&			end!@#&		elseif(pram2==19)then!@#&			if(pram1>=45)then!@#&				break!@#&			end!@#&		end!@#&	end!@#&end!@#&!@#&function drawBlocks()!@#&	xpos=0!@#&	ypos=0!@#&	for place=1,table.getn(blocks),1 do!@#&		if(blocks[place][1] == \"Y\")then!@#&			for herp,derp in blocks[place][2]:gmatch(\"([^%s]+)-(.*)\") do!@#&				xpos = tonumber(herp)!@#&				ypos = tonumber(derp)!@#&			end!@#&			term.setBackgroundColor(blocks[place][3])!@#&			term.setCursorPos(xpos,ypos)!@#&			write(\"    \")!@#&		end!@#&	end!@#&end!@#&!@#&function clear()!@#&	term.setTextColor(colors.white)!@#&	term.setBackgroundColor(colors.black)!@#&	term.clear()!@#&	term.setCursorPos(1,1)!@#&end!@#&!@#&function drawPaddle()!@#&	local x,y = term.getSize()!@#&	term.setBackgroundColor(colors.white)!@#&	term.setCursorPos(paddlePos,y-1)!@#&	for place=1,paddleLength,1 do!@#&		write(\" \")!@#&	end!@#&end!@#&!@#&function drawBall()!@#&	term.setCursorPos(ballX,ballY)!@#&	term.setBackgroundColor(colors.white)!@#&	write(\" \")!@#&end!@#&!@#&function touchingBlock()!@#&	xpos = math.ceil(ballX/4)!@#&	return blocks[(ballY-2)*13+xpos][1]==\"Y\"!@#&end!@#&!@#&function moveBall()!@#&	local x,y = term.getSize()!@#&	ballX = ballX+xvel!@#&	ballY = ballY+yvel!@#&	if(ballX<=1)then!@#&		xvel = xvel*-1!@#&	end!@#&	if(ballX>=x)then!@#&		xvel = xvel*-1!@#&	end!@#&	if(ballY<=1)then!@#&		yvel = yvel*-1!@#&	end!@#&	if(ballY>=y)then!@#&		return false!@#&	end!@#&	if(ballY==y-2)then!@#&		if(ballX>=paddlePos and ballX<=paddlePos+paddleLength-1)then!@#&			if(ballX-paddlePos==0 or ballX-paddlePos==7)then!@#&				if(ballX-paddlePos==7)then!@#&					xvel = xvel+1!@#&				else!@#&					xvel = xvel-1!@#&				end!@#&			elseif(ballX-paddlePos==1 or ballX-paddlePos==2 or  ballX-paddlePos==6 or ballX-paddlePos==5)then!@#&				if(ballX-paddlePos==6 or ballX-paddlePos==5)then!@#&					xvel = xvel+.5!@#&				else!@#&					xvel = xvel-.5!@#&				end!@#&			end!@#&			yvel = yvel*-1!@#&		end!@#&	end!@#&	if(ballY<=6 and ballY>=2)then!@#&		if(touchingBlock())then!@#&			blocks[(ballY-2)*13+math.ceil(ballX/4)][1]=\"N\"!@#&			yvel = yvel*-1!@#&			score = score+10!@#&		elseif(ballX%4==1 or ballX%4==0)then!@#&			if(ballX%4==1)then!@#&				if(ballX~=1)then!@#&					if(blocks[(ballY-2)*13+math.ceil((ballX-1)/4)][1]==\"Y\")then!@#&						blocks[(ballY-2)*13+math.ceil((ballX-1)/4)][1]=\"N\"!@#&						xvel = xvel*-1!@#&						score = score+10!@#&					end!@#&				end!@#&			elseif(ballX%4==0)then!@#&				if(ballX~=x)then!@#&					if(blocks[(ballY-2)*13+math.ceil((ballX+1)/4)][1]==\"Y\")then!@#&						blocks[(ballY-2)*13+math.ceil((ballX+1)/4)][1]=\"N\"!@#&						xvel = xvel*-1!@#&						score = score+10!@#&					end!@#&				end!@#&			end!@#&		end!@#&	end!@#&	drawBall()!@#&	return true!@#&end!@#&!@#&function refresh()!@#&	clear()!@#&	drawPaddle()!@#&	drawBall()!@#&	drawBlocks()!@#&	term.setBackgroundColor(colors.black)!@#&	term.setCursorPos(44,19)!@#&	write(\"Lifes: \"..lifes)!@#&	term.setCursorPos(1,19)!@#&	write(\"Score \"..score)!@#&end!@#&!@#&!@#&!@#&function game()!@#&	while true do!@#&		local x,y = term.getSize()!@#&		refresh()!@#&		local Event, key, pram1, pram2 = os.pullEvent()!@#&		if(Event==\"key\")then!@#&			if(key==203)then!@#&				paddlePos = paddlePos-1!@#&			elseif(key==205)then!@#&				paddlePos = paddlePos+1!@#&			end!@#&			if(paddlePos<=1)then!@#&				paddlePos = 1!@#&			elseif(paddlePos+paddleLength>x)then!@#&				paddlePos = x-(paddleLength-1)!@#&			end!@#&			if(ready)then!@#&				ballX = paddlePos+(paddleLength/2)!@#&			end!@#&			if(key==57 and ready)then!@#&				timer = os.startTimer(.1)!@#&				ready = false!@#&			end!@#&		elseif(Event==\"mouse_scroll\" or Event==\"mouse_click\")then!@#&			paddlePos = paddlePos+key!@#&			if(paddlePos<=1)then!@#&				paddlePos = 1!@#&			elseif(paddlePos+paddleLength>x)then!@#&				paddlePos = x-(paddleLength-1)!@#&			end!@#&			if(ready)then!@#&				ballX = paddlePos+(paddleLength/2)!@#&			end!@#&			if(Event==\"mouse_click\" and ready)then!@#&				timer = os.startTimer(.1)!@#&				ready = false!@#&			end!@#&		elseif(Event==\"timer\" and key==timer)then!@#&			if (moveBall())then!@#&			else!@#&				break!@#&			end!@#&			if(score==total)then!@#&				break!@#&			end!@#&			refresh()!@#&			timer = os.startTimer(.1)!@#&			ready = false!@#&		end!@#&	end!@#&end!@#&!@#&function start()!@#&	lifes = 3!@#&	ready = true!@#&	paddleLength = 8!@#&	paddlePos = 25!@#&	ballX = 29!@#&	ballY = 16!@#&	score = 0!@#&	clear()!@#&	print(\"Hit space to thorw\")!@#&	print(\"Map: \"..choice)!@#&	sleep(2)!@#&	total = getMaps()*10!@#&	while lifes>0 and score~=total do!@#&		ready = true!@#&		yvel = -1!@#&		ballX = paddlePos+(paddleLength/2)!@#&		xvel = 0!@#&		ballY = 16!@#&		timer = os.startTimer(3)!@#&		game()!@#&		lifes = lifes-1!@#&	end!@#&	clear()!@#&	if(score==total)then!@#&		print(\"You Won\")!@#&	else!@#&		print(\"You Lost\")!@#&	end!@#&	print(\"Score: \"..score..\"/\"..total)!@#&	sleep(2)!@#&	clear()!@#&end!@#&!@#&function menu()!@#&	local x,y = term.getSize()!@#&	clear()!@#&	write(\"Break Out\")!@#&	term.setCursorPos(x/2-2,y/2-2)!@#&	term.setBackgroundColor(colors.blue)!@#&	write(\"       \")!@#&	term.setCursorPos(x/2-2,y/2-1)!@#&	write(\" Start \")!@#&	term.setCursorPos(x/2-2,y/2)!@#&	write(\"       \")!@#&	term.setCursorPos(x/2-2,y/2+2)!@#&	term.setBackgroundColor(colors.blue)!@#&	write(\"       \")!@#&	term.setCursorPos(x/2-2,y/2+3)!@#&	write(\" Maps  \")!@#&	term.setCursorPos(x/2-2,y/2+4)!@#&	write(\"       \")!@#&	term.setCursorPos(x/2-2,y/2+6)!@#&	term.setBackgroundColor(colors.blue)!@#&	write(\"       \")!@#&	term.setCursorPos(x/2-2,y/2+7)!@#&	write(\" Help  \")!@#&	term.setCursorPos(x/2-2,y/2+8)!@#&	write(\"       \")!@#&	term.setCursorPos(49,1)!@#&	term.setBackgroundColor(colors.red)!@#&	write(\" X \")!@#&end!@#&!@#&function menuInteraction()!@#&	local x,y = term.getSize()!@#&	while true do!@#&		menu()!@#&		local Event, key, pram1, pram2 = os.pullEvent(\"mouse_click\")!@#&		if(pram2==1)then!@#&			break!@#&		elseif(pram2>=y/2-3 and pram2<=y/2)then!@#&			if(pram1>=x/2-2 and pram1<=x/2+4)then!@#&				start()!@#&			end!@#&		elseif(pram2>=y/2+1 and pram2<=y/2+4)then!@#&			if(pram1>=x/2-2 and pram1<=x/2+4)then!@#&				pickMap()!@#&			end!@#&		elseif(pram2>=y/2+6 and pram2<=y/2+8)then!@#&			if(pram1>=x/2-2 and pram1<=x/2+4)then!@#&				help()!@#&			end!@#&		end!@#&	end!@#&end!@#&!@#&menuInteraction()",["8-Ball.lua"]="--[[!@#&**************!@#&     8-Ball!@#& Recreated in CC!@#&**************!@#&!@#&By: houseofkraft!@#&]]--!@#&!@#&-- Disables Native Terminating!@#&os.pullEvent = os.pullEventRaw!@#&!@#&local responses = {!@#&  \"Yes\",!@#&  \"No\",!@#&  \"Doubt it\",!@#&  \"Certainly\",!@#&  \"Without a doubt\",!@#&  \"Ask me again\",!@#&  \"I don't understand you\",!@#&  \"RIP\",!@#&  \"Uhhhh...\",!@#&  \"Okay then...\",!@#&  \"Yeah sure\",!@#&  \"Get me out of here!!!\"!@#&}!@#&!@#&local function writeColored( sColor, sText, newLine )!@#&  if newLine == nil then!@#&    newLine = true!@#&  end!@#&  !@#&  local oc = colors.white!@#&  !@#&  if term.isColor and term.isColor() then!@#&    term.setTextColor(sColor)!@#&  else!@#&    term.setTextColor(colors.white)!@#&  end!@#&    !@#&  write(sText)!@#&    !@#&  if newLine then!@#&    print()!@#&  end  !@#&  term.setTextColor(oc)!@#&end!@#&!@#&term.clear()!@#&term.setCursorPos(1,1)!@#&!@#&writeColored(colors.yellow, \"The famous game of 8-Ball... now in CC!\", true)!@#&writeColored(colors.yellow, \"Type in a question and have it answered!\", true)!@#&print()!@#&!@#&local function init()!@#&  while true do!@#&    writeColored(colors.yellow, \"8ball> \", false)!@#&    local sText = read()!@#&    textutils.slowPrint(responses[math.random(1, #responses)])!@#&  end!@#&end!@#&!@#&local function onTerminate()!@#&  while true do!@#&    local event = os.pullEventRaw()!@#&    if event == \"terminate\" then!@#&      -- Draw the custom screen!@#&      term.clear()!@#&      term.setCursorPos(1,1)!@#&      writeColored(colors.blue, \"I hope you enjoyed the game!\")!@#&      writeColored(colors.blue, \"Make sure to check 'houseofkraft' on the CC forums!\")!@#&      break!@#&    end!@#&  end!@#&end!@#&!@#&parallel.waitForAny(onTerminate, init)",["cardreader"]="while true do!@#&  print(\"Enter key card\")!@#&  Event,pram1,pram,pram3 = os.pullEvent(\"disk\")!@#&    path = disk.getMountPath(\"right\")..\"/password\"!@#&    file = fs.exists(path) and io.open(path, \"r\") or nil!@#&    disk.eject(\"right\") !@#&    if(file and file:read()==\"test\")then!@#&      print(\"correct\")!@#&    else!@#&      print(\"incorrect\")!@#&    end!@#&    sleep(2)!@#&    shell.run(\"clear\")!@#&end",["pShip1.img"]="555555    55!@#&dddd555555d!@#&    d      5!@#&    5      d!@#&55555ddddd5!@#&ddddd     dd",["ccsand.log"]="",["rave"]="color = {colors.white,colors.red,colors.lightBlue,colors.blue,colors.yellow,colors.lime,colors.purple,colors.pink,colors.orange}!@#&x,y = term.getSize()!@#&x = math.ceil(x/6)!@#&y = math.ceil(y/6)!@#&while true do!@#&  for yval=0,(y-1),1 do!@#&    for xval=0,(x-1),1 do!@#&      term.setBackgroundColor(color[math.random(table.getn(color))])!@#&      for place= 1,y,1 do!@#&        term.setCursorPos(xval*(x),yval*(y)+(place-1))!@#&        for derp=1,x,1 do!@#&          write(\" \")!@#&        end!@#&      end!@#&    end!@#&  end !@#&  sleep(.1)!@#&end",["eShip3_broken.img"]="                 eeeeeee!@#&                e1111111f!@#&              eeffe1e11ff!@#&              fffffffef!@#&              ff11fffff!@#&              e11e111f1ff!@#&                1eeeee1ef!@#&                 1111111",["surveyor"]="layers = {}!@#&xend = 5!@#&yend = 1!@#&zend = 60!@#&function turn(number)!@#&	if(number%2==0)then!@#&		turtle.turnRight()!@#&	else!@#&		turtle.turnLeft()!@#&	end!@#&end!@#&!@#&function turneven(number)!@#&	if(number%2==0)then!@#&		turtle.turnLeft()!@#&	else!@#&		turtle.turnRight()!@#&	end!@#&end!@#&!@#&function turnodd(number)!@#&	if(number%2==0)then!@#&		turtle.turnRight()!@#&	else!@#&		turtle.turnLeft()!@#&	end!@#&end!@#&!@#&function move()!@#&	local running = true!@#&	while running do!@#&		turtle.dig()!@#&		try = turtle.forward()!@#&		if(try==true)then!@#&			running = false!@#&		end!@#&		sleep(.1)!@#&	end!@#&end!@#&function checkinventory()!@#&	for box=1,16,1 do!@#&		if(turtle.getItemCount(box)==0)then!@#&			return false!@#&		end!@#&	end!@#&	return true!@#&end!@#&!@#&function unload(depth)!@#&	for derp=1,depth,1 do!@#&		turtle.up()!@#&	end!@#&	print(\"INVENTORY FULL\")!@#&	print(\"Please unload but leave at least one of each block\")!@#&	print(\": Hit enter to Continue\")!@#&	while true do!@#&		Event,key = os.pullEvent(\"key\")!@#&		if(key==keys.enter)then!@#&			for derp=1,depth,1 do!@#&				turtle.down()!@#&			end!@#&			return!@#&		end!@#&	end!@#&end!@#&!@#&term.clear()!@#&term.setCursorPos(1,1)!@#&!@#&function printInterface(current)!@#&	term.clear()!@#&	term.setCursorPos(1,1)!@#&	print(\"Mining...\")!@#&	print(\"fuel level: \"..turtle.getFuelLevel())!@#&	print(\"Level \"..depth..\"/\"..zend)!@#&	for y=1,5,1 do!@#&		for x=1,5,1 do!@#&			if(layers[current[x+5*(y-1)]]==\"stone\")then!@#&				term.setBackgroundColor(colors.gray)!@#&			elseif(layers[current[x+5*(y-1)]]==\"coal\")then!@#&				term.setBackgroundColor(colors.black)!@#&			elseif(layers[current[x+5*(y-1)]]==\"iron\")then!@#&				term.setBackgroundColor(colors.orange)!@#&			elseif(layers[current[x+5*(y-1)]]==\"gold\")then!@#&				term.setBackgroundColor(colors.gold)!@#&			elseif(layers[current[x+5*(y-1)]]==\"redStone\")then!@#&				term.setBackgroundColor(colors.red)!@#&			elseif(layers[current[x+5*(y-1)]]==\"lapis\")then!@#&				term.setBackgroundColor(colors.blue)!@#&			elseif(layers[current[x+5*(y-1)]]==\"diamond\")then!@#&				term.setBackgroundColor(colors.lightBlue)!@#&			elseif(layers[current[x+5*(y-1)]]==\"dirt\")then!@#&				term.setBackgroundColor(colors.brown)!@#&			elseif(layers[current[x+5*(y-1)]]==\"sand\")then!@#&				term.setBackgroundColor(colors.yellow)!@#&			elseif(layers[current[x+5*(y-1)]]==\"gravel\")then!@#&				term.setBackgroundColor(colors.lightGray)!@#&			elseif(layers[current[x+5*(y-1)]]==\"grass\")then!@#&				term.setBackgroundColor(colors.green)!@#&			elseif(layers[current[x+5*(y-1)]]==\"emerald\")then!@#&				term.setBackgroundColor(colors.lime)!@#&			else!@#&				term.setBackgroundColor(colors.white)!@#&			end!@#&			write(\" \")!@#&		end!@#&		print()!@#&	end!@#&end!@#&!@#&layers[1]={\"stone\",\"stone\",\"stone\",\"stone\",\"stone\",\"stone\",\"stone\",\"stone\",\"stone\",\"stone\",\"stone\",\"stone\",\"stone\",!@#&\"stone\",\"stone\",\"stone\",\"stone\",\"stone\",\"stone\",\"stone\",\"stone\",\"stone\",\"stone\",\"stone\",\"stone\",\"stone\"}!@#&!@#&for depth=1,zend,1 do!@#&	currenty = 1!@#&	turtle.digDown()!@#&	turtle.down()!@#&	layers[depth]={}!@#&	printInterface(depth)!@#&	for rows=1,yend,1 do!@#&		currentx=1!@#&		for columns=1,xend-1,1 do!@#&			move()!@#&			full = checkinventory()!@#&			if(full==true)then!@#&				unload(depth)!@#&			end!@#&		end!@#&		if(rows<yend)then!@#&			if(depth%2==0)then!@#&				if(yend%2==0)then!@#&					turneven(rows)!@#&				else!@#&					turnodd(rows)!@#&				end!@#&			else!@#&				turn(rows)!@#&			end!@#&			move()!@#&			if(depth%2==0)then!@#&				if(yend%2==0)then!@#&					turneven(rows)!@#&				else!@#&					turnodd(rows)!@#&				end!@#&			else!@#&				turn(rows)!@#&			end!@#&		end!@#&	end!@#&	turn(2)!@#&	turn(2)!@#&	!@#&end!@#&print(\"Done\")!@#&if(zend%2==0)then!@#&	for depth=1,zend,1 do!@#&		turtle.up()!@#&	end!@#&else!@#&	if(yend%2==0)then!@#&		turtle.turnRight()!@#&		for length=1,yend-1,1 do!@#&			move()!@#&		end!@#&		turtle.turnLeft()!@#&		for depth=1,zend,1 do!@#&			turtle.up()!@#&		end!@#&	else!@#&		for derp=1,xend-1,1 do!@#&			move()!@#&		end!@#&		turtle.turnLeft()!@#&		for derp=1,yend-1,1 do!@#&			move()!@#&		end!@#&		turtle.turnLeft()!@#&		for depth=1,zend,1 do!@#&			turtle.up()!@#&		end!@#&	end!@#&end!@#&!@#&printInterface(1)",["eShip6.img"]="                 777b77!@#&               bbb   7!@#&              777b   7!@#&             7   bbbbbb!@#&             7   b77777!@#&              bbbb   7!@#&               777   7!@#&                 777b77",[".lightsdata"]="",["newsms"]="--ESSENTIALS!@#&main = 0 !@#&version = 1.0!@#&!@#&function clear()!@#&	term.clear()!@#&	term.setCursorPos(1,1)!@#&end!@#&!@#&function getEvent(specifications)!@#&	while true do!@#&		local Event,pram1,pram2,pram3 = os.pullEvent()!@#&		if(Event==\"timer\" and pram1==timer)then!@#&			timer = os.startTimer(3)!@#&		end!@#&		if(Event==specifications or specifications==null)then!@#&			return Event,pram1,pram2,pram3!@#&		end!@#&	end!@#&end!@#&!@#&function setBackground(color,x,y)!@#&	term.setCursorPos(1,1)!@#&	term.setBackgroundColor(color)!@#&	for rows = 1,y,1 do!@#&		for columns = 1,x,1 do!@#&			term.write(\" \")!@#&		end!@#&		print()!@#&	end!@#&end!@#&!@#&function openPort()!@#&	for n,m in ipairs(rs.getSides()) do !@#&		if peripheral.isPresent(m) and peripheral.getType(m)==\"modem\" then !@#&			rednet.open(m)!@#&			return true!@#&		end !@#&	end!@#&	return false!@#&end!@#&!@#&--LOGIN	!@#&!@#&function getText(xplace,yplace,mask)!@#&	local x,y = term.getSize()!@#&	local input = \"\"!@#&	term.setCursorPos(xplace-3,yplace)  !@#&	print(\"|                         |\")!@#&	term.setCursorPos(xplace+1,yplace)!@#&	term.setCursorBlink(true)!@#&	while true do!@#&		local derp,herp = term.getCursorPos()!@#&		term.setCursorPos(derp-1,herp)!@#&		local event, p,pram2,pram2 = getEvent()!@#&		if event == \"char\" then!@#&			if(string.len(input)==21)then!@#&			else!@#&				input = input..p!@#&			end!@#&		elseif event == \"key\" then!@#&			if p == keys.enter then!@#&				term.setCursorBlink(false)!@#&				return input!@#&			elseif p == keys.backspace then!@#&				input = input:sub(1, #input - 1)!@#&			end!@#&		end!@#&		term.setCursorPos(xplace,yplace)!@#&		write( ( mask and string.rep(mask, #input) or input )..\" \")!@#&	end!@#&	error( \"should never get here\" )!@#&end!@#&!@#&function printLogin()!@#&	local done = false!@#&	local x,y = term.getSize()!@#&	clear()!@#&	setBackground(colors.lightBlue,x,y)!@#&	term.setTextColor(colors.white)!@#&	term.setCursorPos(x/2-4,y/2-3)!@#&	print(\"MineChat\")!@#&	term.setCursorPos(x/2-13,y/2+1)!@#&	print(\" -------------------------\")!@#&	term.setCursorPos(x/2-13,y/2+2)!@#&	print(\"|                         |\")!@#&	term.setCursorPos(x/2-(string.len(username)/2),y/2+2)!@#&	print(username)!@#&	term.setCursorPos(x/2-13,y/2+3)!@#&	print(\" -------------------------\")!@#&	term.setCursorPos(x/2-13,y/2+4)!@#&	print(\" -------------------------\")!@#&	term.setCursorPos(x/2-13,y/2+5)!@#&	print(\"|                         |\")!@#&	term.setCursorPos(x/2-(string.len(password)/2),y/2+5)!@#&	if(password==\"password\")then!@#&		print(password)!@#&	else!@#&		print(string.rep(\"*\",string.len(password)))!@#&	end!@#&	term.setCursorPos(x/2-13,y/2+6)!@#&	print(\" -------------------------\")!@#&	term.setCursorPos(x/2-3,y/2+7)!@#&	term.setBackgroundColor(colors.blue)!@#&	print(\" Login \")!@#&	term.setBackgroundColor(colors.lightBlue)!@#&	term.setTextColor(colors.white)!@#&	term.setCursorPos(x/2-8,y/2+8)!@#&	print(\"Create an account\")!@#&	term.setCursorPos(x-2,1)!@#&	term.setBackgroundColor(colors.red)!@#&	term.setTextColor(colors.white)!@#&	write(\" x \")!@#&	term.setBackgroundColor(colors.lightBlue)!@#&	term.setTextColor(colors.white)!@#&end!@#&!@#&function newUser(newusername,newpassword,confirmpass)!@#&	local x,y = term.getSize()!@#&	clear()!@#&	setBackground(colors.lightBlue,x,y)!@#&	term.setTextColor(colors.white)!@#&	term.setCursorPos(x/2-4,y/2-3)!@#&	print(\"MineChat\")!@#&	term.setCursorPos(x/2-5,y/2-1)!@#&	print(\"New Account\")!@#&	term.setCursorPos(1,1)!@#&	term.setBackgroundColor(colors.blue)!@#&	print(\"Back\")!@#&	term.setBackgroundColor(colors.lightBlue)!@#&	term.setCursorPos(x/2-13,y/2)!@#&	print(\" -------------------------\")!@#&	term.setCursorPos(x/2-13,y/2+1)!@#&	print(\"|                         |\")!@#&	term.setCursorPos(x/2-(string.len(newusername)/2),y/2+1)!@#&	print(newusername)!@#&	term.setCursorPos(x/2-13,y/2+2)!@#&	print(\" -------------------------\")!@#&	term.setCursorPos(x/2-13,y/2+3)!@#&	print(\" -------------------------\")!@#&	term.setCursorPos(x/2-13,y/2+4)!@#&	print(\"|                         |\")!@#&	term.setCursorPos(x/2-(string.len(newpassword)/2),y/2+4)!@#&	if(newpassword==\"password\")then!@#&		print(newpassword)!@#&	else!@#&		print(string.rep(\"*\",string.len(newpassword)))!@#&	end!@#&	term.setCursorPos(x/2-13,y/2+5)!@#&	print(\" -------------------------\")!@#&	term.setCursorPos(x/2-13,y/2+5+1)!@#&	print(\" -------------------------\")!@#&	term.setCursorPos(x/2-13,y/2+6+1)!@#&	print(\"|                         |\")!@#&	term.setCursorPos(x/2-(string.len(confirmpass)/2),y/2+6+1)!@#&	if(confirmpass==\"confirm password\")then!@#&		print(confirmpass)!@#&	else!@#&		print(string.rep(\"*\",string.len(confirmpass)))!@#&	end!@#&	term.setCursorPos(x/2-13,y/2+7+1)!@#&	print(\" -------------------------\")!@#&	term.setCursorPos(x/2-2,y-1)!@#&	term.setBackgroundColor(colors.blue)!@#&	print(\"Create\")!@#&	term.setBackgroundColor(colors.lightBlue)!@#&end!@#&!@#&function newUserInterface()!@#&	local newusername=\"username\"!@#&	local newpassword=\"password\"!@#&	local confirmpass=\"confirm password\"!@#&	local x,y = term.getSize()!@#&	local running = true!@#&	while running do!@#&		newUser(newusername,newpassword,confirmpass)!@#&		local Event, key, xclick, yclick = getEvent(\"mouse_click\")!@#&		if(yclick==10)then!@#&			if(xclick>=12 and xclick<=38)then --USERNAME BOX	!@#&				term.setTextColor(colors.white)!@#&				newusername = getText(x/2-10,y/2+1)!@#&			end!@#&		elseif(yclick==13)then!@#&			if(xclick>=12 and xclick<=38)then --PASSWORD BOX!@#&				term.setTextColor(colors.white)!@#&				newpassword = getText(x/2-10,y/2+4,\"*\")!@#&			end!@#&		elseif(yclick==16)then!@#&			if(xclick>=12 and xclick<=38)then --CONFIRM PASSWORD BOX!@#&				term.setTextColor(colors.white)!@#&				confirmpass = getText(x/2-10,y/2+7,\"*\")!@#&			end!@#&		elseif(yclick==1)then	--BACK BUTTON!@#&			if(xclick<5)then!@#&				running = false!@#&			end!@#&		elseif(yclick==y-1)then!@#&			if(xclick>=x/2-2 and xclick<=x/2+2)then	--DONE BUTTON!@#&				if(newusername~=\"username\" and newpassword~=\"password\" and confirmpass~=\"confirm password\" and newusername~=\"\" and newpassword~=\"\" and confirmpass~=\"\")then!@#&					if(newpassword==confirmpass)then!@#&						rednet.send(main,newusername..\"-newaccount-\"..newpassword)!@#&						local id,msg = rednet.receive(1)!@#&						if(msg==\"success\")then!@#&							term.setCursorPos(x/2-8,y-1)!@#&							print(\"Account Added\")!@#&							sleep(2)!@#&							return!@#&						else!@#&							term.setCursorPos(x/2-12,y-1)!@#&							term.setTextColor(colors.red)!@#&							write(\"Username already exists\")!@#&							sleep(2)!@#&						end!@#&					else!@#&						term.setCursorPos(x/2-10,y-1)!@#&						term.setTextColor(colors.red)!@#&						write(\"Passwords dont match\")!@#&						sleep(2)!@#&						term.setTextColor(colors.white)!@#&					end!@#&				else!@#&					term.setCursorPos(x/2-18,y-1)!@#&					term.setTextColor(colors.red)!@#&					write(\"Fill out all fields before continuing\")!@#&					sleep(2)!@#&					term.setTextColor(colors.white)!@#&				end!@#&			end!@#&		end!@#&	end!@#&end!@#&!@#&function loginInterface()!@#&	openPort()!@#&	local x,y = term.getSize()!@#&	local running = true!@#&	while running do!@#&		printLogin(uername,password)!@#&		local Event, key, xclick, yclick = getEvent(\"mouse_click\")!@#&		if(yclick>=10 and yclick<=12)then!@#&			if(xclick>=12 and xclick<=38)then --USERNAME BOX	!@#&				term.setTextColor(colors.white)!@#&				!@#&				username = getText(x/2-10,y/2+2)!@#&			end!@#&		elseif(yclick>=13 and yclick<=15)then!@#&			if(xclick>=12 and xclick<=38)then --PASSWORD BOX!@#&				term.setTextColor(colors.white)!@#&!@#&				password = getText(x/2-10,y/2+5,\"*\")!@#&			end!@#&		elseif(yclick==17)then !@#&			if(xclick>=x/2-9 and xclick<=x/2+8) then	--NEW USER BOX!@#&				newUserInterface()!@#&			end!@#&		elseif(yclick==16)then!@#&			if(xclick>=22 and xclick<=28)then	--LOGIN BUTTON!@#&				local done = false!@#&				local trys = 0!@#&				while done==false do!@#&					if(username~=\"\" and password~=\"\")then!@#&						rednet.send(main,username..\"-login-\"..password)!@#&						local id, msg = rednet.receive(1)!@#&						if(msg~=nill)then!@#&							done = true!@#&							if(msg==\"success\")then!@#&								done = true!@#&								running = false!@#&							elseif(msg==\"incorrect\")then!@#&								term.setCursorPos(x/2-15,y)!@#&								term.setTextColor(colors.red)!@#&								term.clearLine()!@#&								write(\"Incorrect username or password\")!@#&								sleep(2)!@#&								done = true!@#&							else!@#&								term.setCursorPos(x/2-12,y)!@#&								term.setTextColor(colors.red)!@#&								term.clearLine()!@#&								write(\"User is already logged in\")!@#&								sleep(2)!@#&								done = true!@#&							end!@#&						end!@#&						if(trys>=3)then!@#&							term.setCursorPos(x/2-13,y)!@#&							term.setTextColor(colors.red)!@#&							term.clearLine()!@#&							write(\"Unable to connect to server\")!@#&							sleep(2)!@#&							done = true!@#&						end!@#&						trys = trys+1!@#&					else!@#&						term.setCursorPos(x/2-18,y)!@#&						term.setTextColor(colors.red)!@#&						term.clearLine()!@#&						write(\"Fill out all feilds before continuing\")!@#&						sleep(2)!@#&						term.setTextColor(colors.white)!@#&						done = true!@#&					end!@#&					if(done==false)then!@#&						term.setTextColor(colors.gray)!@#&						term.setCursorPos(x/2-5,y)!@#&						write(\"Logging in\")!@#&						for derp=1,4,1 do!@#&							sleep(.2)!@#&							write(\".\")!@#&						end!@#&						term.clearLine()!@#&					end!@#&				end!@#&			end!@#&		elseif(yclick==1)then!@#&			if(xclick>=x-2)then	--'X' BUTTON!@#&				close = true!@#&				return!@#&			end!@#&		end!@#&	end!@#&end!@#&!@#&--	[[CLIENT]]!@#&!@#&function getchattext(xplace,yplace)!@#&	local running = true!@#&	local lines = {}!@#&	local x,y = term.getSize()!@#&	lines[0] = \"\"!@#&	lines[1] = \"\"!@#&	lines[2] = \"\"!@#&	lines[3] = \"\"!@#&	ycurs = yplace!@#&	term.setTextColor(colors.black)!@#&	term.setBackgroundColor(colors.white)!@#&	local count = 0!@#&	term.setCursorBlink(true)!@#&	term.setCursorPos(xplace,ycurs+count)!@#&	write(\"                            \")!@#&	term.setCursorPos(xplace,ycurs+count)!@#&	while running do!@#&		local event, p,pram1,pram2 = getEvent()!@#&		if event == \"char\" then!@#&			if(string.len(lines[count])==x-15)then!@#&				if(count<3)then!@#&					count = count+1!@#&					lines[count]=\"\"!@#&					local words = {}!@#&					local newcount = 0!@#&					newstring = lines[count-1]!@#&					term.setCursorPos(1,1)!@#&					for token in string.gmatch(newstring, \"[^%s]+\") do!@#&					   words[newcount]=token!@#&					   newcount = newcount+1!@#&					end!@#&					lines[count-1] = string.sub(lines[count-1],1,36-string.len(words[table.getn(words)]))!@#&					lines[count] = lines[count]..words[table.getn(words)]..p!@#&				end!@#&			else!@#&				lines[count] = lines[count]..p!@#&			end!@#&		elseif event == \"key\" then!@#&			if p == keys.enter then!@#&				term.setCursorBlink(false)!@#&				--input = lines[0]..lines[1]..lines[2]..line[3]!@#&				if(currentContact~=\"noOne\")then!@#&					newMessage = lines[0]..lines[1]..lines[2]..lines[3]!@#&					rednet.send(main,username..\"-message-\"..currentContact..\"-\"..newMessage)!@#&					rednet.receive(.5)					!@#&				end!@#&				return true!@#&			elseif p == keys.backspace then!@#&				lines[count] = lines[count]:sub(1, #lines[count] - 1)!@#&				if(string.len(lines[count])==0)then!@#&					if(count>0)then!@#&						count = count-1!@#&					end!@#&				end!@#&			end!@#&		elseif(event==\"mouse_click\")then!@#&			if(pram2==15)then!@#&				if(pram1>=x-4)then!@#&					term.setCursorBlink(false)!@#&					if(currentContact~=\"noOne\")then!@#&						newMessage = lines[0]..lines[1]..lines[2]..lines[3]!@#&						rednet.send(main,username..\"-message-\"..currentContact..\"-\"..newMessage)!@#&						rednet.receive(.5)		!@#&					end			!@#&				end!@#&			elseif(pram2<=yplace)then!@#&				--if(pram1<=xplace)then!@#&					term.setCursorBlink(false)!@#&					return false!@#&				--end!@#&			end!@#&		end!@#&		!@#&		for rows=0,3,1 do!@#&			for columns=0,36,1 do!@#&				term.setCursorPos(16+columns,16+rows)!@#&				write(\" \")!@#&			end!@#&		end!@#&		term.setCursorPos(xplace,ycurs)!@#&		write( ( mask and string.rep(mask, #lines[count]) or lines[0] )..\" \")!@#&		term.setCursorPos(xplace,ycurs+1)!@#&		write( ( mask and string.rep(mask, #lines[count]) or lines[1] )..\" \")!@#&		term.setCursorPos(xplace,ycurs+2)!@#&		write( ( mask and string.rep(mask, #lines[count]) or lines[2] )..\" \")!@#&		term.setCursorPos(xplace,ycurs+3)!@#&		write( ( mask and string.rep(mask, #lines[count]) or lines[3] )..\" \")!@#&		term.setCursorPos(xplace+string.len(lines[count]),ycurs+count)!@#&	end!@#&	--error( \"should never get here\" )!@#&	--term.clearLine()!@#&end!@#&!@#&function wordwrap(message)!@#&	local newcount = 0!@#&	local words = {}!@#&	for token in string.gmatch(message, \"[^%s]+\") do!@#&	   words[newcount]=token!@#&	   newcount = newcount+1!@#&	end!@#&	return string.sub(message,1,24-string.len(words[table.getn(words)])),words[table.getn(words)]!@#&end!@#&!@#&function printChat(user,message,current)!@#&	local state=true!@#&	local lines = {}!@#&	local xplace=0!@#&	local x,y = term.getCursorPos()!@#&	term.setBackgroundColor(colors.white)!@#&	if(user==username)then!@#&		term.setTextColor(colors.lightGray)!@#&	else!@#&		term.setTextColor(colors.lightBlue)!@#&	end!@#&	for place=0,4,1 do!@#&		if(#message<=24)then!@#&			lines[place] = string.sub(message,1+(place*24),(place+1)*24)!@#&		else!@#&			if(place==0)then!@#&				lines[0],lines[1] = wordwrap(string.sub(message,1+(place*24),(place+1)*24))!@#&			elseif(#message>24*(place+1))then!@#&				lines[place] = lines[place]..string.sub(message,1+(place*24),(place+1)*24)!@#&				lines[place],lines[place+1] = wordwrap(string.sub(message,1+(place*24),(place+1)*24))!@#&			else!@#&				if(lines[place]~=nil)then!@#&					lines[place] = lines[place]..string.sub(message,1+(place*24),(place+1)*24)!@#&				else!@#&					lines[place] = string.sub(message,1+(place*24),(place+1)*24)!@#&				end!@#&			end!@#&		end!@#&	end!@#&	if(current>3 and current<15)then!@#&		if(#user>10)then!@#&			term.setCursorPos(16,current)!@#&			temp = string.sub(user,0,7)!@#&			temp = temp..\"...\"!@#&			write(temp)!@#&		else!@#&			xplace=10-string.len(user)!@#&			term.setCursorPos(16+xplace,current)!@#&			write(user)!@#&		end!@#&	end!@#&	term.setTextColor(colors.black)!@#&	for lineplace=0,table.getn(lines),1 do!@#&		if(lines[lineplace]~=\"\")then!@#&			if(current+lineplace>3 and current+lineplace<15)then!@#&				term.setCursorPos(27,current+lineplace)!@#&				for derp=1,x-27,1 do!@#&					write(\" \")!@#&				end!@#&				term.setCursorPos(27,current+lineplace)!@#&				write(lines[lineplace])!@#&			end!@#&			term.setCursorPos(27,current+lineplace)!@#&		end!@#&		!@#&	end!@#&	local x,y = term.getCursorPos()!@#&	return x,y!@#&end!@#&!@#&function getFriends(FSP)!@#&	local running = true!@#&	local trys = 0!@#&	local endNum = 0!@#&	while running do!@#&		rednet.send(main,username..\"-getfriends\")!@#&		id,message = rednet.receive(1)!@#&		if(id==main)then!@#&			running = false!@#&		end!@#&		if(trys==3)then!@#&			running = false!@#&		end!@#&		trys = trys+1!@#&	end!@#&	term.setTextColor(colors.black)!@#&	contacts = textutils.unserialize(message)!@#&	if(contacts[0]~=nil)then!@#&		if(table.getn(contacts)<11)then!@#&			endNum = table.getn(contacts)!@#&		else!@#&			endNum = 11!@#&		end!@#&		term.setBackgroundColor(colors.white)!@#&		for pos = 0+FSP,endNum+FSP,1 do!@#&			term.setCursorPos(1,6+pos-FSP)!@#&			write(contacts[pos])!@#&		end!@#&	end!@#&end!@#&!@#&function userHome()!@#&	term.setTextColor(colors.white)!@#&	local x,y = term.getSize()!@#&	--clear()!@#&	--setBackground(colors.white,x,y)!@#&	setBackground(colors.lightBlue,x,2)!@#&	for rows = 1,y,1 do!@#&		term.setBackgroundColor(colors.lightBlue)!@#&		term.setCursorPos(1,0+rows)!@#&		for columns=1,15,1 do!@#&			write(\" \")!@#&		end!@#&	end!@#&	term.setCursorPos(1,1)!@#&	write(\"MineChat \"..version)!@#&	term.setCursorPos(1,2)!@#&	write(username)!@#&	term.setCursorPos(x-5,1)!@#&	term.setBackgroundColor(colors.lightGray)!@#&	write(\"Logout\")!@#&	term.setBackgroundColor(colors.lightBlue)!@#&	term.setCursorPos(16,2)!@#&	write(\"Profile  Options  Help\")!@#&	term.setBackgroundColor(colors.lightGray)!@#&	for rows=16,x,1 do!@#&		term.setCursorPos(rows,3)!@#&		write(\" \")!@#&	end!@#&	term.setBackgroundColor(colors.lightBlue)!@#&	term.setCursorPos(1,4)!@#&	write(\"Contacts\")!@#&	for rows=1,14,1 do!@#&		term.setCursorPos(1,4+rows)!@#&		term.setBackgroundColor(colors.white)!@#&		write(\"              \")!@#&		term.setBackgroundColor(colors.lightGray)!@#&		write(\" \")!@#&	end!@#&	term.setCursorPos(1,5)!@#&	term.setBackgroundColor(colors.lightGray)!@#&	write(\"              \")!@#&	term.setBackgroundColor(colors.gray)!@#&	term.setCursorPos(15,5)!@#&	write(\"^\")!@#&	term.setCursorPos(15,18)!@#&	write(\"v\")!@#&	term.setBackgroundColor(colors.lightGray)!@#&	for rows=1,11,1 do!@#&		term.setCursorPos(x,2+rows)!@#&		write(\" \")!@#&	end!@#&	term.setBackgroundColor(colors.gray)!@#&	term.setCursorPos(x,3)!@#&	write(\"^\")!@#&	term.setCursorPos(x,14)!@#&	write(\"v\")!@#&	term.setBackgroundColor(colors.white)!@#&	for y=1,4,1 do!@#&		term.setCursorPos(16,15+y)!@#&		for derp=1,x-15,1 do!@#&			write(\" \")!@#&		end!@#&	end!@#&	term.setBackgroundColor(colors.lightGray)!@#&	term.setCursorPos(16,15)!@#&	for derp=1,x-15,1 do!@#&		write(\" \")!@#&	end!@#&	term.setBackgroundColor(colors.gray)!@#&	term.setCursorPos(x-4,15)!@#&	write(\"Send\")!@#&	term.setBackgroundColor(colors.white)!@#&	term.setTextColor(colors.black)!@#&	term.setCursorPos(16,16)!@#&	write(\"Say Something...\")!@#&	term.setCursorPos(1,18)!@#&	term.setBackgroundColor(colors.lightGray)!@#&	write(\"              \")!@#&end!@#&!@#&function displayContact(contact)!@#&	rednet.send(main,username..\"-getmessages-\"..contact)!@#&	local ID,message = rednet.receive(.5)!@#&	local ID,status = rednet.receive(.5)!@#&	local chat = textutils.unserialize(message)!@#&	term.setBackgroundColor(colors.lightGray)!@#&	term.setTextColor(colors.blue)!@#&	term.setCursorPos(16,3)!@#&	write(contact..\" \")!@#&	if(status==\"online\")then!@#&		term.setBackgroundColor(colors.lime)!@#&	else!@#&		term.setBackgroundColor(colors.orange)!@#&	end!@#&	write(\" \")!@#&end!@#&!@#&function openChat(contact,current,chatplace)!@#&	--return false!@#&	local returnValue = false!@#&	local length = 0!@#&	current = 4-chatplace!@#&	if(contact~=\"onOne\" and contact~=nil)then!@#&		rednet.send(main,username..\"-getmessages-\"..contact)!@#&		local ID,message = rednet.receive(.5)!@#&		local ID,status = rednet.receive(.5)!@#&		local chat = textutils.unserialize(message)!@#&		if(chat[0]~=nil)then!@#&			for place=0,chatLength(contact),1 do!@#&				for name,msg in chat[place]:gmatch(\"([^%s]+)-(.*)\") do!@#&					user = name!@#&					chatmsg = msg!@#&				end!@#&				local x,ypos = printChat(user,chatmsg,current)!@#&				current = ypos+1!@#&				if(ypos>19)then!@#&					return true!@#&				end		!@#&			end!@#&			oldLength = length!@#&		end!@#&	end!@#&	return false!@#&end!@#&!@#&function profileMenu()!@#&	local menuChoice = {}!@#&	menuChoice[0] = \"Add Friend\"!@#&	menuChoice[1] = \"Delete Friend\"!@#&	menuChoice[2] = \"Edit Account\"!@#&	menuChoice[3] = \"Friend Requests\"!@#&	term.setBackgroundColor(colors.lightGray)!@#&	term.setTextColor(colors.white)!@#&	term.setCursorPos(16,2)!@#&	write(\"Profile\")!@#&	term.setBackgroundColor(colors.blue)!@#&	for place=0,table.getn(menuChoice),1 do!@#&		term.setCursorPos(16,3+place)!@#&		for num=0,16,1 do !@#&			write(\" \")!@#&		end!@#&		term.setCursorPos(16,3+place)!@#&		write(menuChoice[place])!@#&	end!@#&end!@#&!@#&function optionsMenu()!@#&	local menuChoice = {}!@#&	menuChoice[0] = \"Change Color\"!@#&	term.setBackgroundColor(colors.lightGray)!@#&	term.setTextColor(colors.white)!@#&	term.setCursorPos(25,2)!@#&	write(\"Options\")!@#&	term.setBackgroundColor(colors.blue)!@#&	for place=0,table.getn(menuChoice),1 do!@#&		term.setCursorPos(25,3+place)!@#&		for num=0,12,1 do !@#&			write(\" \")!@#&		end!@#&		term.setCursorPos(25,3+place)!@#&		write(menuChoice[place])!@#&	end!@#&end!@#&!@#&function helpMenu()!@#&	local menuChoice = {}!@#&	menuChoice[0] = \"N/A\"!@#&	term.setBackgroundColor(colors.lightGray)!@#&	term.setTextColor(colors.white)!@#&	term.setCursorPos(34,2)!@#&	write(\"Help\")!@#&	term.setBackgroundColor(colors.blue)!@#&	for place=0,table.getn(menuChoice),1 do!@#&		term.setCursorPos(34,3+place)!@#&		for num=0,6,1 do !@#&			write(\" \")!@#&		end!@#&		term.setCursorPos(34,3+place)!@#&		write(menuChoice[place])!@#&	end!@#&end!@#&!@#&function chatLength(contact)!@#&	local lines = {}!@#&	if(contact~=\"onOne\" and contact~=nil)then!@#&		rednet.send(main,username..\"-getmessages-\"..contact)!@#&	end!@#&	local ID,msg = rednet.receive(.5)!@#&	local ID,status = rednet.receive(.5)!@#&	local chat = textutils.unserialize(msg)!@#&	if(chat[0]~=nil)then!@#&		for x=1,#chat,1 do!@#&			for name,m in chat[x]:gmatch(\"([^%s]+)-(.*)\") do!@#&				user = name!@#&				message = m!@#&			end!@#&			for place=0,6,1 do!@#&				if(#message<=24)then!@#&					lines[place] = string.sub(message,1+(place*24),(place+1)*24)!@#&				elseif(string.sub(message,1+(place*24),#message)~=\"\")then!@#&					if(place==0)then!@#&						lines[0],lines[1] = wordwrap(string.sub(message,1+(place*24),(place+1)*24))!@#&					elseif(#message>24*(place+1))then!@#&						lines[place] = lines[place]..string.sub(message,1+(place*24),(place+1)*24)!@#&						lines[place],lines[place+1] = wordwrap(string.sub(message,1+(place*24),(place+1)*24))!@#&					else!@#&						if(lines[place]~=nil)then!@#&							lines[place] = lines[place]..string.sub(message,1+(place*24),(place+1)*24)!@#&						else!@#&							lines[place] = string.sub(message,1+(place*24),(place+1)*24)!@#&						end!@#&					end!@#&				end!@#&			end!@#&		end!@#&	end!@#&	print(#lines)!@#&	sleep(1)!@#&	return #lines!@#&end!@#&!@#&function refreshScreen(CC,CSP,openList,FSP)!@#&	--clear()!@#&	setBackground(colors.white,term.getSize())!@#&	getFriends(FSP)!@#&	if(openList[4])then 	--chat!@#&		openChat(CC,0,CSP)!@#&	end!@#&	userHome()!@#&	if(openList[4])then!@#&		displayContact(CC)!@#&	end!@#&	getFriends(FSP)!@#&	if(openList[1])then		--profile!@#&		profileMenu()!@#&	end!@#&	if(openList[2])then		--options!@#&		optionsMenu()!@#&	end!@#&	if(openList[3])then		--help!@#&		helpMenu()!@#&	end	!@#&end!@#&!@#&function friendRequests()!@#&	local endNum = 0!@#&	rednet.send(main,username..\"-friendrequests\")!@#&	local ID, message = rednet.receive(.5)!@#&	requests = textutils.unserialize(message)!@#&	term.setBackgroundColor(colors.blue)!@#&	term.setCursorPos(6,6)!@#&	term.setBackgroundColor(colors.blue)!@#&	for y=0,9,1 do!@#&		for x=0,36,1 do!@#&			term.setCursorPos(6+x,7+y)!@#&			write(\" \")!@#&		end!@#&	end!@#&	term.setCursorPos(6,6)!@#&	term.setBackgroundColor(colors.gray)!@#&	for derp=1,37,1 do write(\" \") end!@#&	term.setCursorPos(15,6)!@#&	write(\"Friend Requests\")!@#&	term.setCursorPos(39,6)!@#&	term.setBackgroundColor(colors.red)!@#&	write(\" X \")!@#&	term.setBackgroundColor(colors.blue)!@#&	if(requests[0]==niil)then!@#&		term.setCursorPos(8,7)!@#&		write(\"You have no requests\")!@#&	else!@#&		if(table.getn(requests)<5)then!@#&			endNum = table.getn(requests)!@#&		else!@#&			endNum = 4!@#&		end!@#&		for place=0,endNum,1 do!@#&			term.setCursorPos(8,7+place)!@#&			term.setBackgroundColor(colors.blue)!@#&			write(requests[place])!@#&			term.setBackgroundColor(colors.green)!@#&			term.setCursorPos(32,7+place)!@#&			write(\"Accept\")!@#&			--term.setBackgroundColor(colors.red)!@#&			--write(\"Deny\")!@#&		end!@#&	end!@#&	term.setBackgroundColor(colors.blue)!@#&	return requests!@#&end!@#&!@#&function addFriend(name)!@#&	term.setBackgroundColor(colors.blue)!@#&	for y=0,10,1 do!@#&		for x=0,36,1 do!@#&			term.setCursorPos(6+x,6+y)!@#&			write(\" \")!@#&		end!@#&	end!@#&	term.setCursorPos(6,6)!@#&	term.setTextColor(colors.white)!@#&	term.setBackgroundColor(colors.gray)!@#&	for derp=1,37,1 do write(\" \") end!@#&	term.setCursorPos(15,6)!@#&	write(\"Add Friend\")!@#&	term.setCursorPos(39,6)!@#&	term.setBackgroundColor(colors.red)!@#&	write(\" X \")!@#&	term.setBackgroundColor(colors.blue)!@#&	term.setCursorPos(18,8)!@#&	write(\"Enter Username\")!@#&	term.setCursorPos(12,10)!@#&	term.setBackgroundColor(colors.white)!@#&	write(\"|                         |\")!@#&	term.setTextColor(colors.black)!@#&	term.setCursorPos(12+((25-string.len(name))/2),10)!@#&	write(name)!@#&	term.setCursorPos(15,12)!@#&	term.setTextColor(colors.white)!@#&	term.setBackgroundColor(colors.green)!@#&	write(\"Send Friend Request\")!@#&	term.setBackgroundColor(colors.blue)!@#&end!@#&!@#&function deleteFriend(name)!@#&	term.setBackgroundColor(colors.blue)!@#&	for y=0,10,1 do!@#&		for x=0,36,1 do!@#&			term.setCursorPos(6+x,6+y)!@#&			write(\" \")!@#&		end!@#&	end!@#&	term.setCursorPos(6,6)!@#&	term.setTextColor(colors.white)!@#&	term.setBackgroundColor(colors.gray)!@#&	for derp=1,37,1 do write(\" \") end!@#&	term.setCursorPos(15,6)!@#&	write(\"Delete Friend\")!@#&	term.setCursorPos(39,6)!@#&	term.setBackgroundColor(colors.red)!@#&	write(\" X \")!@#&	term.setBackgroundColor(colors.blue)!@#&	term.setCursorPos(18,8)!@#&	write(\"Enter Username\")!@#&	term.setCursorPos(12,10)!@#&	term.setBackgroundColor(colors.white)!@#&	write(\"|                         |\")!@#&	term.setTextColor(colors.black)!@#&	term.setCursorPos(12+((25-string.len(name))/2),10)!@#&	write(name)!@#&	term.setCursorPos(15,12)!@#&	term.setTextColor(colors.white)!@#&	term.setBackgroundColor(colors.green)!@#&	write(\"Delete Friend\")!@#&	term.setBackgroundColor(colors.blue)!@#&end!@#&!@#&function editAccount()!@#&	!@#&end!@#&!@#&function addFriendInteraction()!@#&	local name = \"Username\"!@#&	while true do!@#&		term.setBackgroundColor(colors.blue)!@#&		addFriend(name)!@#&		Event,key,xpos,ypos = getEvent(\"mouse_click\")!@#&		if(ypos==6)then!@#&			if(xpos>=39 and xpos<=41)then!@#&				break!@#&			end!@#&		elseif(ypos==10)then!@#&			if(xpos>=12 and xpos<=39)then!@#&				term.setBackgroundColor(colors.white)!@#&				term.setTextColor(colors.black)!@#&				name = getText(15,10)!@#&				term.setBackgroundColor(colors.blue)!@#&			end!@#&		elseif(ypos==12)then!@#&			if(xpos>=17 and xpos<=35)then!@#&				if(name~=nil or name~=\"Username\")then!@#&					rednet.send(main,username..\"-addfriend-\"..name)!@#&					local ID,msg = rednet.receive(.5)!@#&					if(msg==\"failed\")then!@#&						term.setCursorPos(15,13)!@#&						term.setTextColor(colors.red)!@#&						write(\"User Does Not Exist or\")!@#&						term.setCursorPos(15,14)!@#&						write(\"Request All Ready Sent\")!@#&						term.setTextColor(colors.white)!@#&						sleep(2)!@#&					else!@#&						term.setCursorPos(17,13)!@#&						write(\"Request Sent\")!@#&						sleep(2)!@#&						break!@#&					end!@#&				else!@#&					term.setCursorPos(17,13)!@#&					term.setTextColor(colors.red)!@#&					write(\"Please Fill Out Feild\")!@#&					term.setTextColor(colors.white)!@#&					sleep(2)!@#&				end!@#&			end!@#&		end!@#&	end!@#&end!@#&!@#&function deleteFriendInteraction()!@#&	local name = \"Username\"!@#&	while true do!@#&		term.setBackgroundColor(colors.blue)!@#&		deleteFriend(name)!@#&		Event,key,xpos,ypos = getEvent(\"mouse_click\")!@#&		if(ypos==6)then!@#&			if(xpos>=39 and xpos<=41)then!@#&				break!@#&			end!@#&		elseif(ypos==10)then!@#&			if(xpos>=12 and xpos<=39)then!@#&				term.setBackgroundColor(colors.white)!@#&				term.setTextColor(colors.black)!@#&				name = getText(15,10)!@#&				term.setBackgroundColor(colors.blue)!@#&			end!@#&		elseif(ypos==12)then!@#&			if(xpos>=17 and xpos<=27)then!@#&				if(name~=nil or name~=\"Username\")then!@#&					rednet.send(main,username..\"-deletefriend-\"..name)!@#&					local ID,msg = rednet.receive(.5)!@#&					if(msg==\"failed\")then!@#&						term.setCursorPos(15,13)!@#&						term.setTextColor(colors.red)!@#&						write(\"User Does Not Exist or\")!@#&						term.setCursorPos(15,14)!@#&						write(\"Not One of Your Friends\")!@#&						term.setTextColor(colors.white)!@#&						sleep(2)!@#&					else!@#&						term.setCursorPos(17,13)!@#&						write(\"Friend Deleted\")!@#&						sleep(2)!@#&						break!@#&					end!@#&				else!@#&					term.setCursorPos(17,13)!@#&					term.setTextColor(colors.red)!@#&					write(\"Please Fill Out Field\")!@#&					term.setTextColor(colors.white)!@#&					sleep(2)!@#&				end!@#&			end!@#&		end!@#&	end!@#&end!@#&!@#&function friendRequestInteraction()!@#&	while true do!@#&		local temp = friendRequests()!@#&		local size = table.getn(temp)!@#&		Event,key,xpos,ypos = getEvent(\"mouse_click\")!@#&		if(ypos-7<=size and ypos>=7)then!@#&			if(xpos>=32 and xpos<=37)then!@#&				rednet.send(main,username..\"-confimFriend-\"..temp[ypos-7])!@#&				rednet.receive(.5)!@#&			end!@#&		elseif(ypos==6)then!@#&			if(xpos>=39 and xpos<=41)then!@#&				break!@#&			end!@#&		end!@#&	end!@#&end!@#&!@#&function clientInteraction()!@#&	--				  profile options help  chat!@#&	local appsOpen = {false,  false,  false,false}!@#&	oldLength = 0!@#&	timer = os.startTimer(3)!@#&	local x,y = term.getSize()!@#&	local friendScrollPlace = 0!@#&	local chatScrollPlace = 0!@#&	local running = true!@#&	choice = \"nothing\"!@#&	scroll = 0!@#&	currentContact = \"noOne\"!@#&	refreshScreen(currentContact,chatScrollPlace,appsOpen,friendScrollPlace)!@#&	while running do!@#&		choice = \"nothing\"!@#&		local Event, key, xclick, yclick = getEvent()!@#&		if(Event==\"mouse_click\")then!@#&			if(xclick<=14)then!@#&				if(yclick>=6)then				--FRIEND SELECT!@#&					if(table.getn(contacts)>11)then!@#&						friendlength = 11!@#&					else!@#&						friendlength = table.getn(contacts)!@#&					end!@#&					for contactNumber=0,friendlength+1,1 do!@#&						if(yclick==5+contactNumber)then!@#&							choice = contactNumber+friendScrollPlace!@#&							currentContact = contacts[choice-1]!@#&						end!@#&					end!@#&					if(choice~=\"noOne\")then!@#&						chatScrollPlace = 0!@#&						appsOpen[4] = true!@#&						--local result = openChat(currentContact,0,chatScrollPlace)!@#&						--if(result)then!@#&						--	chatScrollPlace = chatLength(currentContact)-7!@#&						--end!@#&					end!@#&				end!@#&			end!@#&			if(yclick==1)then				--LOGOUT!@#&				if(xclick>=46)then!@#&					running = false!@#&					rednet.send(main,username..\"-logout\")!@#&					break!@#&				end	!@#&			end	!@#&			if(yclick==2)then				---MENUS!@#&				if(xclick>=16 and xclick<=15+string.len(\"profile\"))then!@#&					choice = \"profile\"!@#&					profileMenu()!@#&					appsOpen[1] = true!@#&					appsOpen[2] = false!@#&					appsOpen[3] = false!@#&				elseif(xclick>=16+2+string.len(\"profile\") and xclick<=15+2+string.len(\"profile\")+string.len(\"options\"))then!@#&					choice = \"options\"!@#&					optionsMenu()!@#&					appsOpen[1] = false!@#&					appsOpen[2] = true!@#&					appsOpen[3] = false!@#&				elseif(xclick>=16+3+string.len(\"profile\")+string.len(\"options\") and xclick<=15+4+string.len(\"profile\")+string.len(\"options\")+string.len(\"help\"))then!@#&					choice = \"help\"!@#&					helpMenu()!@#&					appsOpen[1] = false!@#&					appsOpen[2] = false!@#&					appsOpen[3] = true!@#&				end!@#&			end!@#&			if(xclick==15)then 				--FRIEND SCROLL!@#&				if(yclick==5)then!@#&					choice = \"friendScroll\"!@#&					friendScrollPlace = friendScrollPlace-1!@#&				elseif(yclick==18 and #contacts>13)then!@#&					choice = \"friendScroll\"!@#&					friendScrollPlace = friendScrollPlace+1!@#&				end!@#&				if(friendScrollPlace<0)then!@#&					friendScrollPlace = 0!@#&				end!@#&				if(friendScrollPlace+11>#contacts and #contacts>11)then!@#&					friendScrollPlace = friendScrollPlace-1!@#&				end!@#&			end!@#&			if(xclick==x)then				--CHAT SCROLL!@#&				local length = chatLength(currentContact)+1!@#&				if(yclick==3)then!@#&					choice = \"chatScroll\"!@#&					chatScrollPlace = chatScrollPlace-1!@#&				elseif(yclick==14)then!@#&					choice = \"chatScroll\"!@#&					chatScrollPlace = chatScrollPlace+1!@#&				end!@#&				if(chatScrollPlace<0)then!@#&					chatScrollPlace = 0!@#&				end!@#&				if(chatScrollPlace>length-9)then!@#&					chatScrollPlace=chatScrollPlace-1!@#&				end!@#&			end!@#&			if(xclick>=16)then				--TEXT BOX!@#&				if(yclick>=16)then!@#&					local result = getchattext(16,16,x)!@#&					if(result)then!@#&						--atScrollPlace = chatLength(currentContact)-7!@#&					end!@#&				end!@#&			end!@#&			if(xclick>=16 and appsOpen[1])then				--MENU OPTIONS!@#&				if(xclick<=32)then!@#&					if(yclick==3)then!@#&						addFriendInteraction()!@#&					elseif(yclick==4)then!@#&						deleteFriendInteraction()!@#&					elseif(yclick==5)then!@#&						--editProfile(\"username\")!@#&					elseif(yclick==6)then!@#&						friendRequestInteraction()!@#&					end!@#&				end!@#&			end!@#&			if(choice==\"nothing\")then!@#&				appsOpen[1] = false!@#&				appsOpen[2] = false!@#&				appsOpen[3] = false!@#&			end!@#&			refreshScreen(currentContact,chatScrollPlace,appsOpen,friendScrollPlace)!@#&		elseif(Event==\"mouse_scroll\")then!@#&			if(xclick<=14)then!@#&				if(#contacts>13)then!@#&					choice = \"friendScroll\"!@#&					friendScrollPlace = friendScrollPlace+key!@#&				end!@#&				if(friendScrollPlace<0)then!@#&					friendScrollPlace = 0!@#&				end!@#&				if(friendScrollPlace+11>#contacts and #contacts>11)then!@#&					friendScrollPlace = friendScrollPlace-1!@#&				end!@#&			elseif(xclick>=16)then!@#&				local length = chatLength(currentContact)+1!@#&				chatScrollPlace = chatScrollPlace+key!@#&				if(chatScrollPlace<0)then!@#&					chatScrollPlace = 0!@#&				end!@#&				if(chatScrollPlace>length-9)then!@#&					chatScrollPlace=chatScrollPlace-1!@#&				end!@#&			end!@#&		elseif(Event==\"timer\" and key==timer)then!@#&			timer = os.startTimer(3)!@#&			refreshScreen(currentContact,chatScrollPlace,appsOpen,friendScrollPlace)!@#&		end!@#&		!@#&	end!@#&end!@#&!@#&--PROGRAM STARTS HERE!@#&while openPort()==false do!@#&	clear()!@#&	term.setTextColor(colors.white)!@#&	print(\"MineChat Client\")!@#&	term.setTextColor(colors.red)!@#&	print(\"No Modem Attached\")!@#&	sleep(1)!@#&end!@#&for trys=1,10,1 do!@#&	clear()!@#&	term.setTextColor(colors.white)!@#&	print(\"Searching for host server...\")!@#&	rednet.broadcast(\"SMShostsearch\")!@#&	id,msg,distance = rednet.receive(.5)!@#&	if(msg==\"SMShostreceived\")then!@#&		main = id!@#&		break!@#&	end!@#&end!@#&!@#&close = false!@#&while close==false do!@#&	close = false!@#&	username = \"username\"!@#&	password = \"password\"!@#&	loginInterface()!@#&	if(close==false)then!@#&		clientInteraction()!@#&	end!@#&end!@#&term.setBackgroundColor(colors.black)!@#&term.setTextColor(colors.white)!@#&term.clear()!@#&term.setCursorPos(1,1)",["fileexplorer"]="dirs = {}!@#&dirs[\"rom\"] = {}!@#&dirs[\"rom\"][\"open\"] = false!@#&dirs[\"rom\"][\"dir\"] = {}!@#&x,y = term.getSize()!@#&BG = paintutils.loadImage(\"background\")!@#&function drawBackground()!@#&	term.setTextColor(colors.black)!@#&	shell.run(\"clear\")!@#&	paintutils.drawImage(BG,1,1)!@#&	term.setCursorPos(1,19)!@#&	term.setBackgroundColor(colors.white)!@#&	for place=1,x,1 do!@#&		write(\" \")!@#&	end!@#&	for place=1,x,1 do!@#&		term.setCursorPos(x-1,2+place)!@#&		write(\"  \")!@#&	end!@#&	term.setCursorPos(17,19)!@#&	term.setBackgroundColor(colors.lightGray)!@#&	write(\" \")!@#&	term.setCursorPos(50,2)!@#&	write(\"  \")!@#&	term.setCursorPos(6,1)!@#&	write(\"^\")!@#&	term.setBackgroundColor(colors.white)!@#&	term.setCursorPos(x-12,1)!@#&	write(\"Search\")!@#&	term.setCursorPos(7,1)!@#&	write(path)!@#&	term.setCursorPos(1,1)!@#&end!@#&!@#&function getFiles(parentDir)!@#&	term.setCursorPos(1,1)!@#&	local temp = string.sub(path,3,#path)!@#&	local files = fs.list(\"rom\")!@#&	local extensions = {}!@#&	for _,file in ipairs(files) do!@#&		if(fs.exists(temp..\"/\"..file))then!@#&			if(fs.isDir(temp..\"/\"..file))then!@#&				table.insert(extensions,\"directory\")!@#&				--dirs[file] = {}!@#&				--dirs[file][\"open\"] = false!@#&				--dirs[file][\"dir\"] = {}!@#&			else!@#&				table.insert(extensions,\"file\")!@#&			end!@#&		end!@#&	end!@#&	--write(textutils.serialize(extensions))!@#&	--sleep(2)!@#&	return extensions,files!@#&end!@#&!@#&function writeFileState(directory)!@#&	if(dirs[directory][\"open\"])then!@#&		write(\"- \"..directory)!@#&	else!@#&		write(\"+ \"..directory)!@#&	end!@#&end!@#&!@#&function populateDA(currentFile,depth)!@#&	local count=1!@#&	local types,files = getFiles(currentFile)!@#&	--write(textutils.serialize(types))!@#&	dirs[currentFile][\"dir\"] = files!@#&	term.setCursorPos(1,2+depth)!@#&	writeFileState(currentFile)!@#&	if(dirs[currentFile][\"open\"])then!@#&		--write(textutils.serialize(dirs[currentFile][\"dir\"]))!@#&		for value,file in pairs(dirs[currentFile][\"dir\"]) do!@#&			--write(count..\" \"..depth)!@#&			term.setCursorPos(1+depth,2+depth+count)!@#&			if(types[count]==\"directory\")then!@#&				write(\"+ \"..file)!@#&			else!@#&				write(file)!@#&			end!@#&			count = count+1!@#&		end!@#&	end!@#&end!@#&!@#&!@#&while true do!@#&	path = \"C:rom/\"!@#&	local count = 2!@#&	for file,value in pairs(dirs) do!@#&		--path = path..file..\"/\"!@#&		if(dirs[file][\"open\"])then!@#&			populateDA(file,count)!@#&			count = count+1!@#&		else!@#&			populateDA(file,count)!@#&			break!@#&		end!@#&		break!@#&	end!@#&	drawBackground()!@#&	path = \"C:\"!@#&	local count = 2!@#&	--write(textutils.serialize(dirs))!@#&	--sleep(3)!@#&	for file,value in pairs(dirs) do!@#&		--print(file)!@#&		--path = path..file..\"/\"!@#&		if(dirs[file][\"open\"])then!@#&			populateDA(file,count)!@#&			count = count+1!@#&		else!@#&			populateDA(file,count)!@#&			break!@#&		end!@#&		break!@#&	end!@#&	local Event,key,xpos,ypos = os.pullEvent(\"mouse_click\")!@#&	if(ypos==4)then!@#&		if(xpos==1)then!@#&			if(dirs[\"rom\"][\"open\"])then!@#&				dirs[\"rom\"][\"open\"] = false!@#&			else!@#&				dirs[\"rom\"][\"open\"] = true!@#&			end!@#&		end!@#&	end!@#&end!@#&term.setCursorPos(1,1)!@#&print(\"done\")",["Wolf3D"]="local buffer=term!@#&local loadedAPI=false!@#&!@#&if redirect then!@#&  buffer=redirect.createRedirectBuffer()!@#&  print(\"redirect API found, using buffer\")!@#&else!@#&  local pe=printError!@#&  rawset(_G,\"printError\",error)  !@#&  local ok, err=pcall(os.loadAPI,\"redirect\")!@#&  if not ok then!@#&    print(\"trying \"..shell.dir()..\"/redirect\")!@#&    ok,err=pcall(os.loadAPI,shell.dir()..\"/redirect\")!@#&  end!@#&  if ok then    !@#&    print(\"Loaded redirect API, using buffer\")!@#&    buffer=redirect.createRedirectBuffer()!@#&    loadedAPI=true!@#&  else!@#&    print(\"redirect API not found or could not be loaded, drawing directly; this may cause flickering.\")!@#&  end!@#&  rawset(_G,\"printError\",pe)!@#&!@#&end!@#&!@#&!@#&local mapW, mapH=16,32!@#&local map={!@#&  \"1111111111111111\",!@#&  \"1   12         1\",!@#&  \"1 111111111111 1\",!@#&  \"1 1      1   1 1\",!@#&  \"1 1 1111 1 1 1 1\",!@#&  \"1 1   1  1 1   1\",!@#&  \"1 111 111111 111\",!@#&  \"1   1          1\",!@#&  \"111 11111111 1 1\",!@#&  \"1 1          1 1\",!@#&  \"1 111111111111 1\",!@#&  \"1   1 1    1   1\",!@#&  \"1 111 1 1111 111\",!@#&  \"1     1    1   1\",!@#&  \"1 11111111 111 1\",!@#&  \"1              1\",!@#&  \"1111114  4111111\",!@#&  \"1              1\",!@#&  \"1              1\",!@#&  \"1  3  3  3  3  1\",!@#&  \"1              1\",!@#&  \"1              1\",!@#&  \"1  2  5  5  2  1\",!@#&  \"1              1\",!@#&  \"1              1\",!@#&  \"1  2  5  5  2  1\",!@#&  \"1              1\",!@#&  \"1              1\",!@#&  \"1  3  2  2  3  1\",!@#&  \"1              1\",!@#&  \"1              1\",!@#&  \"1111111111111111\",!@#&}  !@#&!@#&local colorSchemes = {!@#&  {0,8}, --white+gray!@#&  {3,11}, --blue!@#&  {6,14}, --red!@#&  {5,13}, --green!@#&  {4,1}, --yellow/orange!@#&}!@#&!@#&!@#&local function cast(cx,cy,angle)!@#&  --direction vector!@#&  local vx,vy=math.cos(angle), math.sin(angle)!@#&  local slope=vy/vx!@#&  --next distance, x and y axis points!@#&  local ndx, ndy!@#&  --steps, distance and block!@#&  local dsx, dsy, bsx, bsy!@#&  if vx<0 then!@#&    local x=(cx%1)!@#&    bsx=-1!@#&    ndx=math.sqrt(x*x*(1+slope*slope))!@#&    dsx=math.sqrt((1+slope*slope))!@#&  else!@#&    local x=1-(cx%1)!@#&    bsx=1!@#&    ndx=math.sqrt(x*x*(1+slope*slope))!@#&    dsx=math.sqrt((1+slope*slope))!@#&  end!@#&!@#&  if vy<0 then!@#&    local y=(cy%1)!@#&    bsy=-1!@#&    ndy=math.sqrt(y*y*(1+1/(slope*slope)))!@#&    dsy=math.sqrt((1+1/(slope*slope)))!@#&  else!@#&    local y=1-(cy%1)!@#&    bsy=1!@#&    ndy=math.sqrt(y*y*(1+1/(slope*slope)))!@#&    dsy=math.sqrt((1+1/(slope*slope)))!@#&  end!@#&!@#&  local x,y=math.floor(cx),math.floor(cy)!@#&  while x>0 and x<=mapW and y>0 and y<=mapH do!@#&    local hitD!@#&    local isX!@#&    if ndx<ndy then!@#&      --x crossing is next!@#&      x=x+bsx!@#&      isX=true!@#&      hitD=ndx!@#&      ndx=ndx+dsx!@#&    else!@#&      y=y+bsy!@#&      isX=false!@#&      hitD=ndy!@#&      ndy=ndy+dsy!@#&    end!@#&    local wall=map[y]:sub(x,x)!@#&    if wall~=\" \" then!@#&      !@#&      return colorSchemes[tonumber(wall)][isX and 1 or 2], hitD!@#&    end!@#&  end  !@#&end!@#&!@#&local w,h=term.getSize()!@#&local centerX, centerY=math.floor((w+1)/2), math.floor((h+1)/2)!@#&!@#&local px, py=9,25!@#&local dir=0!@#&local fx,fy!@#&local speed=.1!@#&local turnSpeed=4!@#&!@#&local function turn(amt)!@#&  dir=dir+amt!@#&  fx,fy=math.cos(math.rad(dir)), math.sin(math.rad(dir))!@#&end!@#&!@#&turn(0)!@#&!@#&--build table of angles and base distances per scanline!@#&local screenDist=.55*w!@#&local scan={}!@#&!@#&for x=1,w do!@#&  local t={}!@#&  scan[x]=t!@#&  t.angle=math.atan2(x-centerX,screenDist)!@#&  t.dist=((x-centerX)^2+screenDist^2)^.5/screenDist!@#&end!@#&  !@#&local function redraw()!@#&  if buffer.isBuffer then!@#&    term.redirect(buffer)!@#&  end!@#&  for x=1,w do!@#&    local wall,dist=cast(px,py,math.rad(dir)+scan[x].angle)!@#&    if wall then!@#&      --calc wall height based on distance!@#&      local height=scan[x].dist/dist!@#&      height=math.floor(math.min(height*centerY,(h+1)/2))!@#&      term.setBackgroundColor(colors.gray)!@#&      for y=1,(h+1)/2-height-1 do!@#&        term.setCursorPos(x,y)!@#&        term.write(\" \")!@#&      end!@#&      for y=centerY+height+1,h do!@#&        term.setCursorPos(x,y)!@#&        term.write(\" \")!@#&      end!@#&      term.setBackgroundColor(2^wall)!@#&      for y=centerY-height,centerY+height do!@#&        term.setCursorPos(x,y)!@#&        term.write(\" \")!@#&      end!@#&    end!@#&  end!@#&  if buffer.isBuffer then!@#&    term.restore()!@#&    buffer.blit()!@#&  end!@#&end!@#&!@#&local function clampCollision(x,y,radius)!@#&  --am I *in* a block?!@#&  local gx,gy=math.floor(x),math.floor(y)!@#&  if map[gy]:sub(gx,gx)~=\" \" then!@#&    --I am. Complete fail, do nothing.!@#&    return x,y!@#&  end!@#&  !@#&  --ok, check the neighbors.!@#&  local right=math.floor(x+radius)>gx!@#&  local left=math.floor(x-radius)<gx!@#&  local front=math.floor(y-radius)<gy!@#&  local back=math.floor(y+radius)>gy!@#&  !@#&  local pushed=false!@#&  !@#&  if right and map[gy]:sub(gx+1,gx+1)~=\" \" then!@#&    --push left!@#&    pushed=true!@#&    x=gx+1-radius!@#&  elseif left  and map[gy]:sub(gx-1,gx-1)~=\" \" then!@#&    --push right!@#&    pushed=true!@#&    x=gx+radius!@#&  end!@#&  !@#&  if front and map[gy-1]:sub(gx,gx)~=\" \" then!@#&    --push back!@#&    pushed=true!@#&    y=gy+radius!@#&  elseif back and map[gy+1]:sub(gx,gx)~=\" \" then!@#&    --push forward!@#&    pushed=true!@#&    y=gy+1-radius!@#&  end!@#& !@#&  --if I wasn't pushed out on any side, I might be hitting a corner!@#&  if not pushed then!@#&    --square rad!@#&    local r2=radius^2!@#&    local pushx,pushy=0,0!@#&    if left then!@#&      if front and map[gy-1]:sub(gx-1,gx-1)~=\" \" then!@#&        --check front-left!@#&        local dist2=(gx-x)^2+(gy-y)^2!@#&        if dist2<r2 then!@#&          local pushd=(r2-dist2)/2^.5!@#&          pushx,pushy=pushd,pushd!@#&        end!@#&      elseif back and map[gy+1]:sub(gx-1,gx-1)~=\" \" then!@#&        local dist2=(gx-x)^2+(gy+1-y)^2!@#&        if dist2<r2 then!@#&          local pushd=(r2-dist2)/2^.5!@#&          pushx,pushy=pushd,-pushd!@#&        end!@#&      end!@#&    elseif right then!@#&      if front and map[gy-1]:sub(gx+1,gx+1)~=\" \" then!@#&        --check front-left!@#&        local dist2=(gx+1-x)^2+(gy-y)^2!@#&        if dist2<r2 then!@#&          local pushd=(r2-dist2)/2^.5!@#&          pushx,pushy=-pushd,pushd!@#&        end!@#&      elseif back and map[gy+1]:sub(gx+1,gx+1)~=\" \" then!@#&        local dist2=(gx+1-x)^2+(gy+1-y)^2!@#&        if dist2<r2 then!@#&          local pushd=(r2-dist2)/2^.5!@#&          pushx,pushy=-pushd,-pushd!@#&        end!@#&      end!@#&    end!@#&    x=x+pushx!@#&    y=y+pushy!@#&  end!@#&  !@#&  return x,y!@#&end!@#&!@#&!@#&!@#&print([[!@#&Basic wolfenstein 3d-style rendering engine proof-of-concept!@#&controls:!@#&asdw - move!@#&left/right - turn left/right!@#&q - quit!@#&!@#&Press any key to begin...]])!@#&!@#&os.pullEvent(\"key\")!@#&!@#&local frameTimer=os.startTimer(0.5)!@#&local prevTick=0!@#&local dirty=true!@#&while true do!@#&  px,py=clampCollision(px,py,.25)!@#&  if dirty then!@#&    redraw()!@#&    dirty=false!@#&  end!@#&  !@#&  local e={os.pullEvent()}!@#&  if e[1]==\"key\" then!@#&    if e[2]==keys.left then!@#&      turn(-turnSpeed)!@#&      dirty=true!@#&    elseif e[2]==keys.right then!@#&      turn(turnSpeed)!@#&      dirty=true!@#&    elseif e[2]==keys.up or e[2]==keys.w then!@#&      px=px+fx*speed!@#&      py=py+fy*speed!@#&      dirty=true!@#&    elseif e[2]==keys.down or e[2]==keys.s then!@#&      px=px-fx*speed!@#&      py=py-fy*speed!@#&      dirty=true!@#&    elseif e[2]==keys.a then!@#&      px=px+fy*speed!@#&      py=py-fx*speed!@#&      dirty=true!@#&    elseif e[2]==keys.d then!@#&      px=px-fy*speed!@#&      py=py+fx*speed!@#&      dirty=true!@#&    elseif e[2]==keys.q then!@#&      break!@#&    end!@#&  end!@#&end!@#&!@#&!@#&if loadedAPI then!@#&  os.unloadAPI(\"redirect\")!@#&end!@#&!@#&term.setBackgroundColor(colors.black)!@#&os.pullEvent()!@#&term.scroll(1)!@#&term.setCursorPos(1,19)",["eShip12.img"]="!@#&               9999977!@#&              99   777!@#&              77   77!@#&               77   7!@#&               99   9!@#&              77   77!@#&              99   777!@#&               9999977",["QuickType"]="--	  !@#&--	QuickType - A small mini-game.!@#&--	   Made by UseTheForce Productions!@#&--	   !@#&--	   Credits:!@#&--	   Luke M.!@#&--!@#&!@#&if not fs.exists(\"/SpeedOS/Applications/GameBox/CCQT/UTFPro\") then!@#&	fs.makeDir(\"/SpeedOS/Applications/GameBox/CCQT\")!@#&	local UTFPro = fs.open(\"/SpeedOS/Applications/GameBox/CCQT/UTFPro\", \"w\")!@#&	UTFPro.writeLine(\"bbbbbbbbbbbbb9\")!@#&	UTFPro.writeLine(\"b7bb88888777b9\")!@#&	UTFPro.writeLine(\"b7bb7b8b7bbbb9\")!@#&	UTFPro.writeLine(\"b7bb7b8b77bbb9\")!@#&	UTFPro.writeLine(\"b7bb7b8b7bbbb9\")!@#&	UTFPro.writeLine(\"b7777b8b7bbbb9\")!@#&	UTFPro.writeLine(\"bbbbbbbbbbbbb9\")!@#&	UTFPro.writeLine(\"99999999999999\")!@#&	UTFPro.close()!@#&end!@#&!@#&img = paintutils.loadImage(\"/SpeedOS/Applications/GameBox/CCQT/UTFPro\")!@#&local score = 0!@#&local dgtime = 5!@#&!@#&function clear()!@#&	term.clear()!@#&	term.setCursorPos(1,1)!@#&end!@#&!@#&clear()!@#&!@#&function saveScore(value)!@#&	file = fs.open(\"/SpeedOS/Applications/GameBox/CCQT/highscore.txt\", \"w\")!@#&	file.writeLine(value)!@#&	file.close()!@#&end!@#&!@#&function getScore()!@#&	if not fs.exists(\"/SpeedOS/Applications/GameBox/CCQT/highscore.txt\") then!@#&		file = fs.open(\"/SpeedOS/Applications/GameBox/CCQT/highscore.txt\", \"w\")!@#&		file.writeLine(\"0\")!@#&		file.close()!@#&		getScore()!@#&	else!@#&		file = fs.open(\"/SpeedOS/Applications/GameBox/CCQT/highscore.txt\", \"r\")!@#&		highscore = file.readAll()!@#&		file.close()!@#&		return tonumber(highscore)!@#&	end!@#&end!@#&!@#&function gsleep()!@#&	sleep(tonumber(gtime))!@#&	return \"HI\"!@#&end!@#&!@#&function easyQuestion()!@#&	local letters = {\"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\", \"H\", \"I\", \"J\", \"K\", \"L\", \"M\", \"N\", \"O\", \"P\", \"Q\", \"R\", \"S\", \"T\", \"U\", \"V\", \"W\", \"X\", \"Y\", \"Z\"}!@#&	local question = {letters[math.random(1, #letters)], letters[math.random(1, #letters)], letters[math.random(1, #letters)], letters[math.random(1, #letters)], letters[math.random(1, #letters)], letters[math.random(1, #letters)]}!@#&	return question[1]..question[2]..question[3]..question[4]..question[5]..question[6]!@#&end!@#&!@#&function hardQuestion()!@#&	local letters = {\"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\", \"H\", \"I\", \"J\", \"K\", \"L\", \"M\", \"N\", \"O\", \"P\", \"Q\", \"R\", \"S\", \"T\", \"U\", \"V\", \"W\", \"X\", \"Y\", \"Z\", \"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"i\", \"j\", \"k\", \"l\", \"m\", \"n\", \"o\", \"p\", \"q\", \"r\", \"s\", \"t\", \"u\", \"v\", \"w\", \"x\", \"y\", \"z\"}!@#&	local question = {letters[math.random(1, #letters)], letters[math.random(1, #letters)], letters[math.random(1, #letters)], letters[math.random(1, #letters)], letters[math.random(1, #letters)], letters[math.random(1, #letters)]}!@#&	return question[1]..question[2]..question[3]..question[4]..question[5]..question[6]!@#&end!@#&!@#&function insaneQuestion()!@#&	local letters = {\"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\", \"H\", \"I\", \"J\", \"K\", \"L\", \"M\", \"N\", \"O\", \"P\", \"Q\", \"R\", \"S\", \"T\", \"U\", \"V\", \"W\", \"X\", \"Y\", \"Z\", \"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"i\", \"j\", \"k\", \"l\", \"m\", \"n\", \"o\", \"p\", \"q\", \"r\", \"s\", \"t\", \"u\", \"v\", \"w\", \"x\", \"y\", \"z\", \":\", \"{\", \"}\", \"[\", \"]\", \"!\", \"@\", \"#\", \"$\", \"%\", \"%\", \"^\", \"&\", \"*\", \"(\", \")\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"0\", \"/\", \"\\\\\"}!@#&	local question = {letters[math.random(1, #letters)], letters[math.random(1, #letters)], letters[math.random(1, #letters)], letters[math.random(1, #letters)], letters[math.random(1, #letters)], letters[math.random(1, #letters)]}!@#&	return question[1]..question[2]..question[3]..question[4]..question[5]..question[6]!@#&end!@#&!@#&function easy()!@#&	clear()!@#&	eword = easyQuestion()!@#&	print(\"Score: \"..score)!@#&	print(\"\")!@#&	print(eword)!@#&	io.write(\"> \")!@#&	einput = io.read()!@#&	if string.lower(einput) == string.lower(eword) then!@#&		print(\"Correct!\")!@#&		isCorrect = true!@#&	elseif string.lower(einput) ~= string.lower(eword) then!@#&		print(\"Incorrect! You have lost.\")!@#&		isCorrect = false!@#&		hs = getScore()!@#&		if tonumber(score) > tonumber(hs) then!@#&			print(\"New High Score!!!\")!@#&			saveScore(score)!@#&		end!@#&			sleep(1)!@#&			return false!@#&	end!@#&end!@#&!@#&function hard()!@#&	clear()!@#&	hword = hardQuestion()!@#&	print(\"Score: \"..score)!@#&	print(\"\")!@#&	print(hword)!@#&	io.write(\"> \")!@#&	hinput = io.read()!@#&	if hinput == hword then!@#&		print(\"Correct!\")!@#&		isCorrect = true!@#&	elseif einput ~= eword then!@#&		print(\"Incorrect! You have lost.\")!@#&		isCorrect = false!@#&		hs = getScore()!@#&		if tonumber(score) > tonumber(hs) then!@#&			print(\"New High Score!!!\")!@#&			saveScore(score)!@#&		end!@#&			sleep(1)!@#&			return false!@#&	end!@#&end!@#&!@#&function insane()!@#&	clear()!@#&	iword = insaneQuestion()!@#&	print(\"Score: \"..score)!@#&	print(\"\")!@#&	print(iword)!@#&	io.write(\"> \")!@#&	iinput = io.read()!@#&	if iinput == iword then!@#&		print(\"Correct!\")!@#&		isCorrect = true!@#&	elseif einput ~= eword then!@#&		print(\"Incorrect! You have lost.\")!@#&		isCorrect = false!@#&		hs = getScore()!@#&		if tonumber(score) > tonumber(hs) then!@#&			print(\"New High Score!!!\")!@#&			saveScore(score)!@#&		end!@#&			sleep(1)!@#&			return false!@#&	end!@#&end!@#&!@#&function moreInfo()!@#&	clear()!@#&	print(\"             <[[[QuickType]]]>\")!@#&	print(\"                     Info\")!@#&	print(\"\")!@#&	print(\"All you have to do is copy what comes up on the screen as fast as you can. The time you typed in the beginning was how long you have to type the word in the time between when it appears and when you have to type it.\\n\")!@#&	print(\"Easy: Not case-sensitive. Only Letters. Just copy!\")!@#&	print(\"\")!@#&	print(\"Hard: Case-sensitive. Only letters.\")!@#&	print(\"\")!@#&	print(\"Insane: Case-sensitive. Letters, numbers, symbols.\")!@#&	print(\"\")!@#&	print(\"Press any key to continue...\")!@#&	while true do!@#&		event = os.pullEvent()!@#&		if event == \"key\" then!@#&			parallel.waitForAll(unosleep, hi)!@#&			start()!@#&		end!@#&	end!@#&end!@#&!@#&function unosleep()!@#&	sleep(0.5)!@#&end!@#&	!@#&function hi()!@#&	print(\"\")!@#&	print(\"                       ...\")!@#&end!@#&!@#&function start()!@#&	score = 0!@#&	gtime = htime!@#&	hs = getScore()!@#&	repeat	!@#&		clear()!@#&		print(\"             <[[[QuickType]]]>     High Score: \"..hs)!@#&		print(\"           Choose your Gamemode:\")!@#&		print(\"\")!@#&		print(\"                Easy (e)\")!@#&		print(\"                Hard (h)\")!@#&		print(\"               Insane (i)\")!@#&		print(\"              More Info (m)\")!@#&		print(\"                Exit (ex)\")!@#&		print(\"\")!@#&		io.write(\"                > \")!@#&		gamemode = string.lower(io.read())!@#&		!@#&		if gamemode == \"e\" then!@#&			gtype = \"easy\"!@#&		!@#&		elseif gamemode == \"h\" then!@#&			gtype = \"hard\"!@#&			!@#&		elseif gamemode == \"i\" then!@#&			gtype = \"insane\"!@#&			!@#&		elseif gamemode == \"ex\" then!@#&			print(\"Goodbye!\")!@#&			sleep(2)!@#&			clear()!@#&			error()!@#&			!@#&		elseif gamemode == \"m\" then!@#&			moreInfo()!@#&			!@#&		else!@#&			print(\"Invalid Answer\")!@#&			sleep(1)!@#&		end!@#&	until gtype ~= nil!@#&	clear()!@#&	print(\"Are you ready? (y/n)\")!@#&	io.write(\"> \")!@#&	local input = string.lower(io.read())!@#&	if input == \"y\" then!@#&		clear()!@#&		if gtype == \"easy\" then !@#&			geasy()!@#&			start()!@#&		elseif gtype == \"hard\" then !@#&			ghard() !@#&			start()!@#&		elseif gtype == \"insane\" then !@#&			ginsane()!@#&			start()!@#&		else!@#&			print(\"An Unknown Error Occurred...\")!@#&			sleep(2)!@#&			error()!@#&		end!@#&	else!@#&		start()!@#&	end!@#&end!@#&!@#&function geasy()!@#&	x = parallel.waitForAny(gsleep, easy)!@#&	if x == 2 then!@#&		if isCorrect == false then!@#&			start()!@#&		else!@#&			score = score + 1!@#&			gtime = gtime - 0.2!@#&			sleep(1)!@#&			geasy()!@#&		end!@#&	end!@#&	if x == 1 then!@#&		print(\"\\nTime is up! You lose!\")!@#&		if score > hs then!@#&			print(\"New High Score!\")!@#&			saveScore(score)!@#&		end!@#&		sleep(2)!@#&		return \"HI\"!@#&	end!@#&end!@#&!@#&function ghard()!@#&	x = parallel.waitForAny(hard, gsleep)!@#&	if x == 1 then!@#&		if isCorrect == false then!@#&			start()!@#&		else!@#&			score = score + 1!@#&			gtime = gtime - 0.2!@#&			sleep(1)!@#&			geasy()!@#&		end!@#&	end!@#&	if x == 2 then!@#&		print(\"\\nTime is up! You lose!\")!@#&		if score > hs then!@#&			print(\"New High Score!\")!@#&			saveScore(score)!@#&		end!@#&		sleep(2)!@#&		return \"HI\"!@#&	end!@#&end!@#&!@#&function ginsane()!@#&	x = parallel.waitForAny(insane, gsleep)!@#&	if x == 1 then!@#&		if isCorrect == false then!@#&			start()!@#&		else!@#&			score = score + 1!@#&			gtime = gtime - 0.2!@#&			sleep(1)!@#&			geasy()!@#&		end	end!@#&	if x == 2 then!@#&		print(\"\\nTime is up! You lose!\")!@#&		if score > hs then!@#&			print(\"New High Score!\")!@#&			saveScore(score)!@#&		end!@#&		sleep(2)!@#&		return \"HI\"!@#&	end!@#&end!@#&!@#&print(\"Getting highscore...\")!@#&hs = getScore()!@#&function timew()!@#&	io.write(\"Enter time > \")!@#&	htime = tonumber(io.read())!@#&	if htime == nil then!@#&		print(\"Must be a number\")!@#&		timew()!@#&	elseif htime < 0 then!@#&		print(\"Must be greater than 0\")!@#&		timew()!@#&	elseif htime > 10 then!@#&		print(\"Must be less than or equal to 10\")!@#&		timew()!@#&	else!@#&		gtime = htime!@#&	end!@#&end!@#&timew()    !@#&print(\"Initializing...\")!@#&sleep(0.82946)!@#&clear()!@#&sleep(1)!@#&if term.isColor() then!@#&	paintutils.drawImage(img, 19, 4)!@#&	term.setCursorPos(11, 13)!@#&	term.setBackgroundColor(colors.black)!@#&	write(\"UseTheForce Productions Presents\")!@#&else!@#&	term.setCursorPos(11, 10)!@#&	write(\"UseTheForce Productions Presents\")!@#&end!@#&sleep(3)!@#&term.setBackgroundColor(colors.black)!@#&clear()!@#&start()",["bbtetris.ini"]="NoIntro = !@#&NoMonitor = !@#&NoMusic = !@#&DefaultMonitorSide = !@#&DefaultSpeed = !@#&DefaultLevel = !@#&DefaultMode = ",["boDoor"]="22  22!@#&22  22!@#&666666!@#&6e66e6!@#&666666!@#&6aaaa6!@#&606606!@#&6aaaa6",["fileserver"]="local tArgs = {...}!@#&local window = 0!@#&local version = \"0.5\"!@#&running = true!@#&requests = {\"yes\",\"no\",\"maybe\",\"so\",\"this is a test message\",\"test\"}!@#&!@#&function clear()!@#&	term.setBackgroundColor(colors.black)!@#&	term.clear()!@#&	term.setCursorPos(1,1)!@#&end!@#&!@#&function title()!@#&	term.setCursorPos(1,1)!@#&	local x,y = term.getSize()!@#&	print(\"File Cloud Server  v\"..version..\"   Total: \"..addSpaces(#requests,4)..\"   \"..fs.getFreeSpace(\"fileServer\")..\" Spots left\")!@#&	for derp = 1,x,1 do!@#&		write(\"-\")!@#&	end!@#&end!@#&!@#&function addSpaces(thing,number)!@#&	temp = tostring(thing)!@#&	for place=1,number-string.len(temp),1 do!@#&		temp = temp..\" \"!@#&	end!@#&	return(temp)!@#&end!@#&!@#&function openPort()!@#&	for _ ,m in ipairs(rs.getSides()) do !@#&		if peripheral.isPresent(m) and peripheral.getType(m)==\"modem\" then !@#&			rednet.open(m)!@#&			return true!@#&		end !@#&	end!@#&	return false!@#&end!@#&!@#&function showRequests()!@#&	local x,y = term.getSize()!@#&	if(#requests>y-2)then!@#&		window = #requests-y+2!@#&	else!@#&		window = 0!@#&	end!@#&	for i=1,#requests,1 do!@#&		term.setCursorPos(1,2-window+i)!@#&		write(addSpaces(i,4)..\"|\"..requests[i])!@#&	end!@#&	term.setCursorPos(15,1)!@#&	title()!@#&end!@#&!@#&function showPage()!@#&	clear()!@#&	title()!@#&	if(#tArgs==0)then!@#&		showRequests()!@#&	elseif(tArgs[1]==\"-g\")then!@#&		print(\"Server Running...\")!@#&	else!@#&		clear()!@#&		term.setTextColor(colors.red)!@#&		print(\"Incorrect syntax     fileserver <-g>\")!@#&		running = false!@#&		os.startTimer(.1)!@#&	end!@#&end!@#&!@#&function parcemessage(message,id)!@#&	count = 1!@#&	local prams = {}!@#&	for token in string.gmatch(message, \"[^%s]+\") do!@#&	   prams[count]=token!@#&	   count = count+1!@#&	end!@#&	if(#prams>2)then!@#&		local temp = \"\"!@#&		for i=4,#prams,1 do!@#&			temp = temp+prams[i]!@#&		end!@#&		prams[4] = temp!@#&	end!@#&	!@#&	if(prams[1]==\"addFile\")then!@#&		if(fs.exists(prams[3]==false))then!@#&			local open=fs.open(\"fileServer/files/\"..prams[3] , \"w\")!@#&			open.writeLine(prams[2])!@#&			open.close()!@#&			open.writeLine(prams[4])!@#&			rednet.send(id,true)!@#&			requests[#requests+1] = prams[2]..\" add file \"..prams[3]!@#&		else!@#&			rednet.send(id,false)!@#&		end!@#&	elseif(prams[1]==\"retrieveFile\")then!@#&		--local open=fs.open(\"fileServer/files/\"..prams[2] , \"r\")!@#&		for line in io.lines(\"fileServer/files/\"..prams[2]) do !@#&			program = program+line!@#&		end !@#&		requests[#requests+1] = prams[2]..\" downloaded file \"..prams[3]!@#&		rednet.send(id,program)!@#&	elseif(prams[1]==\"getFiles\")then!@#&		local files = {}!@#&		for _,file in ipairs( \"fileServer/files\" ) do!@#&			local open=fs.open(\"fileServer/files/\"..file , \"r\")!@#&			author = open.readLine()!@#&			open.close()!@#&			files[#files+1] = author..\"-\"..file!@#&		end!@#&		requests[#requests+1] = prams[2]..\" requested files\"!@#&		rednet.send(id,textutils.serialize(files))!@#&	end!@#&end!@#&	!@#&if(openPort()==false)then!@#&	clear()!@#&	term.setTextColor(colors.red)!@#&	print(\"No modem found\")!@#&	running = false!@#&	os.startTimer(.1)!@#&end!@#&if(fs.exists(\"fileServer\")==false)then!@#&	fs.makeDir(\"fileServer\")!@#&	local open = fs.open(\"fileServer/files\" , \"w\")!@#&	open.close()!@#&end!@#&while running do!@#&	showPage()!@#&	requests[#requests+1] = \"test\"!@#&	os.startTimer(1)!@#&	local Event,clientID,message,distance = os.pullEvent()!@#&	if(Event==\"rednet_message\")then!@#&		parcemessage(message,clientID)!@#&	end!@#&end",["games"]={["FlappyBird"]="/SpeedOS/Applications/GameBox/flappybird!@#&23,66!@#&FlappyBird!@#&    #  #  !@#& @     #  !@#&    #     !@#&    #     !@#&    #  #  ",["FishSimulator"]="/SpeedOS/Applications/GameBox/fishsimulator!@#&34,31!@#&Fishing   !@#& .......  !@#& .(0<...  !@#& .#.....  !@#& .#.>0>.  !@#& #......  ",["Tetris"]="/SpeedOS/Applications/GameBox/bbtetris!@#&1,24!@#&Tetris    !@#& .....##  !@#& .#....#  !@#& .##...#  !@#& .......  !@#& .#####.  ",["tron"]="/SpeedOS/Applications/GameBox/tron!@#&34,10!@#&Tron      !@#&    ####> !@#&    #     !@#&##### ####!@#&      #   !@#&   <###   ",["hangman"]="/SpeedOS/Applications/GameBox/hangman!@#&23,17!@#&HangMan   !@#&-----     !@#&|   |     !@#&|   o     !@#&|  /|\\    !@#&|  / \\    ",["NothingGame"]="/SpeedOS/Applications/GameBox/nothing!@#&1,73!@#&Nothing   !@#&          !@#&   753    !@#&----------!@#& seconds  !@#&          ",["2048"]="/SpeedOS/Applications/GameBox/2048!@#&12,52!@#&2048      !@#& +-+-+-+  !@#& |2| | |  !@#& +-+-+-+  !@#& | |4|2|  !@#& +-+-+-+  ",["HighOrLow"]="/SpeedOS/Applications/GameBox/highorlow!@#&34,45!@#&HighOrLow !@#&  V  V    !@#&  1  10   !@#&          !@#&   WON!   !@#&  2% 8%   ",["FNAF"]="/SpeedOS/Applications/GameBox/fnaf!@#&12,66!@#&FNAF      !@#&          !@#&###    +-+!@#&# # @# | |!@#&# # ## +-+!@#&# #       ",["Battleship"]="/SpeedOS/Applications/GameBox/battleship!@#&34,52!@#&Battleship!@#& +-----+  !@#& |.ooH.|  !@#& |m.m..|  !@#& |...SS|  !@#& +-----+  ",["Othello"]="/SpeedOS/Applications/GameBox/othello!@#&23,31!@#&Othello   !@#& .......  !@#& .000o..  !@#& .00oo0.  !@#& ..oo0..  !@#& ..00...  ",["blackjack"]="/SpeedOS/Applications/GameBox/blackjack!@#&1,3!@#&BlackJack !@#&   ---    !@#&  |###|   !@#&  |###|   !@#&  |###|   !@#&   ---    ",["Simon"]="/SpeedOS/Applications/GameBox/simonsays!@#&1,38!@#&Simon Says!@#& ###|###  !@#& ###|###  !@#& ---+---  !@#& ###|###  !@#& ###|###  ",["GuessChislo"]="/SpeedOS/Applications/GameBox/chislo!@#&12,73!@#&Number    !@#&          !@#& 1 2 3 4  !@#&----------!@#&Just think!@#&          ",["blocks"]="/SpeedOS/Applications/GameBox/drag!@#&12,17!@#&Blocks    !@#&     @@   !@#& ### @@   !@#& ### @@   !@#& ###  HH  !@#& ###  HH  ",["CookieClicker"]="/SpeedOS/Applications/GameBox/cookieclicker!@#&12,31!@#&Clicker   !@#& ...##..  !@#& ..#oo#.  !@#& .#ooo#.  !@#& ..#o#..  !@#& ...#...  ",["GameOfLife"]="/SpeedOS/Applications/GameBox/gameoflife!@#&1,59!@#&GameOfLife!@#& LLLLLLL  !@#& L#LLL#L  !@#& L#LLL#L  !@#& L###L#L  !@#& LLLLLLL  ",["breakout"]="/SpeedOS/Applications/GameBox/blockbreaker!@#&12,10!@#&BreakOut  !@#&##########!@#&###   ####!@#&##  o   ##!@#&          !@#&    ---   ",["LaserBlast"]="/SpeedOS/Applications/GameBox/laserblast!@#&23,38!@#&Blaster   !@#& .O..|..  !@#& ..|....  !@#& |....O.  !@#& .@@@...  !@#& .......  ",["Lightspeed"]="/SpeedOS/Applications/GameBox/maze3d!@#&1,66!@#&Maze3D    !@#&          !@#&  IDK     !@#&          !@#&##    #C  !@#&#0 >> ##  ",["pong"]="/SpeedOS/Applications/GameBox/pong!@#&1,10!@#&PONG      !@#&|   |     !@#&| O       !@#&|   |   | !@#&        | !@#&    |   | ",["tictactoe"]="/SpeedOS/Applications/GameBox/tictactoe!@#&12,3!@#&TicTacToe !@#&  |x|o    !@#& -+-+-    !@#& x|o|     !@#& -+-+-    !@#& o| |x    ",["toy"]="/SpeedOS/Applications/GameBox/toy!@#&23,59 !@#&Toy       !@#&          !@#& ###      !@#&   #@@    !@#& ##       !@#& #        ",["Chess"]="/SpeedOS/Applications/GameBox/chess!@#&12,24!@#&Chess     !@#& o#o#o#o  !@#& #o#o#o#  !@#& o#o#o#o  !@#& #o#o#o#  !@#& o#o#o#o  ",["adventure"]="adventure!@#&34,17!@#&Adventure !@#&    /.|   !@#& /\\///    !@#& \\ \\/     !@#& /\\ \\     !@#& \\/--     ",["Escape"]="/SpeedOS/Applications/GameBox/escape!@#&23,73!@#&Escape!   !@#&          !@#&  @    <  !@#&          !@#&  ^       !@#&          ",["QuickType"]="/SpeedOS/Applications/GameBox/quicktype!@#&12,38!@#&Quick Type!@#& .......  !@#& .UVGX1.  !@#& .-----.  !@#& .......  !@#& #######  ",["redirection"]="/SpeedOS/Applications/GameBox/redirection!@#&12,59!@#&Redirect  !@#&     #X#  !@#& ##### #  !@#& # >   #  !@#& # #####  !@#& #^#      ",["worm"]="worm!@#&23,10!@#&Worm      !@#&  % ###   !@#&      #   !@#&  #####   !@#&  #    %  !@#&  #       ",["NanoMaze"]="/SpeedOS/Applications/GameBox/nanomaze!@#&34,24!@#&NanoMaze  !@#& #######  !@#& ......#  !@#& #..####  !@#& #.....#  !@#& #####.#  ",["connect4"]="/SpeedOS/Applications/GameBox/connectfour!@#&-10,17!@#&Connect 4 !@#&     x    !@#&    xox   !@#&   xxoo   !@#&  xoooxo  !@#&          ",["ColumnDrop"]="/SpeedOS/Applications/GameBox/column!@#&12,45!@#&Columns   !@#& #..@..#  !@#& #..0..#  !@#& #..#..#  !@#& #.....#  !@#& #######  ",["Lasers"]="/SpeedOS/Applications/GameBox/lasers!@#&34,59 !@#&Lasers    !@#&          !@#&000    0  !@#& |-----0  !@#& |     0  !@#& |        ",["CCSand"]="/SpeedOS/Applications/GameBox/ccsand!@#&1,52!@#&CCSand    !@#& .......  !@#& ....oo.  !@#& ..o....  !@#& .####..  !@#& .#TT#..  ",["mastermind"]="/SpeedOS/Applications/GameBox/mastermind!@#&1,17!@#&MasterMind!@#& ooo ooo  !@#& ooo ooo  !@#& x*@ ooo  !@#& x0@ ooo  !@#& x&* ooo  ",["SnakeMaze"]="/SpeedOS/Applications/GameBox/snakemaze!@#&23,45!@#&SnakeMaze !@#& .^.#..0  !@#& .|.#...  !@#& .|.###.  !@#& .^.....  !@#& ...0...  ",["slots"]="/SpeedOS/Applications/GameBox/slotmachine!@#&34,3!@#&Slots     !@#& _____    !@#&|*|+|&|   !@#&|+|&|%| ()!@#&|&|%|@|// !@#& -----//  ",["Jumping"]="/SpeedOS/Applications/GameBox/whackapig!@#&23,52!@#&WhackAPig !@#& +--+--+  !@#& |00|  |  !@#& +--+--+  !@#& |00|00|  !@#& +--+--+  ",["RatTrap"]="/SpeedOS/Applications/GameBox/rattrap!@#&34,38!@#&Rat Trap  !@#& ..&...&  !@#& .+---+.  !@#& &|##&|.  !@#& .+---+.  !@#& .&..&..  ",["GoldRunner"]="/SpeedOS/Applications/GameBox/goldrunner!@#&23,24!@#&GoldRunner!@#& ###      !@#&   # $    !@#& H # ---  !@#& H #      !@#& H   &    ",["lighs"]="/SpeedOS/Applications/GameBox/lights!@#&23,3!@#&Lights    !@#& ##.00.## !@#& ##.00.## !@#& ooooooo  !@#&          !@#&          ",["Flappy2"]="/SpeedOS/Applications/GameBox/flappy2!@#&34,66!@#&FlappyPix !@#&    #  #  !@#& @     #  !@#&    #     !@#&    #     !@#&    #  #  ",["MineSweep"]="/SpeedOS/Applications/GameBox/minesweep!@#&1,31!@#&MineSweep !@#& ...X...  !@#& ..X.31.  !@#& ....24.  !@#& .X.....  !@#& ....X..  ",["SkyFall"]="/SpeedOS/Applications/GameBox/skyfall!@#&1,45!@#&Sky Fall  !@#& .......  !@#& .##....  !@#& .##....  !@#& ....&.#  !@#& ..#.#.#  ",},["GoldRunner"]="term.setTextColor(colors.white)!@#&term.setBackgroundColor(colors.black)!@#&!@#&w,h = term.getSize()!@#&!@#&running = true!@#&started = false!@#&nextLevel = false!@#&!@#&inLevelSelect = false!@#&inLevelEditor = false!@#&local levelEditName = nil!@#&local hexnums = { [10] = \"a\", [11] = \"b\", [12] = \"c\", [13] = \"d\", [14] = \"e\" , [15] = \"f\" }!@#&!@#&titleLoaded = false!@#&local menSel = \"none\"!@#&local titleOptions = { \"New Game\", \"Select Level\", \"Create Level\", \"Quit\" }!@#&local inGameOptions = { \"Restart\", \"Edit Level\", \"Back to Title\", \"Quit\" }!@#&local levelEditOptions = { \"Save\", \"Play Level\", \"Save and Exit\", \"Discard and Exit\" }!@#&local menIndex = 1!@#&!@#&local maxnamelen = 14!@#&!@#&local drawOffsetX = 1!@#&local drawOffsetY = 0!@#&!@#&local map = {}!@#&local goldMap = {}!@#&local blockTimers = {}!@#&local blockIntv = 5!@#&!@#&local monks = {}!@#&local monkTimer = -1!@#&local monkSpawnIntv = 3!@#&local monkTrapIntv = blockIntv/2!@#&!@#&local goldCount = 0!@#&local maxGoldCount = 0!@#&local playerLives = 3!@#&local playerScore = 0!@#&local plspawnX = 0!@#&local plspawnY = 0!@#&!@#&local plX = 0!@#&local plY = 0!@#&local pfalling = false!@#&local moveTimer = -1!@#&local shootTimer = -1!@#&local spawnTimer = -1!@#&local moveIntv = 0.15!@#&!@#&local exX = 0!@#&local exY = 0!@#&!@#&local levelList = {}!@#&local currentLevel = 1!@#&local levelLot = 1!@#&!@#&local titleLevel = {!@#&	\"                                                 \";!@#&	\"                                  dddddddddddc   \";!@#&	\"                                 4           c   \";!@#&	\"      4                                    4 c   \";!@#&	\"  bbbbbbc                               bcbbbb   \";!@#&	\"  b 4 b c                                c       \";!@#&	\"  bbbbb c  4                  dd 0     4 c 4     \";!@#&	\"        bbcb                    bbb     bbbbc    \";!@#&	\"          c                                 c    \";!@#&	\"          c                             ddd c  eb\";!@#&	\"     dddddc                          bcb   cbbbbb\";!@#&	\"    c                                 c    c bbbb\";!@#&	\"b4  c                                4c     bb44b\";!@#&	\"bbb c    4  e                   bbbcbbbbbbbbbbbbb\";!@#&	\"bbbbbbbbbbbbbbc           4        cbbbbb 4  bbbb\";!@#&	\"bbbbbbfff44fbbc 4     cbbbbbbb     cbbbbbbb bbbbb\";!@#&	\"bbbbffffbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb 4 bbbbbbb\";!@#&	\"bbbffbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb5  bbbbbbbbb\";!@#&}!@#&!@#&local function parseValue(x, y, lchar)!@#&if tonumber(lchar, 16) then!@#&	lchar = math.pow(2, tonumber(lchar,16))!@#&	!@#&	if lchar == colours.blue then!@#&	  map[y][x] = 0!@#&	elseif lchar == colours.brown then!@#&	  map[y][x] = 'H'!@#&	elseif lchar == colours.yellow then!@#&	  goldMap[y][x] = 1!@#&	  goldCount = goldCount + 1!@#&	elseif lchar == colours.orange then!@#&	  map[y][x] = 'V'!@#&	elseif lchar == colours.green then!@#&	  map[y][x] = '-'!@#&	elseif lchar == colours.lightGrey then!@#&	  map[y][x] = 'h'!@#&	elseif lchar == colours.grey then!@#&	  map[y][x] = '#'!@#&	elseif lchar == colours.white then!@#&	  plX = x!@#&	  plspawnX = x!@#&	  plY = y!@#&	  plspawnY = y!@#&	elseif lchar == colours.lime then!@#&	  exX = x!@#&	  exY = y!@#&	elseif lchar == colours.red then!@#&	  table.insert(monks, {!@#&		--X and Y, clear enough!@#&		x = x, y = y;!@#&		--Where they spawn when they die!@#&		spawnX = x, spawnY = y;!@#&		-- Any gold they're carring- it's a 1 in 5!@#&		gold = false;!@#&		-- Whether or not they're falling!@#&		falling = false;!@#&		-- Timer if they're dead to respawn!@#&		dead = nil;!@#&		--Whether or not the monk has just spawned!@#&		justSpawned = true;!@#&		--Whether or not the monk has just escaped!@#&		justEscaped = false;!@#&		-- Current aim- it's \"up\", \"down\", \"across\" or \"none\"!@#&		behaviour = \"none\";!@#&		-- The desired x position to travel to, when one is necessary.!@#&		desX = nil;!@#&		-- The escape timer!@#&		trapped = nil;!@#&	  })!@#&	end!@#&  end!@#&end!@#&!@#&local function loadMap(_sPath)!@#&  if not fs.exists(_sPath) then return false end!@#&  map = {}!@#&  goldMap = {}!@#&  monks = {}!@#&  goldCount = 0!@#&    !@#&  local file = fs.open(_sPath, \"r\")!@#&  local line = file:readLine()!@#&  while line do!@#&    goldMap[#map+1] = {}!@#&    map[#map+1] = {}!@#&    for i=1,math.min(#line,49) do!@#&      local lchar = string.sub(line,i,i)!@#&      parseValue(i, #map, lchar)!@#&    end!@#&    if #map == 18 then break end!@#&    line = file:readLine()!@#&  end!@#&  file:close()!@#&  maxGoldCount = goldCount!@#&  titleLoaded = false!@#&  return true!@#&end!@#&!@#&--When something moves or something needs to be drawn, we!@#&--just change the appropriate tile with this method.!@#&local function updateMap(x,y)!@#&	term.setCursorPos(x + drawOffsetX, y + drawOffsetY)!@#&	term.setBackgroundColour(colours.black)!@#&    if plX == x and plY == y and map[y][x] ~= 0 then!@#&      term.setTextColour(colours.white)!@#&	  if map[y][x] == 1 then term.setBackgroundColour(colours.lightBlue)!@#&	  elseif map[y][x] == \"V\" then term.setBackgroundColour(colours.blue) end!@#&      term.write(\"&\")!@#&    elseif map[y][x] == 'H' then!@#&      term.setTextColour(colours.brown)!@#&      term.write(\"H\")!@#&	--Level Editor stuff!@#&	elseif map[y][x] == 'h' and (goldCount == 0 or inLevelEditor) then!@#&	  if inLevelEditor then term.setTextColour(colours.lightGrey)!@#&	  else term.setTextColour(colours.brown) end!@#&	  term.write(\"H\")!@#&	elseif map[y][x] == '&' and inLevelEditor then!@#&	  term.setTextColour(colours.pink)!@#&	  term.write('&')!@#&	elseif map[y][x] == 'V' then!@#&	  term.setBackgroundColour(colours.blue)!@#&	  if inLevelEditor then!@#&	    term.setTextColour(colours.orange)!@#&		term.write(\"V\")!@#&	  else!@#&	    term.write(\" \")!@#&	  end!@#&    elseif map[y][x] == '-' then!@#&      term.setTextColour(colours.brown)!@#&      term.write(map[y][x])!@#&    elseif map[y][x] == '#' then!@#&      term.setBackgroundColour(colours.grey)!@#&      term.write(\" \")!@#&    elseif type(map[y][x]) == \"number\" then!@#&      local uchar = ' '!@#&	  if map[y][x] == 3 then!@#&		term.setBackgroundColour(colours.lightBlue)!@#&      elseif map[y][x] == 2 and goldMap[y][x] == 1 then!@#&        term.setTextColour(colours.yellow)!@#&        uchar = '$'!@#&      elseif map[y][x] == 1 then!@#&        term.setBackgroundColour(colours.lightBlue)!@#&      elseif map[y][x] == 0 then!@#&        term.setBackgroundColour(colours.blue)!@#&      end!@#&      term.write(uchar)!@#&    elseif goldMap[y][x] == 1 then!@#&      term.setTextColour(colours.yellow)!@#&	  term.write(\"$\")!@#&    elseif exX == x and exY == y and (goldCount == 0 or inLevelEditor) then!@#&      term.setTextColour(colours.lime)!@#&      term.write(\"@\")!@#&    else!@#&      term.write(\" \")!@#&    end!@#&end!@#&!@#&--It's silly to iterate through all monks when drawing tiles, so!@#&--we do it separately.!@#&local function drawMonk(monk)!@#&	term.setCursorPos(monk.x + drawOffsetX, monk.y + drawOffsetY)!@#&	if monk.justSpawned then term.setTextColour(colours.pink)!@#&	else term.setTextColour(colours.red) end!@#&	if map[monk.y][monk.x] == 1 then term.setBackgroundColour(colours.lightBlue)!@#&	elseif map[monk.y][monk.x] == \"V\" then term.setBackgroundColour(colours.blue)!@#&	else term.setBackgroundColour(colours.black) end!@#&	term.write(\"&\")!@#&end!@#&!@#&--Draws the map for the first time. It barely changes, so we really!@#&--only call this the once.!@#&local function drawMap()!@#&  term.setBackgroundColour(colours.black)!@#&  term.clear()!@#&  for y=1,#map do!@#&    for x=1,49 do!@#&	  updateMap(x,y)!@#&    end!@#&  end!@#&  for _,monk in pairs(monks) do drawMonk(monk)end!@#&end!@#&!@#&--When all coins have been collected, we add in invisble ladders and!@#&--the end game portal.!@#&local function drawEndgameMap()!@#&  for y=1,#map do!@#&    for x=1,49 do!@#&	  if map[y][x] == 'h' or (exX == x and exY == y) then!@#&		updateMap(x,y)!@#&	  end!@#&    end!@#&  end!@#&end!@#&!@#&--Sets the map back to defaults, so we can start afresh!@#&local function resetMap()!@#&	goldCount = maxGoldCount!@#&	for i=1,#goldMap do!@#&		for j=1,49 do!@#&			if goldMap[i][j] == 0 then goldMap[i][j] = 1 end!@#&		end!@#&	end!@#&	for _,monk in pairs(monks) do!@#&		monk.justSpawned = true!@#&		monk.dead = nil!@#&		monk.trapped = nil!@#&		monk.justEscaped = false!@#&		monk.falling = false!@#&		monk.behaviour = \"none\"!@#&		monk.x = monk.spawnX!@#&		monk.y = monk.spawnY!@#&	end!@#&	!@#&	for _,timer in pairs(blockTimers) do!@#&		map[timer.y][timer.x] = 0!@#&	end!@#&	blockTimers = {}!@#&	plX = plspawnX!@#&	plY = plspawnY!@#&	!@#&	moveTimer = -1!@#&	shootTimer = -1!@#&	spawnTimer = -1!@#&	monkTimer = -1!@#&	pfalling = false!@#&end!@#&!@#&--Draws the HUD. This also rarely changes, so we update it when something happens.!@#&local function drawHUD()!@#&  term.setCursorPos(2,19)!@#&  term.setBackgroundColour(colours.black)!@#&  term.clearLine()!@#&  term.setTextColour(colours.blue)!@#&  term.write(\"Score: \")!@#&  term.setTextColour(colours.yellow)!@#&  term.write(string.rep(\"0\", 5-math.floor(math.log10(playerScore + 1)))!@#&    ..playerScore)!@#&  term.setTextColour(colours.yellow)!@#&  term.setCursorPos(25 - #levelList[currentLevel]/2, 19)!@#&  term.write(levelList[currentLevel])!@#&  local lstr = \"Men: \"!@#&  term.setCursorPos(50 - #lstr - math.floor(math.log10(playerLives)), 19)!@#&  term.setTextColour(colours.blue)!@#&  term.write(lstr)!@#&  term.setTextColour(colours.yellow)!@#&  term.write(playerLives..\"\")!@#&end!@#&!@#&--Draws the list of levels known, with respect to screen!@#&--real estate!@#&local function drawLevelList()!@#&	local minLev = ((levelLot-1) * 10 + 1)!@#&	local maxLev = minLev + math.min(10, #levelList - (levelLot-1) * 10) - 1!@#&	!@#&	term.setCursorPos(7, 2)!@#&	term.setBackgroundColour(colours.black)!@#&	term.clearLine()!@#&	for j = 1,49 do updateMap(j,2) end!@#&	!@#&	term.setBackgroundColour(colours.black)!@#&	term.setTextColour(colours.white)!@#&	term.setCursorPos(7, 2)!@#&	local msg = \"Levels \"..minLev..\" to \"..maxLev..\" of \"..#levelList!@#&	term.write(msg)!@#&	!@#&	term.setTextColour(colours.yellow)!@#&	term.setCursorPos(4, 2)!@#&	if levelLot > 1 then term.write(\"<-\")!@#&	else term.write(\"  \") end !@#&	!@#&	term.setCursorPos(8 + #msg, 2)!@#&	if maxLev < #levelList then term.write(\"->\")!@#&	else term.write(\" \") end!@#&	!@#&	for i = 1,10 do!@#&		term.setCursorPos(1, 3+i)!@#&		for j = 1,49 do updateMap(j,3+i) end!@#&		term.setTextColour(colours.white)!@#&		term.setBackgroundColour(colours.black)!@#&		term.setCursorPos(17, 3+i)!@#&		if i + (levelLot-1)*10 - 1 < maxLev then!@#&			term.write(levelList[10 * (levelLot-1) + i])!@#&		end!@#&	end!@#&end!@#&!@#&--Loads up and draws up the title screen, for a nice!@#&--intro to Gold Runner!@#&local function loadTitleScreen()!@#&  map = {}!@#&  goldMap = {}!@#&  monks = {}!@#&  goldCount = 0!@#&  for i=1,#titleLevel do!@#&	local line = titleLevel[i]!@#&    goldMap[#map+1] = {}!@#&    map[#map+1] = {}!@#&    for i=1,math.min(#line,49) do!@#&      local lchar = string.sub(line,i,i)!@#&      parseValue(i, #map, lchar)!@#&    end!@#&    if #map == 18 then break end!@#&  end!@#&  maxGoldCount = goldCount!@#&  !@#&  drawMap()!@#&  term.setCursorPos(1,19)!@#&  term.setBackgroundColour(colours.blue)!@#&  term.clearLine()!@#&  !@#&  menIndex = 1!@#&  titleLoaded = true!@#&end!@#&!@#&--Opens an in-game menu to display a series of options.!@#&local function inGameMenu(menuList)!@#&	menIndex = 1!@#&	!@#&	local squareTop,squareBottom = 4,6 + #menuList * 2!@#&	local squareSize = 0!@#&	for i=1,#menuList do squareSize = math.max(squareSize, #menuList[i] + 6) end!@#&	!@#&	for y=squareTop,squareBottom do!@#&		term.setCursorPos(w/2 - squareSize/2, y)!@#&		term.setBackgroundColour(colours.lightBlue)!@#&		term.write(string.rep(\" \", squareSize))!@#&		!@#&		if y ~= squareTop and y ~= squareBottom then!@#&			term.setCursorPos(w/2 - squareSize/2 + 1, y)!@#&			term.setBackgroundColour(colours.black)!@#&			term.write(string.rep(\" \", squareSize - 2))!@#&		end!@#&		!@#&		if y ~= squareTop and y ~= squareBottom and y % 2 == 0 then!@#&			local opt = menuList[(y - squareTop) / 2]!@#&			term.setCursorPos(w/2 - #opt/2, y)!@#&			term.setTextColour(colours.white)!@#&			term.write(opt)!@#&		end!@#&	end!@#&	!@#&	local p1 = nil!@#&	repeat!@#&		for i=1,#menuList do!@#&			term.setBackgroundColour(colours.black)!@#&			term.setTextColour(colours.yellow)!@#&			if i == menIndex then!@#&				term.setCursorPos(w/2 - squareSize/2 + 1, squareTop + i * 2)!@#&				term.write(\">\")!@#&				term.setCursorPos(w/2 + squareSize/2 - 2, squareTop + i * 2)!@#&				term.write(\"<\")!@#&			else!@#&				term.setCursorPos(w/2 - squareSize/2 + 1, squareTop + i * 2)!@#&				term.write(\" \")!@#&				term.setCursorPos(w/2 + squareSize/2 - 2, squareTop + i * 2)!@#&				term.write(\" \")!@#&			end!@#&		end!@#&		_,p1 = os.pullEvent(\"key\")!@#&		!@#&		if p1 == keys.up and menIndex > 1 then menIndex = menIndex - 1!@#&		elseif p1 == keys.down and menIndex < #menuList then menIndex = menIndex + 1 end!@#&	until p1 == keys.enter!@#&	!@#&	return menuList[menIndex]!@#&end!@#&!@#&--Checks to see if any given desired move is legal. Monks and players both use this.!@#&local function isLegalMove(initX,initY,finX,finY)!@#&	if finY < 1 or finY > #map or finX < 1 or finX > 49 then !@#&		return false !@#&	end!@#&	!@#&	if map[finY][finX] ~= 0 and map[finY][finX] ~= '#' then!@#&		--This reports 'self moves' as being illegal, but that's fine!@#&		for _,monk in pairs(monks) do!@#&			if monk.x == finX and monk.y == finY then return false end!@#&		end!@#&!@#&		if finY == initY-1 and (map[initY][initX] == \"H\" or (map[initY][initX] == \"h\" and goldCount == 0))!@#&			then return true!@#&		elseif finY == initY+1 and (map[finY][finX] == \"H\" or (map[finY][finX] == \"h\" and goldCount == 0)!@#&				or (type(map[finY][finX]) == \"number\" and map[finY][finX] > 0) or map[finY][finX] == nil or!@#&				map[finY][finX] == \"V\" or map[finY][finX] == \"-\" or (map[finY][finX] == 'h' and goldCount ~= 0)) !@#&			then return true!@#&		elseif finX == initX-1 or finX == initX+1 then !@#&			return true !@#&		end!@#&	end!@#&end!@#&!@#&--Moves the player to a given step.!@#&local function movePlayer(x,y,ignoreLegal)!@#&	if not ignoreLegal and not isLegalMove(plX,plY,x,y) then return false end!@#&	!@#&	local ox = plX!@#&	local oy = plY!@#&	plX = x!@#&	plY = y!@#&	!@#&	updateMap(ox,oy)!@#&	updateMap(x,y)!@#&	if goldMap[y][x] == 1 then!@#&		goldMap[y][x] = 0!@#&		goldCount = goldCount - 1!@#&		playerScore = playerScore + 5!@#&		if started then drawHUD() end!@#&		if (goldCount == 0) then!@#&			drawEndgameMap()!@#&		end!@#&	elseif exX == plX and exY == plY and goldCount == 0 then!@#&		started = false!@#&		nextLevel = true!@#&	end!@#&	!@#&	pfalling = (y < #map and map[y][x] ~= '-' and map[y][x] ~= 'H' and not (map[y][x] == 'h' and goldCount == 0) !@#&		and (map[y+1][x] == nil or map[y+1][x] == \"V\" or map[y+1][x] == 2 or map[y+1][x] == '-'))!@#&	if (y < #map and map[y+1][x] == 'h' and goldCount ~= 0) then pfalling = true end!@#&	for _,monk in pairs(monks) do!@#&		if monk.x == plX and monk.y == plY + 1 then pfalling = false break end!@#&	end!@#&	!@#&	return true!@#&end!@#&!@#&local function updateMonks()!@#&	for _,monk in pairs(monks) do!@#&		--Absolute first step- if he's trapped or dead, he's going nowhere!@#&		if monk.trapped or monk.dead then!@#&		--If he's just spawned he takes a second to orient himself!@#&		elseif monk.justSpawned then!@#&			monk.justSpawned = false!@#&			--We evaluate their falling behaviour here (as freed monks CAN stand on air)!@#&			monk.falling = (monk.y < #map and map[monk.y][monk.x] ~= '-' and map[monk.y][monk.x] ~= \"H\" and not!@#&					(map[monk.y][monk.x] == 'h' and goldCount == 0) and (map[monk.y+1][monk.x] == nil or map[monk.y+1][monk.x] == \"V\" or!@#&					map[monk.y+1][monk.x] == 2 or map[monk.y+1][monk.x] == '-') and type(map[monk.y][monk.x] ~= \"number\"))!@#&			for _,omonk in pairs(monks) do!@#&				if omonk.x == monk.x and omonk.y == monk.y + 1 then monk.falling = false break end!@#&			end!@#&			if monk.x == plX and monk.y == plY + 1 then monk.falling = false end!@#&		--Then we consider if he's just gotten out of a hole!@#&		elseif monk.justEscaped then!@#&			monk.justEscaped = false!@#&			--He tries the player side first!@#&			local playerSide = (plX-monk.x) / math.abs(plX-monk.x)!@#&			if isLegalMove(monk.x, monk.y, monk.x + playerSide, monk.y) then!@#&				monk.x = monk.x + playerSide!@#&				updateMap(monk.x - playerSide, monk.y)!@#&			elseif isLegalMove(monk.x, monk.y, monk.x - playerSide, monk.y) then!@#&				monk.x = monk.x - playerSide!@#&				updateMap(monk.x + playerSide, monk.y)!@#&			end!@#&			drawMonk(monk)!@#&		--Then we evaluate falling!@#&		elseif monk.falling then!@#&			monk.behaviour = \"none\"!@#&			monk.y = monk.y + 1!@#&			updateMap(monk.x, monk.y-1)!@#&			drawMonk(monk)!@#&			monk.desX = nil!@#&			if type(map[monk.y][monk.x]) == \"number\" then!@#&				monk.trapped = os.startTimer(monkTrapIntv)!@#&				monk.falling = false!@#&			else!@#&				monk.falling = (monk.y < #map and map[monk.y][monk.x] ~= '-' and map[monk.y][monk.x] ~= \"H\" and not!@#&					(map[monk.y][monk.x] == 'h' and goldCount == 0) and (map[monk.y+1][monk.x] == nil or map[monk.y+1][monk.x] == \"V\" or!@#&					map[monk.y+1][monk.x] == 2 or map[monk.y+1][monk.x] == '-') and type(map[monk.y][monk.x] ~= \"number\"))!@#&				for _,omonk in pairs(monks) do!@#&					if omonk.x == monk.x and omonk.y == monk.y + 1 then monk.falling = false break end!@#&				end!@#&				if monk.x == plX and monk.y == plY + 1 then monk.falling = false end!@#&				if monk.justEscaped then monk.falling = false end!@#&			end!@#&		--If he's on his feet and not trapped, he's allowed to think about where to move!@#&		elseif monk.y == plY then!@#&			--Is the monk on the same level as the player? How lucky! They'll just walk towards him!@#&			monk.desX = plX!@#&			monk.behaviour = \"across\"!@#&		--Y difference takes precedence over X (as in the original, makes them a bit smarter)!@#&		elseif monk.y < plY then!@#&			--If they can move up, they will!@#&			if isLegalMove(monk.x,monk.y,monk.x,monk.y+1) and not monk.justEscaped then!@#&				monk.y = monk.y+1!@#&				updateMap(monk.x, monk.y-1)!@#&				drawMonk(monk)!@#&				monk.desX = nil!@#&				--A down move can lead to a fall, so we check if they're now falling.!@#&				monk.falling = (monk.y < #map and map[monk.y][monk.x] ~= '-' and map[monk.y][monk.x] ~= \"H\" and not!@#&					(map[monk.y][monk.x] == 'h' and goldCount == 0) and (map[monk.y+1][monk.x] == nil or map[monk.y+1][monk.x] == \"V\" or!@#&					map[monk.y+1][monk.x] == 2 or map[monk.y+1][monk.x] == '-') and type(map[monk.y][monk.x] ~= \"number\"))!@#&				for _,omonk in pairs(monks) do!@#&					if omonk.x == monk.x and omonk.y == monk.y + 1 then monk.falling = false break end!@#&				end!@#&				if monk.x == plX and monk.y == plY + 1 then monk.falling = false end!@#&			--Otherwise, it's off to the nearest ladder, monkey bars or perilous ledge to jump off!@#&			--assuming they haven't found one already!@#&			elseif monk.desX == nil then!@#&				if monk.behaviour ~= \"down\" then monk.desX = nil end!@#&				monk.behaviour = \"down\"!@#&				monk.desX = nil!@#&				local cmLeft = true!@#&				local cmRight = true!@#&				--We try to find the nearest by searching alternate left and right at variable distance!@#&				for i=1,math.max(monk.x - 1, 49 - monk.x) do!@#&					if monk.x-i > 0 and cmLeft then!@#&						--If a wall blocks the monks path, they can't keep going left or right!@#&						cmLeft = map[monk.y][monk.x-i] ~= 0!@#&						--But if it's all clear, they look for something to climb/jump down!@#&						if cmLeft and (map[monk.y+1][monk.x-i] == \"H\" or (map[monk.y+1][monk.x-i] == 'h' and goldCount == 0)!@#&							or map[monk.y+1][monk.x-i] == nil or map[monk.y][monk.x-i] == '-') then!@#&							monk.desX = monk.x-i!@#&							break!@#&						end!@#&					end!@#&					if monk.x+i < 50 and cmRight then!@#&						--If a wall blocks the monks path, they can't keep going left or right!@#&						cmRight = map[monk.y][monk.x+i] ~= 0!@#&						--But if it's all clear, they look for something to climb/jump down!@#&						if cmRight and (map[monk.y+1][monk.x+i] == \"H\" or (map[monk.y+1][monk.x+i] == 'h' and goldCount == 0)!@#&							or map[monk.y+1][monk.x+i] == nil or map[monk.y][monk.x+i] == '-') then!@#&							monk.desX = monk.x+i!@#&							break!@#&						end!@#&					end!@#&				end!@#&			end!@#&		elseif monk.y > plY then!@#&			if monk.behaviour ~= \"up\" then monk.desX = nil end!@#&			monk.behaviour = \"up\"!@#&			--Same deal again- try moving up first!@#&			if isLegalMove(monk.x,monk.y,monk.x,monk.y-1) then!@#&				monk.y = monk.y-1!@#&				updateMap(monk.x, monk.y+1)!@#&				drawMonk(monk)!@#&				monk.desX = nil!@#&				--You can never move up and start falling, so we don't bother to check!@#&			--Otherwise they need ladders to climb up!@#&			elseif monk.desX == nil then!@#&				monk.behaviour = \"up\"!@#&				monk.desX = nil!@#&				local cmLeft = true!@#&				local cmRight = true!@#&				--We try to find the nearest by searching alternate left and right at variable distance!@#&				for i=1,math.max(monk.x - 1, 49 - monk.x) do!@#&					if monk.x-i > 0 and cmLeft then!@#&						--If a wall blocks the monks path or a pit is in the way, they can't keep going left or right!@#&						cmLeft = map[monk.y][monk.x-i] ~= 0 and (monk.y == #map or map[monk.y+1][monk.x-i] ~= nil!@#&								or map[monk.y][monk.x-i] == '-' or map[monk.y][monk.x-i] == \"H\" or (map[monk.y][monk.x-i] == \"h\"!@#&								and goldCount == 0))!@#&						--But if it's all clear, they look for a ladder!@#&						if cmLeft and (map[monk.y][monk.x-i] == \"H\" or (map[monk.y][monk.x-i] == 'h' and goldCount == 0)) then!@#&							monk.desX = monk.x-i!@#&							break!@#&						end!@#&					end!@#&					if monk.x+i < 50 and cmRight then!@#&						cmRight = map[monk.y][monk.x+i] ~= 0 and (monk.y == #map or map[monk.y+1][monk.x+i] ~= nil!@#&								or map[monk.y][monk.x+i] == '-' or map[monk.y][monk.x+i] == \"H\" or (map[monk.y][monk.x+i] == \"h\"!@#&								and goldCount == 0))!@#&						if cmRight and (map[monk.y][monk.x+i] == \"H\" or (map[monk.y][monk.x+i] == 'h' and goldCount == 0)) then!@#&							monk.desX = monk.x+i!@#&							break!@#&						end!@#&					end!@#&				end!@#&			end!@#&		end!@#&		!@#&		if not (monk.trapped or monk.dead) then!@#&			--Has the monk decided on moving left or right? If so we try to move him!@#&			if monk.desX and not monk.falling then!@#&				local mdir = monk.desX - monk.x!@#&				local mdir = mdir / math.abs(mdir)!@#&				if isLegalMove(monk.x,monk.y,monk.x+mdir,monk.y) then!@#&					monk.x = monk.x + mdir!@#&					updateMap(monk.x - mdir, monk.y)!@#&					drawMonk(monk)!@#&				else!@#&					--This allows re-evaluations if they get stuck- not ideal but good enough!@#&					monk.desX = nil!@#&				end!@#&			end!@#&			monk.falling = (monk.y < #map and map[monk.y][monk.x] ~= '-' and map[monk.y][monk.x] ~= \"H\" and not!@#&					(map[monk.y][monk.x] == 'h' and goldCount == 0) and (map[monk.y+1][monk.x] == nil or map[monk.y+1][monk.x] == \"V\" or!@#&					map[monk.y+1][monk.x] == 2 or map[monk.y+1][monk.x] == '-') and type(map[monk.y][monk.x] ~= \"number\"))!@#&			for _,omonk in pairs(monks) do!@#&				if omonk.x == monk.x and omonk.y == monk.y + 1 then monk.falling = false break end!@#&			end!@#&			if monk.x == plX and monk.y == plY + 1 then monk.falling = false end!@#&			--We have caught and killed the player!@#&			if monk.x == plX and monk.y == plY and spawnTimer == -1 then!@#&				spawnTimer = os.startTimer(2)!@#&			end!@#&		end!@#&	end!@#&end!@#&!@#&local function updateBlockTimer(tid)!@#&	local remAt = nil!@#&	for i,v in ipairs(blockTimers) do!@#&		if v.timer == tid then!@#&			if map[v.y][v.x] == 3 then!@#&				for _,monk in pairs(monks) do!@#&					if monk.x == v.x and monk.y == v.y-1 then!@#&						map[v.y][v.x] = 0!@#&						remAt = i!@#&						break!@#&					end!@#&				end!@#&				if not remAt then!@#&					map[v.y][v.x] = 2!@#&					v.timer = os.startTimer(blockIntv)!@#&				end!@#&			elseif map[v.y][v.x] == 2 then!@#&				map[v.y][v.x] = 1!@#&				v.timer = os.startTimer(0.1)!@#&			elseif map[v.y][v.x] == 1 then!@#&				map[v.y][v.x] = 0!@#&				--If the player is caught in a block, he dies!@#&				if v.y == plY and v.x == plX then!@#&					spawnTimer = os.startTimer(2)!@#&				end!@#&				for _,monk in pairs(monks) do!@#&					if monk.x == v.x and monk.y == v.y then!@#&						monk.dead = os.startTimer(monkSpawnIntv)!@#&						--Easiest way to get them out of the way rather than evaluation!@#&						monk.x = -1!@#&						monk.y = -1!@#&						monk.trapped = nil!@#&					end!@#&				end!@#&				remAt = i!@#&			end!@#&			updateMap(v.x,v.y)!@#&			break!@#&		end!@#&	end!@#&	if remAt then table.remove(blockTimers,remAt) end!@#&end!@#&!@#&local function shootBlock(x,y)!@#&	if y <= #map and map[y][x] == 0 and (map[y-1][x] == nil !@#&			or map[y-1][x] == 2 or (map[y-1][x] == 'h' and goldCount > 0)) then!@#&		map[y][x] = 3!@#&		table.insert(blockTimers, {x = x; y = y; timer = os.startTimer(0.1);} )!@#&		updateMap(x,y)!@#&	end!@#&end!@#&!@#&local function handleEvents()!@#&	local id,p1,p2,p3 = os.pullEvent()!@#&	!@#&	if id == \"key\" then!@#&		--Menu Handling!@#&		if p1 == keys.up then!@#&			if menIndex > 1 then menIndex = menIndex - 1 end!@#&		elseif p1 == keys.down then!@#&			if inLevelSelect then !@#&				if menIndex < math.min(10, #levelList - (levelLot-1)*10) then !@#&					menIndex = menIndex + 1!@#&				end!@#&			elseif menIndex < #titleOptions then menIndex = menIndex + 1 end!@#&		elseif p1 == keys.left and inLevelSelect and levelLot > 1 then!@#&			levelLot = levelLot - 1!@#&			drawLevelList()!@#&		elseif p1 == keys.right and inLevelSelect and levelLot * 10 < #levelList then!@#&			levelLot = levelLot + 1!@#&			drawLevelList()!@#&		end!@#&	!@#&		--Game Handling!@#&		if p1 == keys.a and moveTimer == -1 and spawnTimer == -1 then!@#&			movePlayer(plX-1,plY)!@#&			moveTimer = os.startTimer(moveIntv)!@#&		elseif p1 == keys.d and moveTimer == -1 and spawnTimer == -1 then!@#&			movePlayer(plX+1,plY)!@#&			moveTimer = os.startTimer(moveIntv)!@#&		elseif p1 == keys.w and moveTimer == -1 and spawnTimer == -1 then!@#&			movePlayer(plX,plY-1)!@#&			moveTimer = os.startTimer(moveIntv)!@#&		elseif p1 == keys.s and moveTimer == -1 and spawnTimer == -1 then!@#&			movePlayer(plX,plY+1)!@#&			moveTimer = os.startTimer(moveIntv)!@#&		elseif p1 == keys.q and shootTimer == -1 and not pfalling and spawnTimer == -1 then!@#&			shootBlock(plX-1,plY+1)!@#&			shootTimer = os.startTimer(moveIntv)!@#&		elseif p1 == keys.e and shootTimer == -1 and not pfalling and spawnTimer == -1 then!@#&			shootBlock(plX+1,plY+1)!@#&			shootTimer = os.startTimer(moveIntv)!@#&		elseif p1 == keys.space and started then!@#&			started = false!@#&		elseif p1 == keys.enter then!@#&			if not started then!@#&				if inLevelSelect then!@#&					currentLevel = menIndex + (levelLot - 1) * 10!@#&					menSel = \"New Game\"!@#&				else!@#&					menSel = titleOptions[menIndex]!@#&				end!@#&			else!@#&				started = false!@#&				menIndex = 1!@#&				menSel = inGameMenu(inGameOptions)!@#&			end!@#&		end!@#&	elseif id == \"timer\" then!@#&		if p1 == shootTimer then shootTimer = -1!@#&		elseif p1 == spawnTimer then!@#&			started = false!@#&		elseif p1 == moveTimer then!@#&			if pfalling then!@#&				movePlayer(plX,plY+1)!@#&				moveTimer = os.startTimer(moveIntv)!@#&			else!@#&				moveTimer = -1!@#&			end!@#&		elseif p1 == monkTimer then!@#&			updateMonks()!@#&			monkTimer = os.startTimer(moveIntv * 2)!@#&		elseif updateBlockTimer(p1) then!@#&		else!@#&			for _,monk in pairs(monks) do!@#&				if p1 == monk.trapped then!@#&					--You can stand on a monk to force them to be killed- so we check for that!@#&					--along with being buried in tunnels, etc.!@#&					local stillTrapped = map[monk.y-1][monk.x] == 0 or (plX == monk.x and plY == monk.y-1)!@#&					for _,omonk in pairs(monks) do!@#&						if omonk.x == monk.x and omonk.y == monk.y-1 then!@#&							stillTrapped = true!@#&							break!@#&						end!@#&					end!@#&					--Perpetually trapped monks will try to excape much more quickly!@#&					if stillTrapped then!@#&						--This needs to be tweaked!@#&						monk.trapped = os.startTimer(0.75)!@#&					else!@#&						--When free, they head in your general direction, re-evaluate later!@#&						monk.y = monk.y - 1!@#&						--This is necessary to stop 'double jumping'!@#&						monk.desX = nil!@#&						monk.trapped = nil!@#&						monk.behaviour = \"none\"!@#&						monk.justEscaped = true!@#&						!@#&						updateMap(monk.x, monk.y+1)!@#&						drawMonk(monk)!@#&					end!@#&					break!@#&				elseif p1 == monk.dead then!@#&					--Same deal- you can camp spawn!@#&					local stillDead = plX == monk.spawnX and plY == monk.spawnY!@#&					for _,omonk in pairs(monks) do!@#&						if omonk.x == monk.spawnX and omonk.y == monk.spawnY then!@#&							stillDead = true!@#&							break!@#&						end!@#&					end!@#&					--They'll spawn the second you give them the chance!@#&					if stillDead then!@#&						monk.dead = os.startTimer(0.5)!@#&					else!@#&						monk.x = monk.spawnX!@#&						monk.y = monk.spawnY!@#&						monk.dead = nil!@#&						monk.justSpawned = true!@#&						monk.behaviour = \"none\"!@#&						drawMonk(monk)!@#&						break!@#&					end!@#&				end!@#&			end!@#&		end!@#&	end!@#&end!@#&!@#&--[[			Level Editor			]]--!@#&!@#&local pallette = {  { t = colours.black, b = colours.blue, s = \" \", n = \"Solid Ground\", v = 0 },!@#&				    { t = colours.orange, b = colours.blue, s = \"V\", n = \"Trap Ground\", v = \"V\" },!@#&					{ t = colours.grey, b = colours.grey, s = \" \", n = \"Cement Ground\", v = \"#\" },!@#&					{ t = colours.brown, b = colours.black, s = \"H\", n = \"Ladder\", v = \"H\" },!@#&					{ t = colours.brown, b = colours.black, s = \"-\", n = \"Monkey Bars\", v = \"-\" },!@#&					{ t = colours.white, b = colours.black, s = \"&\", n = \"Player Spawn\", v = \"player\" },!@#&					{ t = colours.red, b = colours.black, s = \"&\", n = \"Mad Monk\", v = \"&\" },!@#&					{ t = colours.yellow, b = colours.black, s = \"$\", n = \"Gold\", v = \"$\" },!@#&					{ t = colours.lightGrey, b = colours.black, s = \"H\", n = \"Hidden Ladder\", v = \"h\" },!@#&					{ t = colours.lime, b = colours.black, s = \"@\", n = \"Exit Portal\", v = \"@\" },!@#&					{ t = colours.red, b = colours.black, s = \"ERASE\", n = \"Eraser\", v = nil } }!@#&local brushType = 1!@#&!@#&local function getHexOf(colour)!@#&	if not colour or not tonumber(colour) then !@#&		return \" \" !@#&	end!@#&	local value = math.log(colour)/math.log(2)!@#&	if value > 9 then !@#&		value = hexnums[value] !@#&	end!@#&	return value!@#&end!@#&!@#&local function drawFooter()!@#&	for i=1,h-1 do!@#&		if i % 2 == 0 then term.setBackgroundColour(colours.grey)!@#&		else term.setBackgroundColour(colours.yellow) end!@#&		term.setCursorPos(1,i)!@#&		term.write(\" \")!@#&		term.setCursorPos(w,i)!@#&		term.write(\" \")!@#&	end!@#&	!@#&	term.setBackgroundColour(colours.black)!@#&	term.setTextColour(colours.blue)!@#&	term.setCursorPos(2,h)!@#&	term.clearLine()!@#&	term.write(\"Editor Mode: \")!@#&	term.setTextColour(colours.yellow)!@#&	term.write(levelEditName)!@#&	local msg = \"Tool: \"..pallette[brushType].n..\" \"..pallette[brushType].s!@#&	term.setCursorPos(w - #msg - 1, 19)!@#&	term.setTextColour(colours.blue)!@#&	term.write(\"Tool: \")!@#&	term.setTextColour(colours.yellow)!@#&	term.write(pallette[brushType].n..\" \")!@#&	term.setBackgroundColour(pallette[brushType].b)!@#&	term.setTextColour(pallette[brushType].t)!@#&	term.write(pallette[brushType].s)!@#&end!@#&!@#&local function drawPallette(xpos,ypos)!@#&	local xdim = 7!@#&	local ydim = 5!@#&	local left = xpos!@#&	local top  = ypos!@#&	if xpos + xdim > w then left = left + (w - xpos - xdim) end!@#&	if ypos + ydim > h then top = top + (h - ypos - ydim) end!@#&	!@#&	--There's no easy way to do this... so we draw it manually :(!@#&	for i=0,4 do!@#&		term.setCursorPos(left, top + i)!@#&		term.setBackgroundColour(colours.black)!@#&		term.setTextColour(colours.red)!@#&		if i == 0 or i == 4 then term.write(\"*-----*\")!@#&		else term.write(\"*     *\") end!@#&	end!@#&	!@#&	for i=1,#pallette-1 do!@#&		local ypl = 1!@#&		local xmv = i!@#&		if i > 5 then ypl = 2 xmv = i - 5 end!@#&		!@#&		term.setCursorPos(left + xmv, top+ypl)!@#&		term.setBackgroundColour(pallette[i].b)!@#&		term.setTextColour(pallette[i].t)!@#&		term.write(pallette[i].s)!@#&	end!@#&	!@#&	term.setCursorPos(left + 1, top + 3)!@#&	term.setBackgroundColour(colours.red)!@#&	term.setTextColour(colours.black)!@#&	term.write(\"ERASE\")!@#&	!@#&	local _,button,x,y = os.pullEvent(\"mouse_click\")!@#&	!@#&	if button == 1 then!@#&		if y == top + 1 and x > left and x < left + 6 then!@#&			brushType = x-left!@#&		elseif y == top + 2 and x > left and x < left + 6 then!@#&			brushType = x-left+5!@#&		elseif y == top + 3 and x > left and x < left + 6 then!@#&			brushType = 11!@#&		end!@#&	end!@#&	!@#&	for y = top,top+ydim do!@#&		for x = left,left+xdim do	!@#&			--Not sure why the -2 is necessary!@#&			if map[y+drawOffsetY] then updateMap(x-2,y+drawOffsetY) end!@#&		end!@#&	end!@#&	drawFooter()!@#&	return!@#&end!@#&!@#&local function saveCurrentMap(path)!@#&	local file = io.open(shell.resolve(\".\")..\"/SpeedOS/Applications/GameBox/GoldRunnerLevels/\"..path, \"w\")!@#&	if not file then return false end!@#&	!@#&	drawMap()!@#&	drawFooter()!@#&	local msg = \"Saving..\"!@#&	term.setCursorPos(w/2-#msg/2, 5)!@#&	term.setTextColour(colours.yellow)!@#&	term.setBackgroundColour(colours.blue)!@#&	term.write(msg)!@#&	term.setCursorPos(w/2-9, 6)!@#&	term.setBackgroundColour(colours.red)!@#&	term.write(string.rep(\" \", 18))!@#&	term.setCursorPos(w/2-9,6)!@#&	term.setBackgroundColour(colours.lime)!@#&	!@#&	for y=1,#map do!@#&		local xstr = \"\"!@#&		for x=1,49 do!@#&			--This again...!@#&			    if map[y][x] == 0 then xstr = xstr..getHexOf(colours.blue)!@#&			elseif map[y][x] == \"V\" then xstr = xstr..getHexOf(colours.orange)!@#&			elseif map[y][x] == \"#\" then xstr = xstr..getHexOf(colours.grey)!@#&			elseif map[y][x] == \"H\" then xstr = xstr..getHexOf(colours.brown)!@#&			elseif map[y][x] == \"h\" then xstr = xstr..getHexOf(colours.lightGrey)!@#&			elseif map[y][x] == \"-\" then xstr = xstr..getHexOf(colours.green)!@#&			elseif map[y][x] == \"&\" then xstr = xstr..getHexOf(colours.red)!@#&			elseif goldMap[y][x] == 1 then xstr = xstr..getHexOf(colours.yellow)!@#&			elseif plX == x and plY == y then xstr = xstr..getHexOf(colours.white)!@#&			elseif exX == x and exY == y then xstr = xstr..getHexOf(colours.lime)!@#&			else xstr = xstr..\" \"!@#&			end!@#&		end!@#&		file:write(xstr..\"\\n\")!@#&		term.write(\" \")!@#&		sleep(0)!@#&	end!@#&	file:close()!@#&	return true!@#&end!@#&!@#&local function runLevelEditor()!@#&	inLevelEditor = true!@#&	term.setBackgroundColour(colours.black)!@#&	term.clear()!@#&	if not fs.exists(shell.resolve(\".\")..\"/SpeedOS/Applications/GameBox/GoldRunnerLevels/\"..levelEditName) then!@#&		map = {}!@#&		goldMap = {}!@#&		monks = {}!@#&		for i=1,18 do map[i] = {} goldMap[i] = {} end!@#&		plX = 2!@#&		plY = 2!@#&		plspawnX = plX!@#&		plspawnY = plY!@#&		exX = 48!@#&		exY = 17!@#&	else!@#&		loadMap(shell.resolve(\".\")..\"/SpeedOS/Applications/GameBox/GoldRunnerLevels/\"..levelEditName)!@#&		for _,monk in pairs(monks) do!@#&			map[monk.y][monk.x] = \"&\"!@#&		end!@#&		monks = {}!@#&	end!@#&	!@#&	drawMap()!@#&	drawFooter()!@#&	!@#&	while inLevelEditor do!@#&		local id,button,x,y = os.pullEvent()!@#&		if id == \"mouse_click\" or id == \"mouse_drag\" then!@#&			if button == 2 then !@#&				drawPallette(x,y)!@#&			elseif x > drawOffsetX and x <= 49 + drawOffsetX and y > drawOffsetY and y <= 18 + drawOffsetY then!@#&				if pallette[brushType].v == \"player\" then!@#&					local ox = plX!@#&					local oy = plY!@#&					if plX == exX and plY == exY then!@#&						exX = ox!@#&						exY = oy!@#&					end!@#&					plX = x - drawOffsetX!@#&					plY = y - drawOffsetY!@#&					map[plY][plX] = nil!@#&					goldMap[plY][plX] = nil!@#&					updateMap(ox,oy)!@#&				elseif pallette[brushType].v == \"@\" then!@#&					local ox = exX!@#&					local oy = exY!@#&					if plX == exX and plY == exY then!@#&						plX = ox!@#&						plY = oy!@#&					end!@#&					exX = x - drawOffsetX!@#&					exY = y - drawOffsetY!@#&					map[plY][plX] = nil!@#&					goldMap[plY][plX] = nil!@#&					updateMap(ox,oy)!@#&				elseif pallette[brushType].v == \"$\" then!@#&					goldMap[y-drawOffsetY][x-drawOffsetX] = 1!@#&					map[y-drawOffsetY][x-drawOffsetX] = nil!@#&				elseif pallette[brushType].v == nil then!@#&					map[y-drawOffsetY][x-drawOffsetX] = nil!@#&					goldMap[y-drawOffsetY][x-drawOffsetX] = nil!@#&				else!@#&					map[y-drawOffsetY][x-drawOffsetX] = pallette[brushType].v!@#&					goldMap[y-drawOffsetY][x-drawOffsetX] = nil!@#&					--term.setCursorPos(1,19)!@#&					--print(\"At \"..(x-drawOffsetX)..\", \"..(y-drawOffsetY)..\" have placed \"..pallette[brushType].v)!@#&				end!@#&				updateMap(x-drawOffsetX, y-drawOffsetY)!@#&			end!@#&		elseif id == \"mouse_scroll\" then!@#&			brushType = brushType + button!@#&			if brushType == 0 then brushType = #pallette!@#&			elseif brushType > #pallette then brushType = 1 end!@#&			drawFooter()!@#&		elseif id == \"key\" and button == keys.enter then!@#&			menSel = inGameMenu(levelEditOptions)!@#&			if menSel == \"Save\" then!@#&				saveCurrentMap(levelEditName)!@#&				drawMap()!@#&				drawFooter()!@#&			elseif menSel == \"Save and Exit\" then!@#&				saveCurrentMap(levelEditName)!@#&				menSel = \"none\"!@#&				inLevelEditor = false!@#&			elseif menSel == \"Discard and Exit\" then!@#&				menSel = \"none\"!@#&				inLevelEditor = false!@#&			elseif menSel == \"Play Level\" then!@#&				saveCurrentMap(levelEditName)!@#&				inLevelEditor = false!@#&			end!@#&		end!@#&	end!@#&end!@#&!@#&!@#&local function runLevelSelect()!@#&	if not titleLoaded then!@#&		loadTitleScreen()!@#&		monkTimer = os.startTimer(moveIntv * 1.5)!@#&	else !@#&		drawMap()!@#&		drawEndgameMap()!@#&		term.setCursorPos(1,19)!@#&		term.setBackgroundColour(colours.blue)!@#&		term.clearLine()!@#&	end!@#&	drawLevelList()!@#&	!@#&	menSel = \"none\"!@#&	repeat!@#&		handleEvents()!@#&		!@#&		term.setBackgroundColour(colours.black)!@#&		term.setTextColour(colours.yellow)!@#&		for i=1,10 do!@#&			term.setCursorPos(16,3+i)!@#&			if i == menIndex then!@#&				term.write(\">\")!@#&			else!@#&				term.write(\" \")!@#&			end!@#&		end!@#&	until menSel ~= \"none\"!@#&	inLevelSelect = false!@#&	menSel = \"New Game\"!@#&end!@#&!@#&local function runTitle()!@#&	loadTitleScreen()!@#&	term.setCursorPos(15,3)!@#&	term.setTextColour(colours.red)!@#&	term.setBackgroundColour(colours.black)!@#&	term.write(\"Gold Runner\")!@#&	term.setCursorPos(16,4)!@#&	term.write(\"For Speed OS\")!@#&	!@#&	term.setTextColour(colours.white)!@#&	for i=1,#titleOptions do!@#&		term.setCursorPos(19, 5 + (i*2))!@#&		term.write(titleOptions[i])!@#&	end!@#&	  !@#&	term.setCursorPos(16, 7)!@#&	term.setTextColour(colours.yellow)!@#&	term.write(\"->\")!@#&	!@#&	menSel = \"none\"!@#&	monkTimer = os.startTimer(moveIntv * 1.5)!@#&	!@#&	repeat!@#&		handleEvents()!@#&		!@#&		term.setBackgroundColour(colours.black)!@#&		term.setTextColour(colours.yellow)!@#&		for i=1,#titleOptions do!@#&			term.setCursorPos(16, 5 + i*2)!@#&			if menIndex == i then term.write(\"->\")!@#&			else term.write(\"  \") end!@#&		end!@#&	until menSel ~= \"none\"!@#&end!@#&!@#&local function playLevel()!@#&	loadMap(shell.resolve(\".\")..\"/SpeedOS/Applications/GameBox/GoldRunnerLevels/\"..levelList[currentLevel])!@#&	running = true!@#&	while running do!@#&		drawMap()!@#&		drawHUD()!@#&		os.pullEvent(\"key\")!@#&		movePlayer(plX,plY,true)!@#&		!@#&		monkTimer = os.startTimer(moveIntv * 1.5)!@#&		moveTimer = os.startTimer(moveIntv)!@#&		shootTimer = -1!@#&		spawnTimer = -1!@#&		!@#&		started = true!@#&		while started do!@#&			handleEvents()!@#&		end!@#&		!@#&		if menSel == \"Quit\" or menSel == \"Back to Title\" or menSel == \"Edit Level\" then!@#&			running = false!@#&			return!@#&		end!@#&		menSel = \"none\"!@#&		!@#&		if nextLevel then!@#&			if currentLevel == #levelList then !@#&				started = false!@#&				running = false!@#&				break!@#&			else!@#&				currentLevel = currentLevel + 1!@#&				playerLives = playerLives + 1!@#&				resetMap()!@#&				loadMap(shell.resolve(\".\")..\"/SpeedOS/Applications/GoldRunnerLevels/\"..levelList[currentLevel])!@#&			end!@#&			nextLevel = false!@#&		else!@#&			playerLives = playerLives-1!@#&			if playerLives > 0 then resetMap()!@#&			else !@#&				running = false !@#&			end!@#&		end!@#&	end!@#&	!@#&	if nextLevel then!@#&		local msg = \"All levels defeated, Gold Runner!\"!@#&		term.setBackgroundColour(colours.black)!@#&		term.setTextColour(colours.lime)!@#&		term.setCursorPos(25 - #msg/2, 2)!@#&		term.write(msg)!@#&	else!@#&		local msg = \"Game over!\"!@#&		term.setBackgroundColour(colours.black)!@#&		term.setTextColour(colours.red)!@#&		term.setCursorPos(25 - #msg/2, 2)!@#&		term.write(msg)!@#&	end!@#&	currentLevel = 1!@#&	sleep(2)!@#&end!@#&!@#&term.clear()!@#&if not fs.exists(shell.resolve(\".\")..\"/SpeedOS/Applications/GameBox/GoldRunnerLevels\") then!@#&	error(\"Level directory not present!\")!@#&end!@#&levelList = fs.list(shell.resolve(\".\")..\"/SpeedOS/Applications/GameBox/GoldRunnerLevels\")!@#&if #levelList == 0 then!@#&	error(\"Level directory is empty!\")!@#&end!@#&!@#&runTitle()!@#&menIndex = 1!@#&!@#&while menSel ~= \"Quit\" do!@#&	if menSel == \"Select Level\" then!@#&		inLevelSelect = true!@#&		runLevelSelect()!@#&	elseif menSel == \"New Game\" then!@#&		playerLives = 3!@#&		playerScore = 0!@#&		playLevel()!@#&	elseif menSel == \"Create Level\" then!@#&		--This is a bit lazy... well it's all been a bit lazy :P!@#&		drawMap()!@#&		term.setCursorPos(1,19)!@#&		term.setBackgroundColour(colours.blue)!@#&		term.clearLine()!@#&		!@#&		term.setCursorPos(16,10)!@#&		term.setBackgroundColour(colours.black)!@#&		term.setTextColour(colours.white)!@#&		term.write(\"Enter level name:\")!@#&		term.setTextColour(colours.lime)!@#&		term.setCursorPos(17,11)!@#&		term.setCursorBlink(true)!@#&		local levelName = \"\"!@#&		!@#&		local id,p1!@#&		repeat!@#&			id,p1 = os.pullEvent()!@#&			if id == \"key\" and p1 == keys.backspace then!@#&				levelName = string.sub(levelName, 1, #levelName - 1)!@#&			elseif id == \"timer\" and p1 == monkTimer then !@#&				updateMonks()!@#&				monkTimer = os.startTimer(moveIntv * 2)!@#&			elseif id == \"char\" and #levelName < 14 then!@#&				levelName = levelName..p1!@#&			end!@#&			term.setTextColour(colours.lime)!@#&			term.setCursorPos(17,11)!@#&			term.write(levelName..string.rep(\" \",14 - #levelName))!@#&			term.setCursorPos(17 + #levelName ,11)!@#&		until id == \"key\" and p1 == keys.enter and #levelName > 0!@#&		!@#&		term.setCursorBlink(false)!@#&		levelEditName = levelName!@#&		runLevelEditor()!@#&		!@#&		if menSel == \"Play Level\" then!@#&			currentLevel = nil!@#&			levelList = fs.list(shell.resolve(\".\")..\"/SpeedOS/Applications/GameBox/GoldRunnerLevels/\")!@#&			for num,name in pairs(levelList) do !@#&				if name == levelName then!@#&					currentLevel = num!@#&					break!@#&				end!@#&			end!@#&			menSel = \"New Game\"!@#&		else!@#&			menSel = \"none\"!@#&		end!@#&	elseif menSel == \"Edit Level\" then!@#&		levelEditName = levelList[currentLevel]!@#&		runLevelEditor()!@#&		term.setBackgroundColour(colours.black)!@#&		term.clear()!@#&		!@#&		if menSel == \"Play Level\" then!@#&			menSel = \"New Game\"!@#&		else!@#&			menSel = \"none\"!@#&		end!@#&	elseif menSel == \"none\" or menSel == \"Back to Title\" then!@#&		runTitle()!@#&	end!@#&	menIndex = 1!@#&end!@#&!@#&term.setBackgroundColour(colours.black)!@#&shell.run(\"clear\")!@#&term.setTextColour(colours.white)!@#&print(\"Thanks for playing Gold Runner!\")",["codes"]="koran,!@#&afrit,!@#&eager,!@#&booth,!@#&cusso,!@#&fixed,!@#&arlen,!@#&lotta,!@#&lurer,!@#&thsos,!@#&egypt,!@#&twerp,!@#&yolky,!@#&witty,!@#&shill,!@#&suave,!@#&putto,!@#&pinta,!@#&resaw,!@#&rumal,!@#&vomer,!@#&jutty,!@#&peele,!@#&ochoa,!@#&quell,!@#&rhine,!@#&epode,!@#&agley,!@#&metro,!@#&veiny,!@#&misrt,!@#&rodin,!@#&suzie,!@#&third,!@#&kitty,!@#&cully,!@#&byrle,!@#&dacha,!@#&umbel,!@#&axiom,!@#&gaunt,!@#&bercy,!@#&sleep,!@#&ruffe,!@#&jarry,!@#&horeb,!@#&money,!@#&hazel,!@#&blini,",["hangmanwords"]={["words"]="which,about,number,first,sound,after,thing,think,right,around,three,small,different,spell,animal,house,point,letter,mother,found,study,still,America,every,between,plant,never,start,light,under,story,along,might,always,often,important,until,children,night,river,carry,without,indian,mountain,leave,family,better,black,bring,clean,drink,funny,giving,green,round,seven,shall,sleep,thank,blast,blend,blimp,blink,bliss,block,blond,bluff,blunt,brand,brass,brunt,cant,clamp,clasp,class,cliff,cling,clink,clump,clung,craft,cramp,crisp,crust,draft,drank,dress,drift,drill,fling,flung,flunk,frank,frill,frisk,frost,gland,glass,glint,gramp,grand,grant,grasp,grass,grill,grump,grunt,plank,plump,prank,press,print,scalp,scram,scrap,script,skill,skunk,slang,slant,slept,sling,slump,smack,smell,snack,sniff,spank,spend,spent,spill,splat,splint,split,spunk,stack,stamp,stand,stiff,sting,stink,stomp,strand,strap,strip,struck,strung,stuck,stump,swang,swell,swift,swing,swung,tramp,trend,trick,trunk,trust,twang,twist,absent,admit,album,banging,basket,bathtub,bedbug,bench,blank,blasted,blended,blush,bobsled,branch,brush,bunch,camping,catnip,chest,chill,chipmunk,chunk,clock,cloth,contest,crack,crash,crashing,crept,cross,crush,dentist,disrupt,disrupted,drinking,dusted,expanded,finishing,goblin,himself,hotrod,hunted,index,insisted,insisting,insulted,invent,invented,jumping,lapdog,lasted,lending,lunch,mascot,napkin,picnic,pigpen,pinball,pinch,planted,plastic,problem,public,publishing,punishing,rented,rested,ringing,shack,shelf,shell,shifted,shrimp,shrinking,shrunk,sinking,splash,splashing,squinted,standing,stuff,stunt,sunfish,sunlit,sunset,suntan,swishing,talented,tilted,tiptop,trusted,twisted,upset,whiff,whiplash,zigzag,nothing,burnt,caterpillar,cheer,chomp,click,cluck,complain,croak,crunch,curve,darts,dinner,doctor,fishing,forever,forgot,forth,granddad,grinned,hatch,horse,insect,larch,market,napper,patch,perfect,quick,quill,quilt,sister,smash,snort,squirt,stick,sudden,sunburn,swimmer,twitch,umbrella,whirl,whisper,added,afraid,afternoon,annoy,applaud,artist,attack,attic,avoid,awful,awning,ballplayer,basketball,batch,beach,beast,begging,birthday,bleach,bloom,boast,bonnet,boost,braid,brain,brainstorm,brawl,brick,bright,broil,broiler,broom,buddy,bunny,burst,buses,cabin,camel,candy,catch,chain,champ,chart,check,cheerful,cheese,chess,chick,chirp,chore,church,churn,claim,clerk,clever,clutch,coach,collect,crawl,cream,daddy,daylight,delight,ditch,doghouse,dragon,drain,dream,droop,easel,enjoy,evergreen,everything,explore,fabric,faithful,fault,feast,fetch,fifty,fight,finish,flash,flashlight,flight,float,fluffy,forest,forget,fraud,fresh,fright,garden,gleam,glean,goose,grain,grasshopper,groan,gumball,habit,happen,happy,harmful,haunt,helpful,herself,hidden,highway,hoist,hopscotch,houseboat,hummingbird,hungry,jelly,jellyfish,joint,kickball,kitten,kitty,knack,kneecap,kneel,knelt,knight,knock,knockout,latch,launch,lemon,lighthouse,limit,lipstick,living,loose,lunchbox,march,match,mitten,model,moist,munch,nerve,north,oatmeal,object,painful,paint,peach,penny,perch,pitch,poison,pooch,popcorn,porch,pretzel,proof,puppy,purse,quack,queen,quicksand,rabbit,ranch,reach,restful,return,ribbon,roast,robin,roost,royal,runway,sailboat,salad,sandbox,sandy,saturday,scarf,scold,scorch,score,scratch,scream,screen,scrub,serve,shark,sharp,sheep,shipwreck,shirt,shore,short,shrink,shrub,shrug,sight,silly,slick,slight,smart,smooth,snail,sneak,snooze,snore,spark,speak,splendid,splotch,spoil,spool,spoon,sport,sprain,sprawl,spray,spring,sprint,squawk,steam,steep,stern,stiffer,stool,store,stork,storm,strain,straw,stray,stream,street,stretch,strict,string,strong,stung,sunblock,sunday,sunny,sweep,sweet,swerve,swimming,swirl,switch,tablet,teach,teacher,teeth,tennis,thankful,thick,thigh,thinner,thinnest,third,thirst,thorn,thrill,throat,thursday,tight,toast,tooth,topcoat,torch,traffic,train,trash,travel,treetop,truck,trumpet,tugboat,tummy,twirl,unzip,vanish,verse,visit,visitor,wagon,weave,weekend,wettest,whack,wheat,wheel,whenever,whisk,windmill,wonderful,wreath,wreck,wrench,wrist,written,wrong,yardstick,winter,mitten,birth,bleed,bless,blurb,blurt,booth,brawn,brisk,broth,cheap,cheek,clack,clang,clash,cloak,coast,count,crick,crock,drawn,faint,flesh,flick,flirt,flock,flour,flush,frizz,gloss,greet,grouch,gruff,intern,mirth,mouse,mouth,nurse,plain,plants,plums,present,proud,scald,scoop,scoot,scout,scuff,shawl,sheet,shirk,shoot,shout,sixth,skips,skirt,skull,slash,smock,snatch,sneeze,snoop,snuff,south,speck,speech,speed,spurn,spurt,stain,stall,steal,swept,swish,swoop,sworn,tenth,track,trail,tweet,twelve,twenty,against,during,given,order,president,rather,things,suddenly,zipper,agree,cloud,adult,angry,belly,empty,extra,hurry,nasty,party,sorry,waist,asleep,August,carpet,corner,crayon,banana,bucket,carrot,finger,nickel,person,pocket,puppet,rocket,seesaw,squeak,sticky,summer,supper,ticket,balloon,bedroom,cartoon,chicken,squeeze,address,blanket,kitchen,monster,morning,pretend,shampoo,unhappy,alphabet,bathroom,elephant,hospital,lollipop,railroad,remember,sandwich,softball,restroom,astronaut,classroom,cranberry,drugstore,difficult,everybody,hamburger,september,stoplight,yesterday,strawberry,toothbrush,kindergarten,Thanksgiving,pumpkin,melted,handed,printed,landed",},["eShip1_broken.img"]="                eeeeeeee!@#&               e11e1111ff!@#&              e11ef1eff!@#&              feffffff!@#&              fffff1ff!@#&              11ef11eff!@#&               1ee111eeff!@#&                11111111",["redirection"]="--CCRedirection by : RamiLego4Game and Dan200--!@#&--Based on Redirection by Dan200: http://www.redirectiongame.com--!@#&--Clearing Screen--!@#&!@#&--Vars--!@#&local TermW,TermH = term.getSize()!@#&!@#&local sLevelTitle!@#&local tScreen!@#&local oScreen!@#&local SizeW,SizeH!@#&local aExits!@#&local fExit!@#&local nSpeed!@#&local Speed!@#&local fSpeed!@#&local fSpeedS!@#&local bPaused!@#&local Tick!@#&local Blocks!@#&local XOrgin,YOrgin!@#&!@#&local function reset()!@#&    sLevelTitle = \"\"!@#&    tScreen = {}!@#&    oScreen = {}!@#&    SizeW,SizeH = TermW,TermH!@#&    aExits = 0!@#&    fExit = \"nop\"!@#&    nSpeed = 0.6!@#&    Speed = nSpeed!@#&    fSpeed = 0.2!@#&    fSpeedS = false!@#&    bPaused = false!@#&    Tick = os.startTimer(Speed)!@#&    Blocks = 0!@#&    XOrgin,YOrgin = 1,1!@#&!@#&    term.setBackgroundColor(colors.black)!@#&    term.setTextColor(colors.white)!@#&    term.clear()!@#&end!@#&!@#&local InterFace = {}!@#&InterFace.cExit = colors.red!@#&InterFace.cSpeedD = colors.white!@#&InterFace.cSpeedA = colors.red!@#&InterFace.cTitle = colors.red!@#&!@#&local cG = colors.lightGray!@#&local cW = colors.gray!@#&local cS = colors.black!@#&local cR1 = colors.blue!@#&local cR2 = colors.red!@#&local cR3 = colors.green!@#&local cR4 = colors.yellow!@#&!@#&local tArgs = { ... }!@#&!@#&--Functions--!@#&local function printCentred( yc, stg )!@#&	local xc = math.floor((TermW - string.len(stg)) / 2) + 1!@#&	term.setCursorPos(xc,yc)!@#&	term.write( stg )!@#&end!@#&!@#&local function centerOrgin()!@#&	XOrgin = math.floor((TermW/2)-(SizeW/2))!@#&	YOrgin = math.floor((TermH/2)-(SizeH/2))!@#&end!@#&!@#&local function reMap()!@#&	tScreen = nil!@#&	tScreen = {}!@#&	for x=1,SizeW do!@#&		tScreen[x] = {}!@#&		for y=1,SizeH do!@#&			tScreen[x][y] = { space = true, wall = false, ground = false, robot = \"zz\", start = \"zz\", exit = \"zz\" }!@#&		end!@#&	end!@#&end!@#&!@#&local function tablecopy(t)!@#&  local t2 = {}!@#&  for k,v in pairs(t) do!@#&    t2[k] = v!@#&  end!@#&  return t2!@#&end!@#&!@#&local function buMap()!@#&	oScreen = nil!@#&	oScreen = {}!@#&	for x=1,SizeW do!@#&		oScreen[x] = {}!@#&		for y=1,SizeH do!@#&			oScreen[x][y] = tablecopy(tScreen[x][y])!@#&		end!@#&	end!@#&end!@#&!@#&local function addRobot(x,y,side,color)!@#&	local obj = tScreen[x][y]!@#&	local data = side..color!@#&	if obj.wall == nil and obj.robot == nil then!@#&		tScreen[x][y].robot = data!@#&	else!@#&		obj.wall = nil!@#&		obj.robot = \"zz\"!@#&		tScreen[x][y].robot = data!@#&	end!@#&end!@#&!@#&local function addStart(x,y,side,color)!@#&	local obj = tScreen[x][y]!@#&	local data = side..color!@#&	if obj.wall == nil and obj.space == nil then!@#&		tScreen[x][y].start = data!@#&	else!@#&		obj.wall = nil!@#&		obj.space = nil!@#&		tScreen[x][y].start = data!@#&	end!@#&	aExits = aExits+1!@#&end!@#&!@#&local function addGround(x,y)!@#&	local obj = tScreen[x][y]!@#&	if obj.space == nil and obj.exit == nil and obj.wall == nil and obj.robot == nil and obj.start == nil then!@#&		tScreen[x][y].ground = true!@#&	else!@#&		obj.space = nil!@#&		obj.exit = \"zz\"!@#&		obj.wall = nil!@#&		obj.robot = \"zz\"!@#&		obj.start = \"zz\"!@#&		tScreen[x][y].ground = true!@#&	end!@#&end!@#&!@#&local function addExit(x,y,cl)!@#&	local obj = tScreen[x][y]!@#&	if obj.space == nil and obj.ground == nil and obj.wall == nil and obj.robot == nil and obj.start == nil then!@#&		tScreen[x][y].exit = cl!@#&	else!@#&		obj.space = nil!@#&		obj.ground = nil!@#&		obj.wall = nil!@#&		obj.robot = \"zz\"!@#&		obj.start = \"zz\"!@#&		tScreen[x][y].exit = cl!@#&	end!@#&end!@#&!@#&local function addWall(x,y)!@#&	local obj = tScreen[x][y]!@#&	if obj == nil then!@#&		return error(\"Here X\"..x..\" Y\"..y)!@#&	end!@#&	if obj.space == nil and obj.exit == nil and obj.ground == nil and obj.robot == nil and obj.start == nil then!@#&		tScreen[x][y].wall = true!@#&	else!@#&		obj.space = nil!@#&		obj.exit = nil!@#&		obj.ground = nil!@#&		obj.robot = nil!@#&		obj.start = nil!@#&		tScreen[x][y].wall = true!@#&	end!@#&end!@#&!@#&local function loadLevel(nNum)!@#&    sLevelTitle = \"Level \"..nNum!@#&	if nNum == nil then return error(\"nNum == nil\") end!@#&	local sDir = \"\"!@#&	local sLevelD = sDir .. \"/SpeedOS/Applications/GameBox/r_levels/\" .. tostring(nNum)!@#&	if not ( fs.exists(sLevelD) or fs.isDir(sLevelD) ) then return error(\"Level Not Exists : \"..sLevelD) end!@#&	fLevel = fs.open(sLevelD,\"r\")!@#&	local Line = 0!@#&	local wl = true!@#&	Blocks = tonumber(string.sub(fLevel.readLine(),1,1))!@#&	local xSize = string.len(fLevel.readLine())+2!@#&	local Lines = 3!@#&	while wl do!@#&		local wLine = fLevel.readLine()!@#&		if wLine == nil then!@#&			fLevel.close()!@#&			wl = false!@#&		else!@#&    	    xSize = math.max(string.len(wLine)+2,xSize)!@#&			Lines = Lines + 1!@#&		end!@#&	end!@#&	SizeW,SizeH = xSize,Lines!@#&	reMap()!@#&	fLevel = fs.open(sLevelD,\"r\")!@#&	fLevel.readLine()!@#&	for Line=2,Lines-1 do!@#&		sLine = fLevel.readLine()!@#&		local chars = string.len(sLine)!@#&		for char = 1, chars do!@#&			local el = string.sub(sLine,char,char)!@#&			if el == \"8\" then!@#&				addGround(char+1,Line)!@#&			elseif el == \"0\" then!@#&				addStart(char+1,Line,\"a\",\"a\")!@#&			elseif el == \"1\" then!@#&				addStart(char+1,Line,\"b\",\"a\")!@#&			elseif el == \"2\" then!@#&				addStart(char+1,Line,\"c\",\"a\")!@#&			elseif el == \"3\" then!@#&				addStart(char+1,Line,\"d\",\"a\")!@#&			elseif el == \"4\" then!@#&				addStart(char+1,Line,\"a\",\"b\")!@#&			elseif el == \"5\" then!@#&				addStart(char+1,Line,\"b\",\"b\")!@#&			elseif el == \"6\" then!@#&				addStart(char+1,Line,\"c\",\"b\")!@#&			elseif el == \"9\" then!@#&				addStart(char+1,Line,\"d\",\"b\")!@#&			elseif el == \"b\" then!@#&				addExit(char+1,Line,\"a\")!@#&			elseif el == \"e\" then!@#&				addExit(char+1,Line,\"b\")!@#&			elseif el == \"7\" then!@#&				addWall(char+1,Line)!@#&			end!@#&		end!@#&	end!@#&	fLevel.close()!@#&end!@#&!@#&local function drawStars()!@#&	--CCR Background By : RamiLego--!@#&	local cStar,cStarG,crStar,crStarB = colors.lightGray,colors.gray,\".\",\"*\"!@#&	local DStar,BStar,nStar,gStar = 14,10,16,3!@#&	local TermW,TermH = term.getSize()!@#&!@#&    term.clear()!@#&    term.setCursorPos(1,1)!@#&	for x=1,TermW do!@#&		for y=1,TermH do!@#&			local StarT = math.random(1,30)!@#&			if StarT == DStar then!@#&				term.setCursorPos(x,y)!@#&				term.setTextColor(cStar)!@#&				write(crStar)!@#&			elseif StarT == BStar then!@#&				term.setCursorPos(x,y)!@#&				term.setTextColor(cStar)!@#&				write(crStarB)!@#&			elseif StarT == nStar then!@#&				term.setCursorPos(x,y)!@#&				term.setTextColor(cStarG)!@#&				write(crStar)!@#&			elseif StarT == gStar then!@#&				term.setCursorPos(x,y)!@#&				term.setTextColor(cStarG)!@#&				write(crStarB)!@#&			end!@#&		end!@#&	end!@#&end!@#&!@#&local function drawMap()!@#&	for x=1,SizeW do!@#&		for y=1,SizeH do!@#&		  !@#&			local obj = tScreen[x][y]!@#&			if obj.ground == true then!@#&				paintutils.drawPixel(XOrgin+x,YOrgin+y+1,cG)!@#&			end!@#&			if obj.wall == true then!@#&				paintutils.drawPixel(XOrgin+x,YOrgin+y+1,cW)!@#&			end!@#&		 !@#&		 local ex = tostring(tScreen[x][y].exit)!@#&			if not(ex == \"zz\" or ex == \"nil\") then!@#&				if ex == \"a\" then!@#&					ex = cR1!@#&				elseif ex == \"b\" then!@#&					ex = cR2!@#&				elseif ex == \"c\" then!@#&					ex = cR3!@#&				elseif ex == \"d\" then!@#&					ex = cR4!@#&				else!@#&					return error(\"Exit Color Out\")!@#&				end!@#&				term.setBackgroundColor(cG)!@#&				term.setTextColor(ex)!@#&				term.setCursorPos(XOrgin+x,YOrgin+y+1)!@#&				print(\"X\")!@#&			end!@#&		 !@#&		 local st = tostring(tScreen[x][y].start)!@#&			if not(st == \"zz\" or st == \"nil\") then!@#&				local Cr = string.sub(st,2,2)!@#&				if Cr == \"a\" then!@#&					Cr = cR1!@#&				elseif Cr == \"b\" then!@#&					Cr = cR2!@#&				elseif Cr == \"c\" then!@#&					Cr = cR3!@#&				elseif Cr == \"d\" then!@#&					Cr = cR4!@#&				else!@#&					return error(\"Start Color Out\")!@#&				end!@#&			!@#&				term.setTextColor(Cr)!@#&			term.setBackgroundColor(cG)!@#&				term.setCursorPos(XOrgin+x,YOrgin+y+1)!@#&			!@#&				sSide = string.sub(st,1,1)!@#&				if sSide == \"a\" then!@#&					print(\"^\")!@#&				elseif sSide == \"b\" then!@#&					print(\">\")!@#&				elseif sSide == \"c\" then!@#&					print(\"v\")!@#&				elseif sSide == \"d\" then!@#&					print(\"<\")!@#&				else!@#&					print(\"@\")!@#&				end!@#&			end!@#&			!@#&			if obj.space == true then!@#&				paintutils.drawPixel(XOrgin+x,YOrgin+y+1,cS)!@#&			end!@#&			!@#&			local rb = tostring(tScreen[x][y].robot)!@#&			if not(rb == \"zz\" or rb == \"nil\") then!@#&				local Cr = string.sub(rb,2,2)!@#&				if Cr == \"a\" then!@#&					Cr = cR1!@#&				elseif Cr == \"b\" then!@#&					Cr = cR2!@#&				elseif Cr == \"c\" then!@#&					Cr = cR3!@#&				elseif Cr == \"d\" then!@#&					Cr = cR4!@#&				else!@#&					Cr = colors.white!@#&				end!@#&				term.setBackgroundColor(Cr)!@#&				term.setTextColor(colors.white)!@#&				term.setCursorPos(XOrgin+x,YOrgin+y+1)!@#&				sSide = string.sub(rb,1,1)!@#&				if sSide == \"a\" then!@#&					print(\"^\")!@#&				elseif sSide == \"b\" then!@#&					print(\">\")!@#&				elseif sSide == \"c\" then!@#&					print(\"v\")!@#&				elseif sSide == \"d\" then!@#&					print(\"<\")!@#&				else!@#&					print(\"@\")!@#&				end!@#&			end!@#&		end!@#&	end!@#&end!@#&!@#&local function isBrick(x,y)!@#&	local brb = tostring(tScreen[x][y].robot)!@#&	local bobj = oScreen[x][y]!@#&	if (brb == \"zz\" or brb == \"nil\") and not bobj.wall == true then!@#&		return false!@#&	else!@#&		return true!@#&	end!@#&end!@#&!@#&local function gRender(sContext)!@#&	if sContext == \"start\" then!@#&		for x=1,SizeW do!@#&			for y=1,SizeH do!@#&				local st = tostring(tScreen[x][y].start)!@#&				if not(st == \"zz\" or st == \"nil\") then!@#&					local Cr = string.sub(st,2,2)!@#&					local sSide = string.sub(st,1,1)!@#&					addRobot(x,y,sSide,Cr)!@#&				end!@#&			end!@#&		end!@#&	elseif sContext == \"tick\" then!@#&		buMap()!@#&        for x=1,SizeW do!@#&            for y=1,SizeH do!@#&                local rb = tostring(oScreen[x][y].robot)!@#&                if not(rb == \"zz\" or rb == \"nil\") then!@#&                    local Cr = string.sub(rb,2,2)!@#&                    local sSide = string.sub(rb,1,1)!@#&                    local sobj = oScreen[x][y]!@#&                    if sobj.space == true then!@#&                        tScreen[x][y].robot = \"zz\"!@#&                        if not sSide == \"g\" then!@#&                            addRobot(x,y,\"g\",Cr)!@#&                        end!@#&                    elseif sobj.exit == Cr then!@#&                        if sSide == \"a\" or sSide == \"b\" or sSide == \"c\" or sSide == \"d\" then!@#&                        tScreen[x][y].robot = \"zz\"!@#&                        addRobot(x,y,\"g\",Cr)!@#&                        aExits = aExits-1!@#&                        end!@#&                    elseif sSide == \"a\" then!@#&                        local obj = isBrick(x,y-1)!@#&                        tScreen[x][y].robot = \"zz\"!@#&                        if not obj == true then!@#&                            addRobot(x,y-1,sSide,Cr)!@#&                        else!@#&                            local obj2 = isBrick(x-1,y)!@#&                            local obj3 = isBrick(x+1,y)!@#&                            if not obj2 == true and not obj3 == true then!@#&                                if Cr == \"a\" then!@#&                                    addRobot(x,y,\"d\",Cr)!@#&                                elseif Cr == \"b\" then!@#&                                    addRobot(x,y,\"b\",Cr)!@#&                                end!@#&                            elseif obj == true and obj2 == true and obj3 == true then!@#&                                addRobot(x,y,\"c\",Cr)!@#&                            else!@#&                                if obj3 == true then!@#&                                    addRobot(x,y,\"d\",Cr)!@#&                                elseif obj2 == true then!@#&                                    addRobot(x,y,\"b\",Cr)!@#&                                end!@#&                            end!@#&                        end!@#&                    elseif sSide == \"b\" then!@#&                        local obj = isBrick(x+1,y)!@#&                        tScreen[x][y].robot = \"zz\"!@#&                        if not obj == true then!@#&                            addRobot(x+1,y,sSide,Cr)!@#&                        else!@#&                            local obj2 = isBrick(x,y-1)!@#&                            local obj3 = isBrick(x,y+1)!@#&                            if not obj2 == true and not obj3 == true then!@#&                                if Cr == \"a\" then!@#&                                    addRobot(x,y,\"a\",Cr)!@#&                                elseif Cr == \"b\" then!@#&                                    addRobot(x,y,\"c\",Cr)!@#&                                end!@#&                            elseif obj == true and obj2 == true and obj3 == true then!@#&                                addRobot(x,y,\"d\",Cr)!@#&                            else!@#&                                if obj3 == true then!@#&                                    addRobot(x,y,\"a\",Cr)!@#&                                elseif obj2 == true then!@#&                                    addRobot(x,y,\"c\",Cr)!@#&                                end!@#&                            end!@#&                        end!@#&                    elseif sSide == \"c\" then!@#&                        local obj = isBrick(x,y+1)!@#&                        tScreen[x][y].robot = \"zz\"!@#&                        if not obj == true then!@#&                            addRobot(x,y+1,sSide,Cr)!@#&                        else!@#&                            local obj2 = isBrick(x-1,y)!@#&                            local obj3 = isBrick(x+1,y)!@#&                            if not obj2 == true and not obj3 == true then!@#&                                if Cr == \"a\" then!@#&                                    addRobot(x,y,\"b\",Cr)!@#&                                elseif Cr == \"b\" then!@#&                                    addRobot(x,y,\"d\",Cr)!@#&                                end!@#&                            elseif obj == true and obj2 == true and obj3 == true then!@#&                                addRobot(x,y,\"a\",Cr)!@#&                            else!@#&                                if obj3 == true then!@#&                                    addRobot(x,y,\"d\",Cr)!@#&                                elseif obj2 == true then!@#&                                    addRobot(x,y,\"b\",Cr)!@#&                                end!@#&                            end!@#&                        end!@#&                    elseif sSide == \"d\" then!@#&                        local obj = isBrick(x-1,y)!@#&                        tScreen[x][y].robot = \"zz\"!@#&                        if not obj == true then!@#&                            addRobot(x-1,y,sSide,Cr)!@#&                        else!@#&                            local obj2 = isBrick(x,y-1)!@#&                            local obj3 = isBrick(x,y+1)!@#&                            if not obj2 == true and not obj3 == true then!@#&                                if Cr == \"a\" then!@#&                                    addRobot(x,y,\"c\",Cr)!@#&                                elseif Cr == \"b\" then!@#&                                    addRobot(x,y,\"a\",Cr)!@#&                                end!@#&                            elseif obj == true and obj2 == true and obj3 == true then!@#&                                addRobot(x,y,\"b\",Cr)!@#&                            else!@#&                                if obj3 == true then!@#&                                    addRobot(x,y,\"a\",Cr)!@#&                                elseif obj2 == true then!@#&                                    addRobot(x,y,\"c\",Cr)!@#&                                end!@#&                            end!@#&                        end!@#&                    else!@#&                        addRobot(x,y,sSide,\"g\")!@#&                    end!@#&                end!@#&            end!@#&        end!@#&    end!@#&end!@#&!@#&function InterFace.drawBar()!@#&	term.setBackgroundColor( colors.black )!@#&	term.setTextColor( InterFace.cTitle )!@#&	printCentred( 1, \"  \"..sLevelTitle..\"  \" )!@#&	!@#&	term.setCursorPos(1,1)!@#&	term.setBackgroundColor( cW )!@#&	write( \" \" )!@#&	term.setBackgroundColor( colors.black )!@#&	write( \" x \"..tostring(Blocks)..\" \" )!@#&	!@#&	term.setCursorPos( TermW-8,TermH )!@#&	term.setBackgroundColor( colors.black )!@#&    term.setTextColour(InterFace.cSpeedD)!@#&	write(\" <<\" )!@#&	if bPaused then!@#&		term.setTextColour(InterFace.cSpeedA)!@#&	else!@#&		term.setTextColour(InterFace.cSpeedD)!@#&	end!@#&	write(\" ||\")!@#&	if fSpeedS then!@#&		term.setTextColour(InterFace.cSpeedA)!@#&	else!@#&		term.setTextColour(InterFace.cSpeedD)!@#&	end!@#&	write(\" >>\")!@#&!@#&	term.setCursorPos( TermW-1, 1 )!@#&	term.setBackgroundColor( colors.black )!@#&	term.setTextColour( InterFace.cExit )!@#&	write(\" X\")!@#&	term.setBackgroundColor(colors.black)!@#&end!@#&!@#&function InterFace.render()!@#&	local id,p1,p2,p3 = os.pullEvent()!@#&	if id == \"mouse_click\" then!@#&		if p3 == 1 and p2 == TermW then!@#&            return \"end\"!@#&        elseif p3 == TermH and p2 >= TermW-7 and p2 <= TermW-6 then!@#&            return \"retry\"!@#&        elseif p3 == TermH and p2 >= TermW-4 and p2 <= TermW-3 then!@#&            bPaused = not bPaused!@#&            fSpeedS = false!@#&            Speed = (bPaused and 0) or nSpeed!@#&            if Speed > 0 then!@#&                Tick = os.startTimer(Speed)!@#&            else!@#&                Tick = nil!@#&            end!@#&            InterFace.drawBar()!@#&        elseif p3 == TermH and p2 >= TermW-1 then!@#&            bPaused = false!@#&            fSpeedS = not fSpeedS!@#&            Speed = (fSpeedS and fSpeed) or nSpeed!@#&            Tick = os.startTimer(Speed)!@#&            InterFace.drawBar()!@#&		elseif p3-1 < YOrgin+SizeH+1 and p3-1 > YOrgin and!@#&               p2 < XOrgin+SizeW+1 and p2 > XOrgin then!@#&            local eobj = tScreen[p2-XOrgin][p3-YOrgin-1]!@#&            local erobj = tostring(tScreen[p2-XOrgin][p3-YOrgin-1].robot)!@#&            if (erobj == \"zz\" or erobj == \"nil\") and not eobj.wall == true and not eobj.space == true and Blocks > 0 then!@#&                addWall(p2-XOrgin,p3-YOrgin-1)!@#&                Blocks = Blocks-1!@#&                InterFace.drawBar()!@#&                drawMap()!@#&            end!@#&		end!@#&	elseif id == \"timer\" and p1 == Tick then!@#&		gRender(\"tick\")!@#&        drawMap()!@#&        if Speed > 0 then!@#&            Tick = os.startTimer(Speed)!@#&        else!@#&            Tick = nil!@#&        end!@#&	end!@#&end!@#&!@#&local function startG(LevelN)!@#&	drawStars()!@#&	loadLevel(LevelN)!@#&	centerOrgin()!@#&	local create = true!@#&	drawMap()!@#&	InterFace.drawBar()!@#&	gRender(\"start\")!@#&	drawMap()!@#&	!@#&	local NExit = true!@#&	if aExits == 0 then!@#&		NExit = false!@#&	end!@#&	!@#&	while true do!@#&		local isExit = InterFace.render()!@#&		if isExit == \"end\" then!@#&		    return nil!@#&		elseif isExit == \"retry\" then!@#&		    return LevelN!@#&		elseif fExit == \"yes\" then!@#&			if fs.exists(\"/SpeedOS/Applications/GameBox/r_levels/\" .. tostring(LevelN + 1) ) then!@#&			    return LevelN + 1!@#&			else!@#&			    return nil!@#&			end!@#&		end!@#&		if aExits == 0 and NExit == true then!@#&			fExit = \"yes\"!@#&		end!@#&	end!@#&end!@#&!@#&local ok, err = true, nil!@#&!@#&--Menu--!@#&local sStartLevel = tArgs[1]!@#&if ok and not sStartLevel then!@#&    ok, err = pcall( function()!@#&        term.setTextColor(colors.white)!@#&        term.setBackgroundColor( colors.black )!@#&        term.clear()!@#&        drawStars()!@#&        term.setTextColor( colors.red )!@#&        printCentred( TermH/2 - 1, \"  REDIRECTION  \" )!@#&        printCentred( TermH/2 - 0, \"  ComputerCraft Edition  \" )!@#&        term.setTextColor( colors.yellow )!@#&        printCentred( TermH/2 + 2, \"  Click to Begin  \" )!@#&        os.pullEvent( \"mouse_click\" )!@#&    end )!@#&end!@#&!@#&--Game--!@#&if ok then!@#&    ok,err = pcall( function()!@#&        local nLevel!@#&        if sStartLevel then!@#&            nLevel = tonumber( sStartLevel )!@#&        else!@#&            nLevel = 1!@#&        end!@#&        while nLevel do!@#&            reset()!@#&            nLevel = startG(nLevel)!@#&        end!@#&    end )!@#&end!@#&!@#&--Upsell screen--!@#&if ok then!@#&    ok, err = pcall( function()!@#&        term.setTextColor(colors.white)!@#&        term.setBackgroundColor( colors.black )!@#&        term.clear()!@#&        drawStars()!@#&        term.setTextColor( colors.red )!@#&        if TermW >= 40 then!@#&            printCentred( TermH/2 - 1, \"  Thank you for playing Redirection  \" )!@#&            printCentred( TermH/2 - 0, \"  ComputerCraft Edition  \" )!@#&            printCentred( TermH/2 + 2, \"  Check out the full game:  \" )!@#&            term.setTextColor( colors.yellow )!@#&            printCentred( TermH/2 + 3, \"  http://www.redirectiongame.com  \" )!@#&        else!@#&            printCentred( TermH/2 - 2, \"  Thank you for  \" )!@#&            printCentred( TermH/2 - 1, \"  playing Redirection  \" )!@#&            printCentred( TermH/2 - 0, \"  ComputerCraft Edition  \" )!@#&            printCentred( TermH/2 + 2, \"  Check out the full game:  \" )!@#&            term.setTextColor( colors.yellow )!@#&            printCentred( TermH/2 + 3, \"  www.redirectiongame.com  \" )!@#&        end!@#&        parallel.waitForAll(!@#&            function() sleep(2) end,!@#&            function() os.pullEvent( \"mouse_click\" ) end!@#&        )!@#&    end )!@#&end!@#&!@#&--Clear and exit--!@#&term.setCursorPos(1,1)!@#&term.setTextColor(colors.white)!@#&term.setBackgroundColor(colors.black)!@#&term.clear()!@#&if not ok then!@#&    if err == \"Terminated\" then!@#&        print( \"Check out the full version of Redirection:\" )!@#&        print( \"http://www.redirectiongame.com\" )!@#&    else!@#&        printError( err )!@#&    end!@#&end",["cardFront"]="0eeeee0!@#&e00000e!@#&e00e00e!@#&e0eee0e!@#&e00e00e!@#&e00000e!@#&0eeeee0",["router"]="routers = {}!@#&disMessage = \"\"!@#&connectionError = false!@#&parent = 0!@#&!@#&function clear()!@#&	term.clear()!@#&	term.setCursorPos(1,1)!@#&end!@#&!@#&function openPort()!@#&	for n,m in ipairs(rs.getSides()) do !@#&		if peripheral.isPresent(m) and peripheral.getType(m)==\"modem\" then !@#&			rednet.open(m)!@#&		end !@#&	end!@#&end!@#&!@#&function startUp()!@#&	if(not fs.exists(\"parent\"))then!@#&		fs.makeDir(\"parent\")!@#&		openPort()!@#&		id=0!@#&		smallest = 1000!@#&		parent = 0!@#&		disMessage(\"Connecting to other routers...\")!@#&		display()!@#&		sleep(1)!@#&		rednet.broadcast(\"new router\")!@#&		while true do!@#&			id,msg,distance = rednet.receive(.5)!@#&			if(id==nil)then!@#&				break!@#&			elseif(msg==\"parent\")then!@#&				routers[#routers] = id!@#&				print(id..\"-\"..msg..\"-\"..distance)!@#&				sleep(1)!@#&				if(distance<smallest)then!@#&					smallest = distance!@#&					parent = id!@#&				end!@#&			end	!@#&		end!@#&		local open = fs.open(\"parent/parentid\",\"w\")!@#&		open.write(parent)!@#&		open.close()!@#&	end!@#&end!@#&!@#&function testConnection()!@#&	rednet.send(parent,\"Ping\")!@#&	id,msg,distance = rednet.receive(.5)!@#&	if(id~=nill and msg==\"Pong\")then!@#&		connectionError = false!@#&	else!@#&		connectionError = true!@#&	end!@#&end!@#&!@#&function display()!@#&	testConnection()!@#&	clear()!@#&	term.setCursorPos(1,1)!@#&	print(string.format(\"Router ID: %3d  Parent ID: %3d\", os.computerID(),parent)) !@#&	if(connectionError)then!@#&		term.setTextColor(colors.red)!@#&		print(\"Connection Error\")!@#&		term.setTextColor(colors.white)!@#&	end!@#&	print(disMessage)!@#&end!@#&!@#&--**Beggining statements**!@#&	clear()!@#&	print(\"Booting...\")!@#&	openPort()!@#&	startUp()!@#&	refreshTimer = os.startTimer(1)!@#&--**End**!@#&!@#&while true do --**Main Loop**!@#&	local Event,id,message,distance = os.pullEvent()!@#&	if(Event == \"rednet_message\")then!@#&		if(id==parent)then!@#&				!@#&		else!@#&			if(message==\"Ping\")then!@#&				rednet.send(id,\"Pong\")!@#&			elseif(message==\"new router\")then!@#&				rednet.send(id,\"Recieved\")!@#&			end	!@#&		end!@#&	elseif(Event == \"timer\")then!@#&		refreshTimer = os.startTimer(1)!@#&		display()!@#&	end!@#&end",["eShip10_broken.img"]="                 777b77!@#&             77bbb7f77ff!@#&            77777bff77!@#&            fffffbfffbb!@#&                 fffff7f!@#&                 ffff7ff!@#&            fffffbfff77!@#&            77bbbbf7f7!@#&             7777777f7ff!@#&                 777b77",["Chess"]="term.setTextColor(colors.white)!@#&term.setBackgroundColor(colors.black)!@#&!@#&local var w,h = term.getSize()!@#&--Whether or not the player is white!@#&local var youAreWhite = true!@#&--If it's white's turn (default is yes)!@#&local var whiteTurn = true!@#&--Whether or not the player is still in the game interface!@#&local playing = true!@#&--Whether or not the player is still able to make moves (not checkmate etc.)!@#&local gameOver = true!@#&--Whether or not the black pieces are visible (flashes on and off)!@#&local blackVisible = false!@#&!@#&--The position of the white king!@#&local whiteKing = { x = 5, y = 1 }!@#&--The position of the black king!@#&local blackKing = { x = 5, y = 8 }!@#&!@#&--A concatenation of the letters typed during the parsing phase!@#&local lastQuery = \"\"!@#&!@#&--Whether the game is playing locally or network!@#&local isLocal = true!@#&--The address of the other player (if there is one)!@#&local opponentID = 1!@#&--The list of all monitors!@#&local monitorList = {}!@#&--The side the monitor is on!@#&local side = nil!@#&!@#&-- Board consists of 2D array of strings!@#&-- String format = <sign><piece> where sign is + for white, - for black!@#&--[[!@#&Pieces: K = KING!@#&		Q = QUEEN!@#&		B = BISHOP!@#&		N = KNIGHT!@#&		C = CASTLE!@#&		p = PAWN!@#&--]]!@#&	!@#&board = {!@#&  --        a     b     c     d     e     f     g     h!@#&  [8] = { \" \",  \" \",  \" \",  \" \",  \" \",  \" \",  \" \",  \" \" },!@#&  [7] = { \" \",  \" \",  \" \",  \" \",  \" \",  \" \",  \" \",  \" \" },!@#&  [6] = { \" \",  \" \",  \" \",  \" \",  \" \",  \" \",  \" \",  \" \" },!@#&  [5] = { \" \",  \" \",  \" \",  \" \",  \" \",  \" \",  \" \",  \" \" },!@#&  [4] = { \" \",  \" \",  \" \",  \" \",  \" \",  \" \",  \" \",  \" \" },!@#&  [3] = { \" \",  \" \",  \" \",  \" \",  \" \",  \" \",  \" \",  \" \" },!@#&  [2] = { \" \",  \" \",  \" \",  \" \",  \" \",  \" \",  \" \",  \" \" },!@#&  [1] = { \" \",  \" \",  \" \",  \" \",  \" \",  \" \",  \" \",  \" \" }!@#&  --        a     b     c     d     e     f     g     h!@#&}!@#&!@#&--[[!@#&The following is tracked under movesMade:!@#&- player: Which player moved (+ for white, - for black)!@#&- piece: What kind of piece moved (p, Q, N, C etc)!@#&- oldx, oldy, newx, newy: Coordinates (numbers please)!@#&- capture: Whether or not the move resulted in a capture (Bf4xe5 for example)!@#&- castle: If the move was a castle - 0 for none, -1 for QS and 1 for KS!@#&- promotion: A string. Empty if no promotion, or the piece promoted to!@#&- ep: Whether or not the capture was an en passant!@#&- check: Whether or not the move resulted in a check (Bf3-g2+ for example)!@#&- mate: Whether or not the move resulted in a mate (Bf3-g2# for example)!@#&- stale: Whether or not the move resulted in a stalemate (Bf3-g2$ for example)!@#&]]--!@#&movesMade = { }!@#&!@#&--Prints the player's color and the current turn!@#&function printHeader()!@#&  term.setCursorPos(2, 1)!@#&  if youAreWhite then term.write(\"You are WHITE\")!@#&  else term.write(\"You are BLACK\") end!@#&  !@#&  term.setCursorPos(28, 1)!@#&  if whiteTurn then term.write(\"White to play\")!@#&  else term.write(\"Black to play\") end!@#&  !@#&  term.setCursorPos(1, 2)!@#&  term.write(string.rep(\"-\", w))!@#&end!@#&!@#&--Prints a list of the last 10 moves made!@#&function printMovesMade()!@#&  local var min = 1!@#&  local var max = #movesMade!@#&  if #movesMade > 9 then min = #movesMade - 9 end!@#&  for i = min,max do!@#&    term.setCursorPos(2, 3 + (i - min + 1))!@#&	term.clearLine()!@#&	--We convert the movesMade entry to a string here using long notation- B3exf2+ ect.!@#&	local entry = convertCoordinateToLetter(movesMade[i].oldx)..movesMade[i].oldy!@#&	!@#&	!@#&	if movesMade[i].castle == 0 then!@#&		--This is the standard, non-castling notation used!@#&		if movesMade[i].piece ~= \"p\" then entry = movesMade[i].piece..entry end!@#&		if movesMade[i].capture then entry = entry..\" x \"!@#&		else entry = entry..\" - \" end!@#&	!@#&		entry = entry..convertCoordinateToLetter(movesMade[i].newx)..movesMade[i].newy!@#&	!@#&		if movesMade[i].promotion ~= \"\" then entry = entry..\"=\"..movesMade[i].promotion end!@#&		if movesMade[i].ep then entry  = entry..\"e.p.\" end!@#&		if movesMade[i].check then entry = entry..\"+\"!@#&		elseif movesMade[i].mate then entry = entry..\"#\"!@#&		elseif movesMade[i].stale then entry = entry..\"$\" end!@#&		!@#&	elseif movesMade[i].castle == 1 then entry = \"O-O\"!@#&	elseif movesMade[i].castle == -1 then entry = \"O-O-O\" end!@#&	!@#&	term.write(i..\": \"..string.rep(\" \", 3 - #tostring(i))..entry)!@#&  end!@#&end!@#&!@#&--Prints the board.!@#&function printBoard()!@#&	for i = 1,8 do!@#&		local idx = i!@#&		if youAreWhite then idx = 9 - i end !@#&		term.setCursorPos(25, 3 + i)!@#&		term.write(idx..\" |\")!@#&		for j=1,8 do!@#&			local jdx = j!@#&			if not youAreWhite then jdx = 9 - j end!@#&			local str = board[idx][jdx]!@#&			if term.isColour() then!@#&				if string.sub(str, 1, 1)== \"-\" then !@#&					term.setTextColour(colours.black)!@#&					str = string.sub(str, 2) !@#&				elseif string.sub(str, 1, 1) == \"+\" then !@#&					term.setTextColour(colours.white)!@#&					str = string.sub(str, 2) !@#&				end!@#&				if idx%2 == jdx%2 then !@#&					term.setBackgroundColour(colours.brown)!@#&				else!@#&					term.setBackgroundColour(colours.yellow)!@#&				end!@#&				term.write(\" \"..str)!@#&				term.setTextColour(colours.white)!@#&				term.setBackgroundColour(colours.black)!@#&			else!@#&				if string.sub(str, 1, 1)== \"-\" and not blackVisible then str = \" \" end!@#&				if str ~= \" \" then str = string.sub(str, 2) end!@#&				if str == \" \" and idx%2 == jdx%2 then str = \"*\" end!@#&				term.write(\" \"..str)!@#&			end!@#&		end!@#&	end!@#&	term.setCursorPos(25, 12)!@#&	term.write(\"   \"..string.rep(\"-\", 16))!@#&	term.setCursorPos(25, 13)!@#&	if youAreWhite then term.write(\"    a b c d e f g h\")!@#&	else term.write(\"    h g f e d c b a\") end!@#&end!@#&!@#&--This method determines whether a specific move made by a player is legal!@#&--If not an error will have details (so these methods are long)!@#&--Note we use AmWhite here to test for checking!@#&function isLegal(oldx,oldy,newx,newy,amWhite)!@#&  if not coordinatesSensible(oldx, oldy, newx, newy) then return false end!@#&  local piece = string.sub(board[oldy][oldx], 2)!@#&  !@#&  local isLegal = false!@#&  if piece==\"p\" then isLegal = isLegalPawn(oldx,oldy,newx,newy,amWhite,false,false) !@#&  elseif piece==\"C\" then isLegal = isLegalCastle(oldx,oldy,newx,newy,amWhite,false)!@#&  elseif piece==\"N\" then isLegal = isLegalKnight(oldx,oldy,newx,newy,amWhite,false)!@#&  elseif piece==\"B\" then isLegal = isLegalBishop(oldx,oldy,newx,newy,amWhite,false)!@#&  elseif piece==\"Q\" then isLegal = isLegalQueen(oldx,oldy,newx,newy,amWhite,false)!@#&  elseif piece==\"K\" then isLegal = isLegalKing(oldx,oldy,newx,newy,amWhite,false,false) end!@#&  !@#&  if isLegal then!@#&	if amWhite then!@#&		if piece==\"K\" then isLegal = not isInCheck(newx,newy,amWhite)!@#&		else !@#&			local oldsrc = board[oldy][oldx]!@#&			local olddest = board[newy][newx]!@#&			-- I'm a bit worried about this... test!!@#&			board[newy][newx] = board[oldy][oldx]!@#&			board[oldy][oldx] = \" \"!@#&			!@#&			isLegal = not isInCheck(whiteKing.x,whiteKing.y,amWhite) !@#&			!@#&			board[oldy][oldx] = oldsrc!@#&			board[newy][newx] = olddest!@#&		end!@#&	else!@#&		if piece==\"K\" then isLegal = not isInCheck(newx,newy,amWhite)!@#&		else !@#&			local oldsrc = board[oldy][oldx]!@#&			local olddest = board[newy][newx]!@#&			-- I'm a bit worried about this... test!!@#&			board[newy][newx] = board[oldy][oldx]!@#&			board[oldy][oldx] = \" \"!@#&			!@#&			isLegal = not isInCheck(blackKing.x,blackKing.y,amWhite) !@#&			!@#&			board[oldy][oldx] = oldsrc!@#&			board[newy][newx] = olddest!@#&		end!@#&	end!@#&	!@#&	if not isLegal then printMessage(\"That move leaves your king in check.\") end!@#&  end!@#&  !@#&  return isLegal!@#&end!@#&!@#&--This loops through every position on the board, and where enemy pieces are!@#&--found, determines if any place the king in check.!@#&function isInCheck(posx,posy,amWhite)!@#&	local takeable = \"+\"!@#&	if amWhite then takeable = \"-\" end!@#&!@#&	for i=1,8 do!@#&		for j=1,8 do!@#&			if string.sub(board[j][i], 1, 1) == takeable then!@#&				local piece = string.sub(board[j][i], 2)!@#&				local legal = false!@#&				if piece==\"p\" then legal = isLegalPawn(i,j,posx,posy,not amWhite,true,true)!@#&				elseif piece==\"C\" then legal = isLegalCastle(i,j,posx,posy,not amWhite,true)!@#&				elseif piece==\"N\" then legal = isLegalKnight(i,j,posx,posy,not amWhite,true)!@#&				elseif piece==\"B\" then legal = isLegalBishop(i,j,posx,posy,not amWhite,true)!@#&				elseif piece==\"Q\" then legal = isLegalQueen(i,j,posx,posy,not amWhite,true)!@#&				elseif piece==\"K\" then legal = isLegalKing(i,j,posx,posy,not amWhite,true,true) end!@#&				if legal then return true end!@#&			end!@#&		end!@#&	end!@#&	return false!@#&end!@#&!@#&--Legal for a pawn. Color dependent. Manages movement and capturing (including en passant)!@#&--The forking exception means the pawn will ONLY accept diagonals, not forwards!@#&function isLegalPawn(oldx,oldy,newx,newy,amWhite,suppress,forKing)!@#&	if amWhite then!@#&		local takeable = \"-\"!@#&		if newy-oldy == 1 and newx-oldx == 0 and board[newy][newx] == \" \" and not forKing !@#&			then return true!@#&		elseif newy-oldy == 2 and newx-oldx == 0 and board[newy][newx] == \" \" and!@#&		  board[newy-1][newx] == \" \" and oldy == 2 and not forKing !@#&			then return true!@#&		elseif newy-oldy == 1 and math.abs(newx-oldx) == 1 then!@#&			if string.sub(board[newy][newx], 1, 1) == takeable or forKing then return true!@#&			elseif board[newy-1][newx] == takeable..\"p\" and!@#&			movesMade[#movesMade].newy == newy-1 and movesMade[#movesMade].newx == newx and!@#&		      math.abs(movesMade[#movesMade].newy - movesMade[#movesMade].oldy) == 2 then !@#&				return true!@#&			end!@#&			if not suppress then printMessage(\"You cannot take that space with the pawn.\") end!@#&		end!@#&		if not suppress then printMessage(\"Your pawn can't move there.\") end!@#&	else!@#&		local takeable = \"+\"!@#&		if newy-oldy == -1 and newx-oldx == 0 and board[newy][newx] == \" \" and not forKing!@#&			then return true!@#&		elseif newy-oldy == -2 and newx-oldx == 0 and board[newy][newx] == \" \" and!@#&		  board[newy+1][newx] == \" \" and oldy == 7 and not forKing !@#&			then return true!@#&		elseif newy-oldy == -1 and math.abs(newx-oldx) == 1 then!@#&			if string.sub(board[newy][newx], 1, 1) == takeable or forKing then return true!@#&			elseif board[newy+1][newx] == takeable..\"p\" and!@#&			  math.abs(movesMade[#modesMade].newy - movesMade[#movesMade].oldy) == 2 then !@#&				return true!@#&			end!@#&			if not suppress then printMessage(\"You cannot take that space with the pawn.\") end!@#&		end!@#&		if not suppress then printMessage(\"Your pawn can't move there.\") end!@#&	end!@#&	!@#&	return false!@#&end!@#&!@#&--Legal for a castle. Manages movement and capturing!@#&function isLegalCastle(oldx,oldy,newx,newy,amWhite,suppress)!@#&	local takeable = \"+\"!@#&	if amWhite then takeable = \"-\" end!@#&	!@#&	if newy == oldy then!@#&		local inc = 1!@#&		if newx < oldx then inc = -1 end!@#&		for i = oldx+inc, newx-inc, inc do!@#&			if board[newy][i] ~= \" \" then!@#&				if not suppress then printMessage(\"The castle's path is blocked to that space.\") end!@#&				return false!@#&			end!@#&		end!@#&		piece = board[newy][newx]!@#&		if piece == \" \" or string.sub(piece, 1, 1) == takeable then return true end!@#&		if not suppress then printMessage(\"Your castle can't take that piece.\") end!@#&		return false!@#&		!@#&	elseif newx == oldx then!@#&		local inc = 1!@#&		if newy < oldy then inc = -1 end!@#&		for i = oldy+inc, newy-inc, inc do!@#&			if board[i][newx] ~= \" \" then!@#&				if not suppress then printMessage(\"The castle's path is blocked to that space.\") end!@#&				return false!@#&			end!@#&		end!@#&		piece = board[newy][newx]!@#&		if piece == \" \" or string.sub(piece, 1, 1) == takeable then return true end!@#&		if not suppress then printMessage(\"Your castle can't take that piece.\") end!@#&		return false!@#&	end!@#&	if not suppress then printMessage(oldx..\",\"..oldy..\" can only move along ranks or files.\") end!@#&	return false!@#&end!@#&!@#&--Legal for a knight. Manages movement and capturing!@#&function isLegalKnight(oldx,oldy,newx,newy,amWhite,suppress)!@#&	local takeable = \"+\"!@#&	if amWhite then takeable = \"-\" end!@#&!@#&	if (math.abs(oldx-newx) == 1 and math.abs(oldy-newy) == 2) or!@#&	  (math.abs(oldx-newx) == 2 and math.abs(oldy-newy) == 1) then!@#&		if board[newy][newx] == \" \" or string.sub(board[newy][newx], 1, 1) == takeable then!@#&			return true!@#&		end!@#&	end!@#&	!@#&	if not suppress then printMessage(\"Your knight can't move there.\") end!@#&	return false!@#&end!@#&!@#&--Legal for a bishop. Manages movement and capturing!@#&function isLegalBishop(oldx,oldy,newx,newy,amWhite,suppress)!@#&	local takeable = \"+\"!@#&	if amWhite then takeable = \"-\" end!@#&	!@#&	if math.abs(oldx-newx) == math.abs(oldy-newy) then!@#&		local xmp = 1!@#&		local ymp = 1!@#&		if newx < oldx then xmp = -1 end!@#&		if newy < oldy then ymp = -1 end!@#&		for i = 1,math.abs(oldx-newx) - 1 do!@#&			if board[oldy + (i * ymp)][oldx + (i * xmp)] ~= \" \" then!@#&				printMessage(\"The bishop's path is blocked to that space.\")!@#&				return false!@#&			end!@#&		end!@#&		piece = board[newy][newx]!@#&		if piece == \" \" or string.sub(piece, 1, 1) == takeable then return true end!@#&		printMessage(\"Your bishop can't take that piece.\")!@#&		return false!@#&	end!@#&	if not suppress then printMessage(\"Bishops can only move along diagonals.\") end!@#&	return false!@#&end!@#&!@#&--Legal for a queen. Manages movement and capturing!@#&function isLegalQueen(oldx,oldy,newx,newy,amWhite,suppress)!@#&	local possible = isLegalBishop(oldx,oldy,newx,newy,amWhite,suppress) or!@#&	  isLegalCastle(oldx,oldy,newx,newy,amWhite,suppress)!@#&	if not possible and not suppress then printMessage(\"Your queen can't move there.\") end!@#&	return possible!@#&end!@#&!@#&--Legal for a king. Managed movement and capturing!@#&-- The forking exception excludes the ability to castle!@#&function isLegalKing(oldx,oldy,newx,newy,amWhite,suppress,forKing)!@#&	local takeable = \"+\"!@#&	if amWhite then takeable = \"-\" end!@#&	!@#&	if newx - oldx == 2 and newy-oldy == 0 and not forKing then return isLegalCastling(\"king\", amWhite)!@#&	elseif newx - oldx == -2 and newy-oldy == 0 and not forKing then return isLegalCastling(\"queen\", amWhite)!@#&	elseif math.abs(oldx-newx) > 1 or math.abs(oldy-newy) > 1 then!@#&		if not suppress then printMessage(\"Your king can only move one tile in any direction\") end!@#&		return false!@#&	end!@#&	!@#&	piece = board[newy][newx]!@#&	if piece == \" \" or string.sub(piece, 1, 1) == takeable then return true end!@#&	if not suppress then printMessage(\"Your king can't take that piece.\") end!@#&	return false!@#&end!@#&!@#&--This isLegal method is aimed specifically at castling, with the string being!@#&--passed \"king\" or \"queen\" to indicate kingside or queenside castling.!@#&function isLegalCastling(side,amWhite)!@#&	if amWhite then!@#&		if side == \"king\" then!@#&			if board[1][6]~= \" \" or board[1][7] ~= \" \" then!@#&				printMessage(\"You cannot castle- the path is blocked\")!@#&				return false!@#&			end!@#&			!@#&			for i=1,#movesMade do!@#&				local move = movesMade[i]!@#&				if move.piece == \"K\" and move.player == \"+\" then!@#&					printMessage(\"You cannot castle- your king has moved before.\")!@#&					return false!@#&				elseif move.piece == \"C\" and move.player == \"+\"!@#&				  and move.oldx == 8 and move.oldy == 1 then!@#&					printMessage(\"You cannot castle- your ks castle has moved before.\")!@#&					return false!@#&				end!@#&			end!@#&			return true!@#&		elseif side == \"queen\" then!@#&			if board[1][2] ~= \" \" or board[1][3] ~= \" \" or board[1][4] ~= \" \" then!@#&				printMessage(\"You cannot castle- the path is blocked\")!@#&				return false!@#&			end!@#&			!@#&			for i=1,#movesMade do!@#&				local move = movesMade[i]!@#&				if move.piece == \"K\" and move.player == \"+\" then!@#&					printMessage(\"You cannot castle- your king has moved before.\")!@#&					return false!@#&				elseif move.piece == \"C\" and move.player == \"+\"!@#&				  and move.oldx == 1 and move.oldy == 1 then!@#&					printMessage(\"You cannot castle- your qs castle has moved before.\")!@#&					return false!@#&				end!@#&			end!@#&			return true!@#&		end!@#&		!@#&	else!@#&	!@#&		if side == \"king\" then!@#&			if board[8][6]~= \" \" or board[8][7] ~= \" \" then!@#&				printMessage(\"You cannot castle- the path is blocked\")!@#&				return false!@#&			end!@#&			!@#&			for i=1,#movesMade do!@#&				local move = movesMade[i]!@#&				if move.piece == \"K\" and move.player == \"-\" then!@#&					printMessage(\"You cannot castle- your king has moved before.\")!@#&					return false!@#&				elseif move.piece == \"C\" and move.player == \"-\" and!@#&				  move.oldx == 8 and move.oldy == 8 then!@#&					printMessage(\"You cannot castle- your ks castle has moved before.\")!@#&					return false!@#&				end!@#&			end!@#&			return true!@#&		elseif side == \"queen\" then!@#&			if board[8][2] ~= \" \" or board[8][3] ~= \" \" or board[8][4] ~= \" \" then!@#&				printMessage(\"You cannot castle- the path is blocked\")!@#&				return false!@#&			end!@#&			!@#&			for i=1,#movesMade do!@#&				local move = movesMade[i]!@#&				if move.piece == \"K\" and move.player == \"-\" then!@#&					printMessage(\"You cannot castle- your king has moved before.\")!@#&					return false!@#&				elseif move.piece == \"C\" and move.player == \"-\" and!@#&				  move.oldx == 1 and move.oldy == 8 then!@#&					printMessage(\"You cannot castle- your qs castle has moved before.\")!@#&					return false!@#&				end!@#&			end!@#&			return true!@#&		end!@#&	end!@#&end!@#&!@#&--Submethod of isLegal, determines whether or not the choice of piece and!@#&--destination square make sense within the game!@#&function coordinatesSensible(oldx, oldy, newx, newy)!@#&  if oldx == newx and oldy == newy then!@#&    printMessage(\"Each piece must move at least 1 square.\")!@#&	return false!@#&  end!@#&!@#&  if oldx < 1 or oldx > 8 or newx < 1 or newx > 8 or oldy < 1 or oldy > 8!@#&    or newy < 1 or newy > 8 then!@#&	printMessage(\"The coordinates you provided were invalid\")!@#&	return false !@#&  end!@#&  local piece = board[oldy][oldx]!@#&  if piece == \" \" then!@#&    printMessage(\"There isn't a piece on that space\")!@#&    return false!@#&  elseif (string.sub(piece, 1, 1) == \"+\") ~= youAreWhite then!@#&    printMessage(\"There's an enemy piece on that space\")!@#&    return false end!@#&  return true!@#&end!@#&!@#&--This actually acts upon the move made. It moves the piece on the board, adds!@#&--an entry to the moves list, tells the other commputer the move is made and!@#&--refreshes everything.!@#&function makeMove(oldx,oldy,newx,newy,amWhite)!@#&	local player = \"+\"!@#&	local foe = \"-\"!@#&	if not amWhite then !@#&		player = \"-\" !@#&		foe = \"+\"!@#&	end!@#&	!@#&    local capture = false!@#&	local ep = false!@#&	!@#&	if board[newy][newx] ~= \" \" then capture = true end!@#&	if board[newy][newx] == \" \" and math.abs(oldx-newx) == 1 and!@#&	  board[oldy][oldx]:sub(2) == \"p\" and board[oldy][newx]:sub(2) == \"p\" then!@#&		capture = true!@#&		ep = true!@#&		board[oldy][newx] = \" \"!@#&	end!@#&	!@#&    board[newy][newx] = board[oldy][oldx]!@#&	board[oldy][oldx] = \" \"!@#&	local piece = string.sub(board[newy][newx], 2)!@#&	!@#&	--We handle updating king positions and CASTLING here!@#&	castle = 0!@#&	if board[newy][newx] == \"+K\" then!@#&		whiteKing = { x = newx, y = newy } !@#&		if newx - oldx == 2 then!@#&			board[1][6] = board[1][8]!@#&			board[1][8] = \" \"!@#&			castle = 1!@#&		elseif newx - oldx == -2 then!@#&			board[1][4] = board[1][1]!@#&			board[1][1] = \" \"!@#&			castle = -1!@#&		end!@#&	end!@#&	if board[newy][newx] == \"-K\" then!@#&		blackKing = { x = newx, y = newy } !@#&		if newx - oldx == 2 then!@#&			board[8][6] = board[8][8]!@#&			board[8][8] = \" \"!@#&			castle = 1!@#&		elseif newx - oldx == -2 then!@#&			board[8][4] = board[8][1]!@#&			board[8][1] = \" \"!@#&			castle = -1!@#&		end!@#&	end!@#&	!@#&	--Promotion is handled here!@#&	promotion = \"\"!@#&	if piece == \"p\" then!@#&		if (youAreWhite and player == \"+\" and newy == 8) or!@#&		  (not youAreWhite and player == \"-\" and newy == 1) then!@#&			handlePawnPromotion(newx, newy, youAreWhite)!@#&			promotion = string.sub(board[newy][newx], 2)!@#&			if not isLocal then!@#&				rednet.send(opponentID, \"#P\"..newx..newy..board[newy][newx])!@#&				sendToMonitors(\"#P\"..newx..newy..board[newy][newx])!@#&			end!@#&		end!@#&	end!@#&	!@#&	local check = false!@#&	--Again, needs to be debugged!@#&	if not amWhite then!@#&		check = isInCheck(whiteKing.x, whiteKing.y, true)!@#&	else!@#&		check = isInCheck(blackKing.x, blackKing.y, false)!@#&	end!@#&	!@#&	!@#&	table.insert(movesMade, {!@#&	  player = player,!@#&	  piece = piece,!@#&	  oldx = oldx,!@#&	  oldy = oldy,!@#&	  newx = newx,!@#&	  newy = newy,!@#&	  capture = capture,!@#&	  castle = castle,!@#&	  promotion = promotion,!@#&	  ep = ep,!@#&	  check = check,!@#&	  mate = false,!@#&	  stale = false!@#&	})!@#&end!@#&!@#&--A specialized function that reads input to determine a pawn promotion!@#&--This is called in makeMove, but only if it's the same player!@#&function handlePawnPromotion(x,y,amWhite)!@#&	printMessage(\"Promote: (Q)ueen, (C)astle, k(N)ight or (B)ishop\")!@#&	term.setCursorPos(1, 16)!@#&	term.clearLine()!@#&	term.write(\"> \")!@#&	!@#&	local ptype = \"+\"!@#&	if not amWhite then ptype = \"-\" end!@#&	!@#&	local id,key = os.pullEvent(\"char\")!@#&	if string.upper(key) == \"C\" then!@#&		board[y][x] = ptype..\"C\"!@#&	elseif string.upper(key) == \"N\" then!@#&		board[y][x] = ptype..\"N\"!@#&	elseif string.upper(key) == \"B\" then!@#&		board[y][x] = ptype..\"B\"!@#&	else!@#&		--We do this by default... easier this way!@#&		board[y][x] = ptype..\"Q\"!@#&	end!@#&	!@#&	printMessage(\"Pawn promoted\")!@#&	--Restarts that timer we so rudely interrupted!@#&	os.startTimer(0.1)!@#&end!@#&!@#&--This promotes a pawn from a network message!@#&function handleRemotePawnPromotion(msg)!@#&	local x = tonumber(string.sub(msg, 1, 1))!@#&	local y = tonumber(string.sub(msg, 2, 2))!@#&	local piece = string.sub(msg, 3)!@#&	!@#&	board[y][x] = piece!@#&	movesMade[#movesMade].promotion = string.sub(msg, 4)!@#&end!@#&!@#&--Takes in an input string and converts it to a chess query.!@#&--The input method is EXTREMELY strict. This ensures it conforms!@#&--The input string must be 5 characters long- the first two are the X and Y of!@#&--the piece to move, followed by a space character and the second two coordinates.!@#&--Example of a legal input: e5-b7 a1 a6 f3xg2!@#&--Example of illegal input: 55 b3 a4  h8 f3xg2+!@#&--This will return true if the move occurred, false otherwise!@#&function parseInput(input,amWhite)!@#&	if input == \"quit\" or input == \"exit\" then!@#&		if not isLocal then!@#&			rednet.send(opponentID, \"#E\")!@#&		end!@#&		playing = false!@#&		return true!@#&	end!@#&	if (input == \"reset\" or input == \"restart\") and isLocal then!@#&		resetGame(true)!@#&		return true!@#&	end!@#&	if input == \"draw\" then!@#&		printMessage(\"Waiting for response...\")!@#&		rednet.send(opponentID, \"#D\")!@#&		while true do!@#&			local id,key,msg = os.pullEvent(\"rednet_message\")!@#&			if msg == \"#Y\" then!@#&				printMessage(\"Game result: 1/2 - 1/2\")!@#&				os.pullEvent(\"key\")!@#&				playing = false!@#&				return true!@#&			elseif msg == \"#N\" then!@#&				printMessage(\"Draw rejected.\")!@#&				os.startTimer(0.2)!@#&				return false!@#&			end!@#&		end!@#&	end!@#&	!@#&	if gameOver then!@#&		printMessage(\"Game is over- you can \\'exit\\' or \\'restart\\'.\")!@#&		return false!@#&	end!@#&!@#&	local oldx = convertLetterToCoordinate(string.sub(input, 1, 1))!@#&	local oldy = tonumber(string.sub(input, 2, 2))!@#&	if not oldy then oldy = -1 end!@#&	local newx = convertLetterToCoordinate(string.sub(input, 4, 4))!@#&	local newy = tonumber(string.sub(input, 5, 5))!@#&	if not newy then newy = -1 end!@#&  !@#&	if isLegal(oldx,oldy,newx,newy,amWhite) then!@#&		printMessage(\"Making move...\")!@#&		makeMove(oldx,oldy,newx,newy,amWhite)!@#&		return true!@#&	end!@#&	return false!@#&end!@#&!@#&--Runs on the OS timer and uses it to update the black pieces flashing on and off!@#&function updateBlackFlashing()!@#&  blackVisible = not blackVisible!@#&  printBoard()!@#&  !@#&  local length = 0.2!@#&  if not blackVisible then length = 0.15 end!@#&  os.startTimer(length)!@#&end!@#&!@#&--This prints the oneline message above the command prompt!@#&function printMessage(message)!@#&  term.setCursorPos(1, 15)!@#&  term.clearLine()!@#&  term.write(message)!@#&end!@#&!@#&--This converts a letter coordinate like a or f to a number!@#&function convertLetterToCoordinate(input)!@#&  if input==\"a\" then return 1!@#&  elseif input==\"b\" then return 2!@#&  elseif input==\"c\" then return 3!@#&  elseif input==\"d\" then return 4!@#&  elseif input==\"e\" then return 5!@#&  elseif input==\"f\" then return 6!@#&  elseif input==\"g\" then return 7!@#&  elseif input==\"h\" then return 8!@#&  else return -1 end!@#&end!@#&!@#&--The reverse operation. Converts a number to a letter coordiante.!@#&function convertCoordinateToLetter(input)!@#&  if input==1 then return \"a\"!@#&  elseif input==2 then return \"b\"!@#&  elseif input==3 then return \"c\"!@#&  elseif input==4 then return \"d\"!@#&  elseif input==5 then return \"e\"!@#&  elseif input==6 then return \"f\"!@#&  elseif input==7 then return \"g\"!@#&  elseif input==8 then return \"h\"!@#&  else return -1 end!@#&end!@#&!@#&--An update function for the input display- displaying the latest string!@#&function updateInputDisplay()!@#&	term.setCursorPos(1, 16)!@#&	term.clearLine()!@#&	term.write(\"> \"..lastQuery)!@#&end!@#&!@#&--Restores the board to it's original state, and clears all moves.!@#&function resetGame(amWhite)!@#&	term.clear()!@#&	youAreWhite = amWhite!@#&	whiteTurn = true!@#&	movesMade = {}!@#&	gameOver = false!@#&	--[[!@#&	board = {!@#&		--        a     b     c     d     e     f     g     h!@#&		[8] = { \" \",  \" \",  \" \",  \" \",  \" \",  \" \",  \" \",  \" \" },!@#&		[7] = { \" \",  \" \",  \" \",  \" \",  \"+p\",  \" \",  \" \",  \" \" },!@#&		[6] = { \" \",  \" \",  \" \",  \" \",  \" \",  \" \",  \" \",  \" \" },!@#&		[5] = { \" \",  \" \",  \" \",  \" \",  \" \",  \" \",  \" \",  \" \" },!@#&		[4] = { \" \",  \" \",  \" \",  \" \",  \" \",  \" \",  \" \",  \" \" },!@#&		[3] = { \" \",  \" \",  \" \",  \" \",  \" \",  \" \",  \" \",  \" \" },!@#&		[2] = { \" \",  \" \",  \" \",  \" \",  \"-p\",  \" \",  \" \",  \" \" },!@#&		[1] = { \" \",  \" \",  \" \",  \" \",  \" \",  \" \",  \" \",  \" \" }!@#&		--        a     b     c     d     e     f     g     h!@#&	}]]--!@#&	board = {!@#&		--       a     b     c     d     e     f     g     h!@#&		[8] = { \"-C\", \"-N\", \"-B\", \"-Q\", \"-K\", \"-B\", \"-N\", \"-C\"},!@#&		[7] = { \"-p\", \"-p\", \"-p\", \"-p\", \"-p\", \"-p\", \"-p\", \"-p\"},!@#&		[6] = { \" \",  \" \",  \" \",  \" \",  \" \",  \" \",  \" \",  \" \" },!@#&		[5] = { \" \",  \" \",  \" \",  \" \",  \" \",  \" \",  \" \",  \" \" },!@#&		[4] = { \" \",  \" \",  \" \",  \" \",  \" \",  \" \",  \" \",  \" \" },!@#&		[3] = { \" \",  \" \",  \" \",  \" \",  \" \",  \" \",  \" \",  \" \" },!@#&		[2] = { \"+p\", \"+p\", \"+p\", \"+p\", \"+p\", \"+p\", \"+p\", \"+p\"},!@#&		[1] = { \"+C\", \"+N\", \"+B\", \"+Q\", \"+K\", \"+B\", \"+N\", \"+C\"}!@#&		--       a     b     c     d     e     f     g     h!@#&	}!@#&end!@#&!@#&--This manages the game logic. It runs in an infinite loop (of course)!@#&function playGame()!@#&	term.clear()!@#&    os.startTimer(0.2)!@#&	while playing do!@#&		printMovesMade()!@#&		printBoard()!@#&		printHeader()!@#&		term.setCursorPos(1, 16)!@#&		term.clearLine()!@#&		term.write(\"> \")!@#&		!@#&		if not isLocal and youAreWhite ~= whiteTurn then!@#&			local proMsg = nil!@#&			while true do!@#&				local id,  key, msg = os.pullEvent()!@#&				if id == \"timer\" then updateBlackFlashing()!@#&				elseif id == \"rednet_message\" and key == opponentID then!@#&					if msg == \"#E\" then!@#&						playing = false!@#&						break!@#&					elseif msg == \"#D\" then!@#&						printMessage(\"Draw offered- accept? (Y)es or (N)o\")!@#&						local id,key = os.pullEvent(\"char\")!@#&						if key == \"Y\" or key == \"y\" then!@#&							playing = false!@#&							printMessage(\"Game result: 1/2 - 1/2\")!@#&							rednet.send(opponentID, \"#Y\")!@#&							os.pullEvent(\"key\")!@#&							break!@#&						else!@#&							printMessage(\"Draw rejected.\")!@#&							rednet.send(opponentID, \"#N\")!@#&							os.startTimer(0.2)!@#&						end!@#&					elseif string.find(msg, \"#P\") == 1 then!@#&						proMsg = string.gsub(msg, \"#P\", \"\")!@#&					else!@#&						local oldx = convertLetterToCoordinate(string.sub(msg, 1, 1))!@#&						local oldy = tonumber(string.sub(msg, 2, 2))!@#&						local newx = convertLetterToCoordinate(string.sub(msg, 4, 4))!@#&						local newy = tonumber(string.sub(msg, 5, 5))!@#&						!@#&						makeMove(oldx,oldy,newx,newy,not youAreWhite)!@#&						!@#&						if proMsg then handleRemotePawnPromotion(proMsg) end!@#&						break!@#&					end!@#&				end!@#&			end!@#&		else!@#&			local noMoves = #movesMade!@#&			while noMoves == #movesMade do!@#&				local id,key = os.pullEvent()!@#&				if id == \"timer\" then updateBlackFlashing()!@#&				elseif id == \"key\" then !@#&					if key == 14 then!@#&						if #lastQuery > 1 then lastQuery = string.sub(lastQuery, 1, #lastQuery-1)!@#&						else lastQuery = \"\" end!@#&					elseif key == 28 then !@#&						local occ = parseInput(lastQuery, youAreWhite)!@#&						if occ and not isLocal then!@#&							rednet.send(opponentID, lastQuery) !@#&							sendToMonitors(lastQuery)!@#&						end!@#&						!@#&						if (lastQuery == \"reset\" or lastQuery == \"restart\") then!@#&							lastQuery = \"\"!@#&							break!@#&						end!@#&						lastQuery = \"\"!@#&						if not playing then break end!@#&					end!@#&					updateInputDisplay()!@#&				elseif id == \"char\" then!@#&					lastQuery = lastQuery..key!@#&					updateInputDisplay()!@#&				end!@#&			end!@#&		end!@#&		!@#&		if isLocal then youAreWhite = not youAreWhite end!@#&		whiteTurn = not whiteTurn!@#&	end!@#&	--With the menu system, we allow the player to return to the main menu!@#&	--This can be turned off to make an exit quit chess altogether!@#&	playing = true!@#&	sendToMonitors(\"#Q\")!@#&end!@#&!@#&--Finds the side the modem is on, and opens it!@#&function openModem()!@#&	for i=1,#rs.getSides() do!@#&		if peripheral.isPresent(rs.getSides()[i]) and peripheral.getType(rs.getSides()[i]) == \"modem\" then!@#&			side = rs.getSides()[i]!@#&			rednet.open(side)!@#&			return true!@#&		end!@#&	end!@#&	return false!@#&end!@#&!@#&--Sends a message to each monitor hooked up to the network!@#&function sendToMonitors(msg)!@#&	for k,v in pairs(monitorList) do!@#&		rednet.send(v, msg)!@#&	end!@#&end!@#&!@#&--[[					GUI REGION!@#&		This code handles the visual interface for the!@#&		menu system and network play of the Chess system		]]--!@#&		!@#&--The error message displayed when a network error has occurred!@#&local networkErrorMessage = \"\"!@#&--The currently selected menu option!@#&local menuSel = 1!@#&--Which help page is currently being viewed!@#&local helpPage = 1!@#&!@#&--Draws the main menu!@#&function drawMainInterface()!@#&	term.clear()!@#&	drawASCIIKing(w-12,h-14)!@#&	drawASCIIRook(5, h-9)!@#&	!@#&	term.setCursorPos(4, 3)!@#&	term.write(\"Minecraft Chess\")!@#&	term.setCursorPos(4, 4)!@#&	term.write(\"===============\")!@#&	!@#&	printCentered(\"Local Game\", 7)!@#&	printCentered(\"Network Game\", 10)!@#&	printCentered(\"Instructions\", 13)!@#&	printCentered(\"Quit Game\", 16)!@#&	!@#&	printCentered(\"------------\", 5 + menuSel * 3)!@#&end!@#&!@#&--Draws the \"host network game\" menu interface!@#&function drawNetworkInterface()!@#&	term.clear()!@#&	drawASCIIBishop(w - 10, h - 12)!@#&	drawASCIIPawn(3, h - 7)!@#&	drawASCIIPawn(5, h - 6)!@#&	!@#&	printCentered(\"Network Game\", 2)!@#&	printCentered(\"============\", 3)!@#&	!@#&	printCentered(\"Host\", 7)!@#&	printCentered(\"Join\", 10)!@#&	printCentered(\"Back\", 13)!@#&	printCentered(\"------\", 5 + menuSel * 3)!@#&end!@#&!@#&--Draws the screen that requests an computer ID!@#&function drawIDRequest()!@#&	term.clear()!@#&	drawASCIIBishop(w - 10, h - 12)!@#&	drawASCIIPawn(3, h - 7)!@#&	drawASCIIPawn(5, h - 6)!@#&	!@#&	term.setCursorPos(4, 5)!@#&	term.write(\"Enter the host's computer ID: \")!@#&end!@#&!@#&--In the event players can't connet, by timeout or no modem or something this says so!@#&function drawNetworkError()!@#&	term.clear()!@#&	drawASCIIBishop(w - 10, h - 12)!@#&	drawASCIIPawn(3, h - 7)!@#&	drawASCIIPawn(5, h - 6)!@#&	!@#&	printCentered(networkErrorMessage, 5)!@#&	printCentered(\"Press any key to go back.\", 10)!@#&end!@#&!@#&--Draws the \"wait for connection\" interface!@#&function drawWaitForConnection()!@#&	term.clear()!@#&	drawASCIIBishop(w - 10, h - 12)!@#&	drawASCIIPawn(3, h - 7)!@#&	drawASCIIPawn(5, h - 6)!@#&	!@#&	printCentered(\"Waiting for connection...\", 5)!@#&	printCentered(\"(Your ID is \"..os.getComputerID()..\")\", 6)!@#&	printCentered(\"Press enter to cancel\", 8)!@#&end!@#&!@#&--Draws the tutorial help functions!@#&function drawHelp()!@#&	term.clear()!@#&	drawASCIIKnight(3, h - 7)!@#&	drawASCIIPawn(13, h - 6)!@#&	!@#&	local nextstr = \"Next\"!@#&	local prevstr = \"Prev\"!@#&	local offset = 0!@#&	!@#&	for i=1,#helpText[helpPage] do!@#&		term.setCursorPos(2,1 + i)!@#&		term.write(helpText[helpPage][i])!@#&	end!@#&	!@#&	if helpPage == 1 then !@#&		prevstr = string.rep(\" \", 4)!@#&		offset = 12!@#&	end!@#&	if helpPage == #helpText then nextstr = string.rep(\" \", 4) end!@#&	!@#&	term.setCursorPos(20, 15)!@#&	term.write(prevstr..string.rep(\" \", 8)..\"Back\"..string.rep(\" \", 8)..nextstr)!@#&	term.setCursorPos(8 + offset + menuSel * 12, 16)!@#&	term.write(\"----\")!@#&	term.setCursorPos(35, 18)!@#&	term.write(\"Page \"..helpPage..\" of \"..#helpText)!@#&end!@#&!@#&--Starts a local game!@#&function startLocalGame()!@#&	resetGame(true)!@#&	isLocal = true!@#&	playGame()!@#&	currentInterface = interfaces[\"main\"]!@#&end!@#&!@#&--Starts a network game!@#&function startNetworkGame(amWhite)!@#&	resetGame(amWhite)!@#&	isLocal = false!@#&	playGame()!@#&	currentInterface = interfaces[\"main\"]!@#&end!@#&!@#&--[[The following methods are tiny stubs to fix the variable no access issue]]--!@#&--Necessary to set the interface back to main(no access from inside a list)!@#&function returnToMainMenu()!@#&	currentInterface = interfaces[\"main\"]!@#&end!@#&--Necessary to update the help pages!@#&function updateHelpPage(value)!@#&	helpPage = value!@#&	if helpPage ~= 1 then menuSel = 2 end!@#&end!@#&!@#&--Prints the provided string in the centre of the screen at the y coordinate specified	!@#&function printCentered(str,y)!@#&	term.setCursorPos(w/2 - #str/2, y)!@#&	term.write(str)!@#&end!@#&!@#&--Draws an ASCII king at the desired coordinates. Dimensions are (10,14) characters!@#&function drawASCIIKing(x,y)!@#&	local kingList = {!@#&		\"   _||_   \",!@#&		\"   _||_   \",!@#&		\" _/____\\\\_ \",!@#&	   \" \\\\      / \",!@#&	   \"  \\\\____/  \",!@#&		\"  (____)  \",!@#&		\"   |  |   \",!@#&		\"   |  |   \",!@#&		\"   |  |   \",!@#&		\"   |  |   \",!@#&		\"   |__|   \",!@#&		\"  /    \\\\  \",!@#&		\" (______) \",!@#&		\"(________)\",!@#&	}!@#&	!@#&	for i=1,#kingList do!@#&		term.setCursorPos(x, y + i - 1)!@#&		term.write(kingList[i])!@#&	end!@#&end!@#&!@#&--Draws an ASCII rook at the desired coordinates. Dimensions are (8,9) characters!@#&function drawASCIIRook(x,y)!@#&	local rookList = {!@#&		\" |'-'-'|\",!@#&		\"  \\\\   / \",!@#&		\"  |   |  \",!@#&		\"  |   |  \",!@#&		\"  |   |  \",!@#&		\"  |   |  \",!@#&		\"  |___|  \",!@#&		\" /_____\\\\ \",!@#&		\"(_______)\"!@#&	}!@#&	!@#&	for i=1,#rookList do!@#&		term.setCursorPos(x, y + i - 1)!@#&		term.write(rookList[i])!@#&	end!@#&end!@#&!@#&--Draws an ASCII pawn at the desired coordinates. Dimensions are (6,6) characters!@#&function drawASCIIPawn(x,y)!@#&	local pawnList = {!@#&		\"  __  \",!@#&		\" (  ) \",!@#&		\"  ||  \",!@#&		\"  ||  \",!@#&		\" /__\\\\ \",!@#&		\"(____)\"!@#&	}!@#&	!@#&	for i=1,#pawnList do!@#&		term.setCursorPos(x, y + i - 1)!@#&		term.write(pawnList[i])!@#&	end!@#&end!@#&!@#&--Draws an ASCII knight at the desired coordinates. Dimensions are (7,9) characters!@#&function drawASCIIKnight(x,y)!@#&	local knightList = {!@#&		\" __/\\\"\\\"\\\"\\\\     \",!@#&		\"]___ O  }\",!@#&		\"    /   }\",!@#&		\"  /~    }\",!@#&	   \"  \\\\____/ \",!@#&		\"  /____\\\\ \",!@#&		\" (______)\"!@#&	}!@#&	!@#&	for i=1,#knightList do!@#&		term.setCursorPos(x, y + i - 1)!@#&		term.write(knightList[i])!@#&	end!@#&end!@#&!@#&--Draws an ASCII bishop at the desired coordinates. Dimensions are (8,11) characters!@#&function drawASCIIBishop(x,y)!@#&	local bishopList = {!@#&		\"   _<>  \",!@#&	    \" /\\\\\\\\  \\\\\",!@#&		\" \\\\ \\\\) /\",!@#&	   \"  \\\\__/  \",!@#&		\" (____) \",!@#&		\"  |  |  \",!@#&		\"  |  |  \",!@#&		\"  |  |  \",!@#&		\"  |__|  \",!@#&		\" /____\\\\ \",!@#&		\"(______)\"!@#&	}!@#&	!@#&	for i=1,#bishopList do!@#&		term.setCursorPos(x, y + i - 1)!@#&		term.write(bishopList[i])!@#&	end!@#&end!@#&!@#&!@#&--Requests an ID for the enemy computer!@#&function inputOpponentID()!@#&	opponentID = tonumber(io.read())!@#&	if not opponentID then!@#&		networkErrorMessage = \"The ID you entered is invalid\"!@#&		currentInterface = interfaces[\"networkerror\"]!@#&	else!@#&		currentInterface = interfaces[\"join\"]!@#&	end!@#&end!@#&!@#&!@#&--[WOLVAN, your code goes here]--!@#&!@#&--Attempts to join a hosted game!@#&function waitForHost()!@#&	currentInterface = interfaces[\"main\"]!@#&	if not openModem() then!@#&		networkErrorMessage = \"Your computer doesn't have a modem!\"!@#&		currentInterface = interfaces[\"networkerror\"]!@#&		return!@#&	end!@#&!@#&	rednet.send(opponentID, \"#C\")!@#&	while true do!@#&		local id,msg = rednet.receive(5)!@#&		currentInterface = interfaces[\"main\"]!@#&		if id == opponentID and msg == \"#C\" then!@#&			currentInterface = interfaces[\"waittostart\"]!@#&			return!@#&		end!@#&		if id == nil then break end!@#&	end!@#&	networkErrorMessage = \"The connection timed out.\"!@#&	currentInterface = interfaces[\"networkerror\"]!@#&end!@#&!@#&--Waits on a user to join the game!@#&function waitForClient()!@#&	if not openModem() then!@#&		networkErrorMessage = \"Your computer doesn't have a modem!\"!@#&		currentInterface = interfaces[\"networkerror\"]!@#&		return!@#&	end!@#&	!@#&	while true do!@#&		local evt,id,msg = os.pullEvent()!@#&		if evt == \"rednet_message\" and msg == \"#C\" then!@#&			opponentID = id!@#&			rednet.send(opponentID, \"#C\")!@#&			currentInterface = interfaces[\"addmonitors\"]!@#&			return!@#&		elseif evt == \"key\" and id == 28 then!@#&			currentInterface = interfaces[\"main\"]!@#&			return!@#&		end!@#&	end!@#&	networkErrorMessage = \"The connection timed out.\"!@#&	currentInterface = interfaces[\"networkerror\"]!@#&end!@#&!@#&--Draws the request to add more monitors or just move on!@#&function drawAddMonitors()!@#&	term.clear()!@#&	drawASCIIBishop(w - 10, h - 12)!@#&	drawASCIIPawn(3, h - 7)!@#&	drawASCIIPawn(5, h - 6)!@#&	!@#&	printCentered(\"Connection established- add monitors now\", 5)!@#&	printCentered(\"(Your ID is \"..os.getComputerID()..\")\", 6)!@#&	printCentered(\"Press any key to start the game\", 8)!@#&end!@#&!@#&--Waits for any monitors to connect to the network, and starts a new game when ready!@#&function addMonitors()!@#&	while true do!@#&		local id,key,value = os.pullEvent()!@#&		if id == \"rednet_message\" and value==\"#M\" then!@#&			table.insert(monitorList, key) !@#&			rednet.send(opponentID, \"#M\"..key)!@#&			rednet.send(key, \"#Y\")!@#&		elseif id == \"key\" and key == 28 then!@#&			rednet.send(opponentID, \"#S\")!@#&			startNetworkGame(true)!@#&			currentInterface = interfaces[\"main\"]!@#&			return!@#&		end!@#&	end!@#&end!@#&!@#&--Displays a simple \"waiting to start\"  message!@#&function drawWaitingToStart()!@#&	term.clear()!@#&	drawASCIIBishop(w - 10, h - 12)!@#&	drawASCIIPawn(3, h - 7)!@#&	drawASCIIPawn(5, h - 6)!@#&	!@#&	printCentered(\"Connection Established!\", 5)!@#&	printCentered(\"Waiting for host...\", 6)!@#&	printCentered(\"The game will start shortly\", 8)!@#&end!@#&!@#&--Listens for any monitors that may be received and when #S appears the game starts!@#&function waitToStart()!@#&	while true do!@#&		local id, key, value = os.pullEvent(\"rednet_message\")!@#&		if key == opponentID then!@#&			if string.find(value, \"#M\") == 1 then!@#&				value = string.sub(value, 3)!@#&				if tonumber(value) then table.insert(monitorList, (tonumber(value))) end!@#&			elseif value == \"#S\" then!@#&				startNetworkGame(false)!@#&				currentInterface = interfaces[\"main\"]!@#&				return!@#&			end!@#&		end!@#&	end!@#& end!@#&!@#&--[[!@#&	Construction of an interface menu has the following requirements:!@#&	the index should be the string identifying that menu element!@#&	options - A list of all menu options in order of selection!@#&	draw - a function that draws the menu!@#&	setup - a function that organizes the setup (this may include starting a new game)!@#&	nextKeyCode - the key the user must strike to move to the next menu option!@#&	prevKeyCode - the key the user must strike to move to the previous menu option!@#&	input - overrides the standard key handler, if the interface has one.!@#&]]--!@#&interfaces = {!@#&	[\"main\"] = {!@#&		options = {\"local\", \"network\", \"page1\", \"quit\"},!@#&		draw = drawMainInterface,!@#&		nextKeyCode = 208,!@#&		prevKeyCode = 200!@#&	}, !@#&	[\"local\"] = {!@#&		setup = startLocalGame!@#&	}, !@#&	[\"network\"] = {!@#&		options = {\"host\", \"hostidinput\", \"main\"},!@#&		draw = drawNetworkInterface,!@#&		nextKeyCode = 208,!@#&		prevKeyCode = 200!@#&	}, !@#&	[\"host\"] = {!@#&		draw = drawWaitForConnection,!@#&		input = waitForClient!@#&	}, !@#&	[\"hostidinput\"] = {!@#&		draw = drawIDRequest,!@#&		input = inputOpponentID!@#&	},!@#&	[\"addmonitors\"] = {!@#&		draw = drawAddMonitors,!@#&		input = addMonitors!@#&	},!@#&	[\"waittostart\"] = {!@#&		draw = drawWaitingToStart,!@#&		input = waitToStart!@#&	},!@#&	[\"join\"] = {!@#&		draw = drawWaitForConnection,!@#&		input = waitForHost!@#&	},!@#&	[\"networkerror\"] = {!@#&		draw = drawNetworkError,!@#&		input = function()!@#&			os.pullEvent(\"key\")!@#&			returnToMainMenu()!@#&		end!@#&	},!@#&	[\"unimplemented\"] = {!@#&		draw = drawUnimplementedInterface,!@#&		input = function()!@#&			os.pullEvent(\"key\")!@#&			returnToMainMenu()!@#&		end!@#&	},!@#&	[\"timeout\"] = {!@#&		draw = drawTimeout!@#&	}, !@#&	--The help pages!@#&	[\"page1\"] = {!@#&		setup = function() updateHelpPage(1) end,!@#&		options = {\"main\", \"page2\"},!@#&		draw = drawHelp,!@#&		nextKeyCode = 205,!@#&		prevKeyCode = 203!@#&	}, !@#&	[\"page2\"] = {!@#&		setup = function() updateHelpPage(2) end,!@#&		options = {\"page1\", \"main\", \"page3\"},!@#&		draw = drawHelp,!@#&		nextKeyCode = 205,!@#&		prevKeyCode = 203!@#&	}, !@#&	[\"page3\"] = {!@#&		setup = function() updateHelpPage(3) end,!@#&		options = {\"page2\", \"main\", \"page4\"},!@#&		draw = drawHelp,!@#&		nextKeyCode = 205,!@#&		prevKeyCode = 203!@#&	}, !@#&	[\"page4\"] = {!@#&		setup = function() updateHelpPage(4) end,!@#&		options = {\"page3\", \"main\", \"page5\"},!@#&		draw = drawHelp,!@#&		nextKeyCode = 205,!@#&		prevKeyCode = 203!@#&	}, !@#&	[\"page5\"] = {!@#&		setup = function() updateHelpPage(5) end,!@#&		options = {\"page4\", \"main\", \"page6\"},!@#&		draw = drawHelp,!@#&		nextKeyCode = 205,!@#&		prevKeyCode = 203!@#&	}, !@#&	[\"page6\"] = {!@#&		setup = function() updateHelpPage(6) end,!@#&		options = {\"page5\", \"main\", \"page7\"},!@#&		draw = drawHelp,!@#&		nextKeyCode = 205,!@#&		prevKeyCode = 203!@#&	}, !@#&	[\"page7\"] = {!@#&		setup = function() updateHelpPage(7) end,!@#&		options = {\"page6\", \"main\", \"page8\"},!@#&		draw = drawHelp,!@#&		nextKeyCode = 205,!@#&		prevKeyCode = 203!@#&	}, !@#&	[\"page8\"] = {!@#&		setup = function() updateHelpPage(8) end,!@#&		options = {\"page7\", \"main\", \"page9\"},!@#&		draw = drawHelp,!@#&		nextKeyCode = 205,!@#&		prevKeyCode = 203!@#&	}, !@#&	[\"page9\"] = {!@#&		setup = function() updateHelpPage(9) end,!@#&		options = {\"page8\", \"main\", \"page10\"},!@#&		draw = drawHelp,!@#&		nextKeyCode = 205,!@#&		prevKeyCode = 203!@#&	}, !@#&	[\"page10\"] = {!@#&		setup = function() updateHelpPage(10) end,!@#&		options = {\"page9\", \"main\", \"page11\"},!@#&		draw = drawHelp,!@#&		nextKeyCode = 205,!@#&		prevKeyCode = 203!@#&		!@#&	}, !@#&	[\"page11\"] = {!@#&		setup = function() updateHelpPage(11) end,!@#&		options = {\"page10\", \"main\", \"page12\"},!@#&		draw = drawHelp,!@#&		nextKeyCode = 205,!@#&		prevKeyCode = 203!@#&		!@#&	}, !@#&	[\"page12\"] = {!@#&		setup = function() updateHelpPage(12) end,!@#&		options = {\"page11\", \"main\", \"page13\"},!@#&		draw = drawHelp,!@#&		nextKeyCode = 205,!@#&		prevKeyCode = 203!@#&		!@#&	}, !@#&	[\"page13\"] = {!@#&		setup = function() updateHelpPage(13) end,!@#&		options = {\"page12\", \"main\"},!@#&		draw = drawHelp,!@#&		nextKeyCode = 205,!@#&		prevKeyCode = 203!@#&		!@#&	}, !@#&	[\"quit\"] = {!@#&		draw = function() print(\"Do nothing\") end,!@#&		setup = function () !@#&			if side then rednet.close(side) end!@#&			playing = false !@#&			term.clear()!@#&			term.setCursorPos(1,1)!@#&		end!@#&	}!@#&}!@#&!@#&helpText = {!@#&	[1] = {                                                   --E\"!@#&		\"Moving on the board:\",!@#&		\"\",!@#&		\"Chess is taken in turns between black and white, with\",!@#&		\"white always starting first. To move your piece, enter\",!@#&		\"the desired space with the following notation:\",!@#&		\"\",!@#&		\"   <file><rank>-<file><rank>\"!@#&	}, [2] = {!@#&		\"Example 1:\",!@#&		\"The following move :\",!@#&		\"\",!@#&		\"                           4 |   *   \",!@#&		\"                           3 | *   * \",!@#&		\"                           2 | p p p \",!@#&		\"                           1 | Q K B \",!@#&		\"                              -------\",!@#&		\"            > e2-e4        ... d e f \"!@#&	}, [3] = {!@#&		\"Example 1:\",!@#&		\"Will move white's pawn forward 2 squares.\",!@#&		\"\",!@#&		\" 1. e2 - e4                4 |   p   \",!@#&		\"                           3 | *   * \",!@#&		\"                           2 | p * p \",!@#&		\"                           1 | Q K B \",!@#&		\"                              -------\",!@#&		\"            > e2-e4        ... d e f \"!@#&	}, [4] = {!@#&		\"Moving on the board (CONT):\",!@#&		\"\",!@#&		\"Unlike standard chess notation, you do not need\",!@#&		\"to specify the piece that is being moved.\",!@#&		\"Taking pieces works in the same way as moving,\",!@#&		\"with a few exceptions.\"!@#&	}, [5] = {!@#&		\"En Passant:\",!@#&		\"\",!@#&		\"In taking a pawn en passant, the game assumes the\",!@#&		\"pawn has only moved one square- hence the player\",!@#&		\"should move his pawn as though it is on the\",!@#&		\"diagonal square rather than the horizontal.\"!@#&	}, [6] = {!@#&		\"Example 2:\",!@#&		\"The following move (c5 is a white pawn):\",!@#&		\"\",!@#&		\" ...                       7 | p * K * p \",!@#&		\" 11. c4 - c5               6 | *   *   * \",!@#&		\" 12. d7 - d5               5 | p p   *   \",!@#&		\"                           4 | *   *   Q \",!@#&		\"                              -----------\",!@#&		\"            > c5-d6        ... c d e f g \"!@#&	}, [7] = {!@#&		\"Example 2:\",!@#&		\"Will capture d5 en passant and check e7.\",!@#&		\"\",!@#&		\" ...                       7 | p   K * p \",!@#&		\" 11. c4 - c5               6 | * p *   * \",!@#&		\" 12. d7 - d5               5 |   *   *   \",!@#&		\" 13. c5 x d6 e.p.+         4 | *   *   Q \",!@#&		\"                              -----------\",!@#&		\"            > c5-d6        ... c d e f g \"!@#&	}, [8] = {!@#&		\"Castling:\",!@#&		\"\",!@#&		\"To castle your king, simply move him to the left\",!@#&		\"two spaces (to castle queenside), or two spaces\",!@#&		\"right (to castle kingside). This will move your\",!@#&		\"castle automatically.\"!@#&	}, [9] = {!@#&		\"Example 3:\",!@#&		\"The following move:\",!@#&		\"\",!@#&		\" ...                       4 |   *   *   \",!@#&		\" 7. Bc1 - a3               3 | B p N   * \",!@#&		\" 8. d5 - d7                2 | p * p p   \",!@#&		\"                           1 | C   *   K \",!@#&		\"                              -----------\",!@#&		\"            > e1-c1        ... a b c d e \"!@#&	}, [10] = {!@#&		\"Example 3:\",!@#&		\"Will castle white queenside.\",!@#&		\"\",!@#&		\" ...                       4 |   *   *   \",!@#&		\" 7. Bc1 - a3               3 | B p N   * \",!@#&		\" 8. d5 - d7                2 | p * p p   \",!@#&		\" 9. O-O-O                  1 | * K C   * \",!@#&		\"                              -----------\",!@#&		\"            > e1-c1        ... a b c d e \"!@#&	}, [11] = {!@#&		\"Other commands:\",!@#&		\"\",!@#&		\"exit: will leave the current game\",!@#&		\"reset: starts a fresh game (local only)\",!@#&		\"draw: offer your opponent a draw (network only)\"!@#&	}, [12] = {!@#&		\"Monitor Display:\",!@#&		\"\",!@#&		\"For network play, hook a computer up to a 6x6\",!@#&		\"monitor and run monitorchess.lua. You can add\",!@#&		\"the monitor just before starting, for a bigscreen\",!@#&		\"display!\"!@#&	}, [13] = {!@#&		\"Acknowledgements:\",!@#&		\"\",!@#&		\"Written by Nitrogen Fingers\",!@#&		\"Art: Moeser(1995), Alefith (1995) and NN(1998)\",!@#&		\"Rednet Support: Wolvan\"!@#&	}!@#&}!@#&--The board, for tutorials!@#&--[[!@#&		\"\",!@#&		\"                           7 |   *   *   \",!@#&		\"                           6 | *   *   * \",!@#&		\"                           5 |   *   *   \",!@#&		\"                           4 | *   *   * \",!@#&		\"                              -----------\",!@#&		\"            > e2-e4        ... c d e f g \"!@#&]]--!@#&!@#&--The currently active interface!@#&currentInterface = interfaces[\"main\"]!@#&!@#&--The core GUI logic- this runs the main menu and has a default method for passing!@#&--through the interface. It also runs setup and draw methods of each interface.!@#&function runMenu()!@#&	--currentInterface = interfaces[\"main\"]!@#&	while playing do!@#&		currentInterface.draw()!@#&		if currentInterface.input then currentInterface.input()!@#&		else!@#&			local id,key = os.pullEvent(\"key\")!@#&			if key == currentInterface.prevKeyCode and menuSel > 1 then!@#&				menuSel = menuSel - 1!@#&			elseif key == currentInterface.nextKeyCode and !@#&			  menuSel < #currentInterface.options then!@#&				menuSel = menuSel + 1!@#&			elseif key == 28 then!@#&				local setupname = currentInterface.options[menuSel]!@#&				currentInterface = interfaces[currentInterface.options[menuSel]]!@#&				menuSel = 1!@#&				if currentInterface.setup then !@#&					currentInterface.setup() !@#&				end!@#&			end!@#&		end!@#&	end!@#&end!@#&!@#&gameOver = true!@#&runMenu()!@#&!@#&--gameOver = false!@#&--playGame()",["scrollbar"]="barscroll = 0!@#&scroll = 0!@#&endnum = 50!@#&barArea = 18!@#&scrollArea = 12!@#&if(endnum>35)then!@#&	barLength = 1!@#&	scrollamount = (endnum-19)/barArea!@#&elseif(endnum<=19)then!@#&	barLength = barArea!@#&	scrollamount = 0!@#&else!@#&	barLength = (38-(19-barArea))-endnum!@#&	scrollamount = 1!@#&end!@#&!@#&function drawBar()!@#&	term.setBackgroundColor(colors.lightGray)!@#&	for place=1,19,1 do!@#&		term.setCursorPos(51,place)!@#&		write(\" \")!@#&	end!@#&	term.setCursorPos(51,1)!@#&	write(\"^\")!@#&	term.setCursorPos(51,19)!@#&	write(\"v\")!@#&	term.setBackgroundColor(colors.gray)!@#&	for place=1,barLength,1 do!@#&		term.setCursorPos(51,barscroll+place+1)!@#&		write(\" \")!@#&	end!@#&end!@#&!@#&function drawBackGround()!@#&  for place=1,endnum,1 do!@#&    --term.setBackgroundColor(colortable[math.random(1,#colortable)])!@#&    term.setCursorPos(4,place-scroll)!@#&    write(place)!@#&  end!@#&  term.setCursorPos(1,1)!@#&  write(barscroll)!@#&  drawBar()!@#&end!@#&!@#&oldpos = 0!@#&while true do!@#&	term.setBackgroundColor(colors.black)!@#&	shell.run(\"clear\")!@#&	drawBackGround()!@#&	Event,key,xpos,ypos = os.pullEvent(\"mouse_drag\")!@#&	if(xpos==51)then!@#&		if(oldpos>0)then!@#&			scroll = scroll+((ypos-oldpos)*scrollamount)!@#&			barscroll = barscroll+(ypos-oldpos)!@#&		end!@#&		oldpos = ypos!@#&	end!@#&	if(scroll<0)then!@#&		scroll = 0!@#&	end!@#&	if(barscroll<0)then!@#&		barscroll = 0!@#&	end!@#&	if(barscroll>barArea-barLength)then!@#&		barscroll = barArea-barLength!@#&	end!@#&	if(scroll>endnum-19)then!@#&		if(endnum<=19)then!@#&			scoll = 0!@#&		else!@#&			scroll=endnum-19!@#&		end!@#&	end!@#&end",["pages.lua"]="content = {}!@#&pages = {}!@#&!@#&function addPage()!@#&	local pageNumber = #content+1!@#&	content[#content+1] =  !@#&	{!@#&		background = nil,!@#&		setBackground = function(path)!@#&			content[pageNumber].background = paintutils.loadImage(path)!@#&		end,!@#&		getBackground = function()!@#&			return content[pageNumber].background!@#&		end,!@#&		pageContent = !@#&		{!@#&			objects = {},!@#&			getObjects = function(oType)--string type!@#&				temp = {}!@#&				if(oType==\"*\")then!@#&					return content[pageNumber].pageContent.objects!@#&				else!@#&					for i=1,#content[pageNumber].pageContent.objects,1 do!@#&						if(content[pageNumber].pageContent.objects[i].objectType==oType)then!@#&							temp[#temp+1] = content[pageNumber].pageContent.objects[i]!@#&						end!@#&					end!@#&					return temp!@#&				end!@#&			end,!@#&			addObject = function(oType,obj)--string type, table of object elements!@#&				content[pageNumber].pageContent.objects[#content[pageNumber].pageContent.objects+1] = {objectType = oType, object = obj}!@#&				return content[pageNumber].pageContent.objects[#content[pageNumber].pageContent.objects+1]!@#&			end!@#&			!@#&		}!@#&	} !@#&	pages[#pages+1] = content[number]!@#&	return content[pageNumber]!@#&end!@#&!@#&drawing = !@#&{!@#&	displayImage = function(image,x,y)!@#&		paintutils.drawImage(image,x,y)!@#&	end,!@#&	fillArea = function(color,xpos,ypos,wid,high)!@#&		term.setCursorPos(1,1)!@#&!@#&		term.setBackgroundColor(color)!@#&		for y=ypos,ypos+high-1,1 do!@#&			for x=xpos,xpos+wid-1,1 do!@#&				term.setCursorPos(x,y)!@#&				write(\" \")!@#&			end!@#&		end!@#&	end,!@#&	writeText = function(text,x,y,color,bgcolor)!@#&		term.setBackgroundColor(color)!@#&		term.setCursorPos(x,y)!@#&		write(text)!@#&	end,!@#&	writeTextCentered = function(text,x,y,wid,high,color,bgcolor)!@#&		term.setCursorPos(x+(wid-#text)/2,y+high/2)!@#&		term.setTextColor(color)!@#&		term.setBackgroundColor(bgcolor)!@#&		term.write(text)!@#&	end,!@#&	clear = function()!@#&		term.setBackgroundColor(colors.black)!@#&		term.clear()!@#&		term.setCursorPos(1,1)!@#&	end!@#&}!@#&!@#&Objects = !@#&{!@#&	Buttons = {},!@#&	Labels = {},!@#&	Images = {},!@#&	DropDowns = {},!@#&	ScrollBars = {},!@#&	ProgressBars = {},!@#&	TextBoxes = {},!@#&	NotificationWindows = {}!@#&}!@#&!@#&!@#&function newButton(text,xpos,ypos,wid,high,c,tc,f)--Button text, x position, y position, width, height, color, text color, Button Function!@#&	local itemNumber = #Objects.Buttons+1!@#&	Objects.Buttons[itemNumber] = !@#&	{!@#&		attributes = {name = text,x = xpos,y = ypos,width = wid,height = high,color = c,textcolor = tc,visible = true,buttonFunction = f},!@#&		draw = function()!@#&			b = Objects.Buttons[itemNumber].attributes!@#&			drawing.fillArea(b.color,b.x,b.y,b.width,b.height)      !@#&			drawing.writeTextCentered(b.name,b.x,b.y,b.width,b.height,b.textcolor,b.color)!@#&		end,!@#&		clicked = function(xpos,ypos,executeF)--executeF tells the function whether or not to execute the button's function !@#&			b = Objects.Buttons[itemNumber].attributes!@#&			if(xpos>=b.x and xpos<=b.x+b.width-1) then!@#&				if(ypos>=b.y and ypos<=b.y+b.height-1) then!@#&					if(executeF)then!@#&						b.buttonFunction()!@#&					end!@#&					return true!@#&				end!@#&			end!@#&			return false!@#&		end,!@#&		setVisibility = function(boolean)!@#&			Objects.Buttons[itemNumber].attributes.visible = boolean!@#&		end!@#&	}!@#&	return Objects.Buttons[itemNumber]!@#&end!@#&!@#&!@#&function newLabel(t,xpos,ypos,w,h,centH,centV,c,tc)--the text for a label is a table i.e. {\"hello world\" , \"This is a test\"} or {\"hello world\"}!@#&											--Label text, x position, y position, width, height, centered horizontally?, centered vertically?, color, text color!@#&	local itemNumber = #Objects.Labels+1!@#&	Objects.Labels[itemNumber] = !@#&	{!@#&		attributes = {text = t,x = xpos,y = ypos,width = w,height = h,centeredH = centH,centeredV = centV,color = c,textcolor = tc,visible = true},!@#&		setText = function(t)!@#&			Objects.Labels[itemNumber].attributes.text = t!@#&		end,!@#&		draw = function()!@#&			l = Objects.Labels[itemNumber].attributes!@#&			drawing.fillArea(l.color,l.x,l.y,l.width,l.height)!@#&			if(l.centeredH)then!@#&				for i=1,#l.text,1 do!@#&					drawing.writeTextCentered(l.text[i],l.x,l.y+(i-1),l.width,1,l.textcolor,l.color)!@#&				end!@#&			else!@#&				for i=1,#l.text,1 do!@#&					drawing.writeText(l.text[i],l.x,l.y+(i-1),l.textcolor,l.color)!@#&				end!@#&			end!@#&		end,!@#&		setVisibility = function(boolean)!@#&			Objects.Lables[itemNumber].attributes.visible = boolean!@#&		end!@#&	}!@#&	return Objects.Labels[itemNumber]!@#&end!@#&!@#&function newImage(path,xpos,ypos,click,f)--Image path, x position, y position, click-able?, function!@#&	itemNumber = #Object.Images+1!@#&	temp = {}!@#&	if(f==nil)then!@#&		temp = {image = paintutils.loadImage(path),x = xpos,y = ypos, clickable = click,visible = true,imageFunction = function()end}!@#&	else	!@#&		temp = {image = paintutils.loadImage(path),x = xpos,y = ypos, clickable = click,visible = true imageFunction = f}!@#&	end!@#&	Object.Images[itemNumber] = !@#&	{!@#&		attributes = temp,!@#&		draw = function()!@#&			i = Objects.Images[itemNumber].attributes!@#&			drawing.displayImage(i.image,i.x,i.y)!@#&		end,!@#&		getDimensions = function()!@#&			i = Objects.Images[itemNumber].attributes!@#&			x = 0!@#&			y = #i.image!@#&			for a=1,y,1 do!@#&				x = math.max(x,#i[a])!@#&			end!@#&			return x,y!@#&		end,!@#&		clicked = function(xpos,ypos,executeF)--executeF tells the function whether or not to execute the image's function !@#&			i = Objects.Images[itemNumber].attributes!@#&			local w,h = getDimensions(i)!@#&			if(xpos>=i.x and xpos<=i.x+w-1) then!@#&				if(ypos>=i.y and ypos<=i.y+h-1) then!@#&					if(executeF)then!@#&						i.imageFunction()!@#&					end!@#&					return true!@#&				end!@#&			end!@#&			return false!@#&		end,!@#&		setVisibility = function(boolean)!@#&			Objects.Images[itemNumber].attributes.visible = boolean!@#&		end!@#&	}!@#&	return Object.Images[itemNumber]!@#&end!@#&!@#&function newDropDown(n,xpos,ypos,l,c,tc,ddc,ddtc)--Drop Down text, x position, y position, length, color, text color, drop down background color, drop down element text color, drop down visible?!@#&	local itemNumber = #Objects.DropDowns+1!@#&	Objects.DropDowns[itemNumber] = !@#&	{!@#&		attributes = {name = n,x = xpos,y = ypos,length = l,color = c,textColor = tc, dropDownColor = ddc,dropDownTextColor = ddtc,visible = false,visible = true,elements = {}},!@#&		addElement = function(n,f)!@#&			d = Objects.DropDowns[itemNumber].attributes!@#&			d.elements[#dd.elements+1] = {name = n,elementFunction = f}!@#&		end,!@#&		draw = function()!@#&			d = Objects.DropDowns[itemNumber].attributes!@#&			drawing.fillArea(d.color,d.x,d.y,d.length,1)!@#&			drawing.writeText(d.name,d.x,d.y,d.color,d.textColor)!@#&			if(d.visible)then!@#&				drawing.fillArea(d.dropDownColor,d.x,d.y+1,d.length,#d.elements)!@#&				for i=1,#d.elements,1 do!@#&					drawing.writeText(d.elements[i].name,d.x,d.y+i,d.dropDownColor,d.dropDownTextColor)!@#&				end!@#&			end!@#&		end,!@#&		clicked = function(xpos,ypos,executeF)--executeF tells the function whether or not to execute the element's function !@#&			d = Objects.DropDowns[itemNumber].attributes!@#&			if(xpos>=d.x and xpos<=d.x+d.length-1) then!@#&				if(ypos==d.y) then!@#&					d.visible = not d.visible!@#&					return 0!@#&				elseif (d.visible) then 	!@#&					for a=1,#d.elements,1 do!@#&						if(ypos==d.y+a and executeF) then!@#&							d.elements[a].elementFunction()!@#&							return a!@#&						end!@#&					end!@#&				end!@#&			end!@#&			return -1!@#&		end,!@#&		setVisibility = function(boolean)!@#&			Objects.DropDowns[itemNumber].attributes.visible = boolean!@#&		end!@#&	}!@#&	return Objects.DropDowns[itemNumber]!@#&end!@#&!@#&function newScrollBar(xpos,ypos,l,ia,s,bgc,bc,ac,tc)-- x position, y position, length, number of items that are going to be scrolled through, is the scrollbar sideways?, background color for the scrollbar, bar color, end arrow background color, end arrow text color!@#&	local itemNumber = #Objects.ScrollBars+1!@#&	Objects.ScrollBars[itemNumber] = !@#&	{!@#&		attributes =  {x = xpos,y = ypos,length = l,itemAmount = ia,sideWays = s,backGroundColor = bgc,barColor = bc,arrowColor = ac,textColor = tc,scroll = 0,visible = true},!@#&		draw = function()!@#&			s = Objects.ScrollBars[itemNumber].attributes!@#&			if(s.sideWays)then!@#&				drawing.fillArea(s.backGroundColor,s.x+1,s.y,s.length,1)!@#&				drawing.writeText(\"<\",s.x,s.y,s.arrowColor,s.textColor)!@#&				drawing.writeText(\">\",s.x+s.length+1,s.y,s.arrowColor,s.textColor)!@#&			else!@#&				drawing.fillArea(s.backGroundColor,s.x,s.y+1,1,s.length)!@#&				drawing.writeText(\"^\",s.x,s.y,s.arrowColor,s.textColor)!@#&				drawing.writeText(\"v\",s.x,s.y+s.length+1,s.arrowColor,s.textColor)!@#&			end!@#&			local barLength = s.length!@#&			if(s.itemAmount>=s.length*2-1)then!@#&				barLength = 1!@#&			elseif(s.itemAmount>=s.length)then!@#&				barLength = s.length-(s.itemAmount-s.length)!@#&			end!@#&			term.setCursorPos(1,1)!@#&			write(barLength)!@#&			if(s.sideWays)then!@#&				drawing.fillArea(s.barColor,s.x+s.scroll+1,s.y,s.x+barLength,1)!@#&			else!@#&				drawing.fillArea(s.barColor,s.x,s.y+s.scroll+1,1,s.y+barLength)!@#&			end!@#&		end,!@#&		clicked = function(xpos,ypos)!@#&			s = Objects.ScrollBars[itemNumber].attributes!@#&			local barLength = s.length!@#&			if(s.itemAmount>=s.length*2-1)then!@#&				barLength = 1!@#&			elseif(s.itemAmount>=s.length)then!@#&				barLength = s.length-(s.itemAmount-s.length)!@#&			end!@#&			if(xpos==s.x) then!@#&				if(ypos==s.y) then!@#&					if(s.scroll>0)then!@#&						s.scroll = s.scroll-1!@#&					end!@#&				end!@#&			end!@#&			if(xpos==s.x+s.length+1) then!@#&				if(ypos==s.y) then!@#&					if(s.scroll+barLength+1<s.length)then!@#&						s.scroll = s.scroll+1!@#&					end!@#&				end!@#&			end!@#&			if(xpos==s.x) then!@#&				if(ypos==s.y+s.length+1) then!@#&					if(s.scroll+barLength+1<s.length)then!@#&						s.scroll = s.scroll+1!@#&					end!@#&				end!@#&			end!@#&		end,!@#&		setVisibility = function(boolean)!@#&			Objects.ScrollBars[itemNumber].attributes.visible = boolean!@#&		end!@#&	}!@#&	return Objects.ScrollBars[itemNumber]!@#&end!@#&!@#&function newProgressBar(xpos,ypos,l,dp,bc,bgc,tc)--x position, y position, length of the progress bar, if you want percentage use \"*\" else use string for text to be displayed in progress bar, percentage bar color, percentage bar background color, percentage text color!@#&	local itemNumber = #Objects.ProgressBars+1!@#&	Objects.ProgressBars[itemNumber] = !@#&	{!@#&		attributes = {x = xpos,y = ypos,length = l,percentage = 0,progressText = dp,barColor = bc,backGroundColor = bgc,TextColor = tc,visible = true},!@#&		updatePercentage = function(num)!@#&			Objects.ProgressBars[itemNumber].attributes.percentage = num!@#&		end,!@#&		draw = function()!@#&			p = Objects.ProgressBars[itemNumber].attributes!@#&			drawing.fillArea(p.backGroundColor,p.x,p.y,p.length,1)!@#&			drawing.fillArea(p.barColor,p.x,p.y,p.percentage/100*p.length,1)!@#&			if(p.progressText==\"*\")then!@#&				temp = tostring(p.percentage)..\"%\"!@#&			else!@#&				temp = p.progressText!@#&			end!@#&			for i=1,#temp,1 do!@#&				if(p.x+(p.length-#temp)/2+(i-1)<=p.percentage/100*p.length)then!@#&					drawing.writeText(string.sub(temp,i,i),p.x+(p.length-#temp)/2+(i-1),p.y,p.barColor,p.TextColor)!@#&				else!@#&					drawing.writeText(string.sub(temp,i,i),p.x+(p.length-#temp)/2+(i-1),p.y,p.backGroundColor,p.TextColor)!@#&				end!@#&			end!@#&			!@#&		end,!@#&		setVisibility = function(boolean)!@#&			Objects.ProgressBars[itemNumber].attributes.visible = boolean!@#&		end!@#&	}!@#&	return Objects.ProgressBars[itemNumber]!@#&end!@#&!@#&function newTextBox(xpos,ypos,w,h,text,m,c,tc,f)--x position, y position, width, height, text that will be displayed inside the text box, text mask i.e.\"*\", color of the box, text color, function for what text box should do after user hits Enter!@#&	local itemNumber = #Objects.TextBoxes+1!@#&	local temp = {}!@#&	for i=0,height,1 do!@#&		temp[i] = \"\"!@#&	end!@#&	Objects.TextBoxes[itemNumber] = !@#&	{!@#&		attributes = {x = xpos,y = ypos,width = w,height = h,displayText = text,mask = m,color = c,textColor = tc,text = temp,hasText = false,visible = true,endFunction = f},!@#&		draw = function()!@#&			t = Objects.TextBoxes[itemNumber].attributes!@#&			drawing.fillArea(t.color,x,y,width,height)!@#&			if(t.hasText) then!@#&				for i=1,#n.text,1 do!@#&					drawing.drawText(n.text[i],n.x+(i-1),n.y,n.color,n.textColor)!@#&				end!@#&			else!@#&				drawing.writeText(t.displayText,t.x,t.y,t.color,t.textColor) !@#&			end!@#&		end,!@#&		clear = function()!@#&			local temp = {}!@#&			for i=0,height,1 do!@#&				temp[i] = \"\"!@#&			end!@#&			Objects.TextBoxes[itemNumber].attributes.text = temp!@#&			Objects.TextBoxes[itemNumber].attributes.hasText = false!@#&		end,!@#&		clicked = function(xpos,ypos)	!@#&			local currentLine = 1!@#&			n = Objects.TextBoxes[itemNumber].attributes!@#&			if(n.x<=xpos and n.x+n.width>=xpos)then!@#&				if(n.y<=ypos and n.y+n.height>=ypos)then!@#&					term.setCursorBlink(true)!@#&					while running do!@#&						local event, p,pram1,pram2 = os.pullEvent()!@#&						if(event == \"char\") then!@#&							n.hasText = true!@#&							for i=currentLine,n.height,1 do!@#&								if(#n.text[i]<n.width)then!@#&									n.text[i] = n.text[i]..p!@#&								end!@#&							end!@#&						elseif(event == \"key\")then!@#&							if p == keys.enter then!@#&								n.endFunction()!@#&								term.setCursorBlink(false)!@#&								break!@#&							elseif p == keys.backspace then!@#&								n.text[currentLine] = n.text[currentLine]:sub(1, #n.text[currentLine] - 1)!@#&								if(string.len(n.text[currentLine])==0)then!@#&									if(currentLine>0)then        !@#&										currentLine = currentLine-1!@#&									end!@#&								end!@#&							end!@#&						end!@#&						Objects.TextBoxes[itemNumber].draw()!@#&					end!@#&				end!@#&			end!@#&		end,!@#&		setVisibility = function(boolean)!@#&			Objects.TextBoxes[itemNumber].attributes.visible = boolean!@#&		end!@#&	}!@#&	!@#&end!@#&!@#&function newNotificationWindow(xpos,ypos,w,h,txt,t,button,functions)--x position, y position, width, height, notification text, title, button presets [\"YesNo_option\",\"OK_option\",\"No_option\"], button functions(place all functions inside of a table similar to notification text table) !@#&	local itemNumber = #Objects.NotificationWindows+1				--the text for a label is a table i.e. {\"hello world\" , \"This is a test\"} or {\"hello world\"}!@#&	!@#&	Objects.NotificationWindows[itemNumber] = !@#&	{!@#&		attributes = {x = xpos,y = ypos,width = w,height = h,text = txt,title = t,buttonPreset = button,visible = false,visible = true,buttonFunctions = functions},!@#&		draw = function()!@#&			n = Objects.NotificationWindows[itemNumber].attributes!@#&			if(n.visible)then!@#&				drawing.fillArea(colors.lightGray,n.x,n.y,n.width,n.height)!@#&				drawing.fillArea(colors.gray,n.x,n.y,n.width,1)!@#&				drawing.drawText(n.title,n.x,n.y,colors.gray,colors.black)!@#&				drawing.drawText(\" X \",n.x+n.width-3,n.y,colors.red,colors.white)!@#&				for i=0,#n.text,1 do!@#&					drawing.writeText(n.text[i],n.x,n.y+i,colors.white,colors.lightGray)!@#&				end!@#&				if(n.buttonPresets==\"YesNo_option\")then!@#&					drawing.drawText(\" Yes \",n.x+(n.width/3)-2,n.y+n.height-1,colors.green,colors.white)!@#&					drawing.drawText(\" No \",n.x+(2*n.width/3)-2,n.y+n.height-1,colors.red,colors.white)!@#&				elseif(n.buttonPresets==\"OK_option\")then!@#&					drawing.drawText(\" OK \",n.x+(n.width/2)-2,n.y+n.height-1,colors.green,colors.white)!@#&				elseif(n.buttonPresets==\"No_option\")then!@#&				end!@#&			end!@#&		end!@#&		clicked  = function(xpos,ypos)!@#&			n = Objects.NotificationWindows[itemNumber].attributes!@#&			if(xpos>=n.x+n.width-3 and xpos<=n.x+n.width)then!@#&				if(ypos==n.y)then!@#&					n.visible = false!@#&				end!@#&			end!@#&			if(n.buttonPreset==\"YesNo_option\")then!@#&				if(ypos==n.y+n.height-1)then!@#&					if(xpos>=n.x+(n.width/3)-2 and xpos<=n.x+(n.width/3)+2)then!@#&						n.buttonFunctions[1]()!@#&					elseif(xpos>=n.x+(2*n.width/3)-2 and xpos<=n.x+(2*n.width/3)+2)then!@#&						n.buttonFunctions[2]()!@#&					end!@#&				end!@#&			elseif(n.byuttonPreset==\"OK_option\")then!@#&				if(ypos==n.y+n.height-1)then!@#&					if(xpos>=n.x+(n.width/2)-2 and xpos<=n.x+(n.width/2)+2)then!@#&						n.buttonFunctions[1]()!@#&					end!@#&				end!@#&			end!@#&		end,!@#&		setVisibility = function(boolean)!@#&			Objects.NotificationWindows[itemNumber].attributes.visible = boolean!@#&		end!@#&	}!@#&end",["eShip8.img"]="!@#&                    7b!@#&              7777bbbb!@#&             77      7!@#&             bb      7!@#&              bbbbbbbb!@#&                    7b",["line"]="function clear()!@#&  term.setBackgroundColor(colors.black)!@#&  shell.run(\"clear\")!@#&end!@#&!@#&while true do!@#&  Event,key,xclick,yclick = os.pullEvent(\"mouse_click\")!@#&  clear()!@#&  firstx = xclick !@#&  firsty = yclick!@#&  term.setCursorPos(firstx,firsty)!@#&  term.setBackgroundColor(colors.gray)!@#&  write(\" \")!@#&  Event,key,xclick,yclick = os.pullEvent(\"mouse_click\")!@#&  secondx = xclick!@#&  secondy = yclick!@#&  term.setCursorPos(secondx,secondy)!@#&  write(\" \")!@#&  slope = (secondy-firsty)/(secondx-firstx)!@#&  if(firstx>secondx)then!@#&    startpos = firstx!@#&    endpos = secondx!@#&  else!@#&    startpos = secondx!@#&    endpos = firstx!@#&  end!@#&  b = firsty-(slope*firstx)!@#&  x = startpos!@#&  term.setBackgroundColor(colors.white)!@#&  while x+1~=endpos do!@#&    term.setCursorPos(x,math.floor(slope*x+b))!@#&    write(\" \")!@#&    x = x-1!@#&  end!@#&end",["test4"]="numbers = {5,4,3,2,1}!@#&for i,n in ipairs(numbers) do!@#&  print(i..\" \"..n)!@#&end",["Lights"]="--==============  Lights 1.0  ==============!@#&--==   copyright (c) 2014 InputUsername   ==!@#&--==========================================</fancy header>!@#&!@#&--=================================!@#&--== INITIALIZATION!@#&--=================================!@#&local w,h=term.getSize()!@#&if w<26 or h<14 then!@#&	w,h=nil,nil!@#&	print(\"Sorry, your display is too small.\\nLights requires a display of at least 26x14 to work.\")!@#&	return!@#&end!@#&if not term.isColor then!@#&	print(\"Sorry, your ComputerCraft version is not supported.\\nPlease update to a recent version.\")!@#&	return!@#&elseif not term.isColor() then!@#&	print(\"Sorry, Lights is currently supported on advanced computers only.\")!@#&	return!@#&end!@#&!@#&--=================================!@#&--== SOME OOP-esque STUFF!@#&--=================================!@#&--new light at (x,y) with size (w,h), state (s) and colors (cOn,cOff)!@#&local function newLight(x,y,w,h,s,cOn,cOff)!@#&	return {!@#&		x=x,!@#&		y=y,!@#&		w=w,!@#&		h=h,!@#&		s=s,!@#&		cOn=cOn,!@#&		cOff=cOff,!@#&		draw=function(self)!@#&			term.setBackgroundColor(self.s==1 and self.cOn or self.cOff)!@#&			local b=(\" \"):rep(self.w)!@#&			for ypos=self.y,self.y+self.h-1 do!@#&				term.setCursorPos(self.x,ypos)!@#&				term.write(b)!@#&			end!@#&		end,!@#&		toggle = function(self)!@#&			if self.s==1 then self.s=0 else	self.s=1 end!@#&			self:draw()!@#&		end,!@#&		isclicked = function(self,xp,yp)!@#&			return(xp>=self.x)and(xp<=self.x+self.w-1)and(yp>=self.y)and(yp<=self.y+self.h-1)!@#&		end!@#&	}!@#&end!@#&!@#&--new button at (x,y) with text (s) and colors (cB,cT)!@#&local function newButton(x,y,s,cB,cT)!@#&	return {!@#&		x=x,!@#&		y=y,!@#&		s=s,!@#&		cB=cB,!@#&		cT=cT,!@#&		draw=function(self)!@#&			term.setBackgroundColor(self.cB)!@#&			term.setTextColor(self.cT)!@#&			term.setCursorPos(self.x,self.y)!@#&			term.write(self.s)!@#&		end,!@#&		isclicked=function(self,xp,yp)!@#&			return(xp>=self.x)and(xp<=self.x+#self.s-1)and(yp==self.y)!@#&		end!@#&	}!@#&end!@#&!@#&--=================================!@#&--== VARIABLES!@#&--=================================!@#&local colorScheme={!@#&	back=colors.black,!@#&	text=colors.white,!@#&	title=colors.green,!@#&	!@#&	menuB=colors.green,!@#&	menuT=colors.white,!@#&	!@#&	on=colors.green,!@#&	off=colors.gray,!@#&}!@#&!@#&local options = {!@#&	defaultGameLights=6,!@#&	patternGameLights=7!@#&}!@#&!@#&--either 'mainMenu', 'optionsMenu', 'aboutMenu', 'defaultGame', 'patternGame' or 'exit'!@#&local state=\"mainMenu\"!@#&!@#&local tw,th=term.getSize()!@#&local cx,cy=math.floor(tw/2),math.floor(th/2)!@#&!@#&--=================================!@#&--== FUNCTIONS!@#&--=================================!@#&local function saveOptions()!@#&	local h=fs.open(\"/SpeedOs/Applications/GameBox/.lightsdata\",\"w\")!@#&	local s=textutils.serialize(options)!@#&	if type(s)==\"string\" then!@#&		h.write(s)!@#&	end!@#&	h.close()!@#&end!@#&!@#&local function loadOptions()!@#&	if not fs.exists(\"/SpeedOS/Applications/GameBox/.lightsdata\") then!@#&		saveOptions()!@#&	end!@#&	local h=fs.open(\"/SpeedOS/Applications/GameBox/.lightsdata\",\"r\")!@#&	local c=h.readAll()!@#&	c=textutils.unserialize(c)!@#&	if type(c)==\"table\" then!@#&		options=c!@#&	end!@#&	h.close()!@#&end!@#&!@#&local function clear(x,y,b,t)!@#&	term.setCursorPos(x,y)!@#&	if b then term.setBackgroundColor(b) end!@#&	if t then term.setTextColor(t) end!@#&	term.clear()!@#&end!@#&!@#&local function initialize()!@#&	clear(1,1,colorScheme.back,colorScheme.text)!@#&end!@#&!@#&local function reset()!@#&	clear(1,1,colors.black,colors.white)!@#&end!@#&!@#&local function mainMenu()!@#&	clear(cx-3,cy-6,colorScheme.back,colorScheme.title)!@#&	term.write(\"Lights\")!@#&	!@#&	local items={\" Regular game \",\" Pattern game \",\"   Options    \",\"    About     \"}!@#&	local buttons={}!@#&	!@#&	for i=1,#items do!@#&		buttons[i]=newButton(cx-6,cy-4+2*(i-1),items[i],colorScheme.menuB,colorScheme.menuT)!@#&		buttons[i]:draw()!@#&	end!@#&	buttons[#buttons+1]=newButton(cx-6,cy+5,\"     Exit     \",colorScheme.menuB,colorScheme.menuT)!@#&	buttons[#buttons]:draw()!@#&	!@#&	while true do!@#&		local e,_,x,y=os.pullEvent\"mouse_click\"!@#&		for i=1,#buttons do!@#&			if buttons[i]:isclicked(x,y) then!@#&				if i==1 then!@#&					state=\"defaultGame\"!@#&					return!@#&				elseif i==2 then!@#&					state=\"patternGame\"!@#&					return!@#&				elseif i==3 then!@#&					state=\"optionsMenu\"!@#&					return!@#&				elseif i==4 then!@#&					state=\"aboutMenu\"!@#&					return!@#&				elseif i==5 then!@#&					state=\"exit\"!@#&					return!@#&				end!@#&			end!@#&		end!@#&	end!@#&end!@#&local function optionsMenu()!@#&	clear(cx-3,cy-6,colorScheme.back,colorScheme.title)!@#&	term.write(\"Options\")!@#&	!@#&	term.setTextColor(colorScheme.text)!@#&	term.setCursorPos(cx-10,cy-3)!@#&	term.write(\"Regular game lights:\")!@#&	term.setCursorPos(cx-10,cy-1)!@#&	term.write(\"Pattern game lights:\")!@#&	!@#&	local items={}!@#&	local buttons={}!@#&	!@#&	buttons[1]=newButton(cx+11,cy-3,\" \"..options.defaultGameLights..\" \",colorScheme.menuB,colorScheme.menuT)!@#&	buttons[2]=newButton(cx+11,cy-1,\" \"..options.patternGameLights..\" \",colorScheme.menuB,colorScheme.menuT)!@#&	buttons[3]=newButton(cx-6,cy+5,\"     Back     \",colorScheme.menuB,colorScheme.menuT)!@#&	!@#&	for i=1,#buttons do!@#&		buttons[i]:draw()!@#&	end!@#&	!@#&	while true do!@#&		local e,_,x,y=os.pullEvent\"mouse_click\"!@#&		!@#&		for i=1,#buttons do!@#&			if buttons[i]:isclicked(x,y) then!@#&				if i==1 then!@#&					if options.defaultGameLights<9 then!@#&						options.defaultGameLights=options.defaultGameLights+1!@#&					else!@#&						options.defaultGameLights=3!@#&					end!@#&					buttons[i].s=\" \"..options.defaultGameLights..\" \"!@#&					buttons[i]:draw()!@#&				elseif i==2 then!@#&					if options.patternGameLights<9 then!@#&						options.patternGameLights=options.patternGameLights+1!@#&					else!@#&						options.patternGameLights=3!@#&					end!@#&					buttons[i].s=\" \"..options.patternGameLights..\" \"!@#&					buttons[i]:draw()!@#&				elseif i==3 then!@#&					state=\"mainMenu\"!@#&					saveOptions()!@#&					return!@#&				end!@#&			end!@#&		end!@#&	end!@#&end!@#&local function aboutMenu()!@#&	clear(cx-3,cy-6,colorScheme.back,colorScheme.title)!@#&	term.write(\"About\")!@#&	!@#&	local function cwrite(y,s)!@#&		term.setCursorPos(cx-math.floor(#s/2),y)!@#&		term.write(s)!@#&	end!@#&	!@#&	term.setTextColor(colorScheme.text)!@#&	cwrite(cy-4,\"In Regular game mode, the goal is\")!@#&	cwrite(cy-3,\"to turn every light green.\")!@#&	cwrite(cy-2,\"In Pattern game mode, you must\")!@#&	cwrite(cy-1,\"copy a certain pattern to win.\")!@#&	!@#&	cwrite(cy+1,\"You can exit with the 'give up' button.\")!@#&	!@#&	cwrite(cy+3,\"Copyright (c) 2014 InputUsername\")!@#&	!@#&	local back=newButton(cx-6,cy+5,\"     Back     \",colorScheme.menuB,colorScheme.menuT)!@#&	back:draw()!@#&	!@#&	while true do!@#&		local e,_,x,y=os.pullEvent\"mouse_click\"!@#&		if back:isclicked(x,y) then!@#&			state=\"mainMenu\"!@#&			return!@#&		end!@#&	end!@#&end!@#&local function defaultGame()!@#&	clear(cx-6,cy-6,colorScheme.back,colorScheme.title)!@#&	term.write(\"Regular game\")!@#&	!@#&	local lights={}!@#&	for i=1,options.defaultGameLights do!@#&		lights[i]=newLight(cx-math.ceil(options.defaultGameLights*2.5)+5*(i-1),cy-4,4,3,math.floor(math.random(0,1)),colorScheme.on,colorScheme.off)!@#&		lights[i]:draw()!@#&	end!@#&	!@#&	local giveup=newButton(2,2,\" Give up \",colorScheme.menuB,colorScheme.menuT)!@#&	giveup:draw()!@#&	!@#&	local function check()!@#&		for i=1,#lights do!@#&			if lights[i].s==0 then return false end!@#&		end!@#&		return true!@#&	end!@#&	!@#&	while true do!@#&		local e,_,x,y = os.pullEvent\"mouse_click\"!@#&		for i=1,#lights do!@#&			if lights[i]:isclicked(x,y) then!@#&				if lights[i-1] then lights[i-1]:toggle() end!@#&				if lights[i+1] then lights[i+1]:toggle() end!@#&				lights[i]:toggle()!@#&				break!@#&			end!@#&		end!@#&		!@#&		if giveup:isclicked(x,y) then!@#&			clear(cx-2,cy,colorScheme.back,colorScheme.text)!@#&			term.write(\"D'oh! :(\")!@#&			sleep(0.75)!@#&			state=\"mainMenu\"!@#&			return!@#&		end!@#&		!@#&		if check() then!@#&			sleep(.2)!@#&			clear(cx-6,cy,colorScheme.back,colorScheme.text)!@#&			term.write(\"Congratulations!\")!@#&			sleep(1)!@#&			state=\"mainMenu\"!@#&			return!@#&		end!@#&	end!@#&end!@#&local function patternGame()!@#&	clear(cx-6,cy-6,colorScheme.back,colorScheme.title)!@#&	term.write(\"Pattern game\")!@#&	!@#&	term.setCursorPos(cx-9,cy+1)!@#&	term.write(\"Copy this pattern:\")!@#&	!@#&	local lights={}!@#&	for i=1,options.patternGameLights do!@#&		lights[i]=newLight(cx-math.ceil(options.patternGameLights*5/2)+5*(i-1),cy-4,4,3,math.floor(math.random(0,1)),colorScheme.on,colorScheme.off)!@#&		lights[i]:draw()!@#&	end!@#&	!@#&	local giveup=newButton(2,2,\" Give up \",colorScheme.menuB,colorScheme.menuT)!@#&	giveup:draw()!@#&	!@#&	local pattern={}!@#&	for i=1,options.patternGameLights do!@#&		pattern[i]=math.floor(math.random(0,1))!@#&		term.setBackgroundColor(pattern[i]==1 and colorScheme.on or colorScheme.off)!@#&		term.setCursorPos(cx-options.patternGameLights+2*(i-1),cy+3)!@#&		term.write(\" \")!@#&	end!@#&	!@#&	local function check()!@#&		for i=1,#lights do!@#&			if lights[i].s~=pattern[i] then return false end!@#&		end!@#&		return true!@#&	end!@#&	!@#&	while check() do!@#&		for i=1,options.patternGameLights do!@#&			pattern[i]=math.floor(math.random(0,1))!@#&			term.setBackgroundColor(pattern[i]==1 and colorScheme.on or colorScheme.off)!@#&			term.setCursorPos(cx-options.patternGameLights+2*(i-1),cy+3)!@#&			term.write(\" \")!@#&		end!@#&	end!@#&	!@#&	while true do!@#&		local e,_,x,y = os.pullEvent\"mouse_click\"!@#&		for i=1,#lights do!@#&			if lights[i]:isclicked(x,y) then!@#&				if lights[i-1] then lights[i-1]:toggle() end!@#&				if lights[i+1] then lights[i+1]:toggle() end!@#&				lights[i]:toggle()!@#&				break!@#&			end!@#&		end!@#&		!@#&		if giveup:isclicked(x,y) then!@#&			clear(cx-2,cy,colorScheme.back,colorScheme.text)!@#&			term.write(\"D'oh! :(\")!@#&			sleep(0.75)!@#&			state=\"mainMenu\"!@#&			return!@#&		end!@#&		!@#&		if check() then!@#&			sleep(.2)!@#&			clear(cx-6,cy,colorScheme.back,colorScheme.text)!@#&			term.write(\"Congratulations!\")!@#&			sleep(1)!@#&			state=\"mainMenu\"!@#&			return!@#&		end!@#&	end!@#&end!@#&!@#&--=================================!@#&--== GAME!@#&--=================================!@#&initialize()!@#&loadOptions()!@#&!@#&while true do!@#&	if state==\"mainMenu\" then!@#&		mainMenu()!@#&	elseif state==\"optionsMenu\" then!@#&		optionsMenu()!@#&	elseif state==\"aboutMenu\" then!@#&		aboutMenu()!@#&	elseif state==\"defaultGame\" then!@#&		defaultGame()!@#&	elseif state==\"patternGame\" then!@#&		patternGame()!@#&	elseif state==\"exit\" then!@#&		break!@#&	end!@#&end!@#&!@#&reset()!@#&saveOptions()",["fnaf"]="local w,h = term.getSize()!@#&local length = os.startTimer(540)!@#&local doorColor = colors.red!@#&local doorClosed = false!@#&local bonnieAppear = os.startTimer(2)!@#&local bonnieIsThere = false!@#&local bonnieLeave = \"idle\"!@#&local power = 100!@#&local light = false!@#&local powerRemove = os.startTimer(6)!@#&!@#&local secLayout = [[!@#&[Stage] [Tables]!@#&  !@#&[SW]       [SE]!@#&[NW] [You] [NE]!@#&]]!@#&!@#&function drawOffice()!@#&  term.setBackgroundColor(colors.black)!@#&  term.clear()!@#&  paintutils.drawImage(paintutils.loadImage(\"/SpeedOS/Applications/GameBox/office\"),1,1)!@#&  for i=16,17 do!@#&    paintutils.drawLine(12,i,13,i,doorColor)!@#&  end!@#&  if(doorClosed == true) then!@#&    for i=7,h - 1 do!@#&      paintutils.drawLine(2,i,7,i,colors.gray)!@#&    end!@#&    !@#&  elseif(doorClosed == false) then!@#&    for i=1,7,h - 1 do!@#&      paintutils.drawLine(2,i,7,i,colors.black)!@#&    end!@#&  end!@#&  if(light == true) then!@#&    paintutils.drawLine(13,4,17,4,colors.blue)!@#&    if(bonnieIsThere == true) then!@#&      paintutils.drawLine(14,4,15,4,colors.black)!@#&    end!@#&  end!@#&  if(bonnieIsThere == true and doorClosed == false and light == true) then!@#&    paintutils.drawImage(paintutils.loadImage(\"/SpeedOS/Applications/GameBox/boDoor\"),2,7)!@#&  end!@#&  term.setCursorPos(1,h)!@#&  term.setTextColor(colors.white)!@#&  term.setBackgroundColor(colors.black)!@#&  write(\"Power: \")!@#&  if(power >= 25) then!@#&    term.setTextColor(colors.green)!@#&    !@#&    else!@#&    !@#&    term.setTextColor(colors.red)!@#&  end!@#&  term.setCursorPos(8,h)!@#&  write(power..\"%\")!@#&end!@#&!@#&drawOffice()!@#&!@#&while power > 1 do!@#&  oldPower = power!@#&  local event, param1, param2, param3 = os.pullEventRaw()!@#&    if(event == \"mouse_click\") then!@#&      X = param2!@#&      Y = param3!@#&      if(X >=12 and X <=13 and Y >=16 and Y <=17) then!@#&        if(doorClosed == false) then!@#&          doorColor = colors.lime!@#&          drawOffice()!@#&          doorClosed = true!@#&          for i=7,h - 1 do!@#&            paintutils.drawLine(2,i,7,i,colors.gray)!@#&          end!@#&        elseif(doorClosed == true) then!@#&          doorClosed = false!@#&          doorColor = colors.red!@#&          drawOffice()!@#&          doorClosed = false!@#&        end!@#&        if(bonnieIsThere == true and doorClosed == true) then!@#&          bonnieLeave = os.startTimer(4)!@#&        end!@#&        if(doorClosed == true) then!@#&          power = power - 2!@#&          powerRemove = os.startTimer(2)!@#&          !@#&          else!@#&          !@#&          powerRemove = os.startTimer(6)!@#&        end!@#&        if(doorClosed == false and bonnieLeave ~= \"idle\") then!@#&          boLeave = \"idle\"!@#&        end!@#&      elseif(X >=12 and X <=13 and Y >=13 and Y <=14) then!@#&        if(light == false) then!@#&          light = true!@#&          !@#&          else!@#&          !@#&          light = false!@#&        end!@#&        if(light == true) then!@#&          paintutils.drawLine(13,4,17,4,colors.blue)!@#&        end!@#&        if(light == true) then!@#&          if(bonnieIsThere == true) then!@#&            paintutils.drawLine(14,4,15,4,colors.black)!@#&          end!@#&        end!@#&        if(light == false) then!@#&          drawOffice()!@#&        end!@#&        if(light == true and bonnieIsThere == true and doorClosed == false) then!@#&          paintutils.drawImage(paintutils.loadImage(\"/SpeedOS/Applications/GameBox/boDoor\"),2,7)!@#&        end!@#&      end!@#&    elseif(event == \"timer\") then!@#&      timer = param1!@#&      if(timer == bonnieLeave) then!@#&        bonnieIsThere = false!@#&        bonnieAppear = os.startTimer(24)!@#&        bonnieLeave = \"idle\"!@#&      elseif(timer == length) then!@#&        term.setBackgroundColor(colors.black)!@#&        term.clear()!@#&        term.setCursorPos(1,1)!@#&        term.setTextColor(colors.blue)!@#&        term.setBackgroundColor(colors.gray)!@#&        textutils.slowWrite(\"You made it through the night!\")!@#&        return!@#&      elseif(timer == bonnieAppear) then!@#&        bonnieIsThere = true!@#&        if(light == true) then!@#&          paintutils.drawImage(paintutils.loadImage(\"/SpeedOS/Applications/GameBox/boDoor\"),2,7)!@#&        end!@#&      elseif(timer == powerRemove) then!@#&        power = power - 1!@#&        if(bonnieIsThere == true) then!@#&          powerRemove = os.startTimer(2)!@#&        elseif(bonnieIsThere == false) then!@#&          powerRemove = os.startTimer(6)!@#&        end!@#&      end!@#&    end!@#&    if(oldPower ~= power) then!@#&      drawOffice()!@#&    end!@#&    if(doorClosed == false and bonnieLeave ~= \"idle\") then!@#&      bonnieLeave = \"idle\"!@#&    end!@#&end!@#&!@#&while power < 1 do!@#&  paintutils.drawImage(paintutils.loadImage(\"/SpeedOS/Applications/GameBox/office\"),1,1)!@#&  break!@#&end!@#&!@#&textutils.slowWrite(\"you died\")",["test3"]="term.clear()!@#&os.loadAPI(\"pages\")!@#&mainPage = pages.addPage()!@#&!@#&function initializeObjects()!@#&  button = pages.newButton(\"Test Button\",1,1,13,3,colors.white,colors.black,function()end)!@#&    mainPage.pageContent.addObject(\"button\",button)!@#&  exit = pages.newButton(\" x \",49,1,3,1,colors.red,colors.white,function() running = false end)!@#&    mainPage.pageContent.addObject(\"button\",exit)!@#&  lable = pages.newLabel({\"Hello\",\"World\"},10,10,10,3,true,true,colors.gray,colors.white)!@#&    mainPage.pageContent.addObject(\"lable\",lable)!@#&  pb = pages.newProgressBar(1,18,52,\"Loading\",colors.lime,colors.gray,colors.white)!@#&    mainPage.pageContent.addObject(\"progressBar\",pb)!@#&  dd = pages.newDropDown(\"Drop Down\",25,10,10,colors.blue,colors.white,colors.gray,colors.white)!@#&    mainPage.pageContent.addObject(\"dropDown\",dd)!@#&  sb1 = pages.newScrollBar(1,19,30,10,true,colors.lightGray,colors.gray,colors.lightGray,colors.gray)!@#&    mainPage.pageContent.addObject(\"scrollBar\",sb1)!@#&end!@#&!@#&function clear()!@#&  term.setBackgroundColor(colors.black)!@#&  term.clear()!@#&end!@#&!@#&function displayObjects(oType)!@#&  for _,i in ipairs(mainPage.pageContent.getObjects(oType)) do!@#&     i.draw()!@#&  end!@#&end!@#&!@#&function testClick(oType,x,y)!@#&  for _,i in ipairs(mainPage.pageContent.getObjects(oType))do!@#&    i.clicked(x,y)!@#&  end!@#&end!@#&!@#&running = true!@#&initializeObjects()!@#&displayObjects(\"*\")!@#&while running do!@#&  clear()!@#&  displayObjects(\"*\")!@#&  event,key,x,y = os.pullEvent(\"mouse_click\")!@#&  testClick(\"button\",x,y)!@#&end",["Nothing"]="os.loadAPI(\"/SpeedAPI/alphanumeric\")!@#&os.loadAPI(\"/SpeedAPI/SpeedText\")!@#&!@#&local workingTime = 0!@#&local x, y = term.getSize()!@#&local last_score = fs.open(\"/SpeedOS/Applications/Logs/nothing.score\", \"r\").readAll()!@#&!@#&term.setBackgroundColor(colors.gray)!@#&term.setTextColor(colors.lightGray)!@#&term.clear()!@#&!@#&while true do!@#&  term.setBackgroundColor(colors.gray)!@#&  term.setTextColor(colors.lightGray)!@#&  term.clear()!@#&!@#&  workingTime = workingTime + 1!@#&  !@#&  term.setCursorPos(1, 1)!@#&  term.setTextColor(colors.white)!@#&  io.write(\"Last score: \")!@#&  term.setTextColor(colors.lightGray)!@#&  io.write(tostring(last_score))!@#&!@#&  SpeedText.cPrint(\"You are doing nothing\", 5)!@#&  SpeedText.cPrint(\"for\", 6)!@#&!@#&  if workingTime < 10 then!@#&	  alphanumeric.stringToImg(tostring(workingTime), colors.white, (x/2)-2, 8)!@#&  elseif workingTime < 100 then!@#&	  alphanumeric.stringToImg(tostring(workingTime), colors.white, ((x/2)-2) - 3, 8)!@#&!@#&  elseif workingTime < 1000 then!@#&	  alphanumeric.stringToImg(tostring(workingTime), colors.white, ((x/2)-2) - 6, 8)!@#&!@#&  elseif workingTime < 10000 then!@#&	  alphanumeric.stringToImg(tostring(workingTime), colors.white, ((x/2)-2) - 9, 8)!@#&  !@#&  elseif workingTime < 100000 then!@#&	  alphanumeric.stringToImg(tostring(workingTime), colors.white, ((x/2)-2) - 12, 8)!@#&  !@#&  elseif workingTime < 1000000 then!@#&	  alphanumeric.stringToImg(tostring(workingTime), colors.white, ((x/2)-2) - 15, 8)!@#&  !@#&  elseif workingTime < 10000000 then!@#&	  alphanumeric.stringToImg(tostring(workingTime), colors.white, ((x/2)-2) - 18, 8)!@#&!@#&  end!@#&    !@#&!@#&  sleep(1)!@#&  term.clear()!@#&  !@#&  local file = fs.open(\"/SpeedOS/Applications/Logs/nothing.score\", \"w\")!@#&  file.write(tostring(workingTime))  !@#&  file.flush()!@#&  file.close()!@#&end",["2048"]="-- 2048!@#&-- Clone by Richard (Rich73)!@#&-- Hacked together 10/04/2014!@#&!@#&g = { }!@#&tiles = { }!@#&tiles[1]  = {\"    \", 1}!@#&tiles[2]  = {\" 2  \", 2}!@#&tiles[3]  = {\" 4  \", 4}!@#&tiles[4]  = {\" 8  \", 8}!@#&tiles[5]  = {\" 16 \", 16}!@#&tiles[6]  = {\" 32 \", 32}!@#&tiles[7]  = {\" 64 \", 64}!@#&tiles[8]  = {\"128 \", 128}!@#&tiles[9]  = {\"256 \", 256}!@#&tiles[10] = {\"512 \", 512}!@#&tiles[11] = {\"1024\", 1024}!@#&tiles[12] = {\"2048\", 2048}!@#&size = 4!@#&score = 0!@#&hiscore = 0!@#&!@#&function createBoard()!@#&  for i=1, size do!@#&    g[i] = { }!@#&    for j=1, size do!@#&      g[i][j] = 0!@#&    end!@#&  end!@#&  for j=1, 2 do!@#&    local x, y = findEmptyPos()!@#&    g[y][x] = 1!@#&  end!@#&end!@#&!@#&function getRandomPos()!@#&  return math.random(size), math.random(size)!@#&end!@#&!@#&function findEmptyPos()!@#&  while true do!@#&    x, y = getRandomPos()!@#&    if g[y][x] == 0 then return x, y end!@#&  end!@#&end!@#&!@#&function isFull()!@#&  local full = true!@#&  for i=1, size do!@#&    for j=1, size do!@#&      if g[i][j] == 0 then full = false end!@#&    end!@#&  end!@#&  return full!@#&end!@#&!@#&function canMove()!@#&  if not isFull() then return true end!@#&  local pr = nil!@#&  for i=1, size do!@#&    local k = 1!@#&    while k <= size do!@#&      if k~=size and g[i][k] == g[i][k+1] or false then break end!@#&      if pr and g[i][k] == pr[k] or false then break end!@#&      k = k + 1!@#&    end!@#&    if k ~= size+1 then return true end!@#&    pr = g[i]!@#&  end!@#&  return false!@#&end!@#&!@#&function moveLeft()!@#&  for i=1, size do!@#&    for j=2, size do!@#&      local k = j!@#&      while k > 1 do!@#&        if g[i][k] == 0 then break!@#&        elseif g[i][k] == g[i][k-1] then!@#&          g[i][k-1] = g[i][k] + 1!@#&          g[i][k] = 0!@#&          score = score + math.pow(2,g[i][k-1])!@#&          k = k-1!@#&        elseif g[i][k-1] == 0 then!@#&          g[i][k-1] = g[i][k]!@#&          g[i][k] = 0!@#&        else break end!@#&        k = k-1!@#&      end!@#&    end!@#&  end!@#&end!@#&!@#&function moveUp()!@#&  for j=1, size do!@#&    for i=2, size do!@#&      local k = i!@#&      while k > 1 do!@#&        if g[k][j] == 0 then break!@#&        elseif g[k][j] == g[k-1][j] then!@#&          g[k-1][j] = g[k][j] + 1!@#&          g[k][j] = 0!@#&          score = score + math.pow(2,g[k-1][j])!@#&          k = k-1!@#&        elseif g[k-1][j] == 0 then!@#&          g[k-1][j] = g[k][j]!@#&          g[k][j] = 0!@#&        else break end!@#&        k = k-1!@#&      end!@#&    end!@#&  end!@#&end!@#&!@#&function moveRight()!@#&  flipX()!@#&  moveLeft()!@#&  flipX()!@#&end!@#&!@#&function moveDown()!@#&  flipY()!@#&  moveUp()!@#&  flipY()!@#&end!@#&!@#&function drawBoard()!@#& term.setBackgroundColor(colors.black)!@#& term.clear()!@#& term.setTextColor(colors.white)!@#&  for x=1, size do!@#&    for y=1, size do!@#&      term.setCursorPos(x*5-1,y*4-2)!@#&      term.setBackgroundColor(tiles[g[y][x]+1][2])!@#&      term.write(\"    \")!@#&      term.setCursorPos(x*5-1,y*4-1)!@#&      term.write(tiles[g[y][x]+1][1])!@#&      term.setCursorPos(x*5-1,y*4)!@#&      term.write(\"    \")!@#&    end!@#&  end !@#&  term.setCursorPos(4,18)!@#&  term.setBackgroundColor(colors.black)!@#&  term.setTextColor(colors.yellow)!@#&  term.write(\"Score: \"..score)!@#&  drawScores()!@#&end!@#&!@#&function drawScores()!@#&  term.setCursorPos(4,18)!@#&  term.setTextColor(colors.yellow)!@#&  term.setBackgroundColor(colors.black)!@#&  term.write(\"  Score: \"..score)!@#&  term.setCursorPos(4,19)!@#&  term.setTextColor(colors.orange)!@#&  term.write(\"HiScore: \"..hiscore)!@#&end!@#&!@#&function drawHome()!@#&  term.clear()!@#&end!@#&!@#&function table.reverse(tab)!@#&  local newtab = { }!@#&  for i=1, #tab do!@#&    newtab[#tab+1-i] = tab[i]!@#&  end!@#&  return newtab!@#&end!@#&!@#&function flipX()!@#&  for i=1, size do!@#&    g[i] = table.reverse(g[i])!@#&  end!@#&end!@#&!@#&function flipY()!@#&  g = table.reverse(g)!@#&end!@#&!@#&function update()!@#&  drawBoard()!@#&  if not isFull() then!@#&    local x, y = findEmptyPos()!@#&    g[y][x] = 1!@#&  end!@#&  os.sleep(0.075)!@#&end!@#&!@#&function newGame()!@#&  if score > hiscore then!@#&    hiscore = score!@#&  end!@#&  score = 0!@#&  term.setCursorPos(9,18)!@#&  term.setBackgroundColor(colors.gray)!@#&  term.setTextColor(colors.white)!@#&  term.clearLine()!@#&  term.write(\"GAME OVER!\")!@#&  term.setCursorPos(8,19)!@#&  term.clearLine()!@#&  term.write(\"New game? y/n\")!@#&  while true do!@#&    local event, key = os.pullEvent(\"key\")!@#&    if event==\"key\" then!@#&      if key==keys.y then return true end!@#&      if key==keys.n then return false end!@#&    end!@#&  end!@#&end!@#&!@#&while true do!@#&  createBoard()!@#&  while canMove() do!@#&    drawBoard()!@#&    event, key = os.pullEvent(\"key\")!@#&    if event == \"key\" then!@#&      if key == keys.left then moveLeft()!@#&      elseif key == keys.right then !@#&        moveRight()!@#&        update()!@#&      elseif key == keys.up then!@#&        moveUp()!@#&        update()!@#&      elseif key == keys.down then!@#&        moveDown()!@#&        update()!@#&      elseif key == keys.q then!@#&        break!@#&      elseif key == keys.enter then!@#&	term.clear()!@#&	term.setCursorPos(1, 1)!@#&	term.setTextColor(colors.white)!@#&	term.setBackgroundColor(colors.black)!@#&	error()!@#&      end!@#&    end!@#&  end!@#&  drawBoard()!@#&  if not newGame() then!@#&    term.setBackgroundColor(colors.black)!@#&    term.setTextColor(colors.white)!@#&    term.clear()!@#&    term.setCursorPos(1,1)!@#&    break!@#&  end!@#&end",["eShip12_broken.img"]="!@#&               9999977!@#&              99777777f!@#&              7777777ff!@#&              f777777!@#&               7ff7ff!@#&               ffffff!@#&              f9ffff9!@#&              7777777ff!@#&              99777777f!@#&               9999977",["eShip7.img"]="!@#&               777b777!@#&              7   bbbb!@#&             77   b77!@#&             bb   b77!@#&              b   b777!@#&               bbbbbbb",["eShip4.img"]="                     eee!@#&               eeeeee111!@#&              e      e!@#&              1      1!@#&               1111ee1ee!@#&                     111",["r_levels"]={["10"]="5!@#& 777    77777!@#& 727777778837!@#& 788888878787!@#& 787777888887!@#&77877778777777!@#&7e8b7888b888e7!@#&7787787b777877!@#& 777887887887!@#&   7487807487!@#&   7777777777",["1"]="1!@#&     777!@#&     7b7!@#&     787!@#&7777778777!@#&7188888887!@#&7777777777",["0"]="0!@#&77     77!@#&718888887!@#& 8     8!@#& 8     8!@#& 8     8!@#&788888897!@#&77     77",["11"]="4!@#&   777777777!@#&   727872787!@#&   787878787!@#&777787878787777!@#&7be888888888be7!@#&777787878787777!@#&   787878787!@#&   787478747!@#&   777777777",["3"]="2!@#&  77777777!@#&777888188777!@#&7b78777787b7!@#&78787  78787!@#&78787  78787!@#&78887  78887!@#&777877778777!@#&  78838887!@#&  77777777",["5"]="3!@#&777777777!@#&788888887!@#&787787787!@#&787787787!@#&788888887!@#&787787787!@#&787787787!@#&78e748887!@#&777777777",["4"]="2!@#&    77777777!@#&777778888887!@#&788888777787!@#&7b77787  787!@#&787 787  787!@#&7b77787  787!@#&7888887  787!@#&7777707  707!@#&    777  777",["7"]="3!@#&728777778b7!@#&78888888887!@#&78777877787!@#&787 787 787!@#&787 7877788!@#&787 7888889!@#&88777877777!@#&e888887!@#&7777887",["6"]="4!@#&7777777777!@#&7288888837!@#&78      87!@#&788888b 87!@#&788888b 87!@#&788888b 87!@#&788888b 87!@#&78      87!@#&7188888807!@#&7777777777",["9"]="2!@#&    777  777!@#&  777877778777!@#&  788838888887!@#&7778bbbbbbbb8777!@#&7888b888888b8897!@#&7878be8888eb8787!@#&7588b888888b8887!@#&7778bbbbbbbb8777!@#&  788888818887!@#&  777877778777!@#&    777  777",["8"]="4!@#&777777 7777!@#&7287b7 7867!@#&788787 7887!@#&77878777877!@#& 7888eb8887!@#& 77877787877!@#& 7887 787887!@#& 7487 7e7807!@#& 7777 777777",["2"]="1!@#&777777777!@#&7888888b7!@#&787778887!@#&787 78777!@#&7877787!@#&7888887!@#&7777787!@#&    707!@#&    777",["12"]="6!@#&77  777  77!@#&72888888897!@#& 8   8   8!@#& 8 8b888 8!@#&78 e8888 87!@#&78888788887!@#&78 8888e 87!@#& 8 888b8 8!@#& 8   8   8!@#&75888888807!@#&77  777  77",},["bbtetris.dat"]="Save data file for Bomb Bloke's Tetris game.!@#&{[1]=900,[2]=0,[3]=0,[4]=0,[5]=0,[6]=0,[7]=0,[8]=0,}!@#&{[1]={[\"x\"]=1,[\"nextSpeed\"]=9999,[\"level\"]=0,[\"nextBlock\"]=1,[\"startLevel\"]=0,[\"curBlock\"]=3,[\"score\"]=0,[\"rotation\"]=2,[\"startSpeed\"]=0,[\"grid\"]={[1]={},[2]={},[3]={},[4]={},[5]={},[6]={},[7]={},[8]={},[9]={},[10]={},[11]={},[12]={},[13]={},[14]={},[15]={},[16]={},[17]={},[18]={},[19]={},},[\"speed\"]=0,[\"y\"]=5,},}",["eShip11.img"]="!@#&                777779!@#&              777   79!@#&             7999   99!@#&             9   9997!@#&             7   7777!@#&             7777   79!@#&              797   79!@#&                999999",["gameoflife"]="--]] Game of life, by Redxone(Lewisk3), Special thanks to: MultMine [[--!@#&-- Rules:!@#&-- if less than 2, die!@#&-- if more then 3, die!@#&-- if has 2 or 3, live!@#&-- if more then 3, die!@#&-- if has exactly 3 and is dead, live!@#&os.loadAPI(\"/SpeedAPI/grid\")!@#&------------------------------------!@#&term.setBackgroundColor(colors.black)!@#&term.clear()!@#&term.setCursorPos(1,1)!@#&term.setBackgroundColor(colors.gray)!@#&term.setTextColor(colors.white)!@#&term.clearLine()!@#&local w, h = term.getSize()!@#&-- check for updates -- !@#&term.setBackgroundColor(colors.gray)!@#&term.setTextColor(colors.white)!@#&term.clear()!@#&term.setCursorPos((w/2) - 11, 4)!@#&term.clear()!@#&term.setCursorPos((w/2) - 12, (h/2) - 1)!@#&print(\"Creating cell universe...\")!@#&local verse = grid.create(82,50)!@#&local ngen = grid.create(82,50)!@#&sleep(0.2)!@#&local isPaused = false!@#&local running = true!@#&local generation = 0!@#&local speed = 0.2!@#&local xoff, yoff = 0, 0!@#&local genTimer = os.startTimer(speed)!@#&function newCell(alive)!@#&    local cell = {isAlive=true}!@#&    if(not alive)then cell.isAlive = false end!@#&    return cell!@#&end!@#&--- Fill universe with dead cells ---!@#&--verse:fill(newCell(false))!@#&--ngen:fill(newCell(false))!@#&--------------------------------------!@#&function drawCell(x,y)!@#&    if(x <= w and y <= 50 and y >= 2)then!@#&        term.setCursorPos(x,y)!@#&        if(verse:get(x+xoff,y+yoff).isAlive==true)then!@#&            if(isPaused)then term.setBackgroundColor(colors.yellow) else term.setBackgroundColor(colors.green) end!@#&            term.setTextColor(colors.black)!@#&            write(' ')!@#&        else!@#&             if(isPaused)then term.setBackgroundColor(colors.gray) else term.setBackgroundColor(colors.black) end!@#&             term.setTextColor(colors.lightGray)!@#&             if(isPaused)then write('L') else write (' ') end!@#&        end!@#&    end!@#&end!@#&function updateview()!@#&    for x = 1, verse:getHeight() do!@#&        for y = 1, verse:getWidth() do!@#&            drawCell(y,x)!@#&        end!@#&    end!@#&end!@#&function life()!@#&    for x = 1, verse:getHeight() do!@#&        for y = 1, verse:getWidth() do!@#&            local friends = 0!@#&            drawCell(y,x)!@#&		    for _y = -1, 1 do!@#&		     for _x = -1, 1 do!@#&		      if _y ~= 0 or _x ~= 0 then!@#&		       if(verse:get(y+_y,x+_x).isAlive == true) then friends = friends + 1 end!@#&		      end!@#&		     end!@#&		    end!@#&             -- Die conditions!@#&            if(verse:get(y,x).isAlive and friends < 2)then!@#&                ngen:set(y,x,newCell(false))!@#&            elseif(friends > 3 and verse:get(y,x).isAlive)then!@#&                ngen:set(y,x,newCell(false))!@#&            end!@#&                -- Live conditions!@#&            if(verse:get(y,x).isAlive and (friends == 2 or friends == 3))then!@#&                ngen:set(y,x,newCell(true))!@#&            end!@#&            if(verse:get(y,x).isAlive ~= true and (friends == 3))then!@#&                ngen:set(y,x,newCell(true))!@#&            end!@#&        end!@#&    end!@#&  verse:replace(ngen:getRaw())!@#&  ngen = grid.create(82,50)!@#&end!@#&function infoBar()!@#&    term.setCursorPos(1,1)!@#&    term.setBackgroundColor(colors.gray)!@#&    term.setTextColor(colors.white)!@#&    term.clearLine()!@#&    local printgeneration = generation!@#&    if generation > 999 then printgeneration = 999 end!@#&    write(\" Editing:\" .. tostring(isPaused) .. \" Generation: \" .. printgeneration .. \",\" .. speed .. \" X:\" .. xoff .. \",Y:\" .. yoff)!@#&    term.setCursorPos(w,1)!@#&    term.setBackgroundColor(colors.red)!@#&    write('X')!@#&    term.setCursorPos(w-1,1)!@#&    term.setBackgroundColor(colors.lightGray)!@#&    write('C')!@#&end!@#&function endscr()!@#&	term.setBackgroundColor(colors.black)!@#&    term.clear()!@#&    term.setCursorPos(1,1)!@#&    term.setBackgroundColor(colors.gray)!@#&    term.setTextColor(colors.white)!@#&    term.clearLine()!@#&    write(\"Thank you for playing Lewisk3's Game Of Life! Credits: John Conway, Multmine\")!@#&    term.setCursorPos(w,1)!@#&    term.setBackgroundColor(colors.brown)!@#&    write('X')!@#&	term.setBackgroundColor(colors.black)!@#&    term.setCursorPos(1,3)!@#&!@#&end!@#&!@#&verse:loop(drawCell)!@#&while running do!@#&    infoBar()!@#&    ev = {os.pullEvent()}!@#&    if(ev[1] == 'key')then!@#&        if(ev[2] == keys.space)then isPaused = not isPaused end!@#&        if(ev[2] == keys.w and yoff > 0)then yoff = yoff - 1 end!@#&        if(ev[2] == keys.a and xoff > 0)then xoff = xoff - 1 end!@#&        if(ev[2] == keys.s and yoff < verse:getHeight()-h)then yoff = yoff + 1 end!@#&        if(ev[2] == keys.d and xoff < verse:getWidth()-w)then xoff = xoff + 1 end!@#&        if(ev[2] == keys.up and speed > 0.01)then speed = speed - 0.01 end  !@#&        if(ev[2] == keys.down)then speed = speed + 0.01 end!@#&        updateview()!@#&    end!@#&    if(ev[1] == 'timer' and ev[2] == genTimer)then!@#&        if(not isPaused)then life() generation = generation + 1 end!@#&        genTimer = os.startTimer(speed)!@#&    elseif(ev[1] == \"mouse_click\" or ev[1] == \"mouse_drag\")then!@#&        	if(ev[3] == w and ev[4] == 1)then running = false endscr() end!@#&        	if(ev[3] == w-1 and ev[4] == 1)then verse = grid.create(verse:getWidth(),verse:getHeight()) verse:fill({}) ngen = grid.create(ngen:getWidth(),ngen:getHeight()) updateview() end!@#&        if(isPaused)then   !@#&            if(ev[2] == 1)then verse:set(ev[3]+xoff,ev[4]+yoff,newCell(true)) end!@#&            if(ev[2] == 2)then verse:set(ev[3]+xoff,ev[4]+yoff,{}) end!@#&            drawCell(ev[3],ev[4])!@#&        end!@#&    end!@#&end",["SimonSays"]="local Seq = {}!@#&local score = 0!@#&local function getColourOf(hex)!@#&        local value = tonumber(hex, 16)!@#&        if not value then return nil end!@#&        value = math.pow(2,value)!@#&        return value!@#&end!@#&!@#&local function drawPictureTable(image, xinit, yinit)!@#&        for y=1,#image do!@#&                for x=1,#image[y] do!@#&                        term.setCursorPos(xinit + x-1, yinit + y-1)!@#&                        local col = getColourOf(string.sub(image[y], x, x))!@#&                        if col ~= nil then !@#&                        	term.setBackgroundColour(col)!@#&                        	term.write(\" \")!@#&                        end!@#&                end!@#&        end!@#&end!@#&local function drawGreen() drawPictureTable({\"ffffffffffffffffffffffffff\",\"f555555555555555555555555f\",\"f555555555555555555555555f\",\"f555555555555555555555555f\",\"f555555555555555555555555f\",\"f555555555555555555555ffff\",\"f55555555555555555555ff\",\"f5555555555555555555ff\",\"f5555555555555555555f\",\"fffffffffffffffffffff\"},1,1) end!@#&local function drawGreen2() drawPictureTable({\"ffffffffffffffffffffffffff\",\"f888888888888588558888888f\",\"f555555555555585588555555f\",\"f888888888888885885588888f\",\"f555555555555555855885555f\",\"f888888888888888858855ffff\",\"f55555555555555555855ff\",\"f8888888888888888885ff\",\"f5555555555555555555f\",\"fffffffffffffffffffff\"},1,1) end!@#&!@#&local function drawRed() drawPictureTable({\"ffffffffffffffffffffffff\",\"eeeeeeeeeeeeeeeeeeeeeeeef\",\"eeeeeeeeeeeeeeeeeeeeeeeef\",\"eeeeeeeeeeeeeeeeeeeeeeeef\",\"eeeeeeeeeeeeeeeeeeeeeeeef\",\"fffeeeeeeeeeeeeeeeeeeeeef\",\"  ffeeeeeeeeeeeeeeeeeeeef\",\"   ffeeeeeeeeeeeeeeeeeeef\",\"    feeeeeeeeeeeeeeeeeeef\",\"    fffffffffffffffffffff\"},27,1) end!@#&local function drawRed2() drawPictureTable({\"ffffffffffffffffffffffff\",\"8888888ee88e888888888888f\",\"eeeeee88ee8eeeeeeeeeeeeef\",\"88888ee88e88888888888888f\",\"eeee88ee8eeeeeeeeeeeeeeef\",\"fffee88e8888888888888888f\",\"  ffee8eeeeeeeeeeeeeeeeef\",\"   ffe888888888888888888f\",\"    feeeeeeeeeeeeeeeeeeef\",\"    fffffffffffffffffffff\"},27,1) end!@#&!@#&local function drawYellow() drawPictureTable({\"f4444444444444444444f\",\"f4444444444444444444ff\",\"f44444444444444444444ff\",\"f444444444444444444444ffff\",\"f444444444444444444444444f\",\"f444444444444444444444444f\",\"f444444444444444444444444f\",\"f444444444444444444444444f\",\"ffffffffffffffffffffffffff\"},1,11) end!@#&local function drawYellow2() drawPictureTable({\"f4444444444444444444f\",\"f8888888888888888884ff\",\"f44444444444444444844ff\",\"f888888888888888848844ffff\",\"f444444444444444844884444f\",\"f888888888888884884488888f\",\"f444444444444484488444444f\",\"f888888888888488448888888f\",\"ffffffffffffffffffffffffff\"},1,11) end!@#&!@#&local function drawBlue() drawPictureTable({\"    f3333333333333333333f\",\"   ff3333333333333333333f\",\"  ff33333333333333333333f\",\"fff333333333333333333333f\",\"333333333333333333333333f\",\"333333333333333333333333f\",\"333333333333333333333333f\",\"333333333333333333333333f\",\"fffffffffffffffffffffffff\"},27,11) end!@#&local function drawBlue2() drawPictureTable({\"    f3333333333333333333f\",\"   ff3888888888888888888f\",\"  ff33833333333333333333f\",\"fff338838888888888888888f\",\"333388338333333333333333f\",\"888883388388888888888888f\",\"333333883383333333333333f\",\"888888833883888888888888f\",\"fffffffffffffffffffffffff\"},27,11) end!@#&local function drawCenter() drawPictureTable({\"     00000\",\"    0000000\",\"   000000000\",\"   000000000\",\"   000000000\",\"    0000000\",\"     00000\"},19,7) end!@#&!@#&function getSelectedColor(x,y)!@#&	if (x >= 2 and x <= 20 and y <= 9 and y >= 2) or (x == 21 and y <= 7 and y >= 2) or (x == 22 and y <= 6 and y >= 2) or (x >= 23 and x <= 25 and y <= 5 and y >= 2) then return 1 -- Green Section!@#&	elseif (x >= 27 and x <= 29 and y <= 5 and y >= 2) or (x == 30 and y <= 6 and y >= 2) or (x == 31 and y <= 7 and y >= 2) or (x >= 32 and x <= 50 and y <= 9 and y >= 2) then return 2 -- Red Sections!@#&	elseif (x >= 2 and x <= 20 and y <= 18 and y >= 11) or (x == 21 and y <= 18 and y >= 13) or (x == 22 and y <= 18 and y >= 14) or (x >= 23 and x <= 25 and y <= 18 and y >= 15) then return 3 -- Yellow Section!@#&	elseif (x >= 27 and x <= 29 and y <= 18 and y >= 15) or (x == 30 and y <= 18 and y >= 14) or (x == 31 and y <= 18 and y >= 13) or (x >= 32 and x <= 50 and y <= 18 and y >= 11) then return 4 -- Blue Section!@#&	elseif x == 51 and y == 1 then return 5!@#&	else return 0 end!@#&end!@#&function LightColor(num)!@#&	if num == 1 then!@#&		sleep(.5)!@#&		drawGreen2()!@#&		sleep(.5)!@#&		drawGreen()!@#&	elseif num == 2 then!@#&		sleep(.5)!@#&		drawRed2()!@#&		sleep(.5)!@#&		drawRed()!@#&	elseif num == 3 then!@#&		sleep(.5)!@#&		drawYellow2()!@#&		sleep(.5)!@#&		drawYellow()!@#&	elseif num == 4 then!@#&		sleep(.5)!@#&		drawBlue2()!@#&		sleep(.5)!@#&		drawBlue()!@#&	end!@#&end!@#&!@#&function playThrough()!@#&	for i=1,#Seq do!@#&		local num = Seq[i]!@#&		LightColor(num)!@#&	end!@#&end!@#&!@#&local function quit()!@#&	term.setBackgroundColor(colors.black)!@#&	term.setTextColor(colors.yellow)!@#&	term.clear()!@#&	term.setCursorPos(1,1)!@#&	error()!@#&end!@#&!@#&function PlayGame()!@#&	while GameOver ~=true do!@#&		x=1!@#&		table.insert(Seq,math.random(1,4))!@#&		score = #Seq-1!@#&		drawCenter()!@#&		term.setBackgroundColor(colors.white)!@#&		term.setTextColor(colors.black)!@#&		term.setCursorPos(27-(string.len(\"Score:\")/2),9)!@#&		print(\"Score:\")!@#&		term.setCursorPos(26,11)!@#&		print(tostring(score))!@#&		playThrough()!@#&		while x <=#Seq do!@#&			local event,p1,p2,p3 = os.pullEvent()!@#&			if event == \"mouse_click\" then!@#&				local result = getSelectedColor(p2,p3)!@#&				if result == Seq[x] then x=x+1!@#&				elseif result == 0 then!@#&				elseif result == 5 then quit()!@#&				else GameOver = true;break end!@#&			end!@#&		end!@#&	end!@#&	drawCenter()!@#&	term.setCursorPos(27-(string.len(\"Score:\")/2),12)!@#&	print(\"Score:\")!@#&	term.setCursorPos(26,13)!@#&	print(tostring(score))!@#&	GameOver= false!@#&	Seq = {}!@#&end!@#&!@#&drawGreen();drawRed();drawYellow();drawBlue();drawCenter()!@#&term.setCursorPos(51,1)!@#&term.setBackgroundColor(colors.black)!@#&term.setTextColor(colors.white)!@#&write(\"X\")!@#&!@#&while true do!@#&	term.setBackgroundColor(colors.lightBlue)!@#&	term.setTextColor(colors.black)!@#&	local w,h = term.getSize()!@#&	term.setCursorPos((w/2)-2,h/2+1)!@#&	print(\" Play! \")!@#&	while true do!@#&		local event,p1,p2,p3 = os.pullEvent()!@#&		if event == \"mouse_click\" and p1 == 1 then!@#&			if p2 >= (w/2)-2 and p2 <= (w/2)+4 and p3 == 10 then!@#&				PlayGame()!@#&				break!@#&			elseif p2 == 51 and p3 == 1 then!@#&				quit()!@#&			end!@#&		end!@#&	end!@#&end",["eShip5_broken.img"]="               eeeeeeeee!@#&              e1fff11111f!@#&              effff11efff!@#&              ffffff1f!@#&              f1ffffff!@#&              e1fffefefff!@#&              e1fffe11eef!@#&               11ee11111",["office"]="!@#&!@#&           7777777777777!@#&           7           7!@#&           7           7!@#&77777777   7           7!@#&7      7   7           7!@#&7      7   7           7!@#&7      7   7           7!@#&7      7   7777777777777!@#&7      7!@#&7      7!@#&7      7   00!@#&7      7   00!@#&7      7!@#&7      7!@#&7      7!@#&7      7",["pages"]="content = {}!@#&pages = {}!@#&!@#&function addPage()!@#&	local pageNumber = #content+1!@#&	content[#content+1] =  !@#&	{!@#&		background = nil,!@#&		setBackground = function(path)!@#&			content[pageNumber].background = paintutils.loadImage(path)!@#&		end,!@#&		getBackground = function()!@#&			return content[pageNumber].background!@#&		end,!@#&		pageContent = !@#&		{!@#&			objects = {},!@#&			getObjects = function(oType)--string type!@#&				temp = {}!@#&				if(oType==\"*\")then!@#&					for i=1,#content[pageNumber].pageContent.objects,1 do!@#&						temp[#temp+1] = content[pageNumber].pageContent.objects[i].object!@#&					end!@#&					return temp!@#&				else!@#&					for i=1,#content[pageNumber].pageContent.objects,1 do!@#&						if(content[pageNumber].pageContent.objects[i].objectType==oType)then!@#&							temp[#temp+1] = content[pageNumber].pageContent.objects[i].object!@#&						end!@#&					end!@#&					return temp!@#&				end!@#&			end,!@#&			addObject = function(oType,obj)--string type, table of object elements!@#&				content[pageNumber].pageContent.objects[#content[pageNumber].pageContent.objects+1] = {objectType = oType, object = obj}!@#&				return content[pageNumber].pageContent.objects[#content[pageNumber].pageContent.objects]!@#&			end!@#&			!@#&		}!@#&	} !@#&	pages[#pages+1] = content[number]!@#&	return content[pageNumber]!@#&end!@#&!@#&drawing = !@#&{!@#&	displayImage = function(image,x,y)!@#&		paintutils.drawImage(image,x,y)!@#&	end,!@#&	fillArea = function(color,xpos,ypos,wid,high)!@#&		term.setCursorPos(1,1)!@#&!@#&		term.setBackgroundColor(color)!@#&		for y=ypos,ypos+high-1,1 do!@#&			for x=xpos,xpos+wid-1,1 do!@#&				term.setCursorPos(x,y)!@#&				write(\" \")!@#&			end!@#&		end!@#&	end,!@#&	writeText = function(text,x,y,color,bgcolor)!@#&		term.setBackgroundColor(color)!@#&		term.setCursorPos(x,y)!@#&		write(text)!@#&	end,!@#&	writeTextCentered = function(text,x,y,wid,high,color,bgcolor)!@#&		term.setCursorPos(x+(wid-#text)/2,y+high/2)!@#&		term.setTextColor(color)!@#&		term.setBackgroundColor(bgcolor)!@#&		term.write(text)!@#&	end,!@#&	clear = function()!@#&		term.setBackgroundColor(colors.black)!@#&		term.clear()!@#&		term.setCursorPos(1,1)!@#&	end!@#&}!@#&!@#&Objects = !@#&{!@#&	Buttons = {},!@#&	Labels = {},!@#&	Images = {},!@#&	DropDowns = {},!@#&	ScrollBars = {},!@#&	ProgressBars = {},!@#&	TextBoxes = {},!@#&	NotificationWindows = {}!@#&}!@#&!@#&!@#&function newButton(text,xpos,ypos,wid,high,c,tc,f)--Button text, x position, y position, width, height, color, text color, Button Function!@#&	local itemNumber = #Objects.Buttons+1!@#&	Objects.Buttons[itemNumber] = !@#&	{!@#&		attributes = {name = text,x = xpos,y = ypos,width = wid,height = high,color = c,textcolor = tc,visible = true,buttonFunction = f},!@#&		draw = function()!@#&			b = Objects.Buttons[itemNumber].attributes!@#&			if(b.visible)then!@#&				drawing.fillArea(b.color,b.x,b.y,b.width,b.height)      !@#&				drawing.writeTextCentered(b.name,b.x,b.y,b.width,b.height,b.textcolor,b.color)!@#&			end!@#&		end,!@#&		clicked = function(xpos,ypos,executeF)--executeF tells the function whether or not to execute the button's function !@#&			b = Objects.Buttons[itemNumber].attributes!@#&			if(xpos>=b.x and xpos<=b.x+b.width-1) then!@#&				if(ypos>=b.y and ypos<=b.y+b.height-1) then!@#&					if(executeF)then!@#&						b.buttonFunction()!@#&					end!@#&					return true!@#&				end!@#&			end!@#&			return false!@#&		end,!@#&		setVisibility = function(boolean)!@#&			Objects.Buttons[itemNumber].attributes.visible = boolean!@#&		end!@#&	}!@#&	return Objects.Buttons[itemNumber]!@#&end!@#&!@#&!@#&function newLabel(t,xpos,ypos,w,h,centH,centV,c,tc)--the text for a label is a table i.e. {\"hello world\" , \"This is a test\"} or {\"hello world\"}!@#&											--Label text, x position, y position, width, height, centered horizontally?, centered vertically?, color, text color!@#&	local itemNumber = #Objects.Labels+1!@#&	Objects.Labels[itemNumber] = !@#&	{!@#&		attributes = {text = t,x = xpos,y = ypos,width = w,height = h,centeredH = centH,centeredV = centV,color = c,textcolor = tc,visible = true},!@#&		setText = function(t)!@#&			Objects.Labels[itemNumber].attributes.text = t!@#&		end,!@#&		draw = function()!@#&			l = Objects.Labels[itemNumber].attributes!@#&			if(l.visible)then!@#&				drawing.fillArea(l.color,l.x,l.y,l.width,l.height)!@#&				if(l.centeredH)then!@#&					for i=1,#l.text,1 do!@#&						drawing.writeTextCentered(l.text[i],l.x,l.y+(i-1),l.width,1,l.textcolor,l.color)!@#&					end!@#&				else!@#&					for i=1,#l.text,1 do!@#&						drawing.writeText(l.text[i],l.x,l.y+(i-1),l.textcolor,l.color)!@#&					end!@#&				end!@#&			end!@#&		end,!@#&		setVisibility = function(boolean)!@#&			Objects.Lables[itemNumber].attributes.visible = boolean!@#&		end!@#&	}!@#&	return Objects.Labels[itemNumber]!@#&end!@#&!@#&function newImage(path,xpos,ypos,click,f)--Image path, x position, y position, click-able?, function!@#&	itemNumber = #Object.Images+1!@#&	temp = {}!@#&	if(f==nil)then!@#&		temp = {image = paintutils.loadImage(path),x = xpos,y = ypos, clickable = click,visible = true,imageFunction = function()end}!@#&	else	!@#&		temp = {image = paintutils.loadImage(path),x = xpos,y = ypos, clickable = click,visible = true, imageFunction = f}!@#&	end!@#&	Object.Images[itemNumber] = !@#&	{!@#&		attributes = temp,!@#&		draw = function()!@#&			i = Objects.Images[itemNumber].attributes!@#&			if(i.visible)then!@#&				drawing.displayImage(i.image,i.x,i.y)!@#&			end!@#&		end,!@#&		getDimensions = function()!@#&			i = Objects.Images[itemNumber].attributes!@#&			x = 0!@#&			y = #i.image!@#&			for a=1,y,1 do!@#&				x = math.max(x,#i[a])!@#&			end!@#&			return x,y!@#&		end,!@#&		clicked = function(xpos,ypos,executeF)--executeF tells the function whether or not to execute the image's function !@#&			i = Objects.Images[itemNumber].attributes!@#&			local w,h = getDimensions(i)!@#&			if(xpos>=i.x and xpos<=i.x+w-1) then!@#&				if(ypos>=i.y and ypos<=i.y+h-1) then!@#&					if(executeF)then!@#&						i.imageFunction()!@#&					end!@#&					return true!@#&				end!@#&			end!@#&			return false!@#&		end,!@#&		setVisibility = function(boolean)!@#&			Objects.Images[itemNumber].attributes.visible = boolean!@#&		end!@#&	}!@#&	return Object.Images[itemNumber]!@#&end!@#&!@#&function newDropDown(n,xpos,ypos,l,c,tc,ddc,ddtc)--Drop Down text, x position, y position, length, color, text color, drop down background color, drop down element text color, drop down visible?!@#&	local itemNumber = #Objects.DropDowns+1!@#&	Objects.DropDowns[itemNumber] = !@#&	{!@#&		attributes = {name = n,x = xpos,y = ypos,length = l,color = c,textColor = tc, dropDownColor = ddc,dropDownTextColor = ddtc,visible = false,visible = true,elements = {}},!@#&		addElement = function(n,f)!@#&			d = Objects.DropDowns[itemNumber].attributes!@#&			d.elements[#dd.elements+1] = {name = n,elementFunction = f}!@#&		end,!@#&		draw = function()!@#&			d = Objects.DropDowns[itemNumber].attributes!@#&			if(d.visible)then!@#&				drawing.fillArea(d.color,d.x,d.y,d.length,1)!@#&				drawing.writeText(d.name,d.x,d.y,d.color,d.textColor)!@#&				if(d.visible)then!@#&					drawing.fillArea(d.dropDownColor,d.x,d.y+1,d.length,#d.elements)!@#&					for i=1,#d.elements,1 do!@#&						drawing.writeText(d.elements[i].name,d.x,d.y+i,d.dropDownColor,d.dropDownTextColor)!@#&					end!@#&				end!@#&			end!@#&		end,!@#&		clicked = function(xpos,ypos,executeF)--executeF tells the function whether or not to execute the element's function !@#&			d = Objects.DropDowns[itemNumber].attributes!@#&			if(xpos>=d.x and xpos<=d.x+d.length-1) then!@#&				if(ypos==d.y) then!@#&					d.visible = not d.visible!@#&					return 0!@#&				elseif (d.visible) then 	!@#&					for a=1,#d.elements,1 do!@#&						if(ypos==d.y+a and executeF) then!@#&							d.elements[a].elementFunction()!@#&							return a!@#&						end!@#&					end!@#&				end!@#&			end!@#&			return -1!@#&		end,!@#&		setVisibility = function(boolean)!@#&			Objects.DropDowns[itemNumber].attributes.visible = boolean!@#&		end!@#&	}!@#&	return Objects.DropDowns[itemNumber]!@#&end!@#&!@#&function newScrollBar(xpos,ypos,l,ia,s,bgc,bc,ac,tc)-- x position, y position, length, number of items that are going to be scrolled through, is the scrollbar sideways?, background color for the scrollbar, bar color, end arrow background color, end arrow text color!@#&	local itemNumber = #Objects.ScrollBars+1!@#&	Objects.ScrollBars[itemNumber] = !@#&	{!@#&		attributes =  {x = xpos,y = ypos,length = l,itemAmount = ia,sideWays = s,backGroundColor = bgc,barColor = bc,arrowColor = ac,textColor = tc,scroll = 0,visible = true},!@#&		draw = function()!@#&			s = Objects.ScrollBars[itemNumber].attributes!@#&			if(s.visible)then!@#&				if(s.sideWays)then!@#&					drawing.fillArea(s.backGroundColor,s.x+1,s.y,s.length,1)!@#&					drawing.writeText(\"<\",s.x,s.y,s.arrowColor,s.textColor)!@#&					drawing.writeText(\">\",s.x+s.length+1,s.y,s.arrowColor,s.textColor)!@#&				else!@#&					drawing.fillArea(s.backGroundColor,s.x,s.y+1,1,s.length)!@#&					drawing.writeText(\"^\",s.x,s.y,s.arrowColor,s.textColor)!@#&					drawing.writeText(\"v\",s.x,s.y+s.length+1,s.arrowColor,s.textColor)!@#&				end!@#&				local barLength = s.length!@#&				if(s.itemAmount>=s.length*2-1)then!@#&					barLength = 1!@#&				elseif(s.itemAmount>=s.length)then!@#&					barLength = s.length-(s.itemAmount-s.length)!@#&				end!@#&				term.setCursorPos(1,1)!@#&				--write(barLength)!@#&				if(s.sideWays)then!@#&					drawing.fillArea(s.barColor,s.x+s.scroll+1,s.y,s.x+barLength,1)!@#&				else!@#&					drawing.fillArea(s.barColor,s.x,s.y+s.scroll+1,1,s.y+barLength)!@#&				end!@#&			end!@#&		end,!@#&		clicked = function(xpos,ypos)!@#&			s = Objects.ScrollBars[itemNumber].attributes!@#&			local barLength = s.length!@#&			if(s.itemAmount>=s.length*2-1)then!@#&				barLength = 1!@#&			elseif(s.itemAmount>=s.length)then!@#&				barLength = s.length-(s.itemAmount-s.length)!@#&			end!@#&			if(xpos==s.x) then!@#&				if(ypos==s.y) then!@#&					if(s.scroll>0)then!@#&						s.scroll = s.scroll-1!@#&					end!@#&				end!@#&			end!@#&			if(xpos==s.x+s.length+1) then!@#&				if(ypos==s.y) then!@#&					if(s.scroll+barLength+1<s.length)then!@#&						s.scroll = s.scroll+1!@#&					end!@#&				end!@#&			end!@#&			if(xpos==s.x) then!@#&				if(ypos==s.y+s.length+1) then!@#&					if(s.scroll+barLength+1<s.length)then!@#&						s.scroll = s.scroll+1!@#&					end!@#&				end!@#&			end!@#&		end,!@#&		setVisibility = function(boolean)!@#&			Objects.ScrollBars[itemNumber].attributes.visible = boolean!@#&		end!@#&	}!@#&	return Objects.ScrollBars[itemNumber]!@#&end!@#&!@#&function newProgressBar(xpos,ypos,l,dp,bc,bgc,tc)--x position, y position, length of the progress bar, if you want percentage use \"*\" else use string for text to be displayed in progress bar, percentage bar color, percentage bar background color, percentage text color!@#&	local itemNumber = #Objects.ProgressBars+1!@#&	Objects.ProgressBars[itemNumber] = !@#&	{!@#&		attributes = {x = xpos,y = ypos,length = l,percentage = 0,progressText = dp,barColor = bc,backGroundColor = bgc,TextColor = tc,visible = true},!@#&		updatePercentage = function(num)!@#&			Objects.ProgressBars[itemNumber].attributes.percentage = num!@#&		end,!@#&		draw = function()!@#&			p = Objects.ProgressBars[itemNumber].attributes!@#&			if(p.visible)then!@#&				drawing.fillArea(p.backGroundColor,p.x,p.y,p.length,1)!@#&				drawing.fillArea(p.barColor,p.x,p.y,p.percentage/100*p.length,1)!@#&				if(p.progressText==\"*\")then!@#&					temp = tostring(p.percentage)..\"%\"!@#&				else!@#&					temp = p.progressText!@#&				end!@#&				for i=1,#temp,1 do!@#&					if(p.x+(p.length-#temp)/2+(i-1)<=p.percentage/100*p.length)then!@#&						drawing.writeText(string.sub(temp,i,i),p.x+(p.length-#temp)/2+(i-1),p.y,p.barColor,p.TextColor)!@#&					else!@#&						drawing.writeText(string.sub(temp,i,i),p.x+(p.length-#temp)/2+(i-1),p.y,p.backGroundColor,p.TextColor)!@#&					end!@#&				end!@#&			end!@#&		end,!@#&		setVisibility = function(boolean)!@#&			Objects.ProgressBars[itemNumber].attributes.visible = boolean!@#&		end!@#&	}!@#&	return Objects.ProgressBars[itemNumber]!@#&end!@#&!@#&function newTextBox(xpos,ypos,w,h,text,m,c,tc,f)--x position, y position, width, height, text that will be displayed inside the text box, text mask i.e.\"*\", color of the box, text color, function for what text box should do after user hits Enter!@#&	local itemNumber = #Objects.TextBoxes+1!@#&	local temp = {}!@#&	for i=0,height,1 do!@#&		temp[i] = \"\"!@#&	end!@#&	Objects.TextBoxes[itemNumber] = !@#&	{!@#&		attributes = {x = xpos,y = ypos,width = w,height = h,displayText = text,mask = m,color = c,textColor = tc,text = temp,hasText = false,visible = true,endFunction = f},!@#&		draw = function()!@#&			t = Objects.TextBoxes[itemNumber].attributes!@#&			if(t.visible)then!@#&				drawing.fillArea(t.color,x,y,width,height)!@#&				if(t.hasText) then!@#&					for i=1,#n.text,1 do!@#&						drawing.drawText(n.text[i],n.x+(i-1),n.y,n.color,n.textColor)!@#&					end!@#&				else!@#&					drawing.writeText(t.displayText,t.x,t.y,t.color,t.textColor) !@#&				end!@#&			end!@#&		end,!@#&		clear = function()!@#&			local temp = {}!@#&			for i=0,height,1 do!@#&				temp[i] = \"\"!@#&			end!@#&			Objects.TextBoxes[itemNumber].attributes.text = temp!@#&			Objects.TextBoxes[itemNumber].attributes.hasText = false!@#&		end,!@#&		clicked = function(xpos,ypos)	!@#&			local currentLine = 1!@#&			n = Objects.TextBoxes[itemNumber].attributes!@#&			if(n.x<=xpos and n.x+n.width>=xpos)then!@#&				if(n.y<=ypos and n.y+n.height>=ypos)then!@#&					term.setCursorBlink(true)!@#&					while running do!@#&						local event, p,pram1,pram2 = os.pullEvent()!@#&						if(event == \"char\") then!@#&							n.hasText = true!@#&							for i=currentLine,n.height,1 do!@#&								if(#n.text[i]<n.width)then!@#&									n.text[i] = n.text[i]..p!@#&								end!@#&							end!@#&						elseif(event == \"key\")then!@#&							if p == keys.enter then!@#&								n.endFunction()!@#&								term.setCursorBlink(false)!@#&								break!@#&							elseif p == keys.backspace then!@#&								n.text[currentLine] = n.text[currentLine]:sub(1, #n.text[currentLine] - 1)!@#&								if(string.len(n.text[currentLine])==0)then!@#&									if(currentLine>0)then        !@#&										currentLine = currentLine-1!@#&									end!@#&								end!@#&							end!@#&						end!@#&						Objects.TextBoxes[itemNumber].draw()!@#&					end!@#&				end!@#&			end!@#&		end,!@#&		setVisibility = function(boolean)!@#&			Objects.TextBoxes[itemNumber].attributes.visible = boolean!@#&		end!@#&	}!@#&	!@#&end!@#&!@#&function newNotificationWindow(xpos,ypos,w,h,txt,t,button,functions)--x position, y position, width, height, notification text, title, button presets [\"YesNo_option\",\"OK_option\",\"No_option\"], button functions(place all functions inside of a table similar to notification text table) !@#&	local itemNumber = #Objects.NotificationWindows+1				--the text for a label is a table i.e. {\"hello world\" , \"This is a test\"} or {\"hello world\"}!@#&	!@#&	Objects.NotificationWindows[itemNumber] = !@#&	{!@#&		attributes = {x = xpos,y = ypos,width = w,height = h,text = txt,title = t,buttonPreset = button,visible = false,visible = true,buttonFunctions = functions},!@#&		draw = function()!@#&			n = Objects.NotificationWindows[itemNumber].attributes!@#&			if(n.visible)then!@#&				if(n.visible)then!@#&					drawing.fillArea(colors.lightGray,n.x,n.y,n.width,n.height)!@#&					drawing.fillArea(colors.gray,n.x,n.y,n.width,1)!@#&					drawing.drawText(n.title,n.x,n.y,colors.gray,colors.black)!@#&					drawing.drawText(\" X \",n.x+n.width-3,n.y,colors.red,colors.white)!@#&					for i=0,#n.text,1 do!@#&						drawing.writeText(n.text[i],n.x,n.y+i,colors.white,colors.lightGray)!@#&					end!@#&					if(n.buttonPresets==\"YesNo_option\")then!@#&						drawing.drawText(\" Yes \",n.x+(n.width/3)-2,n.y+n.height-1,colors.green,colors.white)!@#&						drawing.drawText(\" No \",n.x+(2*n.width/3)-2,n.y+n.height-1,colors.red,colors.white)!@#&					elseif(n.buttonPresets==\"OK_option\")then!@#&						drawing.drawText(\" OK \",n.x+(n.width/2)-2,n.y+n.height-1,colors.green,colors.white)!@#&					elseif(n.buttonPresets==\"No_option\")then!@#&					end!@#&				end!@#&			end!@#&		end,!@#&		clicked  = function(xpos,ypos)!@#&			n = Objects.NotificationWindows[itemNumber].attributes!@#&			if(xpos>=n.x+n.width-3 and xpos<=n.x+n.width)then!@#&				if(ypos==n.y)then!@#&					n.visible = false!@#&				end!@#&			end!@#&			if(n.buttonPreset==\"YesNo_option\")then!@#&				if(ypos==n.y+n.height-1)then!@#&					if(xpos>=n.x+(n.width/3)-2 and xpos<=n.x+(n.width/3)+2)then!@#&						n.buttonFunctions[1]()!@#&					elseif(xpos>=n.x+(2*n.width/3)-2 and xpos<=n.x+(2*n.width/3)+2)then!@#&						n.buttonFunctions[2]()!@#&					end!@#&				end!@#&			elseif(n.byuttonPreset==\"OK_option\")then!@#&				if(ypos==n.y+n.height-1)then!@#&					if(xpos>=n.x+(n.width/2)-2 and xpos<=n.x+(n.width/2)+2)then!@#&						n.buttonFunctions[1]()!@#&					end!@#&				end!@#&			end!@#&		end,!@#&		setVisibility = function(boolean)!@#&			Objects.NotificationWindows[itemNumber].attributes.visible = boolean!@#&		end!@#&	}!@#&end",["eShip6_broken.img"]="                 777b77!@#&               bbbfff7ff!@#&              777bfff7!@#&             7fffbbbbbb!@#&             fffffffffff!@#&             fffffffffff!@#&             7fffb77777!@#&              bbbbfff7!@#&               777fff7ff!@#&                 777b77",["slotmachine"]="numbers={}!@#&money=1000!@#&pos = {0,0,0}!@#&endpoint = {}!@#&reel={}!@#&reel[0]=1!@#&reel[1]=4!@#&reel[2]=3!@#&reel[3]=2!@#&reel[4]=0!@#&reel[5]=3!@#&reel[6]=1!@#&reel[7]=2!@#&reel[8]=4!@#&reel[9]=1!@#&reel[10]=0!@#&reel[11]=2!@#&reel[12]=4!@#&reel[13]=3!@#&bet=\"N/A\"!@#&colorTable = {}!@#&colorTable[0] = colors.red!@#&colorTable[1] = colors.blue!@#&colorTable[2] = colors.green!@#&colorTable[3] = colors.orange!@#&colorTable[4] = colors.purple!@#&for place=0,9,1 do!@#&  numbers[place] = place!@#&end!@#&!@#&function clear()!@#&  term.setBackgroundColor(colors.black)!@#&  term.clear()!@#&  term.setCursorPos(1,1)!@#&end!@#&!@#&function addZeros(amount)!@#&	temp = tostring(amount)!@#&	for number=1,4-string.len(temp),1 do!@#&		temp = \"0\"..temp!@#&	end!@#&	return temp!@#&end!@#&!@#&function drawSlots()!@#&	clear()!@#&	term.setTextColor(colors.black)!@#&	term.setBackgroundColor(colors.yellow)!@#&	print(\"  _____  \")!@#&	print(\" | | | | \")!@#&	print(\">| | | |<\")!@#&	print(\" | | | | \")!@#&	print(\"  -----  \")!@#&	term.setBackgroundColor(colors.blue)!@#&	term.setCursorPos(20,1)!@#&	write(\"$\"..addZeros(money))!@#&	term.setCursorPos(26,1)!@#&	write(\"Bet: \"..bet)!@#&	term.setBackgroundColor(colors.black)!@#&	term.setTextColor(colors.red)!@#&	for derp=0,2,1 do!@#&		term.setCursorPos(10+derp,5-derp)!@#&		write(\"//\")!@#&	end!@#&	term.setCursorPos(13,2)!@#&	write(\"()\")!@#&	term.setCursorPos(1,7)!@#&	term.setBackgroundColor(colors.red)!@#&	term.setTextColor(colors.white)!@#&	write(\"10\")!@#&	term.setCursorPos(4,7)!@#&	write(\"50\") !@#&	term.setCursorPos(7,7)!@#&	write(\"100\")!@#&	term.setCursorPos(11,7)!@#&	write(\"ALL\")!@#&	term.setCursorPos(49,1)!@#&	write(\" X \")!@#&end!@#&!@#&function drawColor(number)!@#&	term.setBackgroundColor(colorTable[number])!@#&	write(\" \")!@#&	term.setBackgroundColor(colors.black)!@#&end!@#&!@#&function drawNumbers(positions)!@#&	drawSlots()!@#&	term.setBackgroundColor(colors.white)!@#&	term.setTextColor(colors.black)!@#&	for slot=1,3,1 do!@#&		for number=1,3,1 do!@#&			term.setCursorPos(1+slot*2,1+number)!@#&			if (number==1)then!@#&				if(positions[slot]-1==-1)then!@#&					drawColor(reel[table.getn(reel)])!@#&				else!@#&					drawColor(reel[positions[slot]-1])!@#&				end!@#&			elseif(number==2)then!@#&				drawColor(reel[positions[slot]])!@#&			else!@#&				if(positions[slot]+1==table.getn(reel))then!@#&					drawColor(reel[0])!@#&				else!@#&					drawColor(reel[positions[slot]+1])!@#&				end!@#&			end!@#&		end!@#&	end!@#&end!@#&!@#&function addpos(place)!@#&	if(pos[place]+1==table.getn(reel))then!@#&      pos[place]=0!@#&    else!@#&      pos[place]=pos[place]+1!@#&    end!@#&end!@#&!@#&function checkWin()!@#&	multiplyer = 0!@#&	if(reel[pos[1]]==reel[pos[2]] and reel[pos[1]]==reel[pos[3]])then!@#&		multiplyer = multiplyer+1!@#&	end!@#&	if(reel[pos[1]-1]==reel[pos[2]-1] and reel[pos[1]-1]==reel[pos[3]-1])then!@#&		multiplyer = multiplyer+.5!@#&	end!@#&	if(reel[pos[1]+1]==reel[pos[2]+1] and reel[pos[1]+1]==reel[pos[3]+1])then!@#&		multiplyer = multiplyer+.5!@#&	end!@#&	if(reel[pos[1]+1]==reel[pos[2]] and reel[pos[1]+1]==reel[pos[3]-1])then!@#&		multiplyer = multiplyer+.5!@#&	end!@#&	if(reel[pos[1]-1]==reel[pos[2]] and reel[pos[1]-1]==reel[pos[3]+1])then!@#&		multiplyer = multiplyer+.5!@#&	end!@#&!@#&	if(multiplyer~=0)then!@#&		term.setCursorPos(10,10)!@#&  		term.setTextColor(colors.blue)!@#&    	print(\"WINNER\")!@#&    	sleep(2)!@#&    	term.setTextColor(colors.black)!@#&		money = money+bet+(bet*multiplyer)!@#&	end!@#&end!@#&!@#&while true do!@#&	drawNumbers(pos)!@#&	Event,key,xpos,ypos = os.pullEvent(\"mouse_click\")!@#&	if(xpos>=10 and xpos<=14 and ypos<=5 and money>0 and bet~=\"N/A\" and money-bet>=0)then!@#&		money = money-bet!@#&		for derp=1,3,1 do!@#&			endpoint[derp]=math.random(20,30)!@#&		end!@#&		drawNumbers(pos)!@#&		for spins=0,60,1 do!@#&			for derp=1,3,1 do!@#&				if(derp==1 and spins<=endpoint[1])then!@#&				addpos(1)!@#&				elseif(derp==2 and spins>=10 and spins<=10+endpoint[2])then!@#&				addpos(2)!@#&				elseif(derp==3 and spins>=20 and spins<=20+endpoint[3])then!@#&				addpos(3)!@#&			end!@#&		end!@#&		drawNumbers(pos)!@#&		sleep(.1)!@#&		end!@#&		checkWin()!@#&	elseif(ypos==7)then!@#&		if(xpos<=2)then!@#&			bet = 10!@#&		elseif(xpos>=4 and xpos<=5)then!@#&			bet = 50!@#&		elseif(xpos>=7 and xpos<=9)then!@#&			bet = 100!@#&		elseif(xpos>=11 and xpos<=13)then!@#&			bet = money!@#&		end!@#&	elseif(ypos==1)then!@#&		if(xpos>=49)then!@#&			break!@#&		end!@#&	elseif(bet==\"N/A\")then!@#&		term.setCursorPos(5,10)!@#&		term.setTextColor(colors.red)!@#&		print(\"Enter The Amount You Wish To Bet\")!@#&		sleep(2)!@#&		term.setTextColor(colors.black)!@#&	elseif(money==0 or money-bet>=0)then!@#&		term.setCursorPos(10,10)!@#&		term.setTextColor(colors.red)!@#&		print(\"Not Enough Funds\")!@#&		sleep(2)!@#&		term.setTextColor(colors.black)!@#&	end!@#&end!@#&  !@#&clear()",["math"]="for derp=1,10,1 do!@#&  print(derp%10)!@#&end",["matrix"]="letters = {\"a\",\"b\",\"c\",\"d\",\"e\",\"f\",\"g\",\"h\",\"i\",\"j\",\"k\",\"l\",\"m\",\"n\",\"o\",\"p\",\"q\",\"r\",\"s\",\"t\",\"u\",\"v\",\"w\",\"x\",\"y\",\"z\"}!@#&lines = {}!@#&!@#&for place=1,52,1 do!@#&	lines[place] = {}!@#&	lines[place][\"x\"] = place!@#&	lines[place][\"y\"] = math.random(-15,0)!@#&	lines[place][\"length\"] = math.random(6,15)!@#&	lines[place][\"letters\"] = {}!@#&end!@#&!@#&for place=53,104,1 do!@#&	lines[place] = {}!@#&	lines[place][\"x\"] = place-52!@#&	lines[place][\"y\"] = math.random(-30,-15)!@#&	lines[place][\"length\"] = math.random(6,15)!@#&	lines[place][\"letters\"] = {}!@#&end!@#&!@#&for derp=1,#lines,1 do!@#&	for place=1,lines[derp][\"length\"],1 do!@#&		lines[derp][\"letters\"][place] = letters[math.random(1,26)]!@#&	end!@#&end!@#&!@#&while true do!@#&	term.setBackgroundColor(colors.black)!@#&	shell.run(\"clear\")!@#&	for place=1,#lines,1 do!@#&		for count=1,#lines[place][\"letters\"],1 do!@#&			if(lines[place][\"y\"]-(count-1)<=18)then!@#&				if(count==1)then!@#&					term.setTextColor(colors.white)!@#&					--term.setBackgroundColor(colors.white)!@#&				else!@#&					--term.setBackgroundColor(colors.lime)!@#&					term.setTextColor(colors.green)!@#&				end!@#&				term.setCursorPos(lines[place][\"x\"],lines[place][\"y\"]-(count-1))!@#&				write(lines[place][\"letters\"][count])	!@#&			!@#&			end!@#&		end!@#&		if(lines[place][\"y\"]-lines[place][\"length\"]>=19)then!@#&			x = lines[place][\"x\"]!@#&			lines[place] = {}!@#&			lines[place][\"x\"] = x!@#&			lines[place][\"y\"] = math.random(-15,0)!@#&			lines[place][\"length\"] = math.random(6,15)!@#&			lines[place][\"letters\"] = {}!@#&		end!@#&		for derp=1,lines[place][\"length\"],1 do!@#&			lines[place][\"letters\"][derp] = letters[math.random(1,26)]!@#&		end!@#&		lines[place][\"y\"] = lines[place][\"y\"]+1!@#&	end      !@#&	sleep(.1)!@#&end",["laserblast"]="--[[!@#&	Laser Blast!@#&!@#&	Inspired by Space Invaders, Astro Smash and a bit of Arkanoid!@#&	Destroy falling asteroids and collect powerups!@#&	!@#&	Written by: Nitrogen Fingers!@#&]]--!@#&!@#&local version = 1.0!@#&local reponame = \"Laser Blast\"!@#&local requiresColour = false!@#&if requiresColour then!@#&	print(\"This game can only be played on an Advanced Computer.\")!@#&end!@#&!@#&local function displayNitrosoftTitle()!@#&	shell.run(\"clear\")!@#&	local _w,_h = term.getSize()!@#&	for i=1,math.random(1,10)+10 do!@#&		term.setCursorPos(math.random(1,_w), math.random(1,_h))!@#&		term.setTextColour(colours.yellow)!@#&		term.write(\".\")!@#&	end!@#&	local _t1,_t2 = \"nitrosoft\", \"games\"!@#&	term.setCursorPos(math.floor(_w/2-#_t1), math.floor(_h/2))!@#&	if term.isColour() then term.setTextColour(colours.blue) end!@#&	term.write(_t1)!@#&	term.setCursorPos(math.floor(_w/2-#_t2/2),math.floor(_h/2)+1)!@#&	term.setTextColour(colours.white)!@#&	term.write(_t2)!@#&	term.setCursorPos(math.floor(_w/2-#_t1), math.floor(_h/2)+2)!@#&	if term.isColour() then term.setTextColour(colours.red) end!@#&	term.write(string.rep(\"-\",#_t1*2))!@#&	if term.isColour() then!@#&		term.setBackgroundColour(colours.green)!@#&		term.setCursorPos(_w/2+#_t1-4, math.floor(_h/2)-2)!@#&		term.write(\"  \")!@#&		term.setCursorPos(_w/2+#_t1-4, math.floor(_h/2)-1)!@#&		term.write(\"  \")!@#&		term.setBackgroundColour(colours.lime)!@#&		term.setCursorPos(_w/2+#_t1-3, math.floor(_h/2)-1)!@#&		term.write(\"  \")!@#&		term.setCursorPos(_w/2+#_t1-3, math.floor(_h/2))!@#&		term.write(\"  \")!@#&	end!@#&	term.setBackgroundColour(colours.black)!@#&	term.setTextColour(colours.white)!@#&	term.setCursorPos(1,_h)!@#&	term.write(\"v\"..version)!@#&	os.pullEvent(\"key\")!@#&end!@#&displayNitrosoftTitle()!@#&!@#&local w,h = term.getSize()!@#&local plpos = math.floor(w/2)!@#&!@#&--music stuff!@#&local minterval = 1!@#&local mtimer = 1!@#&local left = false!@#&!@#&local level = 1!@#&local score = 0!@#&local gameover=false!@#&local killc = 0!@#&!@#&--x,y,dir!@#&local projlist = {}!@#&--x,y,intvspeed,dtimer!@#&local baddylist = {}!@#&local btimer = 0!@#&local bintv = 1!@#&local utime = 0.05!@#&local bsmp = 6!@#&local powerup = 0!@#&!@#&--Landscape and stars!@#&local stars = {}!@#&for i=1,math.random()*10+10 do!@#&  stars[i] = { x = math.ceil(math.random()*w),!@#&    y = math.ceil(math.random() * h-8) }!@#&end!@#&local landscape = {!@#&  [6]=\"                       _____________              \";!@#&  [5]=\"          _______     /             \\\\_____        \";!@#&  [4]=\"         /       \\\\___/____                \\\\_________\";!@#&  [3]=\"        /                 \\\\                      \";!@#&  [2]=\"       /                   \\\\_________               \";!@#&  [1]=\"______/                              \\\\______________\";!@#&}!@#&!@#&function drawHeader()!@#&  if term.isColour() then term.setTextColour(colours.white) end!@#&  term.setCursorPos(5, 1)!@#&  term.write(\"Score: \"..score)!@#&  if score~=0 then term.write(\"00\") end!@#&  local lstr = \"Level: \"..level!@#&  term.setCursorPos(w-#lstr-5,1)!@#&  term.write(lstr)!@#&  !@#&  if powerup > 0 then!@#&    local pstr = \"POWERUP\"!@#&	term.setCursorPos(w/2 - #pstr/2,1)!@#&	if term.isColour() then term.setTextColour(colours.cyan) end!@#&	term.write(pstr)!@#&  end!@#&end!@#&!@#&function drawPlayer()!@#&  if term.isColour() then term.setTextColour(colours.white) end!@#&  term.setCursorPos(plpos-1, h-1)!@#&  term.write(\"@@@\")!@#&end!@#&!@#&function drawProjectile(proj)!@#&  if term.isColour() then term.setTextColour(colours.red) end!@#&  term.setCursorPos(proj.x, proj.y)!@#&  term.write(\"|\")!@#&end!@#&!@#&function drawVacance(x,y)!@#&  term.setCursorPos(x, y)!@#&  for _,baddy in pairs(baddylist) do!@#&    if baddy.x == x and baddy.y == y and baddy.dtimer > 0 then!@#&      drawBaddie(baddy)!@#&   	  return!@#&	end!@#&  end!@#&  !@#&  if y >= h-8 and y <= h-3 then!@#&    if term.isColour() then term.setTextColour(colours.lime) end!@#&    term.write(string.sub(landscape[h - y - 2], x, x))!@#&  elseif y < h-8 then!@#&	for i=1,#stars do!@#&	  if x == stars[i].x and y == stars[i].y then !@#&	    if term.isColour() then term.setTextColour(colours.yellow) end!@#&	    term.write(\".\")!@#&		return!@#&      end!@#&	end!@#&	term.write(\" \")!@#&  else!@#&	term.write(\" \")!@#&  end!@#&end!@#&!@#&function drawBaddie(baddy)!@#&  term.setCursorPos(baddy.x, baddy.y)!@#&    if baddy.dtimer==0 then!@#&      if baddy.pup then !@#&        if term.isColour() then term.setTextColour(colours.blue) end!@#&        term.write(\"P\")!@#&      elseif baddy.frag then!@#&        if term.isColour() then term.setTextColour(colours.brown) end!@#&        term.write(\"*\")!@#&      else !@#&        if term.isColour() then term.setTextColour(colours.brown) end!@#&        term.write(\"O\") !@#&      end!@#&    else!@#&      if term.isColour() then term.setTextColour(colours.orange) end!@#&      term.write(\"#\")!@#&    end!@#&end!@#&!@#&--This now only needs to be called once. Awesome!!@#&function drawWorld()!@#&  drawLandscape()!@#&  drawPlayer()!@#&  drawHeader()!@#&end!@#&!@#&function drawLandscape()!@#&  if term.isColour() then!@#&    term.setTextColour(colours.yellow)!@#&  end!@#&  for i=1,#stars do!@#&    term.setCursorPos(stars[i].x, stars[i].y)!@#&    term.write(\".\")!@#&  end!@#&  !@#&  term.setCursorPos(1,h)!@#&  local land = string.rep(\"-\", w)!@#&  if term.isColour() then!@#&    term.setTextColour(colours.green)!@#&  end!@#&  term.write(land)!@#&  if term.isColour() then!@#&    term.setTextColour(colours.lime)!@#&  end!@#&  !@#&  for y,line in ipairs(landscape) do!@#&	term.setCursorPos(1,h-y-2)!@#&	term.write(line)!@#&  end!@#&end!@#&!@#&function updateWorld()!@#&  --The music stuff  !@#&  redstone.setOutput(\"back\", false)!@#&  mtimer=mtimer-utime!@#&  if mtimer<=0 then!@#&    mtimer = minterval!@#&    if left then!@#&      redstone.setOutput(\"left\", true)!@#&      redstone.setOutput(\"back\", true)!@#&      redstone.setOutput(\"right\", false)!@#&    else!@#&      redstone.setOutput(\"left\", false)!@#&      redstone.setOutput(\"back\", false)!@#&      redstone.setOutput(\"right\", true)!@#&    end!@#&    left = not left!@#&  end!@#&!@#&  local i=1!@#&  while i<=#projlist do!@#&	drawVacance(projlist[i].x, projlist[i].y)!@#&    projlist[i].y = projlist[i].y+projlist[i].dir!@#&	if projlist[i].y <= 1 or projlist[i].y > h-1 then!@#&      table.remove(projlist,i)!@#&      i=i-1!@#&    else drawProjectile(projlist[i]) end!@#&    i=i+1!@#&  end!@#&  i=1!@#&  while i<=#baddylist do!@#&    local baddy = baddylist[i]!@#&    baddy.timer=baddy.timer+utime!@#&!@#&    if baddy.y==h-1 and math.abs(baddy.x-plpos)<2 then!@#&      if baddy.pup then!@#&    	powerup = 10!@#&		drawPlayer()!@#&      else!@#&        gameover = true !@#&        redstone.setOutput(\"back\", true)!@#&      end!@#&    end!@#&!@#&    j=1!@#&    while j<=#projlist do!@#&      local proj = projlist[j]!@#&      if baddy.x==proj.x and math.abs(baddy.y-proj.y)<2!@#&      and baddy.dtimer==0 then!@#&        baddy.dtimer = 0.5!@#&		drawBaddie(baddy)!@#&		drawVacance(projlist[j].x, projlist[j].y)!@#&        table.remove(projlist,j)!@#&        j=j-1!@#&        score=score+5!@#&        redstone.setOutput(\"back\", true)!@#&        killc=killc+1!@#&        if killc>5+(level*5) and level<10 then levelUp() end!@#&		drawHeader()!@#&!@#&        --Adds fragments!@#&        if math.random(1, 5) == 2 and not baddy.frag then!@#&          table.insert(baddylist, {!@#&            x = baddy.x-1,!@#&            y = baddy.y,!@#&            pup = false,!@#&            frag = true,!@#&            timer = 0,!@#&            dtimer = 0,!@#&            speed = baddy.speed/2!@#&          })!@#&		  drawBaddie(baddylist[#baddylist])!@#&          table.insert(baddylist, {!@#&            x = baddy.x+1,!@#&            y = baddy.y,!@#&            pup = false,!@#&            frag = true,!@#&            timer = 0,!@#&            dtimer = 0,!@#&            speed = baddy.speed/2!@#&          })!@#&		  drawBaddie(baddylist[#baddylist])!@#&        end!@#&      end!@#&      j=j+1!@#&    end!@#&!@#&    if baddy.timer>baddy.speed and baddy.dtimer==0 then!@#&	  drawVacance(baddy.x, baddy.y)!@#&      baddy.y=baddy.y+1!@#&      if baddy.y==h then!@#&        table.remove(baddylist,i)!@#&        i=i-1!@#&        score=score-1!@#&		drawHeader()!@#&      else!@#&	    drawBaddie(baddy)!@#&        baddy.timer = 0!@#&	  end!@#&    elseif baddy.dtimer>0 then!@#&      baddy.dtimer=baddy.dtimer-utime!@#&      if baddy.dtimer<=0 then!@#&        drawVacance(baddy.x, baddy.y)!@#&		table.remove(baddylist,i)!@#&        i=i-1!@#&      end!@#&    end    !@#&    i=i+1!@#&  end  !@#&  btimer=btimer+utime!@#&  if btimer > bintv then!@#&    table.insert(baddylist, {!@#&      x = math.random(w/4, 3*(w/4)),!@#&      y = 2,!@#&      speed = utime*bsmp,!@#&      timer = 0,!@#&      dtimer = 0,!@#&      pup = math.random(1,20)==5,!@#&      frag = false!@#&    })!@#&	drawBaddie(baddylist[#baddylist])!@#&    btimer=0!@#&  end!@#&end!@#&!@#&function levelUp()!@#&  level=level+1!@#&  bintv=bintv-0.10!@#&  bsmp=bsmp-0.5!@#&  killc=0!@#&  minterval=minterval-0.10!@#&end!@#&!@#&function updatePlayer(key)!@#&  if powerup>0 then!@#&    powerup = powerup-utime!@#&  end!@#&!@#&  if key==203 and plpos>1 then!@#&	term.setCursorPos(plpos+1,h-1)!@#&	term.write(\" \")!@#&    plpos=plpos-1!@#&	drawPlayer()!@#&  elseif key==205 and plpos<w then!@#&	term.setCursorPos(plpos-1,h-1)!@#&	term.write(\" \")!@#&    plpos=plpos+1!@#&	drawPlayer()!@#&  elseif key==57 then!@#&    if powerup>0 then!@#&      table.insert(projlist, {!@#&        dir = -1,!@#&        x = plpos+1,!@#&        y = h-2!@#&      })!@#&	  drawProjectile(projlist[#projlist])!@#&      table.insert(projlist, {!@#&        dir = -1,!@#&        x = plpos-1,!@#&        y = h-2!@#&      })!@#&	  drawProjectile(projlist[#projlist])!@#&    else!@#&      table.insert(projlist, {!@#&        dir = -1,!@#&        x = plpos,!@#&        y = h-2!@#&      })!@#&	  drawProjectile(projlist[#projlist])!@#&    end!@#&  end!@#&end!@#&!@#&term.setBackgroundColour(colours.black)!@#&term.clear()!@#&drawWorld()!@#&local wtimer os.startTimer(utime)!@#&while not gameover do!@#&  local e, v = os.pullEvent()!@#&!@#&  if e==\"timer\" then!@#&    updateWorld()!@#&    wtimer = os.startTimer(utime)!@#&  elseif e==\"key\" then!@#&    if v==28 then break end!@#&    updatePlayer(v)!@#&  end!@#&end!@#&!@#&term.setCursorPos(plpos-1, h-1)!@#&if term.isColour() then term.setTextColour(colours.red) end!@#&term.write(\"###\")!@#&local go = \"Game Over!\"!@#&term.setCursorPos(w/2 - #go/2, 10)!@#&if term.isColour() then term.setTextColour(colours.white) end!@#&term.write(go)!@#&term.setCursorPos(1,h)!@#&sleep(5)!@#&redstone.setOutput(\"back\", false)!@#&term.clear()",["rattrap"]="--[[!@#&		Rat Trap!@#&		Inspired by the game by Christopher Lee Fraley!@#&		!@#&		Written by: Nitrogen Fingers!@#&]]--!@#&local w,h = term.getSize()!@#&local running = true!@#&!@#&local map = {}!@#&local objectMap = {}!@#&!@#&local mapXSize = 35!@#&local mapYSize = 19!@#&local drawOffsetX = 0!@#&local drawOffsetY = 0!@#&!@#&local enemies = {}!@#&local enemyTimer = 0!@#&local enemyInterval = 1!@#&!@#&local spawnInterval = 60!@#&local spawnTimer = 0!@#&local levelEnemies = 2!@#&local levelName = \"01_box.nfp\"!@#&!@#&local electricity = {}!@#&!@#&local plX = 0!@#&local plY = 0!@#&local pltrapped = 0!@#&local pldead = 0!@#&local lives = 3!@#&local score = 0!@#&!@#&--[[Section: Level Loading and Updating]]--!@#&!@#&--Takes a file character and converts it to a map or game entity!@#&local function parseValue(x, y, lchar)!@#&  if tonumber(lchar, 16) then!@#&	lchar = math.pow(2, tonumber(lchar,16))!@#&	!@#&	if lchar == colours.lime then!@#&	  map[y][x] = 0!@#&	elseif lchar == colours.grey then!@#&	  map[y][x] = 1!@#&	elseif lchar == colours.red then!@#&	  map[y][x] = \"*\"!@#&	elseif lchar == colours.lightGrey then!@#&	  map[y][x] = \"o\"!@#&	elseif lchar == colours.white then!@#&	  plX = x!@#&	  plY = y!@#&	end!@#&  end!@#&end!@#&!@#&--Loads a file and reads it in as a level!@#&local function loadMap(_sPath)!@#&  if not fs.exists(_sPath) then return false end!@#&  map = {}!@#&  objectMap = {}!@#&  enemies = {}!@#&    !@#&  local file = fs.open(_sPath, \"r\")!@#&  local line = file:readLine()!@#&  while line do!@#&    map[#map+1] = {}!@#&    for i=1,math.min(#line,mapXSize) do!@#&      local lchar = string.sub(line,i,i)!@#&      parseValue(i, #map, lchar)!@#&    end!@#&    if #map == mapYSize then break end!@#&    line = file:readLine()!@#&  end!@#&  file:close()!@#&  return true!@#&end!@#&!@#&--When something moves or something needs to be drawn, we!@#&--just change the appropriate tile with this method.!@#&local function updateMap(x,y)!@#&	term.setCursorPos(x, y)!@#&	term.setBackgroundColour(colours.green)!@#&    if plX == x and plY == y then!@#&	  if pltrapped > 0 then term.setTextColour(colours.grey)!@#&      else term.setTextColour(colours.white) end!@#&      term.write(\"&\")!@#&    elseif map[y][x] == \"o\" then!@#&      term.setTextColour(colours.grey)!@#&      term.write(\"o\")!@#&	elseif map[y][x] == \"*\" then!@#&	  term.setTextColour(colours.red)!@#&	  term.write(\"*\")!@#&	elseif map[y][x] == \"$\" then!@#&	  term.setTextColour(colours.orange)!@#&	  term.write(\"$\")!@#&	elseif map[y][x] == 0 then!@#&	  term.setBackgroundColour(colours.lime)!@#&	  term.write(\" \")!@#&	elseif map[y][x] == 1 then!@#&	  term.setBackgroundColour(colours.grey)!@#&	  term.write(\" \")!@#&	else!@#&	  term.write(\" \")!@#&	end!@#&end!@#&!@#&--Draws some HUD information in the sidebar!@#&local function drawInterface()!@#&	term.setTextColour(colours.black)!@#&	term.setBackgroundColour(colours.lightGrey)!@#&	!@#&	local msg = \"Rat Trap\"!@#&	term.setCursorPos(math.ceil(mapXSize + (w-mapXSize)/2 - #msg/2), 2)!@#&	term.write(msg)!@#&	msg = \"Lives\"!@#&	term.setCursorPos(math.ceil(mapXSize + (w-mapXSize)/2 - #msg/2), 9)!@#&	term.write(msg)!@#&	msg = \"Score\"!@#&	term.setCursorPos(math.ceil(mapXSize + (w-mapXSize)/2 - #msg/2), 12)!@#&	term.write(msg)!@#&	msg = \"Spawn Timer\"!@#&	term.setCursorPos(math.ceil(mapXSize + (w-mapXSize)/2 - #msg/2), 15)!@#&	term.write(msg)!@#&	!@#&	term.setTextColour(colours.blue)!@#&	term.setCursorPos(math.ceil(mapXSize + (w-mapXSize)/2 - #levelName/2), 4)!@#&	term.write(levelName)!@#&	!@#&	!@#&	term.setTextColour(colours.white)!@#&	term.setBackgroundColour(colours.grey)!@#&	if lives > 3 then!@#&		msg = \" & x 3 \"!@#&	else!@#&		msg = \" \"..string.rep(\"& \", lives)!@#&	end!@#&	term.setCursorPos(math.ceil(mapXSize + (w-mapXSize)/2 - #msg/2), 10)!@#&	term.write(msg)!@#&	msg = \" \"..string.rep(\"0\", 5 - math.log10(score+1))..score..\" \"!@#&	if score == 0 then msg = \" 00000 \" end!@#&	term.setCursorPos(math.ceil(mapXSize + (w-mapXSize)/2 - #msg/2), 13)!@#&	term.write(msg)!@#&	local mins = math.floor(spawnTimer / 60)!@#&	local secs = spawnTimer % 60!@#&	msg = \" \"!@#&	if mins < 10 then msg = msg..\"0\" end!@#&	msg = msg..mins..\":\"!@#&	if secs < 10 then msg = msg..\"0\" end!@#&	msg = msg..secs..\" \"!@#&	term.setCursorPos(math.ceil(mapXSize + (w-mapXSize)/2 - #msg/2), 16)!@#&	term.write(msg)!@#&end!@#&!@#&local function drawEnemy(enemy)!@#&	term.setCursorPos(enemy.x, enemy.y)!@#&	term.setBackgroundColour(colours.green)!@#&	if enemy.trapped then term.setTextColour(colours.red)!@#&	else term.setTextColour(colours.orange) end!@#&	term.write(\"&\")!@#&end!@#&!@#&--Draws the entire map for the first time. This is only called once per level!@#&local function drawMap()!@#&  term.setBackgroundColour(colours.lightGrey)!@#&  term.clear()!@#&  for y=1,#map do!@#&    for x=1,mapXSize do!@#&	  updateMap(x,y)!@#&    end!@#&  end!@#&  for _,enemy in pairs(enemies) do drawEnemy(enemy) end!@#&  for _,ball in pairs(electricity) do drawBall(ball) end!@#&  drawInterface()!@#&end!@#&!@#&--[[Section: Enemy Logic]]--!@#&!@#&local function killPlayer()!@#&	plX = -1!@#&	plY = -1!@#&	pltrapped = 0!@#&	lives = lives - 1!@#&	if lives == 0 then!@#&		running = false!@#&	else!@#&		pldead = 5!@#&	end!@#&end!@#&!@#&--Takes in a XY position and generates a list of legal moves enemies can make. !@#&--Length of 0-8.!@#&local function getLegalMoves(x,y)!@#&	local legal = {}!@#&	for lx = math.max(1,x-1),math.min(mapXSize,x+1) do!@#&		for ly = math.max(1,y-1),math.min(mapYSize,y+1) do!@#&			if (lx ~= x or ly ~= y) and map[ly][lx] == nil then!@#&				local enemyOccupy = false!@#&				for _,enemy in pairs(enemies) do!@#&					if enemy.x == lx and enemy.y == ly then!@#&						enemyOccupy = true!@#&						break!@#&					end!@#&				end!@#&			!@#&				if not enemyOccupy then!@#&					table.insert(legal, { x = lx, y = ly } )!@#&				end!@#&			end!@#&		end!@#&	end!@#&	!@#&	return legal!@#&end!@#&!@#&--Spawns the player, in a similar fashion to enemies!@#&local function spawnPlayer()!@#&	local moveLegal = false!@#&	local x,y = 0,0!@#&	repeat!@#&		x = math.random(1,mapXSize)!@#&		y = math.random(1,mapYSize)!@#&		!@#&		if map[y][x] == nil then!@#&			local mindist = math.huge!@#&			for _,enemy in pairs(enemies) do!@#&				mindist = math.min(mindist, math.sqrt(math.pow(enemy.x - plX, 2) +!@#&					math.pow(enemy.y - plY, 2)))!@#&			end!@#&			if mindist > 5 then moveLegal = true end!@#&		end!@#&	until moveLegal!@#&	!@#&	plX = x!@#&	plY = y!@#&	updateMap(x,y)!@#&end!@#&!@#&--Creates a new enemy and places it in the world!@#&local function generateEnemy()!@#&	local moveLegal = false!@#&	local x,y = 0,0!@#&	repeat!@#&		--This approach... isn't good but it's good enough I expect!@#&		x = math.random(1,mapXSize)!@#&		y = math.random(1,mapYSize)!@#&		--The starting location HAS to be empty.!@#&		if map[y][x] == nil then!@#&			local moves = getLegalMoves(x,y)!@#&			local pdist = math.sqrt(math.pow(plX-x,2), math.pow(plY-y,2))!@#&			!@#&			--It can't be within 5 squares of the player or be immediately trapped.!@#&			if pdist > 5 and #moves > 0 then!@#&				moveLegal = true!@#&			end!@#&		end!@#&	until moveLegal!@#&	!@#&	--Fortunately enemies are really easy; they're mostly stateless.!@#&	local enemy = {!@#&		--Enemy position!@#&		x = x; y = y;!@#&		--Whether or not it's trapped (for drawing). Always starts false.!@#&		trapped = false;!@#&	}!@#&	table.insert(enemies, enemy)!@#&	drawEnemy(enemy)!@#&end!@#&!@#&--Moves the enemy. Each time this is called, unless an enemy is trapped, it MUST move.!@#&--This right now is a naive distance function. Later implementations will need to use!@#&--something more sophistocated.!@#&local function moveEnemy(enemy)!@#&	local moves = getLegalMoves(enemy.x, enemy.y)!@#&	if #moves == 0 then!@#&		--Score 5 points for trapping an enemy fresh!@#&		if not enemy.trapped then score = score + 5 end!@#&		enemy.trapped = true!@#&		drawEnemy(enemy)!@#&		return!@#&	end!@#&	enemy.trapped = false!@#&	!@#&	local ind = 0!@#&	if pldead > 0 then!@#&		ind = math.random(1,#moves)!@#&	else!@#&		local mindist = math.huge!@#&		for index,move in pairs(moves) do!@#&			local dist = math.sqrt(math.pow(move.x - plX, 2) + math.pow(move.y - plY, 2))!@#&			if dist < mindist then!@#&				mindist = dist!@#&				ind = index!@#&			end!@#&		end!@#&	end!@#&	!@#&	local ox,oy = enemy.x, enemy.y!@#&	enemy.x = moves[ind].x!@#&	enemy.y = moves[ind].y!@#&	if enemy.x == plX and enemy.y == plY then!@#&		killPlayer()!@#&	end!@#&	!@#&	updateMap(ox,oy)!@#&	drawEnemy(enemy)!@#&end!@#&!@#&--[[Section: Movement and Input]]--!@#&!@#&--When the player pushes a block, what happens to that block depends on whats!@#&--in front of it. This method takes the direction and determines if the column!@#&--moves based on its composition.!@#&local function pushBlock(ix,iy,dirX,dirY)!@#&	local ctx,cty = ix,iy!@#&	while ctx > 0 and ctx < w and cty > 0 and cty < h do!@#&		if map[cty][ctx] == 1 or map[cty][ctx] == \"*\" then!@#&			return false!@#&		elseif map[cty][ctx] == nil or map[cty][ctx] == \"$\" then!@#&			for _,enemy in pairs(enemies) do!@#&				if enemy.x == ctx and enemy.y == cty then!@#&					--You can't squash enemies. Trapped foes act as walls.!@#&					if enemy.trapped then!@#&						return false!@#&					else!@#&						moveEnemy(enemy)!@#&					end!@#&				end!@#&			end!@#&		!@#&			map[cty][ctx] = 0!@#&			map[iy][ix] = nil!@#&			updateMap(ctx,cty)!@#&			return true!@#&		elseif map[cty][ctx] == \"o\" then!@#&			map[iy][ix] = nil!@#&			return true!@#&		end!@#&		ctx = ctx + dirX!@#&		cty = cty + dirY!@#&	end!@#&	return false!@#&end!@#&!@#&--Handles player movements. They attempt to move to a given square!@#&local function movePlayer(x,y)!@#&	if pltrapped > 0 or pldead > 0 then return end!@#&!@#&	local ox,oy = plX, plY!@#&	local ptile = map[y][x]!@#&	if ptile == \"o\" then!@#&		map[y][x] = nil!@#&		pltrapped = 10!@#&		plX = x!@#&		plY = y!@#&		updateMap(ox, oy)!@#&		updateMap(plX, plY)!@#&	elseif ptile == \"$\" then!@#&		map[y][x] = nil!@#&		--20 points for getting a corpse!@#&		score = score + 20!@#&		plX = x!@#&		plY = y!@#&		updateMap(ox,oy)!@#&		updateMap(plX, plY)!@#&	elseif ptile == nil then!@#&		plX = x!@#&		plY = y!@#&		updateMap(ox, oy)!@#&		for _,enemy in pairs(enemies) do!@#&			if enemy.x == plX and enemy.y == plY then killPlayer() end!@#&		end!@#&		for _,ball in pairs(electricity) do!@#&			if ball.x == plX and ball.y == plY then killPlayer() end!@#&		end!@#&		updateMap(plX, plY)!@#&	else!@#&		local dirX, dirY = x - plX, y - plY!@#&		if pushBlock(x,y,dirX,dirY) then!@#&			plX = x!@#&			plY = y!@#&			updateMap(ox, oy)!@#&			updateMap(plX, plY)!@#&		end!@#&	end!@#&	!@#&	drawInterface()!@#&end!@#&!@#&local function handleEvents()!@#&	local id,p1,p2,p3 = os.pullEvent()!@#&	!@#&	if id == \"key\" then!@#&		if p1 == numPad1 then!@#&			movePlayer(plX-1, plY+1)!@#&		elseif p1 == numPad2 or p1 == keys.down then!@#&			movePlayer(plX, plY+1)!@#&		elseif p1 == numPad3 then!@#&			movePlayer(plX+1, plY+1)!@#&		elseif p1 == numPad4 or p1 == keys.left then!@#&			movePlayer(plX-1, plY)!@#&		elseif p1 == numPad6 or p1 == keys.right then!@#&			movePlayer(plX+1, plY)!@#&		elseif p1 == numPad7 then!@#&			movePlayer(plX-1, plY-1)!@#&		elseif p1 == numPad8 or p1 == keys.up then!@#&			movePlayer(plX, plY-1)!@#&		elseif p1 == numPad9 then!@#&			movePlayer(plX+1, plY-1)!@#&		elseif p1 == keys.enter then!@#&			running = false!@#&		end!@#&	elseif id == \"timer\" then!@#&		--Right now it's just the one. This'll change with electricity balls.!@#&		local allEnemiesTrapped = true!@#&		for _,enemy in pairs(enemies) do!@#&			moveEnemy(enemy)!@#&			if not enemy.trapped then allEnemiesTrapped = false end!@#&		end!@#&		!@#&		if allEnemiesTrapped then!@#&			spawnTimer = spawnTimer + spawnInterval!@#&			for _,enemy in pairs(enemies) do!@#&				map[enemy.y][enemy.x] = \"$\"!@#&				updateMap(enemy.x, enemy.y)!@#&			end!@#&			enemies = {}!@#&			for i=1,levelEnemies do	generateEnemy()	end!@#&		end!@#&		!@#&		if spawnTimer == 0 then!@#&			spawnTimer = spawnInterval!@#&			for i=1,levelEnemies do generateEnemy() end!@#&		else spawnTimer = spawnTimer - 1 end!@#&		!@#&		if pltrapped > 0 then !@#&			pltrapped = pltrapped - 1 !@#&			if pltrapped == 0 then updateMap(plX, plY) end!@#&		end!@#&		if pldead > 0 then!@#&			pldead = pldead - 1!@#&			if pldead == 0 then!@#&				spawnPlayer()!@#&			end!@#&		end!@#&		!@#&		enemyTimer = os.startTimer(enemyInterval)!@#&		drawInterface()!@#&	end!@#&end!@#&!@#&local fpath = shell.resolve(\".\")..\"/SpeedOS/Applications/GameBox/levels/\"..levelName!@#&if not loadMap(fpath) then error(\"Couldn't load map!\") end!@#&drawMap()!@#&!@#&enemyTimer = os.startTimer(enemyInterval)!@#&while running do handleEvents() end!@#&term.setBackgroundColour(colours.black)!@#&shell.run(\"clear\")",["WhackAPig"]="--[[TO Do!@#&      Add More Sound Effects!!!@#&        Menu Clicks!@#&      Easter Eggz!@#&      Moar Mobs!@#&        Bat!@#&          Confusion!@#&            Mirrors field!@#&            loss = 2 per mob!@#&        Blaze!@#&          Burn!@#&            Sets a tile on fire!@#&              disallows mobs spawning on this tile for a while!@#&        Mooshroom/Cow/Squid!@#&          Change of scenery!@#&          No Penalty for miss!@#&      Add help info !@#&        started!@#&          Needs more and to be neater.!@#&          Add documentation on mob stats!@#&      New Gamemodes!@#&        Multiplayer!@#&          Using same to gamemode just vs opponent!@#&          Endurace!@#&           First to click gets it!@#&        Simon!@#&          Show a pattern of spawns!@#&          Spawn pigs in all locations!@#&          Player must click patter they spawned in!@#&            if successful!@#&              increase patterCount by 1!@#&              if patternCount % 5 = 0 then!@#&                increase speed by 1!@#&            else!@#&              restart!@#& ]]-- !@#&------------!@#&-- Images --!@#&------------!@#&creeper = {}!@#&creeper[1] = {32, 8192, 8192, 8192, 32, 8192, 32, 8192, 8192, 32}!@#&creeper[2] = {8192, 32768, 32768, 32768, 8192, 8192, 32768, 32768, 32768, 8192}!@#&creeper[3] = {32, 32768, 32768, 32768, 8192, 32, 32768, 32768, 32768, 8192}!@#&creeper[4] = {8192, 8192, 32, 8192, 32768, 32768, 8192, 8192, 32, 8192}!@#&creeper[5] = {32, 8192, 8192, 32768, 32768, 32768, 32768, 32, 8192, 8192}!@#&creeper[6] = {8192, 32, 8192, 32768, 32, 8192, 32768, 8192, 8192, 32}!@#&pig = {}!@#&pig[1] = {64, 64, 64, 64, 64, 64, 64, 64, 64, 64}!@#&pig[2] = {64, 64, 64, 64, 64, 64, 64, 64, 64, 64}!@#&pig[3] = {64, 32768, 1, 64, 64, 64, 64, 1, 32768, 64}!@#&pig[4] = {64, 64, 64, 64, 64, 64, 64, 64, 64, 64}!@#&pig[5] = {64, 64, 64, 4, 64, 64, 4, 64, 64, 64}!@#&pig[6] = {64, 64, 64, 64, 64, 64, 64, 64, 64, 64}!@#&blank = {}!@#&blank[1] = {32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768}!@#&blank[2] = {32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768}!@#&blank[3] = {32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768}!@#&blank[4] = {32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768}!@#&blank[5] = {32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768}!@#&blank[6] = {32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768}!@#&enderman = {}!@#&enderman[1] = {32768, 128, 32768, 32768, 32768, 32768, 32768, 32768, 128, 32768}!@#&enderman[2] = {32768, 32768, 32768, 128, 32768, 32768, 128, 32768, 32768, 32768}!@#&enderman[3] = {32768, 128, 32768, 32768, 128, 128, 32768, 32768, 128, 32768}!@#&enderman[4] = {32768, 1, 64, 1, 32768, 32768, 1, 64, 1, 32768}!@#&enderman[5] = {128, 32768, 32768, 128, 32768, 32768, 128, 32768, 32768, 128}!@#&enderman[6] = {32768, 32768, 128, 32768, 32768, 32768, 32768, 128, 32768, 32768}!@#&pigman = {}!@#&pigman[1] = {1, 1, 1, 32, 8192, 64, 64, 64, 64, 64}!@#&pigman[2] = {1, 1, 32, 8192, 64, 64, 64, 64, 64, 64}!@#&pigman[3] = {32768, 128, 32, 8192, 64, 64, 64, 64, 1, 32768}!@#&pigman[4] = {1, 1, 1, 4, 8192, 4, 64, 64, 64, 64}!@#&pigman[5] = {1, 32, 32, 1, 32, 8192, 64, 64, 64, 64}!@#&pigman[6] = {32, 8192, 8192, 8192, 1, 32, 8192, 64, 64, 64}!@#&slime = {}!@#&slime[1] = {32, 32, 32, 32, 32, 32, 32, 32, 32, 32}!@#&slime[2] = {32, 32768, 32768, 32768, 8192, 32768, 32768, 32768, 32, 32}!@#&slime[3] = {32, 32768, 32768, 32768, 8192, 32768, 32768, 32768, 32, 32}!@#&slime[4] = {32, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 32, 32}!@#&slime[5] = {32, 8192, 8192, 8192, 8192, 8192, 32768, 32768, 32, 32}!@#&slime[6] = {32, 32, 32, 32, 32, 32, 32, 32, 32, 32}!@#&main = {}!@#&main[1] = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 32, 32, 32, 32}!@#&main[2] = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 32, 8192, 32, 32, 32, 32}!@#&main[3] = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 32, 32, 8192, 8192, 32, 32, 32, 32}!@#&main[4] = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 16, 0, 0, 0, 64, 64, 0, 0, 0, 0, 0, 0, 0, 0, 0, 32, 32, 8192, 32, 32, 8192, 32, 8192, 32, 32}!@#&main[5] = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4096, 0, 512, 512, 512, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 32, 8192, 32, 32, 32, 8192, 32, 32}!@#&main[6] = {0, 0, 0, 0, 0, 0, 0, 0, 64, 64, 0, 0, 0, 512, 0, 512, 512, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 32, 8192, 32, 4096, 32, 32}!@#&main[7] = {0, 0, 0, 0, 0, 64, 64, 64, 64, 0, 0, 0, 0, 0, 0, 128, 128, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4096, 4096}!@#&main[8] = {0, 0, 0, 0, 0, 64, 0, 0, 64, 0, 0, 0, 0, 0, 0, 128, 128, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4096, 4096}!@#&bg = {}!@#&bg[1] = {32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768}!@#&bg[2] = {32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768}!@#&bg[3] = {32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768}!@#&bg[4] = {32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768}!@#&bg[5] = {32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768}!@#&bg[6] = {32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 8192, 4096, 4096, 4096, 4096, 8192, 8192, 8192, 4096, 4096, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 4096, 8192, 8192, 8192, 4096, 4096, 4096, 4096, 8192, 8192, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768}!@#&bg[7] = {4096, 8192, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 8192, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 4096, 4096, 4096, 4096, 8192, 4096, 4096, 4096, 4096, 4096, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 4096, 4096, 4096, 4096, 4096, 8192, 4096, 4096, 4096, 4096}!@#&bg[8] = {4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096}!@#&bg[9] = {4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096}!@#&bg[10] = {4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096}!@#&bg[11] = {4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096}!@#&bg[12] = {4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096}!@#&bg[13] = {32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768}!@#&bg[14] = {32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768}!@#&bg[15] = {32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768}!@#&bg[16] = {32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768}!@#&bg[17] = {32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768}!@#&bg[18] = {32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 4096, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768}!@#&bgend = {}!@#&bgend[1] = {32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 2048, 512, 8192, 8192, 512, 2048, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 2048, 512, 8192, 8192, 512, 2048, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768}!@#&bgend[2] = {32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 2048, 512, 8192, 32, 32, 8192, 512, 2048, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 2048, 512, 8192, 32, 32, 8192, 512, 2048, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768}!@#&bgend[3] = {32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 2048, 512, 8192, 32, 32768, 32768, 32, 8192, 512, 2048, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 2048, 512, 8192, 32, 32768, 32768, 32, 8192, 512, 2048, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768}!@#&bgend[4] = {32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 2048, 512, 8192, 32, 32768, 32768, 32, 8192, 512, 2048, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 2048, 512, 8192, 32, 32768, 32768, 32, 8192, 512, 2048, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768}!@#&bgend[5] = {32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 2048, 512, 8192, 32, 32, 8192, 512, 2048, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 2048, 512, 8192, 32, 32, 8192, 512, 2048, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768}!@#&bgend[6] = {32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 2048, 512, 8192, 8192, 512, 2048, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 2048, 512, 8192, 8192, 512, 2048, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768}!@#&bgend[7] = {32768, 32768, 2048, 512, 8192, 8192, 512, 2048, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 2048, 512, 8192, 8192, 512, 2048, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 2048, 512, 8192, 8192, 512, 2048, 32768, 32768}!@#&bgend[8] = {32768, 2048, 512, 8192, 32, 32, 8192, 512, 2048, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 2048, 512, 8192, 32, 32, 8192, 512, 2048, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 2048, 512, 8192, 32, 32, 8192, 512, 2048, 32768}!@#&bgend[9] = {2048, 512, 8192, 32, 32768, 32768, 32, 8192, 512, 2048, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 2048, 512, 8192, 32, 32768, 32768, 32, 8192, 512, 2048, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 2048, 512, 8192, 32, 32768, 32768, 32, 8192, 512, 2048}!@#&bgend[10] = {2048, 512, 8192, 32, 32768, 32768, 32, 8192, 512, 2048, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 2048, 512, 8192, 32, 32768, 32768, 32, 8192, 512, 2048, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 2048, 512, 8192, 32, 32768, 32768, 32, 8192, 512, 2048}!@#&bgend[11] = {32768, 2048, 512, 8192, 32, 32, 8192, 512, 2048, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 2048, 512, 8192, 32, 32, 8192, 512, 2048, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 2048, 512, 8192, 32, 32, 8192, 512, 2048, 32768}!@#&bgend[12] = {32768, 32768, 2048, 512, 8192, 8192, 512, 2048, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 2048, 512, 8192, 8192, 512, 2048, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 2048, 512, 8192, 8192, 512, 2048, 32768, 32768}!@#&bgend[13] = {32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 2048, 512, 8192, 8192, 512, 2048, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 2048, 512, 8192, 8192, 512, 2048, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768}!@#&bgend[14] = {32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 2048, 512, 8192, 32, 32, 8192, 512, 2048, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 2048, 512, 8192, 32, 32, 8192, 512, 2048, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768}!@#&bgend[15] = {32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 2048, 512, 8192, 32, 32768, 32768, 32, 8192, 512, 2048, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 2048, 512, 8192, 32, 32768, 32768, 32, 8192, 512, 2048, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768}!@#&bgend[16] = {32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 2048, 512, 8192, 32, 32768, 32768, 32, 8192, 512, 2048, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 2048, 512, 8192, 32, 32768, 32768, 32, 8192, 512, 2048, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768}!@#&bgend[17] = {32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 2048, 512, 8192, 32, 32, 8192, 512, 2048, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 2048, 512, 8192, 32, 32, 8192, 512, 2048, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768}!@#&bgend[18] = {32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 2048, 512, 8192, 8192, 512, 2048, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 2048, 512, 8192, 8192, 512, 2048, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768}!@#&!@#&--------------------!@#&-- Misc Functions -- !@#&--------------------!@#&-- clears the terminal then sets cursor to starting position!@#&function clean()!@#&  term.clear()!@#&  term.setCursorPos(1,1)!@#&end!@#&-- clears the monitor then sets cursor to starting position!@#&function cleanM(_mon)!@#&  _mon.clear()!@#&  _mon.setCursorPos(1,1)!@#&  _mon.setBackgroundColor(colors.black)!@#&end!@#&function text(_x,_y,_s)!@#&  term.setCursorPos(_x,_y)!@#&  term.write(_s)!@#&end!@#&-- returns the current time as a formated mm:ss:!@#&function getTime(_t)!@#&  rawSeconds = _t/20!@#&  rawMinutes = math.floor(rawSeconds/60)!@#&  hours = math.floor(rawMinutes/60)!@#&  minutes = rawMinutes%60!@#&  seconds = rawSeconds%60!@#&  tenths = math.floor(((_t%20)/20)*100)!@#&  return string.format(\"%02d:%02d:%02d:%02d\",hours,minutes,seconds,tenths)!@#&end!@#&-- Monitor function to break to the next line!@#&function nextLine()!@#&  pos1,pos2 = m.getCursorPos()!@#&  m.setCursorPos(1,pos2+1)!@#&end!@#&-- reads data from a file!@#&function readLines(sPath)!@#&-- reads the users file as raw text and returns it in a table. !@#&  file = fs.open(sPath, \"r\")!@#&  if file then!@#&        tLines = {}!@#&        sLine = file.readLine()!@#&        while sLine do!@#&          table.insert(tLines, sLine)!@#&          sLine = file.readLine()!@#&        end!@#&        file.close()!@#&        return tLines!@#&  end!@#&  return nil!@#&end!@#&-- writes data (tLines) to a file (sPath)!@#&function writeLines(sPath, tLines)!@#&-- Uses a table of text and writes it to the users file.!@#&  local file = fs.open(sPath, \"w\")!@#&  if file then!@#&    for _, sLine in ipairs(tLines) do!@#&      file.writeLine(tostring(sLine))!@#&    end!@#&    file.close()!@#&  else!@#&    error(sPath .. \" does not exist\")!@#&  end!@#&end!@#&function round(num, idp)!@#&  local mult = 10^(idp or 0)!@#&  return math.floor(num * mult + 0.5) / mult!@#&end!@#&function download(url, file)!@#&  local content = http.get(url).readAll()!@#&  if not content then!@#&    error(\"Could not connect to website\")!@#&  end!@#&  f = fs.open(file, \"w\")!@#&  f.write(content)!@#&  f.close()!@#&end!@#&!@#&-- checks files if they exist!@#&function checkFiles()!@#&  clean()!@#&  if not fs.exists(\"/SpeedOS/Applications/GameBox/scores\") then!@#&    print(\"Creating Endurance Scores File\")!@#&    makeScoresFiles(0,\"/SpeedOS/Applications/GameBox/scores\")!@#&  end!@#&  if not fs.exists(\"/SpeedOS/Applications/GameBox/speedscores\") then!@#&    print(\"Creating Speed Scores File\")!@#&    makeScoresFiles(1,\"/SpeedOS/Applications/GameBox/speedscores\")!@#&  end!@#&  if not fs.exists(\"/SpeedAPI/alphanumeric\") then!@#&    if http then!@#&      download(\"http://pastebin.com/FcbUaCvM\",alphanumeric)!@#&    else!@#&      error(\"Missing Alphanumeric API. Enable HTTP or save http://pastebin.com/FcbUaCvM as alphanumeric\")!@#&    end!@#&  end!@#&end!@#&-- creates a default scores file!@#&function makeScoresFiles(_m,_fileName)!@#&  _table = {}!@#&  for i=3,30,3 do!@#&    _table[i] = \"Notch\"!@#&    if _m == 0 then!@#&      _table[i-1] = \"0\"!@#&      _table[i-2] = \"1.00\"!@#&    elseif _m == 1 then!@#&      _table[i-1] = \"36000\"!@#&      _table[i-2] = \"1\"!@#&    end!@#&  end!@#&  writeLines(_fileName, _table)!@#&end!@#&-- dynamically checks all peripherals attached to the computer then assigns them properly!@#&function checkPeripherals()!@#&  cb,m = nil!@#&  if cb == nil then!@#&    forceSound = true!@#&  end!@#&end!@#&function playSound(_sound)!@#&  if sound then!@#&    cb.setCommand(\"playsound \" .. _sound ..\" @a[r=5]\")!@#&    cb.runCommand()!@#&  end!@#&end!@#&-------------------!@#&-- Mob Functions --!@#&-------------------!@#&!@#&-- Define Coords for Entity Spawns!@#&function setCoords()!@#&  _list = {1,1, 21,1, 41,1, 11,7, 31,7, 1,13, 21,13, 41,13}!@#&  coords = {}!@#&  _j = 1!@#&  for i=1,8,1 do!@#&    mole[i][\"x\"] = _list[_j]!@#&    _j = _j + 1!@#&    mole[i][\"y\"] = _list[_j]!@#&    _j = _j + 1!@#&  end!@#&end!@#&-- Create/Reset Moles to default settings!@#&function resetMoles()!@#&  mole = {}!@#&  for i=1,8,1 do!@#&    mole[i] = {}!@#&    mole[i][\"life\"] = 0!@#&    mole[i][\"type\"] = 0!@#&    mole[i][\"missed\"] = 0!@#&    mole[i][\"spawned\"] = 0!@#&    mole[i][\"hit\"] = 0!@#&  end!@#&  setCoords()!@#&end!@#&-- Returns the number of moles currently spawned.!@#&function getNumMolesAlive()!@#&  _alive = 0!@#&  for i=1,8,1 do!@#&    if mole[i][\"life\"] > 0 then!@#&      _alive = _alive + 1!@#&    end!@#&  end!@#&  return _alive!@#&end!@#&-- Sets mole when its been clicked on.!@#&function hitMole(_i)!@#&  mole[_i][\"hit\"] = mole[_i][\"hit\"] + 1!@#&  mole[_i][\"life\"] = 0!@#&  if gamemode == 25 then!@#&    enderHits = enderHits + 1!@#&  else!@#&    score = score + difficulty!@#&  end!@#&  if mole[_i][\"type\"] == 1 then!@#&    creeperPower()!@#&    playSound(\"random.explode\")!@#&  elseif mole[_i][\"type\"] == 2 then!@#&    slimePower()!@#&    playSound(\"mob.slime.big\")!@#&  elseif mole[_i][\"type\"] == 3 then!@#&    pigmanPower()!@#&    playSound(\"mob.zombiepig.zpigangry\")!@#&  elseif mole[_i][\"type\"] == 4 and gamemode == 0 then!@#&    endermanPower()!@#&    playSound(\"mob.endermen.hit\")!@#&  elseif mole[_i][\"type\"] == 4 then!@#&    playSound(\"mob.endermen.hit\")!@#&  end!@#&  removeMole(_i)!@#&end!@#&-- Draw a mole to the screen!@#&function drawMole(_i)!@#&  if mole[_i][\"type\"] == 0 then!@#&    paintutils.drawImage(pig,mole[_i][\"x\"],mole[_i][\"y\"])!@#&  elseif mole[_i][\"type\"] == 1 then!@#&    paintutils.drawImage(creeper,mole[_i][\"x\"],mole[_i][\"y\"])!@#&  elseif mole[_i][\"type\"] == 2 then!@#&    paintutils.drawImage(slime,mole[_i][\"x\"],mole[_i][\"y\"])!@#&  elseif mole[_i][\"type\"] == 3 then!@#&    paintutils.drawImage(pigman,mole[_i][\"x\"],mole[_i][\"y\"])!@#&  elseif mole[_i][\"type\"] == 4 then!@#&    paintutils.drawImage(enderman,mole[_i][\"x\"],mole[_i][\"y\"])!@#&  end!@#&  term.setBackgroundColor(colors.black)!@#&end!@#&-- Sets a blank portrait over a mole tile.!@#&function removeMole(_i)!@#&  paintutils.drawImage(blank,mole[_i][\"x\"],mole[_i][\"y\"])!@#&  mole[_i][\"type\"] = 0!@#&end!@#&-- Increments life value of all moles if they are alive. !@#&-- Removes moles if they are about to die.!@#&function lifeTimer()!@#&  for _l=1,8,1 do!@#&    if mole[_l][\"life\"] == 1 then!@#&      mole[_l][\"missed\"] = mole[_l][\"missed\"] + 1!@#&      -- check for special mob score conditions!@#&      -- pigman bonus!@#&      if gamemode == 0 and mole[_l][\"type\"] == 3 then!@#&        score = score + difficulty*3!@#&        playSound(\"mob.zombiepig.zpigdeath\")!@#&      -- creeper penalty!@#&      elseif gamemode == 0 and mole[_l][\"type\"] == 1 then!@#&        score = score + difficulty * 3!@#&        playSound(\"random.fuse\")!@#&      -- enderman bonus despawns!@#&      elseif gamemode == 25 then!@#&        enderMisses = enderMisses + 1!@#&        playSound(\"mob.endermen.portal\")!@#&      else!@#&        score = score - 1!@#&        if mole[_l][\"type\"] == 2 then!@#&          playSound(\"mob.slime.attack\")!@#&        else!@#&          playSound(\"mob.pig.death\")!@#&        end!@#&      end!@#&      if score<0 then!@#&        score = 0!@#&      end!@#&      removeMole(_l)!@#&    end!@#&    if mole[_l][\"life\"]>0 then!@#&      mole[_l][\"life\"] = mole[_l][\"life\"] - 1!@#&    end!@#&  end!@#&  if lifeMultiplierTimer>0 then!@#&    if lifeMultiplierTimer == 1 then!@#&      lifeMultiplier = 1!@#&    end!@#&    lifeMultiplierTimer = lifeMultiplierTimer - 1!@#&  end!@#&end!@#&-- Create a new mole if there is enough room according to difficulty. 10% chance of success.!@#&function newMole()!@#&  -- get the current amount of moles out there!@#&  _numAlive = getNumMolesAlive()!@#&  -- if there are less than the difficulty level and 4!@#&  if _numAlive < difficulty and _numAlive < 4 then!@#&    valid = false!@#&    -- start random selection too see if a mob should spawn. !@#&    -- 1 in (probablility) chance of success. if it passes!@#&    randomness = math.random(probablility)!@#&    if randomness == 1 then!@#&      -- select a valid random spot that is available!@#&      while valid == false do!@#&        _newMole = math.random(8)!@#&        if isAlive(_newMole) == false then!@#&          valid = true!@#&        end!@#&      end!@#&      -- set the selected moles life to base health divided by the difficulty level.!@#&      -- multiply it by a life multiplier for bonus mobs!@#&      mole[_newMole][\"life\"] = math.floor(baselineHealth/difficulty)*lifeMultiplier!@#&      -- choose special mob if they are enabled!@#&      if specials then!@#&        specialRandom = math.random(randomnessSpecial)!@#&        -- Testing Value - change to lock to specials only!@#&        --specialRandom = 1!@#&        if specialRandom == 1 then!@#&          typeRandom = math.random(4) -- creeper,slime,pigman,enderman!@#&          -- testing value - change to lock to special type!@#&          --typeRandom = 4!@#&          -- Special spawn condition for enderman!@#&          if typeRandom == 4 then!@#&            -- 1 in 20 chance that a special mob will be an enderman!@#&            enderRandom = math.random(20)!@#&            if enderRandom ~= 1 then!@#&              typeRandom = math.random(3)!@#&            end!@#&          end!@#&          -- Set the mob type finally!@#&          mole[_newMole][\"type\"] = typeRandom!@#&        end!@#&      end!@#&      -- draw the new mob on the screen!@#&      drawMole(_newMole)!@#&    end!@#&  end!@#&end!@#&-- Returns true if mole has a life value of greater than 0. Returns false if not alive.!@#&function isAlive(_a)!@#&  if mole[_a][\"life\"]>0 then!@#&    return true!@#&  else!@#&    return false!@#&  end!@#&end!@#&-- Tests coordinates to see if clicked region is a mole that is alive!@#&-- returns 0 if not a valid mole click, or returns the number of the mole clicked on if it is valid.!@#&function testClick(_x,_y)!@#&  found = false!@#&  for _c=1,8,1 do!@#&    if (_x >= mole[_c][\"x\"]) and (_x <= mole[_c][\"x\"] + 9) then!@#&      if (_y >= mole[_c][\"y\"]) and (_y <= mole[_c][\"y\"] + 5) then!@#&        found = true!@#&      end!@#&    end!@#&    if found then!@#&      _moleClicked = _c!@#&      break!@#&    end!@#&  end!@#&  if mole[_moleClicked][\"life\"]>0 and found then!@#&    return _moleClicked!@#&  else!@#&    playSound(\"mob.irongolem.walk\")!@#&    return 0!@#&  end!@#&  !@#&end!@#&-- Returns the total amount of hits on all moles!@#&function getTotalHits()!@#&  _totalHits = 0!@#&  for i=1,8,1 do!@#&    _totalHits = _totalHits + mole[i][\"hit\"]!@#&  end!@#&  return _totalHits!@#&end!@#&!@#&-----------------------!@#&-- Display Functions --!@#&-----------------------!@#& !@#&-- prints score, time, hits, and more to game screen!@#&function updateStats()!@#&  term.setBackgroundColor(colors.black)!@#&  term.setCursorPos(1,19)!@#&  term.clearLine()!@#&  text(13,19,\"Level \" .. difficulty)!@#&  text(22,19,getTime(ticks))!@#&  if gamemode == 0 then!@#&    text(1,19,\"Score \" .. score)!@#&    text(44,19,\"E to End\")!@#&  elseif gamemode == 1 then!@#&    text(1,19,\"Hits \" .. getTotalHits())!@#&  elseif gamemode == 25 then!@#&    text(1,19,\"Hits \" .. enderHits)!@#&    text(40,19,\"Misses \" .. enderMisses)!@#&  end!@#&  if lifeMultiplier > 1 then!@#&    term.setBackgroundColor(colors.lime)!@#&    text(38,19,\"SLOW\")!@#&    term.setBackgroundColor(colors.black)!@#&  end!@#&end!@#&-- Prints Debugging / Stat information to the monitor.!@#&function showDebugStats()!@#&  cleanM(m)!@#&  totalHits = getTotalHits()!@#&  totalMisses = 0!@#&  totalMissClicks = 0!@#&  for i=1,8,1 do!@#&    totalMisses = totalMisses + mole[i][\"missed\"]!@#&    m.setCursorPos(1,10+i)!@#&    m.write(\"Mole \" .. i .. \": Life- \" .. mole[i][\"life\"] .. \" X: \" ..  mole[i][\"x\"].. \" Y: \" .. mole[i][\"y\"] .. \" Hit: \" .. mole[i][\"hit\"] .. \" Miss: \" .. mole[i][\"missed\"])!@#&  end!@#&  m.setCursorPos(1,1)!@#&  totalMissClicks = clicks - totalHits!@#&  m.write(\"Difficulty: \" .. difficulty)!@#&  nextLine()!@#&  m.write(\"Game Ticks: \" .. ticks)!@#&  nextLine()!@#&  m.write(\"Average Difficulty: \" .. totalDifficulty/ticks)!@#&  nextLine()!@#&  m.write(\"Last Click:  X - \" .. lastX .. \"   Y - \" .. lastY)!@#&  nextLine() !@#&  m.write(\"Last Mole Click: \" .. lastTest)!@#&  nextLine() !@#&  m.write(\"Clicks: \" .. clicks)!@#&  nextLine()!@#&  m.write(\"Hits: \" .. totalHits)!@#&  nextLine()!@#&  m.write(\"Misses: \" .. totalMisses)!@#&  nextLine()!@#&  m.write(\"Miss Clicks: \" .. totalMissClicks)!@#&  nextLine()!@#&  m.write(\"Score: \" .. score)!@#&end!@#&-- Prints the main menu screen and buttons!@#&function mainMenu()!@#&  clean()!@#&  paintutils.drawImage(main,1,tY-8)!@#&  alphanumeric.stringToImg(\"Whack a\",colors.red,2,2)!@#&  alphanumeric.stringToImg(\"Pig\",colors.red,5,8)!@#&  term.setBackgroundColor(colors.green)!@#&  term.setCursorPos(1,tY)!@#&  term.clearLine()!@#&  text(40,8,\" Endurance \")!@#&  text(40,10,\" Speed Run \")!@#&  text(40,12,\" Top Scores\")!@#&  text(40,16,\" Quit Game \")!@#&  text(tX-10,tY,\"For GameBox\")!@#&  if sound == false or forceSound then!@#&    term.setBackgroundColor(colors.red)!@#&  end!@#&  if not forceSound then    !@#&    text(40,14,\"   Sound   \")!@#&  end!@#&  term.setBackgroundColor(colors.black)!@#&end!@#&-- Set up Screen!@#&function prepScreen(_img)!@#&  clean()!@#&  paintutils.drawImage(_img,1,1)!@#&end!@#&-- Displays the Top Scores Screen!@#&function showTopScores()!@#&  while true do!@#&    if gamemode == 0 then!@#&      fileName = \"/SpeedOS/Applications/GameBox/scores\"!@#&    elseif gamemode == 1 then!@#&      fileName = \"/SpeedOS/Applications/GameBox/speedscores\"!@#&    end!@#&    local _scores = readLines(fileName)!@#&    clean()!@#&    alphanumeric.stringToImg(\"Top 10\",colors.red,2,2)!@#&    term.setBackgroundColor(colors.black)!@#&    if gamemode == 0 then!@#&      text(24,8,\"Score\")!@#&      text(38,8,\"Difficulty\")!@#&      term.setBackgroundColor(colors.green)!@#&      text(40,4,\"Endurance\")!@#&    elseif gamemode == 1 then!@#&      text(24,8,\"HH:MM:SS:TT   Difficulty\")!@#&      term.setBackgroundColor(colors.green)!@#&      text(40,4,\"Speed\")!@#&    end!@#&    text(40,5,\"Runs\")!@#&    term.setBackgroundColor(colors.black)!@#&    text(7,8,\"Name\")!@#&    for z=3,30,3 do!@#&      text(3,8+(z/3), z/3 .. \".\")!@#&      text(7,8+(z/3), _scores[z] .. \" \")!@#&      if gamemode == 0 then!@#&        text(24,8+(z/3),_scores[z-1])!@#&        text(38,8+(z/3),round(tonumber(_scores[z-2]),1))!@#&      elseif gamemode == 1 then!@#&        text(24,8+(z/3),getTime(_scores[z-1]) .. \"   \" .. _scores[z-2])!@#&      end!@#&    end!@#&    term.setBackgroundColor(colors.green)!@#&    text(45,12,\"      \")!@#&    text(45,13,\" NEXT \")!@#&    text(45,14,\"      \")!@#&  !@#&    text(45,16,\"      \")!@#&    text(45,17,\" EXIT \")!@#&    text(45,18,\"      \")!@#&    term.setBackgroundColor(colors.black)!@#&    toldTo = true!@#&    doBreak = false!@#&    while toldTo do!@#&      local event,p1,p2,p3 = os.pullEvent()!@#&      if event == \"mouse_click\" then!@#&        if p2>=45 and p2<=50 and p3>=12 and p3<=14 then!@#&          if gamemode == 0 then!@#&          gamemode = 1!@#&          elseif gamemode == 1 then!@#&           gamemode = 0!@#&          end!@#&          toldTo=False!@#&        elseif p2>=45 and p2<=50 and p3>=16 and p3<=18 then!@#&          toldTo=false!@#&          doBreak = true!@#&        end!@#&      end!@#&    end!@#&    if doBreak then!@#&      break!@#&    end!@#&  end!@#&end!@#&!@#&function helpMain()!@#&  term.setBackgroundColor(colors.green)!@#&  text(2,1,\"General\")!@#&  text(10,1,\"Gamemodes\")!@#&  text(20,1,\"Controls\")!@#&  text(29,1,\"Mobs\")!@#&  text(34,1,\"Setup\")!@#&  text(40,1,\"Exit\")!@#&  term.setBackgroundColor(colors.black)!@#&end!@#&function prepHelp()!@#&  term.setBackgroundColor(colors.blue)!@#&  term.clear()!@#&  term.setCursorPos(1,2)!@#&  for i=1,tX do!@#&    write(\"-\")!@#&  end!@#&  paintutils.drawImage(main,1,tY-8)!@#&  term.setBackgroundColor(colors.green)!@#&  term.setCursorPos(1,tY)!@#&  term.clearLine()!@#&  helpMain()!@#&  term.setCursorPos(1,3)!@#&  term.setBackgroundColor(colors.blue)!@#&end!@#&function helpInfo()!@#&  local function generalInformation()!@#&    print(\"General Information:\\n \")!@#&    print(\"Whack a pig is a remake of the classic game of whack a mole. It has been brought to the minecraft computercraft world with a few little twists.\")!@#&    print(\"You need to click on the mobs that spawn as quickly as you can before they despawn.\")!@#&    print(\"The higher the difficulty, the faster they despawn, and the more there are (max 4).\")!@#&    !@#&  end!@#&  local function gamemodes()!@#&    print(\"Gamemodes:\\n \")!@#&    print(\"There are currently 2 gamemodes to choose from, Endurance and Speed Run.\")!@#&    print(\"\\nEndurance is an endless onslaught of mobs. It is all a test of how long and how fast can you click. Special mobs spawn to help alter the game in interesting ways. Keep your eye out for that rare Enderman.\")!@#&    print(\"\\nSpeed Run is a test of speed. Your goal is to whack 100 pigs in the quickest time possible. Can you click faster than your friends?\")!@#&    !@#&  end!@#&  local function controls()!@#&    print(\"Controls:\\n \")!@#&    print(\"E - Ends Endurance Round\")!@#&    print(\"Q - Quits Speed Run\")!@#&    print(\"S - Turns Souns On/Off\")!@#&    print(\"X - Exits the Game from Menu\")!@#&    print(\" \")!@#&  end!@#&  local function mobs()!@#&    print(\"Mob Abilites\\n \")!@#&    print(\"Creeper - When you click on the creeper, It will hit all other mobs currently alive. You will recieve points for all mobs killed. If you miss the creeper, you will lose points equal to 3 times your difficulty.\")!@#&    print(\" \")!@#&    print(\"Slime - The slime will increase the time mobs are alive. Mob that are currently alive will gain twice their current health, and new mobs that spawn will start with twice their health. Lasts for 10 seconds. Additional slime clicks stack!\")!@#&    term.setTextColor(colors.red)!@#&    print(\" \\nHit any key to continue\")!@#&    term.setTextColor(colors.white)!@#&    doLoop = true!@#&    while doLoop do!@#&      local event2 = os.pullEvent()!@#&      if event2 == \"key\" or event2 == \"mouse_click\" then!@#&        doLoop = false!@#&      end!@#&    end!@#&    prepHelp()!@#&    term.setCursorPos(1,3)!@#&    print(\"Mob Abilities Continued\\n \")!@#&    print(\"Pigman - You do not want to anger the pigman. If you click on him, he attacks everything and steals points equal to 2 times your difficulty for every mob he kills, including himself. If you leave it be, you will receive points equal to three times your difficulty.\")!@#&    print(\" \\nEndermen - The endermen when provoked, will warp you to the end. It will jump around and you will need to catch it. Accuracy is key. If your accuracy is above 50% you will gain points, below and you will lose them. Max points won/lost equals 100 times your difficulty.\")!@#&  end!@#&  local function setup()!@#&    print(\"Optional Peripherals:\\n \")!@#&    print(\"You can attach a command block directly to the terminal, or via networking cables. This will enable sound effects for various different actions in game.\")!@#&    print(\"\\nIf you attach a monitor to the terminal, information will be printed to it while games are in session. This is mainly used for debugging information but will soon be made much nicer looking.\")!@#&  end!@#&  prepHelp()!@#&  print(\"Help Main Page\")!@#&  print(\"Select Option from above\")!@#&  !@#&  local doHelp = true!@#&  while doHelp do!@#&    helpMain()!@#&    while true do!@#&      local event,key,p1,p2 = os.pullEvent()!@#&      if p2 == 1 and event == \"mouse_click\" then!@#&        if p1>=2 and p1<=8 then!@#&          prepHelp()!@#&          generalInformation()!@#&          break!@#&        elseif p1>=10 and p1<=18 then!@#&          prepHelp()!@#&          gamemodes()!@#&          break!@#&        elseif p1>=20 and p1<=27 then!@#&          prepHelp()!@#&          controls()!@#&          break!@#&        elseif p1>=29 and p1<=32 then!@#&          prepHelp()!@#&          mobs()!@#&          break!@#&        elseif p1>=34 and p1<=38 then!@#&          prepHelp()!@#&          setup()!@#&          break!@#&        elseif p1>=40 and p1<=43 then!@#&          clean()!@#&          doHelp = false!@#&          break!@#&        end!@#&      end!@#&    end!@#&  end!@#&    !@#&end!@#&!@#&--------------------!@#&-- Game Mechanics --!@#&--------------------!@#&!@#&-- Sets up for Speed Mode!@#&function runSpeedRun()!@#&  gamemode = 1!@#&  specials = false!@#&  difficulty = difficultySelector()!@#&  if difficulty > 0 then!@#&    mainLoop()!@#&  end!@#&end!@#&-- Sets up for Endurance Mode!@#&function runEndurance()!@#&  gamemode = 0!@#&  specials = true!@#&  difficulty = difficultySelector()!@#&  if difficulty > 0 then!@#&    mainLoop()!@#&  end!@#&end!@#&-- Gets difficulty from the player!@#&function difficultySelector()!@#&  clean()!@#&  text(13,1,\"Choose Your Difficulty Level\")!@#&  term.setCursorPos(15,3)!@#&  term.setBackgroundColor(colors.lightBlue)!@#&  term.write(\" 1 \")!@#&  term.setBackgroundColor(colors.green)!@#&  term.write(\" 2 \")!@#&  term.setBackgroundColor(colors.lime)!@#&  term.write(\" 3 \")!@#&  term.setBackgroundColor(colors.yellow)!@#&  term.write(\" 4 \")!@#&  term.setBackgroundColor(colors.orange)!@#&  term.write(\" 5 \")!@#&  term.setBackgroundColor(colors.brown)!@#&  term.write(\" 6 \")!@#&  term.setBackgroundColor(colors.red)!@#&  term.write(\" 7 \")!@#&  term.setBackgroundColor(colors.green)!@#&  text(cX-3,tY-2,\"      \")!@#&  text(cX-3,tY-1,\" BACK \")!@#&  text(cX-3,tY,\"      \")!@#&  term.setBackgroundColor(colors.black)!@#&  if not forceSound then!@#&    text(1,tY-1,\"Hit S to alter\")!@#&    text(1,tY,\"sound while in game\")!@#&  end!@#&  !@#&  if gamemode == 0 then!@#&    term.setCursorPos(1,5)!@#&    print(\"In Endurance Mode, You can change difficulty at any time in game with the up and down arrows. \" .. !@#&        \"Specialty Mobs will spawn as well. Effects are as follows: \")!@#&    print(\"Creeper- Hits all alive mobs and rewards you their points.\")!@#&    print(\"Slime- Increases the time Mobs are alive for a short while.\")!@#&    print(\"Pigman- Kills all alive mobs and steals points equal to their worth\")!@#&    print(\"Enderman- Very Rare! Special!\")!@#&  elseif gamemode == 1 then!@#&    term.setCursorPos(1,5)!@#&    print(\"The goal of a speed run is to reach 100 pigs whacked as quickly as you can. Remember,\" ..!@#&    \" harder difficulties spawn more pigs and with more speed. If you feel like you want to quit, \" ..!@#&    \"hit Q. You will not be scored however if you quit!\")!@#&  end!@#&  _set = false!@#&  while true do!@#&    event,p1,_x2,_y2 = os.pullEvent()!@#&    term.setCursorPos(10,10)!@#&    if event == \"mouse_click\" then!@#&      if _y2 == 3 then!@#&        if _x2>=15 and _x2<=17 then!@#&          _diff = 1!@#&          _set = true!@#&        elseif _x2>=18 and _x2<=20 then!@#&          _diff = 2!@#&          _set = true!@#&        elseif _x2>=21 and _x2<=23 then!@#&          _diff = 3!@#&          _set = true!@#&        elseif _x2>=24 and _x2<=26 then!@#&          _diff = 4!@#&          _set = true!@#&        elseif _x2>=27 and _x2<=29 then!@#&          _diff = 5!@#&          _set = true!@#&        elseif _x2>=30 and _x2<=32 then!@#&          _diff = 6!@#&          _set = true!@#&        elseif _x2>=33 and _x2<=35 then!@#&          _diff = 7!@#&          _set = true!@#&        end!@#&      elseif _x2>=(cX-3) and _x2<=(cX+2) and _y2 >= tY-2 and _y2 <= tY then!@#&        _diff = 0!@#&        _set = true!@#&      end!@#&      !@#&    end!@#&    if _set then!@#&      break!@#&    end!@#&  end!@#&  return _diff!@#&end!@#&-- Gets the name of the player and returns it as a string!@#&-- name must be 3 - 16 characters in length!@#&function getName()!@#&  while true do!@#&    clean()!@#&    if gamemode == 0 then!@#&      alphanumeric.stringToImg(score,colors.red,2,2)!@#&    end!@#&    text(3,8,\"Congratulations, You have achieved a High Score!\")!@#&    text(3,9,\"Please Enter Your Name: \")!@#&    _n = io.read()!@#&    if string.len(_n)<=16 and string.len(_n)>=3 then!@#&      break!@#&    else!@#&      term.setBackgroundColor(colors.red)!@#&      text(3,12,\"Name must be at least 3 characters\")!@#&      text(3,13,\"and no more than 16.\")!@#&      term.setBackgroundColor(colors.black)!@#&      sleep(3)!@#&    end!@#&  end!@#&  return _n!@#&end!@#&-- Checks sent score to see if it is a new high score.!@#&-- If it is, will ask for name of player, then save new!@#&-- top scores to file!@#&function checkTopScores(_score)!@#&  newTopScore = false!@#&  if gamemode == 0 then!@#&    if _score > 0 then!@#&      _scores = readLines(\"scores\")!@#&      for l=3,30,3 do!@#&        if _score > tonumber(_scores[l-1]) then!@#&          newTopScore = true!@#&        end!@#&      end!@#&    end!@#&    if newTopScore then!@#&      _name = getName()!@#&      _diff = totalDifficulty/ticks!@#&      for l=3,30,3 do!@#&        print(l/3 .. \" Current Score \" .. _score .. \"   New Score\" .. _scores[l-1])!@#&        if _score > tonumber(_scores[l-1]) then!@#&          _nameTemp = _scores[l] !@#&          _scoreTemp = tonumber(_scores[l-1])!@#&          _diffTemp = _scores[l-2]!@#&          _scores[l] = _name!@#&          _scores[l-1] = tostring(_score)!@#&          _scores[l-2] = _diff!@#&          _score = tonumber(_scoreTemp)!@#&          _name = _nameTemp!@#&          _diff = _diffTemp!@#&        end!@#&      end!@#&      writeLines( \"scores\" , _scores)!@#&    end!@#&  elseif gamemode == 1 then!@#&    if ticks > 0 then!@#&      _scores = readLines(\"speedscores\")!@#&      for l=3,30,3 do!@#&        if ticks < tonumber(_scores[l-1]) then!@#&          newTopScore = true!@#&        end!@#&      end!@#&    end!@#&    if newTopScore then!@#&      _ticks = ticks!@#&      _difficulty = difficulty!@#&      _name = getName()!@#&      for l=3,30,3 do!@#&        if _ticks < tonumber(_scores[l-1]) then!@#&          -- fill holders!@#&          _tickTemp = tonumber(_scores[l-1])!@#&          _nameTemp = _scores[l]!@#&          _diffTemp = _scores[l-2]!@#&          -- enter new values into save file!@#&          _scores[l-1] = tostring(_ticks)!@#&          _scores[l] = _name!@#&          _scores[l-2] = tostring(_difficulty)!@#&          -- move temp values to new test values!@#&          _ticks = _tickTemp!@#&          _name = _nameTemp!@#&          _difficulty = _diffTemp!@#&        end!@#&      end!@#&      writeLines(\"speedscores\", _scores)!@#&    end!@#&  end!@#&end!@#&-- Games main processing Loop!@#&function mainLoop()!@#&  -- Set up Variables (Non Changeable!@#&  score = 0!@#&  ticks = 0!@#&  lastX = 0!@#&  lastY = 0!@#&  lastTest = 0!@#&  clicks = 0!@#&  goal = 100!@#&  totalDifficulty = 0!@#&  run = true!@#&  !@#&  prepScreen(bg)!@#&  resetMoles()!@#&  -- Start Main tick loop!@#&  while run do!@#&    -- start timer at .1 seconds!@#&    ticker = os.startTimer(.1)!@#&    doEvent = true!@#&    -- Start Event Tests!@#&    while doEvent do!@#&        event, p1, xClick, yClick = os.pullEvent()!@#&        -- detect mouse click or timer!@#&        if event == \"mouse_click\" then !@#&          -- if mouse click, test if valid!@#&          clicks = clicks + 1!@#&          lastX = xClick!@#&          lastY = yClick!@#&          _mole = testClick(xClick,yClick)!@#&          lastTest = _mole!@#&          if _mole > 0 then!@#&            hitMole(_mole)!@#&            doEvent = false!@#&          end!@#&        elseif event == \"key\" then!@#&          -- Test for \"E\" to end Endurance Round when in Endurance mode.!@#&          if p1 == 18 and gamemode == 0 then!@#&            -- Stop Loops!@#&            run = false!@#&            doEvent = false!@#&            -- Give time for the Event to clear!@#&            sleep(.2)!@#&            checkTopScores(score)!@#&            showTopScores()!@#&          end!@#&          -- Check for directional arrows up and down for difficulty control!@#&          if gamemode==0 then!@#&            -- UP!@#&            if p1 == 200 then!@#&              doEvent = false!@#&              if difficulty + 1 < 8 then!@#&                difficulty = difficulty + 1!@#&              end!@#&            end!@#&            -- DOWN!@#&            if p1 == 208 then!@#&              doEvent = false!@#&              if difficulty - 1 > 0 then!@#&                difficulty = difficulty - 1!@#&              end!@#&            end!@#&          end!@#&          -- Check for keystroke S to turn on or off sound.!@#&          if p1 == 31 then!@#&            doEvent = false!@#&            if not forceSound then!@#&              if sound then!@#&                sound = false!@#&              else !@#&                sound = true!@#&              end!@#&            end!@#&          end!@#&          -- Test for Q key in Speed Runs!@#&          if p1 == 16 and gamemode == 1 then!@#&            -- Stop Loops!@#&            run = false!@#&            doEvent = false!@#&            -- Give time for the Event to clear!@#&            sleep(.2)!@#&            showTopScores()!@#&          end!@#&        -- Test for Timer Event and break event loop if it passes!@#&        elseif event == \"timer\" and p1 == ticker then!@#&          doEvent = false!@#&        end!@#&    end!@#&    -- Increment Lifetime of all moles!@#&    lifeTimer()!@#&    -- Spawn New Moles!@#&    if gamemode == 25 then!@#&      newEnderman()!@#&    else!@#&      newMole()!@#&      -- Get some stats on that tick!@#&      totalDifficulty = totalDifficulty + difficulty!@#&      -- Increment current tick count!@#&      ticks = ticks + 1!@#&    end!@#&    !@#&    -- Print Statistics to game board and monitor!@#&    updateStats()!@#&    if statistics then!@#&      showDebugStats()!@#&    end!@#&    if gamemode == 1 then!@#&      if getTotalHits() == goal then!@#&        doEvent = false!@#&        run = false!@#&        checkTopScores(score)!@#&        showTopScores()!@#&      end!@#&    elseif gamemode == 25 then!@#&      if endermanModeTimer == 1 then!@#&        endermanModeTimer = 0!@#&        for i=1,8 do!@#&          if isAlive(i) then!@#&            removeMole(i)!@#&            mole[i][\"life\"] = 0!@#&          end!@#&        end!@#&        enderBonusAdd = math.floor((200 * endermanDifficutly)* enderHitRatio)!@#&        enderBonus = -100*endermanDifficulty + enderBonusAdd!@#&        score = score + enderBonus!@#&        alphanumeric.stringToImg(enderBonus,colors.red,cX-3*string.len(enderBonus),cY-2)!@#&        sleep(10)!@#&        prepScreen(bg)!@#&        gamemode = 0!@#&        difficulty = endermanDifficulty!@#&      elseif endermanModeTimer>1 then!@#&        endermanModeTimer = endermanModeTimer - 1!@#&      end!@#&    end!@#&  end!@#&end!@#&function creeperPower()!@#&  for i=1,8 do!@#&    if isAlive(i) then!@#&      hitMole(i)!@#&    end!@#&  end!@#&end!@#&function pigmanPower()!@#&  for i=1,8 do!@#&    if isAlive(i) then!@#&      removeMole(i)!@#&      score = score - difficulty*2!@#&    end!@#&  end!@#&  score = score - difficulty*2!@#&  if score<0 then!@#&    score = 0!@#&  end!@#&end!@#&function slimePower()!@#&  lifeMultiplier = lifeMultiplier + 1!@#&  lifeMultiplierTimer = lifeMultiplierTimer + 200!@#&  for i=1,8 do!@#&    if isAlive(i) then!@#&      mole[i][\"life\"] = mole[i][\"life\"]*2!@#&    end!@#&  end!@#&end!@#&function endermanPower()!@#&  for i=1,8 do!@#&    if isAlive(i) then!@#&      removeMole(i)!@#&      mole[i][\"life\"] = 0!@#&      score = score + 1*difficulty!@#&    end!@#&  end!@#&  endermanDifficulty = difficulty!@#&  difficulty = 0!@#&  gamemode = 25!@#&  endermanModeTimer = 300!@#&  prepScreen(bgend)!@#&  enderHits = 0!@#&  enderMisses = 0!@#&end!@#&function newEnderman()!@#&  if getNumMolesAlive()< 1 then!@#&   _newEnder = math.random(8)!@#&   mole[_newEnder][\"life\"] = 20!@#&   mole[_newEnder][\"type\"] = 4!@#&   drawMole(_newEnder)!@#&  end!@#&end!@#& !@#&!@#&--------------------------------!@#&--Start Program - Whack a Mole--!@#&--------------------------------!@#&!@#&suka = \"play\"!@#&!@#&if suka == \"play\" then !@#&  tX,tY = term.getSize()!@#&  if tX<51 or tY<19 then!@#&    error(\"Sorry, but your screen is too small to play.\")!@#&  end!@#&  if not term.isColor() then!@#&    error(\"Terminal must support color.\")!@#&  end!@#&  cX = math.floor(tX/2+.5)!@#&  cY = math.floor(tY/2+.5)!@#&!@#&  checkFiles()!@#&  checkPeripherals() !@#&  os.loadAPI(\"/SpeedAPI/alphanumeric\") !@#&  -- Value that adjusts randomness in mole spawning. Increase to make moles appear more random and!@#&  -- less frequent. Value is a ratio between 1 and x!@#&  probablility = 10!@#&  -- Changes chance a pig will be a special mob instead.!@#&  randomnessSpecial = 10!@#&  -- Value that defines Health value for default moles!@#&  baselineHealth = 120!@#&!@#&  -- Set up Variables Non Changeable!@#&  statistics = false!@#&  specials = false!@#&  ticks = 0!@#&  lastX = 0!@#&  lastY = 0!@#&  lastTest = 0!@#&  clicks = 0!@#&  gamemode = 0!@#&  lifeMultiplier = 1!@#&  lifeMultiplierTimer = 0!@#&  run = true!@#&  enderMissed = 0!@#&  enderHit = 0!@#&  endermanModeTimer = 0!@#&!@#&  home = term!@#&  if forceSound then!@#&    sound = false!@#&  else!@#&    sound = true!@#&  end!@#&!@#&  if m ~= nil then!@#&    mX,mY = m.getSize()!@#&    statistics = true!@#&  end!@#&  -- Run Main Menu!@#&  mainMenu()!@#&  while true do!@#&    event, p1, _xm, _ym = os.pullEvent()!@#&    if event == \"mouse_click\" then!@#&      -- Test Endurance Mode!@#&      if _xm>=40 and _xm<=50 and _ym==8 then!@#&        runEndurance()!@#&        mainMenu()!@#&      -- Test Speed Run Mode!@#&      elseif _xm>=40 and _xm<=50 and _ym==10 then!@#&        runSpeedRun()!@#&        mainMenu()!@#&      -- Check Top Scores!@#&      elseif _xm>=40 and _xm<=50 and _ym==12 then!@#&        showTopScores()!@#&        mainMenu()!@#&      -- Check Exit Button!@#&      elseif _xm>=40 and _xm<=50 and _ym==16 then!@#&        clean()!@#&        os.unloadAPI(\"/SpeedAPI/alphanumeric\")!@#&        sleep(.2)!@#&        error()!@#&        break!@#&      -- Alter Sound Setting!@#&      elseif _xm>=40 and _xm<=50 and _ym==14 then!@#&        if not forceSound then!@#&          if sound then!@#&            sound = false!@#&          else !@#&            sound = true!@#&          end!@#&          mainMenu()!@#&        end!@#&      end!@#&    -- Check key strokes!@#&    elseif event == \"key\"then !@#&      -- Check for x key and exits program!@#&      if p1 == 45 then!@#&        clean()!@#&        os.unloadAPI(\"/SpeedAPI/alphanumeric\")!@#&        sleep(.2)!@#&        error()!@#&        break!@#&      -- Check for s key to alter sound!@#&      elseif p1 == 31 then!@#&        if not forceSound then!@#&          if sound then!@#&            sound = false!@#&          else !@#&            sound = true!@#&          end!@#&          mainMenu()!@#&        end!@#&      end!@#&    end!@#&  end!@#&  os.unloadAPI(\"/SpeedAPI/alphanumeric\")!@#&end",["eShip14_broken.img"]="!@#&             999999999!@#&           9997777777f!@#&          997777777999!@#&          fff7777ff777!@#&             f7fffff7ff!@#&             ffff77ffff!@#&          fff7f77777f7!@#&          997777777999!@#&           9997777777f!@#&             999999999",["Jumping"]="local playery, score, objects, maxx, maxy = 2, 0, {}, term.getSize()!@#&local objects = { {maxx - 2, math.random( 1, 4 )} }!@#&!@#&local function newObject()!@#&	local last = objects[ #objects ]!@#&	if last[ 2 ] <= 2 then!@#&		objects[ #objects + 1 ] = {last[1] + math.random( 5, 10 ), math.random( 1, 4 )}!@#&	else!@#&		objects[ #objects + 1 ] = {last[1] + math.random( 15, 20 ), math.random( 1, 4 )}!@#&	end!@#&end!@#&!@#&local function drawPlayer()!@#&  term.setCursorPos( 2, math.floor( maxy - playery ) )!@#&  term.setBackgroundColor( colors.blue )!@#&  term.setTextColor( colors.lightBlue )!@#&  term.write( \"$\" )!@#&end!@#&!@#&local function drawField()!@#&  term.setTextColor( colors.lime )!@#&  term.setBackgroundColor( colors.green )!@#&  term.setCursorPos( 1, maxy - 1 )!@#&  term.write( string.rep( \"=\", maxx ) )!@#&end!@#&!@#&local function drawScore()!@#&  term.setTextColor( colors.black )!@#&  term.setBackgroundColor( colors.white )!@#&  term.setCursorPos( 1, 1 )!@#&  term.write( score )!@#&end!@#&!@#&local function drawObjects()!@#&  term.setBackgroundColor( colors.red )!@#&  for k, v in pairs( objects ) do!@#&    for i = 1, v[ 2 ] do!@#&      term.setCursorPos( v[1], maxy - i - 1 )!@#&      term.write( \" \" )!@#&    end!@#&  end!@#&end!@#&!@#&local function gameOver()!@#&  local text = \"GAME OVER\"!@#&  term.setCursorPos( math.ceil( (maxx-#text)/2 ), maxy/2 )!@#&  term.write( text )!@#&  os.pullEvent( \"key\" )!@#&  term.setBackgroundColor( colors.black )!@#&  term.clear()!@#&  term.setCursorPos( 1, 1 )!@#&  error()!@#&end!@#&!@#&!@#&local function draw()!@#&  term.setBackgroundColor( colors.black )!@#&  for i = 2, 9 do!@#&  	term.setCursorPos( 1, maxy - i )!@#&  	term.clearLine()!@#&  end!@#&  drawObjects()!@#&  drawPlayer()!@#&  drawScore()!@#&end!@#&!@#&term.setBackgroundColor( colors.black )!@#&term.clear()!@#&drawField()!@#&!@#&repeat!@#&	newObject()!@#&until #objects == 5!@#&!@#&draw()!@#&sleep( 1 )!@#&local id = os.startTimer( 0.1 )!@#&local isJumping = false!@#&local doubleJump = false!@#&local jumpValue = 0!@#&!@#&while true do!@#&  local event = {os.pullEvent()}!@#&  if event[ 1 ] == \"timer\" and event[ 2 ] == id then!@#&    id = os.startTimer( 0.1 - (score/20000) )!@#&    score = score + 1!@#&    for k, v in ipairs( objects ) do!@#&      objects[ k ][ 1 ] = v[ 1 ] - 1!@#&      if objects[ k ][1] < 1 then!@#&        table.remove( objects, k )!@#&        newObject()!@#&      elseif objects[ k ][ 1 ] == 2 then!@#&        if math.ceil( playery - 1 ) <= objects[ k ][ 2 ] then!@#&          draw()!@#&          gameOver()!@#&        end!@#&      end!@#&    end!@#&    if isJumping then!@#&      playery = playery + jumpValue!@#&      jumpValue = jumpValue * 0.7!@#&    end!@#&    playery = math.max( 2, playery - 1 )!@#&    if playery < 2.5 then!@#&      jumpValue = 2!@#&      isJumping = false!@#&      doubleJump = false!@#&    end!@#&    draw()!@#&  elseif event[ 1 ] == \"key\" and event[ 2 ] == keys.space then!@#&    if isJumping and not doubleJump then!@#&      doubleJump = true!@#&      jumpValue = jumpValue + 1.5!@#&    elseif not isJumping then!@#&      isJumping = true!@#&      jumpValue = 2.5!@#&    end!@#&  end!@#&end",["saveFile.sav"]="",["userinfo"]={["test1"]="test!@#&Employee!@#&0!@#&never!@#&0",["roosterhat"]="derp!@#&Owner!@#&19.0!@#&12:22 PM!@#&0",["erik"]="ostlind!@#&Employee!@#&7.0!@#&2:18 PM!@#&0",["settings"]="back!@#&unlocked!@#&0!@#&false!@#&false!@#&false",["firsttime"]="first time",["test"]="test!@#&Admin!@#&0!@#&never!@#&0",},["page3"]="333333333000033333333333333333333333333433444444444!@#&330000330000003333333333333300003330033333344444444!@#&300000000000000003333333000000000000000004334444444!@#&300000000000000003333330000000000000000000333444444!@#&300000000000000033333333000000000000000000433334444!@#&300000030000000333333333330000300000333333333433344!@#&333000333333333333333333333333333333333333333334333!@#&333333333333333333333333333333333333333333333333333!@#&333333333333333333333333333333333333333333333333333!@#&333333333333333333333333333333333333333333333333333!@#&333333333333333333333333333333333333333333333333333!@#&333333333333333333333333333333333333333333333333333!@#&333333333333333333333333333333333333333333333333333!@#&333333333333333333333333333333333333333333333333333!@#&333333333333333333333333333333333333333333333333333!@#&333333333333333333333333333333333333333333333333333!@#&333333333333333333333333333333333333333333333333333!@#&333333333333333333333333333333333333333333333333333!@#&333333333333333333333333333333333333333333333333333",["prot"]="function initVariables()!@#&	w,h =term.getSize()  -- 51,  19!@#&	shipYPos = 10!@#&	shipXPos = 24!@#&	shipFacingRight=true!@#&	pressedKey=0!@#&	killedState = false!@#&	lives=3!@#&	score =0!@#&	aliens=10!@#&	killedDelay=0!@#&	running=true!@#&	moveLeft=false!@#&	moveRight=true!@#&	moveUp=false!@#&	moveDown=false!@#&	human1x = 3!@#&	human1y = 18!@#&	human2x = 15!@#&	human2y = 18!@#&	human3x = 40!@#&	human3y = 18!@#&	human4x = 60!@#&	human4y = 18!@#&	human5x = 70!@#&	human5y = 18!@#&	human6x = 85!@#&	human6y = 18!@#&	human1 = true!@#&	human2 = true !@#&	human3 = true !@#&	human4 = true !@#&	human5 = true !@#&	human6 = true !@#&	human1Abducted=false!@#&	human2Abducted=false!@#&	human3Abducted=false!@#&	human4Abducted=false!@#&	human5Abducted=false!@#&	human6Abducted=false!@#&	humansLeft=6!@#&	bulletXPos=0!@#&	bulletYPos=0!@#&	bulletState=false!@#&	bulletGoingRight=true!@#&	alien1 = false!@#&	alien1y = 2!@#&	alien1x =84!@#&	alien1Abduct=false!@#&	alien1Carry=false!@#&	alien1Step=2!@#&	stepValue=0.1 --0.1!@#&end!@#&!@#&function clear()!@#&	term.clear()!@#&	term.setCursorPos(1,1)!@#&	term.setBackgroundColour(colours.black)!@#&	term.setTextColour(colours.white)!@#&end!@#&!@#&function drawGrass()!@#&	term.setCursorPos(1,h)!@#&	term.setBackgroundColour(colours.green)!@#&	write(string.rep(\" \",w))!@#&	term.setCursorPos(1,1)!@#&	term.setBackgroundColour(colours.black)!@#&end!@#&!@#&function drawShip(yPos)!@#&	if shipFacingRight==true then!@#&		term.setCursorPos(24,yPos)!@#&		term.setBackgroundColour(colours.orange)!@#&		print(\" \")!@#&		term.setCursorPos(25,yPos)!@#&		term.setBackgroundColour(colours.white)!@#&		print(\"  \")!@#&	else!@#&		term.setCursorPos(26,yPos)!@#&		term.setBackgroundColour(colours.orange)!@#&		print(\" \")!@#&		term.setCursorPos(24,yPos)!@#&		term.setBackgroundColour(colours.white)!@#&		print(\"  \")!@#&	end!@#&	term.setBackgroundColour(colours.black)!@#&end!@#&!@#&function delShip(yPos)!@#&	term.setCursorPos(24,yPos)!@#&	term.setBackgroundColour(colours.black)!@#&	print(\"   \")!@#&end!@#&!@#&function drawAliens()!@#&	term.setBackgroundColour(colours.cyan)!@#&	if alien1==true then!@#&		term.setCursorPos(alien1x,alien1y)!@#&		write(\"   \")!@#&	end!@#&	term.setBackgroundColour(colours.black)!@#&end!@#&!@#&function delAliens()!@#&	term.setBackgroundColour(colours.black)!@#&	if alien1==true then!@#&		term.setCursorPos(alien1x,alien1y)!@#&		write(\"   \")!@#&	end!@#&end!@#&!@#&function drawHumans()!@#&	term.setBackgroundColour(colours.pink)!@#&	if human1==true then!@#&		term.setCursorPos(human1x,human1y)!@#&		write(\" \")!@#&	end!@#&	if human2==true then!@#&		term.setCursorPos(human2x,human2y)!@#&		write(\" \")!@#&	end!@#&	if human3==true then!@#&		term.setCursorPos(human3x,human3y)!@#&		write(\" \")!@#&	end!@#&	if human4==true then!@#&		term.setCursorPos(human4x,human4y)!@#&		write(\" \")!@#&	end!@#&	if human5==true then!@#&		term.setCursorPos(human5x,human5y)!@#&		write(\" \")!@#&	end!@#&	if human6==true then!@#&		term.setCursorPos(human6x,human6y)!@#&		write(\" \")!@#&	end!@#&	term.setBackgroundColour(colours.green)!@#&	term.setCursorPos(1,19)!@#&	write(\"   \")!@#&	term.setBackgroundColour(colours.black)!@#&end!@#&!@#&function delHumans()!@#&	term.setBackgroundColour(colours.black)!@#&	if human1==true then!@#&		term.setCursorPos(human1x,human1y)!@#&		write(\" \")!@#&	end!@#&	if human2==true then!@#&		term.setCursorPos(human2x,human2y)!@#&		write(\" \")!@#&	end!@#&	if human3==true then!@#&		term.setCursorPos(human3x,human3y)!@#&		write(\" \")!@#&	end!@#&	if human4==true then!@#&		term.setCursorPos(human4x,human4y)!@#&		write(\" \")!@#&	end!@#&	if human5==true then!@#&		term.setCursorPos(human5x,human5y)!@#&		write(\" \")!@#&	end!@#&	if human6==true then!@#&		term.setCursorPos(human6x,human6y)!@#&		write(\" \")!@#&	end!@#&end!@#&!@#&function drawBullet()!@#&	term.setBackgroundColour(colours.yellow)!@#&	term.setCursorPos(bulletXPos,bulletYPos)!@#&	write(\" \")!@#&	term.setBackgroundColour(colours.black)!@#&end!@#&!@#&function delBullet()!@#&	term.setBackgroundColour(colours.black)!@#&	term.setCursorPos(bulletXPos,bulletYPos)!@#&	write(\" \")!@#&end!@#&!@#&function newHighScoreTable()!@#&	name1=\"Dan\" score1=1000!@#&	name2=\"Fred\" score2=800!@#&	name3=\"Fred\" score3=600!@#&	name4=\"Fred\" score4=400!@#&	name5=\"Fred\" score5=200!@#&	local highScoreTable = {{name1, score1}, {name2,score2}, {name3,score3}, {name4,score4}, {name5,score5}}!@#&	local newHighScoreStr = textutils.serialize(highScoreTable)!@#&	--print(\"new table \"..newHighScoreStr)-- debug!@#&	fs.makeDir(\"protectordata\")!@#&	local handle = fs.open(\"protectordata/pdata\",\"w\")!@#&	handle.write(newHighScoreStr)!@#&	handle.close()!@#&end!@#&!@#&function printCent(xpos,text)!@#&	local ypos = w/2 - (string.len(text)/2)!@#&	term.setCursorPos(ypos,xpos)!@#&	write(text)!@#&end!@#&!@#&function introHighScoreTable()!@#&	term.clear()!@#&	term.setCursorPos(35,1) write(\"SPACE WHEN READY\")!@#&	if fs.exists(\"protectordata\")==false then!@#&		newHighScoreTable()!@#&	end!@#&	local handle = fs.open(\"protectordata/pdata\",\"r\")!@#&	local dataStr = handle.readAll()!@#&	handle.close()!@#&	--print(\"dataStr \"..dataStr)!@#&	highScoreData = textutils.unserialize(dataStr)!@#&	--print(highScoreData[2])!@#&	name1 = highScoreData[1][1] score1 = highScoreData[1][2]!@#&	name2 = highScoreData[2][1] score2 = highScoreData[2][2]!@#&	name3 = highScoreData[3][1] score3 = highScoreData[3][2]!@#&	name4 = highScoreData[4][1] score4 = highScoreData[4][2]!@#&	name5 = highScoreData[5][1] score5 = highScoreData[5][2]!@#&	term.setTextColour(colours.yellow)!@#&	printCent(5,\"HIGH SCORES\")!@#&	term.setTextColour(colours.white)!@#&	printCent(7,name1..\" \"..score1)!@#&	printCent(8,name2..\" \"..score2)!@#&	printCent(9,name3..\" \"..score3)!@#&	printCent(10,name4..\" \"..score4)!@#&	printCent(11,name5..\" \"..score5)!@#&end!@#&!@#&!@#&function printScore()!@#&	term.clear()!@#&	term.setTextColour(colours.yellow)!@#&	printCent(3,\"HIGH SCORES\")!@#&	term.setTextColour(colours.white)!@#&	printCent(5,name1..\" \"..score1)!@#&	printCent(6,name2..\" \"..score2)!@#&	printCent(7,name3..\" \"..score3)!@#&	printCent(8,name4..\" \"..score4)!@#&	printCent(9,name5..\" \"..score5)!@#&	playAgain()!@#&end!@#&!@#&function rewriteScores()!@#&	if newScore > score1 then !@#&		name5=name4 score5=score4!@#&		name4=name3 score4=score3!@#&		name3=name2 score3=score2!@#&		name2=name1 score2=score1!@#&		name1= newName score1=newScore!@#&	elseif newScore > score2 then!@#&		name5=name4 score5=score4!@#&		name4=name3 score4=score3!@#&		name3=name2 score3=score2!@#&		name2=newName score2=newScore!@#&	elseif newScore > score3 then!@#&		name5=name4 score5=score4!@#&		name4=name3 score4=score3!@#&		name3=newName score3=newScore!@#&	elseif newScore > score4 then!@#&		name5=name4 score5=score4!@#&		name4=newName score4=newScore!@#&	elseif newScore > score5 then!@#&		name5=newName score5=newScore	!@#&	end!@#&	local highScoreTable = {{name1, score1}, {name2,score2}, {name3,score3}, {name4,score4}, {name5,score5}}!@#&	local newHighScoreStr = textutils.serialize(highScoreTable)!@#&	local handle = fs.open(\"protectordata/pdata\",\"w\")!@#&	handle.write(newHighScoreStr)!@#&	handle.close()!@#&end!@#&!@#&function newHighScoreObtained()!@#&	clear()!@#&	term.setTextColour(colours.yellow)!@#&	printCent(8,\"CONGRATULATIONS\")!@#&	term.setTextColour(colours.white)!@#&	printCent(10,\"You have a new high score!\")!@#&	printCent(12,\"Enter your name: \")!@#&	printCent(14,\"  \")!@#&	local newNameStr = \"\"!@#&	local newNameStrLen = 0!@#&	while true do!@#&		local event,p1,p2,p3 = os.pullEvent()!@#&		if event==\"char\" and newNameStrLen < 9 then!@#&			newNameStr=newNameStr..p1!@#&			newNameStrLen=newNameStrLen+1!@#&			printCent(14,newNameStr..\" \")!@#&			!@#&		elseif event==\"key\" and p1 == 14 and newNameStrLen>0 then!@#&			newNameStr=string.sub(newNameStr,1,string.len(newNameStr)-1)!@#&			newNameStrLen=newNameStrLen-1!@#&			term.setCursorPos(1,14)!@#&			write(string.rep(\" \",w))!@#&			printCent(14,newNameStr..\" \")!@#&		elseif event==\"key\" and p1== 28 then!@#&			newName = newNameStr!@#&			newScore = score!@#&			rewriteScores()!@#&			printScore()!@#&		end!@#&	end!@#&	!@#&!@#&	!@#&end!@#&!@#&function highScore()!@#&	if fs.exists(\"protectordata\")==false then!@#&		newHighScoreTable()!@#&	end!@#&	local handle = fs.open(\"protectordata/pdata\",\"r\")!@#&	local dataStr = handle.readAll()!@#&	handle.close()!@#&	--print(\"dataStr \"..dataStr)!@#&	highScoreData = textutils.unserialize(dataStr)!@#&	--print(highScoreData[2])!@#&	name1 = highScoreData[1][1] score1 = highScoreData[1][2]!@#&	name2 = highScoreData[2][1] score2 = highScoreData[2][2]!@#&	name3 = highScoreData[3][1] score3 = highScoreData[3][2]!@#&	name4 = highScoreData[4][1] score4 = highScoreData[4][2]!@#&	name5 = highScoreData[5][1] score5 = highScoreData[5][2]!@#&	if score>score5 then!@#&		newHighScoreObtained()!@#&	end!@#&	printScore()!@#&	!@#&	!@#&end!@#&!@#&!@#&!@#&!@#&function gameOver(gameOverMsg)!@#&	clear()!@#&	delShip(shipYPos)!@#&	term.setCursorPos(40,1)!@#&	write(\"Lives: \"..lives..\"  \")!@#&	term.setCursorPos(5,1)!@#&	if score<0 then score=0 end!@#&	write(\"Score: \"..score..\"  \")!@#&	term.setTextColour(colours.red)!@#&	term.setCursorPos( (w/2)-5 , h/2 -1)!@#&	print(\"GAME OVER\")!@#&	term.setCursorPos( (w/2)-(string.len(gameOverMsg)/2) , (h/2)+1)!@#&	print(gameOverMsg)!@#&	term.setTextColour(colours.white)!@#&	running=false!@#&	sleep(1.5)!@#&	highScore()-- new!@#&	--playAgain !@#&end!@#&!@#&function playAgain()!@#&	sleep(1)!@#&	printCent(12,\"Play again (Y or N)\")!@#&	!@#&	while true do!@#&		local event,p1,p2,p3 = os.pullEvent()!@#&		if event==\"char\" then!@#&			if string.lower(p1)==\"y\" then !@#&				runGame()!@#&			elseif string.lower(p1)==\"n\" then !@#&				os.shutdown()!@#&			end!@#&		end!@#&	end!@#&	!@#&end!@#&!@#&function killPlayer()!@#&	moveLeft=false!@#&	moveRight=false!@#&	moveUp=false!@#&	moveDown=false!@#&	delShip(shipYPos)!@#&	lives=lives-1!@#&	if lives==0 then !@#&		gameOver(\"OUT OF LIVES\")!@#&	end!@#&	killedState=true!@#&	--killedStr=\"true\"!@#&end!@#&!@#&function left()!@#&	delHumans()!@#&	delAliens()!@#&	human1x=human1x+1!@#&	human2x=human2x+1!@#&	human3x=human3x+1!@#&	human4x=human4x+1!@#&	human5x=human5x+1!@#&	human6x=human6x+1!@#&	alien1x=alien1x+1!@#&	if human1x>100 then human1x=0 end!@#&	if human2x>100 then human2x=0 end!@#&	if human3x>100 then human3x=0 end!@#&	if human4x>100 then human4x=0 end!@#&	if human5x>100 then human5x=0 end!@#&	if human6x>100 then human6x=0 end!@#&	if alien1x>100 then alien1x=0 end!@#&	shipFacingRight=false!@#&	checkShipCollision()!@#&	drawShip(shipYPos)!@#&	drawHumans()!@#&	drawAliens()!@#&	drawBorder()!@#&	moveRight=false!@#&end!@#&!@#&function right()!@#&	delHumans()!@#&	delAliens()!@#&	human1x=human1x-1!@#&	human2x=human2x-1!@#&	human3x=human3x-1!@#&	human4x=human4x-1!@#&	human5x=human5x-1!@#&	human6x=human6x-1!@#&	alien1x=alien1x-1!@#&	if human1x<1 then human1x=100 end!@#&	if human2x<1 then human2x=100 end!@#&	if human3x<1 then human3x=100 end!@#&	if human4x<1 then human4x=100 end!@#&	if human5x<1 then human5x=100 end!@#&	if human6x<1 then human6x=100 end!@#&	if alien1x<1 then alien1x=100 end!@#&	shipFacingRight=true!@#&	checkShipCollision()!@#&	drawShip(shipYPos)!@#&	drawHumans()!@#&	drawAliens()!@#&	drawBorder()!@#&	moveLeft=false!@#&end!@#&!@#&function up()!@#&	if shipYPos > 2 then !@#&		delShip(shipYPos)!@#&		shipYPos=shipYPos-1!@#&		checkShipCollision()!@#&		drawShip(shipYPos)!@#&	end!@#&	moveUp=false!@#&	moveDown=false!@#&end!@#&!@#&function down()!@#&	if shipYPos<17 then !@#&		delShip(shipYPos)!@#&		shipYPos=shipYPos+1!@#&		checkShipCollision()!@#&		drawShip(shipYPos)!@#&	end!@#&	moveDown=false!@#&	moveUp=false!@#&end!@#&!@#&function checkShipCollision()!@#&	if killedState==false then!@#&		if shipYPos == alien1y and alien1== true then!@#&			if alien1x >= 22 and alien1x <= 26 then!@#&				alien1Hit()!@#&				killPlayer()!@#&			end!@#&		elseif human1==true and human1y==shipYPos then!@#&			if human1x >=24 and human1x <= 26 then!@#&				human1=false!@#&				humanHitRoutine()!@#&			end!@#&		elseif human2==true and human2y==shipYPos then!@#&			if human2x >=24 and human2x <= 26 then!@#&				human2=false!@#&				humanHitRoutine()!@#&			end!@#&		elseif human3==true and human3y==shipYPos then!@#&			if human3x >=24 and human3x <= 26 then!@#&				human3=false!@#&				humanHitRoutine()!@#&			end	!@#&		elseif human4==true and human4y==shipYPos then!@#&			if human4x >=24 and human4x <= 26 then!@#&				human4=false!@#&				humanHitRoutine()!@#&			end!@#&		elseif human5==true and human5y==shipYPos then!@#&			if human5x >=24 and human5x <= 26 then!@#&				human5=false!@#&				humanHitRoutine()!@#&			end!@#&		elseif human6==true and human6y==shipYPos then!@#&			if human6x >=24 and human6x <= 26 then!@#&				human6=false!@#&				humanHitRoutine()!@#&			end	!@#&		end!@#&	end!@#&end!@#&!@#&function alienGen()!@#&	if alien1==false then!@#&		local alienChance= math.random(1,10)!@#&		if alienChance==1 then!@#&			if human1==true then!@#&				alien1 = true!@#&				alien1y = 2!@#&				alien1x = human1x - 1!@#&			end!@#&		elseif alienChance == 2 then!@#&			if human2==true then!@#&				alien1 = true!@#&				alien1y=2!@#&				alien1x = human2x-1!@#&			end!@#&		elseif alienChance == 3 then!@#&			if human3==true then!@#&				alien1 = true!@#&				alien1y=2!@#&				alien1x = human3x-1!@#&			end!@#&		elseif alienChance == 4 then!@#&			if human4==true then!@#&				alien1 = true!@#&				alien1y=2!@#&				alien1x = human4x-1!@#&			end!@#&		elseif alienChance == 5 then!@#&			if human5==true then!@#&				alien1 = true!@#&				alien1y=2!@#&				alien1x = human5x-1!@#&			end!@#&		elseif alienChance == 6 then!@#&			if human6==true then!@#&				alien1 = true!@#&				alien1y=2!@#&				alien1x = human6x-1!@#&			end!@#&		end!@#&	end!@#&end!@#&!@#&function alienDown()!@#&	if alien1==true and alien1Abduct==false and alien1y<19 then!@#&		alien1Step=alien1Step+stepValue!@#&		alien1y=math.floor(alien1Step)!@#&		if alien1==true and alien1Abduct==false and alien1y==17 then!@#&			alien1Abduct=true!@#&			alien1Carry=true!@#&			alien1Step=17!@#&		end	!@#&	end!@#&end!@#&!@#&function alienRoutine()!@#&	alien1=false!@#&	alien1Step=2!@#&	if alien1Carry==true then!@#&		score= score -50!@#&		humansLeft=humansLeft-1!@#&	end!@#&	alien1Abduct=false!@#&	alien1Carry=false!@#&	if humansLeft==0 then !@#&		gameOver(\"NO HUMANS LEFT\")!@#&	end!@#&	!@#&end!@#&!@#&function alienUp()!@#&	if alien1==true and alien1Abduct==true then!@#&		if alien1x+1 == human1x then !@#&			human1Abducted=true!@#&			alien1Step=alien1Step-stepValue!@#&			alien1y=math.floor(alien1Step)!@#&			human1y=math.floor(alien1Step)+1!@#&			human1x=alien1x+1!@#&			if human1y<=2 then !@#&				alienRoutine()!@#&				human1=false!@#&			end!@#&		elseif alien1x+1 == human2x then !@#&			human2Abducted=true!@#&			alien1Step=alien1Step-stepValue!@#&			alien1y=math.floor(alien1Step)!@#&			human2y=math.floor(alien1Step)+1!@#&			human2x=alien1x+1!@#&			if human2y<=2 then !@#&				alienRoutine()!@#&				human2=false!@#&			end!@#&		elseif alien1x+1 == human3x then !@#&			human3Abducted=true!@#&			alien1Step=alien1Step-stepValue!@#&			alien1y=math.floor(alien1Step)!@#&			human3y=math.floor(alien1Step)+1!@#&			human3x=alien1x+1!@#&			if human3y<=2 then !@#&				alienRoutine()!@#&				human3=false!@#&			end!@#&		elseif alien1x+1 == human4x then !@#&			human4Abducted=true!@#&			alien1Step=alien1Step-stepValue!@#&			alien1y=math.floor(alien1Step)!@#&			human4y=math.floor(alien1Step)+1!@#&			human4x=alien1x+1!@#&			if human4y<=2 then !@#&				alienRoutine()!@#&				human4=false!@#&			end!@#&		elseif alien1x+1 == human5x then !@#&			human5Abducted=true!@#&			alien1Step=alien1Step-stepValue!@#&			alien1y=math.floor(alien1Step)!@#&			human5y=math.floor(alien1Step)+1!@#&			human5x=alien1x+1!@#&			if human5y<=2 then !@#&				alienRoutine()!@#&				human5=false!@#&			end!@#&		elseif alien1x+1 == human6x then !@#&			human6Abducted=true!@#&			alien1Step=alien1Step-stepValue!@#&			alien1y=math.floor(alien1Step)!@#&			human6y=math.floor(alien1Step)+1!@#&			human6x=alien1x+1!@#&			if human6y<=2 then !@#&				alienRoutine()!@#&				human6=false!@#&			end	!@#&		end!@#&	end!@#&	if alien1==false then alienGen() end!@#&end!@#&!@#&function keyPress()  -- 200 UP, 208 DOWN, 203 LEFT,  205 RIGHT,  57 SPACE, 16 Q!@#&		if pressedKey==200 or pressedKey == 17 then -- up!@#&			moveUp=true!@#&			moveDown=false!@#&		elseif pressedKey==208 or pressedKey == 31 then -- DOWN!@#&			moveDown=true!@#&			moveUp=false!@#&		elseif pressedKey==203 or pressedKey == 30 then -- left!@#&			moveLeft=true	!@#&			moveRight=false!@#&		elseif pressedKey==205 or pressedKey == 32 then -- right!@#&			moveRight=true!@#&			moveLeft=false!@#&		elseif pressedKey==57 then -- space!@#&				if bulletState==false then!@#&					bulletYPos=shipYPos!@#&					bulletState=true!@#&					if shipFacingRight==true then !@#&						bulletXPos=shipXPos+3!@#&						bulletGoingRight=true!@#&					else!@#&						bulletXPos=shipXPos-1!@#&						bulletGoingRight=false!@#&					end!@#&				end!@#&		elseif pressedKey==25 then -- q  (use 25 if p for quit)!@#&				gameOver(\"YOU QUIT\")!@#&		end!@#&		!@#&		--term.setCursorPos(30,1)!@#&		--write(pressedKey..\"  \")!@#&end!@#&!@#&function removeBullet()!@#&	if bulletGoingRight==true then !@#&		bulletXPos = 60!@#&	else!@#&		bulletXPos = -10!@#&	end!@#&end!@#&!@#&function alien1Hit()!@#&	delAliens()!@#&	alien1=false!@#&	score=score+20!@#&	alien1Step=2!@#&	alien1Abduct=false!@#&	removeBullet()!@#&	drawAliens()!@#&end!@#&!@#&function humanHitRoutine()!@#&	score=score-50!@#&	humansLeft=humansLeft-1!@#&	if humansLeft==0 then !@#&		gameOver(\"NO HUMANS LEFT\")!@#&	end!@#&	if alien1Carry==true then alien1Carry=false end!@#&end!@#&!@#&!@#&function checkBulletCollision()!@#&	if alien1 == true and bulletYPos == alien1y then !@#&		if bulletXPos >= alien1x  and bulletXPos <= alien1x + 3 then !@#&			alien1Hit() !@#&		end!@#&	end!@#&	if human1 == true and bulletYPos == human1y and bulletXPos == human1x then human1=false humanHitRoutine()  end!@#&	if human2 == true and bulletYPos == human2y and bulletXPos == human2x then human2=false humanHitRoutine()  end!@#&	if human3 == true and bulletYPos == human3y and bulletXPos == human3x then human3=false humanHitRoutine()  end!@#&	if human4 == true and bulletYPos == human4y and bulletXPos == human4x then human4=false humanHitRoutine()  end!@#&	if human5 == true and bulletYPos == human5y and bulletXPos == human5x then human5=false humanHitRoutine()  end!@#&	if human6 == true and bulletYPos == human6y and bulletXPos == human6x then human6=false humanHitRoutine()  end!@#&end!@#&!@#&function drawBorder()!@#&	term.setBackgroundColour(colours.black)!@#&	for i=1,h-2 do!@#&		term.setCursorPos(1,i+1)!@#&		write(\" \")!@#&		term.setCursorPos(w,i+1)!@#&		write(\" \")!@#&	end!@#&end!@#&!@#&function dropHumans()!@#&	if alien1Abduct==false then!@#&		if human1y<18 then human1y = human1y+1 end!@#&		if human2y<18 then human2y = human2y+1 end!@#&		if human3y<18 then human3y = human3y+1 end!@#&		if human4y<18 then human4y = human4y+1 end!@#&		if human5y<18 then human5y = human5y+1 end!@#&		if human6y<18 then human6y = human6y+1 end!@#&	end!@#&end!@#&!@#&!@#&function gameControl()!@#&!@#&	gameTimer=os.startTimer(0.1)!@#&		!@#&	while running do!@#&		local event,p1,p2,p3 = os.pullEvent()!@#&		if score<0 then score=0 end!@#&		term.setCursorPos(1,1)!@#&		term.setBackgroundColour(colours.yellow)!@#&		write(string.rep(\" \",w))!@#&	!@#&	!@#&		term.setTextColour(colours.red)!@#&		term.setCursorPos(5,1)!@#&		write(\"Score: \"..score..\"  \")!@#&		term.setCursorPos(20,1)!@#&		write(\"Humans Left: \"..humansLeft..\"  \")!@#&		term.setCursorPos(40,1)!@#&		write(\"Lives: \"..lives..\"  \")!@#&	!@#&		term.setBackgroundColour(colours.black)!@#&		term.setTextColour(colours.white)!@#&		!@#&		local newStepValue = (score+0.1)/1000!@#&		if newStepValue > stepValue then stepValue= newStepValue end!@#&		if stepValue>0.4 then stepValue=0.4 end!@#&		!@#&		!@#&		--[[DEBUG!@#&		term.setCursorPos(2,2)!@#&		write(\"human1x \"..human1x..\"  \")!@#&		term.setCursorPos(2,3)!@#&		write(\"human2x \"..human2x..\"  \")!@#&		term.setCursorPos(2,4)!@#&		write(\"human3x \"..human3x..\"  \")!@#&		term.setCursorPos(2,5)!@#&		write(\"human4x \"..human4x..\"  \")!@#&		term.setCursorPos(2,6)!@#&		write(\"human5x \"..human5x..\"  \")!@#&		term.setCursorPos(2,7)!@#&		write(\"human6x \"..human6x..\"  \")!@#&		]]--!@#&		!@#&				!@#&		if event==\"timer\" and gameTimer == p1 then!@#&			if killedState==true then !@#&				delShip(shipYPos)!@#&				delHumans()!@#&				dropHumans()!@#&				drawHumans()!@#&				killedDelay = killedDelay + 1!@#&				if killedDelay>20 then!@#&					shipYPos = 10!@#&					killedState = false!@#&					term.setBackgroundColour(colours.black)!@#&					for i = 2, h-2 do!@#&						term.setCursorPos(1,i)!@#&						write(string.rep(\" \",w))!@#&					end!@#&					drawGrass()!@#&					if shipFacingRight==true then!@#&						moveRight=true!@#&						moveLeft=false!@#&					else!@#&						moveLeft=true!@#&						moveRight=false!@#&					end !@#&					killedDelay=0!@#&				end!@#&			else!@#&				!@#&				--alienGen()!@#&				drawShip(shipYPos)!@#&				delAliens()!@#&				!@#&				delHumans()!@#&				dropHumans()!@#&				alienDown()!@#&				alienUp()!@#&				drawAliens()!@#&				drawHumans()!@#&				drawBorder()!@#&			end!@#&			!@#&			if bulletState==true then!@#&				if bulletGoingRight==true then!@#&					delBullet()!@#&					bulletXPos=bulletXPos+1!@#&					checkBulletCollision()!@#&					if bulletXPos>45 then!@#&						bulletState=false!@#&					else!@#&						if killedState==false then drawBullet() end!@#&					end!@#&				else!@#&					delBullet()!@#&					bulletXPos=bulletXPos-1!@#&					checkBulletCollision()!@#&					if bulletXPos<6 then!@#&						bulletState=false!@#&					else!@#&						if killedState==false then drawBullet() end!@#&					end!@#&				end!@#&			end!@#&			!@#&			if moveLeft==true then!@#&				left()!@#&			end!@#&			if moveRight==true then!@#&				right()!@#&			end!@#&			if moveUp==true then!@#&				up()!@#&			end!@#&			if moveDown==true then!@#&				down()!@#&			end!@#&			!@#&			gameTimer=os.startTimer(0.1)!@#&		!@#&		elseif event==\"key\" and killedState==false then !@#&			pressedKey=p1!@#&			keyPress()!@#&		end!@#&		!@#&	end !@#&	!@#&end!@#&!@#&function runGame()!@#&	initVariables()!@#&	clear()!@#&	drawGrass()!@#&	drawHumans()!@#&	alienGen()!@#&	gameControl()!@#&end!@#&!@#&!@#&function pix(xCo,yCo,text,col)!@#&	if col== nil then term.setBackgroundColour(colours.black) !@#&	elseif col ==\"white\" then term.setBackgroundColour(colours.white)!@#&	elseif col ==\"green\" then term.setBackgroundColour(colours.green)!@#&	elseif col ==\"pink\" then term.setBackgroundColour(colours.pink)!@#&	elseif col ==\"orange\" then term.setBackgroundColour(colours.orange)!@#&	elseif col ==\"cyan\" then term.setBackgroundColour(colours.cyan)!@#&	elseif col ==\"yellow\" then term.setBackgroundColour(colours.yellow)!@#&	end!@#&	term.setCursorPos(xCo,yCo)!@#&	write(text)!@#&end!@#&!@#&function drawHumanPix()!@#&	drawGrass()!@#&	pix(23,humanPixY,\" \",\"pink\")!@#&	pix(27,humanPixY,\" \",\"pink\")!@#&	pix(24,humanPixY-1,\" \",\"pink\")!@#&	pix(26,humanPixY-1,\" \",\"pink\")!@#&	pix(25,humanPixY-2,\" \",\"pink\")!@#&	pix(23,humanPixY-3,\"     \",\"pink\")!@#&	pix(25,humanPixY-4,\" \",\"pink\")!@#&	pix(24,humanPixY-5,\"   \",\"pink\")!@#&	pix(24,humanPixY-6,\"   \",\"pink\")!@#&end!@#&!@#&function delHumanPix()!@#&	pix(23,humanPixY,\" \")!@#&	pix(27,humanPixY,\" \")!@#&	pix(24,humanPixY-1,\" \")!@#&	pix(26,humanPixY-1,\" \")!@#&	pix(25,humanPixY-2,\" \")!@#&	pix(23,humanPixY-3,\"     \")!@#&	pix(25,humanPixY-4,\" \")!@#&	pix(24,humanPixY-5,\"   \")!@#&	pix(24,humanPixY-6,\"   \")!@#&end!@#&!@#&function drawAlienPix()!@#&	pix(19,alienPixY,\"             \",\"cyan\")!@#&	pix(17,alienPixY+1,\"                 \",\"cyan\")!@#&	pix(19,alienPixY+2,\"             \",\"cyan\")!@#&end!@#&!@#&function delAlienPix()!@#&	pix(19,alienPixY,\"             \")!@#&	pix(17,alienPixY+1,\"                 \")!@#&	pix(19,alienPixY+2,\"             \")!@#&end!@#&!@#&function drawShipPix()!@#&	pix(shipPixX+3,3,\"  \",\"white\")!@#&	pix(shipPixX+3,4,\"   \",\"white\")!@#&	pix(shipPixX+3,5,\"           \",\"white\")!@#&	pix(shipPixX+3,6,\"               \",\"white\")!@#&	pix(shipPixX+3,7,\"                 \",\"white\")!@#&	pix(shipPixX+2,5,\" \",\"orange\")!@#&	pix(shipPixX+2,6,\" \",\"yellow\")!@#&	pix(shipPixX+2,7,\" \",\"orange\")!@#&	pix(shipPixX,6,\"  \",\"orange\")!@#&	pix(shipPixX+14,5,\"  \",\"cyan\")!@#&end!@#&!@#&function delShipPix()!@#&	pix(shipPixX+3,3,\"  \")!@#&	pix(shipPixX+3,4,\"   \")!@#&	pix(shipPixX+3,5,\"           \")!@#&	pix(shipPixX+3,6,\"               \")!@#&	pix(shipPixX+3,7,\"                 \")!@#&	pix(shipPixX+2,5,\" \")!@#&	pix(shipPixX+2,6,\" \")!@#&	pix(shipPixX+2,7,\" \")!@#&	pix(shipPixX,6,\"  \")!@#&	pix(shipPixX+14,5,\"  \")!@#&end!@#&!@#&function line1()!@#&	pix(8,4,\"   \",\"white\")!@#&	pix(12,4,\"  \",\"white\")!@#&	pix(16,4,\"   \",\"white\")!@#&	pix(20,4,\"   \",\"white\")!@#&	pix(24,4,\"   \",\"white\")!@#&	pix(28,4,\"   \",\"white\")!@#&	pix(32,4,\"   \",\"white\")!@#&	pix(36,4,\"   \",\"white\")!@#&	pix(40,4,\"  \",\"white\")!@#&end!@#&!@#&function line2()!@#&	pix(8,5,\" \",\"white\")!@#&	pix(10,5,\" \",\"white\")!@#&	pix(12,5,\" \",\"white\")!@#&	pix(14,5,\" \",\"white\")!@#&	pix(16,5,\" \",\"white\")!@#&	pix(18,5,\" \",\"white\")!@#&	pix(21,5,\" \",\"white\")!@#&	pix(24,5,\" \",\"white\")!@#&	pix(28,5,\" \",\"white\")!@#&	pix(33,5,\" \",\"white\")!@#&	pix(36,5,\" \",\"white\")!@#&	pix(38,5,\" \",\"white\")!@#&	pix(40,5,\" \",\"white\")!@#&	pix(42,5,\" \",\"white\")!@#&	!@#&end!@#&!@#&function line3()!@#&	pix(8,6,\"   \",\"white\")!@#&	pix(12,6,\"   \",\"white\")!@#&	pix(16,6,\" \",\"white\")!@#&	pix(18,6,\" \",\"white\")!@#&	pix(21,6,\" \",\"white\")!@#&	pix(24,6,\"   \",\"white\")!@#&	pix(28,6,\" \",\"white\")!@#&	pix(33,6,\" \",\"white\")!@#&	pix(36,6,\" \",\"white\")!@#&	pix(38,6,\" \",\"white\")!@#&	pix(40,6,\"   \",\"white\")!@#&end!@#&!@#&function line4()!@#&	pix(8,7,\" \",\"white\")!@#&	pix(12,7,\"  \",\"white\")!@#&	pix(16,7,\" \",\"white\")!@#&	pix(18,7,\" \",\"white\")!@#&	pix(21,7,\" \",\"white\")!@#&	pix(24,7,\" \",\"white\")!@#&	pix(28,7,\" \",\"white\")!@#&	pix(33,7,\" \",\"white\")!@#&	pix(36,7,\" \",\"white\")!@#&	pix(38,7,\" \",\"white\")!@#&	pix(40,7,\"  \",\"white\")!@#&end!@#&!@#&function line5()!@#&	pix(8,8,\" \",\"white\")!@#&	pix(12,8,\" \",\"white\")!@#&	pix(14,8,\" \",\"white\")!@#&	pix(16,8,\"   \",\"white\")!@#&	pix(21,8,\" \",\"white\")!@#&	pix(24,8,\"   \",\"white\")!@#&	pix(28,8,\"   \",\"white\")!@#&	pix(33,8,\" \",\"white\")!@#&	pix(36,8,\"   \",\"white\")!@#&	pix(40,8,\" \",\"white\")!@#&	pix(42,8,\" \",\"white\")!@#&end!@#&!@#&!@#&function startScreen()!@#&!@#&	clear()!@#&	term.setBackgroundColour(colours.green)!@#&	term.setCursorPos(1,h)!@#&	write(string.rep(\" \",w))!@#&	local screenStage=0!@#&	!@#&	screenTimer=os.startTimer(0.1)!@#&	while true do!@#&		local event,p1,p2,p3=os.pullEvent()!@#&		if event==\"key\"and p1==57 then!@#&			term.setBackgroundColour(colours.black)!@#&			clear()!@#&			runGame()!@#&		elseif event==\"timer\" and screenTimer == p1 then!@#&		!@#&			--term.setCursorPos(1,1) write(\"screenStage: \"..screenStage..\"  \")!@#&			!@#&			term.setBackgroundColour(colours.black)!@#&			term.setCursorPos(35,1) write(\"SPACE WHEN READY\")!@#&			!@#&			if screenStage>0 and screenStage<0.5 then!@#&				humanPixY = 18!@#&				drawHumanPix()!@#&			elseif screenStage>2 and screenStage<2.9 then!@#&				alienPixY = -2!@#&				drawAlienPix()!@#&			elseif screenStage>3 and screenStage<3.9 then!@#&				alienPixY = -2!@#&				delAlienPix()!@#&				alienPixY = -1!@#&				drawAlienPix() !@#&			elseif screenStage>4 and screenStage<4.9 then!@#&				alienPixY = -1!@#&				delAlienPix()!@#&				alienPixY = 0!@#&				drawAlienPix() 	!@#&			elseif screenStage>5 and screenStage<5.9 then!@#&				alienPixY = 0!@#&				delAlienPix()!@#&				alienPixY = 1!@#&				drawAlienPix() !@#&			elseif screenStage>6 and screenStage<6.9 then!@#&				alienPixY = 1!@#&				delAlienPix()!@#&				alienPixY = 2!@#&				drawAlienPix()!@#&			elseif screenStage>7 and screenStage<7.9 then!@#&				alienPixY = 2!@#&				delAlienPix()!@#&				alienPixY = 3!@#&				drawAlienPix()!@#&			elseif screenStage>8 and screenStage<8.9 then!@#&				alienPixY = 3!@#&				delAlienPix()!@#&				alienPixY = 4!@#&				drawAlienPix()	!@#&			elseif screenStage>8 and screenStage<9.9 then!@#&				alienPixY = 4!@#&				delAlienPix()!@#&				alienPixY = 5!@#&				drawAlienPix()!@#&			elseif screenStage>10 and screenStage<10.4 then!@#&				pix(25,8,\" \",\"yellow\")!@#&				pix(25,9,\" \",\"yellow\")!@#&				pix(25,10,\" \",\"yellow\")!@#&				pix(25,11,\" \",\"yellow\")!@#&				pix(25,17,\" \",\"yellow\")!@#&				pix(25,18,\" \",\"yellow\")!@#&			elseif screenStage>10.4 and screenStage<10.6 then!@#&				pix(25,8,\" \",\"yellow\")!@#&				pix(25,9,\" \",\"yellow\")!@#&				pix(25,10,\" \",\"yellow\")!@#&				pix(24,11,\"   \",\"yellow\")!@#&				pix(24,12,\"   \",\"yellow\")!@#&				pix(24,13,\"   \",\"yellow\")!@#&				pix(24,14,\"   \",\"yellow\")!@#&				pix(23,15,\"     \",\"yellow\")!@#&				pix(23,16,\"     \",\"yellow\")!@#&				pix(23,17,\"     \",\"yellow\")!@#&				pix(23,18,\"     \",\"yellow\")!@#&				humanPixY = 18!@#&				drawHumanPix()!@#&			elseif screenStage>10.6 and screenStage<10.8 then!@#&				pix(25,8,\" \",\"yellow\")!@#&				pix(25,9,\" \",\"yellow\")!@#&				pix(24,10,\"   \",\"yellow\")!@#&				pix(24,11,\"   \",\"yellow\")!@#&				pix(24,12,\"   \",\"yellow\")!@#&				pix(23,13,\"     \",\"yellow\")!@#&				pix(23,14,\"     \",\"yellow\")!@#&				pix(23,15,\"     \",\"yellow\")!@#&				pix(22,16,\"       \",\"yellow\")!@#&				pix(22,17,\"       \",\"yellow\")!@#&				pix(22,18,\"       \",\"yellow\")!@#&				humanPixY = 18!@#&				drawHumanPix()	!@#&			elseif screenStage>10.8 and screenStage<11 then!@#&				pix(25,8,\" \",\"yellow\")!@#&				pix(24,9,\"   \",\"yellow\")!@#&				pix(24,10,\"   \",\"yellow\")!@#&				pix(23,11,\"     \",\"yellow\")!@#&				pix(23,12,\"     \",\"yellow\")!@#&				pix(22,13,\"       \",\"yellow\")!@#&				pix(22,14,\"       \",\"yellow\")!@#&				pix(21,15,\"         \",\"yellow\")!@#&				pix(21,16,\"         \",\"yellow\")!@#&				pix(20,17,\"           \",\"yellow\")!@#&				pix(20,18,\"           \",\"yellow\")!@#&				humanPixY = 18!@#&				drawHumanPix()		!@#&			elseif screenStage>11.9 and screenStage<12 then!@#&				pix(1,6,\"  \",\"yellow\")!@#&			elseif screenStage>12 and screenStage<12.1 then!@#&				pix(1,6,\"  \")!@#&				pix(3,6,\"  \",\"yellow\")!@#&			elseif screenStage>12.1 and screenStage<12.2 then!@#&				pix(3,6,\"  \")!@#&				pix(5,6,\"  \",\"yellow\")	!@#&			elseif screenStage>12.2 and screenStage<12.3 then!@#&				pix(5,6,\"  \")!@#&				pix(7,6,\"  \",\"yellow\")!@#&			elseif screenStage>12.3 and screenStage<12.4 then!@#&				pix(7,6,\"  \")!@#&				pix(9,6,\"  \",\"yellow\")!@#&			elseif screenStage>12.4 and screenStage<12.5 then!@#&				pix(9,6,\"  \")!@#&				pix(11,6,\"  \",\"yellow\")!@#&			elseif screenStage>12.5 and screenStage<12.6 then!@#&				pix(11,6,\"  \")!@#&				pix(13,6,\"  \",\"yellow\")!@#&			elseif screenStage>12.6 and screenStage<12.7 then!@#&				pix(13,6,\"  \")!@#&				pix(15,6,\"  \",\"yellow\")!@#&			elseif screenStage>12.7 and screenStage<12.8 then!@#&				term.setBackgroundColour(colours.black)!@#&				for i= 5, h-1 do!@#&					term.setCursorPos(15,i)!@#&					write(\"                    \")!@#&				end!@#&				humanPixY=18!@#&				drawHumanPix()!@#&			elseif screenStage>13 and screenStage<13.1 then	!@#&				shipPixX= -16!@#&				drawShipPix()!@#&			elseif screenStage>13 and screenStage<13.1 then	!@#&				delShipPix()!@#&				shipPixX= -15!@#&				drawShipPix()	!@#&			elseif screenStage>13.1 and screenStage<13.2 then	!@#&				delShipPix()!@#&				shipPixX= -12!@#&				drawShipPix()	!@#&			elseif screenStage>13.2 and screenStage<13.3 then	!@#&				delShipPix()!@#&				shipPixX= -9!@#&				drawShipPix()!@#&			elseif screenStage>13.2 and screenStage<13.3 then	!@#&				delShipPix()!@#&				shipPixX= -6!@#&				drawShipPix()!@#&			elseif screenStage>13.3 and screenStage<13.4 then	!@#&				delShipPix()!@#&				shipPixX= -3!@#&				drawShipPix()!@#&			elseif screenStage>13.4 and screenStage<13.5 then	!@#&				delShipPix()!@#&				shipPixX= 0!@#&				drawShipPix()!@#&			elseif screenStage>13.6 and screenStage<13.7 then	!@#&				delShipPix()!@#&				shipPixX= 3!@#&				drawShipPix()!@#&			elseif screenStage>13.8 and screenStage<13.9 then	!@#&				delShipPix()!@#&				shipPixX= 6!@#&				drawShipPix()!@#&			elseif screenStage>13.9 and screenStage<14 then	!@#&				delShipPix()!@#&				shipPixX= 9!@#&				drawShipPix()!@#&			elseif screenStage>14.1 and screenStage<14.2 then	!@#&				delShipPix()!@#&				shipPixX= 12!@#&				drawShipPix()!@#&			elseif screenStage>14.2 and screenStage<14.3 then	!@#&				delShipPix()!@#&				shipPixX= 15!@#&				drawShipPix()!@#&			elseif screenStage>14.3 and screenStage<14.4 then	!@#&				delShipPix()!@#&				shipPixX= 18!@#&				drawShipPix()!@#&			elseif screenStage>14.4 and screenStage<14.5 then	!@#&				delShipPix()!@#&				shipPixX= 21!@#&				drawShipPix()!@#&			elseif screenStage>14.5 and screenStage<14.6 then	!@#&				delShipPix()!@#&				shipPixX= 24!@#&				drawShipPix()!@#&			elseif screenStage>14.6 and screenStage<14.7 then	!@#&				delShipPix()!@#&				shipPixX= 27!@#&				drawShipPix()!@#&			elseif screenStage>14.7 and screenStage<14.8 then	!@#&				delShipPix()!@#&				shipPixX= 30!@#&				drawShipPix()!@#&			elseif screenStage>14.8 and screenStage<14.9 then	!@#&				delShipPix()!@#&				shipPixX= 33!@#&				drawShipPix()!@#&			elseif screenStage>14.9 and screenStage<15 then	!@#&				delShipPix()!@#&				shipPixX= 36!@#&				drawShipPix()!@#&			elseif screenStage>15 and screenStage<15.1 then	!@#&				delShipPix()!@#&				shipPixX= 39!@#&				drawShipPix()!@#&			elseif screenStage>15.1 and screenStage<15.2 then	!@#&				delShipPix()!@#&				shipPixX= 41!@#&				drawShipPix()!@#&			elseif screenStage>15.2 and screenStage<15.3 then	!@#&				delShipPix()!@#&				shipPixX= 44!@#&				drawShipPix()!@#&			elseif screenStage>15.3 and screenStage<15.4 then	!@#&				delShipPix()!@#&				shipPixX= 47!@#&				drawShipPix()!@#&			elseif screenStage>15.4 and screenStage<15.5 then	!@#&				delShipPix()!@#&				shipPixX= 50!@#&				drawShipPix()!@#&			elseif screenStage>15.5 and screenStage<15.6 then	!@#&				delShipPix()!@#&			elseif screenStage>16 and screenStage<16.9 then!@#&				humanPixY=18!@#&				delHumanPix()!@#&				line1()!@#&				line2()!@#&				line3()!@#&				line4()!@#&				line5()!@#&			elseif screenStage>17 and screenStage<22 then!@#&				term.setCursorPos((w/2)-6,10)!@#&				write(\"by FredTHead\")!@#&				term.setCursorPos((w/2)-13,12)!@#&				write(\"WSAD or arrow keys to move\")!@#&				term.setCursorPos((w/2)-6,13)!@#&				write(\"SPACE to fire\")!@#&				term.setCursorPos((w/2)-4,14)!@#&				write(\"P to quit\")!@#&				term.setCursorPos((w/2)-8,16)!@#&				write(\"Fire when ready\")!@#&			elseif screenStage>22.1 and screenStage <27 then!@#&				introHighScoreTable()!@#&			elseif screenStage>27 then	!@#&				term.setBackgroundColour(colours.black)!@#&				for i = 2,h-1 do!@#&					term.setCursorPos(1,i)!@#&					write(string.rep(\" \",w-1))!@#&				end!@#&				screenStage=0!@#&			end!@#&			!@#&			screenStage=screenStage+0.1!@#&			screenTimer=os.startTimer(0.025)!@#&		end!@#&	end!@#&end!@#&!@#&w,h =term.getSize()!@#&if term.isColour() and w==51 then!@#&	initVariables()!@#&	startScreen()!@#&else!@#&	term.clear()!@#&	term.setCursorPos(1,1)!@#&	print(\"I'm sorry, Protector requires an Advanced Computer to run\")!@#&	print(\" \")!@#&end",["eShip11_broken.img"]="!@#&                777779!@#&              777ff779f!@#&             7999f7799f!@#&             97ff9997ff!@#&             f7ffff7f!@#&             ff7f7fff!@#&             7f777777ff!@#&             7777ff779f!@#&              7977ff79f!@#&                999999",[".hilodata"]="20.0!@#&4.0!@#&0.0",["flappyPixel.lua"]="ver = \"beta 1.0 build 04\"!@#&aF = true!@#&betatesting = true!@#&!@#&function drawMenu()!@#&  term.setCursorPos(1,1)!@#&  term.setBackgroundColor(colors.lightBlue)!@#&  term.setTextColor(colors.green)!@#&  term.clear()!@#&  term.setBackgroundColor(colors.white)!@#&  term.write(\"FlappyPixel game by Konlab\")!@#&  print(\"                           \")!@#&  print(\"                           \")!@#&  print()!@#&  print(\"Begin game                 \")!@#&  print()!@#&  print(\"Controls                   \")!@#&  print()!@#&  print(\"Exit game                  \")!@#&  if betatesting then!@#&  term.setBackgroundColor(colors.lightBlue)!@#&  term.setCursorPos(1,20)!@#&  term.write(\"Beta testing\")!@#&  end!@#&  term.setBackgroundColor(colors.lightBlue)!@#&  !@#&  !@#&end!@#&hmD = 0!@#&q = math.random(3,18)!@#&w = math.random(3,18)!@#&e = math.random(3,18)!@#&qp = 28!@#&wp = 38!@#&ep = 45!@#&--pp = 10!@#&function kpress()!@#&  while true do!@#&    event2,char2 = os.pullEvent(\"char\")!@#&--    print(event2..char2)!@#&    if char2 == \"w\" then!@#&      hmD = 0!@#&      ppos = ppos-3!@#&    end !@#&    !@#&  end!@#&end!@#&function gener()!@#&  term.clear()!@#&  !@#&!@#&  if qp == 1 then!@#&  q = math.random(3,18)!@#&  qp = 28!@#&  end!@#&  if wp == 1 then!@#&  w = math.random(3,18)!@#&  wp = 28!@#&  end!@#&  if ep == 1 then!@#&  e = math.random(3,18)!@#& !@#&ep = 28!@#&end!@#&  qp = qp - 1!@#&  wp = wp-1!@#&  ep = ep - 1 !@#&  term.setBackgroundColor(colors.brown)!@#&  for j = 1,3 do!@#&  for i=1,26 do!@#&    if j == 1 then!@#&      term.setCursorPos(qp,i)!@#&      term.write(\" \")!@#&    elseif j == 2 then!@#&      term.setCursorPos(wp,i)!@#&      term.write(\" \")!@#&    elseif j == 3 then!@#&      term.setCursorPos(ep,i)!@#&      term.write(\" \")!@#&    end!@#&  end  !@#&  end!@#&  term.setBackgroundColor(colors.blue)!@#&  for j=1,3 do!@#&  for i=-2,0,1 do!@#&    if j==1 then!@#&    term.setCursorPos(qp,q+i)!@#&    term.write(\" \")!@#&    elseif j == 2 then!@#&    term.setCursorPos(wp,w+i)!@#&    term.write(\" \")!@#&    elseif j == 3 then!@#&    term.setCursorPos(ep,e+i)!@#&    term.write(\" \")!@#&    !@#&    end!@#&  end!@#&  end!@#&end!@#&function game()!@#&  parallel.waitForAny(game2,kpress)!@#&end!@#&function lose(text)!@#&  sleep(2)!@#&  term.setBackgroundColor(colors.lightBlue)!@#&  term.setTextColor(colors.yellow)!@#&  term.setCursorPos(1,5)!@#&  term.clear()!@#&  print(text)!@#&  sleep(1)!@#&  term.setCursorPos(1,7)!@#&  print(\"Click to continue\")!@#&  qp = 28!@#&  wp = 38!@#&  ep = 45!@#&  !@#&  os.pullEvent(\"mouse_click\")!@#&  return!@#&end!@#&function game2()!@#&  term.setBackgroundColor(colors.blue)!@#&  term.clear()!@#&  function simu()!@#&  ppos = 10!@#&  while true do!@#&--  gener()      !@#&--  goup()!@#&  --ppos = ppos+2!@#&--  hmD = hmD+1!@#&  if ppos < 2 then!@#&    ppos = 1!@#&  end!@#&  gener()!@#&  goup()!@#&  if hmD == 0 then!@#&    ppos = ppos+1!@#&    hmD = 1!@#&  elseif hmD < 5 then!@#&    ppos = ppos+1!@#&    hmD = hmD+1!@#&  elseif hmD < 8 then!@#&    ppos = ppos+2!@#&    hmD = hmD + 1!@#&  elseif hmD < 16 then!@#&    ppos = ppos+3!@#&    hmD = hmD - 1!@#&  else!@#&    ppos = ppos+4!@#&  end!@#&  !@#&  if ppos > 20 then!@#&    lose(\"You're fallen in nether\")!@#&    return!@#&  end!@#&  if qp == 2 then!@#&  if q ~= ppos and q ~= ppos - 1 and q ~= ppos + 1 then!@#&    lose(\"FlappyPixel hit building\")!@#&    return!@#&  end!@#&  end!@#&  if w ~= ppos and w ~= ppos + 1 and w ~= ppos - 1 and wp == 2 then!@#&    lose(\"FlappyPixel hit building\")!@#&    return!@#&  end!@#&  if e ~= ppos and e~= ppos-1 and e~= ppos+1 and ep == 2 then!@#&    lose(\"FlappyPixel hit building\")!@#&    return!@#&  end!@#&  sleep(0.3)!@#&  end!@#&  end!@#&  function goup()!@#&  pp = 10!@#&--  while true do!@#&    for i=-1,0 do!@#&      term.setCursorPos(2,ppos+i)!@#&      term.write(\" \")!@#&    end!@#&    term.setCursorPos(2,ppos)!@#&    if aF then!@#&    term.write(\"x\")!@#&    aF = false!@#&    else!@#&    term.write(\"+\")!@#&    aF = true!@#&    end!@#&--    pp = pp+1!@#&    !@#&--  end  !@#&  end!@#&  simu()!@#&--  parallel.waitForAny(simu,kpress)!@#&end!@#&function credits()!@#&  !@#&  term.clear()!@#&  term.setCursorPos(1,1)!@#&  print(\"FlappyPixel - Controls\")!@#&  print(\"W to jump\")!@#&  print()!@#&  print(\"Current version:\")!@#&  print(ver)!@#&  print()!@#&  if betatesting then!@#&    !@#&    print(\"Use at your own risk!\")!@#&    print()!@#&  end!@#&  print(\"Click to continue\")!@#&  os.pullEvent(\"mouse_click\")!@#&  return!@#&end!@#&function main()!@#&  while true do!@#&    drawMenu()!@#&    event,button,x,y = os.pullEvent(\"mouse_click\")!@#&    if y == 4 then!@#&      game()!@#&    elseif y == 6 then!@#&      credits()!@#&    elseif y == 8 then!@#&      return!@#&    end!@#&    !@#&    !@#&  end  !@#&end!@#&--!@#&local ok,err = pcall(main)!@#&if err == \"Terminated\" then!@#&  print(\"Terminated\")!@#&  print(\"Thanks for using FlappyPixel\")!@#&  return  !@#&end!@#&--if ok then!@#&  term.setBackgroundColor(colors.black)!@#&  term.setTextColor(colors.white)!@#&  term.clear()!@#&  term.setCursorPos(1,1)!@#&if ok then!@#&  print(\"Thanks for using FlappyPixel\")!@#&  term.setCursorPos(1,3)!@#&else!@#&  print(\"--Crash report begin--\")!@#&  print(\"Ohh no! Crashed:\")!@#&  print()!@#&  print(err)!@#&  print()!@#&  print(\"Please report!\")!@#&  print(\"--End--\")!@#&  print(\"press any key\")!@#&  os.pullEvent(\"key\")!@#&end",["speedscores"]="1!@#&36000!@#&Notch!@#&1!@#&36000!@#&Notch!@#&1!@#&36000!@#&Notch!@#&1!@#&36000!@#&Notch!@#&1!@#&36000!@#&Notch!@#&1!@#&36000!@#&Notch!@#&1!@#&36000!@#&Notch!@#&1!@#&36000!@#&Notch!@#&1!@#&36000!@#&Notch!@#&1!@#&36000!@#&Notch",["stuff"]={["hs"]="exit^1^1^210!@#&daun^1^0^10!@#&aaa^1^0^0!@#&daun^1^0^0",["level.nfp"]="000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000!@#&0                                                 00                                                 00                                                 00                    0       0                    0!@#&0   5                                             00                                                 00                                                 00                    0       0                    0!@#&0                                                 00  000000000 000000000 000000000 000000000 00000  00   0000000000000000000000000000000000000000000   00                    0       0                    0!@#&0                                                 00  0                                           0  00   0                     000000000000000000000   00                    0       0                    0!@#&0       00000000000000000000000000000000000       00  0                                           0  00   0                     00  0 000 0   0   000   00                    000000000                    0!@#&0       00000000000000000000000000000000000       00  0   0000000000 000000000 000000000 000000   0  00   0                     00 000 0 000 000 0000   00                                                 0!@#&0       000              6              000       00  0   0                                   0   0  00   0                  0  00 b000 0000 000 0000   0000000000000000000               000000000000000000!@#&0       000                             000       00  0   0          a         a       a      0   0  00   0                  0  00 000 0 000 000 0000   00                0               0                0!@#&0       000     00       4       00     000               0  4           a         a          0           0                  0  00  0 000 0   00 0000   0000000000000000000               000000000000000000!@#&0       000     0                 0     000       00  0   0                                   0   0  00   0                  0  000000000000000000000   00                                                 0!@#&0       000                             000       00  0   0000000000 000000000 000000000 000000   0  00   0        4         0  000000000000000000000   00                    000000000                    0!@#&0       000                             000       00  0                                           0  00   0                  0  000000000000000000000   00                    0       0                    0!@#&0       000     0                 0     000       00  0                                           0  00   0                  0  000000000000000000000   00                    0       0                    0!@#&0       000     0                 0     000       00  000000000 000000000 000000000 000000000 00000  00   0                  0  000000000000000000000   00                    0   4   0                    0!@#&0                                                 00                                                 00   0                  0                          00                    0       0                    0!@#&0                                                 00                                                 00   0                  0                                                0       0                    0!@#&0000000000000000000000000 0000000000000000000000000000000000000 00000000000000000000000000000 00000000000000000000000000000000  0000000000000000000000000000000000000000000000000000000000000000000000000000!@#&0000000000000000000000000 0000000000000000000000000000000000000 00000000000000000000000000000 00000000000000000000000000000000  0000000000000000000000000000000000000000000000000000000000000000000000000000!@#&0                                                 00                                                 00                      0  0                       00   0   0   0                                     0!@#&0                                                 00  a                       000      a          a  00                      0  0                       00 0 0 0 0 0 0                                     0!@#&0  000000000            0 0            000000000  00            a             0 0                    00                      0  0        00             00 0 0 0 0 0 0         0000000000000000000000000   0!@#&0  0       0            0 0            0       0  00    000               0   000               000  00                      0  0         0             00 0 0 0   0 0       0 0aaaaaaaaaaaaaaaaaaaaaaa0   0!@#&0  0       0            0 0            0       0  00    0 0            a                  0     0 0  00     00000000000      0  00000000  0             00 0 0 00000 0       0 0aaaaaaaaaaaaaaaaaaaaaaa0   0!@#&0  0       0            0 0            0       0  00    000    0                  a             000  00     0                0  0     0   0             00 0 0 0     000000000 0aaaaaaaaaaaaaaaaaaaaaaa0   0!@#&0  0       0            0 0            0       0  00  a                              0               00     0                0  0   0 0   0             00 0   0               0aaaaaaaaaaaaaaaaaaaaaaa0   0!@#&0  0       0            0 0            0       0  00                000       4                      00     0   000000       0  0   0 0   0             00 000000000000000000000aaaaaaaaaaaaaaaaaaaaaaa0   0!@#&0  0       0     4      0 0            0       0  00   0            0 0  a                       a   00     0   0                   0     0             00                      aaaaaaaaaaaaaaaaaaaaaaa0   0!@#&0  0       0            0 0            0       0  00             a  000         0   a   000          00     0   0 6                 0000  0             00       000000000000000aaaaaaaaaaaaaaaaaaaaaaa0   0!@#&0  0       00000000000000 00000000000000       0  00                                    0 0          00     0   0  00        0  0   0     0        4    00   4   0              aaaaaaaaaaaaaaaaaaaaaaa0   0!@#&0                   0           0                 00       0                a           000     0    00     0   0  0         0  0   0 0   0             00       0 0000000000000aaaaaaaaaaaaaaaaaaaaaaa0   0!@#&0                   0           0                 00         a        a                              00     0   0            0  0     0   0             00       0             0aaaaaaaaaaaaaaaaaaaaaaa0   0!@#&0              000000000     00000000000          00                      0                 a        00     0                0  00000000  00000000000000000000000000000000000  0aaaaaaaaaaaaaaaaaaaaaaa0   0!@#&0                                                 00    a         0             a                 a  00                      0  0                                              0aaaaaaaaaaaaaaaaaaaaaaa0   0!@#&0                                                 00                                    0            00                      0  0                                              0aaaaaaaaaaaaaaaaaaaaaaa0   0!@#&0000000 00000000000000000000000000000000000000000000000000000000000000000000000000 000000000000000000000000000 00000000000000000000000000000000000000000000000000000000000000000aaaaaaaaaaaaaaaaaaa00000   0!@#&0000000 00000000000000000000000000000000000000000000000000000000000000000000000000 000000000000000000000000000 00000000000000000000000000000000000000000000000000000000000000000aaaaaaaaaaaaaaaaaaa00000   0!@#&0             0                 0                 00                    00                           00      0 0          0                 00000000000000              0aaaaaaaaaaaaaaaaaaaaaaaaaa0       0!@#&0             0                 0                 00              a      00                          00      0 0          0                 00000000000000              0aaaaaaaaaaaaaaaaaaaaaaaaaa0       0!@#&0             0                 0                                         00      a        a         00      0 0  0000000 0  0000000000000  00000000000000              0aaaaaaaaaaaaaaaaaaaaaaaaaa0       0!@#&0             0                 0                 00         a             00                        00      0 0  0       0    0         0  00000000000000              0aaaaaaaaaaaaaaaaaaaaaaaaaa0       0!@#&0             0                 0                 00                 a      00                  a    00      0 0  0   000 0000 0            00000000000000              0aaaaaaaaaaaaaaaaaaaaaaaaaa0       0!@#&0             0                 0                 00   a                     00   4     a            00      0 0  0    60  0   0         0  00000000000000              0aaaaaaaaaaaaaaaaaaaaaaaaaa0       0!@#&0             0                 0                 00                          00                     00  00000 0     0  0  0  000        0  00000000000000               aaaaaaaaaaaaaaaaaaaaaaaaaa        0!@#&0             0                 0 0               00        a                  00                    00              0  0       0    4   0  00000000000000               aaaaaaaaaaa   aaaaaaaaaaaa        0!@#&0             0                 0 0               00               a            00                                   0  000000 00        0  00000000000000               aaaaaaaaaaa 4 aaaaaaaaaaaa        0!@#&0             0                 0 00000000        00                             00                  00000000000000            0            00000000000000               aaaaaaaaaaa   aaaaaaaaaaaa        0!@#&0             0                 0        0        00    a    6         a          00        a        00000000000000  00000000000000000   0  00000000000000               aaaaaaaaaaaaaaaaaaaaaaaaaa        0!@#&0             0                 0    4   0        00                               00                00000000000000        0         00000  00000000000000              0aaaaaaaaaaaaaaaaaaaaaaaaaa0       0!@#&0             0                 00000000 0        00                                00               000000000000000000000 0 0000000                000000              0aaaaaaaaaaaaaaaaaaaaaaaaaa0       0!@#&0             0                        0 0        00              a         a        00              000000000000000000000   000000000000000000000  000000              0aaaaaaaaaaaaaaaaaaaaaaaaaa0       0!@#&0             0                        0 0        00                             a    00             000000000000000000000000000000000000000000000  000000              0aaaaaaaaaaaaaaaaaaaaaaaaaa0       0!@#&0             0                          0        00                                   00            000000000000000000000000000000000000000000000  000000              0aaaaaaaaaaaaaaaaaaaaaaaaaa0       0!@#&0000000 0000000000000 000000000000000000000000000000000000000000000000000000 000000000000000000000000000000000000000000000000000000000000000000000  000000000000  000000000000000000000000000000000000000000!@#&0000000 0000000000000 000000000000000000000000000000000000000000000000000000 000000000000000000000000000000000000000000000000000000000000000000000  000000000000  000000000000000000000000000000000000000000!@#&0             0                   0               00                                                 00                                                 00           0        0   0   0   0     0     0    0!@#&0             0                   0   a           00                                                 00                                                 00           0 00   0 0 0 0 0 0 0 000 0 0000  0 6  0!@#&0             0                   0               00                                                 00                                                 00           0  0   0   0   0   0     0       0  0 0!@#&0             0        a          0               00    00000000000000000000 00000000000000000000    00                                                 00                0000000000000000000      0     0 0!@#&0             0                   0         a     00    0                                       0    00                                                 00           0  0   000000000         00 000  0000 0!@#&0             0                   000             00    0                   4                   0    00        0000000000         000000000000000000000000           0 00   000000000          0      0    0!@#&0             0    a            000      a        00    00000000000000000000000000000000000000000    00                 0         0          0   000    00000000000000         000000 000 000  000 00      0!@#&000000        0                 0 4 0                                                                00                 0         0 00000000 0 0 000  0 0000000000000000000000  000     0 0 0      0       0!@#&0    0        0                   000             00    a aaaaaaaaaaaaaa a     a aaaaaaaaaaaaaa a    00       0         0         0        0   0 000  0 00000000000000000000000  00 000 0     00     0000000!@#&0  6          0           a     000            a  00    a                a     a                a    00       0         0         00000000 00000 0    0 000000000000000000000000    0 0   000  0  0 00     0!@#&0    0        0                   0               00    a aaaaaaaaaaaaaa a     a aaaaaaaaaaaaaa a    00       0         0         0      0   0   0  000 000000000000000000000000000 000 0     00     0     0!@#&000 00        0                   0               00                                                 00       0         0         0 0000 000 0 000  0   00000000000000000  0            0 0 0    000 0 000 0!@#&0             000000000000000000000000000000000000000000000000000000000     0     00000000000000000000000000000         00000000000    0 000 0  4   0   00000000000000000     4   000 000 000      0   0 0 0!@#&0                                                 00                        0                        00                           0000 0     0      0   00000000000000000  0       0          0000000000 0 0!@#&0                                                                           0                                                     0000 0000000000000000 00000000000000000  000 00000  000  0000            0!@#&0                                                 00                        0                        00                                                 00000000000000000               0        0   0     0!@#&000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",["levelo.nfp"]="00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000!@#&0                                                00                                                00                                                00                    0       0                   0!@#&0   5                                            00                                                00                                                00                    0       0                   0!@#&0                                                00  000000000 000000000 00000000 000000000 00000  00   000000000000000000000000000000000000000000   00                    0       0                   0!@#&0                                                00  0                                          0  00   0                     00000000000000000000   00                    0       0                   0!@#&0        000000000000000000000000000000000       00  0                                          0  00   0                     00  0 000 0   0   00   00                    000000000                   0!@#&0        000000000000000000000000000000000       00  0   0000000000 000000000000000000 000000   0  00   0                     00 000 0 000 000 000   00                                                0!@#&0        000             6             000       00  0   0                                  0   0  00   0                 0   00 b000 0000 000 000   0000000000000000000               00000000000000000!@#&0        000                           000       00  0   0          a        a       a      0   0  00   0                 0   00 000 0 000 000 000   00                0               0               0!@#&0        000     00      4      00     000               0  4           a        a          0           0                 0   00  0 000 0   00 000   0000000000000000000               00000000000000000!@#&0        000     0               0     000       00  0   0                                  0   0  00   0                 0   00000000000000000000   00                                                0!@#&0        000                           000       00  0   0000000000 000000000000000000 000000   0  00   0        4        0   00000000000000000000   00                    000000000                   0!@#&0        000                           000       00  0                                          0  00   0                 0   00000000000000000000   00                    0       0                   0!@#&0        000     0               0     000       00  0                                          0  00   0                 0   00000000000000000000   00                    0       0                   0!@#&0        000     0               0     000       00  000000000 000000000 00000000 000000000 00000  00   0                 0   00000000000000000000   00                    0   4   0                   0!@#&0                                                00                                                00   0                 0                          00                    0       0                   0!@#&0                                                00                                                00   0                 0                                                0       0                   0!@#&0000000000000000000000000 000000000000000000000000000000000000 0000000000000000000000000000 0000000000000000000000000000000  000000000000000000000000000000000000000000000000000000000000000000000000000!@#&0000000000000000000000000 000000000000000000000000000000000000 0000000000000000000000000000 0000000000000000000000000000000  000000000000000000000000000000000000000000000000000000000000000000000000000!@#&0                                                00                                                00                     0  0                       00   0   0   0                                    0!@#&0                                                00  a                      000      a          a  00                     0  0                       00 0 0 0 0 0 0                                    0!@#&0  000000000            0 0           000000000  00            a            0 0                    00                     0  0        00             00 0 0 0 0 0 0         000000000000000000000000   0!@#&0  0       0            0 0           0       0  00    000               0  000               000  00                     0  0         0             00 0 0 0   0 0       0 0aaaaaaaaaaaaaaaaaaaaaa0   0!@#&0  0       0            0 0           0       0  00    0 0            a                 0     0 0  00    00000000000      0  00000000  0             00 0 0 00000 0       0 0aaaaaaaaaaaaaaaaaaaaaa0   0!@#&0  0       0            0 0           0       0  00    000    0                 a             000  00    0                0  0     0   0             00 0 0 0     000000000 0aaaaaaaaaaaaaaaaaaaaaa0   0!@#&0  0       0            0 0           0       0  00  a                             0               00    0                0  0   0 0   0             00 0   0               0aaaaaaaaaaaaaaaaaaaaaa0   0!@#&0  0       0            0 0           0       0  00                000      4                      00    0   000000       0  0   0 0   0             00 000000000000000000000aaaaaaaaaaaaaaaaaaaaaa0   0!@#&0  0       0     4      0 0           0       0  00   0            0 0  a                      a   00    0   0                   0     0             00                      aaaaaaaaaaaaaaaaaaaaaa0   0!@#&0  0       0            0 0           0       0  00             a  000        0   a   000          00    0   0 6                 0000  0             00       000000000000000aaaaaaaaaaaaaaaaaaaaaa0   0!@#&0  0       00000000000000 0000000000000       0  00                                   0 0          00    0   0  00        0  0   0     0        4    00   4   0              aaaaaaaaaaaaaaaaaaaaaa0   0!@#&0                   0          0                 00       0               a           000     0    00    0   0  0         0  0   0 0   0             00       0 0000000000000aaaaaaaaaaaaaaaaaaaaaa0   0!@#&0                   0          0                 00         a        a                             00    0   0            0  0     0   0             00       0             0aaaaaaaaaaaaaaaaaaaaaa0   0!@#&0              0000000000 00000000000            00                      0                a        00    0                0  00000000  00000000000000000000000000000000000  0aaaaaaaaaaaaaaaaaaaaaa0   0!@#&0                                                00    a         0            a                 a  00                     0  0                                              0aaaaaaaaaaaaaaaaaaaaaa0   0!@#&0                                                00                                   0            00                     0  0                                              0aaaaaaaaaaaaaaaaaaaaaa0   0!@#&0000000 000000000000000000000000000000000000000000000000000000000000000000000000 000000000000000000000000000 0000000000000000000000000000000000000000000000000000000000000000aaaaaaaaaaaaaaaaaa00000   0!@#&0000000 0000000000000000000000000000000000000000000000000000000000000000000000000 00000000000000000000000000 0000000000000000000000000000000000000000000000000000000000000000aaaaaaaaaaaaaaaaaa00000   0!@#&0            0                 0                 00                    00                          00      0 00000000000                             00              0aaaaaaaaaaaaaaaaaaaaaaaaa0       0!@#&0            0                 0                 00              a      00                         00      0 0         0                 00000000000 00              0aaaaaaaaaaaaaaaaaaaaaaaaa0       0!@#&0            0                 0                                         00      a        a        00      0 0 0000000 0  0000000000000  00000000000 00              0aaaaaaaaaaaaaaaaaaaaaaaaa0       0!@#&0            0                 0                 00         a             00                       00      0 0 0       0    0         0  00000000000 00              0aaaaaaaaaaaaaaaaaaaaaaaaa0       0!@#&0            0                 0                 00                 a      00                  a   00      0 0 0   000 0000 0            00000000000 00              0aaaaaaaaaaaaaaaaaaaaaaaaa0       0!@#&0            0                 0                 00   a                     00   4     a           00      0 0 0    60  0   0         0  00000000000 00              0aaaaaaaaaaaaaaaaaaaaaaaaa0       0!@#&0            0                 0                 00                          00                    00  00000 0    0  0  0  000        0  00000000000 00               aaaaaaaaaaaaaaaaaaaaaaaaa        0!@#&0            0                 0 0               00        a                  00                   00             0  0       0    4   0  00000000000 00               aaaaaaaaaaa   aaaaaaaaaaa        0!@#&0            0                 0 0               00               a            00                                 0  000000 00        0  00000000000 00               aaaaaaaaaaa 4 aaaaaaaaaaa        0!@#&0            0                 0 00000000        00                             00                 0000000000000            0            00000000000 00               aaaaaaaaaaa   aaaaaaaaaaa        0!@#&0            0                 0        0        00    a    6         a          00        a       0000000000000  00000000000000000   0  00000000000 00               aaaaaaaaaaaaaaaaaaaaaaaaa        0!@#&0            0                 0    4   0        00                               00               0000000000000        0         00000  00000000000 00              0aaaaaaaaaaaaaaaaaaaaaaaaa0       0!@#&0            0                 00000000 0        00                                00              00000000000000000000 0 0000000                    00              0aaaaaaaaaaaaaaaaaaaaaaaaa0       0!@#&0            0                        0 0        00              a         a        00             00000000000000000000   000000000000000000000  000000              0aaaaaaaaaaaaaaaaaaaaaaaaa0       0!@#&0            0                        0 0        00                             a    00            00000000000000000000000000000000000000000000  000000              0aaaaaaaaaaaaaaaaaaaaaaaaa0       0!@#&0            0                          0        00                                   00           00000000000000000000000000000000000000000000  000000              0aaaaaaaaaaaaaaaaaaaaaaaaa0       0!@#&0000000 000000000000 000000000000000000000000000000000000000000000000000000 0000000000000000000000000000000000000000000000000000000000000000000  000000000000  00000000000000000000000000000000000000000!@#&0000000 000000000000 000000000000000000000000000000000000000000000000000000 0000000000000000000000000000000000000000000000000000000000000000000  000000000000  00000000000000000000000000000000000000000!@#&0            0                   0               00                                                00                                                00          0        0   0   0   0     0     0    0!@#&0            0                   0   a           00                                                00                                                00          0 00   0 0 0 0 0 0 0 000 0 0000  0 6  0!@#&0            0                   0               00                                                00                                                00          0  0   0   0   0   0     0       0  0 0!@#&0            0        a          0               00    0000000000000000000  0000000000000000000    00                                                00               0000000000000000000      0     0 0!@#&0            0                   0         a     00    0                                      0    00                                                00          0  0   000000000         00 000  0000 0!@#&0            0                   000             00    0                   4                  0    00        0000000000        000000000000000000000000          0 00   000000000          0      0    0!@#&0            0    a            000      a        00    0000000000000000000000000000000000000000    00                 0        0          0   000    0000000000000         000000 000 000  000 00      0!@#&000000       0                 0 4 0                                                               00                 0        0 00000000 0 0 000  0 000000000000000000000  000     0 0 0      0       0!@#&0    0       0                   000             00    a aaaaaaaaaaaaaa a    a aaaaaaaaaaaaaa a    00       0         0        0        0   0 000  0 0000000000000000000000  00 000 0     00     0000000!@#&0  6         0           a     000            a  00    a                a    a                a    00       0         0        00000000 00000 0    0 00000000000000000000000    0 0   000  0  0 00     0!@#&0    0       0                   0               00    a aaaaaaaaaaaaaa a    a aaaaaaaaaaaaaa a    00       0         0        0      0   0   0  000 00000000000000000000000000 000 0     00     0     0!@#&000 00       0                   0               00                                                00       0         0        0 0000 000 0 000  0   0000000000000000  0            0 0 0    000 0 000 0!@#&0            000000000000000000000000000000000000000000000000000000000    00    00000000000000000000000000000         0000000000    0 000 0  4   0   0000000000000000     4   000 000 000      0   0 0 0!@#&0                                                00                       00                       00                          0000 0     0      0   0000000000000000  0       0          0000000000 0 0!@#&0                                                                         00                                                   0000 0000000000000000 0000000000000000  000 00000  000  0000            0!@#&0                                                00                       00                       00                                                0000000000000000               0        0   0     0!@#&00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",},["eShip8_broken.img"]="!@#&                    7b!@#&              7777bbbbf!@#&             77ff77777f!@#&             fffff7f7f!@#&             ff7ffffff!@#&             bb77ff7f7f!@#&              bbbbbbbbf!@#&                    7b",["password"]="selection = 1!@#&choice = \"nothing\"!@#&word = \"nothing\"!@#&menu = true!@#&user = \"\"!@#&done = false!@#&time = os.startTimer(.8333)!@#&	function title()!@#&		term.clear()!@#&		term.setCursorPos(1,1)!@#&		header()!@#&	end!@#&	!@#&	function header()!@#&		local stuff = getsettings()!@#&		if(stuff[\"time\"] == \"true\")then!@#&			stuff[\"time\"] = true!@#&		else!@#&			stuff[\"time\"] = false!@#&		end!@#&		x,y = term.getSize()!@#&		term.setCursorPos(1,1)!@#&		term.clearLine()!@#&		write(\"Door Lock\")!@#&		if(stuff[\"lockstate\"]==\"locked\")then!@#&			term.setCursorPos(x/2-9,1)!@#&			write(\"**TERMINAL IS LOCKED**\")!@#&		end!@#&		if(usertype==\"Owner\" or usertype==\"Admin\")then!@#&			term.setCursorPos(x-8,1)!@#&			print(textutils.formatTime(os.time(), stuff[\"time\"]))!@#&		else!@#&			print()!@#&		end!@#&		local x, y = term.getSize()!@#&		local header=\"-\"!@#&		for index = 0, x-2, 1 do!@#&			header = header..\"-\"!@#&		end!@#&		print(header)!@#&		print(\" \")!@#&	end!@#&	!@#&	function getsettings()!@#&		local stuff = {}!@#&		local open = fs.open(\"userinfo/settings\" , \"r\")!@#&		stuff[\"side\"] = open.readLine()!@#&		stuff[\"lockstate\"] = open.readLine()!@#&		stuff[\"date\"] = open.readLine()!@#&		stuff[\"admin\"] = open.readLine()!@#&		stuff[\"list\"] = open.readLine()!@#&		stuff[\"time\"] = open.readLine()!@#&		open.close()!@#&		return (stuff)!@#&	end!@#&	!@#&	function middle(word,count)!@#&		local x, y = term.getSize()!@#&		if(word==\" \")then!@#&			term.setCursorPos(x/2,count+5)!@#&		else!@#&			term.setCursorPos(x/2-(string.len(word)/2),count+5)!@#&		end!@#&	end	!@#&		!@#&	function addspace(newword, number)!@#&		numSpaces = \"\"!@#&		spaces=\"\"!@#&		local x, y = term.getSize()!@#&		word = tostring(newword)!@#&		if(number==nil)then!@#&				numSpaces = (x/3)-string.len(word)-4!@#&				for derp = 0, numSpaces, 1 do!@#&					spaces = spaces .. \" \"!@#&				end!@#&		else!@#&				numSpaces = number-string.len(word)!@#&				for derp = 0, numSpaces, 1 do!@#&					spaces = spaces .. \" \"!@#&				end!@#&		end!@#&		return(spaces)!@#&	end!@#&	!@#&	function guiSelection(max,min,place)!@#&		local running  = true!@#&		time = os.startTimer(.8333)!@#&		local selection = place!@#&		while running do!@#&			local Event, id = os.pullEvent()!@#&			if(Event==\"key\")then!@#&				if (id==208) then!@#&					selection=selection+1!@#&				elseif (id==200) then!@#&					selection=selection-1!@#&				end!@#&				if(selection==min-1) then!@#&					selection=max!@#&				elseif(selection==max+1) then!@#&					selection=min!@#&				end!@#&				running = false!@#&				return selection , id!@#&			elseif(Event==\"timer\")then!@#&				header()!@#&				time = os.startTimer(.8333)!@#&				if(textutils.formatTime(os.time(), false)==\"0:00 AM\")then!@#&					local stuff = getsettings()!@#&					local edit = fs.open(\"userinfo/settings\" , \"w\")!@#&					edit.writeLine(stuff[\"side\"])!@#&					edit.writeLine(stuff[\"lockstate\"])!@#&					edit.writeLine(stuff[\"date\"]+1)!@#&					edit.writeLine(stuff[\"admin\"])!@#&					edit.writeLine(stuff[\"list\"])!@#&					edit.writeLine(stuff[\"time\"])!@#&					edit.close()!@#&				end!@#&			end!@#&		end!@#&	end!@#&	!@#&	function start()!@#&		title()!@#&		print(\"Welcome\")!@#&		sleep(2)!@#&		title()!@#&		if (fs.exists(\"userinfo\")==false) then!@#&			fs.makeDir(\"userinfo\")!@#&		end!@#&		if (fs.exists(\"userinfo/firsttime\")==false) then!@#&			open = fs.open(\"userinfo/firsttime\" , \"w\")!@#&			open.write(\"first time\")!@#&			open.close()!@#&			title()!@#&			print(\"Welcome\")!@#&			sleep(1)!@#&			title()!@#&			print(\"System Setup\")!@#&			print(\" \")!@#&			print(\" \")!@#&			print(\"Please create your username\")!@#&			write(\":> \")!@#&			local username = io.read()!@#&			print(\"Please create your password\")!@#&			write(\":> \")!@#&			local pass = read(\"*\")!@#&			local edit = fs.open(\"userinfo/\"..username , \"w\")!@#&			edit.writeLine(pass)!@#&			edit.writeLine(\"Owner\")!@#&			edit.writeLine(\"0\")!@#&			edit.writeLine(\"never\")!@#&			edit.close()!@#&			title()!@#&			print(\"Hello \"..username..\" you are currently this computer's Owner\")!@#&			print(\"To finish setup, if you have not already done so\")!@#&			print(\"close this program and rename is as startup\")!@#&			print()!@#&			x, y = term.getCursorPos()!@#&			print(\"where is the door in relation to the terminal?\")!@#&			while done == false do!@#&				write(\":>\")!@#&				side = io.read()!@#&				if(side==\"top\"or\"bottom\"or\"left\"or\"right\"or\"front\"or\"back\")then!@#&					done = true!@#&					open = fs.open(\"userinfo/firsttime\" , \"w\")!@#&					open.writeLine(\"first time\")!@#&					open.close()!@#&					!@#&					open = fs.open(\"userinfo/settings\" , \"w\")!@#&					open.writeLine(side)!@#&					open.writeLine(\"unlocked\")!@#&					open.writeLine(\"0\")!@#&					open.wirteLine(\"false\")--admin stuff!@#&					open.writeLine(\"false\")--list!@#&					open.writeLine(\"false\")--time!@#&					open.close()!@#&				else!@#&					write(\"unknown side please try again\")!@#&					sleep(1)!@#&					term.clearLine()!@#&					term.setCursorPos(1,y)!@#&					term.clearLine()!@#&				end!@#&			end!@#&			print()!@#&			print(\":Hit Any Key to Continue\")!@#&			Event, key = os.pullEvent(\"key\")!@#&			choice = \"nothing\"!@#&		end	!@#&		if (fs.exists(\"userinfo/firsttime\")==true) then!@#&			--promptuserinfo()!@#&			open = fs.open(\"userinfo/settings\" , \"r\")!@#&			local derp = open.readLine()!@#&			side = open.readLine()!@#&			open.close()!@#&		end!@#&		!@#&	end!@#&	!@#&	function getDiskInfo(path)!@#&		if(path) then!@#&	        path = path..\"/userinfo\"!@#&	        file = io.open(path, \"r\")!@#&	    end    !@#&	    if(file) then!@#&	    	user = file:read()!@#&	    	pass = file:read()!@#&	    end!@#&		if(file) then file:close() file = nil end   !@#&		return user,pass!@#&	end!@#&	!@#&	function promptuserinfo()!@#&		choice = \"nothing\"!@#&		local stuff = getsettings()!@#&		user = \" \"!@#&		done = false!@#&		while done==false do!@#&			while true do!@#&				title()!@#&				print(\" \")!@#&				print(\"Enter ID card or hit Enter to continue\")!@#&				Event,pram1,pram2,pram3 = os.pullEvent()!@#&				if(Event==\"disk\")then!@#&					 local path = disk.getMountPath(pram1)!@#&					 username,password = getDiskInfo(path)!@#&					 disk.eject(pram1)!@#&					 break!@#&				elseif(Event==\"key\" and pram1==28)then!@#&					title()!@#&					print()!@#&					print(\"Enter Your Username\")!@#&					write(\":> \")!@#&					username = io.read()!@#&					user = username!@#&					print(\"Enter Your Password\")!@#&					write(\":> \")!@#&					password = read(\"*\")!@#&					break!@#&				end		!@#&			end	!@#&			if (fs.exists(\"userinfo/\"..username)==true) then!@#&				local open = fs.open(\"userinfo/\"..username , \"r\")!@#&				local pass = open.readLine()!@#&				usertype = open.readLine()!@#&				local logins = open.readLine()!@#&				local lastlogin = open.readLine()!@#&				open.close()!@#&				if(stuff[\"lockstate\"]==\"unlocked\") then!@#&					if (pass==password) then!@#&						if (usertype==\"Employee\")then!@#&							title()!@#&							print(\"Access Granted\")!@#&							sleep(1)!@#&							title()!@#&							print(\"Opening Door...\")!@#&							sleep(.5)!@#&							rs.setOutput(stuff[\"side\"] , true)!@#&							title()!@#&							print(\"Door Open\")!@#&							sleep(3)!@#&							rs.setOutput(stuff[\"side\"] , false)!@#&							title()!@#&							print(\"Closing Door...\")!@#&							sleep(1)!@#&						elseif (usertype==\"Admin\"or\"Owner\") then!@#&							choice = \"guimenu\"!@#&							done = true!@#&						end!@#&						local edit = fs.open(\"userinfo/\"..username , \"w\")!@#&						edit.writeLine(pass)!@#&						edit.writeLine(usertype)!@#&						edit.writeLine(logins+1)!@#&						edit.writeLine(textutils.formatTime(os.time(), false))!@#&						edit.writeLine(stuff[\"date\"])!@#&						edit.close()!@#&					elseif(password~=pass)then!@#&						print(\"Password is incorrect\")!@#&						sleep(2)!@#&					end!@#&				elseif(stuff[\"lockstate\"]==\"locked\") then!@#&					if(usertype==\"Owner\") then!@#&						choice = \"guimenu\"!@#&						done = true!@#&						local edit = fs.open(\"userinfo/\"..username , \"w\")!@#&						edit.writeLine(pass)!@#&						edit.writeLine(usertype)!@#&						edit.writeLine(logins+1)!@#&						edit.writeLine(textutils.formatTime(os.time(), false))!@#&						edit.writeLine(stuff[\"date\"])!@#&						edit.close()!@#&					else!@#&						title()!@#&						print(\"**THIS TERMINAL HAS BEEN LOCKED**\")!@#&						sleep(1)!@#&					end!@#&				end!@#&			else!@#&				print(\"Username does not exists\")!@#&				sleep(1)!@#&			end!@#&		end!@#&	end!@#&	!@#&!@#&	function gui()!@#&		local stuff = getsettings()!@#&		title()!@#&		print(\"Username:> \"..user..\" Type:> \"..usertype)!@#&		print()!@#&		if (selection == 1) then!@#&			print(\"[Add New Account]\")!@#&		!@#&		else!@#&			print(\" Add New Account\")!@#&		!@#&		end!@#&		if (selection == 2) then!@#&			print(\"[Edit An Account]\")!@#&		!@#&		else!@#&			print(\" Edit An Account\")!@#&		!@#&		end!@#&		if (selection == 3) then!@#&			print(\"[Delete Account ]\")!@#&			!@#&		else !@#&			print(\" Delete Account\")!@#&		!@#&		end!@#&		if (selection == 4) then!@#&			print(\"[List Accounts  ]\")!@#&		!@#&		else !@#&			print(\" List Accounts\")!@#&			!@#&		end!@#&		if (selection == 5) then!@#&			print(\"[LogOut         ]\")!@#&			!@#&		else !@#&			print(\" LogOut\")!@#&		end!@#&		if (selection == 6) then!@#&			print(\"[Open Door      ]\")!@#&		else!@#&			print(\" Open Door\")!@#&		end!@#&		if (selection == 7) then!@#&			!@#&			if(stuff[\"lockstate\"]==\"unlocked\")then!@#&				print(\"[Lock Terminal  ]\")!@#&			elseif(stuff[\"lockstate\"]==\"locked\")then!@#&				print(\"[Unlock Terminal]\")!@#&			end		!@#&		else !@#&			if(stuff[\"lockstate\"]==\"unlocked\")then!@#&				print(\" Lock Terminal\")!@#&			elseif(stuff[\"lockstate\"]==\"locked\")then!@#&				print(\" Unlock Terminal\")!@#&			end	!@#&		end!@#&		if (selection ==8) then!@#&			print(\"[Settings       ]\")!@#&		else!@#&			print(\" Settings\")!@#&		end!@#&		if (selection == 9) then!@#&			print(\"[Quit Program   ]\")!@#&		!@#&		else !@#&			print(\" Quit Program\")!@#&			!@#&		end!@#&	!@#&	end!@#&	!@#&	!@#&	function guimenu()!@#&		local stuff = getsettings()!@#&		choice = \"nothing\"!@#&		local done = false!@#&		selection = 1!@#&		gui()!@#&		while done==false do!@#&			selection, key = guiSelection(9,1,selection)!@#&			gui(selection)!@#&			if(key==28) then!@#&				if (selection==1) then!@#&					choice=\"add\"!@#&					done=true!@#&				elseif (selection==2) then	!@#&					choice=\"edit\"!@#&					done=true!@#&				elseif (selection==3) then!@#&					choice=\"delete\"!@#&					done=true!@#&				elseif (selection==4) then!@#&					choice=\"list\"!@#&					done=true!@#&				elseif (selection==5) then!@#&					done=true!@#&					title()!@#&					print(\"Logging out\")!@#&					sleep(1)!@#&					selection = 1!@#&					choice=\"nothing\"!@#&					done = true!@#&					usertype = \"nothing\"!@#&				elseif (selection==6) then!@#&					title()!@#&					print(\"Access Granted\")!@#&					sleep(1)!@#&					title()!@#&					print(\"Opening Door...\")!@#&					sleep(.5)!@#&					print(side)!@#&					rs.setOutput(stuff[\"side\"] , true)!@#&					title()!@#&					print(\"Door Open\")!@#&					sleep(3)!@#&					rs.setOutput(stuff[\"side\"] , false)!@#&					title()!@#&					print(\"Closing Door...\")!@#&					sleep(1)!@#&					done=true!@#&					choice=\"nothing\"!@#&				elseif (selection==7) then!@#&					if(usertype==\"Owner\") then!@#&						done = true!@#&						choice=\"lock\"!@#&					else !@#&						title()!@#&						print(\"//!!ERROR!!This fucntion is off limits//\")!@#&						sleep(1)!@#&						done = true!@#&						choice = \"guimenu\"!@#&					end!@#&				elseif (selection==8) then!@#&					if(usertype==\"Owner\") then!@#&						done = true!@#&						choice=\"settings\"!@#&					else !@#&						title()!@#&						print(\"//!!ERROR!!This fucntion is off limits//\")!@#&						sleep(1)!@#&						done = true!@#&						choice = \"guimenu\"!@#&					end!@#&				elseif (selection==9) then!@#&					if(usertype==\"Owner\") then!@#&						done = true!@#&						menu = false!@#&					else !@#&						title()!@#&						print(\"//!!ERROR!!This fucntion is off limits//\")!@#&						sleep(1)!@#&						done = true!@#&						choice = \"guimenu\"!@#&					end!@#&				end!@#&			end	!@#&		end!@#&	end!@#&!@#&	function addGui()!@#&		title()!@#&		x,yaa = term.getCursorPos()!@#&		if(addSelection==1)then!@#&			print(\"Username:[\"..addusername..\"]\")!@#&		else!@#&			print(\"Username: \"..addusername)!@#&		end!@#&		x,ybb = term.getCursorPos()!@#&		if(addSelection==2)then!@#&			print(\"Password:[\"..addpass..\"]\")!@#&		else!@#&			print(\"Password: \"..addpass)!@#&		end!@#&		x,ycc = term.getCursorPos()!@#&		if(addSelection==3)then!@#&			print(\"Level   :[\"..addlevel..\"]\")!@#&		else!@#&			print(\"Level   : \"..addlevel)!@#&		end!@#&		if(addSelection==4)then!@#&			print(\"    [DONE]\")!@#&		else!@#&			print(\"     DONE\")!@#&		end!@#&		print()!@#&	end!@#&	!@#&	function add()!@#&		addSelection = 1!@#&		adding = true!@#&		addusername = \" \"!@#&		addpass = \"----\"!@#&		addlevel = \"----\"!@#&		while adding==true do!@#&			addGui()!@#&			addSelection, key = guiSelection(4,1,addSelection)!@#&			if(key==28)then!@#&				if(addSelection==1)then!@#&					term.setCursorPos(1,yaa)!@#&					term.clearLine()!@#&					write(\"Username: \")!@#&					local newuser = io.read()!@#&					if(fs.exists(\"userinfo/\"..newuser)==true) then!@#&						term.setCursorPos(1,yaa)!@#&						term.clearLine()!@#&						write(\"Username: \"..addusername)!@#&					else!@#&						addusername = newuser!@#&						addpass = \" \"!@#&						addlevel = \" \"!@#&					end!@#&				elseif(addSelection==2 and addusername~=\" \")then!@#&					term.setCursorPos(1,ybb)!@#&					term.clearLine()!@#&					write(\"Password: \")!@#&					local newpass = io.read()!@#&					!@#&					addpass = newpass!@#&				elseif(addSelection==3 and addusername~=\" \")then!@#&					term.setCursorPos(1,ycc)!@#&					term.clearLine()!@#&					write(\"Level   : \")!@#&					local newlevel = io.read()!@#&					if(usertype==\"Admin\")then!@#&						if(newlevel==\"Admin\" or newlevel==\"admin\" or newlevel==\"Owner\" or newlevel==\"owner\")then!@#&							newlevel=addlevel!@#&						else!@#&							if(newlevel==\"employee\" or newlevel==\"Employee\" or newlevel==\"admin\" or newlevel==\"Admin\" or newlevel==\"owner\" or newlevel==\"Owner\")then!@#&								if (newlevel==\"employee\") then!@#&									newlevel=\"Employee\"!@#&								elseif (newlevel==\"admin\") then!@#&									newlevel=\"Admin\"!@#&								elseif(newlevel==\"owner\")then!@#&									newlevel=\"Owner\"!@#&								end!@#&								addlevel = newlevel!@#&							end!@#&						end!@#&					elseif(usertype==\"Owner\")then!@#&						!@#&						if(newlevel==\"employee\" or newlevel==\"Employee\" or newlevel==\"admin\" or newlevel==\"Admin\" or newlevel==\"owner\" or newlevel==\"Owner\")then!@#&							if (newlevel==\"employee\") then!@#&								newlevel=\"Employee\"!@#&							elseif (newlevel==\"admin\") then!@#&								newlevel=\"Admin\"!@#&							elseif(newlevel==\"owner\")then!@#&								newlevel=\"Owner\"!@#&							end!@#&							addlevel = newlevel!@#&						end!@#&					end!@#&				elseif(addSelection==4 and addusername~=\" \" and addpass~=\" \" and addlevel~=\" \")then!@#&					adding=false!@#&					local open = fs.open(\"userinfo/\"..addusername , \"w\")!@#&					open.writeLine(addpass)!@#&					open.writeLine(addlevel)!@#&					open.writeLine(\"0\")!@#&					open.writeLine(\"never\")!@#&					open.writeLine(\"0\")!@#&					open.close()!@#&					title()!@#&					print(\"User Added\")	!@#&					sleep(1)	!@#&				elseif(addSelection==4 and addusername==\" \")then!@#&					adding = false!@#&				end!@#&			elseif(key==211)then!@#&				adding = false!@#&			end		!@#&		end!@#&		choice = \"guimenu\"!@#&			!@#&	end!@#&	!@#&	function editGui()!@#&		local read = fs.open(\"userinfo/\"..editusername , \"r\")!@#&		local pass = read.readLine()!@#&		local level = read.readLine()!@#&		read.close()!@#&		title()!@#&		x,ya = term.getCursorPos()!@#&		if(editSelection==1)then!@#&			print(\"Username:[\"..editusername..\"]\")!@#&		else!@#&			print(\"Username: \"..editusername)!@#&		end!@#&		x,yb = term.getCursorPos()!@#&		if(editSelection==2)then!@#&			print(\"Password:[\"..pass..\"]\")!@#&		else!@#&			print(\"Password: \"..pass)!@#&		end!@#&		x,yc = term.getCursorPos()!@#&		if(editSelection==3)then!@#&			print(\"Level   :[\"..level..\"]\")!@#&		else!@#&			print(\"Level   : \"..level)!@#&		end!@#&		if(editSelection==4)then!@#&			print(\"    [DONE]\")!@#&		else!@#&			print(\"     DONE\")!@#&		end!@#&	end!@#&	!@#&	function editMenu()!@#&		editing=true!@#&		editSelection=1!@#&		while editing do!@#&			local read = fs.open(\"userinfo/\"..editusername , \"r\")!@#&			local pass = read.readLine()!@#&			local level = read.readLine()!@#&			local logins = read.readLine()!@#&			local lastlog = read.readLine()!@#&			local lastdate = read.readLine()!@#&			read.close()!@#&			editGui()!@#&			editSelection , key = guiSelection(4,1,editSelection)!@#&			if(key==28)then!@#&!@#&				if(editSelection==1)then!@#&					term.setCursorPos(1,ya)!@#&					term.clearLine()!@#&					write(\"Username: \")!@#&					local newuser = io.read()!@#&					if(fs.exists(\"userinfo/\"..newuser)==true) then!@#&						term.setCursorPos(1,ya)!@#&						term.clearLine()!@#&						write(\"Username: \"..editusername)!@#&					else!@#&						fs.delete(\"userinfo/\"..editusername)!@#&						local open = fs.open(\"userinfo/\"..newuser , \"w\")!@#&						open.writeLine(pass)!@#&						open.writeLine(level)!@#&						open.writeLine(logins)!@#&						open.writeLine(lastlog)!@#&						open.writeLine(lastdate)!@#&						open.close()!@#&						editusername = newuser!@#&					end!@#&				elseif(editSelection==2)then!@#&					term.setCursorPos(1,yb)!@#&					term.clearLine()!@#&					write(\"Password: \")!@#&					local newpass = io.read()!@#&					local open = fs.open(\"userinfo/\"..editusername , \"w\")!@#&					open.writeLine(newpass)!@#&					open.writeLine(level)!@#&					open.writeLine(logins)!@#&					open.writeLine(lastlog)!@#&					open.writeLine(lastdate)!@#&					open.close()!@#&				elseif(editSelection==3)then!@#&					term.setCursorPos(1,yc)!@#&					term.clearLine()!@#&					write(\"Level   : \")!@#&					local newlevel = io.read()!@#&					if(newlevel==\"employee\" or newlevel==\"Employee\" or newlevel==\"admin\" or newlevel==\"Admin\" or newlevel==\"owner\" or newlevel==\"Owner\")then!@#&						if (newlevel==\"employee\") then!@#&							newlevel=\"Employee\"!@#&						elseif (newlevel==\"admin\") then!@#&							newlevel=\"Admin\"!@#&						elseif(newlevel==\"owner\")then!@#&							newlevel=\"Owner\"!@#&						end!@#&					end!@#&					if(usertype==\"Admin\")then!@#&						if(newlevel==\"Admin\" or newlevel==\"Owner\")then!@#&							print(\"//!!ERROR!!User Not Authorised To Make This Change//\")!@#&						else!@#&							local open = fs.open(\"userinfo/\"..editusername , \"w\")!@#&							open.writeLine(pass)!@#&							open.writeLine(newlevel)!@#&							open.writeLine(logins)!@#&							open.writeLine(lastlog)!@#&							open.writeLine(lastdate)!@#&							open.close()!@#&						end!@#&					elseif(usertype==\"Owner\")then!@#&						local open = fs.open(\"userinfo/\"..editusername , \"w\")!@#&						open.writeLine(pass)!@#&						open.writeLine(newlevel)!@#&						open.writeLine(logins)!@#&						open.writeLine(lastlog)!@#&						open.writeLine(lastdate)!@#&						open.close()!@#&					end!@#&				elseif(editSelection==4)then!@#&					editing = false!@#&				end!@#&			end!@#&		end!@#&		choice=\"guimenu\"!@#&	end!@#&	!@#&	function edit()!@#&		title()!@#&		print(\"Enter the username you would like to edit\")!@#&		write(\":> \")!@#&		editusername = io.read()!@#&		if (fs.exists(\"userinfo/\"..editusername)==true) then!@#&			local read = fs.open(\"userinfo/\"..editusername , \"r\")!@#&			editpass = read.readLine()!@#&			editlevel = read.readLine()!@#&			read.close()!@#&			if(editlevel==\"Admin\" or editlevel==\"Owner\") then!@#&				if(usertype==\"Owner\") then!@#&					editMenu()!@#&				else!@#&					print(\"//!!ERROR!!User Not Authorised To Edit This Account//\")!@#&					sleep(1)!@#&				end!@#&			else!@#&				editMenu()!@#&			end!@#&		else!@#&			print(\"//!!ERROR!!User Does Not Exists//\")!@#&			sleep(1)!@#&		end!@#&	end!@#&	!@#&	function delete()!@#&		title()!@#&		print(\"Enter the username you would like to delete\") !@#&		write(\":> \")!@#&		local username = io.read()!@#&		if (fs.exists(\"userinfo/\"..username)==true) then!@#&			local read = fs.open(\"userinfo/\"..username , \"r\")!@#&			local pass = read.readLine()!@#&			local level = read.readLine()!@#&			read.close()!@#&			if(level==\"Admin\" or level==\"Owner\") then!@#&				if(usertype==\"Owner\") then!@#&					fs.delete(\"userinfo/\"..username)!@#&					title()!@#&					print(\"User deleted\")!@#&					sleep(1)!@#&				else!@#&					print(\"//!!ERROR!!User Not Authorised To Delete This Account//\")!@#&					sleep(1)!@#&				end!@#&			else!@#&				fs.delete(\"userinfo/\"..username)!@#&				title()!@#&				print(\"User deleted\")!@#&				sleep(1)!@#&			end!@#&		else !@#&			print(\"//!!ERROR!!User Does Not Exists//\")!@#&			sleep(1)!@#&		end!@#&		choice = \"guimenu\"!@#&	end!@#&	!@#&	function displayAccount(user)!@#&		local running = true!@#&		local derp = 1!@#&		local stuff = getsettings()!@#&		!@#&		local read = fs.open(\"userinfo/\"..user , \"r\")!@#&		local pass = read.readLine()!@#&		local level = read.readLine()!@#&		local numLogins = read.readLine()!@#&		local lastlogtime = read.readLine()!@#&		local lastlogdate = read.readLine()!@#&		read.close()!@#&		!@#&		term.clear()!@#&		term.setCursorPos(1,1)!@#&		while running do!@#&			title()!@#&			print(\"---------\")!@#&			print(\"|  0 0  |\")!@#&			print(\"|   |   |\")!@#&			print(\"|  \\\\_/  |\")!@#&			print(\"---------\")!@#&			print(user)!@#&			print()!@#&			print(\"-userinfo-\")!@#&			print(\"Password: \"..pass)!@#&			print(\"UserLevel: \"..level)!@#&			print(\"# of logins: \"..numLogins)!@#&			if(lastlog==\"never\")then!@#&				print(\"Last login: \"..(integer)(lastlog))!@#&			else!@#&				print(\"Last login: \"..lastlogtime..\" \"..(tonumber(stuff[\"date\"])-tonumber(lastlogdate))..\" days ago\")!@#&			end!@#&			print()!@#&			print(\":Hit Any Key to Continue\")!@#&			derp , key = guiSelection(2,1,derp)!@#&			if(key~=nil)then!@#&				running = false!@#&			end!@#&		end	!@#&	end!@#&	!@#&	function otherList()!@#&		local selection = 1!@#&		local number = 6!@#&		local endnum=8!@#&		local running = true!@#&		local count = 0!@#&		local accountuser = {}!@#&		local place = 0!@#&		local filename = fs.list(\"userinfo\")!@#&		local derp = true!@#&		for number=1,5,1 do!@#&			accountuser[number] = \" \"!@#&		end!@#&		for _,file in ipairs( filename ) do!@#&			if (file==\"firsttime\" or file==\"settings\") then!@#&			else!@#&				accountuser[number] = file!@#&				number = number+1!@#&			end!@#&		end!@#&		for anumber=table.getn(accountuser),table.getn(accountuser)+2,1 do!@#&			accountuser[anumber] = \" \"!@#&			number = number+1!@#&		end!@#&		--if(count>1)then!@#&		--	number=number-1!@#&		--end!@#&		--if(count<8)then!@#&		--	endnum = number!@#&		--else!@#&		--	endnum = 8!@#&		--end!@#&		while running do!@#&			derp = true!@#&			place = 0!@#&			term.clear()!@#&			term.setCursorPos(1,1)!@#&			term.setCursorPos(15,4)!@#&			for derp=1,20,1 do!@#&				write(\"-\")!@#&			end!@#&			for start=1+count,endnum+count,1 do!@#&				if(start-count == endnum/2)then!@#&					term.setCursorPos(16,10)!@#&					write(\"[\")!@#&				end!@#&				middle(accountuser[start],place)!@#&				write(accountuser[start])!@#&				if(start-count == endnum/2)then!@#&					term.setCursorPos(33,10)!@#&					write(\"]\")!@#&				else!@#&					print()!@#&				end!@#&				place = place+1!@#&			end!@#&			term.setCursorPos(15,13)!@#&			for derp=1,20,1 do!@#&				write(\"-\")!@#&			end!@#&			while derp do!@#&				Event, key = os.pullEvent(\"key\")!@#&				if(endnum~=number)then!@#&					if (key==208) then!@#&						title()!@#&						count=count+1!@#&						derp = false!@#&						selection = selection+1!@#&					elseif (key==200) then!@#&						title()!@#&						count=count-1!@#&						derp = false!@#&						selection = selection-1!@#&					end!@#&				end!@#&				if(key==28)then!@#&					displayAccount(accountuser[selection+5])!@#&					title()!@#&					derp = false!@#&				end!@#&				if(key==211)then!@#&					derp = false!@#&					running = false!@#&				end!@#&				if(count<0) then!@#&					count=0!@#&					selection = selection+1!@#&				elseif(count+11>number) then!@#&					count=number-11!@#&					selection = selection-1!@#&				end  !@#&			end!@#&		end!@#&		choice = \"guimenu\"!@#&	end!@#&	!@#&	function list()!@#&		local theend = \"\"!@#&		O = 0!@#&		A = 0!@#&		E = 0!@#&		local level = \"unknown\"!@#&		local done = false!@#&		local acountsu = {}!@#&		local acountsp = {}!@#&		local acountsl = {}!@#&		acountslog = {}!@#&		numAcounts = 0!@#&		local count = 0!@#&		local endnum=11!@#&		herp = false!@#&		local up=\"  \"!@#&		local down=\"  \"!@#&		title()!@#&		local stuff = getsettings()!@#&		local filename = fs.list(\"userinfo\") !@#&		for _,file in ipairs( filename ) do!@#&			local read = fs.open(\"userinfo/\"..file , \"r\")!@#&			local pass = read.readLine()!@#&			local level = read.readLine()!@#&			local numLogins = read.readLine()!@#&			if (file==\"firsttime\" or file==\"settings\") then!@#&			else!@#&				acountsu[numAcounts] = file!@#&				acountsp[numAcounts] = pass!@#&				acountsl[numAcounts] = level!@#&				acountslog[numAcounts] = numLogins!@#&				numAcounts=numAcounts+1!@#&				if(level==\"Employee\")then!@#&					E = E+1!@#&				elseif(level==\"Admin\")then!@#&					A = A+1!@#&				elseif(level==\"Owner\")then!@#&					O = O+1!@#&				end!@#&			end!@#&			read.close()!@#&		end!@#&		if(numAcounts>1)then!@#&			numAcounts=numAcounts-1!@#&		end!@#&		if(numAcounts<endnum)then!@#&			endnum = numAcounts!@#&		else!@#&			endnum = 11!@#&		end!@#&		while done == false do!@#&			print(\"Format <username : password : usertype>\")!@#&			print(\" \")!@#&			for start=0+count,endnum+count,1 do!@#&									!@#&				if (numAcounts==0) then!@#&					print(\"This database contains no user acounts\")!@#&					break!@#&				elseif(numAcounts>0) then !@#&					if(usertype==\"Owner\") then!@#&						print(\"<\"..acountsu[start]..addspace(acountsu[start])..\" : \"..acountsp[start]..addspace(acountsp[start])..\" : \"..acountsl[start]..addspace(acountsl[start])..\">\")!@#&					elseif(usertype==\"Admin\") then!@#&						if(stuff[\"admin\"]==\"true\")then!@#&							if(acountsl[start]==\"Employee\")then!@#&								print(\"<\"..acountsu[start]..addspace(acountsu[start])..\" : \"..acountsp[start]..addspace(acountsp[start])..\" : \"..acountsl[start]..addspace(acountsl[start])..\">\")!@#&							else!@#&								print(\"<\"..acountsu[start]..addspace(acountsu[start])..\" : ----\"..addspace(\"----\")..\" : \"..acountsl[start]..addspace(acountsl[start])..\">\")	!@#&							end!@#&						else!@#&							print(\"<\"..acountsu[start]..addspace(acountsu[start])..\" : ----\"..addspace(\"----\")..\" : \"..acountsl[start]..addspace(acountsl[start])..\">\")	!@#&						end!@#&					end!@#&					!@#&				end!@#&			end!@#&			if(count==0 and endnum==11) then!@#&				up=\"  \"!@#&				down=\"\\\\/\"!@#&				theend = \"\"!@#&			elseif(count+11==numAcounts) then!@#&				down=\"  \"!@#&				up=\"/\\\\\"!@#&				theend = \"HIT ENTER TO QUIT\"!@#&			elseif(endnum==numAcounts)then!@#&				up=\"  \"!@#&				down=\"  \"!@#&				theend = \"HIT ENTER TO QUIT\"!@#&			else !@#&				up=\"/\\\\\"!@#&				down=\"\\\\/\"!@#&				theend = \"\"!@#&			end!@#&			print(\"               \"..up..\"               Employees:\"..E)!@#&			print(\"               --               Admins:\"..A)!@#&			print(\"               \"..down..\"               Owners:\"..O)           !@#&			write(\"         \"..theend)             !@#&			x,y = term.getSize()!@#&			term.setCursorPos(x/2+8,y)!@#&			print(\"Total:\"..table.getn(acountsu)+1)!@#&			herp = false!@#&			while herp==false do!@#&				Event, key = os.pullEvent(\"key\")!@#&				if(endnum~=numAcounts)then!@#&					if (key==208) then!@#&						title()!@#&						count=count+1!@#&						herp = true!@#&					elseif (key==200) then!@#&						title()!@#&						count=count-1!@#&						herp = true!@#&					end!@#&				end!@#&				if(key==28)then!@#&					done=true!@#&					herp = true!@#&				end!@#&				if(count<0) then!@#&					count=0!@#&				elseif(count+11>numAcounts) then!@#&					count=numAcounts-11!@#&				else !@#&				end!@#&			end!@#&			!@#&		end!@#&		!@#&		choice = \"guimenu\"!@#&	end!@#&	!@#&	function lock()!@#&		stuff = getsettings()!@#&		open = fs.open(\"userinfo/settings\" , \"w\")!@#&		open.writeLine(stuff[\"side\"])!@#&		if (stuff[\"lockstate\"]==\"unlocked\") then!@#&			open.writeLine(\"locked\")!@#&			title()!@#&			print(\"Locking Terminal\")!@#&			sleep(1)!@#&		else!@#&			open.writeLine(\"unlocked\")!@#&			title()!@#&			print(\"Unlocking Terminal\")!@#&			sleep(1)!@#&		end!@#&		open.writeLine(stuff[\"date\"])!@#&		open.writeLine(stuff[\"admin\"])!@#&		open.writeLine(stuff[\"list\"])!@#&		open.writeLine(stuff[\"time\"])!@#&		open.close()!@#&		choice = \"guimenu\"!@#&	end!@#&	!@#&	function settingsgui(setselection)!@#&		title()!@#&		local selection = setselection!@#&		local stuff = getsettings()!@#&		print(\"System settings\")!@#&		print()!@#&		width,height = term.getCursorPos()!@#&		if(selection==1)then!@#&			print(\"[\"..stuff[\"side\"]..addspace(stuff[\"side\"],6)..\"]: side\")!@#&		else!@#&			print(\" \"..stuff[\"side\"]..addspace(stuff[\"side\"],6)..\" : side\")!@#&		end!@#&		!@#&		if(selection==2)then!@#&			print(\"[\"..stuff[\"date\"]..addspace(stuff[\"date\"],6)..\"]: current day\")!@#&		else!@#&			print(\" \"..stuff[\"date\"]..addspace(stuff[\"date\"],6)..\" : current day\")!@#&		end!@#&		!@#&		if(selection==3)then!@#&			print(\"[\"..stuff[\"admin\"]..addspace(stuff[\"admin\"],6)..\"]: can Admin see passwords?\")!@#&		else!@#&			print(\" \"..stuff[\"admin\"]..addspace(stuff[\"admin\"],6)..\" : can Admin see passwords?\")!@#&		end!@#&		!@#&		if(selection==4)then!@#&			print(\"[\"..stuff[\"list\"]..addspace(stuff[\"list\"],6)..\"]: secondary list style\")!@#&		else!@#&			print(\" \"..stuff[\"list\"]..addspace(stuff[\"list\"],6)..\" : secondary list style\")!@#&		end!@#&		!@#&		if(selection==5)then!@#&			print(\"[\"..stuff[\"time\"]..addspace(stuff[\"time\"],6)..\"]: military time\")!@#&		else!@#&			print(\" \"..stuff[\"time\"]..addspace(stuff[\"time\"],6)..\" : military time\")!@#&		end!@#&		if(selection==6)then!@#&			print(\"[Done\"..addspace(\"Done\",6)..\"]\")!@#&		else!@#&			print(\" Done\")!@#&		end!@#&	end!@#&	!@#&	function settings()!@#&		local minecraft = 1!@#&		title()!@#&		local running = true!@#&		while running do!@#&			settingsgui(minecraft)!@#&			minecraft,key = guiSelection(6,1,minecraft)!@#&			if(key==28)then!@#&				local stuff = getsettings()!@#&				if(minecraft==1)then!@#&					term.setCursorPos(width,height)!@#&					term.clearLine()!@#&					term.setCursorPos(width,height)!@#&					term.write(\"         : side\")!@#&					term.setCursorPos(width+1,height)!@#&					stuff[\"side\"] = io.read()!@#&				elseif(minecraft==3)then!@#&					if(stuff[\"admin\"]==\"false\")then!@#&						stuff[\"admin\"]=\"true\"!@#&					else!@#&						stuff[\"admin\"]=\"false\"!@#&					end!@#&				elseif(minecraft==4)then!@#&					if(stuff[\"list\"]==\"false\")then!@#&						stuff[\"list\"]=\"true\"!@#&					else!@#&						stuff[\"list\"]=\"false\"!@#&					end!@#&				elseif(minecraft==5)then!@#&					if(stuff[\"time\"]==\"false\")then!@#&						stuff[\"time\"]=\"true\"!@#&					else!@#&						stuff[\"time\"]=\"false\"!@#&					end	!@#&				elseif(minecraft==6)then!@#&					running = false!@#&				end!@#&				local edit = fs.open(\"userinfo/settings\" , \"w\")!@#&				edit.writeLine(stuff[\"side\"])!@#&				edit.writeLine(stuff[\"lockstate\"])!@#&				edit.writeLine(stuff[\"date\"])!@#&				edit.writeLine(stuff[\"admin\"])!@#&				edit.writeLine(stuff[\"list\"])!@#&				edit.writeLine(stuff[\"time\"])!@#&				edit.close()!@#&			end!@#&		end!@#&		choice = \"guimenu\"!@#&	end!@#&	!@#&--******PROGRAM STARTS HERE*******!@#&start()!@#&while menu==true do!@#&	local stuff = getsettings()!@#&	if (choice==\"add\") then!@#&		if(pcall(add)==false)then!@#&			title()!@#&			print(\"Failed to add acount\")!@#&			sleep(2)!@#&			choice=\"guimenu\"!@#&		end!@#&	elseif (choice==\"edit\") then!@#&		if(pcall(edit)==false)then!@#&			title()!@#&			print(\"Failed to edit acount\")!@#&			sleep(2)!@#&			choice=\"guimenu\"!@#&		end!@#&	elseif (choice==\"delete\") then	!@#&		if(pcall(delete)==false)then!@#&			title()!@#&			print(\"Failed to delete acount\")!@#&			sleep(2)!@#&			choice=\"guimenu\"!@#&		end!@#&	elseif (choice==\"list\") then!@#&		if(stuff[\"list\"]==\"true\")then!@#&			if(pcall(otherList)==false)then!@#&				title()!@#&				print(\"Failed to list available acounts\")!@#&				sleep(2)!@#&				choice=\"guimenu\"!@#&			end !@#&		else!@#&			if(pcall(list)==false)then!@#&				title()!@#&				print(\"Failed to list available acounts\")!@#&				sleep(2)!@#&				choice=\"guimenu\"!@#&			end  !@#&		end!@#&		!@#&	elseif (choice==\"lock\")then!@#&		if(pcall(lock)==false)then!@#&			title()!@#&			print(\"Failed to lock terminal\")!@#&			sleep(2)!@#&			choice=\"guimenu\" !@#&		end!@#&	elseif(choice==\"settings\")then!@#&		if(pcall(settings)==false)then!@#&			title()!@#&			print(\"Failed to access settings GUI\")!@#&			sleep(2)!@#&			choice=\"guimenu\"!@#&		end!@#&	elseif(choice==\"guimenu\")then!@#&		guimenu()!@#&	else!@#&		if(pcall(promptuserinfo)==false)then!@#&			title()!@#&			print(\"Failed to get input/Bad input\")!@#&			sleep(2)!@#&			--choice=\"guimenu\"!@#&		end!@#&	end!@#&end!@#&term.clear()!@#&term.setCursorPos(1,1)",["levels"]={["01_box.nfp"]="77777777777777777777777777777777777              !@#&7                                 7              !@#&7                                 7              !@#&7       8          8       8      7              !@#&7                                 7              !@#&7    5555555555555555557555555    7              !@#&7    5555755555555555555755557    7              !@#&7  8 5555555555555555555555555 8  7              !@#&7    5555555555555555555555555    7              !@#&7    5555555575550555555557555    7              !@#&7    5555555555555555555555555    7              !@#&7  8 55575555555555557555555558   7              !@#&7    5555555555555555555555555    7              !@#&7    5555555555755555555555555    7              !@#&7                           8     7              !@#&7      8              8           7              !@#&7                                 7              !@#&7                                 7              !@#&77777777777777777777777777777777777",},["HighOrLow"]="--[[!@#&High or low!@#&By Konlab!@#& !@#&]]!@#&--init!@#&local version = 1.2!@#&local w,h = term.getSize()!@#&local maxnum = 20!@#&local theme = 4!@#&local themes = {{\"Old\",colors.orange,colors.black},{\"New\",colors.lightBlue,colors.black},{\"Dark & Blue\",colors.blue,colors.black},{\"Green\",colors.green,colors.white},{\"White\",colors.white,colors.black}}!@#&local money = 0!@#&local configpath = \"/SpeedOS/Applications/GameBox/.hilodata\"!@#&--scoreboard functions!@#&local function split(inputstr, sep)!@#&        if sep == nil then!@#&                sep = \"%s\"!@#&        end!@#&        local t={} ; i=1!@#&        for str in string.gmatch(inputstr, \"([^\"..sep..\"]+)\") do!@#&                t[i] = str!@#&                i = i + 1!@#&        end!@#&        return t!@#&end!@#&local function getScoreboard(url)!@#&	local tab = {}!@#&	local t2 = {}!@#&	local a = http.get(url)!@#&	local contents = a.readAll()!@#&	a.close()!@#&	local tab = split(contents,\"\\n\")!@#&	local i = 1!@#&	local str = tab[i]!@#&	while str ~= \"begin\" do!@#&		i = i + 1!@#&		str = tab[i]!@#&	end!@#&	i = i + 1!@#&	while str ~= \"end\" do!@#&		t2[#t2+1] = str!@#&		i = i + 1!@#&		str = tab[i]!@#&	end!@#&	for i=1,#t2 do!@#&		t2[i] = split(t2[i],\"~\")!@#&	end!@#&	return t2!@#&end!@#&local function putScore(url,name,score)!@#&http.get(url .. \"?name=\" .. name .. \"&score=\" .. score)!@#&end!@#&--functions!@#&local function cl()!@#&  term.setBackgroundColor(themes[theme][2])!@#&  term.setTextColor(themes[theme][3])!@#&  term.clear()!@#&  term.setCursorPos(1,1)!@#&end!@#&local function loaddata()!@#&	local file = fs.open(configpath,\"r\")!@#&	maxnum = tonumber(file.readLine())!@#&	theme = tonumber(file.readLine())!@#&	money = tonumber(file.readLine())!@#&	file.close()!@#&end!@#&local function savedata()!@#&	local file = fs.open(configpath,\"w\")!@#&	file.writeLine(maxnum)!@#&	file.writeLine(theme)!@#&	file.writeLine(money)!@#&	file.close()!@#&end!@#&local function init()!@#&	if fs.exists(configpath) then!@#&		loaddata()	!@#&	else!@#&	    savedata()	!@#&	end!@#&end!@#&local function loadscreen()!@#&  term.setBackgroundColor(colors.orange)!@#&  term.setTextColor(colors.black)!@#&  term.clear()!@#&  local text = {\"High or Low\",\"For GameBox\",\"version: \"..version}!@#&  for i=1,#text do!@#&    term.setCursorPos(math.floor(w/2-#text[i]/2),math.floor(h/2-#text/2+i))!@#&    term.write(text[i])!@#&  end!@#&  init()!@#&end!@#&local function choosetheme()!@#&cl()!@#&i = 0!@#&for k,v in pairs(themes) do!@#&	i = i + 1!@#&	term.setBackgroundColor(v[2])!@#&	term.setTextColor(v[3])!@#&	term.setCursorPos(2,i)!@#&	term.write(v[1])!@#&	if k == theme then!@#&	  term.write(\" - selected\")	!@#&	end!@#&end!@#&local _,_,_,y = os.pullEvent(\"mouse_click\")!@#&if y < #themes + 1 then!@#&theme = y	!@#&end!@#&end!@#&local function settings()!@#&		cl()!@#&		print([[Settings:!@#&			!@#&			Max number:!@#&			]])!@#&		term.setCursorPos(1,h)!@#&		term.write(\"click anywhere else to go back\")!@#&		term.setTextColor(colors.black)!@#&		term.setCursorPos(1,4)!@#&		term.setBackgroundColor(colors.white)!@#&		term.clearLine()!@#&		term.setCursorPos(2,4)!@#&		term.write(maxnum)!@#&		term.setCursorPos(1,6)!@#&		term.clearLine()!@#&		term.setCursorPos(2,6)!@#&		term.write(\"Choose a theme\")!@#&		term.setCursorPos(1,8)!@#&		term.clearLine()!@#&		term.setCursorPos(2,8)!@#&		term.write(\"View scores\")!@#&		term.setCursorPos(1,10)!@#&		term.clearLine()!@#&		term.setCursorPos(2,10)!@#&		term.write(\"Submit my score\")!@#&		local _,_,_,y = os.pullEvent(\"mouse_click\")!@#&		if y == 4 then!@#&			term.setCursorPos(1,4)!@#&			term.clearLine()!@#&		  term.setCursorPos(2,4)!@#&		  maxnum = math.floor(tonumber(read()))!@#&		  	if maxnum < 5 then!@#&		  		maxnum = 5!@#&		  	elseif maxnum > 100 then!@#&		  		maxnum = 100!@#&		  	end!@#&		elseif y == 6 then!@#&		  choosetheme()!@#&		elseif y == 8 then!@#&			local page = 0!@#&			cl()!@#&			print(\"Click / press enter to leave scoreboard mode\")!@#&			print(\"Use left and right arrow keys to page\")!@#&			print(\"Press any key to go in scoreboard mode\")!@#&			os.pullEvent()!@#&			while true do!@#&				cl()!@#&				local t = getScoreboard(\"http://Konlab.host22.com/Highorlow.php\")!@#&					for i=1+page*h,h+page*h do!@#&						if type(t[i]) == \"table\" then!@#&							if t[i][1] ~= nil and t[i][2] ~= nil then!@#&								print(t[i][1] .. \": \" .. t[i][2])!@#&							end!@#&						end!@#&					end!@#&					local event,v1,v2,v3 = os.pullEvent()!@#&					if event == \"key\" and v1 == keys.left and page > 0 then!@#&						page = page - 1!@#&					end!@#&					if event == \"key\" and v1 == keys.right and page < math.floor(#t/h) then!@#&						page = page + 1!@#&					end!@#&					if event == \"key\" and v1 == keys.enter then!@#&						break	!@#&					end!@#&					if event == \"mouse_click\" then!@#&						break	!@#&					end!@#&			end!@#&		elseif y == 10 then!@#&			cl()!@#&			print(\"Your name:\")!@#&			local name = read()!@#&			putScore(\"http://Konlab.host22.com/Highorlow.php\",name,money)!@#&		end!@#&end!@#&local function dIntf(currentNumber)!@#&        cl()!@#&        term.setBackgroundColor(themes[theme][2])!@#&        term.setCursorPos(1,3)!@#&        term.write(\"Number range: 1-\" .. maxnum)!@#&        term.setCursorPos(1,5)!@#&        term.write(\"Current number: \"..currentNumber)!@#&        term.setCursorPos(1,h-1)!@#&        term.write(\"Probability: \"..(maxnum-currentNumber)* (math.floor(10000/maxnum)/100) ..\"% / \" .. math.floor(10000/maxnum)/100 .. \"% / \" ..((currentNumber-1)*(math.floor(10000/maxnum)/100))..\"%\")!@#&        term.setCursorPos(1,h-2)!@#&        term.write(\"Money won: \" .. tostring(money))!@#&        term.setCursorPos(1,math.floor(h/2)-1)!@#&        term.write(\"\\\\/\")!@#&        term.setCursorPos(1,math.floor(h/2)+1)!@#&        term.write(\"/\\\\\")!@#&        term.clearLine()!@#&                for j=0,math.floor(w/5) do!@#&                  		term.setCursorPos(1+j*math.floor(w/5),math.floor(h/2))!@#&                        local k!@#&                        if currentNumber+j > maxnum then k = currentNumber+j - maxnum else k = currentNumber+j end!@#&                        term.write(k)!@#&        		end!@#&        --not the same background!@#&        term.setTextColor(colors.black)!@#&        term.setBackgroundColor(colors.white)!@#&        term.setCursorPos(1,1)!@#&        term.clearLine()!@#&        term.setCursorPos(1,1)!@#&        term.write(\"High or Low\")!@#&        term.setCursorPos(w-2,1)!@#&        term.write(\"S x\")!@#&        term.setCursorPos(1,h)!@#&        term.setBackgroundColor(colors.lime)!@#&        term.write(\"High\")!@#&        term.setBackgroundColor(colors.red)!@#&        term.setCursorPos(w-2,h)!@#&        term.write(\"Low\")!@#&        term.setBackgroundColor(colors.white)!@#&        term.setCursorPos(math.floor(w/2)-3,h)!@#&        term.write(\"Equal\")!@#&        !@#&end!@#&local function animateNums(wonNumber,preNumber)!@#&		term.setBackgroundColor(themes[theme][2])!@#&		term.setTextColor(themes[theme][3])!@#&        for i=preNumber,wonNumber+maxnum do!@#&                term.clearLine()!@#&                for j=0,math.floor(w/5) do!@#&                  term.setCursorPos(1+j*math.floor(w/5),math.floor(h/2))!@#&                        local k!@#&                        if i+j > maxnum then k = i+j - maxnum else k = i+j end!@#&                        term.write(k)!@#&                end!@#&                sleep(0.1)!@#&        end!@#&end!@#&local function calculate(prevNumber,state)!@#&        local nextNumber = math.random(1,maxnum)!@#&        animateNums(nextNumber,prevNumber)!@#&        if nextNumber < prevNumber then!@#&        	if state == 3 then!@#&          		money = money + math.floor(math.random(1,10000)^0.5)!@#&          	else!@#&          		money = math.floor(money - money/2)!@#&          	end!@#&        elseif nextNumber > prevNumber then!@#&        	!@#&        	if state == 1 then!@#&          		money = money + math.floor(math.random(1,10000)^0.5)!@#&          	else!@#&          		money = math.floor(money - money/2)!@#&          	end!@#&      else!@#&      	--equal!@#&      	if state == 2 then!@#&      			money = money + math.floor(math.random(10,100000)^0.5)--equal bonus :)!@#&          	else!@#&          		money = math.floor(money - money/2)!@#&      	end!@#&      end!@#&        return nextNumber!@#&end!@#&local function waitForActions(currentNumber)!@#&	while true do!@#&  		dIntf(currentNumber)!@#&		 local _,b,x,y = os.pullEvent(\"mouse_click\")!@#&		 local state!@#&		 if b == 1 and y == h then!@#&		      if x < 5 then state = 1 elseif x > w-3 then state = 3 elseif x > math.floor(w/2) - 3 and x < math.floor(w/2) + 3 then state = 2 end!@#&		             !@#&		 end!@#&		 if b == 1 and y == 1 and x == w then!@#&		 	savedata()!@#&		         term.setBackgroundColor(colors.black)!@#&				         term.setTextColor(colors.white)!@#&		          term.setCursorPos(1,1)!@#&		         term.clear()!@#&		         error(\"Bye\",0)!@#&		      end!@#&		  if b == 1 and y == 1 and x == w-2 then!@#&		  	    settings()!@#&		  	    currentNumber = math.ceil(maxnum/2)!@#&		  end!@#&		  if b == 2 then!@#&		  	    settings()!@#&		  	    currentNumber = math.ceil(maxnum/2)!@#&		  end!@#&		  if type(state) == \"number\"  then currentNumber = calculate(currentNumber,state) end!@#&          return currentNumber!@#&end!@#&end!@#&--main loop!@#&loadscreen()!@#&sleep(2)!@#&local currentNumber = math.ceil(maxnum/2)!@#&while true do!@#&   currentNumber = waitForActions(currentNumber)!@#&end",["testImage"]="5555555555!@#&5ff5555ff5!@#&5ff5555ff5!@#&5555ff5555!@#&55ffffff55!@#&55f5555f55!@#&5555555555",["tictactoe"]="space = {}!@#&for derp = 0,8,1 do!@#&	space[derp] = \" \"!@#&end!@#&turn = \"Player's\"!@#&selection = 0!@#&x = 1!@#&y = 1!@#&done = false!@#&winner = \"noone\"!@#&!@#&function title()!@#&	term.clear()!@#&	term.setCursorPos(1,1)!@#&	print(\"TicTacToe\")!@#&	width,height = term.getSize()!@#&	for derp = 1,width-1,1 do!@#&		write(\"-\")!@#&	end!@#&	print(\"It's the \"..turn..\" Turn\")!@#&	print()!@#&end	!@#&!@#&function drawBoard()!@#&	title()!@#&	count = 0!@#&	for rows = 1,3,1 do!@#&		for columns = 1,3,1 do!@#&			if(columns==x and rows==y) then!@#&				write(\"[\"..space[count]..\"]\")!@#&				selection=count!@#&			else!@#&				write(\" \"..space[count]..\" \")!@#&			end!@#&			if(columns == 1 or columns == 2) then!@#&				write(\"|\")!@#&			end!@#&			count = count+1!@#&		end!@#&		if(rows == 1 or rows == 2) then!@#&			print()!@#&			write(\"---+---+---\")!@#&			print()!@#&		end!@#&	end!@#&end!@#&!@#&function playersTurn()!@#&	g = false!@#&	while g == false do!@#&		drawBoard()!@#&		Event, key = os.pullEvent(\"key\")!@#&		if (key==200) then!@#&			y=y-1!@#&		elseif (key==208) then!@#&			y=y+1!@#&		elseif(key==205)then!@#&			x=x+1!@#&		elseif(key==203)then!@#&			x=x-1!@#&		end!@#&		if(x<1)then!@#&			x = 1!@#&		elseif(x>3)then!@#&			x = 3!@#&		elseif(y<1)then!@#&			y = 1!@#&		elseif(y>3)then!@#&			y = 3!@#&		end	!@#&		if(key==28)then!@#&			if (space[selection] == \" \") then!@#&				space[selection] = \"X\"!@#&				g = true!@#&			end!@#&		end!@#&	end!@#&end!@#&!@#&function checkWin()!@#&	local count = 0!@#&	for place=0,2,1 do!@#&		if(space[place]~=\" \")then!@#&			if(space[place+(3)]==space[place] and space[place+(6)]==space[place])then!@#&				if(space[place]==\"X\")then!@#&					winner = \"player\"!@#&				else	!@#&					winner = \"computer\"!@#&				end!@#&				space[place]=\"|\"!@#&				space[place+3]=\"|\"!@#&				space[place+6]=\"|\"!@#&			end!@#&			!@#&		end!@#&	end!@#&	for place=0,6,3 do!@#&		if(space[place]~=\" \")then!@#&			if(space[place+(1)]==space[place] and space[place+(2)]==space[place])then!@#&				if(space[place]==\"X\")then!@#&					winner = \"player\"!@#&				else	!@#&					winner = \"computer\"!@#&				end!@#&				space[place]=\"-\"!@#&				space[place+1]=\"-\"!@#&				space[place+2]=\"-\"!@#&			end!@#&			!@#&		end!@#&	end!@#&!@#&	if(space[0]==space[4] and space[0]==space[8] and space[4]~=\" \") then!@#&		if(space[0]==\"X\")then!@#&			winner=\"Player\"!@#&		elseif(space[0]==\"O\")then!@#&			winner=\"Computer\"!@#&		end!@#&		space[0]=\"\\\\\"!@#&		space[4]=\"\\\\\"!@#&		space[8]=\"\\\\\"!@#&	end!@#&	if(space[2]==space[4] and space[2]==space[6] and space[4]~=\" \") then!@#&		if(space[2]==\"X\")then!@#&			winner=\"Player\"!@#&		elseif(space[2]==\"O\")then!@#&			winner=\"Computer\"!@#&		end!@#&		space[2]=\"/\"!@#&		space[4]=\"/\"!@#&		space[6]=\"/\"!@#&	end!@#&	!@#&	for place=0,8,1 do!@#&		if(space[place]==\" \")then!@#&			break!@#&		else!@#&			count = count+1!@#&		end!@#&	end!@#&	--print(count)!@#&	--sleep(1)!@#&	if (count==9)then!@#&		drawBoard()!@#&		print(\"Its a tie game\")!@#&		return true!@#&	end!@#&	!@#&	if(winner~=\"noone\")then!@#&		drawBoard()!@#&		print(\"The \"..winner..\" has won\")!@#&		return true !@#&	else!@#&		return false!@#&	end!@#&end!@#&!@#&function checkBoard()!@#&	if(space[0]==\"X\" and space[1]==\"X\")then!@#&		if(space[2]==\" \")then!@#&			space[2]=\"O\"!@#&		else!@#&			pickRand()!@#&		end!@#&	elseif(space[0]==\"X\" and space[2]==\"X\")then!@#&		if(space[1]==\" \")then!@#&			space[1]=\"O\"!@#&		else!@#&			pickRand()!@#&		end!@#&	elseif(space[1]==\"X\" and space[2]==\"X\")then!@#&		if(space[0]==\" \")then!@#&			space[0]=\"O\"!@#&		else!@#&			pickRand()!@#&		end!@#&	elseif(space[3]==\"X\" and space[4]==\"X\")then!@#&		if(space[5]==\" \")then!@#&			space[5]=\"O\"!@#&		else!@#&			pickRand()!@#&		end!@#&	elseif(space[3]==\"X\" and space[5]==\"X\")then!@#&		if(space[4]==\" \")then!@#&			space[4]=\"O\"!@#&		else!@#&			pickRand()!@#&		end!@#&	elseif(space[4]==\"X\" and space[5]==\"X\")then!@#&		if(space[3]==\" \")then!@#&			space[3]=\"O\"!@#&		else!@#&			pickRand()!@#&		end!@#&	elseif(space[6]==\"X\" and space[7]==\"X\")then!@#&		if(space[8]==\" \")then!@#&			space[8]=\"O\"!@#&		else!@#&			pickRand()!@#&		end!@#&	elseif(space[6]==\"X\" and space[8]==\"X\")then!@#&		if(space[7]==\" \")then!@#&			space[7]=\"O\"!@#&		else!@#&			pickRand()!@#&		end!@#&	elseif(space[7]==\"X\" and space[8]==\"X\")then!@#&		if(space[6]==\" \")then!@#&			space[6]=\"O\"!@#&		else!@#&			pickRand()!@#&		end!@#&	elseif(space[0]==\"X\" and space[3]==\"X\")then!@#&		if(space[6]==\" \")then!@#&			space[6]=\"O\"!@#&		else!@#&			pickRand()!@#&		end!@#&	elseif(space[0]==\"X\" and space[6]==\"X\")then!@#&		if(space[3]==\" \")then!@#&			space[3]=\"O\"!@#&		else!@#&			pickRand()!@#&		end!@#&	elseif(space[3]==\"X\" and space[6]==\"X\")then!@#&		if(space[0]==\" \")then!@#&			space[0]=\"O\"!@#&		else!@#&			pickRand()!@#&		end!@#&	elseif(space[1]==\"X\" and space[4]==\"X\")then!@#&		if(space[7]==\" \")then!@#&			space[7]=\"O\"!@#&		else!@#&			pickRand()!@#&		end	!@#&	elseif(space[1]==\"X\" and space[7]==\"X\")then!@#&		if(space[4]==\" \")then!@#&			space[4]=\"O\"!@#&		else!@#&			pickRand()!@#&		end!@#&	elseif(space[4]==\"X\" and space[7]==\"X\")then!@#&		if(space[1]==\" \")then!@#&			space[1]=\"O\"!@#&		else!@#&			pickRand()!@#&		end!@#&	elseif(space[2]==\"X\" and space[5]==\"X\")then!@#&		if(space[8]==\" \")then!@#&			space[8]=\"O\"!@#&		else!@#&			pickRand()!@#&		end	!@#&	elseif(space[2]==\"X\" and space[8]==\"X\")then!@#&		if(space[5]==\" \")then!@#&			space[5]=\"O\"!@#&		else!@#&			pickRand()!@#&		end!@#&	elseif(space[5]==\"X\" and space[8]==\"X\")then!@#&		if(space[2]==\" \")then!@#&			space[2]=\"O\"!@#&		else!@#&			pickRand()!@#&		end!@#&	elseif(space[0]==\"X\" and space[4]==\"X\")then!@#&		if(space[8]==\" \")then!@#&			space[8]=\"O\"!@#&		else!@#&			pickRand()!@#&		end!@#&	elseif(space[0]==\"X\" and space[8]==\"X\")then!@#&		if(space[4]==\" \")then!@#&			space[4]=\"O\"!@#&		else!@#&			pickRand()!@#&		end!@#&	elseif(space[4]==\"X\" and space[8]==\"X\")then!@#&		if(space[0]==\" \")then!@#&			space[0]=\"O\"!@#&		else!@#&			pickRand()!@#&		end!@#&	elseif(space[2]==\"X\" and space[4]==\"X\")then!@#&		if(space[6]==\" \")then!@#&			space[6]=\"O\"!@#&		else!@#&			pickRand()!@#&		end!@#&	elseif(space[2]==\"X\" and space[6]==\"X\")then!@#&		if(space[4]==\" \")then!@#&			space[4]=\"O\"!@#&		else!@#&			pickRand()!@#&		end!@#&	elseif(space[4]==\"X\" and space[6]==\"X\")then!@#&		if(space[2]==\" \")then!@#&			space[2]=\"O\"!@#&		else!@#&			pickRand()!@#&		end!@#&	else!@#&		pickRand()!@#&	end!@#&	!@#&end!@#&!@#&function pickRand()!@#&	herp=true!@#&	while herp==true do!@#&		derp = math.random (0,8)!@#&		if(space[derp]==\" \")then!@#&			space[derp]=\"O\"!@#&			herp=false!@#&		end!@#&	end!@#&end!@#&!@#&function computersTurn()!@#&	drawBoard()!@#&	checkBoard()!@#&end!@#&!@#&while done==false do!@#&	turn = \"Player's\"!@#&	playersTurn()!@#&	if(checkWin())then!@#&		done = true!@#&	end!@#&	if(done==false)then!@#&		turn = \"Computer's\"!@#&		computersTurn()!@#&		if(checkWin())then!@#&			done = true!@#&		end!@#&	end!@#&end!@#&!@#&sleep(2)!@#&term.clear()!@#&term.setCursorPos(1,1)",["minesweep"]="local displays={}!@#&local termOption!@#&if term.isColor() then!@#&  displays[1]={wrap=nil,side=nil,name=\"Terminal\"}!@#&  termOption=true!@#&end!@#&!@#&for _,side in pairs(rs.getSides()) do!@#&  if peripheral.getType(side)==\"monitor\" then!@#&    local wrap=peripheral.wrap(side)!@#&    if wrap.isColor() then!@#&      local disp={wrap=wrap,side=side, name=\"Monitor (\"..side..\")\"}!@#&      displays[#displays+1]=disp!@#&    end!@#&  end!@#&end!@#&!@#&function writeCentered(text,line,clearFirst,fg,bg,padChar)!@#&  local w=term.getSize()!@#&  fg=fg or colors.white!@#&  bg=bg or colors.black!@#&  local x=math.floor((w-#text)/2)!@#&  term.setTextColor(fg)!@#&  term.setBackgroundColor(bg)!@#&  !@#&  if padChar then!@#&     text=string.rep(padChar,x)..text!@#&     text=text..string.rep(padChar,w-#text)!@#&     term.setCursorPos(1,line)!@#&  else!@#&     term.setCursorPos(x+1,line)!@#&     if clearFirst then term.clearLine() end!@#&  end!@#&  term.write(text)!@#&  return x+1!@#&end!@#&!@#&if #displays==0 then!@#&  print(\"Minesweep requires an advanced computer or monitor!\")!@#&  return!@#&end!@#&local redirected=false!@#&local prevRedir!@#&!@#&local function exitnow(forced)!@#&  if redirected then if term.restore then term.restore() else term.redirect(prevRedir) end end!@#&  term.setTextColor(colors.white)!@#&  term.setBackgroundColor(colors.black)!@#&  local w,h=term.getSize()!@#&  term.setCursorPos(1,h)!@#&  if forced then!@#&    print(\"Terminated\")!@#&    error()!@#&  else!@#&    term.scroll(1)!@#&    print(\"Thanks for playing!\")!@#&  end!@#&   !@#&end!@#&!@#&local function doSimpleMenu(title, list)!@#&  term.clear()!@#&  local selected=1!@#&  writeCentered(title,1)!@#&  local done=false!@#&  buttonPos={}!@#&  while not done do!@#&    for i=1,#list do!@#&      local text=list[i].name!@#&      local fg, bg!@#&      if i==selected then!@#&        fg=colors.black!@#&        bg=colors.white!@#&        text=\"[\"..text..\"]\"!@#&      else!@#&        fg=colors.white!@#&        bg=colors.black!@#&        text=\" \"..text..\" \"!@#&      end   !@#&      buttonPos[i]=writeCentered(text,4+i,false, fg,bg)+1!@#&    end!@#&  !@#&    while true do!@#&      local e={os.pullEventRaw()}!@#&      if e[1]==\"terminate\" then!@#&        exitnow(true)!@#&      elseif e[1]==\"key\" then!@#&        if e[2]==keys.up then!@#&          selected=selected-1!@#&          if selected==0 then selected=#list end!@#&          break!@#&        elseif e[2]==keys.down then!@#&          selected=selected+1!@#&          if selected>#list then selected=1 end!@#&          break!@#&        elseif e[2]==keys.enter then!@#&          done=true!@#&          break!@#&        end!@#&      elseif e[1]==\"mouse_click\" or e[1]==\"monitor_touch\" then!@#&        if e[4]>4 and e[4]<=4+#list then!@#&          local i=e[4]-4!@#&          if e[3]>=buttonPos[i] and e[3]<buttonPos[i]+#list[i].name then!@#&            selected=i!@#&            done=true!@#&            break!@#&          end!@#&        end!@#&      end          !@#&    end!@#&  end!@#&  return selected!@#&end!@#&!@#&local activeDisplay=1!@#&if #displays>1 then!@#&  activeDisplay=doSimpleMenu(\"Select the display to play on:\",displays) !@#&end!@#&!@#&if displays[activeDisplay].wrap then!@#&  term.setTextColor(colors.white)!@#&  term.setBackgroundColor(colors.black)!@#&  term.setCursorPos(1,19)!@#&  term.scroll(1)!@#&  print(\"Playing Minesweep on \"..displays[activeDisplay].side..\" monitor...\")  !@#&  prevRedir=term.redirect(displays[activeDisplay].wrap)!@#&  redirected=true!@#&  term.setTextColor(colors.white)!@#&  term.setBackgroundColor(colors.black)!@#&  term.clear()!@#&  displays[activeDisplay].wrap.setTextScale(.5)!@#&end!@#&!@#&local difLevels={!@#&  { name=\"easy\", width=6, height=6,mines=6},!@#&  { name=\"medium\", width=15, height=8,mines=15},!@#&  { name=\"hard\", width=30,height=17,mines=60},!@#&}!@#&!@#&local w,h=term.getSize()!@#&if w<20 then!@#&  difLevels[3]=nil!@#&end!@#&!@#&local level=doSimpleMenu(\"difficulty\",difLevels)!@#&local level=difLevels[level]!@#&!@#&local field={}!@#&!@#&local function forEachValidNeighbor(x,y,func)!@#&  for y2=math.max(y-1,1),math.min(y+1,level.height) do!@#&    for x2=math.max(x-1,1),math.min(x+1,level.width) do!@#&      if x~=x2 or y~=y2 then!@#&        func(x2,y2)      !@#&      end!@#&    end!@#&  end!@#&end!@#&!@#&local function genField()!@#&  for y=1,level.height do!@#&    field[y]={}!@#&    for x=1,level.width do!@#&      field[y][x]={mine=false,count=0,revealed=false,flag=false}!@#&    end!@#&  end!@#&  !@#&!@#&  for i=1,level.mines do!@#&    local x, y!@#&    repeat!@#&      x,y=math.random(1,level.width),math.random(level.height)!@#&    until field[y][x].mine==false!@#&    field[y][x].mine=true!@#&    forEachValidNeighbor(x,y,function(x,y) field[y][x].count=field[y][x].count+1 end)!@#&  end!@#&end!@#&!@#&local xoff,yoff=math.floor((w-level.width)/2), math.floor((h-level.height+2)/2)!@#&!@#&local mineColor, mineColorBg=colors.black,colors.red!@#&local flagColor=colors.red!@#&local unrevealedColorB=colors.lightGray!@#&local flagWrong=colors.black!@#&local flagWrongBg=colors.red!@#&local screenBg=colors.gray!@#&local infoBarColor=colors.yellow!@#&local infoBarBG=colors.blue!@#&local winColor, winColorBG, loseColor, loseColorBG=colors.green,colors.lightGray, colors.red, colors.lightGray!@#&!@#&if not term.isColor() then!@#&  mineColor, mineColorBg=colors.white,colors.black!@#&  flagColor=colors.black!@#&  unrevealedColorB=colors.white!@#&  flagWrong=colors.white!@#&  flagWrongBg=colors.black!@#&  screenBg=colors.black!@#&  infoBarColor=colors.white!@#&  infoBarBG=colors.black!@#&  winColor, winColorBG, loseColor, loseColorBG=colors.white, colors.black, colors.white, colors.black!@#&end!@#&!@#&local numColors = {!@#&  colors.lightBlue,!@#&  colors.green,!@#&  colors.red,!@#&  colors.blue,!@#&  colors.magenta,!@#&  colors.cyan,!@#&  colors.pink,!@#&  colors.purple,!@#&}!@#&  !@#&local function getNumColor(n)!@#&  if n>0 and term.isColor() then!@#&    return numColors[n]!@#&  end!@#&  return colors.white!@#&end!@#&!@#&local function drawTile(x,y)!@#&  term.setCursorPos(xoff+x,yoff+y)!@#&  if field[y][x].revealed then!@#&    if field[y][x].mine then!@#&      if field[y][x].flag then!@#&        term.setTextColor(mineColorBg)!@#&        term.setBackgroundColor(mineColor)!@#&      else!@#&        term.setTextColor(mineColor)!@#&        term.setBackgroundColor(mineColorBg)!@#&      end!@#&      term.write(\"X\")!@#&    else!@#&      local n=field[y][x].count!@#&      if field[y][x].flag==true then!@#&        term.setBackgroundColor(flagWrongBg)!@#&        term.setTextColor(flagWrong)!@#&        term.write(\"?\")!@#&      else!@#&        term.setTextColor(getNumColor(n))!@#&        term.setBackgroundColor(colors.black)!@#&        if n==0 then!@#&          term.write(\" \")!@#&        else!@#&          term.write(string.char(string.byte(\"0\")+field[y][x].count))!@#&        end!@#&      end!@#&    end!@#&  elseif field[y][x].flag==true then!@#&    term.setTextColor(flagColor)!@#&    term.setBackgroundColor(unrevealedColorB)!@#&    term.write(\"?\")!@#&  else!@#&    term.setTextColor(colors.black)!@#&    term.setBackgroundColor(unrevealedColorB)!@#&    term.write(\" \")!@#&  end!@#&end!@#&!@#&!@#&!@#&function drawGrid()!@#&  for y=1,level.height do!@#&    for x=1,level.width do  !@#&      drawTile(x,y)!@#&    end!@#&  end!@#&end!@#&!@#&local clickMode=1!@#&local gameover!@#&local revealToWin!@#&!@#&local buttonOffset!@#&!@#&local function drawButtons()!@#&  local text=\"New Quit \"!@#&  if clickMode==1 then!@#&    text=text..\"Flag\"!@#&  else!@#&    text=text..\"Show\"!@#&  end!@#&  !@#&  buttonOffset=writeCentered(text,1,true,infoBarColor,infoBarBG)!@#&end!@#&!@#&!@#&local function reveal(x,y)!@#&  local revealStack={{x,y}}!@#&  local visited={}!@#&  visited[x+y*level.width]=true!@#&  while #revealStack>0 do!@#&    x,y=unpack(table.remove(revealStack,1))!@#&    !@#&    if not field[y][x].revealed and not field[y][x].flag then!@#&      revealToWin=revealToWin-1!@#&      field[y][x].revealed=true!@#&      drawTile(x,y)!@#&      if field[y][x].count==0 then!@#&        forEachValidNeighbor(x,y,!@#&          function(x,y) !@#&            if not visited[x+y*level.width] and (field[y][x].revealed or field[y][x].flag)==false then!@#&              revealStack[#revealStack+1]={x,y} !@#&            end!@#&          end!@#&        )!@#&      end!@#&    end!@#&  end!@#&end!@#&!@#&--declared here, so drawBar can see it!@#&local seconds=0!@#&local numMinesLeft=0!@#&!@#&local function drawInfoBar(message,fg,bg)!@#&  fg=fg or infoBarColor!@#&  bg=bg or infoBarBG!@#&  !@#&  local text!@#&  if message then!@#&    text=\"[\"..message..\"]\"!@#&  else!@#&    text=string.format(\"[ %2d/%2d  %3ds ]\",numMinesLeft,level.mines,seconds)!@#&  end!@#&!@#&  writeCentered(text,2,false,fg,bg,\"-\")!@#&    !@#&end!@#&!@#&local function confirm(text)!@#&  writeCentered(text,1,true,infoBarColor,infoBarBG)!@#&  local x=writeCentered(\"[ Yes No ]\",2,true,infoBarColor,infoBarBG,\"-\")+2!@#&  local res  !@#&  while true do!@#&    local e={os.pullEvent()}!@#&    if e[1]==\"mouse_click\" or e[1]==\"monitor_touch\" then!@#&      if e[4]==2 then!@#&        local cx=e[3]-x+1!@#&        if cx>0 and cx<4 then!@#&          res=true!@#&          break!@#&        elseif cx>4 and cx<7 then!@#&          res=false!@#&          break!@#&        end!@#&      end!@#&    end!@#&  end!@#&  drawButtons()!@#&  drawInfoBar()!@#&  return res!@#&end!@#&!@#&--length of a real second, in units of os.time()!@#&local timeSecond=1/50!@#&!@#&function runGame()!@#&  while true do!@#&    term.setTextColor(colors.white)!@#&    term.setBackgroundColor(screenBg)  !@#&    term.clear()!@#&    drawInfoBar()!@#&!@#&    genField()!@#&    drawGrid()!@#&    revealToWin=level.width*level.height-level.mines!@#&    numMinesLeft=level.mines!@#&!@#&    drawButtons()!@#&!@#&    gameover=nil!@#&    local startTime=nil!@#&    local alarmTime=nil!@#&    local secondAlarm=nil!@#&    seconds=0!@#&!@#&    while true do!@#&      local e={os.pullEventRaw()}!@#&      if e[1]==\"terminate\" then!@#&        exitnow(true)!@#&      elseif e[1]==\"alarm\" and e[2]==secondAlarm then!@#&        seconds=seconds+1!@#&        drawInfoBar()!@#&        alarmTime=(alarmTime+timeSecond)%24!@#&        secondAlarm=os.setAlarm(alarmTime)!@#&      elseif e[1]==\"mouse_click\" or e[1]==\"monitor_touch\" then!@#&        local clickModeX=clickMode!@#&!@#&        if e[1]==\"mouse_click\" and e[2]~=1 then!@#&          --use button to determine action!@#&          clickModeX=e[2]!@#&        end!@#&!@#&        --determine target tile!@#&        local x,y=e[3],e[4]!@#&        if x>xoff and x<=xoff+level.width and y>yoff and y<=yoff+level.height then!@#&          --clicked field!!@#&          x,y=x-xoff,y-yoff!@#&          local tile=field[y][x]!@#&          if clickModeX==1 then!@#&            --reveal, unless flagged?!@#&            if tile.revealed then!@#&              --count flags around!@#&              local count=0!@#&              forEachValidNeighbor(x,y,function(x,y) if not field[y][x].revealed and field[y][x].flag then count=count+1 end end)!@#&              if count==tile.count then!@#&                forEachValidNeighbor(x,y,!@#&                  function(x,y) !@#&                    if field[y][x].revealed==false and field[y][x].flag==false then !@#&                      if field[y][x].mine then !@#&                        gameover=\"lose\" !@#&                      else !@#&                        reveal(x,y)!@#&                      end !@#&                    drawTile(x,y) !@#&                    end !@#&                  end)!@#&                if gameover then break end!@#&              end!@#&            elseif tile.flag==false then!@#&              if startTime==nil then!@#&                startTime=os.time()!@#&                alarmTime=startTime+timeSecond!@#&                secondAlarm=os.setAlarm(alarmTime)!@#&              end!@#&              reveal(x,y)!@#&              if tile.mine then!@#&                gameover=\"lose\"!@#&                break!@#&              end!@#&            end!@#&          elseif clickModeX==2 then!@#&            --toggle flag!@#&            if tile.revealed==false then!@#&              if tile.flag then!@#&                numMinesLeft=numMinesLeft+1!@#&              else!@#&                numMinesLeft=numMinesLeft-1!@#&              end!@#&              drawInfoBar()!@#&              tile.flag=not tile.flag!@#&              drawTile(x,y)          !@#&            else!@#&              --flag all tiles if the surrounding unrevealed count equals mine count!@#&              local count=0!@#&              forEachValidNeighbor(x,y,!@#&                function(x,y) !@#&                  if not field[y][x].revealed then !@#&                    count=count+1 !@#&                  end !@#&                end)!@#&              if count==field[y][x].count then!@#&                forEachValidNeighbor(x,y,!@#&                  function(x,y)!@#&                    if not field[y][x].revealed and not field[y][x].flag then!@#&                      field[y][x].flag=true!@#&                      numMinesLeft=numMinesLeft-1!@#&                      drawTile(x,y)!@#&                    end!@#&                  end)!@#&                drawInfoBar()!@#&              end!@#&            end          !@#&          end!@#&        else!@#&          --not a tile, check menu!@#&          if y==1 then!@#&            x=x-buttonOffset+1!@#&            if x>0 and x<4 then!@#&              --new!@#&              if confirm(\"Start new game?\") then!@#&                gameover=\"new\"!@#&                break!@#&              end!@#&            elseif x>4 and x<9 then!@#&              --quit!@#&              if confirm(\"Exit minesweep?\") then!@#&                gameover=\"quit\"!@#&                break!@#&              end!@#&            elseif x>9 and x<14 then!@#&              clickMode=clickMode==1 and 2 or 1!@#&              drawButtons()!@#&            end!@#&          end!@#&        end!@#&      else!@#&        --any other event!@#&      end!@#&      if revealToWin==0 then!@#&        gameover=\"win\"!@#&        break!@#&      end!@#&    end!@#&    term.setTextColor(colors.white)!@#&    term.setBackgroundColor(colors.black)!@#&    if gameover==\"quit\" then!@#&      break!@#&    end!@#&    if gameover~=\"new\" then!@#&!@#&      drawInfoBar(\"You \"..gameover..\"!\",gameover==\"win\" and winColor or loseColor, gameover==\"win\" and winColorBG or loseColorBG)!@#&      term.setTextColor(colors.white)!@#&      for y=1,level.height do!@#&        for x=1,level.width do!@#&          if field[y][x].mine and not field[y][x].revealed then!@#&            field[y][x].revealed=true!@#&            drawTile(x,y)!@#&          elseif field[y][x].mine==false and field[y][x].flag then!@#&            field[y][x].revealed=true!@#&            drawTile(x,y)!@#&          end!@#&        end!@#&      end!@#&!@#&      os.startTimer(5)!@#&      while ({os.pullEvent()})[1]==\"alarm\" do!@#&        --skip alarm so it doesn't override within a second from the game timer events!@#&      end!@#&!@#&      drawInfoBar()!@#&!@#&      if not confirm(\"Play Again?\") then!@#&        break!@#&      end!@#&    end  !@#&  end!@#&end!@#&!@#&local ok, err=pcall(runGame)!@#&!@#&term.setTextColor(colors.white)!@#&term.setBackgroundColor(colors.black)!@#&term.clear()!@#&!@#&if not ok then!@#&  print(err)!@#&end!@#&!@#&exitnow()",["Lasers"]="--[[!@#&    [Game] Lasers!@#&    @version 1.2, 29/12/2013, HK98!@#&    @author Hellkid98, HK98!@#&--]]!@#&!@#&local w,h = term.getSize()!@#&!@#&local oldPullEvent = os.pullEvent!@#&os.pullEvent = os.pullEventRaw!@#&!@#&local player = {!@#&!@#&    !@#&	dead = false,!@#&	side = \"down\",!@#&	!@#&	[\"sides\"] = {!@#&	    [\"left\"] = {!@#&		    art = \"<\",!@#&		},!@#&		!@#&		[\"right\"] = {!@#&		    art = \">\",!@#&		},!@#&		!@#&		[\"down\"] = {!@#&		    art = \"v\",!@#&		},!@#&		!@#&		[\"up\"] = {!@#&		    art = \"^\",!@#&		},!@#&	},!@#&}!@#&!@#&local player2 = {}!@#&!@#&!@#&!@#&!@#&!@#&!@#&!@#&local function pGet(hCode,file)!@#&!@#&    hResponse = http.get(\"http://pastebin.com/raw.php?i=\"..textutils.urlEncode(hCode))!@#&    if hResponse then!@#&        hFile = fs.open(file,\"w\")!@#&        local sCode = hResponse.readAll()!@#&		hResponse.close()!@#&        hFile.write(sCode)!@#&        hFile.close()!@#&	 !@#&    else !@#&		error(\"Error getting file: \"..file,0)!@#&		fs.delete(\"SpeedOS/Applications/GameBox/.Lasers_Data\") -- If a file failed to download!@#&    end!@#&end!@#&  !@#&if not fs.exists(\"SpeedOS/Applications/GameBox/.Lasers_Data\") then!@#&    local folders = {!@#&	    \"SpeedOS/Applications/GameBox/.Lasers_Data/APIs\", \"SpeedOS/Applications/GameBox/.Lasers_Data/Settings\", \"SpeedOS/Applications/GameBox/.Lasers_Data/Themes\",!@#&	}!@#&	!@#&	local apis = {!@#&	    [1] = {!@#&		    name = \"gui\",!@#&			code = \"MQvDWS5M\",!@#&		},!@#&		!@#&		[2] = {!@#&		    name = \"rNet\",!@#&			code = \"r3ueCHfs\",!@#&		}!@#&	}!@#&	!@#&	term.clear() !@#&	term.setCursorPos(1,1)!@#&	!@#&	for i = 1, #folders do!@#&	    print(\"Creating: \"..folders[i])!@#&	    fs.makeDir(folders[i])!@#&	end!@#&	!@#&	for i = 1,#apis do!@#&	    print(\"Downloading: \"..apis[i].name)!@#&	    pGet(apis[i].code,\"SpeedOS/Applications/GameBox/.Lasers_Data/APIs/\"..apis[i].name)!@#&	end!@#&end!@#&!@#&!@#&for _, file in ipairs( fs.list(\"SpeedOS/Applications/GameBox/.Lasers_Data/APIs/\") ) do!@#&    os.unloadAPI(\"SpeedOS/Applications/GameBox/.Lasers_Data/APIs/\" .. file)!@#&    os.loadAPI(\"SpeedOS/Applications/GameBox/.Lasers_Data/APIs/\" .. file)!@#&end!@#&!@#&local default = {!@#&    lang = 1, nickname = \"<Nickname>\", theme = \"Lasers\",!@#&}!@#&!@#&if not fs.exists(\"SpeedOS/Applications/GameBox/.Lasers_Data/Settings/settings.cfg\") then!@#&    gui.saveTable(\"SpeedOS/Applications/GameBox/.Lasers_Data/Settings/settings.cfg\",default)!@#&end!@#&!@#&if not fs.exists(\"SpeedOS/Applications/GameBox/.Lasers_Data/Themes/Lasers\") then!@#&    local theme = {!@#&        bColor = \"white\",!@#&    	defaultTextCol = \"red\",!@#&	    activeBackCol = \"red\",!@#&	    activeTextCol = \"white\",!@#&	    headerBackCol = \"red\",!@#&	    headerTextCol = \"white\",!@#&    }!@#&    local f = fs.open(\"SpeedOS/Applications/GameBox/.Lasers_Data/Themes/Lasers\", \"w\")!@#&    for i, v in pairs( theme ) do!@#&        f.writeLine( i .. \" = \" .. tostring(v) )!@#&    end!@#&    f.close()!@#&end!@#&!@#&local tSettings = gui.getTable(\"SpeedOS/Applications/GameBox/.Lasers_Data/Settings/settings.cfg\")!@#&player.nickname = tSettings.nickname!@#&local theme = gui.loadTheme( \"SpeedOS/Applications/GameBox/.Lasers_Data/Themes/\" .. tSettings.theme )!@#&!@#&!@#&!@#&--# Default data!@#&local language = \"English\"!@#&!@#&local languages = {!@#&    \"English\",!@#&}!@#&!@#&local function rebootGame()!@#&    shell.run(shell.getRunningProgram()) error()!@#&end!@#&!@#&!@#&local themes = {}!@#&local themes_downloadable = {}!@#&!@#&for _, file in ipairs( fs.list(\"SpeedOS/Applications/GameBox/.Lasers_Data/Themes/\") ) do!@#&    local nTheme = {}!@#&	nTheme.name = file!@#&    table.insert( themes, nTheme )!@#&end!@#&!@#&local function changeName()!@#&    gui.drawBox( 2, w - 1, h/2 - 3, h/2 + 2, colors.red )!@#&	gui.drawLine( 2, w - 1, h/2 - 3, nil, colors.gray )!@#&	gui.drawLine( 3, w - 2, h/2, nil, colors.white)!@#&	gui.centerPrint( h/2 - 3, colors.red, colors.gray, \"Change Name\")!@#&    gui.centerPrint(h/2 - 1, colors.white, colors.red, \"New Name\")!@#&	term.setCursorPos(1, h/2)!@#&	local nName = \"\"!@#&	repeat!@#&	    term.setTextColor( colors.black )!@#&		term.setBackgroundColor(colors.white)!@#&	    nName = gui.mRead({centeredText = true, textLength = w - 7, exitOnKey = 29})!@#&	until nName ~= \"\" or nName == nil!@#&	if nName ~= nil then!@#&	    tSettings.nickname = nName!@#&		gui.saveTable(\"SpeedOS/Applications/GameBox/.Lasers_Data/Settings/settings.cfg\", tSettings)!@#&	end!@#&end!@#&!@#&!@#&local function changeLang()!@#&    tSettings.lang = tSettings.lang + 1!@#&        if tSettings.lang > #languages then!@#&            tSettings.lang = 1!@#&        end!@#&	gui.saveTable(\"SpeedOS/Applications/GameBox/.Lasers_Data/Settings/settings.cfg\",tSettings)!@#&	!@#&   for i = 5, 0, - 1 do!@#&	    gui.drawBox(w/2 - 12,w/2 + 12,6,13,colors.gray)!@#&		gui.centerPrint(7,colors.white,colors.gray,\"The game will reboot\")!@#&		gui.centerPrint(8,colors.white,colors.gray,\"-for the changes to\")!@#&		gui.centerPrint(9,colors.white,colors.gray,\"-become active!\")!@#&		gui.centerPrint(11,colors.white,colors.gray,\"Rebooting in \"..i)!@#&	    sleep(1)!@#&   end!@#&   rebootGame()!@#&end!@#&!@#&!@#&!@#&local function changeTheme()!@#&    local themes = gui.table_pages( themes, 5, h - 1 )!@#&    local page, mNum = 1, 1!@#&	local loop = true!@#&	while loop do!@#&        gui.clear( theme.bColor )!@#&        gui.drawBox(1,w,1,3,theme.headerBackCol)!@#&        gui.centerPrint(2,theme.headerTextCol,nil,\"Themes\")!@#&		gui.drawAt(2, h - 1, \" < Back \")!@#&        for i = 1,#themes[page] do!@#&		    themes[page][i].sX = math.ceil(w/2 - #themes[page][i].name/2) - 1!@#&			themes[page][i].fX = math.ceil(w/2 + #themes[page][i].name/2)!@#&		    if mNum == i then!@#&		        gui.centerPrint(4 + i, theme.activeTextCol, theme.activeBackCol, \" \" .. themes[page][i].name .. \" \" )!@#&            else!@#&			    gui.centerPrint(4 + i, theme.defaultTextCol, theme.bColor, themes[page][i].name )!@#&            end!@#&        end!@#&        local e, p, mX, mY = os.pullEvent()!@#&        if e == \"key\" then!@#&            if p == keys.up then!@#&                mNum = mNum - 1!@#&				if mNum < 1 then!@#&				    page = page - 1!@#&					if page < 1 then!@#&					    page = 1!@#&						mNum = 1!@#&					else!@#&					    mNum = #themes[page]!@#&					end!@#&				end!@#&				!@#&			elseif p == keys.down then!@#&			    mNum = mNum + 1!@#&				if mNum > #themes[page] then!@#&				    page = page + 1!@#&					if page > #themes then!@#&					    page = #themes!@#&						mNum = #themes[page]!@#&					else!@#&					    mNum = 1!@#&					end!@#&				end!@#&				!@#&			elseif p == 28 then!@#&			    if fs.exists(\"SpeedOS/Applications/GameBox/.Lasers_Data/Themes/\" .. themes[page][mNum].name) then!@#&				    tSettings.theme = themes[page][mNum].name!@#&					gui.saveTable(\"SpeedOS/Applications/GameBox/.Lasers_Data/Settings/settings.cfg\", tSettings)!@#&					loop = false!@#&				end!@#&			end!@#&			!@#&		elseif e == \"mouse_click\" or e == \"monitor_touch\" then!@#&		    for i = 1, #themes[page] do!@#&			    if mX >= themes[page][i].sX and mX <= themes[page][i].fX and mY == 4 + i then!@#&				    if mNum == i then!@#&			            if fs.exists(\"SpeedOS/Applications/GameBox/.Lasers_Data/Themes/\" .. themes[page][mNum].name) then!@#&				            tSettings.theme = themes[page][mNum].name!@#&					        gui.saveTable(\"SpeedOS/Applications/GameBox/.Lasers_Data/Settings/settings.cfg\", tSettings)!@#&					        loop = false!@#&				        end!@#&					else!@#&					    mNum = i!@#&					end!@#&				    break!@#&				end!@#&			end!@#&			!@#&			if mX >= 2 and mX <= 9 and mY == h - 1 then!@#&			    term.setTextColor(theme.defaultTextCol)!@#&				term.setBackgroundColor(theme.bColor)!@#&				gui.drawAt(2, h - 1, \" < Back \")!@#&				sleep(.15)!@#&			    loop = false!@#&			end!@#&		end!@#&	end!@#&end!@#&!@#&                !@#&!@#&!@#&!@#&local highscores = {}!@#&if fs.exists(\"SpeedOS/Applications/GameBox/.Lasers_Data/highscore.data\") then!@#&    highscores = gui.getTable(\"SpeedOS/Applications/GameBox/.Lasers_Data/highscore.data\")!@#&end!@#&	!@#&local function view_highscores()!@#&!@#&local hs = gui.table_pages(highscores,4,h - 3)!@#&local page = 1!@#&!@#&!@#&local tColors = {!@#&    [1] = {!@#&	    bColor  = colors.gray,!@#&		tColor  = colors.white,!@#&		bColor2 = colors.white,!@#&		tColor2 = colors.black,!@#&	},!@#&	!@#&	[2] = {!@#&	    bColor  = colors.lightGray,!@#&		tColor  = colors.white,!@#&		bColor2 = colors.red,!@#&		tColor2 = colors.white,!@#&	},!@#&}!@#&!@#&  if #highscores ~= 0 then!@#&    local viewing = true!@#&    while viewing do!@#&        gui.drawBox(1,w,1,2,theme.headerBackCol)!@#&		gui.drawBox(1,w/2,3,h,colors.gray)!@#&		gui.drawBox(math.ceil(w/2),w,3,h,colors.white)!@#&		gui.centerPrint(1,theme.headerTextCol,theme.headerBackCol,\"Highscores\")!@#&		gui.drawLine(1,w,h,nil,theme.headerBackCol)!@#&		gui.centerPrint(h,theme.headerTextCol,theme.headerBackCol,\" [Space]Exit  [Down]Next Page  [Up]Previous Page \")!@#&		local cNum = 1!@#&        for i = 1,#hs[page] do!@#&		    term.setTextColor(tColors[cNum].tColor)!@#&			term.setBackgroundColor(tColors[cNum].bColor)!@#&            gui.drawAt(2,3 + i,hs[page][i].pos .. \": \" .. hs[page][i].name .. \" \")!@#&		    term.setTextColor(tColors[cNum].tColor2)!@#&			term.setBackgroundColor(tColors[cNum].bColor2)!@#&	        gui.drawAt(w/2 + 4,3 + i,\" \" .. hs[page][i].score .. \" \")!@#&			cNum = cNum + 1!@#&			if cNum > 2 then!@#&			    cNum = 1!@#&			end!@#&        end!@#&		local evt, p1 = os.pullEvent(\"key\")!@#&		    if p1 == keys.up then!@#&			    page = page - 1!@#&				if page < 1 then!@#&				    page = 1!@#&				end!@#&				!@#&			elseif p1 == keys.down then!@#&			    page = page + 1!@#&				if page > #hs then!@#&				    page = #hs!@#&				end!@#&			!@#&			elseif p1 == 57 then!@#&			    viewing = false!@#&			end!@#&    end!@#&  else!@#&      gui.clear(colors.white)!@#&      gui.drawBox(w/2 - 15, w/2 + 15,h/2 - 2,h/2 + 3,theme.headerBackCol)!@#&	  gui.drawBox(w/2 - 14, w/2 + 14,h/2 - 1,h/2 + 2,theme.bColor)!@#&	  gui.centerPrint(h/2 - 2,theme.headerTextCol,theme.headerBackCol,\"Alert!\")!@#&	  gui.centerPrint(h/2,theme.defaultTextCol,theme.bColor,\"Currently no highscores\")!@#&	  gui.centerPrint(h/2+ 1,theme.defaultTextCol,theme.bColor,\"Press any key to continue\")!@#&	  os.pullEvent(\"key\")!@#&  end!@#&end!@#&!@#&!@#&!@#&!@#&!@#&!@#&!@#&!@#&!@#&local function main(botMode, multiplayer, host)!@#&!@#&!@#&local tScreen = {}!@#&!@#&!@#&!@#&local mNum       = 1!@#&local cTime      = 10!@#&local score      = 0!@#&local mvSpeed    = 0.5!@#&local powerupBar = 0!@#&!@#&local initializeLaser  =  false!@#&local laserBeam        =  false!@#&local won              =  false!@#&local tp               =  false!@#&local inMenu           =  false!@#&!@#&	!@#&local vNum!@#&local hNum!@#&local oldX!@#&local oldY!@#&local newX!@#&local newY!@#&local cID!@#&!@#&!@#&local function check_highscores()!@#&  if #highscores ~= 0 then!@#&    local pos  = #highscores!@#&	local sPos!@#&	local temp = {}!@#&    for i = #highscores, 1, -1 do!@#&	    sPos = i!@#&	    if score > highscores[i].score then!@#&            pos = i!@#&		else!@#&		    pos = i + 1!@#&			break!@#&		end!@#&	end!@#&!@#&	for i = sPos, #highscores do!@#&	    local n = {}!@#&		n.name  = highscores[i].name!@#&		n.score = highscores[i].score!@#&		n.pos   = highscores[i].pos + 1!@#&		table.insert(temp, n)!@#&	end!@#&	for i = 1,#temp do!@#&	    highscores[temp[i].pos] = temp[i]!@#&	end!@#&	!@#&	!@#&    highscores[pos].name  = tSettings.nickname!@#&    highscores[pos].score = score!@#&    gui.saveTable(\"SpeedOS/Applications/GameBox/.Lasers_Data/highscore.data\",highscores)!@#&	!@#&  else!@#&    local n = {}!@#&	n.name  = tSettings.nickname!@#&	n.score = score!@#&	n.pos   = 1!@#&	table.insert(highscores, n)!@#&	gui.saveTable(\"SpeedOS/Applications/GameBox/.Lasers_Data/highscore.data\",highscores)!@#&  end!@#&end!@#&		    !@#&!@#&--# Multiplayer connection!@#&if multiplayer then!@#&!@#&modemAttached = rNet.openSides()!@#&!@#&!@#&!@#&if modemAttached then	!@#&	gui.clear(colors.white)!@#&	local bar        = gui.initBar(w/2 - 14, w/2 + 14,h/2,0,3)!@#&	local barTexture = {barColor = colors.red, barBackgroundColor = colors.gray}!@#&	!@#&	!@#&	!@#&local function drawScreen(text,id,h)!@#&    gui.clear(colors.white)!@#&	gui.drawBar(bar, barTexture)!@#&    gui.centerPrint(bar.y - 1,colors.black,colors.white,bar.currentProgress .. \"/\" .. bar.maxLen)!@#&	gui.centerPrint(bar.y + 1,colors.black,colors.white,text)!@#&	if id ~= nil then!@#&    	if h then!@#&	        gui.centerPrint(2,colors.black,colors.white,\"Your ID: \".. os.getComputerID() .. \"    Client ID: \"..id)!@#&	    else!@#&	        gui.centerPrint(2,colors.black,colors.white,\"Your ID: \".. os.getComputerID() .. \"    Host ID: \"..id)!@#&	    end!@#&	end!@#&end	!@#&!@#&!@#&	!@#&	if host then!@#&	  --# Host!@#&	    player.x = math.ceil(w/2) - 1!@#&		player.y = math.ceil(h/2)!@#&		gui.updateBar(bar, bar.currentProgress + 1, barTexture)!@#&		local rID, msg!@#&	    for i = 1, 5 do!@#&		    drawScreen(\"Searching for clients\",nil)!@#&		    rednet.broadcast(\"lasers_multiplayer_host\")!@#&			repeat!@#&			    rID, msg = rednet.receive(1.5)!@#&			until rID ~= os.getComputerID()!@#&			if rID ~= nil then!@#&			    if msg == \"lasers_multiplayer_client\" then!@#&				break!@#&				end!@#&			end!@#&		end!@#&		!@#&		if rID == nil then!@#&		    gui.updateBar(bar, 0, barTexture)!@#&		    gui.clear(colors.white)!@#&			gui.drawBar(bar, barTexture)!@#&			gui.centerPrint(bar.y - 1,colors.black,colors.white,\"No clients found\")!@#&			gui.centerPrint(bar.y + 1,colors.black,colors.white,\"Request timed out\")!@#&			os.pullEvent(\"key\")!@#&			shell.run(shell.getRunningProgram()) error()!@#&			!@#&		else!@#&		!@#&		    player2.id = rID!@#&			gui.clear(colors.white)!@#&			gui.updateBar(bar, bar.currentProgress + 1, barTexture)!@#&		    drawScreen(\"Sending data\", player2.id, true)!@#&			!@#&			local rID!@#&			repeat!@#&			    rNet.sendTable(player2.id, player)!@#&			    rID, msg = rednet.receive(.5)!@#&			until rID == player2.id!@#&			!@#&			local rID!@#&			gui.updateBar(bar, bar.currentProgress + 1, barTexture)!@#&			drawScreen(\"Receiveing data\", player2.id, true)!@#&			repeat!@#&			    rID, msg = rednet.receive()!@#&			until rID == player2.id!@#&	        player2 = textutils.unserialize(msg)!@#&			player2.id = rID!@#&		end!@#&		!@#&		!@#&		!@#&	else!@#&	!@#&	!@#&	!@#&	   --# Client!@#&	    player.x = math.ceil(w/2) + 1!@#&		player.y = math.ceil(h/2)!@#&	     gui.updateBar(bar, bar.currentProgress + 1, barTexture)!@#&	     drawScreen(\"Searching for hosts\", nil)!@#&	     local rID, msg!@#&	     for i = 1,5 do!@#&		     rID, msg = rednet.receive(1.5)!@#&		     if msg == \"lasers_multiplayer_host\" then!@#&			     break!@#&			 end!@#&		 end!@#&	!@#&	    gui.clear(colors.white)!@#&	    if rID ~= nil and msg == \"lasers_multiplayer_host\" then!@#&		    rednet.send(rID,\"lasers_multiplayer_client\")!@#&			player2.id = rID!@#&	     gui.updateBar(bar, bar.currentProgress + 1, barTexture)!@#&	     drawScreen(\"Receiveing data\", player2.id, false)!@#&		 !@#&			repeat!@#&			    rID, msg = rednet.receive() !@#&			until rID == player2.id!@#&			rednet.send(player2.id,\"lasers_multiplayer_data_received\")!@#&			!@#&			player2 = textutils.unserialize(msg)!@#&			player2.id = rID!@#&			gui.clear(colors.white)!@#&			!@#&	        gui.updateBar(bar, bar.currentProgress + 1, barTexture)!@#&            drawScreen(\"Sending data\", player2.id, false)!@#&			rNet.sendTable(player2.id, player)!@#&		else!@#&		    gui.updateBar(bar, 0, barTexture)!@#&		    gui.clear(colors.white)!@#&			gui.drawBar(bar, barTexture)!@#&			gui.centerPrint(bar.y - 1,colors.black,colors.white,\"No hosts found\")!@#&			gui.centerPrint(bar.y + 1,colors.black,colors.white,\"Request timed out\")!@#&			os.pullEvent(\"key\")!@#&			shell.run(shell.getRunningProgram()) error()!@#&		end!@#&		!@#&	end!@#&else!@#&    gui.clear( colors.white )!@#&	gui.centerPrint(h/2, colors.red, colors.white,\"No modems attached!\")!@#&	os.pullEvent()!@#&	rebootGame()!@#&end!@#&	else!@#&	    player.x = math.ceil(w/2)!@#&		player.y = math.ceil(h/2)!@#&!@#&end!@#&!@#&			!@#&			!@#&	!@#&	!@#&	!@#&	!@#&!@#&!@#&!@#&!@#&local lasers = {!@#&   -- X axis!@#&    [1] = {!@#&	    axis = \"vertical\",!@#&		direction = \"left\",!@#&		x = math.ceil(w/2),!@#&		y = 1,!@#&		minX = 2,!@#&		maxX = w - 1,!@#&	},!@#&	!@#&	[2] = {!@#&	    axis = \"vertical\",!@#&		direction = \"left\",!@#&		x = math.ceil(w/2),!@#&		y = h - 1,!@#&		minX = 2,!@#&		maxX = w - 1,!@#&	},!@#&	!@#&   -- Y axis	!@#&	[3] = {!@#&	    axis = \"horizontal\",!@#&		direction = \"down\",!@#&		x = 1,!@#&		y = math.ceil(h/2),!@#&		minY = 2,!@#&		maxY = h - 2,!@#&	},!@#&	!@#&	[4] = {!@#&	    axis = \"horizontal\",!@#&		direction = \"down\",!@#&		x = w,!@#&		y = math.ceil(h/2),!@#&		minY = 2,!@#&		maxY = h - 2,!@#&	},!@#&}!@#&!@#&!@#&!@#&!@#&   !@#&    !@#&!@#& local  mOpts = {!@#&			!@#&	[1] = {!@#&		name = \" Resume \",!@#&		functionName = \"_resume\",!@#&	},!@#&			!@#&	[2] = {!@#&		name = \" Exit \",!@#&		functionName = rebootGame,!@#&    },!@#&}!@#&!@#&local powerups = {!@#&    [1] = {!@#&	   -- Art!@#&	    bColor = colors.red,!@#&	    tColor = colors.white,!@#&	   !@#&	   -- Data!@#&	    bTimer = 3,!@#&	    booleanName = \"slowdownLaser\",!@#&	},!@#&	!@#&	[2] = {!@#&	   -- Art!@#&	    bColor = colors.purple,!@#&	    tColor = colors.white,!@#&	   !@#&	   -- Data!@#&	    bTimer = 5,!@#&	    booleanName = \"teleport\",!@#&	},!@#&	!@#&	[3] = {!@#&	   -- Art!@#&	    bColor = colors.lightBlue,!@#&	    tColor = colors.white,!@#&	   !@#&	   -- Data!@#&	    bTimer = 5,!@#&	    booleanName = \"freezeLaser\",!@#&	},!@#&}!@#&!@#&local tPowerup = {!@#&    [\"booleans\"] = {!@#&	    freezeLaser = false,!@#&		teleport = false,!@#&		slowdownLaser = false!@#&	},!@#&}!@#&!@#&local function createPowerup(index)!@#&  if #tPowerup < 2 then!@#&   nPowerup = {}!@#&   !@#&   !@#&   nPowerup.bColor = powerups[index].bColor!@#&   nPowerup.tColor = powerups[index].tColor!@#&   nPowerup.bTimer = powerups[index].bTimer!@#&   nPowerup.booleanName = powerups[index].booleanName!@#&   nPowerup.art = \"P\"!@#&   nPowerup.x = math.random(3,w - 2)!@#&   nPowerup.y = math.random(3,h - 3)!@#&   table.insert(tPowerup,nPowerup)!@#&  end!@#&end!@#&!@#&local function powerupBoolean(booleanName)!@#&    if booleanName == \"freezeLaser\" then!@#&	    tPowerup[\"booleans\"].freezeLaser = true!@#&		!@#&	elseif booleanName == \"slowdownLaser\" then!@#&	    tPowerup[\"booleans\"].slowdownLaser = true!@#&	!@#&	elseif booleanName == \"teleport\" then!@#&	    tPowerup[\"booleans\"].teleport = true!@#&	end!@#&end!@#&!@#&!@#&!@#&	    !@#&!@#&!@#&!@#&--# Bot/A.I Stuff!@#&!@#&local bots = {}!@#&!@#&local defBot = {!@#&    [\"tColors\"] = {!@#&	    colors.red, colors.purple, colors.green, colors.blue,!@#&	},!@#&!@#&	[\"side\"] = {!@#&	    [\"left\"] = {!@#&		    art = \"<\",!@#&		},!@#&		!@#&		[\"right\"] = {!@#&		    art = \">\",!@#&		},!@#&		!@#&		[\"down\"] = {!@#&		    art = \"v\",!@#&		},!@#&		!@#&		[\"up\"] = {!@#&		    art = \"^\",!@#&		},!@#&	},!@#&}!@#&!@#&local function spawnBot(addX)!@#&!@#&    local nBot = {}!@#&	!@#&	nBot.direction = \"down\"!@#&	nBot.x = math.ceil(w/2) + addX!@#&	nBot.y = math.ceil(h/2)!@#&	nBot.tColor = defBot[\"tColors\"][math.random(1,#defBot[\"tColors\"])]!@#&	nBot.side = defBot.side!@#&	!@#&	table.insert(bots,nBot)!@#&end!@#&!@#&if botMode then!@#&	spawnBot(1)!@#&	player.x = math.ceil(w/2) - 1!@#&end!@#&!@#&local function hBots()!@#&!@#&!@#&-- Getting the axises!@#&	    for i = 1,#lasers do!@#&	        if lasers[i].axis == \"vertical\" then!@#&		        vNum = i!@#&				break!@#&		    end!@#&	    end!@#&	    for i = 1,#lasers do!@#&	        if lasers[i].axis == \"horizontal\" then!@#&		        hNum = i!@#&				break!@#&		    end!@#&	    end!@#&!@#&!@#&    for i = 1,#bots do!@#&        if not laserBeam then!@#&          -- Y Axis!@#&		    if lasers[hNum].direction == \"down\" then!@#&			!@#&                if lasers[hNum].y <= h/2 then!@#&				  if not initializeLaser then!@#&				    bots[i].direction = \"up\"!@#&                    bots[i].y = bots[i].y - 1 if bots[i].y < 2 then bots[i].y = 2 end!@#&				    if bots[i].x == player.x and bots[i].y == player.y then!@#&					    bots[i].y = bots[i].y + 1!@#&					end!@#&				  else!@#&				    bots[i].direction = \"down\"!@#&                    bots[i].y = bots[i].y + 1 if bots[i].y > h - 2 then bots[i].y = h - 2 end!@#&				    if bots[i].x == player.x and bots[i].y == player.y then!@#&					    bots[i].y = bots[i].y - 1!@#&					end!@#&				  end!@#&				  !@#&				else!@#&				!@#&				  if not initializeLaser then!@#&				    bots[i].direction = \"down\"!@#&                    bots[i].y = bots[i].y + 1 if bots[i].y > h - 2 then bots[i].y = h - 2 end!@#&				    if bots[i].x == player.x and bots[i].y == player.y then!@#&					    bots[i].y = bots[i].y - 1!@#&					end!@#&                  else!@#&				    bots[i].direction = \"up\"!@#&                    bots[i].y = bots[i].y - 1 if bots[i].y <  2 then bots[i].y = 2 end!@#&				    if bots[i].x == player.x and bots[i].y == player.y then!@#&					    bots[i].y = bots[i].y + 1!@#&					end!@#&				  end!@#&            				  !@#&			    end!@#&		!@#&		    elseif lasers[hNum].direction == \"up\" then!@#&			!@#&			  if not initializeLaser then!@#&                if lasers[hNum].y >= h/2 then!@#&				    bots[i].direction = \"down\"!@#&                    bots[i].y = bots[i].y + 1 if bots[i].y > h - 2 then bots[i].y = h - 2 end!@#&				    if bots[i].x == player.x and bots[i].y == player.y then!@#&					    bots[i].y = bots[i].y - 1!@#&					end!@#&				  else!@#&				    bots[i].direction = \"up\"!@#&                    bots[i].y = bots[i].y - 1 if bots[i].y < 2 then bots[i].y = 2 end!@#&				    if bots[i].x == player.x and bots[i].y == player.y then!@#&					    bots[i].y = bots[i].y + 1!@#&					end  !@#&				  end!@#&				  !@#&				else!@#&				!@#&				  if not initializeLaser then!@#&				    bots[i].direction = \"up\"!@#&                    bots[i].y = bots[i].y - 1 if bots[i].y < 2 then bots[i].y = 2 end!@#&				    if bots[i].x == player.x and bots[i].y == player.y then!@#&					    bots[i].y = bots[i].y + 1!@#&					end!@#&				  else!@#&				    bots[i].direction = \"down\"!@#&                    bots[i].y = bots[i].y + 1 if bots[i].y > h - 2 then bots[i].y = h - 2 end!@#&				    if bots[i].x == player.x and bots[i].y == player.y then!@#&					    bots[i].y = bots[i].y - 1!@#&					end!@#&				  end!@#&				  !@#&			    end!@#&		    end!@#&			!@#&		  -- X axis!@#&		    if lasers[vNum].direction == \"right\" then!@#&			  if not initializeLaser then!@#&                if lasers[vNum].x >= w/2 then!@#&				    bots[i].direction = \"left\"!@#&                    bots[i].x = bots[i].x - 1 if bots[i].x < 2 then bots[i].x = 2 end!@#&				    if bots[i].x == player.x and bots[i].y == player.y then!@#&					    bots[i].x = bots[i].x + 1!@#&					end!@#&				  else!@#&				    bots[i].direction = \"right\"!@#&                    bots[i].x = bots[i].x + 1 if bots[i].x > w - 1 then bots[i].x = w - 1 end!@#&				    if bots[i].x == player.x and bots[i].y == player.y then!@#&					    bots[i].x = bots[i].x - 1!@#&					end  !@#&				  end!@#&				  !@#&				else!@#&				!@#&				  if not initializeLaser then!@#&				    bots[i].direction = \"right\"!@#&                    bots[i].x = bots[i].x + 1 if bots[i].x > w - 1 then bots[i].x = w - 1 end!@#&				    if bots[i].x == player.x and bots[i].y == player.y then!@#&					    bots[i].x = bots[i].x - 1!@#&					end  !@#&				  else!@#&				    bots[i].direction = \"left\"!@#&                    bots[i].x = bots[i].x - 1 if bots[i].x < 2 then bots[i].x = 2 end!@#&				    if bots[i].x == player.x and bots[i].y == player.y then!@#&					    bots[i].x = bots[i].x + 1!@#&					end!@#&				  end!@#&				  !@#&			    end!@#&		!@#&		!@#&		    elseif lasers[vNum].direction == \"left\" then!@#&			!@#&			  if not initializeLaser then!@#&                if lasers[vNum].x <= w/2 then!@#&				    bots[i].direction = \"right\"!@#&                    bots[i].x = bots[i].x + 1 if bots[i].x > w - 1 then bots[i].x = w - 1 end!@#&				    if bots[i].x == player.x and bots[i].y == player.y then!@#&					    bots[i].x = bots[i].x - 1!@#&					end!@#&				  else!@#&				    bots[i].direction = \"left\"!@#&                    bots[i].x = bots[i].x - 1 if bots[i].x < 2 then bots[i].x = 2 end!@#&				    if bots[i].x == player.x and bots[i].y == player.y then!@#&					    bots[i].x = bots[i].x + 1!@#&					end  !@#&				  end!@#&				  !@#&				else!@#&				!@#&				  if not initializeLaser then!@#&				    bots[i].direction = \"left\"!@#&                    bots[i].x = bots[i].x - 1 if bots[i].x < 2 then bots[i].x = 2 end!@#&				    if bots[i].x == player.x and bots[i].y == player.y then!@#&					    bots[i].x = bots[i].x + 1!@#&					end  !@#&				  else!@#&				    bots[i].direction = \"right\"!@#&                    bots[i].x = bots[i].x + 1 if bots[i].x > w - 1 then bots[i].x = w - 1 end!@#&				    if bots[i].x == player.x and bots[i].y == player.y then!@#&					    bots[i].x = bots[i].x - 1!@#&					end!@#&				  end!@#&				  !@#&			    end!@#&		    end!@#&			!@#&			!@#&		else!@#&		!@#&		   --# X axis!@#&		    if lasers[vNum].x > bots[i].x then !@#&			    bots[i].direction = \"left\"!@#&			    bots[i].x = bots[i].x - 1 if bots[i].x < 2 then bots[i].x = 2 end!@#&				    if bots[i].x == player.x and bots[i].y == player.y then!@#&					    bots[i].x = bots[i].x + 1!@#&					end!@#&					!@#&			elseif lasers[vNum].x < bots[i].x then!@#&			    bots[i].direction = \"right\"!@#&			    bots[i].x = bots[i].x + 1 if bots[i].x > w - 1 then bots[i].x = w - 1 end!@#&				    if bots[i].x == player.x and bots[i].y == player.y then!@#&					    bots[i].x = bots[i].x - 1!@#&					end!@#&			end!@#&			!@#&		   --# Y axis!@#&		    if lasers[hNum].y > bots[i].y then !@#&			    bots[i].direction = \"up\"!@#&			    bots[i].y = bots[i].y - 1 if bots[i].y < 2 then bots[i].y = 2 end!@#&				    if bots[i].x == player.x and bots[i].y == player.y then!@#&					    bots[i].y = bots[i].y + 1!@#&					end!@#&					!@#&			elseif lasers[hNum].y < bots[i].y then!@#&			    bots[i].direction = \"down\"!@#&			    bots[i].y = bots[i].y + 1 if bots[i].y > h - 2 then bots[i].y = h - 2 end!@#&				    if bots[i].x == player.x and bots[i].y == player.y then!@#&					    bots[i].y = bots[i].y - 1!@#&					end!@#&			end!@#&			!@#&		end!@#&	end!@#&end!@#&!@#&!@#&local function checkCollision()!@#&    if not multiplayer then!@#&        for i = 1,#bots do!@#&	        if player.x == bots[i].x and player.y == bots[i].y then!@#&		        return true!@#&		    end!@#&	    end!@#&	else!@#&	    if player.x == player2.x and player.y == player2.y then!@#&		    return true!@#&		end!@#&	end!@#&end!@#&!@#&!@#&!@#&!@#&!@#&    local function events()!@#&	    for i = 1,#tPowerup do!@#&		    if player.x == tPowerup[i].x and player.y == tPowerup[i].y then!@#&                powerupBoolean(tPowerup[i].booleanName)!@#&				powerupBarTimer = os.startTimer(1)!@#&				powerupBar = 5!@#&				table.remove(tPowerup,i)!@#&				break!@#&			end!@#&		end!@#&	!@#&	    evt, p1, mX, mY = os.pullEvent()!@#&		    if evt == \"key\" then!@#&			    if p1 == keys.up then!@#&				  if not inMenu then!@#&				    player.side = \"up\"!@#&					player.y = player.y - 1!@#&					    if player.y < 2 then player.y = 2 end!@#&						local collision = checkCollision()!@#&						    if collision then!@#&						        player.y = player.y + 1!@#&							end!@#&		              if multiplayer then!@#&                          rNet.sendTable(player2.id, player)!@#&                      end		!@#&				  else!@#&				      if mNum > 1 then!@#&		                  mNum = mNum - 1!@#&			          end					  !@#&				  end!@#&				!@#&				elseif p1 == keys.down then!@#&				  if not inMenu then!@#&				    player.side = \"down\"!@#&					player.y = player.y + 1!@#&					    if player.y > h - 2 then player.y = h - 2 end!@#&						local collision = checkCollision()!@#&						    if collision then!@#&						        player.y = player.y - 1!@#&							end!@#&		              if multiplayer then!@#&                          rNet.sendTable(player2.id, player)!@#&                      end	!@#&				  else!@#&				      if mNum < #mOpts then!@#&			              mNum = mNum + 1!@#&			          end!@#&				  end!@#&				      !@#&						!@#&					!@#&				!@#&				elseif p1 == keys.left then!@#&				  if not inMenu then!@#&				    player.side = \"left\"!@#&					player.x = player.x - 1!@#&					    if player.x < 2 then player.x = 2 end!@#&						local collision = checkCollision()!@#&						    if collision then!@#&						        player.x = player.x + 1!@#&							end!@#&		              if multiplayer then!@#&                          rNet.sendTable(player2.id, player)!@#&                      end	!@#&				  end!@#&				!@#&				elseif p1 == keys.right then!@#&				  if not inMenu then!@#&				    player.side = \"right\"!@#&					player.x = player.x + 1!@#&					    if player.x > w - 1 then player.x = w - 1 end!@#&						local collision = checkCollision()!@#&						    if collision then!@#&						        player.x = player.x - 1!@#&							end!@#&		              if multiplayer then!@#&                          rNet.sendTable(player2.id, player)!@#&                      end	!@#&				  end!@#&!@#&				elseif p1 == 29 then!@#&				    if inMenu then!@#&					    inMenu = false!@#&						countdown = os.startTimer(1)!@#&					else!@#&					    inMenu = true!@#&					end!@#&				!@#&				elseif p1 == 28 then!@#&				    if inMenu then!@#&					    if mOpts[mNum].functionName ~= \"_resume\" then!@#&					        local callFunction = mOpts[mNum].functionName!@#&		                    callFunction()!@#&						end!@#&		                inMenu = false!@#&                    end  !@#&				end!@#&				!@#&			elseif evt == \"rednet_message\" then!@#&			    if multiplayer then!@#&				    if p1 == player2.id then!@#&					    player2 = textutils.unserialize(mX)!@#&						player2.id = p1!@#&					end!@#&				end!@#&				!@#&				!@#&			!@#&			elseif evt == \"timer\" then!@#&			    !@#&				if p1 == countdown then!@#&				    if not inMenu then!@#&						cTime = cTime - 1!@#&						if cTime < 0 then cTime = 0 end!@#&							if cTime > 0 then!@#&								countdown = os.startTimer(1)!@#&							else!@#&								spawnPowerup = os.startTimer(math.random(15,20))!@#&								moveTimer = os.startTimer(.5)!@#&								laserTimer = os.startTimer(math.random(3,5))!@#&								scoreTimer = os.startTimer(1)!@#&								if botMode then!@#&								botMove = os.startTimer(.35)!@#&						    end!@#&						end!@#&					end!@#&						!@#&				elseif p1 == moveTimer then!@#&                    for i = 1,#lasers do!@#&					!@#&                        if lasers[i].axis == \"vertical\" then!@#&                            if lasers[i].direction == \"left\" then!@#&                                lasers[i].x = lasers[i].x - 1!@#&                                if lasers[i].x < lasers[i].minX then!@#&                                    lasers[i].x = lasers[i].minX; lasers[i].direction = \"right\"!@#&                                end!@#&                            !@#&							elseif lasers[i].direction == \"right\" then!@#&							    lasers[i].x = lasers[i].x + 1!@#&                                if lasers[i].x > lasers[i].maxX then!@#&                                    lasers[i].x = lasers[i].maxX; lasers[i].direction = \"left\"!@#&                                end!@#&                            end!@#&						!@#&						elseif lasers[i].axis == \"horizontal\" then!@#&						    if lasers[i].direction == \"up\" then!@#&                                lasers[i].y = lasers[i].y - 1!@#&                                if lasers[i].y < lasers[i].minY then!@#&                                    lasers[i].y = lasers[i].minY; lasers[i].direction = \"down\"!@#&                                end!@#&                            !@#&							elseif lasers[i].direction == \"down\" then!@#&							    lasers[i].y = lasers[i].y + 1!@#&                                if lasers[i].y > lasers[i].maxY then!@#&                                    lasers[i].y = lasers[i].maxY; lasers[i].direction = \"up\"!@#&                                end!@#&                            end!@#&							!@#&                        end	!@#&						!@#&                    end -- For loop!@#&					!@#&					local levels = {!@#&					    [1] = {!@#&						    score   = 250,!@#&							mvSpeed = 0.45,!@#&						},!@#&						!@#&						[2] = {!@#&						    score   = 500,!@#&							mvSpeed = 0.4,!@#&						},!@#&						!@#&						[3] = {!@#&						    score = 750,!@#&							mvSpeed = 0.35,!@#&						},!@#&						!@#&						[4] = {!@#&						    score = 1000,!@#&							mvSpeed = 0.3,!@#&					    },!@#&						!@#&						[5] = {!@#&						    score = 1250,!@#&							mvSpeed = 0.25,!@#&						},!@#&						!@#&						[6] = {!@#&						    score = 1500,!@#&							mvSpeed = 0.2,!@#&						},!@#&						!@#&						[7] = {!@#&						    score = 2000,!@#&							mvSpeed = 0.1,!@#&						},!@#&					}!@#&				!@#&				if not tPowerup[\"booleans\"].slowdownLaser then!@#&					for i = 1,#levels do!@#&					    if score >= levels[i].score then!@#&						    mvSpeed = levels[i].mvSpeed!@#&						end!@#&					end!@#&				!@#&				else!@#&				    mvSpeed = 0.8!@#&				end!@#&					!@#&				  if not tPowerup[\"booleans\"].freezeLaser then	!@#&                      moveTimer = os.startTimer(mvSpeed)!@#&                  end!@#&                 !@#&                elseif p1 == laserTimer then!@#&                    initializeLaser = true!@#&                    beamTimer = os.startTimer(3)!@#&!@#&                elseif p1 == beamTimer then!@#&                    initializeLaser = false!@#&                    laserBeam = true!@#&                    fTimer = os.startTimer(2)!@#&                !@#&                elseif p1 == fTimer then!@#&                    laserBeam = false!@#&                    laserTimer = os.startTimer(math.random(3,5))					!@#&                !@#&                elseif p1 == scoreTimer then!@#&                    score = score + 10!@#&                    scoreTimer = os.startTimer(1)		!@#&!@#&                elseif p1 == spawnPowerup then!@#&				    if not multiplayer then!@#&                        createPowerup(math.random(1,#powerups))!@#&                        spawnPowerup = os.startTimer(math.random(15,20))!@#&					end!@#&				!@#&				elseif p1 == rmTimer then!@#&				    tp = false;!@#&					!@#&				elseif p1 == botMove then!@#&				    hBots()!@#&				    botMove = os.startTimer(.15)!@#&!@#&                elseif p1 == powerupBarTimer then!@#&                    powerupBar = powerupBar - 1!@#&                        if powerupBar > 0 then!@#&                            powerupBarTimer = os.startTimer(1)!@#&                        else!@#&						  powerupBar = 0!@#&                          tPowerup[\"booleans\"].freezeLaser = false!@#&                          tPowerup[\"booleans\"].slowdownLaser = false!@#&                          tPowerup[\"booleans\"].teleport = false!@#&                          moveTimer = os.startTimer(mvSpeed)						  !@#&                        end							!@#&				end!@#&				!@#&			elseif evt == \"mouse_click\" then !@#&			    if tPowerup[\"booleans\"].teleport then!@#&				    if mX > 2 and mX < w and mY > 2 and mY < w - 1 then!@#&				        oldX = player.x; oldY = player.y!@#&                        newX = mX; newY = mY!@#&						player.x = mX; player.y = mY;!@#&						tp = true!@#&						rmTimer = os.startTimer(0.1)!@#&                    end!@#&                end!@#&				!@#&			end!@#&	end!@#&	!@#&	!@#&	!@#&	!@#&	!@#&local function draw()!@#&    term.setBackgroundColor(colors.white)!@#&    gui.clear()!@#&	!@#&	gui.drawLine(1,w,1,colors.lightGray,colors.white,\"-\")!@#&	gui.drawLine(1,w,h - 1,colors.lightGray,colors.white,\"-\")!@#&	for i = 1, h - 1 do!@#&	    gui.drawAt(1,i,\"|\")!@#&		gui.drawAt(w,i,\"|\")!@#&	end!@#&	!@#&	gui.drawAt(1,1,\"+\")!@#&	gui.drawAt(w,1,\"+\")!@#&	gui.drawAt(1,h - 1,\"+\")!@#&	gui.drawAt(w,h - 1,\"+\")!@#&	!@#&	for i = 1,#lasers do!@#&	    term.setBackgroundColor(colors.gray)!@#&		gui.drawAt(lasers[i].x,lasers[i].y,\" \")!@#&	end!@#&	!@#&	if initializeLaser then!@#&!@#&		!@#&	    for i = 1,#lasers do!@#&	        if lasers[i].axis == \"vertical\" then!@#&		        vNum = i!@#&				break!@#&		    end!@#&	    end!@#&	    for i = 1,#lasers do!@#&	        if lasers[i].axis == \"horizontal\" then!@#&		        hNum = i!@#&				break!@#&		    end!@#&	    end!@#&		!@#&		gui.drawLine(2,w - 1,lasers[hNum].y,colors.red,colors.white,\"-\")!@#&		for i = 2,h - 2 do!@#&		    gui.drawAt(lasers[vNum].x,i,\"|\")!@#&		end!@#&		!@#&	end!@#&	!@#&	if botMode then!@#&	   term.setBackgroundColor(colors.white)!@#&	    for i = 1,#bots do!@#&		    term.setTextColor(bots[i].tColor)!@#&			gui.drawAt(bots[i].x,bots[i].y,bots[i].side[bots[i].direction].art)!@#&		end!@#&	end!@#&	!@#&	--#Players!@#&    term.setBackgroundColor(colors.white)!@#&	term.setTextColor(colors.black)!@#&	gui.drawAt(player.x,player.y,player.sides[player.side].art)!@#&	term.setTextColor(colors.blue)!@#&	if multiplayer then!@#&	    gui.drawAt(player2.x, player2.y,player2.sides[player2.side].art)!@#&	end!@#&	!@#&	if tp then!@#&	    term.setTextColor(colors.purple)!@#&		gui.drawAt(oldX,oldY,\"#\")!@#&		gui.drawAt(newX,newY,\"#\")!@#&	end!@#&	!@#&!@#&	    for i = 1,#tPowerup do!@#&		    term.setTextColor(tPowerup[i].tColor)!@#&			term.setBackgroundColor(tPowerup[i].bColor)!@#&			gui.drawAt(tPowerup[i].x,tPowerup[i].y,tPowerup[i].art)!@#&		end!@#&	!@#&	if laserBeam then!@#&	    local vNum!@#&		local hNum!@#&		!@#&	    for i = 1,#lasers do!@#&	        if lasers[i].axis == \"vertical\" then!@#&		        vNum = i!@#&				break!@#&		    end!@#&	    end!@#&	    for i = 1,#lasers do!@#&	        if lasers[i].axis == \"horizontal\" then!@#&		        hNum = i!@#&				break!@#&		    end!@#&	    end!@#&	!@#&!@#&		gui.drawLine(2,w - 1,lasers[hNum].y,nil,colors.red,\" \")!@#&		for i = 2,h - 2 do!@#&		    gui.drawAt(lasers[vNum].x,i,\" \")!@#&		end!@#&		!@#&		if player.y == lasers[hNum].y or player.x == lasers[vNum].x then!@#&		    player.dead = true!@#&			if multiplayer then!@#&			    rNet.sendTable(player2.id, player)!@#&			end!@#&		end!@#&!@#&if botMode then	!@#&!@#&    for i = 1,#bots do!@#&		    if bots[i].y == lasers[hNum].y or bots[i].x == lasers[vNum].x then!@#&		       table.remove(bots,i)!@#&			   break!@#&		    end!@#&    end!@#&!@#&end!@#&!@#&!@#&		!@#&		!@#&	end!@#&	!@#&	gui.drawLine(1,w,h,colors.white,colors.lightGray)!@#&	if cTime > 0 then!@#&	    gui.centerPrint(h,colors.white,nil,\"Lasers starting in \"..cTime..\" seconds\")!@#&	!@#&	else!@#&	    gui.drawAt(2,h,\"[SCORE] \"..score)!@#&		    if powerupBar > 0 then!@#&			    gui.drawLine(w - 5,w - 1,h,nil,colors.gray)!@#&				gui.drawLine(w - 6,w - 6 + powerupBar,h,nil,colors.purple)!@#&			end!@#&	end!@#&!@#&if inMenu then!@#&		gui.drawBox(w/2 - 11,w/2 + 11,h/2 - 3,h/2 + 5,colors.gray)!@#&		gui.drawBox(w/2 - 10,w/2 + 10,h/2 - 2,h/2 + 4,colors.white)!@#&		for i = 1,#mOpts do!@#&		    if mNum == i then!@#&			    gui.centerPrint((h/2 - 2) + i,colors.white,colors.red,mOpts[i].name)!@#&			else!@#&			    gui.centerPrint((h/2 - 2) + i,colors.red,colors.white,mOpts[i].name)!@#&			end!@#&		end!@#&end		!@#&	!@#&end!@#&!@#&!@#&!@#&--# Main part!@#&countdown = os.startTimer(1)!@#&while not player.dead do!@#&!@#&    if player.y > h - 2 then!@#&	    player.y = h - 2!@#&	end!@#&!@#&    if botMode then!@#&	    if #bots == 0 then!@#&		    won = true!@#&		end!@#&		!@#&	    if won then!@#&		    break!@#&		end!@#&	end!@#&!@#&    if multiplayer then!@#&        if player2.dead then!@#&            won = true!@#&			break!@#&        end		!@#&    end		!@#&    draw()!@#&    events()!@#&end!@#&!@#&if won then!@#&    term.setBackgroundColor(colors.lime)!@#&    term.clear()!@#&    gui.centerPrint(h/2,colors.white,colors.lime,\"You won!\")!@#&    gui.centerPrint(h/2 + 1,colors.white,colors.lime,\"Score: \"..score)!@#&	check_highscores()!@#&else!@#&!@#&    term.setBackgroundColor(colors.red)!@#&    term.clear()!@#&    gui.centerPrint(h/2,colors.white,colors.red,\"You died!\")!@#&    gui.centerPrint(h/2 + 1,colors.white,colors.red,\"Score: \"..score)!@#&	check_highscores()!@#&end!@#&!@#&sleep(1)!@#&os.pullEvent(\"key\")!@#&!@#&rebootGame()!@#&		!@#&end!@#&!@#&!@#&!@#&!@#&!@#&!@#&!@#&!@#&local menu = {!@#&!@#&    defLanguage = languages[tSettings.lang],!@#&    defMenu = \"Main\",!@#&	!@#&	[\"English\"] = {!@#&	!@#&	    [\"Main\"] = {!@#&	        title = \"Lasers\",!@#&		!@#&		    [1] = {!@#&		        name = \"Single Player\",!@#&				destination = \"SP\",!@#&		    },!@#&		!@#&		    [2] = {!@#&		        name = \"Multiplayer\",!@#&				destination = \"MP\",!@#&		    },!@#&			!@#&			[3] = {!@#&			    name = \"Highscore\",!@#&				destination = \"_function\",!@#&				[\"tFunction\"] = {!@#&				    name = view_highscores,!@#&				},!@#&			},!@#&				    !@#&		    !@#&			[4] = {!@#&			    name = \"Settings\",!@#&				destination = \"Settings\",!@#&			},!@#&		    !@#&		    [5] = {!@#&		        name = \"Exit\",!@#&			    destination = \"_exit\",!@#&		    },!@#&	    },!@#&		!@#&		[\"SP\"] = {!@#&		    title = \"Single Player\",!@#&			!@#&		    [1] = {!@#&			    name = \"Survival Mode\",!@#&				destination = \"_function\",!@#&				[\"tFunction\"] = {!@#&				    name = main,!@#&				},!@#&			},!@#&			!@#&			[2] = {!@#&			    name = \"Bot Mode\",!@#&				destination = \"_function\",!@#&				[\"tFunction\"] = {!@#&				    name = main,!@#&					[\"args\"] = {!@#&					    true,!@#&					},!@#&				},!@#&			},!@#&			!@#&			[3] = {!@#&			    name = \"Back\",!@#&				destination = \"_back\",!@#&			},!@#&		},!@#&		!@#&		!@#&		[\"MP\"] = {!@#&		    title = \"Multiplayer\",!@#&			!@#&		    [1] = {!@#&			    name = \"Host\",!@#&				destination = \"_function\",!@#&				[\"tFunction\"] = {!@#&				    name = main,!@#&					[\"args\"] = {!@#&					    false,!@#&						true,!@#&						true,!@#&					},!@#&				},!@#&			},!@#&			!@#&			[2] = {!@#&			    name = \"Join\",!@#&				destination = \"_function\",!@#&				[\"tFunction\"] = {!@#&				    name = main,!@#&					[\"args\"] = {!@#&					    false,!@#&						true,!@#&						false,!@#&					},!@#&				},!@#&			},!@#&			!@#&			[3] = {!@#&			    name = \"Back\",!@#&				destination = \"_back\",!@#&			},!@#&		},!@#&		!@#&!@#&		!@#&		[\"Settings\"] = {!@#&		    title = \"Settings\",!@#&			[1] = {!@#&				name = languages[tSettings.lang],!@#&			    destination = \"_function\",!@#&				    [\"tFunction\"] = {!@#&				        name = changeLang,!@#&				    },!@#&			},!@#&			!@#&			[2] = {!@#&			    name = \"Change Theme\",!@#&				destination = \"_function\",!@#&				[\"tFunction\"] = {!@#&				    name = changeTheme,!@#&				},!@#&			},!@#&			!@#&			[3] = {!@#&			    name = \"Change Name\",!@#&				destination = \"_function\",!@#&				[\"tFunction\"] = {!@#&				    name = changeName,!@#&				},!@#&			},!@#&			!@#&			[4] = {!@#&			    name = \"Back\",!@#&				destination = \"_back\",!@#&			},	!@#&		},	!@#&	},	!@#&}!@#&	!@#&!@#&!@#&!@#&!@#&!@#&gui.handleMenu(menu,theme)",["random"]="shell.run(\"clear\")!@#&term.setBackgroundColor(colors.white)!@#&for x=1,25,1 do!@#&  term.setCursorPos(x*2-1,9)!@#&  write(\" \")!@#&end!@#&for y=1,19,1 do!@#&  term.setCursorPos(25,y*2-1)!@#&  write(\" \")!@#&end!@#&for x=1,51,1 do!@#&  term.setCursorPos(x,-.2*(x-25)*(x-26)+19)!@#&  write(\" \")!@#&end",["CCQT"]={["highscore.txt"]="0.0",["UTFPro"]="bbbbbbbbbbbbb9!@#&b7bb88888777b9!@#&b7bb7b8b7bbbb9!@#&b7bb7b8b77bbb9!@#&b7bb7b8b7bbbb9!@#&b7777b8b7bbbb9!@#&bbbbbbbbbbbbb9!@#&99999999999999",},["eShip2_broken.img"]="                eeeeeeee!@#&               e1111e111f!@#&               ff1f111fff!@#&                 ffff1!@#&                 fefff!@#&               ff11e1ffff!@#&               ee11ee1eef!@#&                11111111",["Othello"]="--Othello by KingofGamesYami!@#&!@#&term.clear()!@#&local board = {}!@#&for i = 1, 8 do!@#&	board[ i ] = {}!@#&end!@#&board[ 0 ] = {}!@#&board[ 9 ] = {}!@#&!@#&board[ 4 ][ 4 ] = colors.white!@#&board[ 4 ][ 5 ] = colors.black!@#&board[ 5 ][ 4 ] = colors.black!@#&board[ 5 ][ 5 ] = colors.white!@#&!@#&local hideMoves, AI, mon!@#&!@#&local tArgs = { ... }!@#&for k, v in pairs( tArgs ) do!@#&	if v:lower() == \"hidemoves\" then!@#&		hideMoves = true!@#&	elseif v:lower() == \"ai\" then!@#&		AI = true!@#&	elseif v:lower() == \"monitor\" then!@#&		for k, v in pairs( peripheral.getNames() ) do!@#&			if peripheral.getType( v ) == \"monitor\" and peripheral.call( v, \"isColor\" ) then!@#&				--y 14!@#&				--x 33!@#&				peripheral.call( v, \"setTextScale\", 1 )!@#&				local x, y = peripheral.call( v, \"getSize\" )!@#&				peripheral.call( v, \"setTextScale\", math.floor( math.min( y/12, x/33 ) ) )!@#&				term.redirect( peripheral.wrap( v ) )!@#&				mon = true!@#&			end!@#&		end!@#&	end!@#&end!@#&!@#&local maxx, maxy = term.getSize()!@#&xOffset = math.floor( maxx/2 ) - 4!@#&yOffset = math.floor( maxy/2 ) - 4!@#&local turn = colors.white!@#&local moves = 60!@#&!@#&local function flip( x, y, color )!@#&	term.setCursorPos( x +xOffset, y +yOffset )!@#&	term.setBackgroundColor( colors.green )!@#&	term.setTextColor( color == colors.white and colors.black or colors.white )!@#&	term.write( \"|\" )!@#&	sleep( 0.1 )!@#&	term.setCursorPos( x +xOffset, y +yOffset )!@#&	term.setTextColor( color )!@#&	term.write( \"|\" )!@#&	term.setCursorPos( x +xOffset, y +yOffset )!@#&	sleep( 0.2 )!@#&	board[ x ][ y ] = color!@#&	term.setTextColor( color or colors.red )!@#&	term.write( \"0\" )!@#&end!@#&!@#&local function checkMove( x, y, color )!@#&	if not board[ x ] or board[ x ][ y ] then!@#&		return false!@#&	end!@#&	local isValid = false!@#&	local toFlip = {}!@#&	local flip = false!@#&	for i = y + 1, 8 do!@#&		if not board[ x ][ i ] then!@#&			break!@#&		elseif board[ x ][ i ] ~= color then!@#&			flip = true!@#&		elseif flip then!@#&			isValid = true!@#&			for _i = i - 1, y, -1 do!@#&				toFlip[ #toFlip + 1 ] = {x = x, y = _i}!@#&			end!@#&			break!@#&		else!@#&			break!@#&		end!@#&	end!@#&	flip = false!@#&	for i = y - 1, 1, -1 do!@#&		if not board[ x ][ i ] then!@#&			break!@#&		elseif board[ x ][ i ] ~= color then!@#&			flip = true!@#&		elseif flip then!@#&			isValid = true!@#&			for _i = i + 1, y do!@#&				toFlip[ #toFlip + 1 ] = {x = x, y = _i}!@#&			end!@#&			break!@#&		else!@#&			break!@#&		end!@#&	end!@#&	flip = false!@#&	for i = x + 1, 8 do!@#&		if not board[ i ][ y ] then!@#&			break!@#&		elseif board[ i ][ y ] ~= color then!@#&			flip = true!@#&		elseif flip then!@#&			isValid = true!@#&			for _i = i - 1, x, -1 do!@#&				toFlip[ #toFlip + 1 ] = {x = _i, y = y}!@#&			end!@#&			break!@#&		else!@#&			break!@#&		end!@#&	end!@#&	flip = false!@#&	for i = x - 1, 1, -1 do!@#&		if not board[ i ][ y ] then!@#&			break!@#&		elseif board[ i ][ y ] ~= color then!@#&			flip = true!@#&		elseif flip then!@#&			isValid = true!@#&			for _i = i + 1, x do!@#&				toFlip[ #toFlip + 1 ] = {x = _i, y = y}!@#&			end!@#&			break!@#&		else!@#&			break!@#&		end!@#&	end!@#&	--begin diagonal checking!@#&	flip = false!@#&	local _x, _y = x, y!@#&	while _x <= 8 and _y <= 8 do!@#&		_x = _x + 1!@#&		_y = _y + 1!@#&		if not board[ _x ][ _y ] then!@#&			break!@#&		elseif board[ _x ][ _y ] ~= color then!@#&			flip = true!@#&		elseif flip then!@#&			isValid = true!@#&			while _x ~= x and _y ~= y do!@#&				_x = _x - 1!@#&				_y = _y - 1!@#&				toFlip[ #toFlip + 1 ] = { x = _x, y = _y }!@#&			end!@#&			break!@#&		else!@#&			break!@#&		end!@#&	end!@#&	flip = false!@#&	local _x, _y = x, y!@#&	while _x <= 8 and _y >= 1 do!@#&		_x = _x + 1!@#&		_y = _y - 1!@#&		if not board[ _x ][ _y ] then!@#&			break!@#&		elseif board[ _x ][ _y ] ~= color then!@#&			flip = true!@#&		elseif flip then!@#&			isValid = true!@#&			while _x ~= x and _y ~= y do!@#&				_x = _x - 1!@#&				_y = _y + 1!@#&				toFlip[ #toFlip + 1 ] = { x = _x, y = _y }!@#&			end!@#&			break!@#&		else!@#&			break!@#&		end!@#&	end!@#&	flip = false!@#&	local _x, _y = x, y!@#&	while _x >= 1 and _y <= 8 do!@#&		_x = _x - 1!@#&		_y = _y + 1!@#&		if not board[ _x ][ _y ] then!@#&			break!@#&		elseif board[ _x ][ _y ] ~= color then!@#&			flip = true!@#&		elseif flip then!@#&			isValid = true!@#&			while _x ~= x and _y ~= y do!@#&				_x = _x + 1!@#&				_y = _y - 1!@#&				toFlip[ #toFlip + 1 ] = { x = _x, y = _y }!@#&			end!@#&			break!@#&		else!@#&			break!@#&		end!@#&	end!@#&	flip = false!@#&	local _x, _y = x, y!@#&	while _x >=1 and _y >= 1 do!@#&		_x = _x - 1!@#&		_y = _y - 1!@#&		if not board[ _x ][ _y ] then!@#&			break!@#&		elseif board[ _x ][ _y ] ~= color then!@#&			flip = true!@#&		elseif flip then!@#&			isValid = true!@#&			while _x ~= x and _y ~= y do!@#&				_x = _x + 1!@#&				_y = _y + 1!@#&				toFlip[ #toFlip + 1 ] = { x = _x, y = _y }!@#&			end!@#&			break!@#&		else!@#&			break!@#&		end!@#&	end!@#&	return isValid and toFlip or false!@#&end!@#&!@#&local function getScore()!@#&	local black, white = 0, 0!@#&	for x = 1, 8 do!@#&		for y = 1, 8 do!@#&			if board[ x ][ y ] == colors.white then!@#&				white = white + 1!@#&			elseif board[ x ][ y ] == colors.black then!@#&				black = black + 1!@#&			end!@#&		end!@#&	end!@#&	return black, white!@#&end!@#&!@#&local function showValidMoves( color )!@#&	local moves = 0!@#&	term.setTextColor( colors.brown )!@#&	for x = 1, 8 do!@#&		for y = 1, 8 do!@#&			if checkMove( x, y, color ) then!@#&				if not hideMoves then!@#&					term.setCursorPos( x + xOffset, y + yOffset )!@#&					term.write( \"0\" )!@#&				end!@#&				moves = moves + 1!@#&			end!@#&		end!@#&	end!@#&	return moves == 0!@#&end!@#&!@#&local function render()!@#&	term.setBackgroundColor( colors.green )!@#&	for x = 1, 8 do!@#&		for y = 1, 8 do!@#&			term.setCursorPos( x +xOffset, y+yOffset )!@#&			term.setTextColor( board[ x ][ y ] or colors.lightGray )!@#&			term.write( \"0\" )!@#&		end!@#&	end!@#&end!@#&!@#&local function showStats()!@#&	local black, white = getScore()!@#&	term.setTextColor( colors.lightBlue )!@#&	term.setBackgroundColor( colors.blue )!@#&	term.setCursorPos( xOffset - 11, yOffset + 4 )!@#&	term.write( \"Black: \" .. (tostring( black ):reverse() .. \"0\" ):match( \"%d%d\" ):reverse() )!@#&	term.setCursorPos( xOffset + 12, yOffset + 4 )!@#&	term.write( \"White: \" .. (tostring( white ):reverse() .. \"0\" ):match( \"%d%d\" ):reverse() )!@#&	term.setCursorPos( xOffset + 2, yOffset - 2 )!@#&	term.write( \"Turn: \" .. (turn == colors.white and \"W\" or \"B\") )!@#&end!@#&!@#&local function drawBorder()!@#&	term.setBackgroundColor( colors.blue )!@#&	term.setTextColor( colors.lightBlue )!@#&	term.setCursorPos( xOffset, yOffset )!@#&	term.write( \"\\\\||||||||/\" )!@#&	term.setCursorPos( xOffset, yOffset + 9 )!@#&	term.write( \"/||||||||\\\\\" )!@#&	for i = 1, 8 do!@#&		term.setCursorPos( xOffset, yOffset + i )!@#&		term.write( \"=\" )!@#&		term.setCursorPos( xOffset + 9, yOffset + i )!@#&		term.write( \"=\" )!@#&	end!@#&end!@#&!@#&local function AIMove()!@#&	local numDots, flips, move = 1, 0!@#&	term.setBackgroundColor( colors.blue )!@#&	term.setTextColor( colors.lightBlue )!@#&	for x = 1, 8 do!@#&		term.setCursorPos( xOffset - 9, yOffset + 3 )!@#&		term.write( string.rep( \".\", numDots ) )!@#&		term.write( string.rep( \" \", 3 - numDots ) )!@#&		numDots = (numDots + 1) % 4!@#&		for y = 1, 8 do!@#&			local results = checkMove( x, y, colors.black )!@#&			if results and #results > flips then!@#&				move = { x = x, y = y }!@#&				flips = #results!@#&			elseif results and #results == flips and math.random( 1, 2 ) == 1 then!@#&				move = { x = x, y = y }!@#&			end!@#&		end!@#&		sleep(0.05)!@#&	end!@#&	term.setBackgroundColor( colors.black )!@#&	term.setCursorPos( xOffset - 9, yOffset + 3 )!@#&	term.write( \"   \" )!@#&	return move!@#&end!@#&!@#&drawBorder()!@#&render()!@#&showValidMoves( colors.white )!@#&showStats()!@#&!@#&while moves > 0 do!@#&	local event = {os.pullEvent()}!@#&	if (mon and event[ 1 ] == \"monitor_touch\") or event[ 1 ] == \"mouse_click\" then!@#&		event[ 3 ] = event[ 3 ] - xOffset!@#&		event[ 4 ] = event[ 4 ] - yOffset!@#&		if event[ 3 ] >= 1 and event[ 3 ] <= 8 and event[ 4 ] <= 8 and event[ 4 ] >= 1 then!@#&			local result = checkMove( event[ 3 ], event[ 4 ], turn )!@#&			if result then!@#&				board[ event[ 3 ] ][ event[ 4 ] ] = turn!@#&				term.setCursorPos( event[ 3 ] + xOffset, event[ 4 ] + yOffset )!@#&				term.setTextColor( turn )!@#&				term.setBackgroundColor( colors.green )!@#&				term.write( \"0\" )!@#&				for _, v in ipairs( result ) do!@#&					if v.x == event[ 3 ] and v.y == event[ 4 ] then!@#&						--do nothing!@#&					else!@#&						flip( v.x, v.y, turn )!@#&					end!@#&				end!@#&				turn = turn == colors.white and colors.black or colors.white!@#&				moves = moves - 1!@#&				render()!@#&				if showValidMoves( turn ) then!@#&					turn = turn == colors.white and colors.black or colors.white!@#&					if showValidMoves( turn ) then!@#&						break!@#&					end!@#&				end!@#&			end!@#&			showStats()!@#&		end!@#&		if AI and turn == colors.black then!@#&			local result = AIMove()!@#&			os.queueEvent( \"mouse_click\", 1, result.x + xOffset, result.y + yOffset )!@#&		end!@#&	elseif event[ 1 ] == \"char\" and event[ 2 ] == \"m\" then!@#&		hideMoves = not hideMoves!@#&		render()!@#&		showValidMoves( turn )!@#&	end!@#&end!@#&!@#&term.setBackgroundColor( colors.black )!@#&term.setTextColor( colors.white )!@#&term.clear()!@#&term.setCursorPos( 1, 1 )!@#&local black, white = getScore()!@#&print( \"Congrats \" .. (black > white and \"black\" or \"white\") .. \"! You won the game!\" )",["GoldRunnerLevels"]={["super_015"]="bbbbbbbbbbe                           bbbbbbbbbb!@#&bbbbbbbbbb04  4  4  4  4  4  4  4  8  bbbbbbbbbb!@#&bbbbbbbbbb cd cd cd cd cd cd cd cd cd bbbbbbbbbb!@#&bbbbbbbbbb c  c  c  ce c  c  ce c  c  bbbbbbbbbb!@#&bbbbbbbbbb c  c  c  c  c  c  c  c  c  bbbbbbbbbb!@#&bbbbbbbbbb c  c  c  c  c  c  c  c  c  bbbbbbbbbb!@#&bbbbbbbbbb c  c  c  c  c  c  c  c dc  bbbbbbbbbb!@#&bbbbbbbbbb c  c  c  c  c  c  c dc     bbbbbbbbbb!@#&bbbbbbbbbb c  c  c  c  c  c dc        bbbbbbbbbb!@#&bbbbbbbbbb c  c  c  c  c dc     bbbbbcbbbbbbbbbb!@#&bbbbbbbbbb c  c  c  c dc     b4bbbbbbcbbbbbbbbbb!@#&bbbbbbbbbb c  c  c dc     bbbbbbbbbbbcbbbbbbbbbb!@#&bbbbbbbbbb c  c dc     bbbbbbbbbbbbbbcbbbbbbbbbb!@#&bbbbbbbbbb c dc     b bbbbbbbbbbbbbbbcbbbbbbbbbb!@#&bbbbbbbbbbdc     bbbbbbbbbbbbbbbbbbbbcbbbbbbbbbb!@#&bbbbbbbbbb 8  bbbbbbbbbbbbbbbbbbbbbbbcbbbbbbbbbb!@#&7777777777777777777777777777777777777777777777777",["04_fortress"]="!@#&7  4 547                                      0  !@#&7ccbbbb7                                   cbbbbb!@#&7cc77777                                   cb 4 4!@#&7cc                                        cb7777!@#&7cc7                                             !@#&7cc7                                             !@#&7cc                         4    dddd dddd dddd  !@#&7cc77                   c777b777c    c    c    c7!@#&7cc7c77  dddddd 4    4  c      7c    c  e c    c7!@#&7cc c          bbbbcbbbbc      777777777777777777!@#&7777c7  7          c    c                        !@#&7c77c 77           c    c4   4  dddddddd 4 4     !@#&7c  c 77 4       bbbbc7b7b7b7b7c        bbbbbc   !@#&7c  c  7bb           c         c             c   !@#&77c777c777b   4      c         c             c   !@#&7ece 7c  7bbbbbb     c         c     e       c   !@#&7777777777777777777777777777777777777777777777777",["classic_003"]="bbbbbbbbbb                           5bbbbbbbbbb!@#&bbbbbbbbbbdddddddddd    4            8bbbbbbbbbb!@#&bbbbbbbbbbc 4      cbbbbbbbbbbc      8bbbbbbbbbb!@#&bbbbbbbbbbbbbbbc   c          c7777777bbbbbbbbbb!@#&bbbbbbbbbb     c e c     4    c       bbbbbbbbbb!@#&bbbbbbbbbb     cbbbbbbcbbbbbcbb       bbbbbbbbbb!@#&bbbbbbbbbb  4  c      c     c  dd     bbbbbbbbbb!@#&bbbbbbbbbbbbbbcb      c  e  c    dd   bbbbbbbbbb!@#&bbbbbbbbbb    c    cbbbbbbcbb      dd4bbbbbbbbbb!@#&bbbbbbbbbb    cddddc      c  e       bbbbbbbbbbb!@#&bbbbbbbbbb    c       cbbbbbbbbbc     bbbbbbbbbb!@#&bbbbbbbbbb    c       cbbbbbbbbbc     bbbbbbbbbb!@#&bbbbbbbbbbbbbcbbbbbbbbbb   4   bbbbbcbbbbbbbbbbb!@#&bbbbbbbbbbbbbcbbbbbbbbbb cbbbc bbbbbcbbbbbbbbbbb!@#&bbbbbbbbbb   c      0    cbbbc   4  c bbbbbbbbbb!@#&bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb!@#&7777777777777777777777777777777777777777777777777",["classic_010"]="bbbbbbbbbb          4              5  bbbbbbbbbb!@#&bbbbbbbbbb        cbbbbbbb  4      8  bbbbbbbbbb!@#&bbbbbbbbbb    4   c      bbbbbb    8  bbbbbbbbbb!@#&bbbbbbbbbbbbbbbbbbbbc         4    8  bbbbbbbbbb!@#&bbbbbbbbbb          cbbbbbb8bbbbbcbb  bbbbbbbbbb!@#&bbbbbbbbbbe         c      8     c    bbbbbbbbbb!@#&bbbbbbbbbbbbbbbbbbbbc      8 e   c   4bbbbbbbbbb!@#&bbbbbbbbbbbbbbbbbbbbcbbbbbbb77   cbbbbbbbbbbbbbb!@#&bbbbbbbbbbbbbbbbbbbbc            c    bbbbbbbbbb!@#&bbbbbbbbbbbbbbbbbbbbc       4 dddc    bbbbbbbbbb!@#&bbbbbbbbbbbb      bbc       bb   c    bbbbbbbbbb!@#&bbbbbbbbbbbb  44  bbc     4      c    bbbbbbbbbb!@#&bbbbbbbbbbbbbbbbbbbbbcbbbbbbbc   c    bbbbbbbbbb!@#&bbbbbbbbbb           c       bbbbbbbbcbbbbbbbbbb!@#&bbbbbbbbbb    4    0 c               cbbbbbbbbbb!@#&bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb!@#&7777777777777777777777777777777777777777777777777",["super_016"]="bbbbbbbbbb5ccc  ccccccccccccccccccccccbbbbbbbbbb!@#&bbbbbbbbbbc  4bb  77 4 7c4e 774  7c 4cbbbbbbbbbb!@#&bbbbbbbbbbc 4bb     77e4 7c4  774  7ccbbbbbbbbbb!@#&bbbbbbbbbbc4bb      4 77 4 7c4  774  cbbbbbbbbbb!@#&bbbbbbbbbbcbb      cbb  77 4 7c4  774cbbbbbbbbbb!@#&bbbbbbbbbbc7 4    c1b     77 4 7c4  7cbbbbbbbbbb!@#&bbbbbbbbbbc 77 4 cb1        77 4 7c4 cbbbbbbbbbb!@#&bbbbbbbbbbc4  7b bb          477 4 77cbbbbbbbbbb!@#&bbbbbbbbbbc7c4  77 4       cbb  77 4 cbbbbbbbbbb!@#&bbbbbbbbbbc4 7c4  77 4    c1b     770cbbbbbbbbbb!@#&bbbbbbbbbbc74  7c4e 77 4 cb1       4bcbbbbbbbbbb!@#&bbbbbbbbbbc 774e 7c4  7b bb      4b77cbbbbbbbbbb!@#&bbbbbbbbbbc4  77 4 7c4  77 4    4b7  cbbbbbbbbbb!@#&bbbbbbbbbbc7c4  774  7c4  77 4 4b7   cbbbbbbbbbb!@#&bbbbbbbbbbce 7c   77   7c   bb bb    cbbbbbbbbbb!@#&bbbbbbbbbbccccccccccccccccccccbbbbbbbcbbbbbbbbbb!@#&7777777777777777777777777777777777777777777777777",["07_pyramid"]="        8     bbbb  0 b     b                    !@#&        8b bbbb    8bbb  5  b                    !@#&        8b        8bbb   8  b                    !@#&        8bbbbbbbbbbbbbbbbbbbb                    !@#&        8                                        !@#&        8                          ddd          b!@#&        8                         c   bbbbbbbbbcb!@#&        8                         c      4bbb  cb!@#&b       8ddd ddddddd   e   dddddddc      bbb4  cb!@#&bbbbbbbbb   c       bbbbbbb       c      4bbb  cb!@#&b       b   c      bbb444bbb      c      bbb4  cb!@#&b   4   b   c     bbb4   4bbb     c      4bbb  cb!@#&b  bbb  b   c    bbb4     4bbb    c      7777  cb!@#&b 4   4 b   c   bbb4       4bbb   cbbbbbbbbbbbbbb!@#&b bbbbb b   c  bbb           bbb  c             b!@#&bddd4dddb   c bbbbbbbbbbbbbbbbbbb c cbbb        b!@#&b4  b  4    c      e       e      c cbbb 4444   b!@#&bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb",["03_seeker"]="                                                 !@#&                                                 !@#&                               5                 !@#&  4 4                          8     4     4     !@#& bbcbb                         8    bbbbbbcb     !@#&   c                           8          c      !@#&   c 4 dddd  4   e 4  dddddd   8          c      !@#&   bbbb    bbbbcbbbbbb         8          c      !@#&               c             4 8  e 4     c      !@#&               c           bbbbbbbbcbb    c      !@#&               c                   c      c      !@#&          4    c 4     0        4  c   4  c      !@#&      bbbcbbbbbbbbb            bbbbcbbbbbbbc     !@#&         c                                 c     !@#&         c                                 c     !@#&         c                                 c     !@#&b        c 4     4          4         4    c    b!@#&bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb",["super_011"]="bbbbbbbbbb5ddddddddddddddddddddddddddcbbbbbbbbbb!@#&bbbbbbbbbbc   0                      cbbbbbbbbbb!@#&bbbbbbbbbbc bbbbb bbbbb  bbbbb bbbbb cbbbbbbbbbb!@#&bbbbbbbbbbc b 4 b b 4 b  b 4 b b 4 b cbbbbbbbbbb!@#&bbbbbbbbbbc b7bbb bbbbb  bbbbb b7bbb cbbbbbbbbbb!@#&bbbbbbbbbbc   b     b      b     b   cbbbbbbbbbb!@#&bbbbbbbbbbc bbb7b bbbbb  bbbbb bbb7b cbbbbbbbbbb!@#&bbbbbbbbbbc b 4 b b 4 b  b 4 b b 4 b cbbbbbbbbbb!@#&bbbbbbbbbbc b7bbb bbbbb  bbbbb b7bbb cbbbbbbbbbb!@#&bbbbbbbbbbc   b     b      b     b   cbbbbbbbbbb!@#&bbbbbbbbbbc bbb7b bbbbb  bbbbb bbb7b cbbbbbbbbbb!@#&bbbbbbbbbbc b 4 b b 4 b  b 4 b b 4 b cbbbbbbbbbb!@#&bbbbbbbbbbc bbbbb bbbbb  bbbbb bbbbb cbbbbbbbbbb!@#&bbbbbbbbbbc   b     b      b     b   cbbbbbbbbbb!@#&bbbbbbbbbbce        b      b        ecbbbbbbbbbb!@#&bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb!@#&7777777777777777777777777777777777777777777777777",["super_003"]="bbbbbbbbbb5cccc4ccecccccccc0ccc      8bbbbbbbbbb!@#&bbbbbbbbbbccccccccccccccccccccc7     8bbbbbbbbbb!@#&bbbbbbbbbbccccccccccccccccccccc7     8bbbbbbbbbb!@#&bbbbbbbbbb4cccccecccc4ccccccccc7bbbbbbbbbbbbbbbb!@#&bbbbbbbbbbcccc777777777777777777777777bbbbbbbbbb!@#&bbbbbbbbbbccccccccccccccccccccccccccccbbbbbbbbbb!@#&bbbbbbbbbbccccc4ccccccccecc4ccccccccccbbbbbbbbbb!@#&bbbbbbbbbb777777777777777777777777ccccbbbbbbbbbb!@#&bbbbbbbbbbcccccccc4cccccccccc4ccc7ccc4bbbbbbbbbb!@#&bbbbbbbbbbccccccccccccccccccccccc7ccccbbbbbbbbbb!@#&bbbbbbbbbbccccccccccccccccccccccc7ccccbbbbbbbbbb!@#&bbbbbbbbbbcccc4ccccccccc4ccccccc474cccbbbbbbbbbb!@#&bbbbbbbbbbcccc77777777777777ccccc7ccccbbbbbbbbbb!@#&bbbbbbbbbbccccccccccccccccc7ccccccccccbbbbbbbbbb!@#&bbbbbbbbbbcccccccccccec4c4c7ccccccccccbbbbbbbbbb!@#&bbbbbbbbbb777777777777777b77c4ccccccc4bbbbbbbbbb!@#&7777777777777777777777777777777777777777777777777",["08_cavein"]="bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb   bbbbbbbbbbbbbb!@#&b  8 8  8   8 8   b 4            5 b4 e      4  b!@#&b  888  8 8     8 bbbbbbbcbbbbc  8 bbbbbbbcbbbbbb!@#&b  8 8  8  88888  bbbb4bbcbbbbbbbbbb bbb  c     b!@#&b     e                  c      bbbb bbb  c     b!@#&bbbbbbbbbbbbbbbb77bcbbbbbbbbbbbcbbbb bbb  c 4  4b!@#&b  4     4  bb   bbc           cb44b bbb  c     b!@#&bbbbbbbbbbbbb     bc           cbbbbbbbb  c     b!@#&b   4     4 b4 4 4bc           c    4bbb4 c     b!@#&bbbbbbbbbbbbb4 4 4bc    bbbcbbbbbbbbbbbbbbbbbccbb!@#&b 4     4   b     bc    bbbc         e  4 cbbccbb!@#&bbbbbbbbbbbbbbbcbbbc   4bbbc   cbbbbbbbbbbcbbccbb!@#&b              c   cbbbbb  c4  c    bbbbbbcbbccbb!@#&b              c   cbbbbbcbbbbbcbbbbbb44  cbbccbb!@#&b    4  4  cbbbbbbbcbbbbbcbbbbbcbbbb4bbbbbbbbccbb!@#&bbbbbbbbbbbbbbbbbbbce    cbb4bbc      0      cc4b!@#&bb     bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb!@#&7777777777777777777777777777777777777777777777777",["super_009"]="bbbbbbbbbbbbbbbbbbbbbb5 b 8bbbbbbbbbb8bbbbbbbbbb!@#&bbbbbbbbbbbb eccc cc e8   8ecc  cc eb8bbbbbbbbbb!@#&bbbbbbbbbb 4bb  4b 4bcc   cb4 bb4 bb48bbbbbbbbbb!@#&bbbbbbbbbb4bb  4b 4bcc    cbb4 bb4 bb8bbbbbbbbbb!@#&bbbbbbbbbbbb  4b 4bcc 4 0 c bb4 bb4 bbbbbbbbbbbb!@#&bbbbbbbbbbb  4b 4bcc 4bbbbc4 bb4 bb4 bbbbbbbbbbb!@#&bbbbbbbbbb 4 b 4bcc 4bb  bbc4 bb4 bb4 bbbbbbbbbb!@#&bbbbbbbbbbcbb 4bcc 4bb 44 bbc4 bb4 bb bbbbbbbbbb!@#&bbbbbbbbbbcb 4bcc 4bb4cbbc4bbc4 bb4 bbbbbbbbbbbb!@#&bbbbbbbbbbc 4bcc 4bb4cb  bc4bbc4 bb4  bbbbbbbbbb!@#&bbbbbbbbbbc4bcc 4bb4cb 44 bc4bbc4 bb4ebbbbbbbbbb!@#&bbbbbbbbbbcbcc 4bb4cb 4bb4 bc4bbc4 bbcbbbbbbbbbb!@#&bbbbbbbbbbccc 4bb4cb 4bbbb4 bc4bbc4 bcbbbbbbbbbb!@#&bbbbbbbbbbcc 4bb4cb 4bb44bb4 bc4bbc4 cbbbbbbbbbb!@#&bbbbbbbbbbc4 bb4cb 4   bb   4 bc4bbc4cbbbbbbbbbb!@#&bbbbbbbbbbbbc 4bc bbbbbbbbbbbb cb 4cbbbbbbbbbbbb!@#&7777777777777777777777777777777777777777777777777",["classic_007"]="bbbbbbbbbb  5                         bbbbbbbbbb!@#&bbbbbbbbbb  8                 ddddddddbbbbbbbbbb!@#&bbbbbbbbbb  8          e      c      cbbbbbbbbbb!@#&bbbbbbbbbbbbbbbcb    bcbbb   ec    4 cbbbbbbbbbb!@#&bbbbbbbbbb     c      c    bbbcbbbbbbbbbbbbbbbbb!@#&bbbbbbbbbb  e  c   4  c       c       bbbbbbbbbb!@#&bbbbbbbbbbbbbbbcbbbb  c       c       bbbbbbbbbb!@#&bbbbbbbbbb     c      c       c       bbbbbbbbbb!@#&bbbbbbbbbb  4  c   4  c       c       bbbbbbbbbb!@#&bbbbbbbbbbbbcbbbbbbbbbbbbc    c bbbb cbbbbbbbbbb!@#&bbbbbbbbbb  c            c 4  c bbbb cbbbbbbbbbb!@#&bbbbbbbbbb  c  4         cddddc b 4b cbbbbbbbbbb!@#&bbbbbbbbbbbbbbbbbc            c bbbbbcbbbbbbbbbb!@#&bbbbbbbbbb       c            c      cbbbbbbbbbb!@#&bbbbbbbbbb       c 0        4 c  e   cbbbbbbbbbb!@#&bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb!@#&7777777777777777777777777777777777777777777777777",["classic_013"]="bbbbbbbbbb            e          e    bbbbbbbbbb!@#&bbbbbbbbbb1c1c1c1c1c1c1c1c1c1c1c1c1c18bbbbbbbbbb!@#&bbbbbbbbbb1c1c1c1c1c1c1c1c1c1c1c1c1c18bbbbbbbbbb!@#&bbbbbbbbbb4cbc cbc4cbc cbc4cbc cbc4cb8bbbbbbbbbb!@#&bbbbbbbbbb1cbc1cbc1cbc1cbc1cbc1cbc1cb8bbbbbbbbbb!@#&bbbbbbbbbb1cbc1cbc1cbc1cbc1cbc1cbc1cb8bbbbbbbbbb!@#&bbbbbbbbbb1cbc1cbc1cbc1cbc1cbc1cbc1cb8bbbbbbbbbb!@#&bbbbbbbbbb cbc4cbc cbc4cbc cbc4cbc cb8bbbbbbbbbb!@#&bbbbbbbbbb1cbc1cbc1cbc1cbc1cbc1cbc1cb8bbbbbbbbbb!@#&bbbbbbbbbb1cbc1cbc1cbc1cbc1cbc1cbc1cb8bbbbbbbbbb!@#&bbbbbbbbbb4c c c c c c c c c c c c cb8bbbbbbbbbb!@#&bbbbbbbbbbcbbbbbbbbbbbbbbbbbbbbbbbbbb8bbbbbbbbbb!@#&bbbbbbbbbbc         4 e 4   4 e      8bbbbbbbbbb!@#&bbbbbbbbbbc777777777777777777777777778bbbbbbbbbb!@#&bbbbbbbbbbc4       0                48bbbbbbbbbb!@#&bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb!@#&7777777777777777777777777777777777777777777777777",["super_002"]="bbbbbbbbbb4e    77    548   e      0 4bbbbbbbbbb!@#&bbbbbbbbbbcddddd7d7ddddcdddd77dddddddcbbbbbbbbbb!@#&bbbbbbbbbbcdddd47dd7dddcdddd7d7ddddddcbbbbbbbbbb!@#&bbbbbbbbbbcddd777ddddddcddd47dd7dddddcbbbbbbbbbb!@#&bbbbbbbbbbcddd777ddddddcdd777ddddddddcbbbbbbbbbb!@#&bbbbbbbbbbcddddddddddddcdd777ddddddddcbbbbbbbbbb!@#&bbbbbbbbbbce   444     e            ecbbbbbbbbbb!@#&bbbbbbbbbbc            4         44  cbbbbbbbbbb!@#&bbbbbbbbbbcddddddddddddcddddddddd77ddcbbbbbbbbbb!@#&bbbbbbbbbbcdddddddd77ddcddddddddd7d7dcbbbbbbbbbb!@#&bbbbbbbbbbcdddddddd7d7dcdddddddd47dd7cbbbbbbbbbb!@#&bbbbbbbbbbcddddddd47dd7cddddddd777dddcbbbbbbbbbb!@#&bbbbbbbbbbcdddddd777ddddddddddd777dddcbbbbbbbbbb!@#&bbbbbbbbbbc      777        444      cbbbbbbbbbb!@#&bbbbbbbbbbc                          cbbbbbbbbbb!@#&bbbbbbbbbbc44444444444444444444444444cbbbbbbbbbb!@#&7777777777777777777777777777777777777777777777777",["10_convert"]="         8                  !@#&         8       4      e   !@#&777      8      7777c7777777!@#&  77     8     77   c       !@#&   77    8    77    c       !@#&4e 777   8  4777    c   4   !@#&77c7777  8  7777c777c7777777!@#&  c   77 8 77   c           !@#&  c4e  77c77    c     4     !@#&c777c    c     7c77c777     !@#&c   c              c        !@#&c   c    4     e   c        !@#&c   c7777777c777777c77777c77!@#&c           c            c  !@#&c           c  0         c  !@#&7777777777777777777777777777",["super_017"]="bbbbbbbbbb         5        8         bbbbbbbbbb!@#&bbbbbbbbbb    4    8        8         bbbbbbbbbb!@#&bbbbbbbbbb   c7bce 8        8  cb7c 4 bbbbbbbbbb!@#&bbbbbbbbbbc7bc  c77c        c77c  c77cbbbbbbbbbb!@#&bbbbbbbbbbc0 4  4  cb7c 4cb7c  4  4  cbbbbbbbbbb!@#&bbbbbbbbbb77c 4    4 8c77c         c7bbbbbbbbbbb!@#&bbbbbbbbbb  cb7ce c7784  c77c   c7bc 4bbbbbbbbbb!@#&bbbbbbbbbbc774 cb7c      4  c877c4 c77bbbbbbbbbb!@#&bbbbbbbbbbc    4  cb7ce   c7b8  cb7c  bbbbbbbbbb!@#&bbbbbbbbbbcb78    4  c778 c  4  c  e  bbbbbbbbbb!@#&bbbbbbbbbb 4 877c  c77  8b7c    c7b7c bbbbbbbbbb!@#&bbbbbbbbbb      c7bc    4  c77c   4 c bbbbbbbbbb!@#&bbbbbbbbbb   c7bc 4c77c       cb7c  c bbbbbbbbbb!@#&bbbbbbbbbbc77c  cb7c  c7bc c7bc4 c77c bbbbbbbbbb!@#&bbbbbbbbbbc  8  8 e8  84 848  8  8 48 bbbbbbbbbb!@#&bbbbbbbbbbc77777777cb 77b77cb 77777777bbbbbbbbbb!@#&7777777777777777777777777777777777777777777777777",["classic_012"]="bbbbbbbbbb      4     4           5   bbbbbbbbbb!@#&bbbbbbbbbbcbbbbbbbbbbbbbbbbbc     c   bbbbbbbbbb!@#&bbbbbbbbbbc             4   cdddddc  4bbbbbbbbbb!@#&bbbbbbbbbbbbbbbbbbbcbbbbbbbbb     cbbbbbbbbbbbbb!@#&bbbbbbbbbbbbbbbbbbcc              c   bbbbbbbbbb!@#&bbbbbbbbbbbbbbbbbccdddddddc       c   bbbbbbbbbb!@#&bbbbbbbbbbb4 4bbcc      e c  4  e c  4bbbbbbbbbb!@#&bbbbbbbbbbbbbbbcc     cbbbb777bbbbcbbbbbbbbbbbbb!@#&bbbbbbbbbb     c      c           c   bbbbbbbbbb!@#&bbbbbbbbbb     c      c           c   bbbbbbbbbb!@#&bbbbbbbbbb    ec   4  cdddddddddddc  4bbbbbbbbbb!@#&bbbbbbbbbbcbbbbbbbbbbbc  4     4  cbbbbbbbbbbbbb!@#&bbbbbbbbbbc           c bbbbbbbbb c   bbbbbbbbbb!@#&bbbbbbbbbbc           c           c   bbbbbbbbbb!@#&bbbbbbbbbbc      4    c    0 4    c   bbbbbbbbbb!@#&bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb!@#&7777777777777777777777777777777777777777777777777",["classic_001"]="bbbbbbbbbb                  5         bbbbbbbbbb!@#&bbbbbbbbbb    4             8         bbbbbbbbbb!@#&bbbbbbbbbbbbbbbbbcbbbbbbb   8         bbbbbbbbbb!@#&bbbbbbbbbb       cdddddddddd8    4    bbbbbbbbbb!@#&bbbbbbbbbb       c    bbc   bbbbbbbcbbbbbbbbbbbb!@#&bbbbbbbbbb       c    bbc          c  bbbbbbbbbb!@#&bbbbbbbbbb     e c    bbc       4e c  bbbbbbbbbb!@#&bbbbbbbbbbbbcbbbbb    bbbbbbbbcbbbbbbbbbbbbbbbbb!@#&bbbbbbbbbb  c                 c       bbbbbbbbbb!@#&bbbbbbbbbb  c           e     c       bbbbbbbbbb!@#&bbbbbbbbbbbbbbbbbbbcbbbbbbbbbbc       bbbbbbbbbb!@#&bbbbbbbbbb         c          c       bbbbbbbbbb!@#&bbbbbbbbbb       4 cddddddddddc   4   bbbbbbbbbb!@#&bbbbbbbbbb    cbbbbbb         bbbbbbbcbbbbbbbbbb!@#&bbbbbbbbbb    c         0  4         cbbbbbbbbbb!@#&bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb!@#&7777777777777777777777777777777777777777777777777",["02_coalmine"]="bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb!@#&b        0                                      b!@#&bbbb     bb                 dddd          cb    b!@#&b      bbbb           e  cbb      4 4     cb 44 b!@#&bbbbbbbbbbbbbbbbbbbbcbbbbbbb    bbbbbbbbbbbb7777b!@#&b    b dddddddd     c                           b!@#&b     b             c            cbb            b!@#&b 44 b              c          cbbbb    4 4 4   b!@#&bbbbbbbbbbbbcbbbbbbbbbbbbbbbbbbbbbbbb7b7bbbbb7bbb!@#&bbbbbb4 bbbbcb4  4  4bb4  4bbbbbbbbbbb7bbb7b7b77b!@#&b bb     bbbcbbbbbbbbbbbbbbbbb                  b!@#&b           c                         7777777777b!@#&b           c     dd    ddddddddddddcb7777777777b!@#&bbbbbbbbbbbbbbbbbb  cbbb            cbbbb    5  b!@#&bbbbbbbbbbbbbbbbbb cbbb            c7b    8bbbbbb!@#&b                 cbbb             c7b    8 4 4 b!@#&b  4 4 4 4 4  cb  cbb              c7b  cbbbbbbbb!@#&bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb777777777777b",["classic_011"]="bbbbbbbbbb       5                    bbbbbbbbbb!@#&bbbbbbbbbb e4    c                 4e bbbbbbbbbb!@#&bbbbbbbbbbcbbe4  c               4ebbcbbbbbbbbbb!@#&bbbbbbbbbbc  bb  cbbbb8cbbbbbc   bb  cbbbbbbbbbb!@#&bbbbbbbbbbc           cc4    c       cbbbbbbbbbb!@#&bbbbbbbbbbc           4cc    c       cbbbbbbbbbb!@#&bbbbbbbbbbc           cc4            cbbbbbbbbbb!@#&bbbbbbbbbbc           4cc            cbbbbbbbbbb!@#&bbbbbbbbbbc           cc4            cbbbbbbbbbb!@#&bbbbbbbbbbc           4cc            cbbbbbbbbbb!@#&bbbbbbbbbbc           cc4            cbbbbbbbbbb!@#&bbbbbbbbbbc           4cc            cbbbbbbbbbb!@#&bbbbbbbbbbc           cc4            cbbbbbbbbbb!@#&bbbbbbbbbbc           4cc            cbbbbbbbbbb!@#&bbbbbbbbbbc       0   cc4            cbbbbbbbbbb!@#&bbbbbbbbbbc    cbbbbbbbbbbbbbbbbc    cbbbbbbbbbb!@#&7777777777777777777777777777777777777777777777777",["super_010"]="bbbbbbbbbb5ddd  bbbb   4cc  bbbbbbbb  bbbbbbbbbb!@#&bbbbbbbbbbc  4bb4bbb  4c  4bb       b bbbbbbbbbb!@#&bbbbbbbbbbc 4bbbb4bb 4c  4bb4cbbbbbbb bbbbbbbbbb!@#&bbbbbbbbbbc4bbbbbb4b c4 dbb4c     bb  bbbbbbbbbb!@#&bbbbbbbbbbcbbbbbbbbb 4c db c       bb bbbbbbbbbb!@#&bbbbbbbbbbc dd44b44b c4 dbc        4b bbbbbbbbbb!@#&bbbbbbbbbbc4  bb4bb4 4c dbcb       cb bbbbbbbbbb!@#&bbbbbbbbbb0c  4bb4bb c4 dbcb4cb4cb4cb bbbbbbbbbb!@#&bbbbbbbbbb bc bb4bb4 4c dbc777777777b bbbbbbbbbb!@#&bbbbbbbbbbebc 4bb4bb c4 dbc         b bbbbbbbbbb!@#&bbbbbbbbbb bc bb4bb4 4c dbbbbbbcbbbbb bbbbbbbbbb!@#&bbbbbbbbbb bc 4bb4bb bc dbb4  bcb  4b bbbbbbbbbb!@#&bbbbbbbbbb 4c bb4bb4b c d  b ebcb  bb bbbbbbbbbb!@#&bbbbbbbbbb bc  bbbbb  c  bb bbbcbbbb  bbbbbbbbbb!@#&bbbbbbbbbb  cddd bbbbb    bcccccbbb   bbbbbbbbbb!@#&bbbbbbbbbb  8                         bbbbbbbbbb!@#&7777777777777777777777777777777777777777777777777",["classic_006"]="bbbbbbbbbbbbbbbbbbbbbbbbbbbb5bbbbbbbbbbbbbbbbbbb!@#&bbbbbbbbbbb 4               8b e 4   bbbbbbbbbbb!@#&bbbbbbbbbbb1bbbcbbbbc   4   8bbbbbbbcbbbbbbbbbbb!@#&bbbbbbbbbbb1bbbcbbbbbbbbbbbbbb bbb  cbbbbbbbbbbb!@#&bbbbbbbbbbb    c  4 e     bbbb bbb  cbbbbbbbbbbb!@#&bbbbbbbbbbbcbbbbbbbbbcbbbbbbbb bbb  cbbbbbbbbbbb!@#&bbbbbbbbbbbc   bbbbbbcbbbbb44b bbb4 cbbbbbbbbbbb!@#&bbbbbbbbbbbc   bbbbbbcbbbbbbbbbbbbbbcbbbbbbbbbbb!@#&bbbbbbbbbbbc   b    4c    4  e   4 bcbbbbbbbbbbb!@#&bbbbbbbbbbbc   bbbcbbbbbbbcbbbbbbbcbcbbbbbbbbbbb!@#&bbbbbbbbbbbc  4bbbc       cbbbbbbbcbcbbbbbbbbbbb!@#&bbbbbbbbbbbcbb1b  c    0  c  bb   cbcbbbbbbbbbbb!@#&bbbbbbbbbbbcbb1bcbbbbbcbbbbbbbb44 cbcbbbbbbbbbbb!@#&bbbbbbbbbbbcbb1bcbbbbbcbbbbbb4bbbbbbcbbbbbbbbbbb!@#&bbbbbbbbbbbce   cbb4bbc    4  e     cbbbbbbbbbbb!@#&bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb!@#&7777777777777777777777777777777777777777777777777",["classic_009"]="bbbbbbbbbb5                           bbbbbbbbbb !@#&bbbbbbbbbb8dddddddddddddddddddddddddddbbbbbbbbbb !@#&bbbbbbbbbbcb e   b             b     bbbbbbbbbbb !@#&bbbbbbbbbbc bbbbb               bbbbb bbbbbbbbbb !@#&bbbbbbbbbbc b bbb               b4bbb bbbbbbbbbb !@#&bbbbbbbbbbc bbbbb e    e      e bbbbb bbbbbbbbbb !@#&bbbbbbbbbbc bbb b1bbbbbbbbbbbbbbbbb b bbbbbbbbbb !@#&bbbbbbbbbbc bbbbb1bbb 4bb 4bbbbbbbbcb bbbbbbbbbb !@#&bbbbbbbbbbc bbbbb1bbbbbbbbbbbbbbbbbcb bbbbbbbbbb !@#&bbbbbbbbbbc bbbbb1bbbbbbbbbbbbbbbbbcb bbbbbbbbbb !@#&bbbbbbbbbbc bbbbb1bbbb    bbbbbbbbbcb bbbbbbbbbb !@#&bbbbbbbbbbc bbbbb1bbbb    bbbbbbbbbcb bbbbbbbbbb !@#&bbbbbbbbbbc bbbbb1bbbb   4cbbbbbbbbcb bbbbbbbbbb !@#&bbbbbbbbbbc           bbbbcddddddddc  bbbbbbbbbb !@#&bbbbbbbbbbc      0   7777             bbbbbbbbbb !@#&bbbbbbbbbbbbbbbbbbbb7777      e       bbbbbbbbbb !@#&7777777777777777777777777777777777777777777777777",["classic_008"]="bbbbbbbbbb           5    8           bbbbbbbbbb!@#&bbbbbbbbbb           8    8           bbbbbbbbbb!@#&bbbbbbbbbb   4 e   cb8    8bc   e 4   bbbbbbbbbb!@#&bbbbbbbbbbcbbbbbcddcb8    8bcddcbbbbbcbbbbbbbbbb!@#&bbbbbbbbbbcb   bc   b8    8b   cb   bcbbbbbbbbbb!@#&bbbbbbbbbbcb   bc   b8    8b   cb   bcbbbbbbbbbb!@#&bbbbbbbbbbcb 4 bc   b8    8b   cb 4 bcbbbbbbbbbb!@#&bbbbbbbbbbcbbbbbc   b8    8b   cbbbbbcbbbbbbbbbb!@#&bbbbbbbbbbcb   bc   b8    8b   cb   bcbbbbbbbbbb!@#&bbbbbbbbbbcb   bcdddbcbbbbcbdddcb   bcbbbbbbbbbb!@#&bbbbbbbbbbcb   b   cbc    cbc   b   bcbbbbbbbbbb!@#&bbbbbbbbbbcbe4 b   cbc  4ecbc   b 4ebcbbbbbbbbbb!@#&bbbbbbbbbbcbb1bb   cb777777bc   bb1bbcbbbbbbbbbb!@#&bbbbbbbbbbc     1  c        c  1     cbbbbbbbbbb!@#&bbbbbbbbbbc      1ec    0   c 1      cbbbbbbbbbb!@#&bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb!@#&7777777777777777777777777777777777777777777777777",["classic_004"]="bbbbbbbbbb5                           bbbbbbbbbb!@#&bbbbbbbbbb8ddddddddddd                bbbbbbbbbb!@#&bbbbbbbbbbc     c     b 4 b     c     bbbbbbbbbb!@#&bbbbbbbbbbc 4  ccc  4 bbbbb 4  ccc  4 bbbbbbbbbb!@#&bbbbbbbbbbc cc  c  cc       cc  c  cc bbbbbbbbbb!@#&bbbbbbbbbbc c ccccc c       c ccccc c bbbbbbbbbb!@#&bbbbbbbbbbc c  4e4  c   c   c  4e4  c bbbbbbbbbb!@#&bbbbbbbbbbc  cbbbbbc   ccc   cbbbbbc  bbbbbbbbbb!@#&bbbbbbbbbbc   ccccc cc  c  cc ccccc   bbbbbbbbbb!@#&bbbbbbbbbbc         c ccccc c         bbbbbbbbbb!@#&bbbbbbbbbbc    4    c  4e4  c     4   bbbbbbbbbb!@#&bbbbbbbbbbcbbbbbbc   cbbbbbc  cbbbbbbbbbbbbbbbbb!@#&bbbbbbbbbbc      c    ccccc   c       bbbbbbbbbb!@#&bbbbbbbbbbc      c            c       bbbbbbbbbb!@#&bbbbbbbbbbc      c       4  0 c       bbbbbbbbbb!@#&bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb!@#&7777777777777777777777777777777777777777777777777",["super_005"]="bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb bbbbbbbbbb!@#&bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb8bbbbbbbbbb!@#&bbbbbbbbbb0             4 b          8bbbbbbbbbb!@#&bbbbbbbbbbc7b7b7b7b7b7b b bbbbbbbbbbbcbbbbbbbbbb!@#&bbbbbbbbbbc7b7b7b7b7b7b7b b bbbbbbb bcbbbbbbbbbb!@#&bbbbbbbbbbc            4  b bbbbbbb bcbbbbbbbbbb!@#&bbbbbbbbbbcb7b7b7b7b7b b  b bdbbbdb bcbbbbbbbbbb!@#&bbbbbbbbbbcb7b7b7b7b7b7b  b bdbbbdb bcbbbbbbbbbb!@#&bbbbbbbbbbc           4   b bdb bdb bcbbbbbbbbbb!@#&bbbbbbbbbbc7b7b7b7b7b b   b bdb bdb bcbbbbbbbbbb!@#&bbbbbbbbbbc7b7b7b7b7b7b   b bdb bdb bcbbbbbbbbbb!@#&bbbbbbbbbbc          4    b bdb bdb bcbbbbbbbbbb!@#&bbbbbbbbbbcb7b7b7b7b b    b4b4b4b4b4bcbbbbbbbbbb!@#&bbbbbbbbbbcb7b7b7b7b7b    b1bbbbbbbbbcbbbbbbbbbb!@#&bbbbbbbbbbc                      eeeecbbbbbbbbbb!@#&bbbbbbbbbbcbbbbbbbbbbb    bbbbbbbbbbbbbbbbbbbbbb!@#&7777777777777777777777777777777777777777777777777",["classic_014"]="bbbbbbbbbb  5   e    d   edc    cd   4bbbbbbbbbb!@#&bbbbbbbbbb dc   dcd   d  d cd   c d  cbbbbbbbbbb!@#&bbbbbbbbbbd c  d c d    d  c d  c  d cbbbbbbbbbb!@#&bbbbbbbbbb4 c d  c  d  d   c  d4c   dcbbbbbbbbbb!@#&bbbbbbbbbb  cd  dc   dd    c4  dc    cbbbbbbbbbb!@#&bbbbbbbbbbcd   d cd  dd  d cdddddd d  bbbbbbbbbb!@#&bbbbbbbbbbc d   dc  d4 d   c  d   c d bbbbbbbbbb!@#&bbbbbbbbbbcd d   c4ddc  d  c     dc  dbbbbbbbbbb!@#&bbbbbbbbbbc d d  cdd c   d c    d c  dbbbbbbbbbb!@#&bbbbbbbbbbcd 4 decd  c d  dcd  d  c  dbbbbbbbbbb!@#&bbbbbbbbbbc dc  d    c   d   d    c  dbbbbbbbbbb!@#&bbbbbbbbbbcd c   d   c  d d   d   c  dbbbbbbbbbb!@#&bbbbbbbbbbc dc d  d  c4d   d   d  c 4dbbbbbbbbbb!@#&bbbbbbbbbbcd c   d d cd d  4d   d c d bbbbbbbbbb!@#&bbbbbbbbbbc dc  d   dc     d d d dcd  bbbbbbbbbb!@#&bbbbbbbbbb   c     4     40       c   bbbbbbbbbb!@#&7777777777777777777777777777777777777777777777777",["01_welcome"]="                                                 !@#&                                             5   !@#&                                           bb8bb !@#&                                            b8b  !@#&                                             8   !@#&             4          ddddddddddddddd      8   !@#&            bbbbcbbbbbbb                     8   !@#&             bbbc                            8   !@#&                c                       4  4 8   !@#&                c                      bbbbbbb   !@#&        bcbbbbbbbb                       bbbbbbb !@#&         c               44                  bbbb!@#&         c   4          bbbb                  bbb!@#&     4bbbbbbbbbbc        bb    4     4         bb!@#&     bbbbbbbbbb c             bbbcbbbbb        bb!@#&b       bbb     c                c             bb!@#&bbb             c 4     4        c       0    bbb!@#&bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb",["super_013"]="bbbbbbbbbb7 77777777777777777777777775bbbbbbbbbb!@#&bbbbbbbbbb780c c4c c4c c4c c4c c4c c78bbbbbbbbbb!@#&bbbbbbbbbb777c7777777c7777777c77777c78bbbbbbbbbb!@#&bbbbbbbbbb7c7c4c c4c7c4c c4c7c4c7c7c78bbbbbbbbbb!@#&bbbbbbbbbb7c7777777c7c777777777c7c7c78bbbbbbbbbb!@#&bbbbbbbbbb7c4c c4c7c7c7c4c c4c7c7c7c78bbbbbbbbbb!@#&bbbbbbbbbb777c77777c7c7c77777c7c7c7c78bbbbbbbbbb!@#&bbbbbbbbbb7c7c7c c4c7c7c7c4c7c7c c4c78bbbbbbbbbb!@#&bbbbbbbbbb7c7c7c77777c7c7c7c7c77777c78bbbbbbbbbb!@#&bbbbbbbbbb7c4c c4c7c4c7c4c7c7c c4c7c78bbbbbbbbbb!@#&bbbbbbbbbb7c77777c7c7c777c7c77777c7c78bbbbbbbbbb!@#&bbbbbbbbbb7c7c4c c7c7c4c7c7c c4c7c7c78bbbbbbbbbb!@#&bbbbbbbbbb7c7c77777777777c7c777c7c7778bbbbbbbbbb!@#&bbbbbbbbbb7c7c c4c c4c c4c7c7c7c7cec78bbbbbbbbbb!@#&bbbbbbbbbb7c777777777777777c7c7c777c78bbbbbbbbbb!@#&bbbbbbbbbb7cec4c c7c c4c c4c7c4c c7c  bbbbbbbbbb!@#&7777777777777777777777777777777777777777777777777",["super_007"]="bbbbbbbbbb5cccccccccccccccccccccccccccbbbbbbbbbb!@#&bbbbbbbbbbc                          cbbbbbbbbbb!@#&bbbbbbbbbbc            44            cbbbbbbbbbb!@#&bbbbbbbbbbc           4114           cbbbbbbbbbb!@#&bbbbbbbbbbc           b11b           cbbbbbbbbbb!@#&bbbbbbbbbbc        4 4b11b4 4        cbbbbbbbbbb!@#&bbbbbbbbbbc        b4b 4 bb4b        cbbbbbbbbbb!@#&bbbbbbbbbbc     4 4bbb b4 bbb4 4     cbbbbbbbbbb!@#&bbbbbbbbbbc     b4bbb 4bb4 bbb4b     cbbbbbbbbbb!@#&bbbbbbbbbbc     bbbb  bbbb  bbbb     cbbbbbbbbbb!@#&bbbbbbbbbbc  4 4bb 4 4b bb4 4 bb4 4  cbbbbbbbbbb!@#&bbbbbbbbbbc  b4bb  b4bb  bb4b  bb4b  cbbbbbbbbbb!@#&bbbbbbbbbbc  b1 4 4bbb    bbb4 4 1b  cbbbbbbbbbb!@#&bbbbbbbbbbc  bb b4bbb      bbb4b bb  cbbbbbbbbbb!@#&bbbbbbbbbbc  bb bbb  444444  bbb bb  cbbbbbbbbbb!@#&bbbbbbbbbbc   0     cbbbbbbc    eeee cbbbbbbbbbb!@#&7777777777777777777777777777777777777777777777777",["super_004"]="bbbbbbbbbb             5              bbbbbbbbbb!@#&bbbbbbbbbbddddddddddddd8ddddddddddddddbbbbbbbbbb!@#&bbbbbbbbbb            484            cbbbbbbbbbb!@#&bbbbbbbbbb      4    cbcb    e4      cbbbbbbbbbb!@#&bbbbbbbbbbc777777777777c77777777777777bbbbbbbbbb!@#&bbbbbbbbbbc            8              bbbbbbbbbb!@#&bbbbbbbbbbc           484             bbbbbbbbbb!@#&bbbbbbbbbbc e   4    bbcbbc   4    e  bbbbbbbbbb!@#&bbbbbbbbbb7777777777777c7777777777777cbbbbbbbbbb!@#&bbbbbbbbbb             8             cbbbbbbbbbb!@#&bbbbbbbbbb            484            cbbbbbbbbbb!@#&bbbbbbbbbb      4  cbbbcbbb   4    e cbbbbbbbbbb!@#&bbbbbbbbbbc777777777777c77777777777777bbbbbbbbbb!@#&bbbbbbbbbbc            8              bbbbbbbbbb!@#&bbbbbbbbbbc           484             bbbbbbbbbb!@#&bbbbbbbbbbc     40 bbbbcbbbbc 4    e  bbbbbbbbbb!@#&7777777777777777777777777777777777777777777777777",["05_caged"]="                                                 !@#&                   88888888888                   !@#&     e  4        cb8         8bc        4  e     !@#&  cbbbbbbcdddddddcb8         8bcdddddddcbbbbbbc  !@#&  cb    bc        b8         8b        cb    bc  !@#&  cb    bc        b8         8b        cb    bc  !@#&  cb    bc        b8         8b        cb    bc  !@#&  cbb4  bc        b8    5    8b        cbb 4 bc  !@#&  cbbbbbbc        b8dddd dddd8b        cbbbbbbc  !@#&  cb    bcddddddddb8   4 4   8bddddddddcb    bc  !@#&  cb    b        cbcbbbbbbbbbcbc        b    bc  !@#&  cb    b        cbc         cbc        b    bc  !@#&  cb 4ebb        cbc    e    cbc        bbe4 bc  !@#&  cbbbbbb        cb77777777777bc        bbbbbbc  !@#&  c      b       c             c       b      c  !@#&  c       b      c             c      b       c  !@#&  c       4b     c      0      c     b4       c  !@#&bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb",["06_flowers"]=" ddddddd                                         !@#&c       bbbbcddddddd        dddc    d 4ed   dddd !@#&c                   bbe44ebb   c 4 c bbb c 4    c!@#&c             4777  7b7777b7   bbbb       bbbb  c!@#&c             bb                                c!@#&c           4                     dd 4    4    4c!@#&c   4 e    bb     dd 4  4ddd        bb    bb   bc!@#&c   bbb             bb  b   c 4  0  bb          c!@#&c              4            c bb     4   4      c!@#&cb      4      bbb          c           bb      c!@#&cbb     bb     dddd   d 4d  c    4              c!@#&cbbbb              bbc bb   c         4   cd 5 dc!@#&c     4    4  4      c    4 c       bbb   c     c!@#&c    bb    4 bb      c    bb    4         c 444 c!@#&c 4        4      4 4c          bb    cbbbc 444 c!@#&c bbb             cbbc                c     444 c!@#&c                 c                   c         c!@#&bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb",["classic_017"]="bbbbbbbbbb5                          8bbbbbbbbbb!@#&bbbbbbbbbb8                          8bbbbbbbbbb!@#&bbbbbbbbbb8         e                8bbbbbbbbbb!@#&bbbbbbbbbbcbbb1bbbbbbbbbbbbbbbbbbbbbbcbbbbbbbbbb!@#&bbbbbbbbbbcbbb1bbbbbbbbbbbbbbbbbbbbbbcbbbbbbbbbb!@#&bbbbbbbbbbc   4   bbddddddddbb       cbbbbbbbbbb!@#&bbbbbbbbbbc       4bc    e 4bb    e  cbbbbbbbbbb!@#&bbbbbbbbbbc  bbb  bbc bbbbbbbb  bbbbbcbbbbbbbbbb!@#&bbbbbbbbbbc  b4b  bbc       bb  bb4bbcbbbbbbbbbb!@#&bbbbbbbbbbc   0   bbc       bb  bbbbbcbbbbbbbbbb!@#&bbbbbbbbbbc  bbb  bbbbbbbbccbb  bb4bbcbbbbbbbbbb!@#&bbbbbbbbbbc  bbb  bbbbbbbbccbb  bbbbbcbbbbbbbbbb!@#&bbbbbbbbbbc  bbb  bb      c bb       cbbbbbbbbbb!@#&bbbbbbbbbbc  bbb  bb     4c bb    4  cbbbbbbbbbb!@#&bbbbbbbbbbbbbbbbbbbbcbbbbbbbbbcbbbbbbbbbbbbbbbbb!@#&bbbbbbbbbbbbbbbbb  4cbbbbbb 4 cbbbbbbbbbbbbbbbbb!@#&7777777777777777777777777777777777777777777777777",["super_012"]="bbbbbbbbbb5  ddddddddddddddddddddddddcbbbbbbbbbb!@#&bbbbbbbbbb b8  1 e b   b e b   b   b cbbbbbbbbbb!@#&bbbbbbbbbb  418 4b4 414 4b4 414 4b4  cbbbbbbbbbb!@#&bbbbbbbbbb1 b1b8bbb b1b bb1 11b bbb  cbbbbbbbbbb!@#&bbbbbbbbbb   b 8 b   b   b   b   b   cbbbbbbbbbb!@#&bbbbbbbbbb4b4 418 818 4b4 414 414 4b4cbbbbbbbbbb!@#&bbbbbbbbbb1bb bbb8bb181bb b11 bbb bbbcbbbbbbbbbb!@#&bbbbbbbbbb b   b e b 8 b e 1   b   b cbbbbbbbbbb!@#&bbbbbbbbbb  414 4b4 418 414 4b4 4b4  cbbbbbbbbbb!@#&bbbbbbbbbb1 bbb bbb bbb8bbb 1bb 1b1  cbbbbbbbbbb!@#&bbbbbbbbbb   b   b   b 8 b   b   b   cbbbbbbbbbb!@#&bbbbbbbbbb4b4 4b4 414 4b8 4b4 4b4 4b4cbbbbbbbbbb!@#&bbbbbbbbbb1bb bbb bbb bbb8bb1 bbb bb1cbbbbbbbbbb!@#&bbbbbbbbbb b 4 b 4 b 4 b 8 b 4 b 4 b cbbbbbbbbbb!@#&bbbbbbbbbb0 cbc c1c cbc 8b  cbc cbc ecbbbbbbbbbb!@#&bbbbbbbbbbbbc c c c c c c c c c c cbbcbbbbbbbbbb!@#&7777777777777777777777777777777777777777777777777",["super_001"]="bbbbbbbbbb                            bbbbbbbbbb!@#&bbbbbbbbbbcddddddddddddddddddddddddddcbbbbbbbbbb!@#&bbbbbbbbbbc 4  4 4444 4    4     44  cbbbbbbbbbb!@#&bbbbbbbbbbc 4  4 4    4    4    4  4 cbbbbbbbbbb!@#&bbbbbbbbbbc 4444 444  4    4    4  4 cbbbbbbbbbb!@#&bbbbbbbbbbc 4  4 4    4    4    4  4 cbbbbbbbbbb!@#&bbbbbbbbbbc 4  4 4444 4444 4444  44  cbbbbbbbbbb!@#&bbbbbbbbbbc                       e ecbbbbbbbbbb!@#&bbbbbbbbbbcddcccdddcccdddcccddccccdddcbbbbbbbbbb!@#&bbbbbbbbbbc08   8 8   8 8   8 8   8  cbbbbbbbbbb!@#&bbbbbbbbbbcbcb    8   8 8   8 8   cbbcbbbbbbbbbb!@#&bbbbbbbbbbcb8 bcc 8   8 8   8 8bbb8 bcbbbbbbbbbb!@#&bbbbbbbbbbcb8   8bcb  8 8   cbc   8 bcbbbbbbbbbb!@#&bbbbbbbbbbcb 8888  8ccb44ccc  8888  bcbbbbbbbbbb!@#&bbbbbbbbbbcb                        bcbbbbbbbbbb!@#&bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb!@#&7777777777777777777777777777777777777777777777777",["super_006"]="bbbbbbbbbb5ddddddddddddddddddddddddddcbbbbbbbbbb!@#&bbbbbbbbbbcb b  b b     4  bbb b b   cbbbbbbbbbb!@#&bbbbbbbbbbcbbb  bbb   b b  b b bbb   cbbbbbbbbbb!@#&bbbbbbbbbbc   4   4   bbb     4     0cbbbbbbbbbb!@#&bbbbbbbbbbc b b  bbb       4 bbb  b bcbbbbbbbbbb!@#&bbbbbbbbbbc bbb  b b4    bbb b b  bbbcbbbbbbbbbb!@#&bbbbbbbbbbc4   4    b b  b b    e    cbbbbbbbbbb!@#&bbbbbbbbbbcb b b b  bbb       4 b b  cbbbbbbbbbb!@#&bbbbbbbbbbcbbb bbb      4   b b bbb  cbbbbbbbbbb!@#&bbbbbbbbbbc   4    4  b b   bbb    4 cbbbbbbbbbb!@#&bbbbbbbbbbc b b   bbb bbb  4     b b cbbbbbbbbbb!@#&bbbbbbbbbbc bbb   b b      b b   bbb cbbbbbbbbbb!@#&bbbbbbbbbbc    4     b b   bbb   e   cbbbbbbbbbb!@#&bbbbbbbbbbc  b b b b bbb4 4     bbb  cbbbbbbbbbb!@#&bbbbbbbbbbc  bbb bbb    b b     b b  cbbbbbbbbbb!@#&bbbbbbbbbbc eee 4       bbb   4     4cbbbbbbbbbb!@#&7777777777777777777777777777777777777777777777777",["classic_015"]="bbbbbbbbbb5                          8bbbbbbbbbb!@#&bbbbbbbbbb8     4 e  4     4  e 4    8bbbbbbbbbb!@#&bbbbbbbbbb8888bbbbbbbbc   cbbbbbbbb888bbbbbbbbbb!@#&bbbbbbbbbb            c   c           bbbbbbbbbb!@#&bbbbbbbbbb       cbbbbbbbbbbbbbc      bbbbbbbbbb!@#&bbbbbbbbbb4  e  4c     4 4     c4 e  4bbbbbbbbbb!@#&bbbbbbbbbbbbbbbbbc 4 4bbbbb4 4 cbbbbbbbbbbbbbbbb!@#&bbbbbbbbbb       c bbbb   bbbb c      bbbbbbbbbb!@#&bbbbbbbbbb    4  c      4      c 4    bbbbbbbbbb!@#&bbbbbbbbbb  cbbbbbbbbbbbbbbbbbbbbbbc  bbbbbbbbbb!@#&bbbbbbbbbb  c           0          c  bbbbbbbbbb!@#&bbbbbbbbbb  c 4    4cbbbbbbbc4   4 c  bbbbbbbbbb!@#&bbbbbbbbbbbbbbbbbbbbc       cbbbbbbbbbbbbbbbbbbb!@#&bbbbbbbbbb          c       c         bbbbbbbbbb!@#&bbbbbbbbbb  4       c       c      4  bbbbbbbbbb!@#&bbbbbbbbbbb7b7b7b7b7b7b7b7b7b7b7b7b7b7bbbbbbbbbb!@#&7777777777777777777777777777777777777777777777777",["classic_002"]="bbbbbbbbbb   4                       5bbbbbbbbbb!@#&bbbbbbbbbbc77b77c           4        cbbbbbbbbbb!@#&bbbbbbbbbbc     c    cbbbbbbbbbc 4   cbbbbbbbbbb!@#&bbbbbbbbbbc 4 e c    c         cbbbb1cbbbbbbbbbb!@#&bbbbbbbbbbcb7b7bc    c         c     8bbbbbbbbbb!@#&bbbbbbbbbbc     cddddcdddddd  ec     8bbbbbbbbbb!@#&bbbbbbbbbbc     c    c     cbbb777777cbbbbbbbbbb!@#&bbbbbbbbbbc     c    c  4  c         cbbbbbbbbbb!@#&bbbbbbbbbbc   e c 4  cbbbbbc         cbbbbbbbbbb!@#&bbbbbbbbbb7bbb7bb7bb7c         cbbbcbbbbbbbbbbbb!@#&bbbbbbbbbb7bbb7      c         c   c  bbbbbbbbbb!@#&bbbbbbbbbb74  7      c   ddddddc   c 4bbbbbbbbbb!@#&bbbbbbbbbbbbbbbbbbcbbb7777     c  bbbbbbbbbbbbbb!@#&bbbbbbbbbb        c            c      bbbbbbbbbb!@#&bbbbbbbbbb        c   0        c      bbbbbbbbbb!@#&bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb!@#&7777777777777777777777777777777777777777777777777",["09_skyislands"]="                                                 !@#&                        05          ddddd 4e4    !@#&     4ddddddd           cc               bbcbb   !@#&  bbbc       4          ccddddd     4      c     !@#&   4 c       4     dddddcc     bbbb        c  4  !@#&  bcbb       4    4     cc     b44bddd  4  c4    !@#&   c4       bbbbbbbb    cc     bbbb   bbbbbbbb   !@#&  bbcb        4  4      ccdddddddd    b  e 44b   !@#&    c        4    4     cc            b cbbbbb   !@#&    c ddd               cc         4  b4c    b   !@#&  bbbb   bbbbbbbbbbbb   cc      cbbb  bbcddc b   !@#&         bbbbbbbbbbbb   cc    4 c4    b c  c b   !@#&           b4    c  ddddcc  bbbbbbb   b4c4bc4b   !@#&         c bbbbbbc 4b   cc            bbbbbbbb   !@#&         c4b4   ec  b   cc                4      !@#&         bbbbbbbbbbbb   cc                       !@#&7            e       4  cc  4                   7!@#&7b7b7b7b7b7b7b7b7b7b7b7b77b7b7b7b7b7b7b7b7b7b7b77",["classic_005"]="bbbbbbbbbb         5                  bbbbbbbbbb!@#&bbbbbbbbbb         8       4      e   bbbbbbbbbb!@#&bbbbbbbbbbbbb      8      bbbbcbbbbbbbbbbbbbbbbb!@#&bbbbbbbbbb  bb     8     bb   c       bbbbbbbbbb!@#&bbbbbbbbbb   bb    8    bb    c       bbbbbbbbbb!@#&bbbbbbbbbb4e bbb   8  4bbb    c   4   bbbbbbbbbb!@#&bbbbbbbbbbbbcbbbb  8  bbbbcbbbcbbbbbbbbbbbbbbbbb!@#&bbbbbbbbbb  c   bb 8 bb   c           bbbbbbbbbb!@#&bbbbbbbbbb  c4e  bbcbb    c     4     bbbbbbbbbb!@#&bbbbbbbbbbcbbbc    c     bcbbcbbb     bbbbbbbbbb!@#&bbbbbbbbbbc   c              c        bbbbbbbbbb!@#&bbbbbbbbbbc   c    4     e   c        bbbbbbbbbb!@#&bbbbbbbbbbc   cbbbbbbbcbbbbbbcbbbbbcbbbbbbbbbbbb!@#&bbbbbbbbbbc           c            c  bbbbbbbbbb!@#&bbbbbbbbbbc           c  0         c  bbbbbbbbbb!@#&bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb!@#&7777777777777777777777777777777777777777777777777",["classic_016"]="bbbbbbbbbb                         5  bbbbbbbbbb!@#&bbbbbbbbbb                    0     8 bbbbbbbbbb!@#&bbbbbbbbbb   1bbbbccbbbbbbccccc      8bbbbbbbbbb!@#&bbbbbbbbbb         c   b  c         8 bbbbbbbbbb!@#&bbbbbbbbbb    4     c cb  c        8  bbbbbbbbbb!@#&bbbbbbbbbb    b4     ccb  c       8   bbbbbbbbbb!@#&bbbbbbbbbb   bbb4     cb  c      8    bbbbbbbbbb!@#&bbbbbbbbbb  bbbbb4    cb  c     8     bbbbbbbbbb!@#&bbbbbbbbbbbbbbbbbb    cb  c      8    bbbbbbbbbb!@#&bbbbbbbbbb 4bbbbb     cb  c       8   bbbbbbbbbb!@#&bbbbbbbbbb   bbb      cb  c        8  bbbbbbbbbb!@#&bbbbbbbbbb    b       cb  c         8 bbbbbbbbbb!@#&bbbbbbbbbb       e    cb  c   e      8bbbbbbbbbb!@#&bbbbbbbbbb cbbbbbbbbbbbbbb1bbbbbbbbb 8bbbbbbbbbb!@#&bbbbbbbbbb bbbbbbbbbbbbbbb         cb8bbbbbbbbbb!@#&bbbbbbbbbbbbbbbbbbbbbbbbbb   444444cbbbbbbbbbbbb!@#&7777777777777777777777777777777777777777777777777",["super_008"]="bbbbbbbbbb54cbbc4c77c4cbbc4c77c4cbbc4cbbbbbbbbbb!@#&bbbbbbbbbbc77c cbbc c77c cbbcec77c cbcbbbbbbbbbb!@#&bbbbbbbbbbccec77c cbbcec77c cbbc c77ccbbbbbbbbbb!@#&bbbbbbbbbbccbbc c77c cbbc c77c cbbc ccbbbbbbbbbb!@#&bbbbbbbbbbc7c cbbc c77c cbbc c77c cbbcbbbbbbbbbb!@#&bbbbbbbbbbc c77c cbbc c77c cbbc c77c cbbbbbbbbbb!@#&bbbbbbbbbbcbbc c77c cbbc c77c cbbcec7cbbbbbbbbbb!@#&bbbbbbbbbbcc cbbc c77c cbbc c77c cbbccbbbbbbbbbb!@#&bbbbbbbbbbcc77c cbbc c77c cbbc c77c ccbbbbbbbbbb!@#&bbbbbbbbbbcbc c77c cbbc c77c cbbc c77cbbbbbbbbbb!@#&bbbbbbbbbbc cbbc c77c cbbc c77c cbbc cbbbbbbbbbb!@#&bbbbbbbbbbc77c cbbc c77c cbbc c77c cbcbbbbbbbbbb!@#&bbbbbbbbbbcc c77c cbbcec77c cbbc c77ccbbbbbbbbbb!@#&bbbbbbbbbbccbbc c77c cbbc c77c cbbc ccbbbbbbbbbb!@#&bbbbbbbbbbc7c cbbc c77c cbbc c77c cbbcbbbbbbbbbb!@#&bbbbbbbbbbc0c77c4cbbc4c77c4cbbc c77c4cbbbbbbbbbb!@#&7777777777777777777777777777777777777777777777777",["super_014"]="bbbbbbbbbb   0   e   e   e   e   e   5bbbbbbbbbb!@#&bbbbbbbbbbbbbcb1bcbbbcb1bcbbbcb1bcbbbcbbbbbbbbbb!@#&bbbbbbbbbbbbbcb1bcbbbcb1bcbbbcb1bcbbbcbbbbbbbbbb!@#&bbbbbbbbbbbbbcb1bcbbbcb1bcbbbcb1bcbbbcbbbbbbbbbb!@#&bbbbbbbbbbccccccccccccccccccccccccccccbbbbbbbbbb!@#&bbbbbbbbbbbbbcb1b b1bcbbb b1bcb1b bbbcbbbbbbbbbb!@#&bbbbbbbbbbbbbcb1b b1bcbbb b1bcb1b bbbcbbbbbbbbbb!@#&bbbbbbbbbbbbbcb1b4b1bcbbb4b1bcb1b4bbbcbbbbbbbbbb!@#&bbbbbbbbbbccccccccccccccccccccccccccccbbbbbbbbbb!@#&bbbbbbbbbbb1b bbbcb1b bbbcb1b bbbcb1bcbbbbbbbbbb!@#&bbbbbbbbbbb1b bbbcb1b bbbcb1b bbbcb1bcbbbbbbbbbb!@#&bbbbbbbbbbb1b4bbbcb1b4bbbcb1b4bbbcb1bcbbbbbbbbbb!@#&bbbbbbbbbbc4ccc4ccc4ccc4ccc4ccc4ccc4ccbbbbbbbbbb!@#&bbbbbbbbbbbbbcbbbcbbbcbbbcbbbcbbbcbbbcbbbbbbbbbb!@#&bbbbbbbbbbbbbcbbbcbbbcbbbcbbbcbbbcbbbcbbbbbbbbbb!@#&bbbbbbbbbbbbbcbbbcbbbcbbbcbbbcbbbcbbbcbbbbbbbbbb!@#&7777777777777777777777777777777777777777777777777",},["smsserver"]="rednet.open(\"back\")!@#&function title ()!@#&	local x,y = term.getSize()!@#&	term.clear()!@#&	term.setCursorPos(1,1)!@#&	print(\"MineText Server\")!@#&	for derp = 1,x,1 do!@#&		write(\"-\")!@#&	end!@#&	print()!@#&end!@#&!@#&-- prams[0] = username | prams[1] = command | prams[2] = extra parameter | prams[3] = extra parameter!@#&!@#&function parcemessage(message)!@#&	local count = 0!@#&	local prams = {}!@#&	for token in string.gmatch(message, \"[^%s]+\") do!@#&	   prams[count]=token!@#&	   count = count+1!@#&	end!@#&	if(prams[1]==\"message\")then!@#&		local open = fs.open(\"server/users/\"..prams[2]..\"/friends/\"..prams[0]..\"/message\", \"w\")!@#&		open.write(prams[3])!@#&		open.close()!@#&	elseif(prams[1]==\"getfriends\")then!@#&		local count = 0!@#&		local friends = {}!@#&		local filename = fs.list(\"server/users/\"..prams[0]..\"/friends\")!@#&		for _,file in ipairs( filename ) do!@#&			friends[count] = file!@#&			count = count+1!@#&		end!@#&		rednet.send(clientID,textutils.serialize(friends))!@#&	elseif(prams[1]==\"getmessages\")then!@#&		local count = 0!@#&		local messages = {}!@#&		local filename = fs.list(\"server/users/\"..prams[0]..\"/friends/\"..prams[2])!@#&		for _,file in ipairs( filename ) do!@#&			local read = fs.open(\"server/users/\"..prams[0]..\"/friends/\"..prams[2]..\"/\"..file , \"r\")!@#&			messages[count] = prams[0]..\"-\"..read.readLine()!@#&			read.close()!@#&			count = count+1!@#&		end!@#&		rednet.send(clientID,textutils.serialize(messages))!@#&		local open = fs.open(\"server/users/\"..prams[0]..\"/status\" , \"w\")!@#&		rednet.send(open.readLine())!@#&		open.close()!@#&	elseif(prams[1]==\"login\")then!@#&		local read = fs.open(\"server/users/\"..prams[0]..\"/password\" , \"r\")!@#&		local pass = read.readLine()!@#&		read.close()!@#&		if(prams[2]==pass)!@#&			local open = fs.open(\"server/users/\"..prams[0]..\"/status\" , \"w\")!@#&			open.write(\"online\")!@#&			open.close()!@#&			rednet.send(prams[0],true)!@#&		else!@#&			rednet.send(prams[0],false)!@#&		end!@#&	elseif(prams[1]==\"logout\")then!@#&		local open = fs.open(\"server/users/\"..prams[0]..\"/status\" , \"w\")!@#&		open.write(\"offline\")!@#&		open.close()!@#&	elseif(prams[1]==\"addFriend\")then!@#&		fs.makeDir(\"server/users/\"..prams[0]..\"/friends/\"..prams[2])!@#&	elseif(prams[1]==\"deleteFriend\")then!@#&		fs.delete(\"server/users/\"..prams[0]..\"/friends/\"..prams[2])!@#&	elseif(prams[1]==\"friendRequests\")then!@#&		!@#&	elseif(prams[1]==\"newaccount\")then!@#&		if(fs.exists(\"server/users/\"..prams[0])==false)then!@#&			fs.makeDir(\"server/users/\"..prams[0])!@#&			fs.makeDir(\"server/users/\"..prams[0]..\"/friends\")!@#&			fs.makeDir(\"server/users/\"..prams[0]..\"/friendRequests\")!@#&			local open = fs.open(\"server/users/\"..prams[0]..\"/password\" , \"w\")!@#&			open.write(prams[3])!@#&			open.close()!@#&			local open = fs.open(\"server/users/\"..prams[0]..\"/status\" , \"w\")!@#&			open.write(\"online\")!@#&			open.close()!@#&			rednet.send(prams[0],true)!@#&		else!@#&			rednet.send(prams[0],false)!@#&		end!@#&	end!@#&	rednet.send(prams[0],\"connected\")!@#&	print(prams[1]..\" on console \"..prams[0]..\" asked for \"..prams[2]..\"[]\"..textutils.formatTime(os.time(),true))!@#&end!@#&!@#&--**PROGRAM STARTS HERE**!@#&title()!@#&if (fs.exists(\"server\")==false) then!@#&	fs.makeDir(\"server\")!@#&	fs.makeDir(\"server/users\")!@#&end!@#&while true do!@#&	local Event,clientID,message,distance = os.pullEvent(\"rednet_message\")!@#&	parcemessage(message)!@#&end",["eShip3.img"]="                 eeeeeee!@#&                e1111111!@#&              ee      1!@#&              e1      1!@#&                1eeeee1e!@#&                 1111111",["eShip13_broken.img"]="!@#&                977779!@#&             999977799f!@#&            777797f79ff!@#&            ff7fffff9!@#&            ffffff7ff!@#&            77f797779ff!@#&             999977799f!@#&                977779",["BOmaps"]={["YOLO"]="YNYNNYNNYNNYN!@#&YNYNYNYNYNYNY!@#&NYNNYNYNYNYNY!@#&NYNNYNYNYNYNY!@#&NYNNNYNNYNNYN",["map1"]="NNYYYYYYYYYNN!@#&NYNNNNNNNNNYN!@#&NYNYYYYYYYNYN!@#&NYNNNNNNNNNYN!@#&NNYYYYYYYYYNN",["lines"]="YYYYYYYYYYYYY!@#&NNNNNNNNNNNNN!@#&YYYYYYYYYYYYY!@#&NNNNNNNNNNNNN!@#&YYYYYYYYYYYYY",["Smile"]="NNNNNYNNYNNNN!@#&NNNNNYNNYNNNN!@#&NNNNNNNNNNNNN!@#&NNNYNNNNNNYNN!@#&NNNNYYYYYYNNN",["map2"]="NYYYYYYYYYYYN!@#&NYYYYYYYYYYYN!@#&NYYYYYYYYYYYN!@#&NYYYYYYYYYYYN!@#&NYYYYYYYYYYYN",},["OLD_MazeRunner"]="--------------------------------------------------------------------------!@#&-------------------------------- map API ---------------------------------!@#&--------------------------------------------------------------------------!@#&local mapMethods = {!@#&	get = function(self, tVector)!@#&		if self.map[tVector.x] then!@#&			return self.map[tVector.x][tVector.y]!@#&		end!@#&	end,!@#&	set = function(self, tVector, value)!@#&		if not self.map[tVector.x] then!@#&			self.map[tVector.x] = {}!@#&		end!@#&		self.map[tVector.x][tVector.y] = value!@#&		return self.map[tVector.x][tVector.y]!@#&	end,!@#&	getOrSet = function(self, tVector, value)!@#&		if self.map[tVector.x] and self.map[tVector.x][tVector.y] ~= nil then!@#&			return self.map[tVector.x][tVector.y], false!@#&		else!@#&			return self:set(tVector, value), true!@#&		end!@#&	end,!@#&}!@#&local mapMetatable = {__index = mapMethods}!@#&!@#&local function newMap()!@#&	return setmetatable({map = {}}, mapMetatable)!@#&end!@#&!@#&--------------------------------------------------------------------------!@#&------------------------------- maze API ---------------------------------!@#&--------------------------------------------------------------------------!@#&local WALL_CELL = 1!@#&local FRONTIER_CELL = 2!@#&local PASSAGE_CELL = 3!@#&!@#&local function adjacent(cell)!@#&	return {!@#&		cell + vector.new(1, 0, 0),!@#&		cell + vector.new(-1, 0, 0),!@#&		cell + vector.new(0, 1, 0),!@#&		cell + vector.new(0, -1, 0),!@#&	}!@#&end!@#&!@#&local function compareFunc(a, b)!@#&	return a[2] < b[2]!@#&end!@#&!@#&local function addWalls(maze, frontierQueue, cell)!@#&	for _, adjacentCell in ipairs(adjacent(cell)) do!@#&		local cellValue = maze:get(adjacentCell)!@#&		if cellValue and cellValue == WALL_CELL then!@#&			maze:set(adjacentCell, FRONTIER_CELL)!@#&			table.insert(frontierQueue, {adjacentCell, math.random()})!@#&			table.sort(frontierQueue, compareFunc)!@#&		end!@#&	end!@#&end!@#&!@#&local function findOpposite(maze, wallCell)!@#&	for _, adjacentCell in ipairs(adjacent(wallCell)) do!@#&		local cellValue = maze:get(adjacentCell)!@#&		if cellValue and cellValue == PASSAGE_CELL then!@#&			return wallCell + (wallCell - adjacentCell)!@#&		end!@#&	end!@#&end!@#&!@#&local function newMaze(width, height)!@#&	local mazeWidth, mazeHeight = 2*math.ceil(width/2) - 1, 2*math.ceil(height/2) - 1!@#&	!@#&	local maze = newMap()!@#&	for xPos = 1, mazeWidth do!@#&		for yPos = 1, mazeHeight do!@#&			maze:set(vector.new(xPos, yPos, 0), WALL_CELL)!@#&		end!@#&	end!@#&	!@#&	local startX = math.random(1, (mazeWidth - 1)/2)*2!@#&	local startY = math.random(1, (mazeHeight - 1)/2)*2!@#&	local start = vector.new(startX, startY, 0)!@#&	maze:set(start, PASSAGE_CELL)!@#&	!@#&	local frontierQueue = {}!@#&	addWalls(maze, frontierQueue, start)!@#&	!@#&	while #frontierQueue > 0 do!@#&		local frontierCell = table.remove(frontierQueue, 1)[1]!@#&		local oppositeCell = findOpposite(maze, frontierCell)!@#&		local oppositeValue = maze:get(oppositeCell)!@#&		if oppositeValue and oppositeValue == WALL_CELL then!@#&			maze:set(frontierCell, PASSAGE_CELL)!@#&			maze:set(oppositeCell, PASSAGE_CELL)!@#&			addWalls(maze, frontierQueue, oppositeCell)!@#&		end!@#&	end!@#&	!@#&	return maze!@#&end!@#&!@#&--------------------------------------------------------------------------!@#&--------------------------- helper functions -----------------------------!@#&--------------------------------------------------------------------------!@#&local termWidth, termHeight = term.getSize()!@#&local function drawMaze(maze)!@#&	--clear the screen first!@#&	term.setBackgroundColour(colours.black)!@#&	term.clear()!@#&	--draw in the maze passages!@#&	term.setBackgroundColour(colours.white)!@#&	for xPos = 1, termWidth do!@#&		for yPos = 1, termHeight do!@#&			if maze:get(vector.new(xPos, yPos, 0)) == PASSAGE_CELL then!@#&				term.setCursorPos(xPos, yPos)!@#&				term.write(\" \")!@#&			end!@#&		end!@#&	end!@#&end!@#&!@#&local function checkMove(maze, currPos, direction)!@#&	if maze:get(currPos + direction) == PASSAGE_CELL then!@#&		term.setCursorPos(currPos.x, currPos.y)!@#&		term.write(\" \")!@#&		return currPos + direction!@#&	end!@#&	return currPos!@#&end!@#&!@#&--------------------------------------------------------------------------!@#&---------------------------- main game loop ------------------------------!@#&--------------------------------------------------------------------------!@#&term.setTextColour(colours.white) --just in case!@#&!@#&--===== START SCREEN =====--!@#&!@#&--draw a maze in the background!@#&local maze = newMaze(termWidth, termHeight)!@#&drawMaze(maze)!@#&!@#&--draw the title screen objects!@#&local title = {!@#&	\"+-----------------------+\",!@#&	\"|      Maze Runner      |\",!@#&	\"|                       |\",!@#&	\"| Press enter to start! |\",!@#&	\"+-----------------------+\",!@#&}!@#&local success = {!@#&	\"+-------------------+\",!@#&	\"|      Success      |\",!@#&	\"|                   |\",!@#&	\"| Time:             |\",!@#&	\"| Completed:        |\",!@#&	\"|                   |\",!@#&	\"|    Press enter    |\",!@#&	\"|   to play again   |\",!@#&	\"+-------------------+\",!@#&}!@#&local exitBar = {!@#&	\"+-------------------+\",!@#&	\"| Backspace to exit |\",!@#&}!@#&term.setBackgroundColour(colours.black)!@#&for i = 1, #title do!@#&	term.setCursorPos(math.ceil((termWidth/2)-(#title[i]/2)), math.floor(termHeight/2) - 3 + i)!@#&	term.write(title[i])!@#&end!@#&for i = 1, #exitBar do!@#&	term.setCursorPos(math.ceil((termWidth/2)-(#exitBar[i]/2)), termHeight - 2 + i)!@#&	term.write(exitBar[i])!@#&end!@#&!@#&--wait for user input!@#&local event, startTime, completionTime!@#&while true do!@#&	event = {os.pullEvent(\"key\")}!@#&	if event[2] == keys.enter then!@#&		--continue to game!@#&		break!@#&	elseif event[2] == keys.backspace then!@#&		--exit to shell!@#&		term.setCursorPos(1, 1)!@#&		term.clear()!@#&		return!@#&	end!@#&end!@#&!@#&--===== RUN GAME =====--!@#&local mazesCompleted = 0!@#&local exit = false!@#&while not exit do!@#&!@#&	term.setTextColour(colours.black)!@#&!@#&	--calculate maze side, must be odd number!@#&	termWidth, termHeight = term.getSize()!@#&	local mazeWidth, mazeHeight = 2*math.ceil(termWidth/2) - 1, 2*math.ceil(termHeight/2) - 1!@#&!@#&	--create the maze!@#&	local maze = newMaze(mazeWidth, mazeHeight)!@#&!@#&	--add the start cell to the maze!@#&	local currPos = vector.new(2, 1, 0)!@#&	maze:set(currPos, PASSAGE_CELL)!@#&!@#&	--add the exit to the maze!@#&	local goal = vector.new(mazeWidth - 1, mazeHeight, 0)!@#&	maze:set(goal, PASSAGE_CELL)!@#&	if termHeight > mazeHeight then --some trickery involved when height is an even number!@#&		-- extend the exit one more cell downwards!@#&		goal = vector.new(mazeWidth - 1, termHeight, 0)!@#&		maze:set(goal, PASSAGE_CELL)!@#&	end!@#&!@#&	--draw the maze!@#&	drawMaze(maze)!@#&	!@#&	local icon = \"v\"!@#&	startTime = os.clock()!@#&	while not exit do!@#&	!@#&		-- draw the current player position!@#&		term.setCursorPos(currPos.x, currPos.y)!@#&		term.write(icon)!@#&		!@#&		-- if at the exit the continue to success screen!@#&		if currPos.x == goal.x and currPos.y == goal.y then!@#&			mazesCompleted = mazesCompleted + 1!@#&			break!@#&		end!@#&		!@#&		--wait for player input!@#&		event = {os.pullEvent(\"key\")}!@#&		if event[2] == keys.up then!@#&			icon = \"^\"!@#&			currPos = checkMove(maze, currPos, vector.new(0, -1, 0))!@#&		elseif event[2] == keys.down then!@#&			icon = \"v\"!@#&			currPos = checkMove(maze, currPos, vector.new(0, 1, 0))!@#&		elseif event[2] == keys.left then!@#&			icon = \"<\"!@#&			currPos = checkMove(maze, currPos, vector.new(-1, 0, 0))!@#&		elseif event[2] == keys.right then!@#&			icon = \">\"!@#&			currPos = checkMove(maze, currPos, vector.new(1, 0, 0))!@#&		elseif event[2] == keys.enter then!@#&			break!@#&		elseif event[2] == keys.backspace then!@#&			exit = true!@#&		end!@#&	end!@#&	completionTime = os.clock() - startTime!@#&	!@#&	!@#&	--===== SUCCESS SCREEN =====--!@#&	--clear the screen!@#&	term.setBackgroundColour(colours.black)!@#&	term.setTextColour(colours.white)!@#&	term.clear()!@#&	!@#&	--draw the base success screen!@#&	for i = 1, #success do!@#&		term.setCursorPos(math.ceil((termWidth/2)-(#success[i]/2)), math.floor(termHeight/2) - 6 + i)!@#&		term.write(success[i])!@#&	end!@#&	!@#&	--add the time taken to the success screen!@#&	completionTime = math.floor(completionTime*100)/100!@#&	term.setCursorPos(math.ceil((termWidth/2)+(#success[1]/2)) - string.len(completionTime) - 2, math.floor(termHeight/2) - 2)!@#&	term.write(completionTime)!@#&	!@#&	--add the total number of completed mazes to the screen!@#&	term.setCursorPos(math.ceil((termWidth/2)+(#success[1]/2)) - string.len(mazesCompleted) - 2, math.floor(termHeight/2) - 1)!@#&	term.write(mazesCompleted)!@#&	!@#&	--draw the exit bar!@#&	for i = 1, #exitBar do!@#&		term.setCursorPos(math.ceil((termWidth/2)-(#exitBar[i]/2)), termHeight - 2 + i)!@#&		term.write(exitBar[i])!@#&	end!@#&	!@#&	--wait for player input!@#&	while not exit do!@#&		event = {os.pullEvent(\"key\")}!@#&		if event[2] == keys.enter then!@#&			break!@#&		elseif event[2] == keys.backspace then!@#&			exit = true!@#&		end!@#&	end!@#&end!@#&!@#&term.setBackgroundColour(colours.black)!@#&term.clear()!@#&term.setCursorPos(1, 1)",["remote"]="id = 70!@#&rednet.open(\"back\")!@#&!@#&function title()!@#&	term.clear()!@#&	term.setCursorPos(1,1)!@#&	print(\"  ^\")!@#&	print(\"< O >    [d]\")!@#&	print(\"  v    [space]   [shift]\") !@#&end!@#&!@#&while true do!@#&	title()!@#&	local Event,key,pram1,pram2 = os.pullEvent(\"key\")!@#&	if(key==keys.up)then!@#&		rednet.send(id,\"forward\")!@#&	elseif(key==keys.down)then!@#&		rednet.send(id,\"back\")!@#&	elseif(key==keys.right)then!@#&		rednet.send(id,\"right\")!@#&	elseif(key==keys.left)then!@#&		rednet.send(id,\"left\")!@#&	elseif(key==keys.space)then!@#&		rednet.send(id,\"up\")!@#&	elseif(key==42 or key==54)then!@#&		rednet.send(id,\"down\")!@#&	elseif(key==32)then!@#&		rednet.send(id,\"dig\")!@#&	end!@#&end",["idk"]="contents = {}!@#&words = {}!@#&count = 1!@#&open = fs.open(\"hangmanwords/words\",\"r\")!@#&temp = open.readLine()!@#&while temp~=nil do!@#&  contents[count] = temp!@#&  temp = open.readLine()!@#&  count = count+1!@#&end!@#&print(textutils.serialize(contents))!@#&open.close()!@#&open = fs.open(\"hangmanwords/words\",\"w\")!@#&!@#&for place=1,#contents,1 do!@#&    open.write(contents[place]..\",\")!@#&end!@#&open.close()",["thisisaloctionfile"]="",["Tetris"]="!@#&--ComputerCraft!@#&--Tetris v 1.0!@#&-- dzanis 12.07.12!@#&!@#&term.setBackgroundColor(colors.black)!@#&term.setTextColor(colors.white)!@#&local w,h = term.getSize()!@#&local sX = w / 2 - 10/2 -- X  !@#&local sY = 1 -- Y  !@#&local iX = 2 -- X  !@#&local iY = 2 -- Y  !@#&!@#&local matrix = {} --  10x20!@#&for p = 1 ,200 do --  200 !@#&matrix[p] = 0 !@#&end!@#&!@#& local figurePosX = 4 --    !@#& local figurePosY = 1 --   !@#& local figureNum = 1 --   !@#& local figureNextNum = math.random(1,7) --     !@#& local figureRotateNumber = 1 --  !@#&!@#& --     (x,y)!@#&   local figure = {!@#&        {{0,0,1,0,0,1,1,1}},-- !@#&        {{0,1,1,1,2,1,1,2},{1,0,0,1,1,1,1,2},{1,0,0,1,1,1,2,1},{1,0,1,1,2,1,1,2}},--    \"\"!@#&        {{1,0,1,1,1,2,2,2},{0,1,1,1,2,1,0,2},{0,0,1,0,1,1,1,2},{2,0,0,1,1,1,2,1}},--    \"L\"!@#&        {{1,0,1,1,1,2,0,2},{0,0,0,1,1,1,2,1},{1,0,2,0,1,1,1,2},{0,1,1,1,2,1,2,2}},--    \"L\" !@#&        {{0,1,1,1,1,2,2,2},{1,0,0,1,1,1,0,2}},--    \"Z\"!@#&        {{1,1,2,1,0,2,1,2},{0,0,0,1,1,1,1,2}},--    \"Z\" !@#&        {{0,2,1,2,2,2,3,2},{1,0,1,1,1,2,1,3}} --    \"I\"!@#&    }!@#&	!@#&local run = true!@#&local FIRST = 1!@#&local PAUSE = 2!@#&local GAME_OVER = 3!@#&local GAME = 4!@#&local gameState = FIRST --   1 ,2  , 3 !@#&local speed = 1.0 --  	!@#&local SCORE = 0 --!@#&local LINES = 0 -- !@#&local LEVEL = 0 --  !@#&!@#&	!@#&-- !@#&local function paintInfa()!@#&	!@#&!@#&	y = iY!@#&	!@#&	-- !@#&	term.setCursorPos(iX,y)!@#&	term.write(\"Score : \" .. SCORE)!@#&	y = y + 1!@#&	term.setCursorPos(iX,y)!@#&	term.write(\"Lines : \" .. LINES)!@#&	y = y + 1!@#&	term.setCursorPos(iX,y)!@#&	term.write(\"Level : \" .. LEVEL)!@#&	term.setCursorPos(iX,h - 2)!@#&	term.write(\"ComputerCraft\")!@#&	term.setCursorPos(iX,h - 1)!@#&	term.write(\"Tetris\")!@#&	term.setCursorPos(iX,h)!@#&	term.write(\"SpeedOS 09.02.24\")!@#&	!@#&--  !@#&!@#&        for i = 1,8,2 do !@#&            term.setCursorPos(sX - 5 + figure[figureNextNum][1][i], iY + figure[figureNextNum][1][i + 1])!@#&			term.write(\"0\")!@#&        end!@#&!@#&!@#& return	!@#&end!@#&!@#&local helpText = {	\"\",!@#&					\"------HELP-----\", !@#&					\"\",!@#&					\"Right:  -> or D\",!@#&					\"---------------\",!@#&					\"Left: <- or A\",!@#&					\"---------------\",!@#&					\"Rotate:\",!@#&					\" space or enter\",!@#&					\"---------------\",!@#&					\"Pause: P\",!@#&					\"---------------\",!@#&					\"Exit game:\",!@#&					\"     back space\",!@#&					\"\",!@#&					\"---------------\",!@#&					}!@#&!@#&--  !@#&local function paintText()!@#&	!@#&	y = 1!@#&	x = sX + 14!@#&	!@#&	-- !@#&	while #helpText > y - 1 do!@#&	term.setCursorPos(x,y)!@#&	term.write(helpText[y])!@#&	y = y + 1!@#&	end!@#& return!@#&end!@#&!@#&!@#&	!@#&--   !@#&local function paintMatrix()!@#&!@#&!@#&--   !@#&for y = 0,17 do!@#&term.setCursorPos(sX,sY + y)!@#&term.write(\"|..........|\")!@#&end!@#&!@#&local pos = 21 --   21- (    )!@#&!@#&--   !@#&	for y = sY,18 do!@#&			for x = 1 + sX , 10 + sX do!@#&				if matrix[pos] ~= 0 then --   !@#&				term.setCursorPos(x,y)!@#&				term.write(\"0\")	!@#&				end!@#&				if  matrix[pos] == -1 then matrix[pos] = 0 end --    				!@#&				!@#&				!@#&			pos = pos + 1!@#&		end!@#&!@#&	end!@#&	!@#&!@#&end!@#&!@#&!@#&--   -  :!@#&    --1.     !@#&    --2.   !@#&    --              !@#&local function canMove()!@#&!@#&  for i = 1,8,2 do !@#&            x = figurePosX + figure[figureNum][figureRotateNumber][i];!@#&            y = figurePosY + (figure[figureNum][figureRotateNumber][i+1] * 10);!@#&            if x < 0 or x > 9 or x+y > 200 or x+y < 1 then --      !@#&                return false!@#&            end!@#&			!@#&            if matrix[x+y] == 1 then --    !@#&                return false;!@#&				end!@#&        end!@#&		!@#&      return true!@#&end!@#&!@#&local function newFigure()!@#&	 !@#&	figurePosX = 4 --    !@#&	figurePosY = 1 --   !@#&	figureRotateNumber = 1 --  	!@#& !@#&	figureNum = figureNextNum!@#&	figureNextNum = math.random(1,7) --    !@#&!@#&return !@#&end!@#&!@#&!@#&--    !@#&    --(kube = 1)-  ( ), (kube = -1) -  !@#& local function    insertFigureToMatrix() !@#&      local kube,pos, linesCount, count,len = 0!@#&      if canMove() then  !@#&		kube = -1!@#&		else --     !@#&            figurePosY = figurePosY - 10 --             !@#&            kube = 1;!@#&       end!@#&		!@#&        --    !@#&        for i = 1,8,2 do  !@#&		!@#&		  pos = figurePosX + figure[figureNum][figureRotateNumber][i] + figurePosY + (figure[figureNum][figureRotateNumber][i+1] * 10)!@#&            matrix[pos] = kube!@#&			--print(pos)!@#&        end!@#&        !@#&		!@#&		pos = 21 --   21- !@#&		linesCount = 0 --   !@#&		--     !@#&	for y = 1,18 do!@#&			count = 0 --   !@#&			!@#&		for x = 1 , 10  do!@#&		!@#&				if(matrix[pos] == 1) then --     !@#&                        count = count + 1!@#&				end!@#&				!@#&				!@#&			if y == 1  and count > 0 then --          !@#&						gameState = GAME_OVER!@#&					end!@#&   !@#&   !@#&						if count == 10 then  --   10-          !@#&							linesCount = linesCount + 1 !@#&							--          !@#&							len = pos!@#&							while len > 31 do!@#&								for i = len,len - 10,-1 do  matrix[i] = matrix[i - 10] end!@#&								len = len - 10								!@#&							end	!@#&								--   							!@#&								paintMatrix()!@#&								sleep(0.1)!@#&						end!@#&		pos = pos + 1!@#&			!@#&		end	!@#&			!@#&		!@#&	end!@#&		!@#&		!@#&			!@#&			!@#&        --      !@#&		if linesCount > 0 then !@#&			LINES = LINES + linesCount --  !@#&			LEVEL = math.floor (LINES / 10) --        ,10  1  ,20  2   ..!@#&			--     , !@#&			--      ,  10,  50  .!@#&				local bonus = {10,50,100,200}!@#&				SCORE = SCORE + bonus[linesCount]!@#&		end!@#&         !@#&        if kube == 1 then --    !@#&				newFigure()!@#&			end!@#&			!@#&        return!@#&    end!@#&!@#&!@#&	!@#&!@#&local timer = os.startTimer(0)!@#&local event, p1, p2 = nil!@#&!@#&local function game()!@#&!@#& --    !@#&         previosfigureRotateNumber = figureRotateNumber;!@#&         previosfigurePosX = figurePosX;!@#&         previosfigurePosY = figurePosY;!@#&!@#&	!@#&	!@#&		if event == \"key\" then --     !@#&			local key = p1!@#&	!@#&			if key == 30 or key == 203 then --   !@#&				figurePosX = figurePosX - 1!@#&		!@#&			elseif key == 32 or key == 205 then --  !@#&			figurePosX = figurePosX + 1!@#&		!@#&			--end	!@#&			elseif key == 57 or key == 28 or key == 200 then --  !@#&			figureRotateNumber =  ((#figure[figureNum] > figureRotateNumber  ) and figureRotateNumber + 1) or 1 --     figureRotateNumber,    1,     1!@#&			elseif key == 31 or key == 208 then  --  !@#&			figurePosY = figurePosY + 10!@#&			end!@#&			!@#&			!@#&				!@#&				!@#&		end!@#&		!@#&	!@#&	!@#&	!@#&			if canMove() ~= true then --         !@#&				figureRotateNumber = previosfigureRotateNumber !@#&				figurePosX = previosfigurePosX!@#&				figurePosY = previosfigurePosY!@#&			end!@#&		!@#&		!@#&			-- 1  speed = 1.0    2  speed = 0.9        ,     0.3 !@#&			speed =  ((speed > 0.1) and 1.0 - LEVEL/10) or 0.1!@#&			!@#&	!@#&		if event == \"timer\" and p1 == timer then --         !@#&			timer = os.startTimer(speed)!@#&			 figurePosY = figurePosY + 10 			!@#&		end		!@#&	!@#&		!@#&	!@#&	return!@#&end!@#&!@#&!@#& --  !@#&local function newGame()!@#&	SCORE = 0 !@#&	LINES = 0 !@#&	LEVEL = 0!@#&	for p = 1 ,200 do matrix[p] = 0  end --  !@#&	newFigure()!@#&	return!@#&end!@#&!@#&--    !@#&flashing = true!@#&local function paintDialog()!@#&	local text = {	!@#&				{\" WELCOME TETRIS\",!@#&				 \"   P A U S E\",!@#&				\"G A M E  O V E R\",!@#&				 \"  PLAY TETRIS\" },	!@#&				 !@#&				{\"   to start\",!@#&				 \"   to rezume\",!@#&				 \"   to start\",!@#&				 \"\" },	 !@#&				!@#&			}!@#&				!@#&	term.setCursorPos(iX,h/2)!@#&	term.write(text[1][gameState])!@#&!@#&	if flashing and gameState ~= GAME  then!@#&	term.setCursorPos(iX,h/2 + 2)!@#&	term.write(\" Press any key\")!@#&	term.setCursorPos(iX,h/2 + 3)!@#&	term.write(text[2][gameState])!@#&	end!@#&	if event == \"timer\" and p1 == timer then --    !@#&			timer = os.startTimer(0.5)!@#&			 flashing = flashing ~= true				!@#&		end	!@#&	!@#&	return!@#&	end!@#&!@#&	!@#&--   !@#&newGame()!@#&!@#&while run do!@#&!@#&!@#&	event, p1, p2 = os.pullEvent()!@#&	!@#&	!@#&	if event == \"key\" then --     !@#&			local key = p1		!@#&	if  key == 25 then --  P!@#&		gameState = PAUSE!@#&	elseif  key == 14 then --  back space!@#&		run = false	!@#&	elseif key > 1 and gameState ~= GAME then --       Escape!@#&				if gameState == GAME_OVER then newGame()  end !@#&				gameState = GAME !@#&				timer = os.startTimer(0)	!@#&		end!@#&	end!@#&	!@#&	if gameState == GAME then  	!@#&		game()!@#&	end!@#&!@#&	insertFigureToMatrix() !@#&	term.clear() -- !@#&	paintMatrix()!@#&	paintInfa()!@#&	paintText()	!@#&	paintDialog() !@#&	!@#&	!@#&	!@#&	!@#&		!@#&!@#&end!@#&!@#&term.clear() -- !@#&term.setCursorPos(1,1)",["square"]="startx = -1!@#&starty = -1!@#&shell.run(\"clear\")!@#&while true do!@#&	term.setBackgroundColor(colors.black)!@#&	Event,key,xclick,yclick = os.pullEvent()!@#&	if(Event==\"mouse_drag\" or Event==\"mouse_click\")then!@#&		shell.run(\"clear\")!@#&		if(xclick==startx or startx==-1)then!@#&			if(yclick==starty or starty==-1)then!@#&				startx = xclick !@#&				starty = yclick!@#&			end!@#&		else!@#&			term.setBackgroundColor(colors.gray)!@#&			term.setCursorPos(startx,yclick)!@#&			if(yclick<=starty)then!@#&				for derp=1,starty-yclick,1 do !@#&					write(\" \") !@#&					term.setCursorPos(startx,yclick+derp)!@#&				end!@#&			else!@#&				for derp=1,yclick-starty,1 do !@#&					write(\" \") !@#&					term.setCursorPos(startx,yclick-derp)!@#&				end!@#&			end!@#&			if(xclick>=startx)then!@#&				term.setCursorPos(startx,starty)!@#&				for derp=1,xclick-startx,1 do !@#&					write(\" \")!@#&				end!@#&			else!@#&				term.setCursorPos(xclick+1,starty)!@#&				for derp=1,startx-xclick,1 do !@#&					write(\" \")!@#&				end!@#&			end!@#&			if(xclick>=startx)then!@#&				term.setCursorPos(startx,yclick)!@#&				for derp=1,xclick-startx,1 do !@#&					write(\" \")!@#&				end!@#&			else!@#&				term.setCursorPos(xclick,yclick)!@#&				for derp=1,startx-xclick,1 do !@#&					write(\" \")!@#&				end!@#&			end!@#&			term.setCursorPos(xclick,yclick)!@#&			if(yclick<=starty)then!@#&				for derp=1,starty-yclick+1,1 do !@#&					write(\" \") !@#&					term.setCursorPos(xclick,yclick+derp)!@#&				end!@#&			else!@#&				for derp=1,yclick-starty+1,1 do !@#&					write(\" \") !@#&					term.setCursorPos(xclick,yclick-derp)!@#&				end!@#&			end!@#&			term.setCursorPos(startx,starty)!@#&			write(startx..\",\"..starty)!@#&			term.setCursorPos(xclick-4,yclick)!@#&			write(xclick..\",\"..yclick)!@#&			oldx = xclick!@#&			oldy = yclick!@#&		end!@#&	elseif(Event==\"key\")then!@#&		if(key==keys.enter)then!@#&			shell.run(\"clear\")!@#&			if(oldx<startx)then!@#&				if(oldy<starty)then!@#&					newx = oldx!@#&					newy = oldy!@#&					l = startx-oldx!@#&					w = starty-oldy!@#&				else!@#&					newx = oldx!@#&					newy = starty!@#&					l = startx-oldx!@#&					w = oldy-starty!@#&				end!@#&			else!@#&				if(oldy<starty)then!@#&					newx = startx!@#&					newy = oldy!@#&					l = oldx-startx!@#&					w = starty-oldy!@#&				else	!@#&					newy = starty!@#&					newx = startx!@#&					l = oldx-startx!@#&					w = oldy-starty!@#&				end!@#&			end!@#&			term.setBackgroundColor(colors.white)!@#&			for y=0,w,1 do!@#&				for x=0,l,1 do!@#&					term.setCursorPos(newx+x,newy+y)!@#&					write(\" \")!@#&				end!@#&			end!@#&			startx = -1!@#&			starty = -1!@#&			--break!@#&		end!@#&	end	!@#&end",["trig"]="sideA = \"a   \"!@#&sideB = \"b   \"!@#&sideC = \"c   \"!@#&angleA = \"A \"!@#&angleB = \"B \"!@#&oldA = angleA!@#&oldB = angleB!@#&olda = sideA!@#&oldb = sideB!@#&oldc = sideC!@#&numsides = 0!@#&numangles = 0!@#&function title()!@#&	term.clear()!@#&	term.setCursorPos(1,1)!@#&end!@#&!@#&function drawTriangle()!@#&	term.setBackgroundColor(colors.black)!@#&	term.setTextColor(colors.white)!@#&	print(\"    |\\\\\")!@#&	print(\"    | \\\\\")!@#&	print(\"    |  \\\\\")  !@#&	print(\"    |   \\\\\")!@#&	print(\"    |    \\\\\")!@#&	print(\"    |     \\\\\")!@#&	print(\"    |      \\\\\")!@#&	print(\"    |       \\\\\")!@#&	print(\"    |        \\\\\")!@#&	print(\"    |         \\\\\")!@#&	print(\"    |          \\\\\")!@#&	print(\"    |           \\\\\")!@#&	print(\"    |_           \\\\\")!@#&	print(\"    | |           \\\\\")  !@#&	print(\"     --------------\")!@#&	term.setBackgroundColor(colors.gray)!@#&	term.setCursorPos(23,16)!@#&	print(\"solve\")!@#&	term.setCursorPos(30,16)!@#&	print(\"clear\")!@#&	term.setBackgroundColor(colors.black)!@#&	drawparts()!@#&end!@#&!@#&function drawparts()!@#&	term.setBackgroundColor(colors.gray)!@#&	term.setCursorPos(6,3)!@#&	write(oldA)!@#&	term.setCursorPos(6,3)!@#&	write(angleA)!@#&	term.setCursorPos(17,14)!@#&	write(oldB)!@#&	term.setCursorPos(17,14)!@#&	write(angleB)!@#&	term.setCursorPos(1,8)!@#&	write(olda)!@#&	term.setCursorPos(1,8)!@#&	write(sideA)!@#&	term.setCursorPos(9,16)!@#&	write(oldb)!@#&	term.setCursorPos(9,16)!@#&	write(sideB)!@#&	term.setCursorPos(14,8)!@#&	write(oldc)!@#&	term.setCursorPos(14,8)!@#&	write(sideC)!@#&	term.setBackgroundColor(colors.black)!@#&end!@#&!@#&function pathagorium()!@#&	if(sideA~=olda and sideB~=oldb and sideC==oldc)then!@#&		sideC = math.sqrt(sideA^2 + sideB^2)!@#&		angleA = math.deg(math.atan(sideB/sideA))!@#&		angleB = 90-angleA!@#&	elseif(sideA~=olda and sideC~=oldc and sideB==oldb)then!@#&		sideB = math.sqrt(sideC^2 - sideA^2)!@#&		angleA = math.deg(math.acos(sideA/sideC))!@#&		angleB = 90-angleA!@#&	elseif(sideB~=oldb and sideC~=oldc and sideA==olda)then!@#&		sideA = math.sqrt(sideC^2 - sideB^2)!@#&		angleA = math.deg(math.asin(sideB/sideC))!@#&		angleB = 90-angleA!@#&	end	!@#&end!@#&!@#&function solve()!@#&	if(numangles==0 and numsides==2)then!@#&		pathagorium()!@#&	elseif(angleA~=oldA and angleB==oldB and numsides>0)then!@#&		if(sideA~=olda and sideB==oldb)then!@#&			sideB = math.tan(math.rad(angleA))*sideA!@#&			pathagorium()!@#&		elseif(sideB~=oldb and sideA==olda)then!@#&			sideA = sideB/math.tan(math.rad(angleA))!@#&			pathagorium()!@#&		elseif(sideC~=old and sideB==oldb)then!@#&			sideB = math.sin(math.rad(angleA))*sideC!@#&			pathagorium()!@#&		end!@#&	elseif(angleB~=oldB and angleA==oldA and numsides>0)then!@#&		if(sideB~=oldb and sideA==olda)then!@#&			sideA = math.tan(math.rad(angleB))*sideB!@#&			pathagorium()!@#&		elseif(sideA~=olda and sideB==oldb)then!@#&			sideB = sideA/math.tan(math.rad(angleB))!@#&			pathagorium()!@#&		elseif(sideC~=oldc and sideA==olda)then!@#&			sideA = math.sin(math.rad(angleB))*sideC!@#&			pathagorium()!@#&		end!@#&	else!@#&		term.setTextColor(colors.red)!@#&		term.setCursorPos(15,17)!@#&		print(\"Not enough information\")!@#&		sleep(2)!@#&	end !@#&end!@#&!@#&while true do!@#&	title()!@#&	drawTriangle()!@#&	local Event,button,xcord,ycord = os.pullEvent(\"mouse_click\")!@#&	local x,y = term.getSize()!@#&	if(ycord==3)then!@#&		if(xcord>=6 and xcord<=7)then!@#&			term.setCursorPos(6,3)!@#&			angleA=io.read()!@#&			angleA = tonumber(angleA)!@#&			numangles = numangles+1!@#&		end!@#&	elseif(ycord==8)then!@#&		if(xcord<=4)then!@#&			term.setCursorPos(1,8)!@#&			sideA=io.read()!@#&			sideA = tonumber(sideA)!@#&			numsides = numsides+1!@#&		elseif(xcord>=14 and xcord<=17)then!@#&			term.setCursorPos(14,8)!@#&			sideC=io.read()!@#&			sideC = tonumber(sideC)!@#&			numsides = numsides+1!@#&		end!@#&	elseif(ycord==14)then!@#&		if(xcord>=17 and xcord<=18)then!@#&			term.setCursorPos(17,14)!@#&			angleB=io.read()!@#&			angleB = tonumber(angleB)!@#&			numangles = numangles+1!@#&		end!@#&	elseif(ycord==16)then!@#&		if(xcord>=9 and xcord<=12)then!@#&			term.setCursorPos(9,16)!@#&			sideB=io.read()!@#&			sideB = tonumber(sideB)!@#&			numsides = numsides+1!@#&		elseif(xcord>=23 and xcord<=27)then!@#&			solve()!@#&		elseif(xcord>=30 and xcord<=34)then!@#&			sideA = olda!@#&			sideB = oldb!@#&			sideC = oldc!@#&			angleA = oldA!@#&			angleB = oldB!@#&			numsides = 0!@#&			numangles = 0!@#&		end!@#&	end!@#&end",["testpage"]="1111111111111111111111111111111111111111111111111!@#&1111111111111111111111111111111111111111111111111!@#&111111111111111111111111111fff1111111111111111111!@#&11111111111111111111111111f111f111111111111111111!@#&111111111111111111111111111111f111111111111111111!@#&111111111111111111111111111ffff111111111111111111!@#&111111111111111111111111111111f111111111111111111!@#&11111111111111111111111111f111f111111111111111111!@#&111111111111111111111111111fff1111111111111111111!@#&1111111111111111111111111111111111111111111111111!@#&1111111111111111111111111111111111111111111111111!@#&1111111111111111111111111111111111111111111111111!@#&1111111111111111111111111111111111111111111111111!@#&1111111111111111111111111111111111111111111111111!@#&1111111111111111111111111111111111111111111111111!@#&1111111111111111111111111111111111111111111111111!@#&1111111111111111111111111111111111111111111111111!@#&1111111111111111111111111111111111111111111111111",["connectfour"]="rows = {}!@#&count = 0!@#&currentPlayer = \"R\"!@#&running = true!@#&!@#&function fillTable()!@#&	for x=1,7,1 do!@#&		rows[x] = {}!@#&		for y=1,6,1 do !@#&			rows[x][y] = \"N\"!@#&		end!@#&	end	!@#&end!@#&!@#&function clear()!@#&	term.clear()!@#&	term.setCursorPos(1,1)!@#&end!@#&!@#&function drawBoard()!@#&	term.setBackgroundColor(colors.blue)!@#&	for place=1,13,1 do!@#&		print(\"               \")!@#&	end!@#&	!@#&	for row=1,7,1 do!@#&		for column=6,1,-1 do!@#&			if(rows[row][column]==\"N\") then!@#&				term.setBackgroundColor(colors.black)!@#&			elseif(rows[row][column]==\"R\") then!@#&				term.setBackgroundColor(colors.red)!@#&			elseif(rows[row][column]==\"Y\") then!@#&				term.setBackgroundColor(colors.yellow)!@#&			end!@#&			term.setCursorPos(row*2,column*2)!@#&			write(\" \")!@#&		end!@#&	end!@#&	term.setCursorPos(17,1)!@#&	if(currentPlayer==\"R\")then!@#&		term.setBackgroundColor(colors.red)!@#&		write(\"Reds turn\")!@#&	else!@#&		term.setBackgroundColor(colors.yellow)!@#&		write(\"Yellows turn\")!@#&	end!@#&	term.setCursorPos(38,1)!@#&	term.setBackgroundColor(colors.gray)!@#&	write(\"Clear\")!@#&	term.setCursorPos(49,1)!@#&	term.setBackgroundColor(colors.red)!@#&	write(\" X \")!@#&	term.setBackgroundColor(colors.black)!@#&end!@#&!@#&fillTable()!@#&!@#&while running do!@#&	if(count%2==0)then!@#&		currentPlayer = \"R\"!@#&	else!@#&		currentPlayer = \"Y\"!@#&	end!@#&	clear()!@#&	drawBoard()!@#&	Event,key,xpos,ypos = os.pullEvent(\"mouse_click\")!@#&	if(xpos<=14 and xpos%2==0) then!@#&		for place=6,1,-1 do !@#&			if (rows[xpos/2][place]==\"N\")then!@#&				rows[xpos/2][place] = currentPlayer!@#&				break!@#&			end!@#&		end!@#&		!@#&		count = count+1!@#&	elseif(ypos==1) then!@#&		if(xpos>=38 and xpos<=42) then!@#&			fillTable()!@#&			count = 0!@#&		elseif(xpos>=49 and xpos<=52)then!@#&			running = false!@#&		end!@#&	end!@#&end!@#&clear()",["column"]="local w,h = term.getSize()!@#&!@#&tray = {!@#&w = 12;!@#&h = 12;!@#&}!@#&xoff = math.floor(w/2) - tray.w/2!@#&yoff = 5!@#&gcombo = 1!@#&!@#&local avcols = {!@#&  colours.orange, colours.green, colours.blue,!@#&  colours.red, colours.purple, colours.white!@#&}!@#&local cnum = 3!@#&local score = 0!@#&!@#&local gtimer = nil!@#&local tlength = 0.25!@#&!@#&local piece,npiece = nil,nil!@#&function init()!@#&  for y = 1,tray.h do!@#&    tray[y] = {}!@#&  end!@#&end!@#&!@#&function rotate(dir)!@#&  local temp = nil!@#&  if dir == -1 then!@#&    temp = piece[3]!@#&    piece[3] = piece[2]!@#&    piece[2] = piece[1]!@#&    piece[1] = temp!@#&  else!@#&    temp = piece[1]!@#&    piece[1] = piece[2]!@#&    piece[2] = piece[3]!@#&    piece[3] = temp!@#&  end!@#&end!@#&!@#&function makePiece()!@#&  piece = npiece!@#&  npiece = {x = tray.w/2, y = -2}!@#&  for i=1,3 do !@#&    npiece[i] = avcols[math.random(1,#avcols)]!@#&  end!@#&  if not piece then makePiece() end!@#&end!@#&!@#&function checkMatches(clist)!@#&  matchlist = {}!@#&  ccol,crun = nil, 0!@#&  term.setTextColour(colours.white)!@#&!@#&  for _,v in pairs(clist) do!@#&    local col = tray[v[2]][v[1]]!@#&    local crun = 0!@#&    --horizontal!@#&    for x=math.max(v[1]-2,0),math.min(v[1]+2,tray.w) do!@#&      if tray[v[2]][x] == col then!@#&        crun = crun + 1!@#&        if crun == 3 then for nx=x-2,x do!@#&          table.insert(matchlist, {nx,v[2]}) end!@#&        elseif crun > 3 then table.insert(matchlist, {x,v[2]}) end!@#&      else crun = 0 end!@#&    end!@#&    --vertical!@#&    crun = 0!@#&    for y=math.max(v[2]-2,1),math.min(v[2]+2,tray.h) do!@#&      assert(tray[y],y)!@#&      if tray[y][v[1]] == col then!@#&        crun = crun + 1!@#&        if crun == 3 then for ny=y-2,y do!@#&          table.insert(matchlist, {v[1],ny}) end!@#&        elseif crun > 3 then table.insert(matchlist, {v[1],y}) end!@#&      else crun = 0 end!@#&    end!@#&    --diagonal right!@#&    crun = 0!@#&    for i=-2,2 do!@#&      if tray[v[2]+i] and tray[v[2]+i][v[1]+i] == col then!@#&        crun = crun + 1!@#&        if crun == 3 then for j=i-2,i do!@#&          table.insert(matchlist, {v[1]+j, v[2]+j}) end!@#&        elseif crun > 3 then table.insert(matchlist, {v[1]+i,v[2]+i}) end!@#&      else crun = 0 end!@#&    end!@#&    crun = 0!@#&    --diagonal left!@#&    for i=-2,2 do!@#&      if tray[v[2]-i] and tray[v[2]-i][v[1]+i] == col then!@#&        crun = crun + 1!@#&        if crun == 3 then for j=i-2,i do!@#&          table.insert(matchlist, {v[1]+j,v[2]-j}) end!@#&        elseif crun > 3 then table.insert(matchlist, {v[1]+i,v[2]-i}) end!@#&      else crun = 0 end !@#&    end!@#&  end!@#&!@#&  --A display then we delete!@#&  if #matchlist == 0 then return false end!@#&  for i=1,2 do!@#&    draw()!@#&    for _,v in pairs(matchlist) do!@#&      assert(tray[v[2]] and tray[v[2]][v[1]], v[1]..\",\"..v[2])!@#&      term.setCursorPos(xoff + v[1], yoff + v[2])!@#&      term.setBackgroundColour(tray[v[2]][v[1]])!@#&      term.setTextColour(colours.black)!@#&      if i==1 then term.write(\"*\")!@#&      else term.write(\"#\") end!@#&    end!@#&    sleep(tlength/2)!@#&  end!@#&  for _,v in ipairs(matchlist) do!@#&    tray[v[2]][v[1]] = nil!@#&    score = score + (10 * gcombo)!@#&  end!@#&  return #matchlist > 0!@#&end!@#&!@#&function runGravity()!@#&  local mlist = nil!@#&  local runAgain = false!@#&  repeat!@#&    local tlist = {}!@#&    runAgain = false!@#&    for y=tray.h-1,1,-1 do!@#&      for x=1,tray.w do!@#&        if tray[y][x] and not tray[y+1][x] then!@#&          tray[y+1][x] = tray[y][x]!@#&          tray[y][x] = nil!@#&          table.insert(tlist,{x,y+1})!@#&          runAgain = true!@#&        end!@#&      end!@#&    end!@#&    draw()!@#&    if runAgain then !@#&      sleep(tlength/2) !@#&      mlist = tlist!@#&    end!@#&    tlist = {}!@#&  until not runAgain!@#&  return mlist!@#&end!@#&!@#&function drop()!@#&  gcombo = 1!@#&  local mlist = {}!@#&  for i=1,3 do !@#&    tray[piece.y+i-1][piece.x] = piece[i]!@#&    table.insert(mlist, {piece.x, piece.y +i -1}) !@#&  end!@#&  makePiece()!@#&  while true do !@#&    if not checkMatches(mlist) then break end!@#&    mlist = runGravity()!@#&	gcombo = gcombo + 1!@#&    if not mlist then break end!@#&  end!@#&end!@#&!@#&function canMove(dir)!@#&  return (not tray[piece.y] or tray[piece.y][piece.x+dir] == nil) and!@#&       (not tray[piece.y+1] or tray[piece.y+1][piece.x+dir] == nil) and!@#&       (not tray[piece.y+2] or tray[piece.y+2][piece.x+dir] == nil)!@#&end!@#&!@#&function input()!@#&  gtimer = os.startTimer(tlength)!@#&  while true do!@#&    local id,p = os.pullEvent()!@#&    if id == \"timer\" then!@#&      if p == gtimer then!@#&        if piece.y + 2 >= tray.h or tray[piece.y + 3][piece.x] ~= nil then!@#&          if piece.y < 1 then break end!@#&          drop()!@#&        elseif tray[piece.y + 3][piece.x] == nil then!@#&          piece.y = piece.y + 1!@#&        end!@#&        gtimer = os.startTimer(tlength)!@#&      end!@#&    elseif id == \"key\" then!@#&      if p == keys.left and gtimer and piece.x > 1 and!@#&        canMove(-1) then piece.x = piece.x - 1!@#&      elseif p == keys.right and gtimer and piece.x < tray.w and!@#&        canMove(1) then piece.x = piece.x + 1!@#&      elseif p == keys.up and gtimer then rotate(1)!@#&      elseif p == keys.down and gtimer then rotate(-1)!@#&      elseif p == keys.space then!@#&        while piece.y + 2 < tray.h and tray[piece.y + 3][piece.x] == nil do!@#&          piece.y = piece.y + 1!@#&        end!@#&        if piece.y < 1 then break end!@#&        drop()!@#&        gtimer = os.startTimer(tlength)!@#&      elseif p == keys.q then os.pullEvent() break!@#&      elseif p == keys.p then!@#&        if gtimer then gtimer = nil!@#&        else gtimer = os.startTimer(tlength) end!@#&      end!@#&    end!@#&    draw()!@#&  end!@#&end!@#&!@#&function drawNext(npiece,tray)!@#&  term.setCursorPos(xoff+tray.w+1,yoff+1)!@#&  term.setBackgroundColour(colours.grey)!@#&  term.write(string.rep(\" \", 5))!@#&  term.setCursorPos(xoff+tray.w+1,yoff+5)!@#&  term.write(string.rep(\" \", 5))!@#&  for i=1,3 do!@#&    term.setCursorPos(xoff+tray.w+2,yoff+i+1)!@#&	term.setBackgroundColour(colours.black)!@#&	term.write(string.rep(\" \", 3))!@#&	term.setBackgroundColour(colours.grey)!@#&	term.write(\" \")!@#&  end!@#&  for i=1,#npiece do!@#&    term.setCursorPos(xoff + tray.w + 3, yoff + i+1)!@#&    term.setBackgroundColour(npiece[i])!@#&    term.write(\" \")!@#&  end!@#&end!@#&!@#&function draw()!@#&  term.setCursorBlink(false)!@#&  --There's an offset error I'm... too tired to fix!@#&  term.setCursorPos(xoff,yoff+tray.h+1)!@#&  term.setBackgroundColour(colours.grey)!@#&  term.write(string.rep(\" \",tray.w+2))!@#&  term.setBackgroundColour(colours.lightGrey)!@#&  for y=yoff-2,yoff do!@#&    term.setCursorPos(xoff,y)!@#&    term.write(string.rep(\" \", tray.w + 2))!@#&  end!@#&  !@#&  for y=1,tray.h do!@#&    term.setBackgroundColour(colours.grey)!@#&    term.setCursorPos(xoff,y+yoff)!@#&    term.write(\" \")!@#&    term.setCursorPos(xoff + tray.w + 1, y+yoff)!@#&    term.write(\" \")!@#&    for x=1, tray.w do!@#&      term.setCursorPos(x+xoff,y+yoff)!@#&      term.setBackgroundColour(tray[y][x] or colours.black)!@#&      term.write(\" \")!@#&    end!@#&  end!@#&  for i=1,#piece do!@#&    term.setCursorPos(xoff + piece.x, yoff + piece.y + i - 1)!@#&    term.setBackgroundColour(piece[i])!@#&    term.write(\" \")!@#&  end!@#&  term.setCursorPos(xoff + 1,yoff + tray.h + 1)!@#&  term.setBackgroundColour(colours.grey)!@#&  term.setTextColour(colours.white)!@#&  term.write(\"Score: \"..score)!@#&  drawNext(npiece, tray)!@#&  !@#&  term.setBackgroundColour(colours.lightGrey)!@#&  term.setTextColour(colours.red)!@#&  local txt = \"Column Drop\"!@#&  term.setCursorPos(w/2-#txt/2,2)!@#&  term.write(txt)!@#&end!@#&!@#&term.setBackgroundColour(colours.lightGrey)!@#&shell.run(\"clear\")!@#&init()!@#&makePiece()!@#&draw()!@#&input()!@#&term.setBackgroundColour(colours.black)!@#&shell.run(\"clear\")",["sms"]="chat = {}!@#&main = 22!@#&username = \"username\"!@#&password = \"password\"!@#&!@#&function title()!@#&	term.clear()!@#&	term.setCursorPos(1,1)!@#&	local x,y = term.getSize()!@#&	write(\"MineText\")!@#&	term.setCursorPos(x-9,1)!@#&	write(textutils.formatTime(os.time(), false))!@#&	term.setCursorPos(1,3)!@#&	for derp = 1,x,1 do!@#&		write(\"-\")!@#&	end!@#&end!@#&!@#&function clear()!@#&	term.clear()!@#&	term.setCursorPos(1,1)!@#&end!@#&!@#&function setbackground(color,x,y)!@#&	term.setCursorPos(1,1)!@#&	term.setBackgroundColor(color)!@#&	for rows = 1,y,1 do!@#&		for columns = 1,x,1 do!@#&			term.write(\" \")!@#&		end!@#&		print()!@#&	end!@#&end!@#&!@#&function gettext(xplace,yplace,mask)!@#&	local x,y = term.getSize()!@#&	local input = \"\"!@#&	term.setTextColor(colors.white)!@#&	term.setCursorPos(xplace-3,yplace)  !@#&	print(\"|                         |\")!@#&	term.setCursorPos(xplace+1,yplace)!@#&	term.setCursorBlink(true)!@#&	while true do!@#&		local derp,herp = term.getCursorPos()!@#&		term.setCursorPos(derp-1,herp)!@#&		local event, p = os.pullEvent()!@#&		if event == \"char\" then!@#&			if(string.len(input)==21)then!@#&			else!@#&				input = input..p!@#&			end!@#&		elseif event == \"key\" then!@#&			if p == keys.enter then!@#&				term.setCursorBlink(false)!@#&				return input!@#&			elseif p == keys.backspace then!@#&				input = input:sub(1, #input - 1)!@#&			end!@#&		end!@#&		term.setCursorPos(xplace,yplace)!@#&		write( ( mask and string.rep(mask, #input) or input )..\" \")!@#&	end!@#&	error( \"should never get here\" )!@#&!@#&end!@#&!@#&function getchattext(xplace,yplace)!@#&	local lines = {}!@#&	local x,y = term.getSize()!@#&	lines[0] = \"\"!@#&	lines[1] = \"\"!@#&	lines[2] = \"\"!@#&	lines[3] = \"\"!@#&	ycurs = yplace!@#&	term.setTextColor(colors.black)!@#&	term.setBackgroundColor(colors.white)!@#&	local count = 0!@#&	term.setCursorBlink(true)!@#&	term.setCursorPos(xplace,ycurs+count)!@#&	while true do!@#&		local event, p,pram1,pram2 = os.pullEvent()!@#&		if event == \"char\" then!@#&			if(string.len(lines[count])==x-15)then!@#&				if(count<3)then!@#&					count = count+1!@#&					lines[count]=\"\"!@#&					local words = {}!@#&					local newcount = 0!@#&					newstring = lines[count-1]!@#&					term.setCursorPos(1,1)!@#&					for token in string.gmatch(newstring, \"[^%s]+\") do!@#&					   words[newcount]=token!@#&					   newcount = newcount+1!@#&					end!@#&					lines[count-1] = string.sub(lines[count-1],1,36-string.len(words[table.getn(words)]))!@#&					lines[count] = lines[count]..words[table.getn(words)]..p!@#&				end!@#&			else!@#&				lines[count] = lines[count]..p!@#&			end!@#&		elseif event == \"key\" then!@#&			if p == keys.enter then!@#&				term.setCursorBlink(false)!@#&				--input = lines[0]..lines[1]..lines[2]..line[3]!@#&				rednet.send(main,username..\"-message-\"..current_chat..\"-\"..textutils.serialize(lines))!@#&				return --input!@#&			elseif p == keys.backspace then!@#&				lines[count] = lines[count]:sub(1, #lines[count] - 1)!@#&				if(string.len(lines[count])==0)then!@#&					if(count>0)then!@#&						count = count-1!@#&					end!@#&				end!@#&			end!@#&		elseif(event==\"mouse_click\")then!@#&			if(pram2==15)then!@#&				if(pram1>=x-4)then!@#&					term.setCursorBlink(false)!@#&					--input = lines[0]..lines[1]..lines[2]..line[3]!@#&					return --input!@#&				end!@#&			elseif(pram2<=yplace)then!@#&				--if(pram1<=xplace)then!@#&					term.setCursorBlink(false)!@#&					return!@#&				--end!@#&			end!@#&		end!@#&		!@#&		for rows=0,3,1 do!@#&			for columns=0,36,1 do!@#&				term.setCursorPos(16+columns,16+rows)!@#&				write(\" \")!@#&			end!@#&		end!@#&		term.setCursorPos(xplace,ycurs)!@#&		--string.rep(\" \",xplace)!@#&		write( ( mask and string.rep(mask, #lines[count]) or lines[0] )..\" \")!@#&		term.setCursorPos(xplace,ycurs+1)!@#&		--string.rep(\" \",xplace)!@#&		write( ( mask and string.rep(mask, #lines[count]) or lines[1] )..\" \")!@#&		term.setCursorPos(xplace,ycurs+2)!@#&		--string.rep(\" \",xplace)!@#&		write( ( mask and string.rep(mask, #lines[count]) or lines[2] )..\" \")!@#&		term.setCursorPos(xplace,ycurs+3)!@#&		--string.rep(\" \",xplace)!@#&		write( ( mask and string.rep(mask, #lines[count]) or lines[3] )..\" \")!@#&		term.setCursorPos(xplace+string.len(lines[count]),ycurs+count)!@#&	end!@#&	error( \"should never get here\" )!@#&	term.clearLine()!@#&end!@#&!@#&function printlogin(line)!@#&	local done = false!@#&	local x,y = term.getSize()!@#&	clear()!@#&	setbackground(colors.lightBlue,x,y)!@#&	term.setTextColor(colors.white)!@#&	term.setCursorPos(x/2-4,y/2-3)!@#&	print(\"MineChat\")!@#&	term.setCursorPos(x/2-13,y/2+1)!@#&	print(\" -------------------------\")!@#&	term.setCursorPos(x/2-13,y/2+2)!@#&	print(\"|                         |\")!@#&	term.setCursorPos(x/2-(string.len(username)/2),y/2+2)!@#&	print(username)!@#&	term.setCursorPos(x/2-13,y/2+3)!@#&	print(\" -------------------------\")!@#&	term.setCursorPos(x/2-13,y/2+4)!@#&	print(\" -------------------------\")!@#&	term.setCursorPos(x/2-13,y/2+5)!@#&	print(\"|                         |\")!@#&	term.setCursorPos(x/2-(string.len(password)/2),y/2+5)!@#&	if(password==\"password\")then!@#&		print(password)!@#&	else!@#&		print(string.rep(\"*\",string.len(password)))!@#&	end!@#&	term.setCursorPos(x/2-13,y/2+6)!@#&	print(\" -------------------------\")!@#&	term.setCursorPos(x/2-3,y/2+7)!@#&	term.setBackgroundColor(colors.blue)!@#&	print(\" Login \")!@#&	term.setBackgroundColor(colors.lightBlue)!@#&	term.setTextColor(colors.lightGray)!@#&	term.setCursorPos(x/2-8,y/2+8)!@#&	print(\"Create an account\")!@#&	term.setCursorPos(x-2,1)!@#&	term.setBackgroundColor(colors.red)!@#&	term.setTextColor(colors.white)!@#&	write(\" x \")!@#&	term.setBackgroundColor(colors.lightBlue)!@#&end!@#&!@#&function wordwrap(message)!@#&	local newcount = 0!@#&	local words = {}!@#&	for token in string.gmatch(message, \"[^%s]+\") do!@#&	   words[newcount]=token!@#&	   newcount = newcount+1!@#&	end!@#&	return string.sub(message,1,24-string.len(words[table.getn(words)])),words[table.getn(words)]!@#&end!@#&!@#&function printLeft(user,message,current)!@#&	local state=true!@#&	local lines = {}!@#&	local xplace=0!@#&	local x,y = term.getCursorPos()!@#&	term.setBackgroundColor(colors.white)!@#&	if(user==username)then!@#&		term.setTextColor(colors.lightGray)!@#&	else!@#&		term.setTextColor(colors.lightBlue)!@#&	end!@#&	local wordlength=string.len(message)!@#&	if(wordlength>24)then!@#&		lines[0]=string.sub(message,1,24)!@#&		lines[0],lines[1]=wordwrap(lines[0])!@#&		if(wordlength<=48)then!@#&			lines[1]=lines[1]..string.sub(message,25,wordlength)!@#&		else!@#&			lines[1]=lines[1]..string.sub(message,25,48)!@#&			lines[1],lines[2]=wordwrap(lines[1])!@#&		end!@#&		if(wordlength<72 and wordlength>48)then!@#&			lines[2]=lines[2]..string.sub(message,49,wordlength)!@#&		elseif(wordlineght>72 and wordlength>48)then!@#&			lines[2]=lines[2]..string.sub(message,49,72)!@#&			lines[2],lines[3]=wordwrap(lines[2])!@#&		end!@#&		if(wordlength>72)then!@#&			lines[3]=lines[3]..string.sub(message,73)!@#&		end!@#&	else!@#&		lines[0]=string.sub(message,1,wordlength)!@#&	end!@#&	linesleft = 11-(y-2)!@#&	if(linesleft<table.getn(lines))then!@#&		state=false!@#&	else!@#&		xplace=10-string.len(user)!@#&		term.setCursorPos(16+xplace,current)!@#&		write(user)!@#&		term.setTextColor(colors.black)!@#&		for lineplace=0,table.getn(lines),1 do!@#&			term.setCursorPos(27,current+lineplace)!@#&			write(lines[lineplace])!@#&		end!@#&	end!@#&	local x,y = term.getCursorPos()!@#&	return x,y,state!@#&end!@#&!@#&function printChat(chatplace,currentcontact)!@#&	if(currentcontact==\"noone\")then!@#&		return!@#&	end!@#&	local user!@#&	local chatmsg!@#&	rednet.send(os.getID..\"-\"..username..\"-getmessages-\"..currentcontact)!@#&	local id,message = rednet.receive(.5)!@#&	local chat = textutils.unserialize(message)!@#&	term.setBackgroundColor(colors.lightGray)!@#&	term.setTextColor(colors.white)!@#&	term.setCursorPos(16,3)!@#&	write(currentcontact)!@#&	--chat = {}!@#&	--chat[0]=\"roosterhat-hi\"!@#&	--chat[1]=\"nolan-hello\"!@#&	--chat[2]=\"roosterhat-derp\"!@#&	--chat[3]=\"nolan-idk\"!@#&	--chat[4]=\"roosterhat-test\"!@#&	--chat[5]=\"nolan-this is supposed to be a really long line to test word wrap\"!@#&	--chat[6]=\"roosterhat-cool\"!@#&	--chat[7]=\"nolan-i know right!\"!@#&	--chat[8]=\"nolan-its so cool\"!@#&	--chat[9]=\"roosterhat-test\"!@#&	--chat[10]=\"nolan-ICLES\"!@#&	--chat[11]=\"roosterhat-this should be 24 lines.\"!@#&	--chat[12]=\"roosterhat-test\"!@#&	--chat[13]=\"roosterhat-test\"!@#&	--chat[14]=\"roosterhat-ICLES\"!@#&	local count = 0!@#&	current = 3!@#&	for place=0+chatplace,8+chatplace,1 do!@#&		for name,msg in chat[place]:gmatch(\"([^%s]+)-(.*)\") do!@#&			user = name!@#&			chatmsg = msg!@#&		end!@#&		local x,y,result = printLeft(user,chatmsg,current+1)!@#&		if(result==false)then!@#&			return !@#&		end!@#&		current = y!@#&	end!@#&end!@#&!@#&function getchatlength()!@#&	rednet.send(main,username..\"-getmessages-\"..currentcontact)!@#&	local id,message = rednet.receive(.1)!@#&	local chat = textutils.unserialize(message)!@#&	return table.getn(chat)!@#&end!@#&!@#&function newuser()!@#&	local newusername=\"username\"!@#&	local newpassword=\"password\"!@#&	local confirmpass=\"password\"!@#&	setbackground(colors.lightBlue,x,y)!@#&	term.setTextColor(colors.white)!@#&	term.setCursorPos(x/2-4,y/2-3)!@#&	print(\"MineChat\")!@#&	term.setCursorPos(x/2-13,y/2+1)!@#&	print(\" -------------------------\")!@#&	term.setCursorPos(x/2-13,y/2+2)!@#&	print(\"|                         |\")!@#&	term.setCursorPos(x/2-(string.len(newusername)/2),y/2+2)!@#&	print(newusername)!@#&	term.setCursorPos(x/2-13,y/2+3)!@#&	print(\" -------------------------\")!@#&	term.setCursorPos(x/2-13,y/2+4)!@#&	print(\" -------------------------\")!@#&	term.setCursorPos(x/2-13,y/2+5)!@#&	print(\"|                         |\")!@#&	term.setCursorPos(x/2-(string.len(newpassword)/2),y/2+5)!@#&	if(newpassword==\"password\")then!@#&		print(newpassword)!@#&	else!@#&		print(string.rep(\"*\",string.len(newpassword)))!@#&	end!@#&	term.setCursorPos(x/2-13,y/2+6)!@#&	print(\" -------------------------\")!@#&	term.setCursorPos(x/2-13,y/2+4+1)!@#&	print(\"confirm password\")!@#&	term.setCursorPos(x/2-13,y/2+4+2)!@#&	print(\" -------------------------\")!@#&	term.setCursorPos(x/2-13,y/2+5+2)!@#&	print(\"|                         |\")!@#&	term.setCursorPos(x/2-(string.len(confirmpass)/2),y/2+5)!@#&	if(confirmpass==\"password\")then!@#&		print(confirmpass)!@#&	else!@#&		print(string.rep(\"*\",string.len(confirmpass)))!@#&	end!@#&	term.setCursorPos(x/2-13,y/2+6+2)!@#&	print(\" -------------------------\")!@#&end!@#&!@#&function login_interface()!@#&	local x,y = term.getSize()!@#&	local running = true!@#&	while running do!@#&		printlogin()!@#&		local Event, key, xclick, yclick = os.pullEvent(\"mouse_click\")!@#&		if(yclick==11)then!@#&			if(xclick>=12 and xclick<=38)then!@#&				term.setTextColor(colors.white)!@#&				!@#&				username = gettext(x/2-10,y/2+2)!@#&			end!@#&		elseif(yclick==14)then!@#&			if(xclick>=12 and xclick<=38)then!@#&				term.setTextColor(colors.white)!@#&!@#&				password = gettext(x/2-10,y/2+5,\"*\")!@#&			end!@#&		elseif(yclick==15)then!@#&			if(xclick>=x/2-5 and xclick<=x/2+5) then!@#&				newuser()!@#&			end!@#&		elseif(yclick==16)then!@#&			if(xclick>=22 and xclick<=28)then!@#&				running = false!@#&				local trys = 0!@#&				while running do!@#&					rednet.send(main,\"noone-login\"..username..\"-\"..password)!@#&					local id, msg = rednet.receive(.5)!@#&					if(msg~=nil)then!@#&						running = false!@#&					end!@#&					if(trys==10)then!@#&						term.setCursorPos(x/2-15,y)!@#&						term.setTextColor(colors.red)!@#&						write(\"Unable to connect to server\")!@#&						sleep(2)!@#&					end!@#&					trys = trys+1!@#&				end!@#&				if(msg==\"correct\")then!@#&					done = true!@#&				else!@#&					term.setCursorPos(x/2-15,y)!@#&					term.setTextColor(colors.red)!@#&					write(\"Incorrect username or password\")!@#&					sleep(2)!@#&					done = true!@#&				end!@#&			end!@#&		elseif(yclick==1)then!@#&			if(xclick>=x-2)then!@#&				close = true!@#&				return!@#&			end!@#&		end!@#&	end!@#&end!@#&!@#&function getfriends(place)!@#&	endnumber = 0!@#&	term.setBackgroundColor(colors.lightBlue)!@#&	term.setTextColor(colors.white)!@#&	local running = false!@#&	while running do!@#&		rednet.send(main,username..\"-getfriends\")!@#&		id,friends = rednet.receive(.1)!@#&		if(id==main)then!@#&			running = false!@#&		end!@#&	end!@#&	contacts = textutils.unserialize(friends)!@#&!@#&	term.setCursorPos(1,6)!@#&	local count = 0!@#&	if(table.getn(contacts)>13)then!@#&		endnumber = 13!@#&	else!@#&		endnumber = table.getn(contacts)!@#&	end!@#&	for derp = 0+place,endnumber+place,1 do!@#&	  	write(contacts[derp])!@#&	  	term.setCursorPos(1,6+derp-place)!@#&	end !@#&	term.setTextColor(colors.black)!@#&	for derp = 0,endnumber,1 do!@#&		write(\">\")!@#&		print(contacts[derp])!@#&	end!@#&	term.setTextColor(colors.white)!@#&	sleep(2)!@#&end!@#&!@#&function userhome()!@#&	term.setTextColor(colors.white)!@#&	local x,y = term.getSize()!@#&	clear()!@#&	setbackground(colors.white,x,y)!@#&	setbackground(colors.lightBlue,x,2)!@#&	for rows = 1,y,1 do!@#&		term.setBackgroundColor(colors.lightBlue)!@#&		term.setCursorPos(1,0+rows)!@#&		for columns=1,15,1 do!@#&			write(\" \")!@#&		end!@#&	end!@#&	term.setCursorPos(1,1)!@#&	write(\"MineChat\")!@#&	term.setCursorPos(1,2)!@#&	write(username)!@#&	term.setCursorPos(x-5,1)!@#&	term.setBackgroundColor(colors.lightGray)!@#&	write(\"Logout\")!@#&	term.setBackgroundColor(colors.lightBlue)!@#&	term.setCursorPos(16,2)!@#&	write(\"Profile  Options  Help\")!@#&	term.setBackgroundColor(colors.lightGray)!@#&	for rows=16,x,1 do!@#&		term.setCursorPos(rows,3)!@#&		write(\" \")!@#&	end!@#&	term.setBackgroundColor(colors.lightBlue)!@#&	term.setCursorPos(1,4)!@#&	write(\"Contacts\")!@#&	term.setCursorPos(1,5)!@#&	write(\"--------\")!@#&	term.setBackgroundColor(colors.lightGray)!@#&	for rows=1,14,1 do!@#&		term.setCursorPos(15,4+rows)!@#&		write(\" \")!@#&	end!@#&	term.setBackgroundColor(colors.gray)!@#&	term.setCursorPos(15,5)!@#&	write(\"^\")!@#&	term.setCursorPos(15,18)!@#&	write(\"v\")!@#&	term.setBackgroundColor(colors.lightGray)!@#&	for rows=1,11,1 do!@#&		term.setCursorPos(x,2+rows)!@#&		write(\" \")!@#&	end!@#&	term.setBackgroundColor(colors.gray)!@#&	term.setCursorPos(x,3)!@#&	write(\"^\")!@#&	term.setCursorPos(x,14)!@#&	write(\"v\")!@#&	term.setBackgroundColor(colors.lightGray)!@#&	term.setCursorPos(16,15)!@#&	for derp=1,x-15,1 do!@#&		write(\" \")!@#&	end!@#&	term.setBackgroundColor(colors.gray)!@#&	term.setCursorPos(x-4,15)!@#&	write(\"Send\")!@#&	--printChat(chatscrollplace,current_chat)!@#&end!@#&!@#&!@#&!@#&function friend_area(xclick,yclick,place)!@#&	if(table.getn(contacts)>13)then!@#&		friendlength = 13!@#&	else!@#&		friendlength = table.getn(contacts)!@#&	end!@#&	if(xclick<=14)then!@#&		for contact_number=1,friendlength,1 do!@#&			if(yclick==5+contact_number)then!@#&				return contact_number+place!@#&			end!@#&		end!@#&	end!@#&end!@#&!@#&function menu_area(xclick,yclick)!@#&	if(yclick==2)then!@#&		if(xclick>=16 and xclick<=15+string.len(\"profile\"))then!@#&			return \"profile\"!@#&		elseif(xclick>=16+2+string.len(\"profile\") and xclick<=15+2+string.len(\"profile\")+string.len(\"options\"))then!@#&			return \"options\"!@#&		elseif(xclick>=16+4+string.len(\"profile\")+string.len(\"options\") and xclick<=15+4+string.len(\"profile\")+string.len(\"options\")+string.len(\"help\"))then!@#&			return \"help\"!@#&		end!@#&	end!@#&end!@#&!@#&function scroll_area(xclick,yclick)!@#&	local x,y = term.getSize()!@#&	if(xclick==15)then!@#&		if(yclick==5)then!@#&			return \"friend\",-1!@#&		elseif(yclick==18)then!@#&			return \"friend\",1!@#&		end!@#&	elseif(xclick==x)then!@#&		if(yclick==3)then!@#&			return \"chat\",-1!@#&		elseif(yclick==14)then!@#&			return \"chat\",1!@#&		end!@#&	end!@#&end!@#&!@#&function chat_area(xclick,yclick)!@#&	local x,y = term.getSize()!@#&	if(xclick>=16)then!@#&		if(yclick>=16)then!@#&			getchattext(16,16,x)!@#&		end!@#&	end!@#&end!@#&!@#&function logout(xclick,yclick)!@#&	local x,y = term.getSize()!@#&	if(yclick==1)then!@#&		if(xclick>=x-5)then!@#&			return false!@#&		end!@#&	end!@#&end!@#&!@#&function guiinteraction()!@#&	local start = getchatlength()!@#&	local friendscrollplace = 0!@#&	local chatscrollplace = start-8!@#&	local Fchoice = \"nothing\"!@#&	local Mchoice = \"nothing\"!@#&	local Schoice = \"nothing\"!@#&	local x,y = term.getSize()!@#&	local running = true!@#&	current_chat = \"noone\"!@#&	while running do!@#&		userhome()!@#&		printChat(chatscrollplace,current_chat)!@#&		getfriends(friendscrollplace)!@#&		local Event, key, xclick, yclick = os.pullEvent(\"mouse_click\")!@#&		Fchoice = 				friend_area(xclick,yclick,friendscrollplace)!@#&		Mchoice = 				menu_area(xclick,yclick)!@#&		Schoice , direction = 	scroll_area(xclick,yclick)!@#&		chat = 					chat_area(xclick,yclick)!@#&		logedin = 				logout(xclick,yclick)!@#&		if(Fchoice~=nil)then!@#&			local derp = getchatlength()!@#&			chatscrollplace = derp-8!@#&			current_chat = contacts[Fchoice]!@#&			printChat(chatscrollplace,current_chat)!@#&		end!@#&		if(Mchoice~=nil)then!@#&			print(\"Menu \"..Mchoice)!@#&			sleep(1)!@#&			--openMenu(Mchoice)!@#&		end!@#&		if(Schoice~=nil)then!@#&			if(Schoice==\"friend\")then!@#&				friendscrollplace=friendscrollplace+direction!@#&				if(friendscrollplace<0)then!@#&					friendscrollplace = 0!@#&				end!@#&				if(friendscrollplace+13>table.getn(contacts))then!@#&					friendscrollplace = friendscrollplace-1!@#&				end!@#&				getfriends(friendscrollplace)!@#&			else!@#&				local length = getchatlength()!@#&				chatscrollplace=chatscrollplace+direction!@#&				if(chatscrollplace<0)then!@#&					chatscrollplace = 0!@#&				end!@#&				if(chatscrollplace>length-8)then!@#&					chatscrollplace = chatscrollplace-1!@#&				end!@#&				printChat(chatscrollplace,current_chat)!@#&			end!@#&		end!@#&		if(logedin==false)then!@#&			running=false!@#&		end!@#&	end!@#&end!@#&!@#&--PROGRAM STARTS HERE--!@#&close = false!@#&while close==false do!@#&	close=false!@#&	username = \"username\"!@#&	password = \"password\"!@#&	login_interface()!@#&	if(close==false)then!@#&		guiinteraction()!@#&	end!@#&end!@#&term.setBackgroundColor(colors.black)!@#&term.setTextColor(colors.white)!@#&term.clear()!@#&term.setCursorPos(1,1)",["ccsand"]="--[[!@#&CCSand by CosmoConsole!@#&Supports Redirect API created by GopherAtl!@#&!@#&License: Creative Commons Attribution-NonCommercial-ShareAlike (http://creativecommons.org/licenses/by-nc-sa/3.0/)!@#&!@#&A program coded with LUA for dan200's (Daniel Ratcliffe) ComputerCraft mod (http://www.computercraft.info/)!@#&created for Minecraft by Mojang AB (http://minecraft.net/)!@#&!@#&This program is a falling sand-type of simulator game.!@#&!@#&Do not change anything beyond this if you are not sure what to do.!@#&--]]!@#&!@#&-- Build no 111!@#&!@#&--assert(true, \"Program is in development phase. Remove the first line if you're a debugger.\")!@#&version = \" v0.5\"!@#&if term.isColor() == false then!@#& error(\"This program requires an Advanced Computer\")!@#&end!@#&!@#&paused = true!@#&on = true!@#&drawing = false!@#&dirty = true!@#&particleLimit = 1000!@#&page = 0!@#&sel = 1!@#&fps = 10!@#&menu = false!@#&debug = false!@#&shouldRender = false!@#&buffer=term!@#&API = true!@#&ipart = nil!@#&statusbar = \"\"!@#&textReset = os.startTimer(5)!@#&brushSize = 1!@#&!@#&logs = fs.open(\"/SpeedOS/Applications/GameBox/ccsand.log\", \"a\")!@#&function log(s)!@#& logs.writeLine(os.day() .. \"-\" .. textutils.formatTime(os.time(),true) .. \"; \" .. s)!@#&end!@#&!@#&!@#&!@#&-- elements = [1] = {name, bg, fg, ch, type, spread%, grav%, weight, flam, init, inil, inic, ltp, ltr, htp, htr, inv, func, tc, expl, tool}!@#&-- (l/h)t(p/r) = low/high temperature point/reaction!@#&-- inv = can other materials go into it!@#&-- func = own function!@#&-- ini(t/l/c) = initial temperature/life/co-type!@#&-- type; solid = 0, powder = 1, liquid = 2!@#&elements = {!@#& [0] = {\" Air \", colors.black, colors.white, \" \", 0, 0, 0, 0, 0, 0, 0, 0, -1, 0, -1, 0, 0, [\"func\"] = nil, 0, 0, 0},!@#& [1] = {\" Sand\", colors.yellow, colors.white, \":\", 1, 20, 90, 52, 0, 295, 0, 0, -1, 0, -1, 0, 0, [\"func\"] = nil, 35, 0, 0},!@#& [2] = {\" Wall\", colors.lime, colors.lime, \".\", 0, 0, 0, 100, 0, 293, 0, 0, -1, 0, -1, 0, 0, [\"func\"] = nil, 80, 0, 0},!@#& [3] = {\"Water\", colors.blue, colors.lightBlue, \"~\", 2, 8, 95, 30, 0, 295, 0, 0, 272.9, 16, 373.1, 15, 0, [\"func\"] = nil, 25, 0, 0},!@#& [4] = {\" Void\", colors.purple, colors.black, \"+\", 0, 0, 0, 100, 0, 295, 0, 0, -1, 0, -1, 0, 1, [\"func\"] = nil, 80, 0, 0},!@#& [5] = {\"Crazy\", colors.white, colors.blue, \"X\", 0, 0, 0, 0, 0, 295, 0, 0, -1, 0, -1, 0, 1, [\"func\"] = nil, 70, 0, 0},!@#& [6] = {\"  N2 \", colors.lightBlue, colors.white, \":\", 0, 0, 0, 10, 0, 295, 0, 0, -1, 0, -1, 0, 1, [\"func\"] = gas_movement, 30, 0, 0},!@#& [7] = {\" Fire\", colors.orange, colors.yellow, \"^\", 2, 8, -100, 24, 0, 595, 20, 0, 373, 18, -1, 0, 1, [\"func\"] = fire, 40, 0, 0},!@#& [8] = {\" Oil \", colors.green, colors.yellow, \"~\", 2, 8, 95, 28, 80, 295, 0, 0, -1, 0, 600, 7, 0, [\"func\"] = nil, 40, 0, 0},!@#& [9] = {\"  O2 \", colors.lightBlue, colors.white, \"O\", 0, 0, 0, 10, 90, 295, 0, 0, -1, 0, -1, 0, 1, [\"func\"] = gas_movement, 30, 0, 0},!@#& [10] = {\" Wood\", colors.yellow, colors.brown, \":\", 0, 0, 0, 100, 60, 293, 0, 0, -1, 0, 600, 7, 0, [\"func\"] = nil, 55, 0, 0},!@#& [11] = {\" TNT \", colors.red, colors.pink, \"T\", 0, 0, 0, 100, 100, 293, 0, 0, -1, 0, -1, 0, 0, [\"func\"] = nil, 35, 1, 0},!@#& [12] = {\"Insul\", colors.lightGray, colors.magenta, \":\", 0, 0, 0, 100, 0, 293, 0, 0, -1, 0, -1, 0, 0, [\"func\"] = nil, 0, 0, 0},!@#& [13] = {\"*Heat\", colors.red, colors.black, \"H\", 0, 0, 0, 100, 100, 293, 0, 0, -1, 0, -1, 0, 0, [\"func\"] = nil, 35, 1, 1},!@#& [14] = {\"*Cool\", colors.blue, colors.black, \"C\", 0, 0, 0, 100, 0, 293, 0, 0, -1, 0, -1, 0, 0, [\"func\"] = nil, 0, 0, 2},!@#& [15] = {\"Steam\", colors.lightGray, colors.white, \";\", 2, 8, -95, 10, 0, 395, 0, 0, 373, 3, -1, 0, 0, [\"func\"] = nil, 25, 0, 0},!@#& [16] = {\" Ice \", colors.cyan, colors.lightBlue, \"o\", 0, 0, 0, 100, 0, 253, 0, 0, -1, 0, 273, 3, 0, [\"func\"] = nil, 50, 0, 0},!@#& [17] = {\"Plasm\", colors.magenta, colors.yellow, \"^\", 2, 8, -100, 24, 0, 7595, 20, 5373, 7, 0, -1, 0, 1, [\"func\"] = fire, 40, 0, 0},!@#& [18] = {\"Smoke\", colors.gray, colors.black, \"o\", 2, 8, -100, 24, 0, 325, 10, 0, -1, 0, 423, 7, 1, [\"func\"] = death, 40, 0, 0},!@#& [19] = {\"CFire\", colors.blue, colors.cyan, \"^\", 2, 8, -100, 24, 0, 10, 20, 0, -1, 0, 173, 0, 1, [\"func\"] = death, 40, 0, 0},!@#& [20] = {\"Neutr\", colors.lightBlue, colors.cyan, \".\", 0, 0, 0, 0, 0, 293, 15, -8, -1, 0, -1, 0, 1, [\"func\"] = neutrons, 25, 0, 0},!@#& [21] = {\" Lava\", colors.red, colors.orange, \"~\", 2, 8, 95, 30, 0, 2095, 0, 22, 1095, -1, -1, 0, 0, [\"func\"] = ignite, 50, 0, 0},!@#& [22] = {\"Stone\", colors.gray, colors.lightGray, \":\", 1, 20, 96, 65, 0, 295, 0, 0, -1, 0, 1100, 21, 0, [\"func\"] = nil, 70, 0, 0},!@#& [23] = {\"Metal\", colors.blue, colors.gray, \"X\", 0, 0, 0, 100, 0, 293, 0, 0, -1, 0, 1150, 21, 0, [\"func\"] = nil, 90, 0, 0},!@#& [24] = {\" CO2 \", colors.lightGray, colors.gray, \"O\", 1, 20, 15, 10, 0, 295, 0, 0, -1, 0, -1, 0, 1, [\"func\"] = co2, 30, 0, 0},!@#& [25] = {\"  H2 \", colors.lightBlue, colors.cyan, \"O\", 2, 0, -1, 5, 0, 295, 0, 0, -1, 0, -1, 0, 1, [\"func\"] = h2, 30, 0, 0},!@#& [26] = {\"Clone\", colors.cyan, colors.yellow, \"C\", 0, 0, 0, 100, 0, 293, 0, 0, -1, 0, -1, 0, 0, [\"func\"] = clone, 70, 0, 0},!@#&}!@#&!@#&if debug == true then!@#& log(\"CCSand opened in debug mode!\")!@#&end!@#&!@#&local splashes = {!@#& \"CC stands for CosmoConsole and ComputerCraft\",!@#& \"You need Advanced Computers for this\",!@#& \"Try to save & load!\",!@#& \"This game doesn't have moving solids\"!@#&}!@#&!@#&!@#&statusbar = splashes[math.random(1, #splashes)]!@#&!@#&!@#&if debug then log(\"Searching for Redirect API created by GopherAtl\") end!@#&if redirect then!@#& buffer=redirect.createRedirectBuffer()!@#& if debug then log(\"Redirect buffer enabled\") end!@#&else!@#& local ok=pcall(os.loadAPI,\"SpeedAPI/redirect\")!@#& if not ok then ok=pcall(os.loadAPI,shell.dir()..\"/SpeedAPI/redirect\") end!@#& if (ok) and (redirect) then!@#&  buffer=redirect.createRedirectBuffer()!@#&  if debug then log(\"Redirect buffer loaded and enabled\") end!@#&  API = true!@#& else!@#&  if debug then log(\"Redirect buffer not found\") end!@#& end!@#& term.restore()!@#&end!@#&term.clear()!@#&!@#&creationTemp = nil!@#&creationCotype = nil!@#&creationLife = nil!@#&!@#&MAX_TEMP = 9999!@#&MIN_TEMP = 0!@#&!@#&!@#&!@#&--print(\"Press Q to Quit!\")!@#&!@#&!@#&function trim(s)!@#&  return (s:gsub(\"^%s*(.-)%s*$\", \"%1\"))!@#&end!@#&function log2(input)!@#& return (math.log(input)/math.log(2))!@#&end!@#&function round(num, idp)!@#&  local mult = 10^(idp or 0)!@#&  return math.floor(num * mult + 0.5) / mult!@#&end!@#&function openMenu()!@#& term.setBackgroundColor(colors.brown)!@#& term.setTextColor(colors.yellow)!@#& term.setCursorPos(47, 19)!@#& write(version)!@#& term.setBackgroundColor(colors.gray)!@#& term.setTextColor(colors.white)!@#& menu = true!@#& dirty = true!@#&end!@#&function pause()!@#& --write(\"Pause toggled\")!@#& paused = not paused!@#&end!@#&!@#&!@#&function quit()!@#& --term.clear()!@#& --term.setCursorPos(5, 5)!@#& --print(\"Thank you for playing!\")!@#& --print(\"ccSand by CosmoConsole\")!@#& --os.sleep(3)!@#& term.clear()!@#& term.setCursorPos(1, 1)!@#& logs.close()!@#& on = false!@#&end!@#&!@#&--log(\"CCSand opened.\")!@#&grid = {1, 40, 1, 17}!@#&--40x17 grid!@#&!@#&lx = 0!@#&ly = 0!@#&!@#&!@#&!@#&-- [particle_id] = {id, x, y, type, life, cotype, temp}!@#&-- particle 0 to avoid 'nil'!@#&particles = {!@#&}  --[0] = {0, 0, 0, 0, 0, 0, 0}!@#&!@#&!@#&-- particle ID begins at 1. 0 is air.!@#&part_id = 1!@#&!@#&!@#&function getParticleCalled(i)!@#& for k, v in pairs(particles) do!@#&  if v[1] == i then!@#&   return k!@#&  end!@#& end!@#& return 0!@#&end!@#&function getParticleAt(x,y)!@#& for k, v in pairs(particles) do!@#&  if v[2] == x then!@#&   if v[3] == y then!@#&    return k!@#&   end!@#&  end!@#& end!@#& return 0!@#&end!@#&function render2(pt,rx,ry)!@#& if rx < grid[1] then return end!@#& if rx > grid[2] then return end!@#& if ry < grid[3] then return end!@#& if ry > grid[4] then return end!@#& term.setCursorPos(rx,ry)!@#& term.setBackgroundColor(elements[pt][2])!@#& term.setTextColor(elements[pt][3])!@#& print(elements[pt][4])!@#& --buffer[rx[ry]] = {elements[pt][4], elements[pt][2], elements[pt][3]}!@#&end!@#&function render(rx,ry,part)!@#& if part == nil then!@#&  p = getParticleAt(rx,ry)!@#& else!@#&  p = part!@#&  rx = part[2]!@#&  ry = part[3]!@#& end!@#& if rx < grid[1] then return end!@#& if rx > grid[2] then return end!@#& if ry < grid[3] then return end!@#& if ry > grid[4] then return end!@#& px = particles[p]!@#& term.setCursorPos(rx,ry)!@#& if px == nil then!@#&  px = {0,0,0,0,0,0,0}!@#& end!@#& term.setBackgroundColor(elements[px[4]][2])!@#& term.setTextColor(elements[px[4]][3])!@#& print(elements[px[4]][4])!@#&end!@#&function createParticle(x,y,type,life,cotype,temp)!@#& if getParticleAt(x,y) ~= 0 then!@#&  return 0!@#& end!@#& if x == nil then!@#&  return 0!@#& end!@#& if y == nil then!@#&  return 0!@#& end!@#& if type == nil then!@#&  return 0!@#& end!@#& if y > grid[4] then!@#&  return 0!@#& end!@#& if y < grid[3] then!@#&  return 0!@#& end!@#& if x > grid[2] then!@#&  return 0!@#& end!@#& if x < grid[1] then!@#&  return 0!@#& end!@#& if #particles > particleLimit then!@#&  return 0!@#& end!@#& l = elements[type][11]!@#& if life ~= nil then l = life end!@#& if l < 0 then l = math.random(0 - l) end!@#& c = elements[type][12]!@#& if cotype ~= nil then c = cotype end!@#& if c < 0 then c = math.random(0 - c) end!@#& t = elements[type][10]!@#& if temp ~= nil then t = temp end!@#& i = part_id!@#& part_id = part_id + 1!@#& if debug == true then!@#&  log(\"Creating particle of \" .. type .. \" at \" .. x .. \",\" .. y)!@#& end!@#& dirty = true!@#& render(x, y, table.insert(particles, {i, x, y, type, l, c, t}))!@#& return i!@#&end!@#&function killParticle(i)!@#& if particles[i] then!@#&  px = particles[i][2]!@#&  py = particles[i][3]!@#&  if debug == true then!@#&   log(\"Killing particle #\" .. particles[i][1] .. \" at \" .. px .. \",\" .. py)!@#&  end!@#&  if i == ipart then ipart = nil end!@#&  table.remove(particles, i)!@#&  dirty = true!@#&  --render(px,py)!@#& end!@#& return true!@#&end!@#&function drawElement(i,x,y)!@#& if elements[i] == nil then return end!@#& tx = elements[i][3]!@#& bx = elements[i][2]!@#& if bx == tx then!@#&  tx = colors.white!@#& end!@#& if bx == 256 then!@#&  tx = colors.black!@#& end!@#& if bx < 128 then!@#&  tx = colors.black!@#& end!@#& --log(\"drawElement: tx is \" .. tx .. \" and bx is \" .. bx)!@#& term.setBackgroundColor(bx)!@#& term.setTextColor(tx)!@#& x1, y1 = term.getCursorPos()!@#& term.setCursorPos(x,y)!@#& write(elements[i][1])!@#& term.setBackgroundColor(colors.gray)!@#& term.setTextColor(colors.white)!@#& term.setCursorPos(x1, y1)!@#&end!@#&function selectElement(i)!@#& if i > (#elements) then return end!@#& sel = i!@#& drawElement(i,46,17)!@#&end!@#&function kissa()!@#& for i = 1,1000 do!@#&  drawElement(math.random(0,#elements),math.random(1,50),math.random(1,17))!@#& end!@#&end!@#&!@#&function info(x,y)!@#& if y > grid[4] then return end!@#& if y < grid[3] then return end!@#& if x > grid[2] then return end!@#& if x < grid[1] then return end!@#& local pxy = getParticleAt(x,y)!@#& if pxy ~= 0 then!@#&  ipart = particles[pxy]!@#& else!@#&  ipart = nil!@#& end!@#& dirty = true!@#&end!@#&function closeMenu()!@#& dirty = true!@#& menu = false!@#& term.setBackgroundColor(colors.brown)!@#& term.setTextColor(colors.yellow)!@#& term.setCursorPos(1, 19)!@#& write(string.rep(\" \", 51))!@#& term.setCursorPos(1, 19)!@#& write(\"ccSand by CosmoConsole\")!@#& term.setCursorPos(47, 19)!@#& write(version)!@#& term.setBackgroundColor(colors.gray)!@#& term.setTextColor(colors.white)!@#&end!@#&function drawPage(i)!@#& ep = (i * 16) + 1!@#& term.setBackgroundColor(colors.gray)!@#& term.setTextColor(colors.white)!@#& for iterator_a=1,17 do!@#&  term.setCursorPos(41,iterator_a) !@#&  write(\"           \")!@#& end!@#& for iterator_a=1,8 do!@#&  drawElement(ep,41,iterator_a+3)!@#&  ep = ep + 1!@#&  drawElement(ep,46,iterator_a+3)!@#&  ep = ep + 1!@#& end!@#& term.setBackgroundColor(colors.lightGray)!@#& term.setTextColor(colors.white)!@#& term.setCursorPos(42, 2)!@#& write(\"<\")!@#& term.setCursorPos(49, 2)!@#& write(\">\")!@#& term.setBackgroundColor(colors.gray)!@#& term.setTextColor(colors.white)!@#& term.setCursorPos(45, 2)!@#& write(\"  \")!@#& term.setCursorPos(45, 2)!@#& write(page + 1)!@#&end!@#&function menuToggle()!@#& if menu == true then!@#&  closeMenu()!@#& else!@#&  openMenu()!@#& end!@#&end!@#&function particleMove(p1,p2,px,py)!@#& pm1 = particles[p1]!@#& pm2 = particles[p2]!@#& if p2 == 0 then!@#&  inGrid = false!@#&  if px >= grid[1] then!@#&   if px <= grid[2] then!@#&    if py >= grid[3] then!@#&     if py <= grid[4] then!@#&      inGrid = true!@#&     end!@#&    end!@#&   end!@#&  end!@#&  if inGrid == true then!@#&   if particles[p1] == nil then return false end!@#&   opx = particles[p1][2]!@#&   opy = particles[p1][3]!@#&   particles[p1][2] = px!@#&   particles[p1][3] = py!@#&   render(px,py)!@#&   render(opx,opy)!@#&   dirty = true!@#&   if debug == true then!@#&    log(\"Moving particle #\" .. particles[p1][1] .. \" from \" .. opx .. \",\" .. opy .. \" to \" .. px .. \",\" .. py)!@#&   end!@#&   return true!@#&  else!@#&   killParticle(p1)!@#&   return true!@#&  end!@#& end!@#& return false!@#&end!@#&function particleSwitch(p1,p2,px,py)!@#& pm1 = particles[p1]!@#& pm2 = particles[p2]!@#& if p2 == 0 then!@#&  inGrid = false!@#&  if px >= grid[1] then!@#&   if px <= grid[2] then!@#&    if py >= grid[3] then!@#&     if py <= grid[4] then!@#&      inGrid = true!@#&     end!@#&    end!@#&   end!@#&  end!@#&  if inGrid == true then!@#&   opx = particles[p1][2]!@#&   opy = particles[p1][3]!@#&   particles[p1][2] = px!@#&   particles[p1][3] = py!@#&   render(px,py)!@#&   render(opx,opy)!@#&   dirty = true!@#&   if debug == true then!@#&    log(\"Moving particle #\" .. particles[p1][1] .. \" from \" .. opx .. \",\" .. opy .. \" to \" .. px .. \",\" .. py)!@#&   end!@#&  else!@#&   killParticle(p1)!@#&  end!@#& else!@#&  if particles[p2][4] == 4 then!@#&   if debug == true then!@#&    log(\"VOID: *slurp*\")!@#&   end!@#&   killParticle(p1)!@#&   return!@#&  end!@#&  --particles[p1][2] = pm2[2]!@#&  --particles[p2][2] = pm1[2]!@#&  --particles[p1][3] = pm2[3]!@#&  --particles[p2][3] = pm1[3]!@#&   opx = particles[p2][2]!@#&   opy = particles[p2][3]!@#&   particles[p2][2] = particles[p1][2]!@#&   particles[p2][3] = particles[p1][3]!@#&   particles[p1][2] = opx!@#&   particles[p1][3] = opy!@#&   dirty = true!@#&  if debug == true then!@#&   log(\"Switching particles between \" .. pm1[2] .. \",\" .. pm1[3] .. \" and \" .. pm2[2] .. \",\" .. pm2[3])!@#&  end!@#& end!@#&end!@#&function notYetImplemented()!@#& term.setBackgroundColor(colors.brown)!@#& term.setTextColor(colors.yellow)!@#& term.setCursorPos(1, 19)!@#& write(string.rep(\" \", 51))!@#& term.setCursorPos(1, 19)!@#& write(\"Not yet implemented\")!@#& term.setCursorPos(47, 19)!@#& write(version)!@#& term.setBackgroundColor(colors.gray)!@#& term.setTextColor(colors.white)!@#&end!@#&function rect(xa,ya,xb,yb)!@#& if not (xa and xb and ya and yb) then!@#&  return!@#& end!@#& local dp = 0!@#& for xi=xa,xb do!@#&  for yi=ya,yb do!@#&   if elements[sel][20] == 0 then!@#&    createParticle(p2,p3,sel,creationLife,creationCotype,creationTemp)!@#&   elseif elements[sel][20] == 1 then!@#&    if getParticleAt(p2,p3) ~= 0 then particles[getParticleAt(p2,p3)][7] = math.min(particles[getParticleAt(p2,p3)][7] + 5, MAX_TEMP) end!@#&   elseif elements[sel][20] == 2 then!@#&    if getParticleAt(p2,p3) ~= 0 then particles[getParticleAt(p2,p3)][7] = math.max(particles[getParticleAt(p2,p3)][7] - 5, MIN_TEMP) end!@#&   end!@#&   dp = dp + 1!@#&  end!@#& end !@#& return xa .. \"-\" .. xb .. \",\" .. ya .. \"-\" .. yb .. \";\" .. dp .. \" vs \" .. (((xb - xa) + 1) * ((yb - ya) + 1))!@#&end!@#&function arect(xa,ya,xb,yb)!@#& if not (xa and xb and ya and yb) then!@#&  return!@#& end!@#& local dp = 0!@#& for xi=xa,xb do!@#&  for yi=ya,yb do!@#&   createParticle(xi, yi, 0)!@#&   dp = dp + 1!@#&  end!@#& end!@#& return xa .. \"-\" .. xb .. \",\" .. ya .. \"-\" .. yb .. \";\" .. dp .. \" vs \" .. (((xb - xa) + 1) * ((yb - ya) + 1))!@#&end!@#&function setStatus(sx)!@#& textReset = os.startTimer(5)!@#& statusbar = string.sub(sx, 1, 51)!@#& dirty = true!@#&end!@#&local fileEngine = nil!@#&local fileName = nil!@#&local serid = nil!@#&function saveAt()!@#& fileEngine = fs.open(fileName, \"w\")!@#& fileEngine.write(serid)!@#& fileEngine.close()!@#& fileEngine = nil!@#&end!@#&function loadAt()!@#& fileEngine = fs.open(fileName, \"r\")!@#& particles = textutils.unserialize(fileEngine.readAll())!@#& fileEngine.close()!@#& fileEngine = nil!@#&end!@#&function save()!@#& term.setCursorPos(1, 18)!@#& term.setBackgroundColor(colors.brown)!@#& term.setTextColor(colors.yellow)!@#& write(string.rep(\" \", 51))!@#& term.setCursorPos(1, 18)!@#& sleep(0.5)!@#& write(\">\")!@#& cons = read()!@#& closeMenu()!@#& if trim(cons) == \"\" then!@#&  redraw()!@#&  timeout = os.startTimer(0) !@#&  return!@#& end!@#& fileName = cons!@#& ok = true!@#& serid = textutils.serialize(particles)!@#& --ok, err = pcall(setFileEngineWrite)!@#& ok, err = pcall(saveAt)!@#& if ok then!@#&  setStatus(\"Successfully saved\")!@#& else!@#&  if err then setStatus(tostring(err)) end!@#& end!@#& timeout = os.startTimer(0) !@#&end!@#&function load()!@#& term.setCursorPos(1, 18)!@#& term.setBackgroundColor(colors.brown)!@#& term.setTextColor(colors.yellow)!@#& write(string.rep(\" \", 51))!@#& term.setCursorPos(1, 18)!@#& sleep(0.5)!@#& write(\">\")!@#& cons = read()!@#& closeMenu()!@#& dirty = true!@#& if trim(cons) == \"\" then!@#&  redraw()!@#&  timeout = os.startTimer(0) !@#&  return!@#& end!@#& fileName = cons!@#& ok = true!@#& --ok, err = pcall(setFileEngineRead)!@#& ok, err = pcall(loadAt)!@#& if ok then!@#&  setStatus(\"Successfully loaded\")!@#& else!@#&  if err then setStatus(tostring(err)) end!@#& end!@#& timeout = os.startTimer(0) !@#&end!@#&function clear()!@#& particles = {}!@#& term.setBackgroundColor(colors.black)!@#& term.setTextColor(colors.white)!@#& for i = 1,16 do!@#&  term.setCursorPos(1,i)!@#&  write(string.rep(\" \", 40))!@#& end!@#& term.setBackgroundColor(colors.gray)!@#& term.setTextColor(colors.white)!@#& closeMenu()!@#&end!@#&function mquit()!@#& if menu == true then!@#&  quit()!@#& end!@#&end!@#&function mload()!@#& if menu == true then!@#&  load()!@#& end!@#&end!@#&function msave()!@#& if menu == true then!@#&  save()!@#& end!@#&end!@#&function mclear()!@#& if menu == true then!@#&  clear()!@#& end!@#&end!@#&function redraw()!@#& if debug then log(\"Can I redraw now?\") end!@#& if buffer.isBuffer then term.redirect(buffer) end!@#& term.setBackgroundColor(colors.black)!@#& term.setTextColor(colors.white)!@#& if debug then log(\"Redraw: Clearing buffer\") end!@#& for i = 1,17 do!@#&  term.setCursorPos(1,i)!@#&  write(string.rep(\" \", 40))!@#& end!@#& if debug then log(\"Redraw: Buffer clear. Starting particle render.\") end!@#& for k, v in ipairs(particles) do!@#&  render2(v[4], v[2], v[3])!@#& end!@#& term.setBackgroundColor(colors.brown)!@#& term.setTextColor(colors.yellow)!@#& term.setCursorPos(1, 19)!@#& write(string.rep(\" \", 51))!@#& term.setCursorPos(1, 19)!@#& write(statusbar)!@#& term.setBackgroundColor(colors.gray)!@#& term.setTextColor(colors.white)!@#& term.setCursorPos(1, 18)!@#& write(string.rep(\" \", 51))!@#& term.setCursorPos(11, 18)!@#& write(\"[MENU]\")!@#& drawPage(page)!@#& drawElement(sel,46,17)!@#& if debug then log(\"Redraw: Rendered particles.\") end!@#& if menu == true then!@#&  term.setBackgroundColor(colors.brown)!@#&  term.setTextColor(colors.yellow)!@#&  term.setCursorPos(1, 19)!@#&  write(string.rep(\" \", 51))!@#&  term.setCursorPos(1, 19)!@#&  write(\"[EN]Quit  [L]oad  [S]ave  [C]lear\")!@#&  term.setBackgroundColor(colors.gray)!@#&  term.setTextColor(colors.white)!@#& end!@#& if ipart == nil then!@#&  drawElement(0,41,17)!@#&  term.setCursorPos(41,16)!@#&  print(\"                 \")!@#& else!@#&  drawElement(ipart[4],41,17)!@#&  term.setCursorPos(41,16)!@#&  print(\"                 \")!@#&  term.setCursorPos(41,16)!@#&  print(ipart[5])!@#&  term.setCursorPos(46,16) !@#&  print(ipart[6])!@#&  term.setCursorPos(41,18)!@#&  print(\"          \") !@#&  term.setCursorPos(41,18) !@#&  print((ipart[7] - 273.15) .. \" C\")!@#& end!@#& term.setBackgroundColor(colors.gray)!@#& term.setTextColor(colors.white)!@#& if buffer.isBuffer then!@#&  if debug then log(\"Buffering.\") end!@#&  term.restore()!@#&  buffer.blit()!@#& end!@#& dirty = false!@#&end!@#&function setPage(i)!@#& if i == -1 then!@#&  i = 15!@#& end!@#& page = i % 16f!@#& drawPage(i % 16)!@#&end!@#&function nextPage()!@#& setPage(page + 1)!@#&end!@#&function previousPage()!@#& setPage(page - 1)!@#&end!@#&!@#&timeout = os.startTimer(0.1)!@#&!@#&function explode(x, y)!@#& local part!@#& if getParticleAt(x-1,y) ~= 0 then!@#&  part = getParticleAt(x-1,y)!@#&  particles[part][7] = particles[part][7] + 40!@#&  particleMove(part,0,x-2,y)!@#&  particleMove(part,0,x-1,y-1)!@#&  particleMove(part,0,x-1,y+1)!@#& end!@#& if getParticleAt(x+1,y) ~= 0 then!@#&  part = getParticleAt(x+1,y)!@#&  particles[part][7] = particles[part][7] + 40!@#&  particleMove(part,0,x+2,y)!@#&  particleMove(part,0,x+1,y-1)!@#&  particleMove(part,0,x+1,y+1)!@#& end!@#& if getParticleAt(x,y-1) ~= 0 then!@#&  part = getParticleAt(x,y-1)!@#&  particles[part][7] = particles[part][7] + 40!@#&  particleMove(part,0,x,y-2)!@#&  particleMove(part,0,x+1,y-1)!@#&  particleMove(part,0,x-1,y-1)!@#& end!@#& if getParticleAt(x,y+1) ~= 0 then!@#&  part = getParticleAt(x,y+1)!@#&  particles[part][7] = particles[part][7] + 40!@#&  particleMove(part,0,x,y+2)!@#&  particleMove(part,0,x+1,y+1)!@#&  particleMove(part,0,x-1,y+1)!@#& end!@#&end!@#&!@#&function clone(p, k, x, y)!@#& if getParticleAt(x-1,y) ~= 0 then!@#&  if p[6] == 0 then!@#&   if particles[getParticleAt(x-1,y)][4] ~= 26 then!@#&    particles[k][6] = particles[getParticleAt(x-1,y)][4]!@#&   end!@#&  end!@#& end!@#& if p[6] ~= 0 then!@#&  if math.random(1,2) == 1 then createParticle(x-1, y, p[6]) end!@#&  if math.random(1,2) == 1 then createParticle(x+1, y, p[6]) end!@#&  if math.random(1,2) == 1 then createParticle(x-1, y+1, p[6]) end!@#&  if math.random(1,2) == 1 then createParticle(x+1, y+1, p[6]) end!@#&  if math.random(1,2) == 1 then createParticle(x-1, y-1, p[6]) end!@#&  if math.random(1,2) == 1 then createParticle(x+1, y-1, p[6]) end!@#&  if math.random(1,2) == 1 then createParticle(x, y-1, p[6]) end!@#&  if math.random(1,2) == 1 then createParticle(x, y+1, p[6]) end!@#& end!@#&end!@#&function co2(p, k, x, y)!@#& if getParticleAt(x-1,y) ~= 0 then!@#&  if particles[getParticleAt(x-1,y)][4] == 7 then!@#&   killParticle(getParticleAt(x-1,y))!@#&  end!@#& end!@#& if getParticleAt(x+1,y) ~= 0 then!@#&  if particles[getParticleAt(x+1,y)][4] == 7 then!@#&   killParticle(getParticleAt(x+1,y))!@#&  end!@#& end!@#& if getParticleAt(x,y-1) ~= 0 then!@#&  if particles[getParticleAt(x,y-1)][4] == 7 then!@#&   killParticle(getParticleAt(x,y-1))!@#&  end!@#& end!@#& if getParticleAt(x,y+1) ~= 0 then!@#&  if particles[getParticleAt(x,y+1)][4] == 7 then!@#&   killParticle(getParticleAt(x,y+1))!@#&  end!@#& end!@#& gas_movement(p, k, x, y)!@#&end!@#&!@#&function gas_movement(p, k, x, y)!@#& local m = math.random(1, 5)!@#& if m == 1 then particleMove(k, getParticleAt(x-1,y), x-1, y) end!@#& if m == 2 then particleMove(k, getParticleAt(x+1,y), x+1, y) end!@#& if m == 3 then particleMove(k, getParticleAt(x,y-1), x, y-1) end!@#& if m == 4 then particleMove(k, getParticleAt(x,y+1), x, y+1) end!@#&end!@#&function ignite(p, k, x, y)!@#& if getParticleAt(x-1,y) ~= 0 then!@#&  if elements[particles[getParticleAt(x-1,y)][4]][9] ~= 0 then!@#&   if elements[particles[getParticleAt(x-1,y)][4]][9] >= math.random(100) then!@#&    killParticle(getParticleAt(x-1,y))!@#&    createParticle(x-1,y,7)!@#&    if elements[particles[getParticleAt(x-1,y)][4]][19] ~= 0 then!@#&     explode(x-1,y)!@#&    end!@#&   end!@#&  end!@#& end!@#& if getParticleAt(x+1,y) ~= 0 then!@#&  if elements[particles[getParticleAt(x+1,y)][4]][9] ~= 0 then!@#&   if elements[particles[getParticleAt(x+1,y)][4]][9] >= math.random(100) then!@#&    killParticle(getParticleAt(x+1,y))!@#&    createParticle(x+1,y,7)!@#&    if elements[particles[getParticleAt(x+1,y)][4]][19] ~= 0 then!@#&     explode(x+1,y)!@#&    end!@#&   end!@#&  end!@#& end!@#& if getParticleAt(x,y-1) ~= 0 then!@#&  if elements[particles[getParticleAt(x,y-1)][4]][9] ~= 0 then!@#&   if elements[particles[getParticleAt(x,y-1)][4]][9] >= math.random(100) then!@#&    killParticle(getParticleAt(x,y-1))!@#&    createParticle(x,y-1,7)!@#&    if elements[particles[getParticleAt(x,y-1)][4]][19] ~= 0 then!@#&     explode(x,y-1)!@#&    end!@#&   end!@#&  end!@#& end!@#& if getParticleAt(x,y+1) ~= 0 then!@#&  if elements[particles[getParticleAt(x,y+1)][4]][9] ~= 0 then!@#&   if elements[particles[getParticleAt(x,y+1)][4]][9] >= math.random(100) then!@#&    killParticle(getParticleAt(x,y+1))!@#&    createParticle(x,y+1,7)!@#&    if elements[particles[getParticleAt(x,y+1)][4]][19] ~= 0 then!@#&     explode(x,y+1)!@#&    end!@#&   end!@#&  end!@#& end!@#&end!@#&function fire(p, k, x, y)!@#& if getParticleAt(x-1,y) ~= 0 then!@#&  if elements[particles[getParticleAt(x-1,y)][4]][9] ~= 0 then!@#&   if elements[particles[getParticleAt(x-1,y)][4]][9] >= math.random(100) then!@#&    killParticle(getParticleAt(x-1,y))!@#&    createParticle(x-1,y,7)!@#&    if elements[particles[getParticleAt(x-1,y)][4]][19] ~= 0 then!@#&     explode(x-1,y)!@#&    end!@#&   end!@#&  end!@#& end!@#& if getParticleAt(x+1,y) ~= 0 then!@#&  if elements[particles[getParticleAt(x+1,y)][4]][9] ~= 0 then!@#&   if elements[particles[getParticleAt(x+1,y)][4]][9] >= math.random(100) then!@#&    killParticle(getParticleAt(x+1,y))!@#&    createParticle(x+1,y,7)!@#&    if elements[particles[getParticleAt(x+1,y)][4]][19] ~= 0 then!@#&     explode(x+1,y)!@#&    end!@#&   end!@#&  end!@#& end!@#& if getParticleAt(x,y-1) ~= 0 then!@#&  if elements[particles[getParticleAt(x,y-1)][4]][9] ~= 0 then!@#&   if elements[particles[getParticleAt(x,y-1)][4]][9] >= math.random(100) then!@#&    killParticle(getParticleAt(x,y-1))!@#&    createParticle(x,y-1,7)!@#&    if elements[particles[getParticleAt(x,y-1)][4]][19] ~= 0 then!@#&     explode(x,y-1)!@#&    end!@#&   end!@#&  end!@#& end!@#& if getParticleAt(x,y+1) ~= 0 then!@#&  if elements[particles[getParticleAt(x,y+1)][4]][9] ~= 0 then!@#&   if elements[particles[getParticleAt(x,y+1)][4]][9] >= math.random(100) then!@#&    killParticle(getParticleAt(x,y+1))!@#&    createParticle(x,y+1,7)!@#&    if elements[particles[getParticleAt(x,y+1)][4]][19] ~= 0 then!@#&     explode(x,y+1)!@#&    end!@#&   end!@#&  end!@#& end!@#& death(p, k, x, y)!@#&end!@#&function seri()!@#& log(textutils.serialize(particles))!@#&end!@#&function h2(p, k, x, y)!@#& local igni = false!@#& if getParticleAt(x-1,y) ~= 0 then!@#&  if particles[getParticleAt(x-1,y)][4] == 7 then!@#&   igni = true!@#&  end!@#& end!@#& if getParticleAt(x+1,y) ~= 0 then!@#&  if particles[getParticleAt(x+1,y)][4] == 7 then!@#&   igni = true!@#&  end!@#& end!@#& if getParticleAt(x,y-1) ~= 0 then!@#&  if particles[getParticleAt(x,y-1)][4] == 7 then!@#&   igni = true!@#&  end!@#& end!@#& if getParticleAt(x,y+1) ~= 0 then!@#&  if particles[getParticleAt(x,y+1)][4] == 7 then!@#&   igni = true!@#&  end!@#& end!@#& if igni then!@#&  killParticle(k)!@#&  createParticle(x, y, 7, nil, 15, nil)!@#& end!@#& if particles[k] then gas_movement(p, k, x, y) end!@#&end!@#&function neutrons(p, k, x, y)!@#& if (particles[k]) then!@#&  if (p[6] == 1) then!@#&   if particleMove(k, getParticleAt(x,y-1), x, y - 1) == false then!@#&    particles[k][6] = math.random(1,8)!@#&   end!@#&  elseif (p[6] == 2) then!@#&   if particleMove(k, getParticleAt(x,y+1), x, y + 1) == false then!@#&    particles[k][6] = math.random(1,8)!@#&   end!@#&  elseif (p[6] == 3) then!@#&   if particleMove(k, getParticleAt(x-1,y+1), x - 1, y + 1) == false then!@#&    particles[k][6] = math.random(1,8)!@#&   end!@#&  elseif (p[6] == 4) then!@#&   if particleMove(k, getParticleAt(x-1,y), x - 1, y) == false then!@#&    particles[k][6] = math.random(1,8)!@#&   end!@#&  elseif (p[6] == 5) then!@#&   if particleMove(k, getParticleAt(x-1,y), x - 1, y - 1) == false then!@#&    particles[k][6] = math.random(1,8)!@#&   end!@#&  elseif (p[6] == 6) then!@#&   if particleMove(k, getParticleAt(x+1,y - 1), x + 1, y - 1) == false then!@#&    particles[k][6] = math.random(1,8)!@#&   end!@#&  elseif (p[6] == 7) then!@#&   if particleMove(k, getParticleAt(x+1,y), x + 1, y) == false then!@#&    particles[k][6] = math.random(1,8)!@#&   end!@#&  elseif (p[6] == 8) then!@#&   if particleMove(k, getParticleAt(x+1,y+1), x + 1, y + 1) == false then!@#&    particles[k][6] = math.random(1,8)!@#&   end!@#&  end!@#& end !@#& if (particles[k]) then death(p, k, x, y) end!@#&end!@#&function death(p, k, x, y)!@#& particles[k][5] = p[5] - 1!@#& if particles[k] then!@#&  if particles[k][5] == 0 then!@#&   if particles[k][4] == 7 then!@#&    if particles[k][6] == 15 then!@#&     if particles[k] then killParticle(k) end!@#&     createParticle(x, y, 15)!@#&    else!@#&     if particles[k] then killParticle(k) end!@#&     createParticle(x, y, 18)!@#&    end!@#&   else!@#&    killParticle(k)!@#&   end!@#&  end!@#& end!@#&end!@#&!@#&redraw()!@#&!@#&function temp_conduct(k)!@#& local sides = 0!@#& local top = false!@#& local bottom = false!@#& local left = false!@#& local right = false!@#& local ot = particles[k][7]!@#& local x = particles[k][2]!@#& local y = particles[k][3]!@#& local cond = {0, 0, 0, 0} --udlr!@#& if getParticleAt(x,y-1) ~= 0 then!@#&  up = true!@#&  sides = sides + 1!@#&  cond[1] = math.min(elements[particles[getParticleAt(x,y-1)][4]][18], elements[particles[getParticleAt(x,y)][4]][18])!@#& end!@#& if getParticleAt(x,y+1) ~= 0 then!@#&  down = true!@#&  sides = sides + 1!@#&  cond[2] = math.min(elements[particles[getParticleAt(x,y+1)][4]][18], elements[particles[getParticleAt(x,y)][4]][18])!@#& end!@#& if getParticleAt(x-1,y) ~= 0 then!@#&  left = true!@#&  sides = sides + 1!@#&  cond[3] = math.min(elements[particles[getParticleAt(x-1,y)][4]][18], elements[particles[getParticleAt(x,y)][4]][18])!@#& end!@#& if getParticleAt(x+1,y) ~= 0 then!@#&  right = true!@#&  sides = sides + 1!@#&  cond[4] = math.min(elements[particles[getParticleAt(x+1,y)][4]][18], elements[particles[getParticleAt(x,y)][4]][18])!@#& end!@#& if sides > 0 then!@#&  for iter = 1,4 do!@#&   cond[iter] = cond[iter] / (sides + 1)!@#&   cond[iter] = cond[iter] * 1.5!@#&  end!@#& end!@#& if cond[1] > 0 then!@#&  local rt = particles[getParticleAt(x,y-1)][7]!@#&  local tt = (ot + rt) / 2!@#&  local oto = tt - ot!@#&  local rto = tt - rt!@#&  oto = oto / cond[1]!@#&  rto = rto / cond[1]!@#&  particles[getParticleAt(x,y)][7] = round(ot + oto, 2)!@#&  particles[getParticleAt(x,y-1)][7] = round(rt + rto, 2)!@#& end!@#& if cond[2] > 0 then!@#&  local rt = particles[getParticleAt(x,y+1)][7]!@#&  local tt = (ot + rt) / 2!@#&  local oto = tt - ot!@#&  local rto = tt - rt!@#&  oto = oto / cond[2]!@#&  rto = rto / cond[2]!@#&  particles[getParticleAt(x,y)][7] = round(ot + oto, 2)!@#&  particles[getParticleAt(x,y+1)][7] = round(rt + rto, 2)!@#& end!@#& if cond[3] > 0 then!@#&  local rt = particles[getParticleAt(x-1,y)][7]!@#&  local tt = (ot + rt) / 2!@#&  local oto = tt - ot!@#&  local rto = tt - rt!@#&  oto = oto / cond[3]!@#&  rto = rto / cond[3]!@#&  particles[getParticleAt(x,y)][7] = round(ot + oto, 2)!@#&  particles[getParticleAt(x-1,y)][7] = round(rt + rto, 2)!@#& end!@#& if cond[4] > 0 then!@#&  local rt = particles[getParticleAt(x+1,y)][7]!@#&  local tt = (ot + rt) / 2!@#&  local oto = tt - ot!@#&  local rto = tt - rt!@#&  oto = oto / cond[4]!@#&  rto = rto / cond[4]!@#&  particles[getParticleAt(x,y)][7] = round(ot + oto, 2)!@#&  particles[getParticleAt(x+1,y)][7] = round(rt + rto, 2)!@#& end!@#&end!@#&!@#&buttons = {!@#& [1] = {11, 16, 18, 18, \" Menu \", menuToggle, true},!@#& [2] = {1, 6, 18, 18, \"  ||  \", pause, true},!@#& [3] = {41, 45, 4, 4, \"elem01\", function () return selectElement((page * 16) + 1) end, true},!@#& [4] = {46, 50, 4, 4, \"elem02\", function () return selectElement((page * 16) + 2) end, true},!@#& [5] = {41, 45, 5, 5, \"elem03\", function () return selectElement((page * 16) + 3) end, true},!@#& [6] = {46, 50, 5, 5, \"elem04\", function () return selectElement((page * 16) + 4) end, true},!@#& [7] = {41, 45, 6, 6, \"elem05\", function () return selectElement((page * 16) + 5) end, true},!@#& [8] = {46, 50, 6, 6, \"elem06\", function () return selectElement((page * 16) + 6) end, true},!@#& [9] = {41, 45, 7, 7, \"elem07\", function () return selectElement((page * 16) + 7) end, true},!@#& [10] = {46, 50, 7, 7, \"elem08\", function () return selectElement((page * 16) + 8) end, true},!@#& [11] = {41, 45, 8, 8, \"elem09\", function () return selectElement((page * 16) + 9) end, true},!@#& [12] = {46, 50, 8, 8, \"elem0a\", function () return selectElement((page * 16) + 10) end, true},!@#& [13] = {41, 45, 9, 9, \"elem0b\", function () return selectElement((page * 16) + 11) end, true},!@#& [14] = {46, 50, 9, 9, \"elem0c\", function () return selectElement((page * 16) + 12) end, true},!@#& [15] = {41, 45, 10, 10, \"elem0d\", function () return selectElement((page * 16) + 13) end, true},!@#& [16] = {46, 50, 10, 10, \"elem0e\", function () return selectElement((page * 16) + 14) end, true},!@#& [17] = {41, 45, 11, 11, \"elem0f\", function () return selectElement((page * 16) + 15) end, true},!@#& [18] = {46, 50, 11, 11, \"elem10\", function () return selectElement((page * 16) + 16) end, true},!@#& [19] = {1, 8, 19, 19, \"quit\", mquit, true},!@#& [20] = {11, 16, 19, 19, \"load\", mload, true},!@#& [21] = {19, 24, 19, 19, \"save\", msave, true},!@#& [22] = {26, 32, 19, 19, \"clear\", mclear, true},!@#& [23] = {42, 42, 2, 2, \"pprev\", previousPage, true},!@#& [24] = {49, 49, 2, 2, \"pnext\", nextPage, true}!@#&}!@#&!@#&function simulate()!@#& xParticles = particles!@#& for k, v in ipairs(xParticles) do!@#&  temp_conduct(k)!@#&  e = elements[v[4]]!@#&  continue = false!@#&  if e[13] ~= -1 then!@#&   if particles[k][7] <= e[13] then!@#&    killParticle(k)!@#&    if e[14] == -1 then!@#&     createParticle(v[2], v[3], v[6], v[5], 0, v[7])!@#&    else!@#&     createParticle(v[2], v[3], e[14], v[5], v[6], v[7])!@#&    end!@#&    continue = true!@#&   end!@#&  end!@#&  if e[15] ~= -1 then!@#&   if particles[k][7] >= e[15] then!@#&    killParticle(k)!@#&    if e[16] == 21 then!@#&     createParticle(v[2], v[3], e[16], v[5], v[4], v[7])!@#&    else!@#&     createParticle(v[2], v[3], e[16], v[5], v[6], v[7])!@#&    end!@#&    continue = true!@#&   end!@#&  end!@#&  if continue == false then!@#&  if e[5] ~= 0 then!@#&   --Should move!@#&   grav = e[7]!@#&   spr = e[6]!@#&   px = v[2]!@#&   py = v[3]!@#&   gf = math.floor(grav / 100)!@#&   gp = grav % 100!@#&   if gp >= math.random(100) then!@#&    gf = gf + 1!@#&   end!@#&   gstep = -1!@#&   sgf = 1!@#&   if grav < 0 then!@#&    gstep = 1!@#&    sgf = -1!@#&   end!@#&   spread = false!@#&   if spr >= math.random(100) then!@#&    spread = true!@#&   end!@#&   if grav ~= 0 then!@#&    --Can move down? If yes, then do it and ignore the rest.!@#&    canGoDown = gf!@#&    for i=gf,sgf,gstep do!@#&     if getParticleAt(px,py+i) ~= 0 then!@#&      if (elements[particles[getParticleAt(px,py+i)][4]][17] == 0) and (elements[particles[getParticleAt(px,py+i)][4]][8] >= e[8]) then!@#&       canGoDown = (i + gstep)!@#&      end!@#&     end!@#&    end!@#&    if canGoDown ~= 0 then!@#&     sp = 0!@#&     if spread then!@#&      sp = math.random(2)!@#&      if sp == 2 then!@#&       sp = -1!@#&      end!@#&     end!@#&     if getParticleAt(px+sp,py+canGoDown) ~= 0 then!@#&      if (elements[particles[getParticleAt(px+sp,py+canGoDown)][4]][17] == 0) then!@#&       sp = 0!@#&      end!@#&     end!@#&     --particleSwitch call: particle 1 table ID, particle 2 table ID, where particle 1 tries to move (X), where particle 1 tries to move (Y)!@#&     if (sp ~= 0) and (canGoDown ~= 0) then!@#&      particleSwitch(k, getParticleAt(px+sp,py+canGoDown), px+sp, py+canGoDown)!@#&     end!@#&    else!@#&     --Okay, it cannot go down, how about diagonals? (1px left/right and 1px down).!@#&     --First, can it go down-left diagonally?!@#&     canGoDL = true!@#&     if getParticleAt(px-1,py+sgf) ~= 0 then!@#&      if (elements[particles[getParticleAt(px-1,py+sgf)][4]][17] == 0) and (elements[particles[getParticleAt(px-1,py+sgf)][4]][8] >= e[8]) then!@#&       canGoDL = false!@#&      end!@#&     end!@#&     canGoDR = true!@#&     if getParticleAt(px+1,py+sgf) ~= 0 then!@#&      if (elements[particles[getParticleAt(px+1,py+sgf)][4]][17] == 0) and (elements[particles[getParticleAt(px+1,py+sgf)][4]][8] >= e[8]) then!@#&       canGoDR = false!@#&      end!@#&     end!@#&     if (canGoDR) and (canGoDL) then!@#&      dir = math.random(1,2)!@#&      if dir == 1 then!@#&       particleSwitch(k, getParticleAt(px+1,py+sgf), px+1, py+sgf)!@#&      elseif dir == 2 then!@#&       particleSwitch(k, getParticleAt(px-1,py+sgf), px-1, py+sgf)!@#&      end!@#&     elseif (canGoDR) or (canGoDL) then!@#&      if canGoDR == true then particleSwitch(k, getParticleAt(px+1,py+sgf), px+1, py+sgf) end!@#&      if canGoDL == true then particleSwitch(k, getParticleAt(px-1,py+sgf), px-1, py+sgf) end!@#&     elseif (canGoDR == false) and (canGoDL == false) then!@#&      --How about left/right (not down)? (Liquids only)!@#&      if e[5] == 2 then!@#&       canGoLeft = true!@#&       canGoRight = true!@#&       if getParticleAt(px-1,py) ~= 0 then!@#&        if elements[particles[getParticleAt(px-1,py)][4]][17] == 0 then!@#&         canGoLeft = false!@#&        end!@#&       end!@#&       if getParticleAt(px+1,py) ~= 0 then!@#&        if elements[particles[getParticleAt(px+1,py)][4]][17] == 0 then!@#&         canGoRight = false!@#&        end!@#&       end!@#&       if (canGoLeft) and (canGoRight) then!@#&        dir = math.random(1,2)!@#&        if dir == 1 then!@#&         particleMove(k, getParticleAt(px-1,py), px-1, py)!@#&        elseif dir == 2 then!@#&         particleMove(k, getParticleAt(px+1,py), px+1, py)!@#&        end!@#&       else!@#&        if canGoLeft then particleSwitch(k, getParticleAt(px-1,py), px-1, py) end!@#&        if canGoRight then particleSwitch(k, getParticleAt(px+1,py), px+1, py) end!@#&       end!@#&      end!@#&     end!@#&    end!@#&    end!@#&   end!@#&  end!@#&  if e[\"func\"] then!@#&   --they get particle data, it's key, then X and Y!@#&   if debug == true then!@#&    log(\"Reached element function\")!@#&   end!@#&   if particles[k] then!@#&    e[\"func\"](v, k, v[2], v[3])!@#&   end!@#&  end!@#&  if particles[k] then!@#&   if v[4] == 0 then !@#&    killParticle(k) !@#&   end!@#&  end !@#& end!@#&end!@#&function setLife(i)!@#& local pc = getParticleAt(lx,ly)!@#& if pc == 0 then!@#&  return!@#& end!@#& if lx == 0 then!@#&  return!@#& end!@#& if ly == 0 then!@#&  return!@#& end!@#& particles[pc][5] = i!@#&end!@#&function setCotype(i)!@#& local pc = getParticleAt(lx,ly)!@#& if pc == 0 then!@#&  return!@#& end!@#& if lx == 0 then!@#&  return!@#& end!@#& if ly == 0 then!@#&  return!@#& end!@#& particles[pc][6] = i!@#&end!@#&function heat(i)!@#& local pc = getParticleAt(lx,ly)!@#& if pc == 0 then!@#&  return!@#& end!@#& if lx == 0 then!@#&  return!@#& end!@#& if ly == 0 then!@#&  return!@#& end!@#& particles[pc][7] = math.min(particles[pc][7] + i, MAX_TEMP)!@#&end!@#&function cool(i)!@#& local pc = getParticleAt(lx,ly)!@#& if pc == 0 then!@#&  return!@#& end!@#& if lx == 0 then!@#&  return!@#& end!@#& if ly == 0 then!@#&  return!@#& end!@#& particles[pc][7] = math.max(particles[pc][7] - i, MIN_TEMP)!@#&end!@#&!@#&term.clear()!@#&term.setCursorPos(1,1)!@#&info(1,1)!@#&!@#&while on do!@#& evt, p1, p2, p3, p4, p5 = os.pullEvent()!@#& if evt == \"key\" then!@#&  --print(p1 .. \" pressed\")!@#&  if p1 == 57 then!@#&   pause()!@#&  elseif p1 == 33 then!@#&   if paused then simulate() end!@#&  elseif p1 == 14 then!@#&   term.setCursorPos(1, 18)!@#&   term.setBackgroundColor(colors.brown)!@#&   term.setTextColor(colors.yellow)!@#&   write(string.rep(\" \", 51))!@#&   term.setCursorPos(1, 18)!@#&   write(\">\")!@#&   cons = read()!@#&   term.setCursorPos(1, 18)!@#&   func, e = loadstring(cons, \"lua\")!@#&   func2, e2 = loadstring(\"return \" .. cons, \"lua\")!@#&   nfp = 0!@#&   if not func then!@#&    if func2 then!@#&     func = func2!@#&     e = nil!@#&     nfp = 1!@#&    end!@#&   else!@#&    if func2 then!@#&     func = func2!@#&    end!@#&   end!@#&   setfenv(func,getfenv())!@#&   result = {pcall(func)}!@#&   if result[1] then!@#&    nii = 1!@#&    resulter = \">\"!@#&    while (result[nii + 1] ~= nil) or (nii <= nfp) do!@#&     resulter = resulter .. tostring(result[nii + 1])!@#&     nii = nii + 1!@#&    end!@#&    statusBar = string.sub(resulter, 1, 51)!@#&    dirty = true!@#&   else!@#&    statusBar = string.sub(tostring(result[2]), 1, 51)!@#&    dirty = true!@#&   end!@#&   term.setBackgroundColor(colors.gray)!@#&   term.setTextColor(colors.white)!@#&   term.setCursorPos(1, 18)!@#&   write(string.rep(\" \", 51))!@#&   textReset = os.startTimer(5)!@#&   timeout = os.startTimer(0) !@#&  end!@#&  if (p1 == keys.leftCtrl) or (p1 == keys.rightCtrl) then!@#&   if menu == true then!@#&    closeMenu()!@#&   else!@#&    openMenu()!@#&   end!@#&  end!@#&  if menu == true then!@#&   if p1 == 46 then!@#&    clear()!@#&   end!@#&   if p1 == 28 then!@#&    quit()!@#&   end!@#&   if p1 == 31 then!@#&    save()!@#&   end!@#&   if p1 == 38 then!@#&    load()!@#&   end!@#&  end!@#& elseif evt == \"mouse_drag\" then!@#&  if p2 >= grid[1] then!@#&   if p2 <= grid[2] then!@#&    if p3 >= grid[3] then!@#&     if p3 <= grid[4] then!@#&      if drawing == true then!@#&       if p1 == 1 then!@#&        if brushSize <= 1 then!@#&         if elements[sel][20] == 0 then!@#&          createParticle(p2,p3,sel,creationLife,creationCotype,creationTemp)!@#&         elseif elements[sel][20] == 1 then !@#&          if getParticleAt(p2,p3) ~= 0 then particles[getParticleAt(p2,p3)][7] = math.min(particles[getParticleAt(p2,p3)][7] + 5, MAX_TEMP) end!@#&         elseif elements[sel][20] == 2 then!@#&          if getParticleAt(p2,p3) ~= 0 then particles[getParticleAt(p2,p3)][7] = math.max(particles[getParticleAt(p2,p3)][7] - 5, MIN_TEMP) end!@#&         end!@#&        else!@#&         local bs = (brushSize - 1)!@#&         local ds = (brushSize * 2) - 1!@#&         rect(p2-bs, p3-bs, (p2-bs)+ds, (p3-bs)+ds)!@#&        end!@#&       elseif p1 == 2 then!@#&        if brushSize <= 1 then!@#&         killParticle(getParticleAt(p2,p3))!@#&        else!@#&         local bs = (brushSize - 1)!@#&         local ds = (brushSize * 2) - 1!@#&         arect(p2-bs, p3-bs, (p2-bs)+ds, (p3-bs)+ds)!@#&        end!@#&       end        !@#&      end!@#&     end!@#&    end!@#&   end!@#&  end!@#& elseif evt == \"mouse_click\" then!@#&  --write(p1 .. \",\" .. p2 .. \",\" .. p3 .. \"  \")!@#&  if p2 >= grid[1] then!@#&   if p2 <= grid[2] then!@#&    if p3 >= grid[3] then!@#&     if p3 <= grid[4] then!@#&      drawing = true!@#&      if p1 == 3 then!@#&       info(p2, p3)!@#&      end!@#&      if p1 == 1 then!@#&       lx = p2!@#&       ly = p3!@#&       if brushSize <= 1 then!@#&        if elements[sel][20] == 0 then!@#&         createParticle(p2,p3,sel,creationLife,creationCotype,creationTemp)!@#&        elseif elements[sel][20] == 1 then !@#&         if getParticleAt(p2,p3) ~= 0 then particles[getParticleAt(p2,p3)][7] = math.min(particles[getParticleAt(p2,p3)][7] + 5, MAX_TEMP) end!@#&        elseif elements[sel][20] == 2 then!@#&         if getParticleAt(p2,p3) ~= 0 then particles[getParticleAt(p2,p3)][7] = math.max(particles[getParticleAt(p2,p3)][7] - 5, MIN_TEMP) end!@#&        end!@#&       else!@#&        local bs = (brushSize - 1)!@#&        local ds = (brushSize * 2) - 1!@#&        rect(p2-bs, p3-bs, (p2-bs)+ds, (p3-bs)+ds)!@#&       end!@#&      end!@#&      if p1 == 2 then!@#&       if brushSize <= 1 then!@#&        killParticle(getParticleAt(p2,p3))!@#&       else!@#&        local bs = (brushSize - 1)!@#&        local ds = (brushSize * 2) - 1!@#&        arect(p2-bs, p3-bs, (p2-bs)+ds, (p3-bs)+ds)!@#&       end!@#&      end!@#&     else!@#&      drawing = false!@#&     end!@#&    else!@#&     drawing = false!@#&    end!@#&   else!@#&    drawing = false!@#&   end!@#&  else!@#&   drawing = false!@#&  end!@#&  for k, v in pairs(buttons) do!@#&   term.setCursorPos(1, k)!@#&   --print(p2 .. \",\" .. p3 .. \" vs \" .. v[1] .. \"-\" .. v[2] .. \",\" .. v[3] .. \"-\" .. v[4])!@#&   if p2 >= v[1] then!@#&    if p2 <= v[2] then!@#&     if p3 >= v[3] then!@#&      if p3 <= v[4] then!@#&       --print(v[func])!@#&       if v[7] == true then!@#&        v[6]()!@#&        break!@#&       end!@#&      end!@#&     end!@#&    end!@#&   end!@#&  end!@#& elseif evt == \"timer\" and p1 == timeout then!@#&  timeout = os.startTimer(1 / fps) !@#&  --shouldRender = not shouldRender!@#&  pb = colors.gray!@#&  pf = colors.white!@#&  if paused == true then!@#&   pb = colors.white!@#&   pf = colors.black!@#&  else!@#&   if menu == false then!@#&    simulate()!@#&    --if shouldRender == true then redraw() end!@#&   end!@#&  end!@#&  --if dirty then redraw() end!@#&  redraw()!@#&  term.setBackgroundColor(pb)!@#&  term.setTextColor(pf)!@#&  term.setCursorPos(1, 18)!@#&  write(\"[ || ]\")!@#&  term.setBackgroundColor(colors.gray)!@#&  term.setTextColor(colors.white)!@#& elseif evt == \"timer\" and p1 == textReset then!@#&  statusbar = \"ccSand by CosmoConsole                        \" .. version!@#&  dirty = true!@#& end!@#&end!@#&!@#&if API then os.unloadAPI(\"SpeedAPI/redirect\") end!@#&!@#&term.setBackgroundColor(colors.black)!@#&term.setTextColor(colors.white)!@#&term.clear()!@#&term.setCursorPos(1,1)",["blackjack"]="deck = {}!@#&newdeck = {}!@#&playerHand = {}!@#&computerHand = {}!@#&gamerunning = true!@#&gamecount = 0!@#&!@#&function title()!@#&	term.clear()!@#&	term.setCursorPos(40,1)!@#&	print(\"BlackJack\")!@#&	term.setCursorPos(40,2)!@#&	print(\"  -----\")!@#&	term.setCursorPos(40,3)!@#&	print(\" |#####|\")!@#&	term.setCursorPos(40,4)!@#&	print(\"||#####|\")!@#&	term.setCursorPos(40,5)!@#&	print(\"||#####|\")!@#&	term.setCursorPos(40,6)!@#&	print(\"||#####|\")!@#&	term.setCursorPos(40,7)!@#&	print(\"| -----\")!@#&	term.setCursorPos(40,8)!@#&	print(\" -----\")!@#&!@#&end!@#&!@#&function filldeck()!@#&	for deckcount=0,3,1 do!@#&		for card=2,14,1 do!@#&			newdeck[(card-1)+13*deckcount] = card!@#&		end!@#&	end!@#&end!@#&!@#&function shuffledeck()!@#&	local number!@#&	local finished = false!@#&	for count=1,52,1 do!@#&		while finished == false do!@#&			number = math.random(1,52)!@#&			if(deck[number]==nil)then!@#&				deck[number] = newdeck[count]!@#&				finished = true!@#&			end!@#&		end!@#&		finished = false!@#&	end!@#&end!@#&!@#&function drawCards(symbole,place)!@#&	if(symbole==10)then!@#&		term.setCursorPos(5+(place*3),10)!@#&		print(\" ------\")!@#&		term.setCursorPos(5+(place*3),11)!@#&		print(\"|\"..symbole..\"    |\")!@#&		term.setCursorPos(5+(place*3),12)!@#&		print(\"|      |\")!@#&		term.setCursorPos(5+(place*3),13)!@#&		print(\"|      |\")!@#&		term.setCursorPos(5+(place*3),14)!@#&		print(\"|    \"..symbole..\"|\")!@#&		term.setCursorPos(5+(place*3),15)!@#&	print(\" ------\")!@#&	else!@#&		term.setCursorPos(5+(place*3),10)!@#&		print(\" ------\")!@#&		term.setCursorPos(5+(place*3),11)!@#&		print(\"|\"..symbole..\"     |\")!@#&		term.setCursorPos(5+(place*3),12)!@#&		print(\"|      |\")!@#&		term.setCursorPos(5+(place*3),13)!@#&		print(\"|      |\")!@#&		term.setCursorPos(5+(place*3),14)!@#&		print(\"|     \"..symbole..\"|\")!@#&		term.setCursorPos(5+(place*3),15)!@#&		print(\" ------\")!@#&	end!@#&end!@#&!@#&function showhand()!@#&	title()!@#&	for count=1,table.getn(playerHand),1 do!@#&		if(playerHand[count]>10 or playerHand[count]==1)then!@#&			if(playerHand[count]==11)then!@#&				drawCards(\"J\",count)!@#&			elseif(playerHand[count]==12)then!@#&				drawCards(\"Q\",count)!@#&			elseif(playerHand[count]==13)then!@#&				drawCards(\"K\",count)!@#&			else!@#&				drawCards(\"A\",count)!@#&			end	!@#&		else!@#&			drawCards(playerHand[count],count)!@#&		end!@#&		write(\" \")!@#&	end!@#&	print(\"      Total: \"..gettotal(\"player\"))!@#&end!@#&!@#&function getcard(who)!@#&	local count = 1!@#&	while deck[count]==\"used\" do!@#&		count = count+1!@#&	end!@#&	local newcard = deck[count]!@#&	if(who==\"player\")then!@#&		if(deck[count]==14)then!@#&			title()!@#&			print(\"would you like the Ace to be an 11 or a 1\")!@#&			local answer = io.read()!@#&			if(answer==\"1\")then!@#&				newcard = 1!@#&			end!@#&		end!@#&		playerHand[table.getn(playerHand)+1] = newcard!@#&	else!@#&		if(newcard==14)then!@#&			if(checkbust(\"computer\"))then!@#&				newcard = 1!@#&			end!@#&		end!@#&		computerHand[table.getn(computerHand)+1] = newcard!@#&	end!@#&	deck[count] = \"used\"!@#&	showhand()!@#&end!@#&!@#&function checkbust(who)!@#&	local total = 0!@#&	if(who==\"player\")then!@#&		for x=1,table.getn(playerHand),1 do!@#&			if(playerHand[x]>10 and playerHand[x]~=14)then!@#&				total = total+10!@#&			elseif(playerHand[x]==14)then!@#&				total = total+11!@#&			elseif(playerHand[x]==1)then!@#&				total = total+1!@#&			else!@#&				total = total + playerHand[x]!@#&			end!@#&		end!@#&	else!@#&		for x=1,table.getn(computerHand),1 do!@#&			if(computerHand[x]>10 and computerHand[x]~=14)then!@#&				total = total+10!@#&			elseif(computerHand[x]==14)then!@#&				total = total+11!@#&			elseif(computerHand[x]==1)then!@#&				total = total+1!@#&			else!@#&				total = total + computerHand[x]!@#&			end!@#&		end!@#&	end!@#&	if(total>21)then!@#&		return true!@#&	else!@#&		return false!@#&	end!@#&end!@#&!@#&function start()!@#&	for x=1,2,1 do!@#&		getcard(\"player\")!@#&	end!@#&	for x=1,2,1 do!@#&		getcard(\"computer\")!@#&	end!@#&end!@#&!@#&function cango()!@#&	local total=0!@#&	for x=1,table.getn(computerHand),1 do!@#&		if(computerHand[x]>10 and computerHand[x]~=14)then!@#&			total = total+10!@#&		elseif(computerHand[x]==14)then!@#&			total = total+11!@#&		else!@#&			total = total + computerHand[x]!@#&		end!@#&	end!@#&	if(total<=16)then!@#&		return true!@#&	else	!@#&		return false!@#&	end!@#&end!@#&!@#&function gettotal(who)!@#&	local total=0!@#&	if(who==\"player\")then!@#&		for x=1,table.getn(playerHand),1 do!@#&			if(playerHand[x]>10 and playerHand[x]~=14)then!@#&				total = total+10!@#&			elseif(playerHand[x]==14)then!@#&				total = total+11!@#&			else!@#&				total = total + playerHand[x]!@#&			end!@#&		end!@#&	else!@#&		for x=1,table.getn(computerHand),1 do!@#&			if(computerHand[x]>10 and computerHand[x]~=14)then!@#&				total = total+10!@#&			elseif(computerHand[x]==14)then!@#&				total = total+11!@#&			else!@#&				total = total + computerHand[x]!@#&			end!@#&		end!@#&	end!@#&	return total!@#&end	!@#&!@#&function ithad()!@#&	term.setCursorPos(1,2)!@#&	write(\"it had \")!@#&	for count=1,table.getn(computerHand),1 do!@#&		if(computerHand[count]>10)then!@#&			if(computerHand[count]==11)then!@#&				write(\"J\")!@#&			elseif(computerHand[count]==12)then!@#&				write(\"Q\")!@#&			elseif(computerHand[count]==13)then!@#&				write(\"K\")!@#&			else!@#&				write(\"A\")!@#&			end	!@#&		else!@#&			write(computerHand[count])!@#&		end!@#&		write(\" \")!@#&	end!@#&end!@#&!@#&function getwinner()!@#&	title()!@#&	showhand()!@#&	term.setCursorPos(1,1)!@#&	if(checkbust(\"player\"))then!@#&		print(\"you bust\")!@#&	elseif(checkbust(\"computer\"))then!@#&		print(\"the computer bust,you win\")!@#&		ithad()!@#&	elseif(gettotal(\"player\")>gettotal(\"computer\"))then!@#&		print(\"you beat the computer\")!@#&		ithad()!@#&	elseif(gettotal(\"computer\")>gettotal(\"player\"))then!@#&		print(\"the computer beat you\")!@#&		ithad()!@#&	else!@#&		print(\"its a tie\")!@#&		ithad()!@#&	end!@#&	!@#&end!@#&!@#&--**PROGRAM STARTS HERE**!@#&!@#&--while true do!@#&	filldeck()!@#&	shuffledeck()!@#&	title()!@#&	start()!@#&	!@#&	while gamecount < 3 and gamerunning do!@#&		showhand()!@#&		term.setCursorPos(1,1)!@#&		print(\"would you like to hit (Y/N)\")!@#&		Event,key,parm1,parm2 = os.pullEvent()!@#&		if(Event==\"char\") then!@#&			choice = key!@#&			if(choice==\"y\")then!@#&				getcard(\"player\")!@#&				if(checkbust(\"player\"))then!@#&					gamerunning = false!@#&				end!@#&			end!@#&			if(gamerunning)then!@#&				term.setCursorPos(1,2)!@#&				if(cango())then!@#&					getcard(\"computer\")!@#&					print(\"computer hit\")!@#&					sleep(1)!@#&					if(checkbust(\"computer\"))then!@#&						gamerunning = false!@#&					end!@#&				else!@#&					print(\"computer stayed\")!@#&					sleep(1)!@#&				end!@#&			end!@#&			if(choice==\"n\" and cango()==false)then!@#&				gamecount = 3!@#&			end!@#&			gamecount = gamecount+1!@#&		elseif(Event==\"mouse_click\")then!@#&		end!@#&	end!@#&	getwinner()!@#&--end!@#&print()!@#&sleep(2)",["lock_status"]="Locked: false!@#&	",["Lightspeed"]="world = {}!@#&playerX = 0!@#&playerY = 0!@#&!@#&pShips = {!@#&	{name = \"The Gillian\", laserx = 12, lasery = 6.5, maxHull = 18, fire = {{x = -1, y = 0}, {x = -1, y = 1}, {x = -1, y = 4}, {x = -1, y = 5}},!@#&	wCooldown = 20, image = paintutils.loadImage(\"/SpeedOS/Applications/GameBox/pShip1.img\"),!@#&	rooms = {{rType = \"controll\", x = 8, y = 2, level = 9, damage = 0, repair = 0}, {rType = \"weapons\", x = 5, y = 2, level = 4, damage = 0, repair = 0}}},!@#&!@#&	{name = \"Sinjin\", laserx = 12, lasery = 6.5, maxHull = 20, fire = {{x = -1, y = 0}, {x = -1, y = 1}, {x = -1, y = 4}, {x = -1, y = 5}},!@#&	wCooldown = 20, image = paintutils.loadImage(\"/SpeedOS/Applications/GameBox/pShip2.img\"),!@#&	rooms = {{rType = \"controll\", x = 7, y = 2, level = 4, damage = 0, repair = 0}, {rType = \"weapons\", x = 3, y = 1, level = 3, damage = 0, repair = 0}, {rType = \"shields\", x = 3, y = 3, level = 1, damage = 0, repair = 0}}},!@#&}!@#&!@#&eShips = {!@#&	{laserx = 13, lasery = 6.5, maxHull = 10, fire = {{x = 24, y = 0}, {x = 24, y = 5}},!@#&	wCooldown = 20, image = paintutils.loadImage(\"/SpeedOS/Applications/GameBox/eShip1.img\"), image_broken = paintutils.loadImage(\"/SpeedOS/Applications/GameBox/eShip1_broken.img\"),!@#&	rooms = {{rType = \"controll\", x = 17, y = 1, level = 3, damage = 0, repair = 0}, {rType = \"weapons\", x = 17, y = 3, level = 5, damage = 0, repair = 0}}},!@#&!@#&	{laserx = 13, lasery = 6.5, maxHull = 7, fire = {{x = 24, y = 0}, {x = 24, y = 1}, {x = 24, y = 4}, {x = 24, y = 5}},!@#&	wCooldown = 20, image = paintutils.loadImage(\"/SpeedOS/Applications/GameBox/eShip2.img\"), image_broken = paintutils.loadImage(\"/SpeedOS/Applications/GameBox/eShip2_broken.img\"),!@#&	rooms = {{rType = \"controll\", x = 18, y = 1, level = 5, damage = 0, repair = 0}, {rType = \"weapons\", x = 18, y = 3, level = 4, damage = 0, repair = 0}}},!@#&!@#&	{laserx = 13, lasery = 6.5, maxHull = 5, fire = {{x = 24, y = 0}, {x = 24, y = 1}, {x = 24, y = 4}, {x = 24, y = 5}},!@#&	wCooldown = 20, image = paintutils.loadImage(\"/SpeedOS/Applications/GameBox/eShip3.img\"), image_broken = paintutils.loadImage(\"/SpeedOS/Applications/GameBox/eShip3_broken.img\"),!@#&	rooms = {{rType = \"controll\", x = 16, y = 2, level = 7, damage = 0, repair = 0}, {rType = \"weapons\", x = 19, y = 2, level = 2, damage = 0, repair = 0}}},!@#&!@#&	{laserx = 13, lasery = 6.5, maxHull = 2, fire = {{x = 24, y = 0}, {x = 24, y = 1}, {x = 24, y = 4}, {x = 24, y = 5}},!@#&	wCooldown = 20, image = paintutils.loadImage(\"/SpeedOS/Applications/GameBox/eShip4.img\"), image_broken = paintutils.loadImage(\"/SpeedOS/Applications/GameBox/eShip4_broken.img\"),!@#&	rooms = {{rType = \"controll\", x = 15, y = 2, level = 8, damage = 0, repair = 0}, {rType = \"weapons\", x = 18, y = 2, level = 2, damage = 0, repair = 0}}},!@#&!@#&	{laserx = 13, lasery = 6.5, maxHull = 12, fire = {{x = 24, y = 0}, {x = 24, y = 1}, {x = 24, y = 4}, {x = 24, y = 5}},!@#&	wCooldown = 20, image = paintutils.loadImage(\"/SpeedOS/Applications/GameBox/eShip5.img\"), image_broken = paintutils.loadImage(\"/SpeedOS/Applications/GameBox/eShip5_broken.img\"),!@#&	rooms = {{rType = \"controll\", x = 16, y = 1, level = 1, damage = 0, repair = 0}, {rType = \"weapons\", x = 16, y = 3, level = 5, damage = 0, repair = 0}}},!@#&!@#&!@#&	{laserx = 13, lasery = 6.5, maxHull = 12, fire = {{x = 23, y = 0}, {x = 23, y = 3}, {x = 23, y = 4}, {x = 23, y = 7}},!@#&	wCooldown = 20, image = paintutils.loadImage(\"/SpeedOS/Applications/GameBox/eShip6.img\"), image_broken = paintutils.loadImage(\"/SpeedOS/Applications/GameBox/eShip6_broken.img\"),!@#&	rooms = {{rType = \"controll\", x = 14, y = 3, level = 4, damage = 0, repair = 0}, {rType = \"weapons\", x = 18, y = 1, level = 3, damage = 0, repair = 0}, {rType = \"shields\", x = 18, y = 5, level = 1, damage = 0, repair = 0}}},!@#&!@#&	{laserx = 13, lasery = 6.5, maxHull = 10, fire = {{x = 22, y = 1}, {x = 22, y = 2}, {x = 22, y = 5}, {x = 22, y = 6}},!@#&	wCooldown = 20, image = paintutils.loadImage(\"/SpeedOS/Applications/GameBox/eShip7.img\"), image_broken = paintutils.loadImage(\"/SpeedOS/Applications/GameBox/eShip7_broken.img\"),!@#&	rooms = {{rType = \"controll\", x = 15, y = 2, level = 1, damage = 0, repair = 0}, {rType = \"weapons\", x = 15, y = 4, level = 5, damage = 0, repair = 0}}},!@#&!@#&	{laserx = 13, lasery = 6.5, maxHull = 6, fire = {{x = 22, y = 1}, {x = 22, y = 2}, {x = 22, y = 5}, {x = 22, y = 6}},!@#&	wCooldown = 20, image = paintutils.loadImage(\"/SpeedOS/Applications/GameBox/eShip8.img\"), image_broken = paintutils.loadImage(\"/SpeedOS/Applications/GameBox/eShip8_broken.img\"),!@#&	rooms = {{rType = \"controll\", x = 15, y = 3, level = 10, damage = 0, repair = 0}, {rType = \"weapons\", x = 18, y = 3, level = 4, damage = 0, repair = 0}}},!@#&!@#&	{laserx = 13, lasery = 6.5, maxHull = 8, fire = {{x = 22, y = 1}, {x = 22, y = 2}, {x = 22, y = 5}, {x = 22, y = 6}},!@#&	wCooldown = 20, image = paintutils.loadImage(\"/SpeedOS/Applications/GameBox/eShip9.img\"), image_broken = paintutils.loadImage(\"/SpeedOS/Applications/GameBox/eShip9_broken.img\"),!@#&	rooms = {{rType = \"controll\", x = 14, y = 3, level = 8, damage = 0, repair = 0}, {rType = \"weapons\", x = 17, y = 3, level = 5, damage = 0, repair = 0}}},!@#&!@#&	{laserx = 13, lasery = 6.5, maxHull = 10, fire = {{x = 23, y = 0}, {x = 23, y = 3}, {x = 23, y = 4}, {x = 23, y = 7}},!@#&	wCooldown = 20, image = paintutils.loadImage(\"/SpeedOS/Applications/GameBox/eShip10.img\"), image_broken = paintutils.loadImage(\"/SpeedOS/Applications/GameBox/eShip10_broken.img\"),!@#&	rooms = {{rType = \"controll\", x = 18, y = 3, level = 3, damage = 0, repair = 0}, {rType = \"weapons\", x = 18, y = 1, level = 4, damage = 0, repair = 0}, {rType = \"shields\", x = 18, y = 5, level = 1, damage = 0, repair = 0}}},!@#&!@#&!@#&	{laserx = 13, lasery = 8, maxHull = 13, fire = {{x = 22, y = 1}, {x = 22, y = 2}, {x = 22, y = 3}, {x = 22, y = 6}, {x = 22, y = 7}, {x = 22, y = 8}},!@#&	wCooldown = 20, image = paintutils.loadImage(\"/SpeedOS/Applications/GameBox/eShip11.img\"), image_broken = paintutils.loadImage(\"/SpeedOS/Applications/GameBox/eShip11_broken.img\"),!@#&	rooms = {{rType = \"controll\", x = 14, y = 4, level = 3, damage = 0, repair = 0}, {rType = \"weapons\", x = 17, y = 2, level = 7, damage = 0, repair = 0}, {rType = \"shields\", x = 17, y = 6, level = 2, damage = 0, repair = 0}}},!@#&!@#&	{laserx = 13, lasery = 8, maxHull = 13, fire = {{x = 22, y = 1}, {x = 22, y = 2}, {x = 22, y = 3}, {x = 22, y = 6}, {x = 22, y = 7}, {x = 22, y = 8}},!@#&	wCooldown = 20, image = paintutils.loadImage(\"/SpeedOS/Applications/GameBox/eShip12.img\"), image_broken = paintutils.loadImage(\"/SpeedOS/Applications/GameBox/eShip12_broken.img\"),!@#&	rooms = {{rType = \"controll\", x = 14, y = 4, level = 3, damage = 0, repair = 0}, {rType = \"weapons\", x = 17, y = 2, level = 7, damage = 0, repair = 0}, {rType = \"shields\", x = 17, y = 6, level = 2, damage = 0, repair = 0}}},!@#&}!@#&!@#&pShip = {}!@#&eShip = {}!@#&unlockedShips = {}!@#&killCount = 0!@#&!@#&laserPhase = 0!@#&miss = 0!@#&missTime = 8!@#&tick = 1!@#&scrapSymbol = string.char(21)!@#&stop = false!@#&!@#&scrap = 0!@#&fuel = 0!@#&score = 0!@#&!@#&target = -1!@#&repeatShot = false!@#&!@#&screenWidth, screenHeight = term.getSize()!@#&!@#&x1 = 3!@#&y1 = 4!@#&!@#&x2 = 26!@#&y2 = 4!@#&!@#&function deepCopy(table)!@#&	local copy = {}!@#&!@#&	for k, v in pairs(table) do!@#&		local subcopy = v!@#&!@#&		if (type(v) == \"table\") then!@#&			subcopy = deepCopy(v)!@#&		end!@#&!@#&		copy[k] = subcopy!@#&	end!@#&!@#&	return copy!@#&end!@#&!@#&function drawSpaceBackground()!@#&	term.setBackgroundColor(colors.black)!@#&	term.setTextColor(colors.white)!@#&	term.clear()!@#&!@#&	for i = 1, 100 do!@#&		local x = math.random(screenWidth)!@#&		local y = math.random(screenHeight)!@#&		term.setCursorPos(x, y)!@#&		write(\".\")!@#&	end!@#&end!@#&!@#&function drawBattle()!@#&	while true do!@#&		if (laserPhase > 0) then!@#&			if (laserPhase ~= 1) then!@#&				term.setBackgroundColor(colors.black)!@#&				term.setTextColor(colors.red)!@#&				for x = x1 + pShip.laserx + 2, x2 + eShip.laserx - 2 do!@#&					term.setCursorPos(x, math.ceil((pShip.lasery + eShip.lasery) / 2))!@#&					write(string.char(131))!@#&				end!@#&			else!@#&				term.setBackgroundColor(colors.black)!@#&				term.setTextColor(colors.black)!@#&				for x = x1 + pShip.laserx + 2, x2 + eShip.laserx - 2 do!@#&					term.setCursorPos(x, math.ceil((pShip.lasery + eShip.lasery) / 2))!@#&					write(\" \")!@#&				end!@#&			end!@#&			laserPhase = laserPhase - 1!@#&		end!@#&!@#&		term.setBackgroundColor(colors.black)!@#&		term.setTextColor(colors.white)!@#&		term.setCursorPos(math.floor(screenWidth / 2) - 1, 8)!@#&!@#&		if (miss > 0) then!@#&			write(\"Miss\")!@#&			miss = miss - 1!@#&		else!@#&			write(\"    \")!@#&		end!@#&!@#&		term.setBackgroundColor(colors.lightBlue)!@#&		term.setTextColor(colors.blue)!@#&		for i = 1, 20 do!@#&			term.setCursorPos(i, screenHeight)!@#&			if (i <= pShip.wCooldown) then!@#&				write(\"=\")!@#&			else!@#&				paintutils.drawPixel(i, screenHeight, colors.black)!@#&			end!@#&		end!@#&		for roomNr, room in pairs(pShip.rooms) do!@#&			if (room.rType == \"weapons\") then!@#&				for i = 1, room.level - room.damage do!@#&					pShip.wCooldown = pShip.wCooldown + 0.125!@#&				end!@#&			end!@#&		end!@#&!@#&		term.setBackgroundColor(colors.lightBlue)!@#&		term.setTextColor(colors.blue)!@#&		for i = 1, 20 do!@#&			term.setCursorPos(screenWidth + 1 - i, screenHeight)!@#&			if (i <= eShip.wCooldown) then!@#&				write(\"=\")!@#&			else!@#&				paintutils.drawPixel(screenWidth + 1 - i, screenHeight, colors.black)!@#&			end!@#&		end!@#&		for roomNr, room in pairs(eShip.rooms) do!@#&			if (room.rType == \"weapons\") then!@#&				for i = 1, room.level - room.damage do!@#&					eShip.wCooldown = eShip.wCooldown + 0.125!@#&				end!@#&			end!@#&		end!@#&!@#&		for fNr, fire in pairs(pShip.fire) do!@#&			if (tick == 0) then!@#&				fType = 187!@#&				if (fire.x % 2 ~= fire.y % 2) then!@#&					fType = 127!@#&				end!@#&			else!@#&				fType = 127!@#&				if (fire.x % 2 ~= fire.y % 2) then!@#&					fType = 187!@#&				end!@#&			end!@#&			term.setCursorPos(x1 + fire.x, y1 + fire.y)!@#&			term.setBackgroundColor(colors.red)!@#&			term.setTextColor(colors.orange)!@#&			write(string.char(fType))!@#&		end!@#&!@#&		for fNr, fire in pairs(eShip.fire) do!@#&			if (tick == 0) then!@#&				fType = 171!@#&				if (fire.x % 2 ~= fire.y % 2) then!@#&					fType = 127!@#&				end!@#&			else!@#&				fType = 127!@#&				if (fire.x % 2 ~= fire.y % 2) then!@#&					fType = 171!@#&				end!@#&			end!@#&			term.setCursorPos(x2 + fire.x, y2 + fire.y)!@#&			term.setBackgroundColor(colors.red)!@#&			term.setTextColor(colors.orange)!@#&			write(string.char(fType))!@#&		end!@#&!@#&		if (tick == 0) then!@#&			tick = 1!@#&		else!@#&			tick = 0!@#&		end!@#&!@#&		sleep(0.1)!@#&	end!@#&end!@#&!@#&function drawHullBarPlayer(x, y, value, max)!@#&	term.setTextColor(colors.gray)!@#&	for i = x, max do!@#&		term.setCursorPos(i, y)!@#&		if (value >= i) then!@#&			term.setBackgroundColor(colors.lime)!@#&		else!@#&			term.setBackgroundColor(colors.red)!@#&		end!@#&		write(\"L\")!@#&	end!@#&end!@#&!@#&function drawHullBarEnemy(x, y, value, max)!@#&	term.setTextColor(colors.gray)!@#&	for i = 1, max do!@#&		term.setCursorPos(x - i + 1, y)!@#&		if (value >= i) then!@#&			term.setBackgroundColor(colors.lime)!@#&		else!@#&			term.setBackgroundColor(colors.red)!@#&		end!@#&		write(\"L\")!@#&	end!@#&end!@#&!@#&function drawBattleScreen()!@#&	drawHullBarPlayer(1, 1, pShip.hull, pShip.maxHull)!@#&	term.setTextColor(colors.gray)!@#&!@#&	local shieldRoomNr = -1!@#&	for roomNr2, room2 in pairs(pShip.rooms) do!@#&		if (room2.rType == \"shields\") then!@#&			shieldRoomNr = roomNr2!@#&		end!@#&	end!@#&	if (shieldRoomNr > 0) then!@#&		for i = 1, pShip.rooms[shieldRoomNr].level do!@#&			term.setCursorPos((i - 1) * 4 + 1, 2)!@#&			if (pShip.rooms[shieldRoomNr].level - pShip.rooms[shieldRoomNr].damage >= i) then!@#&				term.setBackgroundColor(colors.lightBlue)!@#&			else!@#&				term.setBackgroundColor(colors.blue)!@#&			end!@#&			write(\"___|\")!@#&		end!@#&		paintutils.drawLine(16, 4, 16, 9, colors.lightBlue)!@#&	else!@#&		paintutils.drawLine(16, 4, 16, 9, colors.black)!@#&	end!@#&!@#&	drawHullBarEnemy(screenWidth, 1, eShip.hull, eShip.maxHull)!@#&	term.setTextColor(colors.gray)!@#&!@#&	local shieldRoomNr = -1!@#&	for roomNr2, room2 in pairs(eShip.rooms) do!@#&		if (room2.rType == \"shields\") then!@#&			shieldRoomNr = roomNr2!@#&		end!@#&	end!@#&	if (shieldRoomNr > 0) then!@#&		for i = 1, eShip.rooms[shieldRoomNr].level do!@#&			term.setCursorPos(screenWidth - i * 4 + 1, 2)!@#&			if (eShip.rooms[shieldRoomNr].level - eShip.rooms[shieldRoomNr].damage >= i) then!@#&				term.setBackgroundColor(colors.lightBlue)!@#&			else!@#&				term.setBackgroundColor(colors.blue)!@#&			end!@#&			write(\"___|\")!@#&		end!@#&	end!@#&!@#&	paintutils.drawImage(pShip.image, x1, y1)!@#&	for roomNr, room in pairs(pShip.rooms) do!@#&		local color = colors.white!@#&		if (math.floor(room.x % 6 / 3) ~= math.floor(room.y % 4 / 2)) then!@#&			color = colors.lightGray!@#&		end!@#&!@#&		!@#&		term.setCursorPos(x1 + room.x + 1, y1 + room.y)!@#&		term.setBackgroundColor(colors.black)!@#&		term.setTextColor(colors.white)!@#&!@#&		local barY = 0!@#&!@#&		if (room.rType == \"controll\") then!@#&			write(\"C\")!@#&			barY = screenHeight - 1!@#&		elseif (room.rType == \"weapons\") then!@#&			write(\"W\")!@#&			barY = screenHeight - 2!@#&		elseif (room.rType == \"shields\") then!@#&			write(\"S\")!@#&			barY = screenHeight - 3!@#&		else!@#&			write(\"?\")!@#&		end!@#&!@#&		term.setTextColor(colors.gray)!@#&		for i = 1, room.level do!@#&			if (i <= room.level - room.damage) then!@#&				term.setBackgroundColor(colors.lime)!@#&			else!@#&				term.setBackgroundColor(colors.red)!@#&			end!@#&			term.setCursorPos(1 + i, barY - 1)!@#&			write(\"L\")!@#&		end!@#&	end!@#&!@#&	paintutils.drawImage(eShip.image, x2, y2)!@#&	for roomNr, room in pairs(eShip.rooms) do!@#&		local color = colors.white!@#&		if (math.floor(room.x % 6 / 3) ~= math.floor(room.y % 4 / 2)) then!@#&			color = colors.lightGray!@#&		end!@#&		!@#&		!@#&		if (target == roomNr) then!@#&			term.setCursorPos(x2 + room.x + 1, y2 + room.y + 1)!@#&			if (repeatShot == false) then!@#&				term.setTextColor(colors.red)!@#&			else!@#&				term.setTextColor(colors.orange)!@#&			end!@#&			write(string.char(174))!@#&		end!@#&!@#&		term.setCursorPos(x2 + room.x + 1, y2 + room.y)!@#&		term.setBackgroundColor(colors.black)!@#&		term.setTextColor(colors.white)!@#&		!@#&		if (room.rType == \"controll\") then!@#&			write(\"C\")!@#&			barY = screenHeight - 1!@#&		elseif (room.rType == \"weapons\") then!@#&			write(\"W\")!@#&			barY = screenHeight - 2!@#&		elseif (room.rType == \"shields\") then!@#&			write(\"S\")!@#&			barY = screenHeight - 3!@#&		else!@#&			write(\"?\")!@#&		end!@#&!@#&		term.setTextColor(colors.gray)!@#&		for i = 1, room.level do!@#&			if (i <= room.level - room.damage) then!@#&				term.setBackgroundColor(colors.lime)!@#&			else!@#&				term.setBackgroundColor(colors.red)!@#&			end!@#&			term.setCursorPos(screenWidth - i, barY - 1)!@#&			write(\"L\")!@#&		end!@#&	end!@#&!@#&	term.setBackgroundColor(colors.white)!@#&	term.setTextColor(colors.black)!@#&!@#&	term.setCursorPos(1, screenHeight - 2)!@#&	write(\"C\")!@#&	term.setCursorPos(1, screenHeight - 3)!@#&	write(\"W\")!@#&	term.setCursorPos(1, screenHeight - 4)!@#&	write(\"S\")!@#&!@#&	term.setCursorPos(screenWidth, screenHeight - 2)!@#&	write(\"C\")!@#&	term.setCursorPos(screenWidth, screenHeight - 3)!@#&	write(\"W\")!@#&	term.setCursorPos(screenWidth, screenHeight - 4)!@#&	write(\"S\")!@#&end!@#&!@#&function playerShooting()!@#&	while true do!@#&		if (pShip.wCooldown >= 20) then!@#&			if (target ~= -1) then!@#&				local roomNr = target!@#&				local room = eShip.rooms[roomNr]!@#&!@#&				local evasion = 0!@#&				for roomNr2, room2 in pairs(eShip.rooms) do!@#&					if (room2.rType == \"controll\") then!@#&						evasion = (room2.level - room2.damage) * 0.05!@#&					end!@#&				end!@#&!@#&				local dDamage = 0!@#&				for roomNr2, room2 in pairs(pShip.rooms) do!@#&					if (room2.rType == \"weapons\") then!@#&						dDamage = math.ceil((room2.level - room2.damage) / 2)!@#&					end!@#&				end!@#&!@#&				local shieldL = 0!@#&				local shieldRoomNr = -1!@#&				for roomNr2, room2 in pairs(eShip.rooms) do!@#&					if (room2.rType == \"shields\") then!@#&						shieldL = room2.level - room2.damage!@#&						shieldRoomNr = roomNr2!@#&					end!@#&				end!@#&!@#&				if (math.random() > evasion) then!@#&					if (shieldL <= 0) then!@#&						eShip.hull = eShip.hull - dDamage!@#&						room.damage = room.damage + 1!@#&					else!@#&						if (dDamage >= 2) then!@#&							eShip.rooms[shieldRoomNr].damage = eShip.rooms[shieldRoomNr].damage + 1!@#&						end!@#&					end!@#&				else!@#&					miss = missTime!@#&				end!@#&				laserPhase = 2!@#&				pShip.wCooldown = 0!@#&!@#&				if (repeatShot == false) then!@#&					target = -1!@#&				end!@#&			end!@#&		end!@#&		!@#&		drawBattleScreen()!@#&!@#&		sleep(0.2)!@#&	end!@#&end!@#&!@#&function battlePlayer()!@#&	while true do!@#&		drawBattleScreen()!@#&!@#&		local event, button, X, Y = os.pullEventRaw(\"mouse_click\")!@#&		!@#&		local hit = false!@#&!@#&		for roomNr, room in pairs(eShip.rooms) do!@#&			if (X >= x2 + room.x and X <= x2 + room.x + 2) then!@#&				if (Y == y2 + room.y or Y == y2 + room.y + 1) then!@#&					target = roomNr!@#&					if (button == 1) then!@#&						repeatShot = false!@#&					else!@#&						repeatShot = true!@#&					end!@#&					hit = true!@#&				end!@#&			end!@#&		end!@#&!@#&		if (hit == false) then!@#&			target = -1!@#&		end!@#&	end!@#&end!@#&!@#&function battleAI()!@#&	while true do!@#&		if (eShip.wCooldown >= 20) then!@#&			local room = pShip.rooms[math.ceil(math.random(table.getn(pShip.rooms)))]!@#&!@#&			local evasion = 0!@#&			for roomNr2, room2 in pairs(pShip.rooms) do!@#&				if (room2.rType == \"controll\") then!@#&					evasion = (room2.level - room2.damage) * 0.05!@#&				end!@#&			end!@#&!@#&			local dDamage = 0!@#&			for roomNr2, room2 in pairs(eShip.rooms) do!@#&				if (room2.rType == \"weapons\") then!@#&					dDamage = math.ceil((room2.level - room2.damage) / 2)!@#&				end!@#&			end!@#&!@#&			local shieldL = 0!@#&			local shieldRoomNr = -1!@#&			for roomNr2, room2 in pairs(pShip.rooms) do!@#&				if (room2.rType == \"shields\") then!@#&					shieldL = room2.level - room2.damage!@#&					shieldRoomNr = roomNr2!@#&				end!@#&			end!@#&!@#&			if (math.random() > evasion) then!@#&				if (shieldL <= 0) then!@#&					pShip.hull = pShip.hull - dDamage!@#&					room.damage = room.damage + 1!@#&				else!@#&					if (dDamage >= 2) then!@#&						pShip.rooms[shieldRoomNr].damage = pShip.rooms[shieldRoomNr].damage + 1!@#&					end!@#&				end!@#&			else!@#&				miss = missTime!@#&			end!@#&			laserPhase = 2!@#&			eShip.wCooldown = 0!@#&		end!@#&!@#&		drawBattleScreen()!@#&!@#&		if (eShip.hull <= 0) then!@#&			sleep(0.5)!@#&			paintutils.drawImage(eShip.image_broken, x2, y2 - 1)!@#&			break!@#&		end!@#&!@#&		if (pShip.hull <= 0) then!@#&			break!@#&		end!@#&!@#&		sleep(1)!@#&	end!@#&end!@#&!@#&function repair()!@#&	while true do!@#&		for roomNr, room in pairs(pShip.rooms) do!@#&			if (room.damage > 0) then!@#&				room.repair = room.repair + 1!@#&				if (room.repair > 5 * 20) then!@#&					room.repair = 0!@#&					room.damage = room.damage - 1!@#&				end!@#&			end!@#&		end!@#&!@#&		for roomNr, room in pairs(eShip.rooms) do!@#&			if (room.damage > 0) then!@#&				room.repair = room.repair + 1!@#&				if (room.repair > 5 * 20) then!@#&					room.repair = 0!@#&					room.damage = room.damage - 1!@#&				end!@#&			end!@#&		end!@#&!@#&		sleep(0.2)!@#&	end!@#&end!@#&!@#&function setShipPlayer(ship)!@#&	pShip = deepCopy(ship)!@#&	pShip.hull = pShip.maxHull!@#&end!@#&!@#&function setShipAI(tier)!@#&	local eShipType = math.random(1, 5) + 5 * (tier - 1)!@#&	eShip = deepCopy(eShips[eShipType])!@#&	eShip.hull = eShip.maxHull!@#&end!@#&!@#&function battle(tier)!@#&	setShipAI(tier)!@#&	for roomNr, room in pairs(pShip.rooms) do!@#&		room.damage = 0!@#&	end!@#&	target = -1!@#&!@#&	drawSpaceBackground()!@#&	parallel.waitForAny(battlePlayer, battleAI, drawBattle, repair, playerShooting)!@#&!@#&	if (eShip.hull <= 0) then!@#&		sleep(0.5)!@#&		!@#&		term.setTextColor(colors.lime)!@#&!@#&		term.setCursorPos(5, 4)!@#&		write(\"The enemy has been defeated.\")!@#&!@#&		term.setCursorPos(5, 5)!@#&		write(\"You try to find some scrap.\")!@#&!@#&		term.setCursorPos(5, 7)!@#&		write(\"You found some scrap: \"..scrapSymbol..\" \"..math.ceil(eShip.maxHull * 1.3))!@#&!@#&		if (getRoomLevel(\"controll\", \"player\") > 0 and math.random(1, 15) <= 1) then!@#&			term.setCursorPos(5, 9)!@#&			write(\"You found an upgrade for the Controll room.\")!@#&			upgrade(\"controll\")!@#&		elseif (getRoomLevel(\"weapons\", \"player\") > 0 and math.random(1, 14) <= 1) then!@#&			term.setCursorPos(5, 9)!@#&			write(\"You found an upgrade for the Weapons room.\")!@#&			upgrade(\"weapons\")!@#&		end!@#&!@#&		scrap = scrap + math.ceil(eShip.maxHull * 1.3)!@#&		score = score + 5 * tier!@#&!@#&		loadInfo()!@#&		killCount = killCount + 1!@#&		saveInfo()!@#&!@#&		sleep(0.5)!@#&		os.pullEventRaw()!@#&	end!@#&end!@#&!@#&function generateWorld()!@#&	world = {}!@#&	for x = -49, 51 do!@#&		local colomn = {}!@#&		for y = -49, 51 do!@#&			local random = math.random(0, 10)!@#&			local cInfo!@#&!@#&			if (random == 10) then!@#&				local fuelForSale = 4 + math.random(1, 4)!@#&				cInfo = {3, {fuelForSale, math.random(-1, 2), math.random(-1, 2), math.random(-1, 2)}}!@#&			elseif (random >= 4) then!@#&				cInfo = 2!@#&			else!@#&				cInfo = 0!@#&			end!@#&!@#&			colomn[y + 50] = cInfo!@#&		end!@#&		world[x + 50] = colomn!@#&	end!@#&end!@#&!@#&function drawWorld()!@#&	drawSpaceBackground()!@#&	term.setTextColor(colors.black)!@#&!@#&	for x = playerX - 4, playerX + 4 do!@#&		for y = playerY - 2, playerY + 2 do!@#&			local cInfo = world[x + 50][y + 50]!@#&!@#&			local cType = 0!@#&			if (type(cInfo) == \"table\") then!@#&				cType = cInfo[1]!@#&			else!@#&				cType = cInfo!@#&			end!@#&!@#&			if (x == playerX and y == playerY) then!@#&				term.setBackgroundColor(colors.white)!@#&			else!@#&				if (cType == 0) then!@#&					term.setBackgroundColor(colors.gray)!@#&				elseif (cType == 1) then!@#&					term.setBackgroundColor(colors.lime)!@#&				elseif (cType == 2) then!@#&					term.setBackgroundColor(colors.red)!@#&				elseif (cType == 3) then!@#&					term.setBackgroundColor(colors.blue)!@#&				end!@#&			end!@#&!@#&			term.setCursorPos(math.ceil(screenWidth / 2) + (x - playerX) * 6 - 1, math.ceil(screenHeight / 2) + (y - playerY) * 4 - 1)!@#&			write(\"   \")!@#&			term.setCursorPos(math.ceil(screenWidth / 2) + (x - playerX) * 6 - 1, math.ceil(screenHeight / 2) + (y - playerY) * 4)!@#&			write(\"   \")!@#&			term.setCursorPos(math.ceil(screenWidth / 2) + (x - playerX) * 6 - 1	, math.ceil(screenHeight / 2) + (y - playerY) * 4 + 1)!@#&			write(\"   \")!@#&		end!@#&	end!@#&!@#&	drawHullBarPlayer(1, 1, pShip.hull, pShip.maxHull)!@#&!@#&	term.setBackgroundColor(colors.gray)!@#&	term.setTextColor(colors.lime)!@#&!@#&	term.setCursorPos(screenWidth - string.len(\"Scrap: \"..scrapSymbol..\" \"..scrap) + 1, 1)!@#&	write(\"Scrap: \"..scrapSymbol..\" \"..scrap)!@#&!@#&	term.setCursorPos(screenWidth - string.len(\"Fuel: \"..fuel) + 1, 2)!@#&	write(\"Fuel: \"..fuel)!@#&!@#&	term.setCursorPos(1, screenHeight)!@#&	write(\"Save and exit\")!@#&end!@#&!@#&function move()!@#&	drawWorld()!@#&	while true do!@#&		local event, button, X, Y = os.pullEventRaw(\"mouse_click\")!@#&!@#&		if (button == 1) then!@#&			if (X >= math.ceil(screenWidth / 2) - 6 - 1 and X < math.ceil(screenWidth / 2) - 6 - 1 + 3) then!@#&				if (Y >= math.ceil(screenHeight / 2) - 1 and Y <= math.ceil(screenHeight / 2) - 1 + 3) then!@#&					local cInfo = world[playerX + 50][playerY + 50]!@#&!@#&					if (type(cInfo) ~= \"table\") then!@#&						if (cInfo ~= 3) then!@#&							world[playerX + 50][playerY + 50] = 1!@#&						end!@#&					end!@#&!@#&					playerX = playerX - 1!@#&					break!@#&				end!@#&			elseif (X >= math.ceil(screenWidth / 2) - 1 and X < math.ceil(screenWidth / 2) - 1 + 3) then!@#&				if (Y >= math.ceil(screenHeight / 2) - 4 - 1 and Y <= math.ceil(screenHeight / 2) - 4 - 1 + 3) then!@#&					local cInfo = world[playerX + 50][playerY + 50]!@#&!@#&					if (type(cInfo) ~= \"table\") then!@#&						if (cInfo ~= 3) then!@#&							world[playerX + 50][playerY + 50] = 1!@#&						end!@#&					end!@#&!@#&					playerY = playerY - 1!@#&					break!@#&				elseif (Y >= math.ceil(screenHeight / 2) + 4 - 1 and Y <= math.ceil(screenHeight / 2) + 4 - 1 + 3) then!@#&					local cInfo = world[playerX + 50][playerY + 50]!@#&!@#&					if (type(cInfo) ~= \"table\") then!@#&						if (cInfo ~= 3) then!@#&							world[playerX + 50][playerY + 50] = 1!@#&						end!@#&					end!@#&!@#&					playerY = playerY + 1!@#&					break!@#&				end!@#&			elseif (X >= math.ceil(screenWidth / 2) + 6 - 1 and X < math.ceil(screenWidth / 2) + 6 - 1 + 3) then!@#&				if (Y >= math.ceil(screenHeight / 2) - 1 and Y <= math.ceil(screenHeight / 2) - 1 + 3) then!@#&					local cInfo = world[playerX + 50][playerY + 50]!@#&!@#&					if (type(cInfo) ~= \"table\") then!@#&						if (cInfo ~= 3) then!@#&							world[playerX + 50][playerY + 50] = 1!@#&						end!@#&					end!@#&!@#&					playerX = playerX + 1!@#&					break!@#&				end!@#&			elseif (Y == screenHeight and X <= string.len(\"Save and exit\")) then!@#&				saveGame()!@#&				stop = true!@#&				break!@#&			end!@#&		end!@#&	end!@#&	fuel = fuel - 1!@#&end!@#&!@#&function upgradePrice(room)!@#&	local level = getRoomLevel(room, \"player\")!@#&	if (room == \"shields\") then!@#&		level = level * 5!@#&	end!@#&	local price = math.floor(5 + 0.7 * level ^ 2)!@#&	return price!@#&end!@#&!@#&function upgrade(roomT)!@#&	for roomNr, room in pairs(pShip.rooms) do!@#&		if (room.rType == roomT) then!@#&			room.level = room.level + 1!@#&			break!@#&		end!@#&	end!@#&end!@#&!@#&function getRoomLevel(roomT, ship)!@#&	local level = 0!@#&!@#&	if (ship == \"player\") then!@#&		for roomNr, room in pairs(pShip.rooms) do!@#&			if (room.rType == roomT) then!@#&				level = room.level - room.damage!@#&				break!@#&			end!@#&		end!@#&	elseif (ship == \"enemy\") then!@#&		for roomNr, room in pairs(eShip.rooms) do!@#&			if (room.rType == roomT) then!@#&				level = room.level - room.damage!@#&				break!@#&			end!@#&		end!@#&	end!@#&!@#&	return level!@#&end!@#&!@#&function drawNiceBorder(x1, y1, x2, y2, bg, fg)!@#&	--paintutils.drawFilledBox(x1 + 1, y1 + 1, x2 - 1, y2 - 1, colors.gray)!@#&!@#&	for i = x1 + 1, x2 - 1 do!@#&		term.setBackgroundColor(bg)!@#&		term.setTextColor(fg)!@#&		term.setCursorPos(i, y1)!@#&		write(string.char(131))!@#&	end!@#&	for i = x1 + 1, x2 - 1 do!@#&		term.setBackgroundColor(fg)!@#&		term.setTextColor(bg)!@#&		term.setCursorPos(i, y2)!@#&		write(string.char(143))!@#&	end!@#&	for i = y1 + 1, y2 - 1 do!@#&		term.setBackgroundColor(bg)!@#&		term.setTextColor(fg)!@#&		term.setCursorPos(x1, i)!@#&		write(string.char(149))!@#&	end!@#&	for i = y1 + 1, y2 - 1 do!@#&		term.setBackgroundColor(fg)!@#&		term.setTextColor(bg)!@#&		term.setCursorPos(x2, i)!@#&		write(string.char(149))!@#&	end!@#&!@#&	term.setCursorPos(x1, y1)!@#&	term.setBackgroundColor(bg)!@#&	term.setTextColor(fg)!@#&	write(string.char(151))!@#&!@#&	term.setCursorPos(x1, y2)!@#&	term.setBackgroundColor(fg)!@#&	term.setTextColor(bg)!@#&	write(string.char(138))!@#&!@#&	term.setCursorPos(x2, y1)!@#&	term.setBackgroundColor(fg)!@#&	term.setTextColor(bg)!@#&	write(string.char(148))!@#&!@#&	term.setCursorPos(x2, y2)!@#&	term.setBackgroundColor(fg)!@#&	term.setTextColor(bg)!@#&	write(string.char(133))!@#&end!@#&!@#&function drawBorder(close)!@#&	drawNiceBorder(4, 3, screenWidth - 3, screenHeight - 2, colors.gray, colors.lime)!@#&!@#&	if (close) then!@#&		term.setBackgroundColor(colors.red)!@#&		term.setTextColor(colors.white)!@#&		term.setCursorPos(screenWidth - 3, 3)!@#&		write(\"X\")!@#&	end!@#&end!@#&!@#&function drawShop(fuelForSale, c, w, s)!@#&	term.setBackgroundColor(colors.gray)!@#&	term.setTextColor(colors.lime)!@#&	!@#&	term.setCursorPos(5, 4)!@#&	write(\"Shop:\")!@#&!@#&	term.setCursorPos(5, 6)!@#&	write(\"Fuel: \"..fuelForSale..\" (\"..scrapSymbol..\" 2)\")!@#&!@#&	term.setCursorPos(5, 8)!@#&	write(\"Repair: 1 (\"..scrapSymbol..\" 1)\")!@#&!@#&	local x = 5!@#&!@#&	if (c <= 0 and getRoomLevel(\"controll\", \"player\") > 0) then!@#&		term.setBackgroundColor(colors.gray)!@#&		term.setTextColor(colors.lime)!@#&		term.setCursorPos(x, 11)!@#&		write(\"Controll\")!@#&		term.setCursorPos(x, 13)!@#&		write(scrapSymbol..\" \"..upgradePrice(\"controll\"))!@#&		term.setCursorPos(x, 14)!@#&		write(\"Current:\"..getRoomLevel(\"controll\", \"player\"))!@#&!@#&		term.setBackgroundColor(colors.lime)!@#&		term.setTextColor(colors.black)!@#&		term.setCursorPos(x, 12)!@#&		write(\"[Upgrade]\")!@#&		x = x + 10!@#&	end!@#&!@#&	if (w <= 0 and getRoomLevel(\"weapons\", \"player\") > 0) then!@#&		term.setBackgroundColor(colors.gray)!@#&		term.setTextColor(colors.lime)!@#&		term.setCursorPos(x, 11)!@#&		write(\"Weapons\")!@#&		term.setCursorPos(x, 13)!@#&		write(scrapSymbol..\" \"..upgradePrice(\"weapons\"))!@#&		term.setCursorPos(x, 14)!@#&		write(\"Current:\"..getRoomLevel(\"weapons\", \"player\"))!@#&!@#&		term.setBackgroundColor(colors.lime)!@#&		term.setTextColor(colors.black)!@#&		term.setCursorPos(x, 12)!@#&		write(\"[Upgrade]\")!@#&		x = x + 10!@#&	end!@#&!@#&	if (s <= 0 and getRoomLevel(\"shields\", \"player\") > 0) then!@#&		term.setBackgroundColor(colors.gray)!@#&		term.setTextColor(colors.lime)!@#&		term.setCursorPos(x, 11)!@#&		write(\"Shields\")!@#&		term.setCursorPos(x, 13)!@#&		write(scrapSymbol..\" \"..upgradePrice(\"shields\"))!@#&		term.setCursorPos(x, 14)!@#&		write(\"Current:\"..getRoomLevel(\"shields\", \"player\"))!@#&!@#&		term.setBackgroundColor(colors.lime)!@#&		term.setTextColor(colors.black)!@#&		term.setCursorPos(x, 12)!@#&		write(\"[Upgrade]\")!@#&		x = x + 10!@#&	end!@#&!@#&	term.setBackgroundColor(colors.lime)!@#&	term.setTextColor(colors.black)!@#&!@#&	term.setCursorPos(5, 7)!@#&	write(\"[ BUY ]\")!@#&!@#&	term.setCursorPos(5, 9)!@#&	write(\"[ BUY ]\")!@#&!@#&	drawHullBarPlayer(1, 1, pShip.hull, pShip.maxHull)!@#&!@#&	term.setBackgroundColor(colors.gray)!@#&	term.setTextColor(colors.lime)!@#&!@#&	term.setCursorPos(screenWidth - string.len(\"Fuel: \"..fuel), 2)!@#&	write(\" Fuel: \"..fuel)!@#&!@#&	term.setCursorPos(screenWidth - string.len(\"Scrap: \"..scrapSymbol..\" \"..scrap), 1)!@#&	write(\" Scrap: \"..scrapSymbol..\" \"..scrap)!@#&end!@#&!@#&function shop(shopInfo)!@#&	drawBorder(true)!@#&!@#&	while true do!@#&		drawShop(shopInfo[1], shopInfo[2], shopInfo[3], shopInfo[4])!@#&!@#&		local event, button, X, Y = os.pullEventRaw(\"mouse_click\")!@#&!@#&		if (button == 1) then!@#&			if (X >= 5 and X <= 11 and Y == 7) then!@#&				if (scrap >= 2 and shopInfo[1] >= 1) then!@#&					scrap = scrap - 2!@#&					fuel = fuel + 1!@#&					shopInfo[1] = shopInfo[1] - 1!@#&				end!@#&			elseif (X >= 5 and X <= 11 and Y == 9) then!@#&				if (scrap >= 1) then!@#&					if (pShip.hull < pShip.maxHull) then!@#&						scrap = scrap - 1!@#&						pShip.hull = pShip.hull + 1!@#&					end!@#&				end!@#&			elseif (Y == 12) then!@#&				local spaces = {}!@#&!@#&				if (shopInfo[2] <= 0 and getRoomLevel(\"controll\", \"player\") > 0) then!@#&					table.insert(spaces, \"controll\")!@#&				end!@#&				if (shopInfo[3] <= 0 and getRoomLevel(\"weapons\", \"player\") > 0) then!@#&					table.insert(spaces, \"weapons\")!@#&				end!@#&				if (shopInfo[4] <= 0 and getRoomLevel(\"shields\", \"player\") > 0) then!@#&					table.insert(spaces, \"shields\")!@#&				end!@#&!@#&				if (X >= 5 and X < 5 + 9) then!@#&					if (table.getn(spaces) >= 1) then!@#&						if (spaces[1] == \"controll\") then!@#&							if (scrap >= upgradePrice(spaces[1])) then!@#&								scrap = scrap - upgradePrice(spaces[1])!@#&								upgrade(spaces[1])!@#&							end!@#&						elseif (spaces[1] == \"weapons\") then!@#&							if (scrap >= upgradePrice(spaces[1])) then!@#&								scrap = scrap - upgradePrice(spaces[1])!@#&								upgrade(spaces[1])!@#&							end!@#&						elseif (spaces[1] == \"shields\") then!@#&							if (scrap >= upgradePrice(spaces[1])) then!@#&								scrap = scrap - upgradePrice(spaces[1])!@#&								upgrade(spaces[1])!@#&							end!@#&						end!@#&					end!@#&				elseif (X >= 5 + 10 and X < 5 + 9 + 10) then!@#&					if (table.getn(spaces) >= 2) then!@#&						if (spaces[2] == \"controll\") then!@#&							if (scrap >= upgradePrice(spaces[2])) then!@#&								scrap = scrap - upgradePrice(spaces[2])!@#&								upgrade(spaces[2])!@#&							end!@#&						elseif (spaces[2] == \"weapons\") then!@#&							if (scrap >= upgradePrice(spaces[2])) then!@#&								scrap = scrap - upgradePrice(spaces[2])!@#&								upgrade(spaces[2])!@#&							end!@#&						elseif (spaces[2] == \"shields\") then!@#&							if (scrap >= upgradePrice(spaces[2])) then!@#&								scrap = scrap - upgradePrice(spaces[2])!@#&								upgrade(spaces[2])!@#&							end!@#&						end!@#&					end!@#&				elseif (X >= 5 + 10 and X < 5 + 9 + 20) then!@#&					if (table.getn(spaces) >= 3) then!@#&						if (spaces[3] == \"controll\") then!@#&							if (scrap >= upgradePrice(spaces[3])) then!@#&								scrap = scrap - upgradePrice(spaces[3])!@#&								upgrade(spaces[3])!@#&							end!@#&						elseif (spaces[3] == \"weapons\") then!@#&							if (scrap >= upgradePrice(spaces[3])) then!@#&								scrap = scrap - upgradePrice(spaces[3])!@#&								upgrade(spaces[3])!@#&							end!@#&						elseif (spaces[3] == \"shields\") then!@#&							if (scrap >= upgradePrice(spaces[3])) then!@#&								scrap = scrap - upgradePrice(spaces[3])!@#&								upgrade(spaces[3])!@#&							end!@#&						end!@#&					end!@#&				end!@#&			elseif (X == screenWidth - 3) then!@#&				if (Y == 3) then!@#&					break!@#&				end!@#&			end!@#&		end!@#&	end!@#&end!@#&!@#&function gameLost()!@#&	fs.delete(\"/SpeedOS/Applications/GameBox/saveFile.sav\")!@#&!@#&	drawBorder(false)!@#&!@#&	term.setBackgroundColor(colors.gray)!@#&	term.setTextColor(colors.lime)!@#&	!@#&	term.setCursorPos(5, 4)!@#&	textutils.slowWrite(\"You have failed in your mission to save the\")!@#&	term.setCursorPos(5, 5)!@#&	textutils.slowWrite(\"universe...\")!@#&!@#&	term.setCursorPos(5, 7)!@#&	textutils.slowWrite(\"Your score is: \"..score)!@#&	sleep(0.5)!@#&	os.pullEventRaw()!@#&end!@#&!@#&function newGame(ship)!@#&	scrap = 0!@#&	fuel = 15!@#&	score = 0!@#&!@#&	generateWorld()!@#&	setShipPlayer(ship)!@#&end!@#&!@#&function saveGame()!@#&	local info = {scrap = scrap, fuel = fuel, score = score, playerX = playerX, playerY = playerY, world = world, pShip = pShip}!@#&!@#&	local file = fs.open(\"/SpeedOS/Applications/GameBox/saveFile.sav\", \"w\")!@#&	file.write(textutils.serialize(info))!@#&	file.close()!@#&end!@#&!@#&function loadGame()!@#&	local file = fs.open(\"/SpeedOS/Applications/GameBox/saveFile.sav\", \"r\")!@#&	local data = file.readAll()!@#&	file.close()!@#&	local info = textutils.unserialize(data)!@#&!@#&	scrap = info.scrap!@#&	fuel = info.fuel!@#&	score = info.score!@#&	playerX = info.playerX!@#&	playerY = info.playerY!@#&	world = info.world!@#&	pShip = info.pShip!@#&end!@#&!@#&function saveInfo()!@#&	local info = {unlockedShips = unlockedShips, killCount = killCount}!@#&!@#&	local file = fs.open(\"/SpeedOS/Applications/GameBox/info.sav\", \"w\")!@#&	file.write(textutils.serialize(info))!@#&	file.close()!@#&end!@#&!@#&function loadInfo()!@#&	if (fs.exists(\"/SpeedOS/Applications/GameBox/info.sav\")) then!@#&		local file = fs.open(\"/SpeedOS/Applications/GameBox/info.sav\", \"r\")!@#&		local data = file.readAll()!@#&		file.close()!@#&		local info = textutils.unserialize(data)!@#&!@#&		unlockedShips = info.unlockedShips!@#&		killCount = info.killCount!@#&	else!@#&		unlockedShips = {}!@#&		for shipNr, ship in pairs(pShips) do!@#&			if (shipNr == 1) then!@#&				unlockedShips[shipNr] = true!@#&			else!@#&				unlockedShips[shipNr] = false!@#&			end!@#&		end!@#&		killCount = 0!@#&	end!@#&end!@#&!@#&function unlock(shipNr)!@#&	loadInfo()!@#&	!@#&	if (unlockedShips[shipNr] == false) then!@#&		local width = 25!@#&		local height = 3!@#&		drawNiceBorder(screenWidth - width, 2, screenWidth - 1, height + 1, colors.gray, colors.lime)!@#&		!@#&		term.setBackgroundColor(colors.black)!@#&		term.setTextColor(colors.red)!@#&		term.setCursorPos(screenWidth - width + 1, 3)!@#&		write(string.char(187))!@#&!@#&		term.setBackgroundColor(colors.gray)!@#&		term.setTextColor(colors.lime)!@#&		term.setCursorPos(screenWidth - width + 1 + 2, 3)!@#&		write(\"New ship unlocked!\")!@#&!@#&		unlockedShips[shipNr] = true!@#&		saveInfo()!@#&!@#&		sleep(0.5)!@#&		os.pullEventRaw()!@#&	end!@#&end!@#&!@#&function play()!@#&	while true do!@#&		if (fuel >= 0 and pShip.hull > 0) then!@#&			move()!@#&			saveGame()!@#&!@#&			if (stop == true) then!@#&				stop = false!@#&				break!@#&			end!@#&!@#&			local cInfo = world[playerX + 50][playerY + 50]!@#&!@#&			local cType = 0!@#&			if (type(cInfo) == \"table\") then!@#&				cType = cInfo[1]!@#&			else!@#&				cType = cInfo!@#&			end!@#&!@#&			if (cType == 2) then!@#&				battle(math.floor(math.sqrt(math.abs(playerX) ^ 2 + math.abs(playerY) ^ 2) / 10) + 1)!@#&!@#&				loadInfo()!@#&				if (killCount >= 2) then!@#&					unlock(2)!@#&				end!@#&			elseif (cType == 3) then!@#&				shop(cInfo[2])!@#&			end!@#&		else!@#&			gameLost()!@#&			break!@#&		end!@#&	end!@#&end!@#&!@#&function startScene()!@#&	term.setBackgroundColor(colors.white)!@#&	term.clear()!@#&	sleep(0.5)!@#&	term.setBackgroundColor(colors.lightGray)!@#&	term.clear()!@#&	sleep(0.2)!@#&	term.setBackgroundColor(colors.gray)!@#&	term.clear()!@#&	sleep(0)!@#&	term.setBackgroundColor(colors.black)!@#&	term.clear()!@#&	sleep(1)!@#&!@#&	term.setTextColor(colors.lime)!@#&	local speed = 15!@#&!@#&	term.setCursorPos(2, 2)!@#&	textutils.slowWrite(\"An evil lord has taken over the universe...\", speed)!@#&	sleep(0.7)!@#&	term.setCursorPos(2, 3)!@#&	textutils.slowWrite(\"It's your duty to slay his troops and free the\", speed)!@#&	term.setCursorPos(2, 4)!@#&	textutils.slowWrite(\"citizens!\", speed)!@#&	sleep(0.5)!@#&	term.setCursorPos(2, 5)!@#&	textutils.slowWrite(\"We have prepared a spaceship for you.\", speed)!@#&	sleep(0.5)!@#&	term.setCursorPos(2, 7)!@#&	textutils.slowWrite(\"Good luck!\", speed)!@#&!@#&	os.pullEventRaw()!@#&end!@#&!@#&function drawHangar(ship)!@#&	drawSpaceBackground()!@#&!@#&	term.setBackgroundColor(colors.gray)!@#&	term.setTextColor(colors.lime)!@#&!@#&	term.setCursorPos(1, 1)!@#&	write(\"< Back\")!@#&!@#&	term.setCursorPos(8, 1)!@#&	write(ship.name)!@#&!@#&	term.setCursorPos(screenWidth - string.len(\"Start Game >\") + 1, 1)!@#&	write(\"Start Game >\")!@#&!@#&	term.setCursorPos(math.floor(screenWidth / 2) - math.floor(string.len(\"  <  \") / 2) + 1 - 3, screenHeight)!@#&	write(\"  <  \")!@#&!@#&	term.setCursorPos(math.floor(screenWidth / 2) - math.floor(string.len(\"  >  \") / 2) + 1 + 3, screenHeight)!@#&	write(\"  >  \")!@#&!@#&	drawHullBarPlayer(1, 3, ship.maxHull, ship.maxHull)!@#&!@#&	term.setBackgroundColor(colors.white)!@#&	term.setTextColor(colors.black)!@#&!@#&	term.setCursorPos(1, 5)!@#&	write(\"C\")!@#&	term.setCursorPos(1, 6)!@#&	write(\"W\")!@#&	term.setCursorPos(1, 7)!@#&	write(\"S\")!@#&!@#&	local newX = 18!@#&	local newY = 7!@#&	paintutils.drawImage(ship.image, newX, newY)!@#&	for roomNr, room in pairs(ship.rooms) do!@#&		local color = colors.white!@#&		if (math.floor(room.x % 6 / 3) ~= math.floor(room.y % 4 / 2)) then!@#&			color = colors.lightGray!@#&		end!@#&!@#&		!@#&		term.setCursorPos(newX + room.x + 1, newY + room.y)!@#&		term.setBackgroundColor(colors.black)!@#&		term.setTextColor(colors.white)!@#&!@#&		local barY = 0!@#&!@#&		if (room.rType == \"controll\") then!@#&			write(\"C\")!@#&			barY = 5!@#&		elseif (room.rType == \"weapons\") then!@#&			write(\"W\")!@#&			barY = 6!@#&		elseif (room.rType == \"shields\") then!@#&			write(\"S\")!@#&			barY = 7!@#&		else!@#&			write(\"?\")!@#&		end!@#&!@#&		term.setTextColor(colors.gray)!@#&		for i = 1, room.level do!@#&			if (i <= room.level - room.damage) then!@#&				term.setBackgroundColor(colors.lime)!@#&			else!@#&				term.setBackgroundColor(colors.red)!@#&			end!@#&			term.setCursorPos(1 + i, barY)!@#&			write(\"L\")!@#&		end!@#&	end!@#&end!@#&!@#&function hangar()!@#&	loadInfo()!@#&	local shipNr = 1!@#&!@#&	while true do!@#&		local ship = pShips[shipNr]!@#&		drawHangar(ship)!@#&!@#&		local event, button, X, Y = os.pullEventRaw(\"mouse_click\")!@#&!@#&		if (button == 1) then!@#&			if (Y == 1) then!@#&				if (X <= 6) then!@#&					break!@#&				elseif (X >= screenWidth - 11) then!@#&					newGame(ship)!@#&					startScene()!@#&					play()!@#&					break!@#&				end!@#&			elseif (Y == screenHeight) then!@#&				if (X >= math.floor(screenWidth / 2) - 5 + 1 and X < math.floor(screenWidth / 2) + 1) then!@#&					while true do!@#&						shipNr = shipNr - 1!@#&						if (shipNr < 1) then!@#&							shipNr = table.getn(pShips)!@#&						end!@#&!@#&						if (unlockedShips[shipNr]) then!@#&							break!@#&						end!@#&					end!@#&				elseif (X > math.floor(screenWidth / 2) + 1 and X <= math.floor(screenWidth / 2) + 5 + 1) then!@#&					while true do!@#&						shipNr = shipNr + 1!@#&						if (shipNr > table.getn(pShips)) then!@#&							shipNr = 1!@#&						end!@#&!@#&						if (unlockedShips[shipNr]) then!@#&							break!@#&						end!@#&					end!@#&				end!@#&			end!@#&		end!@#&	end!@#&end!@#&!@#&function mainMenu()!@#&	while true do!@#&		drawSpaceBackground()!@#&		term.setBackgroundColor(colors.gray)!@#&		!@#&		if (fs.exists(\"/SpeedOS/Applications/GameBox/saveFile.sav\")) then!@#&			term.setTextColor(colors.lime)!@#&		else!@#&			term.setTextColor(colors.lightGray)!@#&		end!@#&!@#&		term.setCursorPos(math.floor(screenWidth / 2) - math.floor(string.len(\"Continue\") / 2) + 1, 5)!@#&		write(\"Continue\")!@#&!@#&		term.setTextColor(colors.lime)!@#&!@#&		term.setCursorPos(math.floor(screenWidth / 2) - math.floor(string.len(\"New Game\") / 2) + 1, 7)!@#&		write(\"New Game\")!@#&!@#&		term.setCursorPos(math.floor(screenWidth / 2) - math.floor(string.len(\"Exit\") / 2) + 1, 9)!@#&		write(\"Exit\")!@#&!@#&		local event, button, X, Y = os.pullEventRaw(\"mouse_click\")!@#&!@#&		if (button == 1) then!@#&			if (Y == 5) then!@#&				if (X >= math.floor(screenWidth / 2) - math.floor(string.len(\"Continue\") / 2) + 1 and X < math.floor(screenWidth / 2) - math.floor(string.len(\"Continue\") / 2) + 1 + string.len(\"Continue\")) then!@#&					if (fs.exists(\"/SpeedOS/Applications/GameBox/saveFile.sav\")) then!@#&						loadGame()!@#&						play()!@#&					end!@#&				end!@#&			elseif (Y == 7) then!@#&				if (X >= math.floor(screenWidth / 2) - math.floor(string.len(\"New Game\") / 2) + 1 and X < math.floor(screenWidth / 2) - math.floor(string.len(\"New Game\") / 2) + 1 + string.len(\"New Game\")) then!@#&					hangar()!@#&				end!@#&			elseif (Y == 9) then!@#&				if (X >= math.floor(screenWidth / 2) - math.floor(string.len(\"Exit\") / 2) + 1 and X < math.floor(screenWidth / 2) - math.floor(string.len(\"Exit\") / 2) + 1 + string.len(\"Exit\")) then!@#&					term.clear()!@#&					break!@#&				end!@#&			end!@#&		end!@#&	end!@#&end!@#&!@#&mainMenu()",["eShip2.img"]="                eeeeeeee!@#&               e11   111!@#&                 1   1!@#&                 1   1!@#&               ee1   1ee!@#&                11111111",["scores"]="1.00!@#&0!@#&Notch!@#&1.00!@#&0!@#&Notch!@#&1.00!@#&0!@#&Notch!@#&1.00!@#&0!@#&Notch!@#&1.00!@#&0!@#&Notch!@#&1.00!@#&0!@#&Notch!@#&1.00!@#&0!@#&Notch!@#&1.00!@#&0!@#&Notch!@#&1.00!@#&0!@#&Notch!@#&1.00!@#&0!@#&Notch",["test2"]="local myWindow = window.create(term.current(),15,5,20,5)!@#&local x,y = myWindow.getSize()!@#&myWindow.setBackgroundColor(colors.gray)!@#&for i=1,x,1 do!@#&  myWindow.setCursorPos(i,1)!@#&  myWindow.write(\" \")!@#&  myWindow.setCursorPos(i,y)!@#&  myWindow.write(\" \")!@#&end!@#&for i=1,y,1 do!@#&  myWindow.setCursorPos(1,i)!@#&  myWindow.write(\" \")!@#&  myWindow.setCursorPos(x,i)!@#&  myWindow.write(\" \")!@#&end!@#&myWindow.setBackgroundColor(colors.black)!@#&myWindow.setCursorPos(2,2)!@#&--myWindow.write(\"hello\")!@#&term.redirect(myWindow)!@#&input = read()!@#&sleep(1)!@#&myWindow.reposition(20,10,myWindow.getSize())!@#&term.setCursorPos(3,3)!@#&term.write(\"goodbye\")!@#&sleep(1)!@#&term.redirect(term.native())!@#&term.clear()!@#&term.setCursorPos(1,1)!@#&term.write(\"hello\")",["pShip2.img"]="555ddd55!@#&d55   d555!@#& d5   5   5!@#& 55   5   d!@#&555   55dd!@#&dddddddd",["CookieCSave"]="191.0!@#&2.0!@#&1.0!@#&800.0!@#&0!@#&10000",["blackjack2"]="deck = {}!@#&newdeck = {}!@#&playerHand = {}!@#&dealerHand = {}!@#&!@#&content = !@#&{!@#&	main = !@#&	{!@#&		background = nil,!@#&		visible = false,!@#&		setBackground = function(path)!@#&			content.main.background = paintutils.loadImage(path)!@#&		end,!@#&		getBackground = function()!@#&			return content.main.background!@#&		end,!@#&		getPageContent = function()!@#&			return pageContent!@#&		end,!@#&		pageContent = !@#&		{!@#&			buttons = {},!@#&			labels = {},!@#&			dropDowns = {},!@#&			images = {},!@#&			getButtons = function()!@#&				return content.main.pageContent.buttons!@#&			end,!@#&			addButton = function(text,xpos,ypos,wid,high,c,tc,v,f)!@#&				content.main.pageContent.buttons[#content.main.pageContent.buttons+1] = !@#&									  {name = text,x = xpos,y = ypos!@#&									  ,width = wid,height = high,color = c!@#&									  ,textcolor = tc, visible = v, buttonFunction = f}!@#&				return #content.main.pageContent.buttons!@#&			end,!@#&			drawButton = function(index)!@#&					b = content.main.pageContent.buttons[index]!@#&				if(b.visible)then!@#&					drawing.fillArea(b.color,b.x,b.y,b.width,b.height)      !@#&					drawing.writeTextCentered(b.name,b.x,b.y,b.width,b.height,b.textcolor,b.color)!@#&				end!@#&			end,!@#&			getLabels = function()!@#&				return content.main.pageContent.labels!@#&			end,!@#&			addLabel = function(text,xpos,ypos,l,cent,c,tc)!@#&				content.main.pageContent.labels[#content.main.pageContent.labels+1] = !@#&									{name = text,x = xpos,y = ypos,labelLength = l,centered = cent,color = c,textcolor = tc}!@#&			end,!@#&			setLabelText = function(index,text)!@#&				content.main.pageContent.labels[index].name = text!@#&			end,!@#&			drawLabel = function(index)!@#&!@#&				b = content.main.pageContent.labels[index]!@#&				drawing.fillArea(b.color,b.x,b.y,b.labelLength,1)!@#&				if(b.centered)then!@#&					drawing.writeTextCentered(b.name,b.x,b.y,b.labelLength,1,b.textcolor,b.color)!@#&				else!@#&					drawing.writeText(b.name,b.x,b.y,b.textcolor,b.color)!@#&				end!@#&			end,!@#&			addImage = function(i,xpos,ypos)!@#&				content.main.pageContent.images[#content.main.pageContent.images+1] = {image = paintutils.loadImage(i),x = xpos,y = ypos}!@#&			end,!@#&			getImages = function()!@#&				return content.main.pageContent.images!@#&			end,!@#&			drawImage = function(index)!@#&				i=content.main.pageContent.images[index]!@#&				drawing.displayImage(i.image,i.x,i.y)!@#&			end,!@#&			addDropDown = function(n,xpos,ypos,l,c,tc,ddc,ddtc)!@#&				content.main.pageContent.dropDowns[#content.main.pageContent.dropDowns+1] = {name = n,x = xpos,y = ypos,dropDownLength = l,color = c,textColor = tc, dropDownColor = ddc,dropDownTextColor = ddtc,visible = false,elements = {}}!@#&			end,!@#&			addDropDownElement = function(index,n,f)!@#&				content.main.pageContent.dropDowns[index].elements[#content.main.pageContent.dropDowns[index].elements+1] = {name = n,elementFunction = f}!@#&			end,!@#&			drawDropDown = function(index)!@#&				d=content.main.pageContent.dropDowns[index]!@#&				drawing.fillArea(d.color,d.x,d.y,d.dropDownLength,1)!@#&				drawing.writeText(d.name,d.x,d.y,d.color,d.textColor)!@#&				drawing.fillArea(d.dropDownColor,d.x,d.y+1,d.dropDownLength,#content.page3.pageContent.dropDowns[index].elements)!@#&				if(visible)then!@#&					for i=1,#content.page3.pageContent.dropDowns[index].elements,1 do!@#&						drawing.writeText(d.elements[x].name,d.x,d.y+i,d.dropDownColor,d.dropDownTextColor)!@#&					end!@#&				end!@#&			end,!@#&			getDropDowns = function()!@#&				return content.main.pageContent.dropDowns!@#&			end!@#&		}!@#&		!@#&	},!@#&	options = !@#&	{!@#&		background = nil,!@#&		visible = false,!@#&		setBackground = function(path)!@#&			content.options.background = paintutils.loadImage(path)!@#&		end,!@#&		getBackground = function()!@#&			return content.options.background!@#&		end,!@#&		getPageContent = function()!@#&			return pageContent!@#&		end,!@#&		pageContent = !@#&		{!@#&			buttons = {},!@#&			labels = {},!@#&			dropDowns = {},!@#&			images = {},!@#&			getButtons = function()!@#&				return content.options.pageContent.buttons!@#&			end,!@#&			addButton = function(text,xpos,ypos,wid,high,c,tc,v,f)!@#&				content.options.pageContent.buttons[#content.options.pageContent.buttons+1] = !@#&									  {name = text,x = xpos,y = ypos!@#&									  ,width = wid,height = high,color = c!@#&									  ,textcolor = tc, visible = v, buttonFunction = f}!@#&				return #content.options.pageContent.buttons!@#&			end,!@#&			drawButton = function(index)!@#&					b = content.options.pageContent.buttons[index]!@#&				if(b.visible)then!@#&					drawing.fillArea(b.color,b.x,b.y,b.width,b.height)      !@#&					drawing.writeTextCentered(b.name,b.x,b.y,b.width,b.height,b.textcolor,b.color)!@#&				end!@#&			end,!@#&			getLabels = function()!@#&				return content.options.pageContent.labels!@#&			end,!@#&			addLabel = function(text,xpos,ypos,l,cent,c,tc)!@#&				content.options.pageContent.labels[#content.options.pageContent.labels+1] = !@#&									{name = text,x = xpos,y = ypos,labelLength = l,centered = cent,color = c,textcolor = tc}!@#&			end,!@#&			setLabelText = function(index,text)!@#&				content.options.pageContent.labels[index].name = text!@#&			end,!@#&			drawLabel = function(index)!@#&!@#&				b = content.options.pageContent.labels[index]!@#&				drawing.fillArea(b.color,b.x,b.y,b.labelLength,1)!@#&				if(b.centered)then!@#&					drawing.writeTextCentered(b.name,b.x,b.y,b.labelLength,1,b.textcolor,b.color)!@#&				else!@#&					drawing.writeText(b.name,b.x,b.y,b.textcolor,b.color)!@#&				end!@#&			end,!@#&			addImage = function(i,xpos,ypos)!@#&				content.options.pageContent.images[#content.options.pageContent.images+1] = {image = paintutils.loadImage(i),x = xpos,y = ypos}!@#&			end,!@#&			getImages = function()!@#&				return content.options.pageContent.images!@#&			end,!@#&			drawImage = function(index)!@#&				i=content.options.pageContent.images[index]!@#&				drawing.displayImage(i.image,i.x,i.y)!@#&			end,!@#&			addDropDown = function(n,xpos,ypos,l,c,tc,ddc,ddtc)!@#&				content.options.pageContent.dropDowns[#content.options.pageContent.dropDowns+1] = {name = n,x = xpos,y = ypos,dropDownLength = l,color = c,textColor = tc, dropDownColor = ddc,dropDownTextColor = ddtc,visible = false,elements = {}}!@#&			end,!@#&			addDropDownElement = function(index,n,f)!@#&				content.options.pageContent.dropDowns[index].elements[#content.options.pageContent.dropDowns[index].elements+1] = {name = n,elementFunction = f}!@#&			end,!@#&			drawDropDown = function(index)!@#&				d=content.options.pageContent.dropDowns[index]!@#&				drawing.fillArea(d.color,d.x,d.y,d.dropDownLength,1)!@#&				drawing.writeText(d.name,d.x,d.y,d.color,d.textColor)!@#&				drawing.fillArea(d.dropDownColor,d.x,d.y+1,d.dropDownLength,#content.page3.pageContent.dropDowns[index].elements)!@#&				if(visible)then!@#&					for i=1,#content.page3.pageContent.dropDowns[index].elements,1 do!@#&						drawing.writeText(d.elements[x].name,d.x,d.y+i,d.dropDownColor,d.dropDownTextColor)!@#&					end!@#&				end!@#&			end,!@#&			getDropDowns = function()!@#&				return content.options.pageContent.dropDowns!@#&			end!@#&		}!@#&	},!@#&	pages = {}!@#&}!@#&!@#&content.pages = !@#&	{!@#&		content.main,!@#&		content.options!@#&	}!@#&!@#&drawing = !@#&{!@#&	displayImage = function(image,x,y)!@#&		paintutils.drawImage(image,x,y)!@#&	end,!@#&	fillArea = function(color,xpos,ypos,wid,high)!@#&		term.setCursorPos(1,1)!@#&!@#&		term.setBackgroundColor(color)!@#&		for y=ypos,ypos+high-1,1 do!@#&			for x=xpos,xpos+wid-1,1 do!@#&				term.setCursorPos(x,y)!@#&				write(\" \")!@#&			end!@#&		end!@#&	end,!@#&	writeText = function(text,x,y,color,bgcolor)!@#&		term.setTextColor(color)!@#&		term.setBackgroundColor(bgcolor)!@#&		term.setCursorPos(x,y)!@#&		write(text)!@#&	end,!@#&	writeTextCentered = function(text,x,y,wid,high,color,bgcolor)!@#&		term.setCursorPos(x+(wid-#text)/2,y+high/2)!@#&		term.setTextColor(color)!@#&		term.setBackgroundColor(bgcolor)!@#&		term.write(text)!@#&	end,!@#&	clear = function()!@#&		term.setBackgroundColor(colors.black)!@#&		term.clear()!@#&		term.setCursorPos(1,1)!@#&	end!@#&}!@#&!@#&card = !@#&{!@#&	cards = {},!@#&	addCard = function(f,v,s)!@#&		card.cards[#card.cards+1] = {front = f, value = v, sign = s}!@#&	end,!@#&	drawCard = function(index,x,y)!@#&		--print(x..\"-\"..y)!@#&		if(card.cards[index].front)then!@#&			drawing.displayImage(paintutils.loadImage(\"cardFront\"),x,y)!@#&			if(card.cards[index].sign==\"10\")then!@#&				drawing.writeText(card.cards[index].sign,x+5,y,colors.black,colors.white)!@#&				drawing.writeText(card.cards[index].sign,x,y+6,colors.black,colors.white)!@#&			else!@#&				drawing.writeText(card.cards[index].sign,x+6,y,colors.black,colors.white)!@#&				drawing.writeText(card.cards[index].sign,x,y+6,colors.black,colors.white)!@#&			end!@#&		else!@#&			drawing.displayImage(paintutils.loadImage(\"cardBack\"),x,y)!@#&		end!@#&	end!@#&		!@#&}!@#&!@#&function drawPageContent()!@#&	showButtons(currentPage.pageContent.getButtons())!@#&	showLabels(currentPage.pageContent.getLabels())!@#&	showImages(currentPage.pageContent.getImages())!@#&	showDropDowns(currentPage.pageContent.getDropDowns())!@#&end!@#&!@#&function showButtons(buttons)!@#&	for x=1,#buttons,1 do!@#&		currentPage.pageContent.drawButton(x)!@#&	end!@#&end!@#&!@#&function showLabels(labels)!@#&	content.main.pageContent.labels[2].name = \"$\"..cash!@#&	for x=1,#labels,1 do!@#&		currentPage.pageContent.drawLabel(x)!@#&	end!@#&end!@#&!@#&function showImages(images)!@#&	for x=1,#images,1 do!@#&		currentPage.pageContent.drawImage(x)!@#&	end!@#&end!@#&!@#&function showDropDowns(dropDowns)!@#&	for x=1,#dropDowns,1 do!@#&		currentPage.pageContent.drawDropDown(x)!@#&	end!@#&end!@#&!@#&!@#&!@#&function filldeck()!@#&	for deckcount=0,3,1 do!@#&		for card=2,14,1 do!@#&			newdeck[(card-1)+13*deckcount] = card!@#&		end!@#&	end!@#&end!@#&!@#&function shuffledeck()!@#&	local number!@#&	local finished = false!@#&	for count=1,52,1 do!@#&		while finished == false do!@#&			number = math.random(1,52)!@#&			if(deck[number]==nil)then!@#&				deck[number] = newdeck[count]!@#&				finished = true!@#&			end!@#&		end!@#&		finished = false!@#&	end!@#&end!@#&!@#&function getCardValue(card)!@#&	if(card>10 and card<14)then!@#&		return 10!@#&	elseif(card==14) then!@#&		return 11!@#&	else!@#&		return card!@#&	end!@#&end!@#&!@#&function getCardSign(card)!@#&	if(card<=10)then!@#&		return tostring(card)!@#&	elseif(card==11)then!@#&		return \"J\"!@#&	elseif(card==12)then!@#&		return \"Q\"!@#&	elseif(card==13)then!@#&		return \"K\"!@#&	elseif(card==14)then!@#&		return \"A\"!@#&	end!@#&end	!@#&!@#&function getCard(player)!@#&	local count = 1!@#&	while deck[count]==\"used\" do!@#&		count = count+1!@#&	end!@#&	local newcard = deck[count]!@#&	deck[count] = \"used\"!@#&	card.addCard(player,getCardValue(newcard),getCardSign(newcard))!@#&	return #card.cards!@#&end!@#&!@#&function displayCards(player,xpos,ypos)!@#&	for i=1,#player,1 do!@#&		card.drawCard(player[i],xpos+(i-1)*8,ypos)!@#&	end!@#&end!@#&!@#&function bust(hand)!@#&	local total = 0!@#&	for i = 1,#hand,1 do!@#&		total = total + hand[i].value!@#&	end!@#&	if(total>21)then!@#&		return true!@#&	else!@#&		return false!@#&	end!@#&end!@#&!@#&function contains(index,array)!@#&	for i=1,#array,1 do!@#&		if(array[i]==index)then!@#&			return true!@#&		end!@#&	end!@#&	return false!@#&end!@#&!@#&function getHandValue(player)!@#&	total = 0!@#&	for i=1,#player,1 do!@#&		total = total+getCardValue(player[i])!@#&		print(\">\"..total)!@#&	end!@#&	sleep(1)!@#&	return total!@#&end!@#&!@#&function addEarnings()!@#&	cash = cash+bet!@#&end!@#&	!@#&function setUpGame()!@#&	begining = true!@#&	filldeck()!@#&	shuffledeck()!@#&	playerHand[1] = getCard(true)!@#&	playerHand[2] = getCard(true)!@#&	dealerHand[1] = getCard(false)!@#&	dealerHand[2] = getCard(false)!@#&	bet = 0!@#&	--cash = 1000!@#&	content.main.pageContent.labels[2].name = \"$\"..cash!@#&	disabledB = {3,4}!@#&	disabledDD = {}!@#&	played = false!@#&	content.main.pageContent.buttons[6].visible = false!@#&	content.main.pageContent.buttons[7].visible = false!@#&	content.main.pageContent.buttons[8].visible = false!@#&	content.main.pageContent.buttons[9].visible = false!@#&	content.main.pageContent.buttons[5].visible = true!@#&end	!@#&!@#&function analyseClick(xpos,ypos,disabledButtons,disabledDropDowns)!@#&	buttons = currentPage.pageContent.getButtons()!@#&	for i=1,#buttons,1 do!@#&		if(xpos>=buttons[i].x and xpos<=buttons[i].x+buttons[i].width-1) then!@#&			if(ypos>=buttons[i].y and ypos<=buttons[i].y+buttons[i].height) then!@#&				if(not contains(i,disabledButtons))then!@#&					buttons[i].buttonFunction()!@#&				end!@#&			end!@#&		end!@#&	end!@#&	dropDowns = currentPage.pageContent.getDropDowns()!@#&	for i=1,#dropDowns,1 do!@#&		if(xpos>=dropDowns[i].x and xpos<=dropDowns[i].x+dropDowns[i].dropDownLength-1) then!@#&			if(not contains(i,disabledDropDowns))then!@#&				if(ypos==dropDowns[i].y) then!@#&					dropDowns[i].visible = not dropDowns[i].visible!@#&				elseif (dropDowns[i].visible) then 	!@#&					for a=1,#dropDowns[i].elements,1 do!@#&						if(ypos==dropDowns[i].y+a) then!@#&							dropDowns[i].elements[a].elementFunction()!@#&						end!@#&					end!@#&				end!@#&			end!@#&		end!@#&	end!@#&	!@#&end !@#&!@#&!@#&!@#&running = true!@#&begining = true!@#&!@#&currentPage = content.pages[1]!@#&local termWidth,termHeight = term.getSize()!@#&cash=0!@#&bet=0!@#&--set up screen!@#&content.main.setBackground(\"BJBackground\")!@#&content.main.pageContent.addLabel(\"Black Jack\",1,1,10,false,colors.lightGray,colors.white)!@#&content.main.pageContent.addLabel(\"$\",2,11,6,false,colors.green,colors.white)!@#&content.main.pageContent.addLabel(\"Bet $0\",17,11,6,false,colors.green,colors.white)!@#&content.main.pageContent.addButton(\" X \",termWidth-2,1,3,1,colors.red,colors.white,true,function() running = false end)!@#&content.main.pageContent.addButton(\"Options\",termWidth-9,1,7,1,colors.gray,colors.white,true,function()end)!@#&content.main.pageContent.addButton(\"Hit\",2,12,7,3,colors.orange,colors.white,true,function()playerHand[#playerHand+1] = getCard(true)end)!@#&content.main.pageContent.addButton(\"Stay\",2,16,7,3,colors.lightBlue,colors.white,true,function() played = true end)!@#&content.main.pageContent.addButton(\"Bet\",26,12,7,3,colors.blue,colors.white,true,function()term.setCursorPos(26,13) term.setBackgroundColor(colors.blue) term.setTextColor(colors.white) write(\"$      \") term.setCursorPos(27,13) bet = tonumber(io.read())end)!@#&content.main.pageContent.addButton(\"Yes\",20,11,3,1,colors.lime,colors.white,false,function()setUpGame()end)!@#&content.main.pageContent.addButton(\"No\",25,11,3,1,colors.red,colors.white,false,function() running = false end)!@#&content.main.pageContent.addButton(\"The Dealer bust would you like to play again\",5,10,38,1,colors.red,colors.white,false,function()end)!@#&content.main.pageContent.addButton(\"You bust would you like to play again\",5,10,38,1,colors.red,colors.white,false,function()end)!@#&--set up game!@#&setUpGame()!@#&cash = 1000!@#&!@#&!@#&while running do!@#&	drawing.clear()!@#&	drawing.displayImage(currentPage.getBackground(),1,1)!@#&	drawPageContent()!@#&	term.setCursorPos(1,2)!@#&	for i=1,#disabledB,1 do!@#&		write(disabledB[i]..\",\")!@#&	end!@#&	write(getHandValue(playerHand))!@#&	--write(contains(3,disabledB))!@#&	displayCards(playerHand,10,12)!@#&	displayCards(dealerHand,10,3)!@#&	event, button, x, y = os.pullEvent(\"mouse_click\")!@#&	analyseClick(x,y,disabledB,diabledDD)!@#&	if(bet>0)then!@#&		if(cash-bet>=0 and begining)then!@#&			content.main.pageContent.labels[3].name = \"$\"..bet!@#&			content.main.pageContent.buttons[5].visible = false!@#&			cash = cash-bet!@#&			disabledB = {}!@#&			begining = false!@#&		end!@#&	end!@#&	if(getHandValue(playerHand)>21)then!@#&		disabledB = {2,3,4,5}!@#&		content.main.pageContent.buttons[9].visible = true!@#&		content.main.pageContent.buttons[6].visible = true!@#&		content.main.pageContent.buttons[7].visible = true!@#&	end!@#&	if(played)then!@#&		while(getHandValue(dealerHand)<=17)do!@#&			dealerHand[#dealerHand+1] = getCard(false)!@#&			played = false!@#&		end!@#&	end!@#&	if(getHandValue(dealerHand)>21)then!@#&		disabledB = {2,3,4,5}!@#&		content.main.pageContent.buttons[8].visible = true!@#&		content.main.pageContent.buttons[6].visible = true!@#&		content.main.pageContent.buttons[7].visible = true!@#&		addEarnings()!@#&	end!@#&end!@#&drawing.clear()",["testImage2"]="!@#& 555555  5555  5555  555555!@#&    5    5     5        5!@#&    5    555   5555     5!@#&    5    5        5     5!@#&    5    5555  5555     5",["background"]="8888880000000000000000000000000000000800000000000!@#&8888888888888888888888888888888888888888888888888!@#&0000000000000000800000000000000000000000000000000!@#&0000000000000000800000000000000000000000000000000!@#&0000000000000000800000000000000000000000000000000!@#&0000000000000000800000000000000000000000000000000!@#&0000000000000000800000000000000000000000000000000!@#&0000000000000000800000000000000000000000000000000!@#&0000000000000000800000000000000000000000000000000!@#&0000000000000000800000000000000000000000000000000!@#&0000000000000000800000000000000000000000000000000!@#&0000000000000000800000000000000000000000000000000!@#&0000000000000000800000000000000000000000000000000!@#&0000000000000000800000000000000000000000000000000!@#&0000000000000000800000000000000000000000000000000!@#&0000000000000000800000000000000000000000000000000!@#&0000000000000000800000000000000000000000000000000!@#&0000000000000000800000000000000000000000000000000",["BJBackground"]="888888888888888888888888888888888888888888888888888!@#&ddddddddddddddddddddddddddddddddddddddddddddddddddd!@#&ddddddddddddddddddddddddddddddddddddddddddddddddddd!@#&ddddddddddddddddddddddddddddddddddddddddddddddddddd!@#&ddddddddddddddddddddddddddddddddddddddddddddddddddd!@#&ddddddddddddddddddddddddddddddddddddddddddddddddddd!@#&ddddddddddddddddddddddddddddddddddddddddddddddddddd!@#&ddddddddddddddddddddddddddddddddddddddddddddddddddd!@#&ddddddddddddddddddddddddddddddddddddddddddddddddddd!@#&ddddddddddddddddddddddddddddddddddddddddddddddddddd!@#&ddddddddddddddddddddddddddddddddddddddddddddddddddd!@#&ddddddddddddddddddddddddddddddddddddddddddddddddddd!@#&ddddddddddddddddddddddddddddddddddddddddddddddddddd!@#&ddddddddddddddddddddddddddddddddddddddddddddddddddd!@#&ddddddddddddddddddddddddddddddddddddddddddddddddddd!@#&ddddddddddddddddddddddddddddddddddddddddddddddddddd!@#&ddddddddddddddddddddddddddddddddddddddddddddddddddd!@#&ddddddddddddddddddddddddddddddddddddddddddddddddddd!@#&ddddddddddddddddddddddddddddddddddddddddddddddddddd",["fileclient"]="content = !@#&{!@#&	main = !@#&	{!@#&		background = nil,!@#&		visible = false,!@#&		setBackground = function(path)!@#&			content.main.background = paintutils.loadImage(path)!@#&		end,!@#&		getBackground = function()!@#&			return content.main.background!@#&		end,!@#&		getPageContent = function()!@#&			return pageContent!@#&		end,!@#&		pageContent = !@#&		{!@#&			buttons = {},!@#&			labels = {},!@#&			dropDowns = {},!@#&			images = {},!@#&			scrollBars = {},!@#&			getButtons = function()!@#&				return content.main.pageContent.buttons!@#&			end,!@#&			addButton = function(text,xpos,ypos,wid,high,c,tc,v,f)!@#&				content.main.pageContent.buttons[#content.main.pageContent.buttons+1] = !@#&									  {name = text,x = xpos,y = ypos!@#&									  ,width = wid,height = high,color = c!@#&									  ,textcolor = tc, visible = v, buttonFunction = f}!@#&				return content.main.pageContent.buttons[#content.main.pageContent.buttons]!@#&			end,!@#&			drawButton = function(index)!@#&					b = content.main.pageContent.buttons[index]!@#&				if(b.visible)then!@#&					drawing.fillArea(b.color,b.x,b.y,b.width,b.height)      !@#&					drawing.writeTextCentered(b.name,b.x,b.y,b.width,b.height,b.textcolor,b.color)!@#&				end!@#&			end,!@#&			getLabels = function()!@#&				return content.main.pageContent.labels!@#&			end,!@#&			addLabel = function(text,xpos,ypos,l,cent,c,tc)!@#&				content.main.pageContent.labels[#content.main.pageContent.labels+1] = !@#&									{name = text,x = xpos,y = ypos,labelLength = l,centered = cent,color = c,textcolor = tc}!@#&				return content.main.pageContent.labels[#content.main.pageContent.labels]!@#&			end,!@#&			setLabelText = function(index,text)!@#&				content.main.pageContent.labels[index].name = text!@#&			end,!@#&			drawLabel = function(index)!@#&!@#&				b = content.main.pageContent.labels[index]!@#&				drawing.fillArea(b.color,b.x,b.y,b.labelLength,1)!@#&				if(b.centered)then!@#&					drawing.writeTextCentered(b.name,b.x,b.y,b.labelLength,1,b.textcolor,b.color)!@#&				else!@#&					drawing.writeText(b.name,b.x,b.y,b.textcolor,b.color)!@#&				end!@#&			end,!@#&			addImage = function(i,xpos,ypos)!@#&				content.main.pageContent.images[#content.main.pageContent.images+1] = {image = paintutils.loadImage(i),x = xpos,y = ypos}!@#&				return content.main.pageContent.images[#content.main.pageContent.images]!@#&			end,!@#&			getImages = function()!@#&				return content.main.pageContent.images!@#&			end,!@#&			drawImage = function(index)!@#&				i=content.main.pageContent.images[index]!@#&				drawing.displayImage(i.image,i.x,i.y)!@#&			end,!@#&			addDropDown = function(n,xpos,ypos,l,c,tc,ddc,ddtc)!@#&				content.main.pageContent.dropDowns[#content.main.pageContent.dropDowns+1] = {name = n,x = xpos,y = ypos,dropDownLength = l,color = c,textColor = tc, dropDownColor = ddc,dropDownTextColor = ddtc,visible = false,elements = {}}!@#&				return content.main.pageContent.dropDowns[#content.main.pageContent.dropDowns]!@#&			end,!@#&			addDropDownElement = function(index,n,f)!@#&				content.main.pageContent.dropDowns[index].elements[#content.main.pageContent.dropDowns[index].elements+1] = {name = n,elementFunction = f}!@#&			end,!@#&			drawDropDown = function(index)!@#&				d=content.main.pageContent.dropDowns[index]!@#&				drawing.fillArea(d.color,d.x,d.y,d.dropDownLength,1)!@#&				drawing.writeText(d.name,d.x,d.y,d.color,d.textColor)!@#&				if(content.main.pageContent.dropDowns[index].visible)then!@#&					drawing.fillArea(d.dropDownColor,d.x,d.y+1,d.dropDownLength,#content.main.pageContent.dropDowns[index].elements)!@#&					for i=1,#content.main.pageContent.dropDowns[index].elements,1 do!@#&						drawing.writeText(d.elements[i].name,d.x,d.y+i,d.dropDownColor,d.dropDownTextColor)!@#&					end!@#&				end!@#&			end,!@#&			getDropDowns = function()!@#&				return content.main.pageContent.dropDowns!@#&			end,!@#&			addScrollBar = function(xpos,ypos,l,ia,s,bgc,bc,ac,tc)!@#&				content.main.pageContent.scrollBars[#content.main.pageContent.scrollBars+1] = {x = xpos,y = ypos,length = l,itemAmount = ia,sideWays = s,backGroundColor = bgc,barColor = bc,arrowColor = ac,textColor = tc,scroll = 0}!@#&				return content.main.pageContent.scrollBars[#content.main.pageContent.scrollBars]!@#&			end,!@#&			getScrollBars = function()!@#&				return content.main.pageContent.scrollBars!@#&			end,!@#&			drawScrollBar = function(index)!@#&				s = content.main.pageContent.scrollBars[index]!@#&				if(s.sideWays)then!@#&					drawing.fillArea(s.backGroundColor,s.x+1,s.y,s.length,1)!@#&					drawing.writeText(\"<\",s.x,s.y,s.arrowColor,s.textColor)!@#&					drawing.writeText(\">\",s.x+s.length+1,s.y,s.arrowColor,s.textColor)!@#&				else!@#&					drawing.fillArea(s.backGroundColor,s.x,s.y+1,1,s.length)!@#&					drawing.writeText(\"^\",s.x,s.y,s.arrowColor,s.textColor)!@#&					drawing.writeText(\"v\",s.x,s.y+s.length+1,s.arrowColor,s.textColor)!@#&				end!@#&				!@#&				local barLength = s.length!@#&				if(s.itemAmount>=s.length*2-1)then!@#&					barLength = 1!@#&				elseif(s.itemAmount>=s.length)then!@#&					barLength = s.length-(s.itemAmount-s.length)+2!@#&				end!@#&				--print(barLength)!@#&				--sleep(1)!@#&				if(s.sideWays)then!@#&					drawing.fillArea(s.barColor,s.x+s.scroll+1,s.y,s.x+barLength,1)!@#&				else!@#&					drawing.fillArea(s.barColor,s.x,s.y+s.scroll+1,1,barLength)!@#&				end!@#&			end!@#&		}!@#&		!@#&	},!@#&	pages = {}!@#&}!@#&!@#&content.pages = !@#&{!@#&	content.main,!@#&}!@#&!@#&drawing = !@#&{!@#&	displayImage = function(image,x,y)!@#&		paintutils.drawImage(image,x,y)!@#&	end,!@#&	fillArea = function(color,xpos,ypos,wid,high)!@#&		term.setCursorPos(1,1)!@#&!@#&		term.setBackgroundColor(color)!@#&		for y=ypos,ypos+high-1,1 do!@#&			for x=xpos,xpos+wid-1,1 do!@#&				term.setCursorPos(x,y)!@#&				write(\" \")!@#&			end!@#&		end!@#&	end,!@#&	writeText = function(text,x,y,color,bgcolor)!@#&		term.setBackgroundColor(color)!@#&		term.setCursorPos(x,y)!@#&		write(text)!@#&	end,!@#&	writeTextCentered = function(text,x,y,wid,high,color,bgcolor)!@#&		term.setCursorPos(x+(wid-#text)/2,y+high/2)!@#&		term.setTextColor(color)!@#&		term.setBackgroundColor(bgcolor)!@#&		term.write(text)!@#&	end,!@#&	clear = function()!@#&		term.setBackgroundColor(colors.black)!@#&		term.clear()!@#&		term.setCursorPos(1,1)!@#&	end!@#&}!@#&!@#&function drawBoarders(frame)!@#&	local x,y = frame.getSize()!@#&	frame.setBackgroundColor(colors.gray)!@#&	for i=1,x,1 do!@#&		frame.setCursorPos(i,1)!@#&		frame.write(\" \")!@#&		frame.setCursorPos(i,y)!@#&		frame.write(\" \")!@#&	end!@#&	for i=1,y,1 do!@#&		frame.setCursorPos(1,i)!@#&		frame.write(\" \")!@#&		frame.setCursorPos(x,i)!@#&		frame.write(\" \")!@#&	end!@#&end!@#&!@#&function fillBackground(frame)!@#&	frame.setBackgroundColor(colors.white)!@#&	local x,y = frame.getSize()!@#&	for a=1,y,1 do!@#&		for b=1,x,1 do!@#&			frame.setCursorPos(b,a)!@#&			frame.write(\" \")!@#&		end!@#&	end!@#&end!@#&!@#&function setUpWindow(frame)!@#&	local x,y = frame.getSize()!@#&	fillBackground(frame)!@#&	drawBoarders(frame)!@#&	frame.setBackgroundColor(colors.red)!@#&	frame.setTextColor(colors.white)!@#&	frame.setCursorPos(x-2,1)!@#&	--frame.write(\" x \")!@#&end!@#&!@#&function serverSelectWindow()!@#&	local myWindow = window.create(term.current(),15,5,30,10)!@#&	setUpWindow(myWindow)!@#&	myWindow.setBackgroundColor(colors.gray)!@#&	myWindow.setTextColor(colors.white)!@#&	myWindow.setCursorPos(12,1)!@#&	myWindow.write(\"Server\")!@#&	myWindow.setBackgroundColor(colors.white)!@#&	myWindow.setTextColor(colors.black)!@#&	myWindow.setCursorPos(2,2)!@#&	myWindow.write(\"Type the ID of the server\")!@#&	myWindow.setCursorPos(2,3)!@#&	myWindow.write(\"you would like to connect to\")!@#&	term.redirect(myWindow)!@#&	term.setCursorPos(2,4)!@#&	term.write(\"> \")!@#&	server = read()!@#&	term.redirect(term.native())!@#&	myWindow.reposition(20,53)!@#&end!@#&!@#&function uploadWindow()!@#&	local myWindow = window.create(term.current(),15,5,30,10)!@#&	setUpWindow(myWindow)!@#&	myWindow.setBackgroundColor(colors.gray)!@#&	myWindow.setTextColor(colors.white)!@#&	myWindow.setCursorPos(12,1)!@#&	myWindow.write(\"Upload\")!@#&	myWindow.setBackgroundColor(colors.white)!@#&	myWindow.setTextColor(colors.black)!@#&	myWindow.setCursorPos(2,2)!@#&	myWindow.write(\"Type the name of the program\")!@#&	myWindow.setCursorPos(2,3)!@#&	myWindow.write(\"you would like to upload\")!@#&	term.redirect(myWindow)!@#&	term.setCursorPos(2,4)!@#&	term.write(\"> \")!@#&	file = read()!@#&	if(fs.exists(file)==false)then!@#&		myWindow.setCursorPos(2,5)!@#&		myWindow.setTextColor(colors.red)!@#&		myWindow.write(\"File does not exist\")!@#&		sleep(2)!@#&	else!@#&		term.redirect(term.native())!@#&		myWindow.reposition(20,53)!@#&		return file!@#&	end!@#&	term.redirect(term.native())!@#&	myWindow.reposition(20,53)!@#&end!@#&!@#&function searchWindow()!@#&	local myWindow = window.create(term.current(),15,5,30,5)!@#&	setUpWindow(myWindow)!@#&	myWindow.setBackgroundColor(colors.gray)!@#&	myWindow.setTextColor(colors.white)!@#&	myWindow.setCursorPos(12,1)!@#&	myWindow.write(\"Search\")!@#&	myWindow.setBackgroundColor(colors.white)!@#&	myWindow.setTextColor(colors.black)!@#&	term.redirect(myWindow)!@#&	term.setCursorPos(2,3)!@#&	term.write(\"> \")!@#&	search = read()!@#&	term.redirect(term.native())!@#&	myWindow.reposition(20,53)!@#&end!@#&!@#&function downloadWindow()!@#&	local myWindow = window.create(term.current(),15,5,30,5)!@#&	setUpWindow(myWindow)!@#&	myWindow.setBackgroundColor(colors.gray)!@#&	myWindow.setTextColor(colors.white)!@#&	myWindow.setCursorPos(11,1)!@#&	myWindow.write(\"Download\")!@#&	myWindow.setBackgroundColor(colors.white)!@#&	myWindow.setTextColor(colors.black)!@#&	myWindow.setCursorPos(2,2)!@#&	myWindow.write(\"Name of new file\")!@#&	term.redirect(myWindow)!@#&	term.setCursorPos(2,3)!@#&	term.write(\"> \")!@#&	newFile = read()!@#&	if(fs.exists(newFile))then!@#&		myWindow.setCursorPos(2,4)!@#&		myWindow.setTextColor(colors.red)!@#&		myWindow.write(\"File already exist\")!@#&		sleep(2)!@#&	else!@#&		term.redirect(term.native())!@#&		myWindow.reposition(20,53)!@#&		return newFile!@#&	end!@#&	term.redirect(term.native())!@#&	myWindow.reposition(20,53)!@#&end!@#&!@#&function requestFiles()!@#&	rednet.send(serverID,\"getFiles\")!@#&	id,newFiles = rednet.receive(1)!@#&	return newFiles!@#&end!@#&!@#&function setColors(index)!@#&!@#&	for i=1,#fileSelectors,1 do!@#&		content.main.pageContent.buttons[i].color = colors.white!@#&	end!@#&	if(index==-1)then!@#&		content.main.pageContent.buttons[19+2].visible = false!@#&	else!@#&		content.main.pageContent.buttons[index].color = colors.lightGray!@#&	end!@#&end!@#&!@#&function addSpaces(text,length)!@#&	temp = text!@#&	for i=#text,length,1 do!@#&		temp = temp..\" \"!@#&	end!@#&	return temp!@#&end!@#&!@#&function writeFiles(offset)!@#&	local termWidth,termHeight = term.getSize()!@#&	if(termHeight>#files)then!@#&		amount = #files!@#&	else!@#&		amount = termHeight-1!@#&	end!@#&!@#&	for i=1,amount,1 do!@#&		fileSelectors[i].name = addSpaces(files[i+offset],49)!@#&	end!@#&end!@#&!@#&function drawPageContent()!@#&	showButtons(currentPage.pageContent.getButtons())!@#&	showLabels(currentPage.pageContent.getLabels())!@#&	showImages(currentPage.pageContent.getImages())!@#&	showDropDowns(currentPage.pageContent.getDropDowns())!@#&	showScrollBars(currentPage.pageContent.getScrollBars())!@#&end!@#&!@#&function showButtons(buttons)!@#&	for x=1,#buttons,1 do!@#&		currentPage.pageContent.drawButton(x)!@#&	end!@#&end!@#&!@#&function showLabels(labels)!@#&	for x=1,#labels,1 do!@#&		currentPage.pageContent.drawLabel(x)!@#&	end!@#&end!@#&!@#&function showImages(images)!@#&	for x=1,#images,1 do!@#&		currentPage.pageContent.drawImage(x)!@#&	end!@#&end!@#&!@#&function showDropDowns(dropDowns)!@#&	for x=1,#dropDowns,1 do!@#&		currentPage.pageContent.drawDropDown(x)!@#&	end!@#&end!@#&!@#&function showScrollBars(scrollBars)!@#&	for x=1,#scrollBars,1 do!@#&		currentPage.pageContent.drawScrollBar(x)!@#&	end!@#&end!@#&!@#&function analyseClick(xpos,ypos)!@#&	buttons = currentPage.pageContent.getButtons()!@#&	for i=1,#buttons,1 do!@#&		if(xpos>=buttons[i].x and xpos<=buttons[i].x+buttons[i].width-1) then!@#&			if(ypos>=buttons[i].y and ypos<=buttons[i].y+buttons[i].height-1) then!@#&				buttons[i].buttonFunction()!@#&			end!@#&		end!@#&	end!@#&	dropDowns = currentPage.pageContent.getDropDowns()!@#&	for i=1,#dropDowns,1 do!@#&		if(xpos>=dropDowns[i].x and xpos<=dropDowns[i].x+dropDowns[i].dropDownLength-1) then!@#&			if(ypos==dropDowns[i].y) then!@#&				dropDowns[i].visible = not dropDowns[i].visible!@#&			elseif (dropDowns[i].visible) then 	!@#&				for a=1,#dropDowns[i].elements,1 do!@#&					if(ypos==dropDowns[i].y+a) then!@#&						dropDowns[i].elements[a].elementFunction()!@#&					end!@#&				end!@#&			end!@#&		end!@#&	end!@#&	scrollBars = currentPage.pageContent.getScrollBars()!@#&	for i=1,#scrollBars,1 do!@#&		local barLength = scrollBars[i].length!@#&		if(scrollBars[i].itemAmount>=scrollBars[i].length*2-1)then!@#&			barLength = 1!@#&		elseif(scrollBars[i].itemAmount>=scrollBars[i].length)then!@#&			barLength = scrollBars[i].length-(scrollBars[i].itemAmount-scrollBars[i].length)+2!@#&		end!@#&		if(xpos==scrollBars[i].x) then!@#&			if(ypos==scrollBars[i].y) then!@#&				if(scrollBars[i].scroll>0)then!@#&					scrollBars[i].scroll = scrollBars[i].scroll-1!@#&					setColors(-1)!@#&				end!@#&			end!@#&		end!@#&		if(xpos==scrollBars[i].x+scrollBars[i].length+1) then!@#&			if(ypos==scrollBars[i].y) then!@#&				if(scrollBars[i].scroll+barLength<scrollBars[i].length)then!@#&					scrollBars[i].scroll = scrollBars[i].scroll+1!@#&					setColors(-1)!@#&				end!@#&			end!@#&		end!@#&		if(xpos==scrollBars[i].x) then!@#&			if(ypos==scrollBars[i].y+scrollBars[i].length+1) then!@#&				if(scrollBars[i].scroll+barLength<scrollBars[i].length)then!@#&					scrollBars[i].scroll = scrollBars[i].scroll+1!@#&					setColors(-1)!@#&				end!@#&			end!@#&		end!@#&	end!@#&end !@#&!@#&running = true!@#&currentPage = content.pages[1]!@#&local termWidth,termHeight = term.getSize()!@#&files  = {}!@#&for i=1,8,1 do!@#&	files[i] = \"test\"..i!@#&end!@#&serverID = 0!@#&!@#&content.main.setBackground(\"fileClientBG\")!@#&content.main.pageContent.addLabel(\"File Cloud Client\",1,1,17,false,colors.white,colors.blue)!@#&fileSelectors = {}!@#&!@#&for i=2,termHeight,1 do!@#&	if(#files>=termHeight-1)then!@#&			fileSelectors[#fileSelectors+1] = content.main.pageContent.addButton(\"\",1,i,termWidth-1,1,colors.white,colors.black,true,function() setColors(i-1) content.main.pageContent.buttons[termHeight+2].visible = true  content.main.pageContent.buttons[termHeight+2].y = i end)!@#&	elseif(i-1<=#files)then!@#&			fileSelectors[#fileSelectors+1] = content.main.pageContent.addButton(\"\",1,i,termWidth-1,1,colors.white,colors.black,true,function() setColors(i-1) content.main.pageContent.buttons[termHeight+2].visible = true  content.main.pageContent.buttons[termHeight+2].y = i end)!@#&	else!@#&			fileSelectors[#fileSelectors+1] = content.main.pageContent.addButton(\"\",1,i,termWidth-1,1,colors.white,colors.black,true,function() setColors(i-1) content.main.pageContent.buttons[termHeight+2].visible = false  content.main.pageContent.buttons[termHeight+2].y = i end)!@#&	end!@#&end!@#&content.main.pageContent.addButton(\"Upload\",20,1,6,1,colors.lightBlue,colors.white,true,function() uploadWindow() end)!@#&content.main.pageContent.addButton(\"Refresh\",28,1,7,1,colors.lightBlue,colors.white,true,function() f = requestFiles() if(f~=nill)then files = f end end)!@#&content.main.pageContent.addButton(\"Download\",termWidth-9,2,8,1,colors.blue,colors.white,false,function() downloadWindow() end)!@#&content.main.pageContent.addButton(\" X \",49,1,3,1,colors.red,colors.white,true,function() running = false end)!@#&content.main.pageContent.addDropDown(\"Options\",37,1,10,colors.lightBlue,colors.white,colors.lightGray,colors.white)!@#&	content.main.pageContent.addDropDownElement(1,\"Server\",function() serverSelectWindow() end)!@#&	content.main.pageContent.addDropDownElement(1,\"Search\",function() searchWindow() end)!@#&content.main.pageContent.addScrollBar(termWidth,2,16,#files,false,colors.lightGray,colors.gray,colors.gray,colors.white)!@#&!@#&!@#&while running do!@#&	drawing.clear()!@#&	drawing.displayImage(currentPage.getBackground(),1,1)!@#&	writeFiles(content.main.pageContent.scrollBars[1].scroll)!@#&	drawPageContent()!@#&	event, button, x, y = os.pullEvent(\"mouse_click\")!@#&	analyseClick(x,y)!@#&end!@#&drawing.clear()",["tron"]="x,y = term.getSize()!@#&racerX = x/2+20!@#&racerY = y/2!@#&direction = \"left\"!@#&racer2X = x/2-20!@#&racer2Y = y/2!@#&direction2 = \"right\"!@#&speed = 1!@#&speed2 = 1!@#&line = {}!@#&line2 = {}!@#&!@#&function clear()!@#&	term.setTextColor(colors.white)!@#&	term.setBackgroundColor(colors.black)!@#&	term.clear()!@#&	term.setCursorPos(1,1)!@#&end!@#&!@#&function lineCrash(racerposx,racerposy)!@#&	for place=1,table.getn(line)-1,1 do!@#&		for herp,derp in line[place]:gmatch(\"([^%s]+)-(.*)\") do!@#&			xpos = tonumber(herp)!@#&			ypos = tonumber(derp)!@#&		end!@#&		if(xpos==racerposx and ypos==racerposy)then!@#&			return true!@#&		end!@#&	end!@#&	for place=1,table.getn(line2)-1,1 do!@#&		for herp,derp in line2[place]:gmatch(\"([^%s]+)-(.*)\") do!@#&			xpos = tonumber(herp)!@#&			ypos = tonumber(derp)!@#&		end!@#&		if(xpos==racerposx and ypos==racerposy)then!@#&			return true!@#&		end!@#&	end!@#&end!@#&!@#&function checkCrash(player)!@#&	if(player==\"racer1\")then!@#&		crash = false!@#&		if(racerX<1)then!@#&			crash = true!@#&		elseif(racerX>x)then!@#&			crash = true!@#&		elseif(racerY<1)then!@#&			crash = true!@#&		elseif(racerY>y)then!@#&			crash = true!@#&		end!@#&		if(lineCrash(racerX,racerY))then!@#&			crash = true!@#&		end!@#&		return crash!@#&	else!@#&		crash = false!@#&		if(racer2X<1)then!@#&			crash = true!@#&		elseif(racer2X>x)then!@#&			crash = true!@#&		elseif(racer2Y<1)then!@#&			crash = true!@#&		elseif(racer2Y>y)then!@#&			crash = true!@#&		end!@#&		if(lineCrash(racer2X,racer2Y))then!@#&			crash = true!@#&		end!@#&		return crash!@#&	end!@#&end!@#&!@#&function moveRacer(player)!@#&		term.setBackgroundColor(colors.lime)!@#&		if(direction==\"up\")then!@#&			racerY = racerY-speed!@#&		elseif(direction==\"down\")then!@#&			racerY = racerY+speed!@#&		elseif(direction==\"left\")then!@#&			racerX = racerX-speed!@#&		else!@#&			racerX = racerX+speed!@#&		end!@#&		table.insert(line,racerX..\"-\"..racerY)!@#&		term.setCursorPos(racerX,racerY)!@#&		write(\" \")!@#&		!@#&		term.setBackgroundColor(colors.blue)!@#&		if(direction2==\"up\")then!@#&			racer2Y = racer2Y-speed2!@#&		elseif(direction2==\"down\")then!@#&			racer2Y = racer2Y+speed2!@#&		elseif(direction2==\"left\")then!@#&			racer2X = racer2X-speed2!@#&		else!@#&			racer2X = racer2X+speed2!@#&		end!@#&		table.insert(line2,racer2X..\"-\"..racer2Y)!@#&		term.setCursorPos(racer2X,racer2Y)!@#&		write(\" \")!@#&end!@#&!@#&clear()!@#&write(\"ready \")!@#&sleep(1)!@#&write(\"go\")!@#&sleep(1)!@#&timer = os.startTimer(.05)!@#&clear()!@#&!@#&while true do!@#&	local Event, key, pram1, pram2 = os.pullEvent()!@#&	if(Event==\"key\")then!@#&		if(key==200 and direction~=\"down\")then!@#&			direction = \"up\"!@#&			speed = .5!@#&		elseif(key==208 and direction~=\"up\")then!@#&			direction = \"down\"!@#&			speed = .5!@#&		elseif(key==203 and direction~=\"right\")then!@#&			direction = \"left\"!@#&			speed = 1!@#&		elseif(key==205 and direction~=\"left\")then!@#&			direction = \"right\"!@#&			speed = 1!@#&		end!@#&		if(key==17 and direction2~=\"down\")then!@#&			direction2 = \"up\"!@#&			speed2 = .5!@#&		elseif(key==31 and direction2~=\"up\")then!@#&			direction2 = \"down\"!@#&			speed2 = .5!@#&		elseif(key==30 and direction2~=\"right\")then!@#&			direction2 = \"left\"!@#&			speed2 = 1!@#&		elseif(key==32 and direction2~=\"left\")then!@#&			direction2 = \"right\"!@#&			speed2= 1!@#&		end!@#&	elseif(Event==\"timer\" and key==timer)then!@#&		moveRacer()!@#&		if(checkCrash(\"racer1\"))then!@#&			write(\"RACER 1 CRASHED\")	!@#&			break!@#&		end		!@#&		if(checkCrash(\"racer2\"))then!@#&			write(\"RACER 2 CRASHED\")!@#&			break!@#&		end!@#&		timer = os.startTimer(.05)!@#&	end!@#&end!@#&!@#&sleep(2)",["derp2"]="open = fs.open(\"hangmanwords/words\",\"w\")!@#&for place=1,40,1 do!@#&  open.write(place)!@#&end!@#&open.close()",["BBTetris"]="-- +---------------------+------------+---------------------+!@#&-- |   ##      #     #   |            |  ##      #     ##   |!@#&-- |    ##     #     ##  |  BBTetris  |  ##      ##     #   |!@#&-- |          ##     #   |    ####    |           #     #   |!@#&-- +---------------------+------------+---------------------+!@#&!@#&local version = \"Version 1.0.6\"!@#&!@#&-- Yet another version of Tetris, by Jeffrey Alexander (aka Bomb Bloke).!@#&-- Heavily based on the old \"Brick Game\"s you may've once seen.!@#&-- http://www.computercraft.info/forums2/index.php?/topic/15878-bbtetris!@#&!@#&---------------------------------------------!@#&------------Variable Declarations------------!@#&---------------------------------------------!@#&!@#&-- Seven regular blocks, six \"advanced\" blocks, three \"trick\" blocks.!@#&local block = {!@#&{{1,1,0},{0,1,1}},{{0,1,0},{0,1,0},{0,1,0},{0,1,0}},{{0,1,1},{1,1,0}},{{1,1},{1,1}},{{1,1,1},{0,1,0},!@#&{0,0,0}},{{1,1,1},{0,0,1}},{{1,1,1},{1,0,0}},{{1,1,0},{0,1,0},{0,1,1}},{{1,1},{0,1}},{{1,0,0},{1,1,1},!@#&{1,0,0}},{{0,1,0},{1,1,1},{0,1,0}},{{1},{1}},{{1,1,1},{1,0,1}},{{1}},{{1},{1}},{{1},{1},{1}}}!@#&!@#&-- The menu numerals. Eight in all.!@#&local number = {!@#&{{5,1},{4,1,1},{5,1},{5,1},{5,1},{5,1},{4,1,1,1}},{{4,1,1,1},{3,1,0,0,0,1},{7,1},{6,1},{5,1},{4,1},!@#&{3,1,1,1,1,1}},{{4,1,1,1},{3,1,0,0,0,1},{7,1},{4,1,1,1},{7,1},{3,1,0,0,0,1},{4,1,1,1}},{{6,1},{5,1,1},!@#&{4,1,0,1},{3,1,0,0,1},{3,1,0,0,1},{3,1,1,1,1,1},{6,1}},{{3,1,1,1,1,1},{3,1},{3,1,1,1,1},{7,1},{7,1},!@#&{3,1,0,0,0,1},{4,1,1,1}},{{4,1,1,1},{3,1,0,0,0,1},{3,1},{3,1,1,1,1},{3,1,0,0,0,1},{3,1,0,0,0,1},!@#&{4,1,1,1}},{{3,1,1,1,1,1},{7,1},{6,1},{5,1},{5,1},{4,1},{4,1}},{{4,1,1,1},{3,1,0,0,0,1},{3,1,0,0,0,1},!@#&{4,1,1,1},{3,1,0,0,0,1},{3,1,0,0,0,1},{4,1,1,1}}}!@#&!@#&local gamemode, speed, level, running, grid, saves, canSave, playMusic, pocket, depth = 1, 0, 0, true, {}, {}, true, true!@#&local highScore, screenx, screeny, myEvent, mon, OGeventPuller, skipIntro, skipMonitor, defaultMonitor!@#&!@#&local musicFile = \"moarp/songs/Tetris A Theme.nbs\"!@#&!@#&---------------------------------------------!@#&------------Function Declarations------------!@#&---------------------------------------------!@#&!@#&-- Return to shell.!@#&local function exitGame(erroring)!@#&  if canSave then!@#&    myEvent = fs.open(shell.resolve(\".\")..\"/SpeedOS/Applications/GameBox/bbtetris.dat\", \"w\")!@#&    myEvent.writeLine(\"Save data file for Bomb Bloke's Tetris game.\")!@#&    myEvent.writeLine(string.gsub(textutils.serialize(highScore),\"\\n%s*\",\"\"))!@#&    myEvent.writeLine(string.gsub(textutils.serialize(saves),\"\\n%s*\",\"\"))!@#&    myEvent.close()!@#&  end!@#&!@#&  term.setBackgroundColor(colours.black)!@#&  term.setTextColor(colours.white)!@#&  !@#&  if mon then!@#&    term.clear()!@#&    if term.restore then term.restore() else term.redirect(mon.restoreTo) end!@#&  end!@#&  !@#&  if note then os.unloadAPI(\"note\") end!@#&  !@#&  term.clear()!@#&  term.setCursorPos(1,1)!@#&  if erroring then print(erroring..\"\\n\") end  !@#&  print(\"Thanks for playing!\")!@#&  !@#&  if (shell.resolve(\".\") == \"disk\") and not fs.exists(\"/SpeedOS/Applications/GameBox/bbtetris\") then!@#&    print(\"\\nIf you wish to copy me to your internal drive (for play without the disk - this allows saving of score data etc), type:\\n\\ncp \\\\disk\\\\bbtetris \\\\bbtetris\\n\")!@#&  end!@#&!@#&  os.pullEvent = OGeventPuller!@#&  error()!@#&end!@#&!@#&-- Writes regular text at the specified location on the screen.!@#&local function writeAt(text, x , y)!@#&  term.setBackgroundColor(colours.black)!@#&  term.setTextColor(colours.white)!@#&  term.setCursorPos(screenx+x,screeny+y)!@#&  term.write(text)!@#&end!@#&!@#&-- Returns whether a given event was a touch event this program should listen to.!@#&local function touchedMe()!@#&  if myEvent[1] == \"mouse_click\" then return true!@#&  elseif myEvent[1] ~= \"monitor_touch\" or not mon then return false!@#&  else return mon.side == myEvent[2] end!@#&end!@#&!@#&-- Returns whether one of a given set of keys was pressed.!@#&local function pressedKey(...)!@#&  if myEvent[1] ~= \"key\" then return false end!@#&  for i=1,#arg do if arg[i] == myEvent[2] then return true end end!@#&  return false!@#&end!@#&!@#&-- Returns whether a click was performed at a given location.!@#&-- If two parameters are passed, it checks to see if x is [1] and y is [2].!@#&-- If three parameters are passed, it checks to see if x is [1] and y is between [2]/[3] (non-inclusive).!@#&-- If four paramaters are passed, it checks to see if x is between [1]/[2] and y is between [3]/[4] (non-inclusive).!@#&local function clickedAt(...)!@#&  if not touchedMe() then return false end!@#&  if #arg == 2 then return (myEvent[3] == arg[1]+screenx and myEvent[4] == arg[2]+screeny)!@#&  elseif #arg == 3 then return (myEvent[3] == arg[1]+screenx and myEvent[4] > arg[2]+screeny and myEvent[4] < arg[3]+screeny)!@#&  else return (myEvent[3] > arg[1]+screenx and myEvent[3] < arg[2]+screenx and myEvent[4] > arg[3]+screeny and myEvent[4] < arg[4]+screeny) end!@#&end!@#&!@#&-- Ensures the wrapped monitor is suitable for play.!@#&local function enforceScreenSize()!@#&  term.setBackgroundColor(colours.black)!@#&  term.setTextColor(colours.white)!@#&  !@#&  while true do!@#&    local scale = 5!@#&    mon.setTextScale(scale)!@#&    screenx,screeny = term.getSize()!@#&!@#&    term.clear()!@#&    term.setCursorPos(1,1)!@#&!@#&    while (screenx < 50 or screeny < (depth or 19)) and scale > 0.5 do!@#&      scale = scale - 0.5!@#&      mon.setTextScale(scale)!@#&      screenx,screeny = term.getSize()!@#&    end!@#&!@#&    if screenx > 49 and screeny > (depth or 19) - 1 then!@#&      screenx,screeny = math.floor(screenx/2)-10, math.floor(screeny/2)-9!@#&      sleep(0.1) !@#&      return!@#&    else print(\"Make this display out of at least three by two monitor blocks, or tap me to quit.\") end!@#&    !@#&    while true do!@#&      myEvent = {os.pullEvent()}!@#&    !@#&      if myEvent[1] == \"monitor_resize\" then break!@#&      elseif myEvent[1] == \"key\" or touchedMe() or myEvent[1] == \"terminate\" then exitGame()!@#&      elseif myEvent[1] == \"peripheral_detach\" and mon then!@#&        if myEvent[2] == mon.side then exitGame(\"I've lost my monitor - your turtle didn't mine it, I hope?\") end!@#&      elseif myEvent[1] == \"musicFinished\" then os.queueEvent(\"musicPlay\",musicFile) end!@#&    end!@#&  end!@#&end!@#&!@#&-- Draws the frame around the playing area, along with other static stuff.!@#&local function drawBorder()!@#&  term.setBackgroundColor(colours.black)!@#&  term.clear()!@#&  !@#&  writeAt(\"High\",14,11)!@#&  writeAt(\"Level\",14,14)!@#&  writeAt(\"Speed\",14,17)!@#&  !@#&  if not pocket then!@#&    writeAt(\"[H]elp\",-6,2)!@#&    writeAt(\"[ ] Advanced\",22,14)!@#&    writeAt(\"[ ] Tricks\",22,16)!@#&    writeAt(\"[ ] Quota\",22,18)!@#&  end!@#&    !@#&  writeAt(\"[Q]uit\",pocket and 21 or 22,2)!@#&  !@#&  term.setBackgroundColor(term.isColor() and colours.yellow or colours.white)!@#&  term.setTextColor(term.isColor() and colours.lightGrey or colours.black)!@#&  !@#&  term.setCursorPos(screenx+1,screeny)!@#&  term.write(string.rep(\"L\",20))!@#&  term.setCursorPos(screenx+1,screeny+depth+1)!@#&  term.write(string.rep(\"L\",20))!@#&  term.setCursorPos(screenx+13,screeny+6)!@#&  term.write(string.rep(\"L\",7))!@#&  !@#&  for i=1,depth do!@#&    term.setCursorPos(screenx+1,screeny+i)!@#&    term.write(\"L\")!@#&    term.setCursorPos(screenx+12,screeny+i)!@#&    term.write(\"L\")!@#&    term.setCursorPos(screenx+20,screeny+i)!@#&    term.write(\"L\")!@#&  end!@#&end!@#&!@#&-- Draws the big numbers indicating the game mode on the main menu (plus associated data).!@#&local function drawNumeral()!@#&  term.setTextColor(term.isColor() and colours.lightGrey or colours.black)!@#&  !@#&  for i=1,7 do!@#&    term.setCursorPos(screenx+2,screeny+i+6)!@#&    term.setBackgroundColor(colours.black)!@#&    term.write(string.rep(\" \",10))!@#&    term.setBackgroundColor(term.isColor() and colours.blue or colours.white)!@#&    !@#&    for j=2,#number[gamemode][i] do if number[gamemode][i][j] == 1 then!@#&      term.setCursorPos(screenx+number[gamemode][i][1]+j,screeny+i+6)!@#&      term.write(\"L\")!@#&    end end!@#&  end!@#&  !@#&  term.setBackgroundColor(colours.black)!@#&  term.setTextColor(term.isColor() and colours.green or colours.white)!@#&  !@#&  if not pocket then for i=0,2 do!@#&    term.setCursorPos(screenx+23,screeny+14+i*2)!@#&    term.write(bit.band(gamemode-1,bit.blshift(1,i))==bit.blshift(1,i) and \"O\" or \" \")!@#&  end end!@#&  !@#&  writeAt(string.rep(\" \",6-#tostring(highScore[gamemode]))..tostring(highScore[gamemode]),13,12)!@#&end!@#&!@#&-- Fill the grid with random blocks according to the chosen level.!@#&local function fillGrid()!@#&  term.setBackgroundColor(bit.band(gamemode-1,4)==4 and colours.red or colours.white)!@#&  term.setTextColor(term.isColor() and colours.lightGrey or colours.black)!@#&  !@#&  for i=1,level+(bit.band(gamemode-1,4)==4 and 1 or 0) do!@#&    grid[i] = {}!@#&    for j=1,10 do if math.random(2) > 1 then!@#&      term.setCursorPos(screenx+j+1,screeny+depth+1-i)!@#&      term.write(\"L\")!@#&      grid[i][j] = bit.band(gamemode-1,4)==4 and 14 or 32!@#&    end end!@#&  end!@#&  !@#&  if bit.band(gamemode-1,4)==4 then for i=level+2,depth do grid[i] = {} end end!@#&end!@#&!@#&-- Do the game over animation.!@#&local function gameover()!@#&  term.setBackgroundColor(term.isColor() and colours.black or colours.white)!@#&  term.setTextColor(term.isColor() and colours.lightGrey or colours.black)!@#&  for i=depth,1,-1 do!@#&    term.setCursorPos(screenx+2,screeny+i)!@#&    term.write(string.rep(\"L\",10))!@#&    blockTimer = os.startTimer(0.1)!@#&    while myEvent[2] ~= blockTimer do myEvent = {os.pullEvent(\"timer\")} end!@#&  end!@#&  !@#&  term.setBackgroundColor(colours.black)!@#&  for i=1,depth do!@#&    term.setCursorPos(screenx+2,screeny+i)!@#&    term.write(string.rep(\" \",10))!@#&    blockTimer = os.startTimer(0.1)!@#&    while myEvent[2] ~= blockTimer do myEvent = {os.pullEvent(\"timer\")} end!@#&  end!@#&end!@#&!@#&-- Renders the block (or clears that area of the screen if not \"drawing\").!@#&local function drawBlock(thisBlock,rotation,xpos,ypos,drawing,flicker)!@#&  if thisBlock > 13 and not drawing then!@#&    term.setTextColor(term.isColor() and colours.lightGrey or colours.black)!@#&    for y=1,#block[thisBlock] do!@#&      term.setCursorPos(screenx+xpos+1,screeny+ypos+y-1)!@#&      if grid[depth+2-ypos-y][xpos] ~= nil then!@#&        term.setBackgroundColor(term.isColor() and bit.blshift(1,grid[depth+1-ypos][xpos]) or colours.white)!@#&        term.write(\"L\")!@#&      else!@#&        term.setBackgroundColor(colours.black)!@#&        term.write(\" \")!@#&      end!@#&    end!@#&    return!@#&  end!@#&  !@#&  if drawing and thisBlock > 13 then!@#&    term.setBackgroundColor(term.isColor() and (flicker and colours.white or colours.black) or (flicker and colours.black or colours.white))!@#&  else!@#&    term.setBackgroundColor(drawing and (term.isColor() and bit.blshift(1,thisBlock) or colours.white) or colours.black)!@#&  end!@#&  !@#&  term.setTextColor(term.isColor() and colours.lightGrey or (flicker and colours.white or colours.black))!@#&    !@#&  for y=1,#block[thisBlock] do for x=1,#block[thisBlock][1] do if block[thisBlock][y][x] == 1 then!@#&    if rotation == 0 then!@#&      term.setCursorPos(screenx+xpos+x,screeny+ypos+y-1)!@#&    elseif rotation == 1 then!@#&      term.setCursorPos(screenx+xpos+#block[thisBlock]+1-y,screeny+ypos+x-1)!@#&    elseif rotation == 2 then!@#&      term.setCursorPos(screenx+xpos+#block[thisBlock][1]+1-x,screeny+ypos+#block[thisBlock]-y)!@#&    elseif rotation == 3 then!@#&      term.setCursorPos(screenx+xpos+y,screeny+ypos+#block[thisBlock][1]-x)!@#&    end!@#&    !@#&    term.write(drawing and \"L\" or \" \")!@#&  end end end!@#&end!@#&!@#&-- Returns whether the block can move into the specified position.!@#&local function checkBlock(thisBlock,rotation,xpos,ypos)!@#&  if thisBlock == 14 then!@#&    if xpos < 1 or xpos > 10 then return false end!@#&    for y = 1,depth+1-ypos do if grid[y][xpos] == nil then return true end end!@#&    return false!@#&  end      !@#&  !@#&  local checkX, checkY!@#&  !@#&  for y=1,#block[thisBlock] do for x=1,#block[thisBlock][1] do if block[thisBlock][y][x] == 1 then!@#&    if rotation == 0 then!@#&      checkX, checkY = xpos+x-1, ypos+y-1!@#&    elseif rotation == 1 then!@#&      checkX, checkY = xpos+#block[thisBlock]-y, ypos+x-1!@#&    elseif rotation == 2 then!@#&      checkX, checkY = xpos+#block[thisBlock][1]-x, ypos+#block[thisBlock]-y!@#&    elseif rotation == 3 then!@#&      checkX, checkY = xpos+y-1, ypos+#block[thisBlock][1]-x!@#&    end!@#&    !@#&    if checkX < 1 or checkX > 10 or checkY < 1 or checkY > depth or grid[depth+1-checkY][checkX] ~= nil then return false end!@#&  end end end!@#&  !@#&  return true!@#&end!@#&!@#&-- Redraw the game view after a monitor re-size.!@#&local function redrawGame(score)!@#&  drawBorder()!@#&  !@#&  writeAt(\"[P]ause\",pocket and 21 or 22,4)!@#&  if note then writeAt(\"[M]usic\",22,6) end!@#&  writeAt(\"Next\",14,1)!@#&  writeAt(\"Score\",14,8)!@#&  writeAt(string.rep(\" \",6-#tostring(score))..tostring(score),13,9)!@#&  writeAt(string.rep(\" \",6-#tostring(highScore[gamemode]))..tostring(highScore[gamemode]),13,12)!@#&  writeAt((level>9 and \"\" or \" \")..tostring(level),17,15)!@#&  writeAt(tostring(speed),18,18)!@#&  !@#&  term.setBackgroundColor(colours.black)!@#&  term.setTextColor(term.isColor() and colours.green or colours.white)!@#&  !@#&  if not pocket then for i=0,2 do!@#&    term.setCursorPos(screenx+23,screeny+14+i*2)!@#&    term.write(bit.band(gamemode-1,bit.blshift(1,i))==bit.blshift(1,i) and \"O\" or \" \")!@#&  end end!@#&  !@#&  term.setTextColor(term.isColor() and colours.lightGrey or colours.black)!@#&  for yy=1,depth do!@#&    term.setCursorPos(screenx+2,screeny+yy)!@#&    for xx=1,10 do if grid[depth+1-yy][xx] ~= nil then!@#&      term.setBackgroundColor(term.isColor() and bit.blshift(1,grid[depth+1-yy][xx]) or colours.white)!@#&      term.write(\"L\")!@#&    else!@#&      term.setBackgroundColor(colours.black)!@#&      term.write(\" \")!@#&    end end!@#&  end!@#&end!@#&!@#&local function intro()!@#&  local xSize, ySize, temp = term.getSize()!@#&  !@#&  local introBlock = xSize > 49 and!@#&  !@#&  {{11,2,4},{12,2,4},{13,2,4},{14,2,4},{15,2,4},{16,2,4},{17,2,4},{18,2,4},{19,2,4},{20,2,4},{21,2,4},{22,2,4},{23,2,4},!@#&  {24,2,4},{25,2,4},{8,3,4},{9,3,4},{10,3,4},{26,3,4},{27,3,4},{29,3,11},{5,4,4},{6,4,4},{7,4,4},{13,4,11},{14,4,11},!@#&  {15,4,11},{16,4,11},{17,4,11},{18,4,11},{29,4,11},{31,4,4},{32,4,4},{33,4,4},{46,4,4},{9,5,11},{10,5,11},{11,5,11},!@#&  {12,5,11},{14,5,11},{29,5,11},{34,5,4},{44,5,4},{45,5,4},{14,6,11},{25,6,11},{26,6,11},{27,6,11},{29,6,11},{35,6,4},!@#&  {36,6,4},{37,6,4},{43,6,4},{14,7,11},{20,7,11},{21,7,11},{22,7,11},{23,7,11},{28,7,11},{29,7,11},{38,7,4},{39,7,4},!@#&  {40,7,4},{41,7,4},{42,7,4},{15,8,11},{19,8,11},{24,8,11},{28,8,11},{30,8,11},{31,8,11},{8,9,14},{9,9,14},{15,9,11},!@#&  {19,9,11},{20,9,11},{25,9,11},{28,9,11},{45,9,11},{46,9,11},{47,9,11},{4,10,14},{5,10,14},{7,10,14},{10,10,14},!@#&  {15,10,11},{19,10,11},{21,10,11},{22,10,11},{23,10,11},{24,10,11},{28,10,11},{35,10,11},{36,10,11},{37,10,11},!@#&  {44,10,11},{48,10,11},{3,11,14},{6,11,14},{8,11,14},{9,11,14},{10,11,14},{11,11,14},{14,11,11},{19,11,11},{29,11,11},!@#&  {32,11,11},{34,11,11},{38,11,11},{41,11,11},{44,11,11},{4,12,14},{5,12,14},{6,12,14},{9,12,14},{12,12,14},{14,12,11},!@#&  {20,12,11},{23,12,11},{29,12,11},{33,12,11},{44,12,11},{45,12,11},{4,13,14},{7,13,14},{9,13,14},{10,13,14},!@#&  {11,13,14},{21,13,11},{22,13,11},{29,13,11},{34,13,11},{39,13,11},{40,13,11},{46,13,11},{47,13,11},{4,14,14},!@#&  {5,14,14},{6,14,14},{7,14,14},{29,14,11},{34,14,11},{40,14,11},{48,14,11},{10,15,4},{11,15,4},{12,15,4},{13,15,4},!@#&  {14,15,4},{15,15,4},{40,15,11},{44,15,11},{48,15,11},{9,16,4},{16,16,4},{17,16,4},{18,16,4},{19,16,4},{20,16,4},!@#&  {21,16,4},{22,16,4},{40,16,11},{45,16,11},{46,16,11},{47,16,11},{6,17,4},{7,17,4},{8,17,4},{23,17,4},{24,17,4},!@#&  {25,17,4},{26,17,4},{42,17,4},{43,17,4},{44,17,4},{27,18,4},{28,18,4},{29,18,4},{30,18,4},{31,18,4},{32,18,4},!@#&  {33,18,4},{34,18,4},{35,18,4},{36,18,4},{37,18,4},{38,18,4},{39,18,4},{40,18,4},{41,18,4}}!@#&  !@#&  or!@#&  !@#&  {{2,2,4},{3,2,4},{4,2,4},{5,2,4},{6,2,4},{7,2,4},{9,3,14},{10,3,14},{11,3,14},{4,4,14},{5,4,14},{6,4,14},{8,4,14},!@#&  {9,4,14},{12,4,14},{3,5,14},{4,5,14},{7,5,14},{9,5,14},{10,5,14},{11,5,14},{12,5,14},{13,5,14},{4,6,14},{5,6,14},!@#&  {6,6,14},{7,6,14},{8,6,14},{10,6,14},{13,6,14},{15,6,4},{24,6,4},{25,6,4},{5,7,14},{8,7,14},{10,7,14},{11,7,14},!@#&  {12,7,14},{16,7,4},{23,7,4},{5,8,14},{6,8,14},{7,8,14},{17,8,4},{18,8,4},{19,8,4},{20,8,4},{21,8,4},{22,8,4},{3,9,11},!@#&  {4,9,11},{5,10,11},{6,10,11},{7,10,11},{5,11,11},{8,11,11},{9,11,11},{14,11,11},{5,12,11},{14,12,11},{5,13,11},!@#&  {8,13,11},{9,13,11},{12,13,11},{13,13,11},{14,13,11},{15,13,11},{16,13,11},{22,13,11},{23,13,11},{4,14,11},{7,14,11},!@#&  {10,14,11},{14,14,11},{19,14,11},{21,14,11},{4,15,11},{7,15,11},{8,15,11},{9,15,11},{10,15,11},{13,15,11},{16,15,11},!@#&  {17,15,11},{22,15,11},{23,15,11},{4,16,11},{7,16,11},{13,16,11},{15,16,11},{19,16,11},{24,16,11},{8,17,11},{9,17,11},!@#&  {12,17,11},{15,17,11},{19,17,11},{21,17,11},{22,17,11},{23,17,11},{2,18,4},{3,18,4},{4,18,4},{25,18,4},{5,19,4},!@#&  {6,19,4},{7,19,4},{8,19,4},{9,19,4},{10,19,4},{11,19,4},{12,19,4},{13,19,4},{14,19,4},{15,19,4},{16,19,4},{17,19,4},!@#&  {18,19,4},{19,19,4},{20,19,4},{21,19,4},{22,19,4},{23,19,4},{24,19,4}}!@#&!@#&  term.setBackgroundColor(colours.black)!@#&  term.clear()!@#&  !@#&  writeAt(version,(pocket and -2) or 36-#version,depth)!@#&  !@#&  term.setBackgroundColor(term.isColor() and colours.yellow or colours.white)!@#&  term.setTextColor(term.isColor() and colours.lightGrey or colours.black)!@#&  !@#&  if xSize > 48 then!@#&    term.setCursorPos(screenx-15,screeny)!@#&    term.write(string.rep(\"L\",53))!@#&    term.setCursorPos(screenx-15,screeny+20)!@#&    term.write(string.rep(\"L\",53))!@#&  !@#&    for i=1,depth do!@#&      term.setCursorPos(screenx-15,screeny+i)!@#&      term.write(\"L\")!@#&      term.setCursorPos(screenx+37,screeny+i)!@#&      term.write(\"L\")!@#&    end!@#&  end!@#&!@#&  while #introBlock > 0 do!@#&    for i=1,5 do if #introBlock > 0 then!@#&      temp = math.random(#introBlock)!@#&      if term.isColor() then term.setBackgroundColor(math.pow(2,introBlock[temp][3])) end!@#&      term.setCursorPos((xSize > 26 and screenx-15 or 0)+introBlock[temp][1],screeny+introBlock[temp][2])!@#&      term.write(\"L\")!@#&      table.remove(introBlock,temp)!@#&    end end!@#&    !@#&    temp = os.startTimer(0.05)!@#&    !@#&    while true do!@#&      myEvent = {os.pullEvent()}!@#&      !@#&      if myEvent[1] == \"timer\" and myEvent[2] == temp then!@#&        break!@#&      elseif myEvent[1] ~= \"timer\" and myEvent[1] ~= \"key_up\" and myEvent[1] ~= \"mouse_up\" then!@#&        return!@#&      end!@#&    end    !@#&  end!@#&  !@#&  temp = os.startTimer(2)!@#&  os.pullEvent()!@#&end!@#&!@#&---------------------------------------------!@#&------------      Help Pages     ------------!@#&---------------------------------------------!@#&!@#&-- Draw the frame for the help screen.!@#&local function prepareHelp()!@#&  term.setBackgroundColor(colours.black)!@#&  term.clear()!@#&  !@#&  writeAt(\"^\",35,2)!@#&  writeAt(\"|\",35,3)!@#&  writeAt(\"X\",35,10)!@#&  writeAt(\"|\",35,17)!@#&  writeAt(\"v\",35,18)!@#&  !@#&  term.setBackgroundColor(term.isColor() and colours.yellow or colours.white)!@#&  term.setTextColor(term.isColor() and colours.lightGrey or colours.black)!@#&  !@#&  term.setCursorPos(screenx-15,screeny)!@#&  term.write(string.rep(\"L\",53))!@#&  term.setCursorPos(screenx-15,screeny+depth+1)!@#&  term.write(string.rep(\"L\",53))!@#&  !@#&  for i=1,depth do!@#&    term.setCursorPos(screenx-15,screeny+i)!@#&    term.write(\"L\")!@#&    term.setCursorPos(screenx+37,screeny+i)!@#&    term.write(\"L\")!@#&  end!@#&end!@#&!@#&-- Write a given page of the manual.!@#&local function writeHelp(page)!@#&  local manual!@#&  !@#&  if page == 1 then!@#&    manual =!@#&    {\"BBTetris (\"..version..\")\",!@#&    string.rep(\"-\",11+#version),!@#&    \"\",!@#&    \"By Jeffrey Alexander, aka Bomb Bloke.\",!@#&    \"\",!@#&    \"Yet another Tetris clone, this one for\",!@#&    \"ComputerCraft.\",!@#&    \"\",!@#&    \"Playable via mouse when used with a touch-\",!@#&    \"capable display. If using an external\",!@#&    \"monitor, at least 3x2 blocks is required,\",!@#&    \"while 5x3 is recommended.\"}!@#&  elseif page == 2 then!@#&    manual =!@#&    {\"Basic Controls\",!@#&    \"--------------\",!@#&    \"\",!@#&    \"Use your arrow keys (or WSAD) for most\",!@#&    \"actions.\",!@#&    \"\",!@#&    \"On the main menu, left alters your level,\",!@#&    \"whilst right alters your speed. Use up/down\",!@#&    \"to change your game mode and space to start.\",!@#&    \"\",!@#&    \"Mouse-users may instead click the speed /\",!@#&    \"level / game mode toggles to change them,\",!@#&    \"then click the play area to begin.\"}!@#&  elseif page == 3 then!@#&    manual =!@#&    {\"Playing\",!@#&    \"-------\",!@#&    \"\",!@#&    \"Blocks fall according to the current speed,\",!@#&    \"which increases every 10k points. You win\",!@#&    \"if you somehow manage to reach 100k.\",!@#&    \"\",!@#&    \"Use the down arrow to drop the block\",!@#&    \"quickly, or the up arrow to rotate it.\",!@#&    \"\",!@#&    \"Space / enter can be used to rotate in the\",!@#&    \"opposite direction.\",!@#&    \"\",!@#&    \"100 points for a line, 300 for two, 700 for\",!@#&    \"three and 1500 for a Tetris (four lines)!\"}!@#&  elseif page == 4 then!@#&    manual =!@#&    {\"Playing (Mouse)\",!@#&    \"---------------\",!@#&    \"\",!@#&    \"Clicking the left side of the grid moves the\",!@#&    \"block to the left, and clicking the right\",!@#&    \"functions in a similar manner.\",!@#&    \"\",!@#&    \"Click the bottom of the grid to move the\",!@#&    \"block down quickly, or on the block itself\",!@#&    \"to rotate. You may click outside the main\",!@#&    \"play area to rotate the other way.\",!@#&    \"\",!@#&    \"The scroll-wheel can also be used to rotate\",!@#&    \"or move downwards quickly.\"}!@#&  elseif page == 5 then!@#&    manual =!@#&    {\"Alternate Modes\",!@#&    \"---------------\",!@#&    \"\",!@#&    \"There are three optional game modes\",!@#&    \"available, which can be combined together to\",!@#&    \"make your game easier/harder as is your\",!@#&    \"whim.\",!@#&    \"\",!@#&    \"Advanced mode increases the block pool to\",!@#&    \"nearly double, making for a more complex\",!@#&    \"game. Tricks come in the form of one of\",!@#&    \"three rare blocks, each of which has a\",!@#&    \"unique power. Quota mode tasks you to clear\",!@#&    \"pre-filled grids in order to advance levels.\"}!@#&  end!@#&  !@#&  for i=1,depth-2 do!@#&    if manual[i] then!@#&      writeAt(manual[i]..string.rep(\" \",44-#manual[i]),-13,i+1)!@#&    else!@#&      writeAt(string.rep(\" \",44),-13,i+1)!@#&    end!@#&  end!@#&end!@#&!@#&-- Explain stuff.!@#&local function help()!@#&  local page = 1!@#&  prepareHelp()!@#&  writeHelp(page)!@#&  !@#&  while true do!@#&    myEvent = {os.pullEvent()}!@#&    !@#&    if clickedAt(35,10) or pressedKey(keys.h,keys.x,keys.q) then!@#&      return!@#&    elseif myEvent[1] == \"monitor_resize\" and mon then!@#&      if myEvent[2] == mon.side then!@#&        enforceScreenSize()!@#&        prepareHelp()!@#&        writeHelp(page)!@#&      end!@#&    elseif clickedAt(35,1,4) or pressedKey(keys.w,keys.up) or (myEvent[1] == \"mouse_scroll\" and myEvent[2] == -1) then!@#&      page = (page==1) and 5 or (page-1)!@#&      writeHelp(page)!@#&    elseif clickedAt(35,16,19) or pressedKey(keys.s,keys.down) or (myEvent[1] == \"mouse_scroll\" and myEvent[2] == 1) then!@#&      page = (page==5) and 1 or (page+1)!@#&      writeHelp(page)!@#&    elseif myEvent[1] == \"terminate\" then!@#&      exitGame()!@#&    elseif myEvent[1] == \"musicFinished\" then!@#&      os.queueEvent(\"musicPlay\",musicFile)!@#&    end    !@#&  end  !@#&end!@#&!@#&---------------------------------------------!@#&------------      Main Menu      ------------!@#&---------------------------------------------!@#&!@#&local function menu()!@#&  running = true!@#&  drawNumeral()!@#&  writeAt((level>9 and \"\" or \" \")..tostring(level),17,15)!@#&  writeAt(tostring(speed),18,18)!@#&  !@#&  while running do!@#&    myEvent = {os.pullEvent()}!@#&    !@#&    if pressedKey(keys.left,keys.a) or clickedAt(13,19,13,16) then!@#&      level = (level == 12) and 0 or (level+1)!@#&      writeAt((level>9 and \"\" or \" \")..tostring(level),17,15)!@#&    elseif pressedKey(keys.right,keys.d) or clickedAt(13,19,16,19) then!@#&      speed = (speed == 9) and 0 or (speed+1)!@#&      writeAt(tostring(speed),18,18)!@#&    elseif pressedKey(keys.space,keys.enter) or clickedAt(1,12,0,20) then!@#&      running = false!@#&    elseif ((touchedMe() and myEvent[3] < screenx and myEvent[4] == screeny + 2) or pressedKey(keys.h)) and not pocket then!@#&      help()!@#&      drawBorder()!@#&      drawNumeral()!@#&      writeAt((level>9 and \"\" or \" \")..tostring(level),17,15)!@#&      writeAt(tostring(speed),18,18)!@#&    elseif pressedKey(keys.up,keys.w) or (myEvent[1] == \"mouse_scroll\" and myEvent[2] == -1) then!@#&      gamemode = (gamemode == 1) and 8 or (gamemode-1)!@#&      drawNumeral()!@#&    elseif pressedKey(keys.down,keys.s) or (myEvent[1] == \"mouse_scroll\" and myEvent[2] == 1) then!@#&      gamemode = (gamemode == 8) and 1 or (gamemode+1)!@#&      drawNumeral()!@#&    elseif pressedKey(keys.x,keys.q) then!@#&      os.pullEvent(\"char\")!@#&      exitGame()!@#&    elseif myEvent[1] == \"terminate\" then!@#&      exitGame()!@#&    elseif touchedMe() and myEvent[3] > screenx+21 then!@#&      term.setTextColor(term.isColor() and colours.red or colours.white)!@#&      term.setCursorPos(myEvent[3],myEvent[4])!@#&      for i=0,2 do if myEvent[4] == screeny + 14 + i * 2 then!@#&        gamemode = gamemode + (bit.band(gamemode-1,bit.blshift(1,i))==bit.blshift(1,i) and (-bit.blshift(1,i)) or bit.blshift(1,i))!@#&        drawNumeral()!@#&        break!@#&      end end!@#&      if myEvent[4] == screeny + 2 then exitGame() end!@#&    elseif myEvent[1] == \"monitor_resize\" and mon then!@#&      if myEvent[2] == mon.side then!@#&        enforceScreenSize()!@#&        drawBorder()!@#&        drawNumeral()!@#&        writeAt((level>9 and \"\" or \" \")..tostring(level),17,15)!@#&        writeAt(tostring(speed),18,18)!@#&      end!@#&    elseif myEvent[1] == \"peripheral_detach\" and mon then!@#&      if myEvent[2] == mon.side then exitGame(\"I've lost my monitor - your turtle didn't mine it, I hope?\") end!@#&    end!@#&  end!@#&end!@#&!@#&---------------------------------------------!@#&------------Primary Game Function------------!@#&---------------------------------------------!@#&!@#&local function game()!@#&  local falling, knocked, score, curBlock, nextSpeed, startSpeed, startLevel, loaded, rotation = true, false, 0, 1, 9999, speed, level, false, 0!@#&  local nextBlock = math.random(bit.band(gamemode,1)==1 and 7 or 13)!@#&  local x, y, blockTimer, lines, held, flicker, flickerTimer!@#&  !@#&  os.queueEvent(\"musicPlay\",musicFile)!@#&  os.queueEvent(playMusic and \"musicResume\" or \"musicPause\")!@#&  !@#&  for i=1,depth do grid[i] = {} end!@#&  !@#&  -- Resume an old game?!@#&  if saves[gamemode] then!@#&    writeAt(\" Load old \",2,9)!@#&    writeAt(\"   game   \",2,10)!@#&    writeAt(\"[Y]es [N]o\",2,11)!@#&    !@#&    while true do!@#&      myEvent = {os.pullEvent()}!@#&          !@#&      if pressedKey(keys.y) or clickedAt(3,11) then!@#&        running = true!@#&        break!@#&      elseif pressedKey(keys.n) or clickedAt(9,11) then!@#&        running = false!@#&        break!@#&      elseif myEvent[1] == \"monitor_resize\" and mon then!@#&        if myEvent[2] == mon.side then!@#&          enforceScreenSize()!@#&          redrawGame(score)!@#&            !@#&          writeAt(\" Load old \",2,9)!@#&          writeAt(\"   game   \",2,10)!@#&          writeAt(\"[Y]es [N]o\",2,11)!@#&        end!@#&      elseif myEvent[1] == \"peripheral_detach\" and mon then!@#&        if myEvent[2] == mon.side then exitGame(\"I've lost my monitor - your turtle didn't mine it, I hope?\") end!@#&      elseif myEvent[1] == \"terminate\" then!@#&        exitGame()      !@#&      end!@#&    end!@#&    !@#&    if running then!@#&      x          = saves[gamemode][\"x\"]!@#&      y          = saves[gamemode][\"y\"]!@#&      rotation   = saves[gamemode][\"rotation\"]!@#&      curBlock   = saves[gamemode][\"curBlock\"]!@#&      nextBlock  = saves[gamemode][\"nextBlock\"]!@#&      score      = saves[gamemode][\"score\"]!@#&      speed      = saves[gamemode][\"speed\"]!@#&      nextSpeed  = saves[gamemode][\"nextSpeed\"]!@#&      startSpeed = saves[gamemode][\"startSpeed\"]!@#&      level      = saves[gamemode][\"level\"]!@#&      startLevel = saves[gamemode][\"startLevel\"]!@#&      grid       = saves[gamemode][\"grid\"]!@#&      saves[gamemode] = nil!@#&      loaded = true!@#&    end!@#&  end !@#&!@#&  running = true!@#&!@#&  -- Clear off the menu.!@#&  term.setBackgroundColor(colours.black)!@#&  for i=1,7 do!@#&    term.setCursorPos(screenx+2,screeny+i+6)!@#&    term.write(string.rep(\" \",10))!@#&  end  !@#&  !@#&  if loaded then!@#&    term.setTextColor(term.isColor() and colours.lightGrey or colours.black)!@#&    for yy=1,depth do!@#&      term.setCursorPos(screenx+2,screeny+yy)!@#&      for xx=1,10 do if grid[depth+1-yy][xx] ~= nil then!@#&        term.setBackgroundColor(term.isColor() and bit.blshift(1,grid[depth+1-yy][xx]) or colours.white)!@#&        term.write(\"L\")!@#&      else!@#&        term.setBackgroundColor(colours.black)!@#&        term.write(\" \")!@#&      end end!@#&    end  !@#&  else fillGrid() end!@#&!@#&  writeAt(\"[P]ause\",pocket and 21 or 22,4)!@#&  if note then writeAt(\"[M]usic\",22,6) end!@#&  writeAt(\"Next\",14,1)!@#&  writeAt(\"Score\",14,8)!@#&  writeAt(string.rep(\" \",6-#tostring(score))..tostring(score),13,9)!@#&  writeAt((level>9 and \"\" or \" \")..tostring(level),17,15)!@#&  writeAt(tostring(speed),18,18)!@#&  !@#&  -- Primary game loop.  !@#&  while running do!@#&    if rotation < 4 then  -- The last type of block \"may\" persist after line checks.!@#&      if loaded then!@#&        loaded = false!@#&      else!@#&        curBlock = nextBlock!@#&      !@#&        -- Change the \"next block\" display.!@#&        drawBlock(nextBlock,0,(#block[nextBlock][1] < 3 and 15 or 14),(#block[nextBlock] < 3 and 3 or 2), false, false)!@#&        nextBlock = math.random(bit.band(gamemode,1)==1 and 7 or 13)!@#&        !@#&        -- Trick block will be next!!@#&        if bit.band(gamemode-1,2)==2 and math.random(20) == 20 then nextBlock = 13 + math.random(3) end!@#&      !@#&        -- Prepare a new falling block.!@#&        x, y, rotation = (#block[curBlock][1] < 4 and 5 or 4), 1, 0!@#&      end!@#&      !@#&      drawBlock(nextBlock,0,(#block[nextBlock][1] < 3 and 15 or 14),(#block[nextBlock] < 3 and 3 or 2), true, nextBlock>13)!@#&      drawBlock(curBlock,rotation,x,y,true,false)!@#&          !@#&      -- Can play continue?!@#&      if checkBlock(curBlock,rotation,x,y) then!@#&        falling, knocked, flicker, blockTimer, flickerTimer = true, false, false, os.startTimer((10-speed)/10), os.startTimer(0.3)!@#&      else running = false end!@#&    else!@#&      falling, rotation, flickerTimer = true, 0, os.startTimer(0)!@#&      drawBlock(curBlock,rotation,x,y,true,flicker)!@#&    end!@#&    !@#&    -- Stuff that happens while a block falls.!@#&    while falling do!@#&      myEvent = {os.pullEvent()}!@#&      !@#&      -- Is the user still holding down \"down\" after the last block fell?!@#&      if held then!@#&        if not ((myEvent[1] == \"timer\" and myEvent[2] ~= blockTimer)!@#&          or pressedKey(keys.down,keys.s) or myEvent[1] == \"char\")!@#&          then held = false end!@#&      end!@#&      !@#&      -- Trick blocks flash.!@#&      if myEvent[1] == \"timer\" and myEvent[2] == flickerTimer and curBlock > 13 then!@#&        flicker = not flicker!@#&        flickerTimer = os.startTimer(0.3)!@#&        drawBlock(curBlock,rotation,x,y,true,flicker)!@#&!@#&      elseif curBlock > 14 and (clickedAt(x,x+1+(bit.band(rotation,1)==1 and #block[curBlock] or #block[curBlock][1]),y-1,y+(bit.band(rotation,1)==1 and #block[curBlock][1] or #block[curBlock])) or pressedKey(keys.up,keys.w,keys.space,keys.enter)) then!@#&        !@#&        -- Erasure!!@#&        if curBlock == 15 then!@#&          for i=depth-1-y,1,-1 do if grid[i][x] ~= nil then!@#&            term.setCursorPos(screenx+1+x,screeny+depth+1-i)!@#&            term.setBackgroundColor(colours.black)!@#&            term.write(\" \")!@#&            grid[i][x] = nil!@#&            break!@#&          end end!@#&          !@#&          if bit.band(gamemode-1,4)==4 then!@#&            -- Possible to fulfil the quota here without creating a line.!@#&            lines = 0!@#&            for yy=1,depth do for xx=1,10 do if grid[xx][yy] == 14 then!@#&              yy=depth!@#&              xx=10!@#&              lines = 1!@#&            end end end!@#&          !@#&            if lines ~= 1 then!@#&              score = score + 10000!@#&              level = level + 1!@#&              rotation = 0!@#&              falling = false!@#&              gameover()!@#&              fillGrid()!@#&              !@#&              writeAt(string.rep(\" \",6-#tostring(score))..tostring(score),13,9)!@#&        !@#&              if score > 99999 then running = false end!@#&        !@#&              -- Check for a score record.        !@#&              if score > highScore[gamemode] then!@#&                highScore[gamemode] = score!@#&                writeAt(string.rep(\" \",6-#tostring(highScore[gamemode]))..tostring(highScore[gamemode]),13,12)!@#&              end!@#&        !@#&              writeAt((level>9 and \"\" or \" \")..tostring(level),17,15)!@#&              !@#&              -- Increment speed.!@#&              nextSpeed = nextSpeed + 10000!@#&              speed = (speed==9) and 9 or (speed+1)!@#&              writeAt(tostring(speed),18,18)!@#&            end!@#&          end!@#&          !@#&        -- Fill!!@#&        elseif curBlock == 16 and grid[depth-2-y][x] == nil then!@#&          rotation = 1!@#&          for i=1,depth-3-y do if grid[i][x] ~= nil then rotation = i+1 end end!@#&          term.setCursorPos(screenx+1+x,screeny+depth+1-rotation)!@#&          term.setBackgroundColor(colours.white)!@#&          term.setTextColor(term.isColor() and colours.lightGrey or colours.black)!@#&          term.write(\"L\")!@#&          grid[rotation][x] = 32!@#&          falling, rotation = false, 20 + rotation  -- Rotation used here as a flag to indicate we're still actually falling.!@#&        end!@#&        !@#&      -- Block rotation.!@#&      elseif (clickedAt(x,x+1+(bit.band(rotation,1)==1 and #block[curBlock] or #block[curBlock][1]),y-1,y+(bit.band(rotation,1)==1 and #block[curBlock][1] or #block[curBlock])) or pressedKey(keys.up,keys.w) or (myEvent[1] == \"mouse_scroll\" and myEvent[2] == -1)) and checkBlock(curBlock,rotation==3 and 0 or (rotation+1),x,y) then!@#&        drawBlock(curBlock,rotation,x,y,false,flicker)!@#&        rotation = (rotation==3) and 0 or (rotation+1)!@#&        drawBlock(curBlock,rotation,x,y,true,flicker)  !@#&          !@#&      elseif (myEvent[1] == \"timer\" and myEvent[2] == blockTimer) or clickedAt(1,12,depth-2,depth+1) or (pressedKey(keys.down,keys.s) and not held) or (myEvent[1] == \"mouse_scroll\" and myEvent[2] == 1) then!@#&        !@#&        -- Move the block down if we can.!@#&        if checkBlock(curBlock,rotation,x,y+1) then!@#&          drawBlock(curBlock,rotation,x,y,false,flicker)!@#&          y = y + 1!@#&          drawBlock(curBlock,rotation,x,y,true,flicker)!@#&          knocked = false!@#&          !@#&        -- Brick's stopped moving down, add it to the grid.!@#&        elseif knocked then!@#&          if curBlock < 15 then!@#&            for yy=1,#block[curBlock] do for xx=1,#block[curBlock][1] do if block[curBlock][yy][xx] == 1 then!@#&              if rotation == 0 then!@#&                grid[depth+2-y-yy][x+xx-1] = (curBlock == 14 and 15 or curBlock)!@#&              elseif rotation == 1 then!@#&                grid[depth+2-y-xx][x+#block[curBlock]-yy] = (curBlock == 14 and 15 or curBlock)!@#&              elseif rotation == 2 then!@#&                grid[depth+1-y-#block[curBlock]+yy][x+#block[curBlock][1]-xx] = (curBlock == 14 and 15 or curBlock)!@#&              elseif rotation == 3 then!@#&                grid[depth+1-y-#block[curBlock][1]+xx][x+yy-1] = (curBlock == 14 and 15 or curBlock)!@#&              end!@#&            end end end!@#&          end!@#&          !@#&          if curBlock > 13 then drawBlock(curBlock,rotation,x,y,curBlock==14,false) end!@#&          falling = false!@#&          held = true -- This is used to stop the NEXT block being pelted downwards if you were holding a \"down\" button.!@#&          !@#&        -- Brick has \"knocked\" other bricks, but hasn't yet locked in place.!@#&        else knocked = true end!@#&        !@#&        if falling then blockTimer = os.startTimer((10-speed)/10) end!@#&      !@#&      -- Pause the game.!@#&      elseif (myEvent[1] == \"monitor_resize\" and mon) or pressedKey(keys.p) or (touchedMe() and myEvent[3] > screenx+21 and myEvent[4] == screeny+4) then!@#&        -- Something altered my monitor!!@#&        if myEvent[1] == \"monitor_resize\" and mon then!@#&          if myEvent[2] == mon.side then!@#&            enforceScreenSize()!@#&            redrawGame(score)!@#&            drawBlock(curBlock,rotation,x,y,true,flicker)!@#&            drawBlock(nextBlock,0,(#block[nextBlock][1] < 3 and 15 or 14),(#block[nextBlock] < 3 and 3 or 2), true, nextBlock>13)!@#&          end!@#&        end  !@#&        !@#&        writeAt(\"  PAUSED  \",2,10)!@#&        blockTimer = os.startTimer(1)!@#&        !@#&        while true do!@#&          myEvent = {os.pullEvent()}!@#&!@#&          if myEvent[1] == \"key\" or touchedMe() then!@#&            break!@#&          elseif myEvent[1] == \"monitor_resize\" and mon then!@#&            if myEvent[2] == mon.side then!@#&              enforceScreenSize()!@#&              redrawGame(score)!@#&              drawBlock(curBlock,rotation,x,y,true,flicker)!@#&              drawBlock(nextBlock,0,(#block[nextBlock][1] < 3 and 15 or 14),(#block[nextBlock] < 3 and 3 or 2), true, nextBlock>13)!@#&            !@#&              falling = not falling!@#&              writeAt(falling and \"  PAUSED  \" or string.rep(\" \",10),2,10)!@#&              blockTimer = os.startTimer(1)!@#&            end!@#&          elseif myEvent[1] == \"timer\" and myEvent[2] == blockTimer then!@#&            falling = not falling!@#&            writeAt(falling and \"  PAUSED  \" or string.rep(\" \",10),2,10)!@#&            blockTimer = os.startTimer(1)!@#&          elseif myEvent[1] == \"peripheral_detach\" and mon then!@#&           if myEvent[2] == mon.side then exitGame(\"I've lost my monitor - your turtle didn't mine it, I hope?\") end!@#&          elseif myEvent[1] == \"terminate\" then!@#&            exitGame()!@#&          elseif myEvent[1] == \"musicFinished\" then!@#&            os.queueEvent(\"musicPlay\",musicFile)!@#&          end!@#&        end!@#&                  !@#&        term.setTextColor(term.isColor() and colours.lightGrey or colours.black)!@#&        term.setCursorPos(screenx+2,screeny+10)!@#&        for xx=1,10 do if grid[10][xx] ~= nil then!@#&          term.setBackgroundColor(term.isColor() and bit.blshift(1,grid[10][xx]) or colours.white)!@#&          term.write(\"L\")!@#&        else!@#&          term.setBackgroundColor(colours.black)!@#&          term.write(\" \")!@#&        end end!@#&        drawBlock(curBlock,rotation,x,y,true,flicker)!@#&        blockTimer, flickerTimer, falling = os.startTimer((10-speed)/10), os.startTimer(0.3), true!@#&        !@#&      -- Toggle music playback.!@#&      elseif pressedKey(keys.m) or (touchedMe() and myEvent[3] > screenx+21 and myEvent[4] == screeny+6) then!@#&        playMusic = not playMusic!@#&        os.queueEvent(playMusic and \"musicResume\" or \"musicPause\")!@#&      	!@#&      -- Repeat music.!@#&      elseif myEvent[1] == \"musicFinished\" then!@#&        os.queueEvent(\"musicPlay\",musicFile)!@#&      !@#&      -- Display the help screen.!@#&      elseif ((touchedMe() and myEvent[3] < screenx and myEvent[4] == screeny + 2) or pressedKey(keys.h)) and not pocket then!@#&        help()!@#&        redrawGame(score)!@#&        drawBlock(curBlock,rotation,x,y,true,flicker)!@#&        drawBlock(nextBlock,0,(#block[nextBlock][1] < 3 and 15 or 14),(#block[nextBlock] < 3 and 3 or 2), true, nextBlock>13)!@#&        blockTimer, flickerTimer = os.startTimer((10-speed)/10), os.startTimer(0.3)!@#&      !@#&      -- User is attempting to end game.!@#&      elseif pressedKey(keys.x,keys.q) or (touchedMe() and myEvent[3] > screenx+21 and myEvent[4] == screeny+2) then!@#&        if canSave then!@#&          writeAt(\" Save the \",2,9)!@#&          writeAt(\"   game   \",2,10)!@#&          writeAt(\"[Y]es [N]o\",2,11)!@#&!@#&          while true do!@#&            myEvent = {os.pullEvent()}!@#&            !@#&            if pressedKey(keys.y) or clickedAt(3,11) then!@#&              running = true!@#&              break!@#&            elseif pressedKey(keys.n) or clickedAt(9,11) then!@#&              running = false!@#&              break!@#&            elseif myEvent[1] == \"monitor_resize\" and mon then!@#&              if myEvent[2] == mon.side then!@#&                enforceScreenSize()!@#&                redrawGame(score)!@#&                drawBlock(curBlock,rotation,x,y,true,flicker)!@#&                drawBlock(nextBlock,0,(#block[nextBlock][1] < 3 and 15 or 14),(#block[nextBlock] < 3 and 3 or 2), true, nextBlock>13)!@#&            !@#&                writeAt(\" Save the \",2,9)!@#&                writeAt(\"   game   \",2,10)!@#&                writeAt(\"[Y]es [N]o\",2,11)!@#&              end!@#&            elseif myEvent[1] == \"peripheral_detach\" and mon then!@#&              if myEvent[2] == mon.side then exitGame(\"I've lost my monitor - your turtle didn't mine it, I hope?\") end!@#&            elseif myEvent[1] == \"terminate\" then!@#&              exitGame()!@#&            end!@#&          end!@#&        else running = false end!@#&!@#&        -- User wants to save current progress.!@#&        if running then!@#&          saves[gamemode] = {}!@#&          saves[gamemode][\"x\"] = x!@#&          saves[gamemode][\"y\"] = y!@#&          saves[gamemode][\"rotation\"] = rotation!@#&          saves[gamemode][\"curBlock\"] = curBlock!@#&          saves[gamemode][\"nextBlock\"] = nextBlock!@#&          saves[gamemode][\"score\"] = score!@#&          saves[gamemode][\"speed\"] = speed!@#&          saves[gamemode][\"nextSpeed\"] = nextSpeed!@#&          saves[gamemode][\"startSpeed\"] = startSpeed!@#&          saves[gamemode][\"level\"] = level!@#&          saves[gamemode][\"startLevel\"] = startLevel!@#&          saves[gamemode][\"grid\"] = {}!@#&          for yy=1,depth do!@#&            saves[gamemode][\"grid\"][yy] = {}!@#&            for a,b in pairs(grid[yy]) do saves[gamemode][\"grid\"][yy][a] = b end!@#&          end!@#&        end!@#&        !@#&        falling, running, rotation = false, false, 10  -- Rotation used here as a flag to bypass the \"game over\" animation.!@#&      !@#&      -- User is trying to out-right quit the game.!@#&      elseif myEvent[1] == \"terminate\" then!@#&        exitGame()!@#&      !@#&      -- Move block left.!@#&      elseif (clickedAt(1,7,0,depth-1) or pressedKey(keys.left,keys.a)) and checkBlock(curBlock,rotation,x-1,y) then!@#&        drawBlock(curBlock,rotation,x,y,false,flicker)!@#&        x = x - 1!@#&        drawBlock(curBlock,rotation,x,y,true,flicker)!@#&       !@#&      -- Move block right.!@#&      elseif (clickedAt(6,12,0,depth-1) or pressedKey(keys.right,keys.d)) and checkBlock(curBlock,rotation,x+1,y) then!@#&        drawBlock(curBlock,rotation,x,y,false,flicker)!@#&        x = x + 1!@#&        drawBlock(curBlock,rotation,x,y,true,flicker)!@#&        !@#&      -- Rotating the other way.!@#&      elseif ((touchedMe() and (myEvent[3] < screenx+1 or myEvent[3] > screenx+12)) or pressedKey(keys.space,keys.enter)) and checkBlock(curBlock,rotation==0 and 3 or (rotation-1),x,y) and curBlock < 14 then!@#&        drawBlock(curBlock,rotation,x,y,false,flicker)!@#&        rotation = (rotation==0) and 3 or (rotation-1)!@#&        drawBlock(curBlock,rotation,x,y,true,flicker)         !@#&      !@#&      elseif myEvent[1] == \"peripheral_detach\" and mon then!@#&        if myEvent[2] == mon.side then exitGame(\"I've lost my monitor - your turtle didn't mine it, I hope?\") end!@#&      end  !@#&    end!@#&    !@#&    -- Look for complete lines.!@#&    if running then!@#&      lines = {}!@#&      for yy=((rotation>3) and (40-rotation) or y),((rotation>3) and (40-rotation) or y+(bit.band(rotation,1)==1 and #block[curBlock][1] or #block[curBlock])-1) do!@#&        falling = true!@#&        !@#&        for xx=1,10 do if yy < depth+1 then!@#&          if grid[depth+1-yy][xx] == nil then!@#&            falling = false!@#&            break!@#&          end!@#&        else falling = false end end!@#&        !@#&        if falling then!@#&          lines[#lines+1] = yy!@#&          table.remove(grid,depth+1-yy)!@#&          grid[depth] = {}!@#&        end!@#&      end!@#&      !@#&      if #lines > 0 then!@#&        !@#&        -- Blink the complete lines a few times.!@#&        falling = true!@#&        term.setBackgroundColor(term.isColor() and colours.black or colours.white)!@#&        term.setTextColor(term.isColor() and colours.lightGrey or colours.black)!@#&        for i=1,6 do!@#&          if not term.isColor() then term.setBackgroundColor(falling and colours.white or colours.black) end!@#&          for j=1,#lines do!@#&            term.setCursorPos(screenx+2,screeny+lines[j])!@#&            term.write(string.rep(falling and \"L\" or \" \",10))!@#&          end!@#&          falling = not falling!@#&          !@#&          blockTimer = os.startTimer(0.1)!@#&          while myEvent[2] ~= blockTimer do myEvent = {os.pullEvent(\"timer\")} end!@#&        end!@#&        !@#&        -- Collapse the on-screen grid.!@#&        for yy=1,lines[#lines] do!@#&          term.setCursorPos(screenx+2,screeny+yy)!@#&          for xx=1,10 do if grid[depth+1-yy][xx] ~= nil then!@#&            term.setBackgroundColor(term.isColor() and bit.blshift(1,grid[depth+1-yy][xx]) or colours.white)!@#&            term.write(\"L\")!@#&          else!@#&            term.setBackgroundColor(colours.black)!@#&            term.write(\" \")!@#&          end end!@#&        end!@#&        !@#&        if bit.band(gamemode-1,4)==4 then!@#&          -- Quota reached?!@#&          for yy=1,depth do for xx=1,10 do if grid[xx][yy] == 14 then!@#&            yy=depth!@#&            xx=10!@#&            lines = 1!@#&          end end end!@#&          !@#&          if lines ~= 1 then!@#&            score = score + 10000!@#&            level = level + 1!@#&            rotation = 0!@#&            falling = false!@#&            gameover()!@#&            fillGrid()!@#&          end!@#&        else!@#&          -- Increment score in the usual way.!@#&          if #lines == 1 then!@#&            score = score + 100!@#&          elseif #lines == 2 then!@#&            score = score + 300!@#&          elseif #lines == 3 then!@#&            score = score + 700!@#&          elseif #lines == 4 then!@#&            score = score + 1500!@#&          end!@#&        end!@#&        !@#&        writeAt(string.rep(\" \",6-#tostring(score))..tostring(score),13,9)!@#&        !@#&        if score > 99999 then running = false end!@#&        !@#&        -- Check for a score record.        !@#&        if score > highScore[gamemode] then!@#&          highScore[gamemode] = score!@#&          writeAt(string.rep(\" \",6-#tostring(highScore[gamemode]))..tostring(highScore[gamemode]),13,12)!@#&        end!@#&        !@#&        writeAt((level>9 and \"\" or \" \")..tostring(level),17,15)!@#&        !@#&        -- Increment speed?!@#&        if score > nextSpeed then!@#&          nextSpeed = nextSpeed + 10000!@#&          speed = (speed==9) and 9 or (speed+1)!@#&          writeAt(tostring(speed),18,18)!@#&        end!@#&        !@#&        blockTimer = os.startTimer((10-speed)/10)!@#&      end!@#&    end!@#&  end!@#&!@#&  -- Game over.!@#&  if rotation < 4 then!@#&    writeAt(score < 100000 and \"GAME  OVER\" or \"!!WINNER!!\",2,10)!@#&    !@#&    -- Assign bonus points.!@#&    score = score + (100*startSpeed) + startLevel!@#&    writeAt(string.rep(\" \",6-#tostring(score))..tostring(score),13,9)!@#&    !@#&    -- Check for a score record.        !@#&    if score > highScore[gamemode] then!@#&      highScore[gamemode] = score!@#&      writeAt(string.rep(\" \",6-#tostring(highScore[gamemode]))..tostring(highScore[gamemode]),13,12)!@#&    end!@#&!@#&    gameover()!@#&  end!@#&!@#&  speed = startSpeed!@#&  level = startLevel!@#&end!@#&!@#&---------------------------------------------!@#&------------         Init        ------------!@#&---------------------------------------------!@#&!@#&-- Override the event-puller.!@#&OGeventPuller = os.pullEvent!@#&os.pullEvent = os.pullEventRaw!@#&!@#&-- Load the INI file.!@#&if fs.exists(shell.resolve(\".\")..\"/SpeedOS/Applications/GameBox/bbtetris.ini\") then!@#&  local readIn, readTable  !@#&  myEvent = fs.open(shell.resolve(\".\")..\"/SpeedOS/Applications/GameBox/bbtetris.ini\", \"r\")!@#&  readIn = myEvent.readLine()  !@#&  !@#&  while readIn do!@#&    readTable = {}!@#&    readIn = readIn:gsub(\"=\",\" \"):lower()!@#&    for i in readIn:gmatch(\"%S+\") do readTable[#readTable+1] = i end    !@#&    !@#&    if readTable[1] == \"nointro\" and readTable[2] then!@#&      if readTable[2] == \"yes\" or readTable[2] == \"y\" or readTable[2] == \"true\" or readTable[2] == \"on\" or readTable[2] == \"1\" then skipIntro = true end!@#&    elseif readTable[1] == \"nomonitor\" and readTable[2] then!@#&      if readTable[2] == \"yes\" or readTable[2] == \"y\" or readTable[2] == \"true\" or readTable[2] == \"on\" or readTable[2] == \"1\" then skipMonitor = true end!@#&    elseif readTable[1] == \"defaultmonitorside\" and readTable[2] then!@#&      defaultMonitor = readTable[2]!@#&    elseif readTable[1] == \"defaultspeed\" and tonumber(readTable[2]) then!@#&      if tonumber(readTable[2]) > -1 and tonumber(readTable[2]) < 10 then speed = tonumber(readTable[2]) end!@#&    elseif readTable[1] == \"defaultlevel\" and tonumber(readTable[2]) then!@#&      if tonumber(readTable[2]) > -1 and tonumber(readTable[2]) < 13 then level = tonumber(readTable[2]) end!@#&    elseif readTable[1] == \"defaultmode\" and tonumber(readTable[2]) then!@#&      if tonumber(readTable[2]) > 0 and tonumber(readTable[2]) < 9 then gamemode = tonumber(readTable[2]) end!@#&    elseif readTable[1] == \"nomusic\" and readTable[2] then!@#&      if readTable[2] == \"yes\" or readTable[2] == \"y\" or readTable[2] == \"true\" or readTable[2] == \"on\" or readTable[2] == \"1\" then playMusic = false end !@#&    end!@#&      !@#&    readIn = myEvent.readLine()!@#&  end!@#&  !@#&  myEvent.close()!@#&else!@#&  myEvent = fs.open(shell.resolve(\".\")..\"/SpeedOS/Applications/GameBox/bbtetris.ini\", \"w\")!@#&  !@#&  if myEvent then!@#&    myEvent.writeLine(\"NoIntro = \")!@#&    myEvent.writeLine(\"NoMonitor = \")!@#&    myEvent.writeLine(\"NoMusic = \")!@#&    myEvent.writeLine(\"DefaultMonitorSide = \")!@#&    myEvent.writeLine(\"DefaultSpeed = \")!@#&    myEvent.writeLine(\"DefaultLevel = \")!@#&    myEvent.writeLine(\"DefaultMode = \")!@#&    myEvent.close()!@#&  else canSave = false end!@#&end!@#&!@#&-- Load saved data.!@#&if fs.exists(shell.resolve(\".\")..\"/SpeedOS/Applications/GameBox/bbtetris.dat\") then!@#&  myEvent = fs.open(shell.resolve(\".\")..\"/SpeedOS/Applications/GameBox/bbtetris.dat\", \"r\")!@#&  highScore = myEvent.readLine()!@#&  highScore = textutils.unserialize(myEvent.readLine())!@#&  saves = textutils.unserialize(myEvent.readLine())!@#&  myEvent.close()!@#&end!@#&!@#&if type(highScore) == \"table\" then!@#&  for i=#highScore+1,8 do highScore[i] = 0 end!@#&else!@#&  highScore = {}!@#&  for i=1,8 do highScore[i] = 0 end!@#&end!@#&!@#&-- Look for a monitor to use.!@#&if not skipMonitor then!@#&  if defaultMonitor then!@#&    if peripheral.getType(defaultMonitor) == \"monitor\" and peripheral.call(defaultMonitor, \"isColour\") then!@#&      term.clear()!@#&      term.setCursorPos(1,1)!@#&      print(\"Game in progress on attached display...\")!@#&            !@#&      mon = peripheral.wrap(defaultMonitor)!@#&      mon.side = defaultMonitor!@#&      if not term.restore then mon.restoreTo = term.current() end!@#&      term.redirect(mon)!@#&      enforceScreenSize()!@#&    else !@#&      exitGame(\"The \\\"monitor\\\" at location \\\"\"..defaultMonitor..\"\\\" (specified in \\\"/SpeedOS/Applications/GameBox/bbtetris.ini\\\") is invalid. Please fix that.\")!@#&    end!@#&  else!@#&    print(\"d\")!@#&end!@#&end!@#&!@#&-- Ensure the display is suitable.!@#&screenx,screeny = term.getSize()!@#&pocket, depth = screenx < 50, screeny > 19 and 20 or 19 !@#&if (screenx < 26 or screeny < 19) and not pocket then error(\"\\nA minimum display resolution of 26 columns by 19 rows is required.\\n\\nIf you're trying to run me on eg a turtle, please try a regular computer.\\n\",0) end!@#&screenx,screeny = math.floor(screenx/2)-10, pocket and 0 or math.floor(screeny/2)-9!@#&!@#&-- Load the music player, if possible.!@#&if peripheral.find and peripheral.find(\"iron_note\") and fs.exists(\"/moarp/note\") and fs.exists(musicFile) then os.loadAPI(\"/moarp/note\") end!@#&!@#&-- Show the splash screen.!@#&if not skipIntro then intro() end!@#&!@#&---------------------------------------------!@#&------------  Main Program Loop  ------------!@#&---------------------------------------------!@#&!@#&while true do!@#&  drawBorder()!@#&  menu()!@#&  if note then parallel.waitForAny(game, note.songEngine) else game() end!@#&end",["GameBox"]="scroll = 0!@#&gamelist = {}!@#&barscroll = 0!@#&barArea = 18!@#&oldpos=0!@#&!@#&fs.makeDir(\"/SpeedOS/Applications/GameBox/games/\")!@#&os.loadAPI(\"/SpeedAPI/bsod\")!@#&!@#&function TSCP(x,y,string)!@#&  term.setCursorPos(x,y)!@#&  write(string)!@#&end!@#&!@#&function clear()!@#&  term.setBackgroundColor(colors.black)!@#&  term.setTextColor(colors.white)!@#&  term.clear()!@#&end!@#&!@#&function drawBar()!@#&	if(endnum>35)then!@#&		barLength = 1!@#&		scrollamount = (endnum-19)/barArea!@#&	elseif(endnum<=19)then!@#&		barLength = barArea!@#&		scrollamount = 0!@#&	else!@#&		barLength = (38-(19-barArea))-endnum!@#&		scrollamount = 1!@#&	end!@#&	term.setBackgroundColor(colors.lightGray)!@#&	for place=2,19,1 do!@#&		term.setCursorPos(51,place)!@#&		write(\" \")!@#&	end!@#&	term.setBackgroundColor(colors.gray)!@#&	for place=1,barLength,1 do!@#&		term.setCursorPos(51,barscroll+place+1)!@#&		write(\" \")!@#&	end!@#&	term.setBackgroundColor(colors.black)!@#&end!@#&!@#&function drawGames()!@#&	numgames = 0!@#&	term.setBackgroundColor(colors.black)!@#&	shell.run(\"clear\")!@#&	games = fs.list(\"/SpeedOS/Applications/GameBox/games\")!@#&	for _,file in ipairs(games) do!@#&		open = fs.open(\"/SpeedOS/Applications/GameBox/games/\"..file , \"r\")!@#&		local name = open.readLine()!@#&		gamelist[file] = {}!@#&		gamelist[file][\"filename\"] = name!@#&		for x,y in open.readLine():gmatch(\"([^%s]+),(.*)\") do!@#&			gamelist[file][\"x\"] = tonumber(x)!@#&			gamelist[file][\"y\"] = tonumber(y)!@#&		end!@#&		term.setBackgroundColor(colors.gray)!@#&		term.setTextColor(colors.white)!@#&		for place=0,5,1 do!@#&			TSCP(gamelist[file][\"x\"],gamelist[file][\"y\"]+place-(scroll),open.readLine())!@#&		end!@#&		open.close()!@#&		numgames = numgames+1!@#&	end!@#&	term.setBackgroundColor(colors.red)!@#&	term.setCursorPos(49,1)!@#&	write(\" X \")!@#&	term.setBackgroundColor(colors.blue)!@#&	TSCP(1,1,\"Game Box     New Game                           \")!@#&	term.setBackgroundColor(colors.black)!@#&	term.setTextColor(colors.white)!@#&	endnum = 7*(math.ceil(numgames/4)-1)+19!@#&	--write(endnum)!@#&	drawBar()!@#&end!@#&!@#&function drawMenu(name,x,y)!@#&	term.setBackgroundColor(colors.lightGray)!@#&	term.setTextColor(colors.black)!@#&	term.setCursorPos(x,y)!@#&	write(\"             \")!@#&	term.setCursorPos(x,y)!@#&	write(name)!@#&	term.setBackgroundColor(colors.white)!@#&	term.setTextColor(colors.black)!@#&	for derp=1,2,1 do!@#&		term.setCursorPos(x,y+derp)!@#&		write(\"             \")!@#&	end!@#&	term.setCursorPos(x,y+1)!@#&	write(\"Edit\")!@#&	term.setCursorPos(x,y+2)!@#&	write(\"Delete\")!@#&	term.setBackgroundColor(colors.red)!@#&	term.setTextColor(colors.white)!@#&	term.setCursorPos(x+10,y)!@#&	write(\" X \")!@#&end!@#&!@#&function menu1(name,othername,x,y)!@#&	while true do!@#&		drawMenu(name,x,y)!@#&		local Event,key,xpos,ypos = os.pullEvent(\"mouse_click\")!@#&		if(xpos>=x and xpos<=x+13)then!@#&			if(ypos==y)then!@#&				if(xpos>=x+10 and xpos<=x+12)then!@#&					return!@#&				end!@#&			elseif(ypos==y+1)then!@#&				term.setBackgroundColor(colors.black)!@#&				newGame(name)!@#&				return!@#&			elseif(ypos==y+2)then!@#&				fs.delete(\"/SpeedOS/Applications/GameBox/games/\"..name)!@#&				return!@#&			end	!@#&		end!@#&	end!@#&end!@#&!@#&function newGameMenu(gamename,filename,picture)!@#&	term.setBackgroundColor(colors.black)!@#&	shell.run(\"clear\")!@#&	term.setTextColor(colors.white)!@#&	term.setCursorPos(2,2)!@#&	write(\"Game Name\")!@#&	term.setBackgroundColor(colors.lightGray)!@#&	term.setCursorPos(2,3)!@#&	write(\"          \")!@#&	term.setCursorPos(2,3)!@#&	write(gamename)!@#&	term.setCursorPos(2,5)!@#&	term.setBackgroundColor(colors.black)!@#&	write(\"File Name\")!@#&	term.setBackgroundColor(colors.lightGray)!@#&	term.setCursorPos(2,6)!@#&	write(\"               \")!@#&	term.setCursorPos(2,6)!@#&	write(filename)!@#&	term.setBackgroundColor(colors.gray)!@#&	for place=0,5,1 do!@#&		term.setCursorPos(2,8+place)!@#&		write(\"          \")!@#&	end!@#&	for place=0,5,1 do!@#&		term.setCursorPos(2,8+place)!@#&		write(picture[place+1])!@#&	end!@#&	term.setBackgroundColor(colors.blue)!@#&	term.setCursorPos(2,15)!@#&	write(\" Save \")!@#&	term.setCursorPos(9,15)!@#&	write(\" Exit \")!@#&end!@#&!@#&function addSpaces(word)!@#&	for place=1,10-#word,1 do!@#&		word = word..\" \"!@#&	end!@#&	return word!@#&end!@#&!@#&function newGame(name)!@#&	local gamename = \"\"!@#&	local filename = \"\"!@#&	local picture = {}!@#&	for place=1,6,1 do!@#&		picture[place] =\"\"!@#&	end!@#&	if(fs.exists(\"/SpeedOS/Applications/GameBox/games/\"..name))then!@#&		filename = gamelist[name][\"filename\"]!@#&		gamename = name!@#&		open = fs.open(\"/SpeedOS/Applications/GameBox/games/\"..name , \"r\")!@#&		open.readLine()!@#&		open.readLine()!@#&		for place=1,6,1 do!@#&			picture[place] = open.readLine()!@#&		end!@#&		open.close()!@#&	end!@#&	while true do!@#&		newGameMenu(gamename,filename,picture)!@#&		local Event,key,xpos,ypos = os.pullEvent(\"mouse_click\")  !@#&		if(ypos==15)then!@#&			if(xpos>=2 and xpos<=7)then!@#&				if(gamename~=\"\" and filename~=\"\")then!@#&					open = fs.open(\"/SpeedOS/Applications/GameBox/games/\"..gamename,\"w\")!@#&					open.writeLine(filename)!@#&					temp = fs.list(\"/SpeedOS/Applications/GameBox/games\")!@#&					numfiles = #temp!@#&					open.writeLine((11*((numfiles%4)-1)+1)..\",\"..(7*(math.ceil(numfiles/4)-1)+3))!@#&					for place=1,6,1 do!@#&						open.writeLine(addSpaces(picture[place]))!@#&					end!@#&					open.close()!@#&					return!@#&				else!@#&					term.setBackgroundColor(colors.red)!@#&					term.setCursorPos(2,16)!@#&					write(\"Fill Out All Feilds Before Continuing\")!@#&					sleep(2)!@#&				end!@#&			elseif(xpos>=9 and xpos<=14)then!@#&				return!@#&			end!@#&		elseif(ypos==3)then!@#&			gamename = \"\"!@#&			newGameMenu(gamename,filename,picture)!@#&			term.setBackgroundColor(colors.lightGray)!@#&			term.setCursorPos(2,3)!@#&			gamename = string.sub(io.read(),1,10)!@#&			picture[1] = string.upper(string.sub(gamename,1,1))..string.sub(gamename,2,#gamename)!@#&		elseif(ypos==6)then!@#&			filename = \"\"!@#&			newGameMenu(gamename,filename,picture)!@#&			term.setBackgroundColor(colors.lightGray)!@#&			term.setCursorPos(2,6)!@#&			filename = string.sub(io.read(),1,15)!@#&		elseif(ypos>=8 and ypos<=13)then!@#&			if(xpos>=2 and xpos<=12)then!@#&				term.setBackgroundColor(colors.gray)!@#&				term.setCursorPos(2,ypos)!@#&				picture[ypos-7] = string.sub(io.read(),1,10)!@#&			end!@#&		end!@#&	end!@#&end!@#&!@#&!@#&while true do!@#&	drawGames()!@#&	local Event,key,xpos,ypos = os.pullEvent()  !@#&	if(Event==\"mouse_click\")then!@#&		if(ypos==1)then!@#&			if(xpos>=14 and xpos<=21)then!@#&				newGame(\"new\")!@#&			elseif(xpos>=49)then!@#&				break!@#&			end  !@#&		else!@#&			for game,value in pairs(gamelist) do!@#&				if(ypos>=gamelist[game][\"y\"]-scroll and ypos<=gamelist[game][\"y\"]+5-scroll)then!@#&					if(xpos>=gamelist[game][\"x\"] and xpos<=gamelist[game][\"x\"]+9)then!@#&						if(key==1)then!@#&							shell.run(\"clear\")!@#&							shell.run(gamelist[game][\"filename\"])!@#&						elseif(key==2)then!@#&							menu1(game,gamelist[game][\"filename\"],xpos,ypos)!@#&						end!@#&					end!@#&				end!@#&			end!@#&		end!@#&		!@#&	elseif(Event==\"mouse_scroll\")then!@#&		scroll = scroll+key!@#&		barscroll = barscroll+(key/scrollamount)!@#&		if(barscroll<0)then!@#&			barscroll = 0!@#&		end!@#&		if(barscroll>barArea-barLength)then!@#&			barscroll = barArea-barLength!@#&		end!@#&		if(scroll<0)then!@#&			scroll=0!@#&		end!@#&		if(scroll>7*(math.ceil(numgames/4)-2))then!@#&			scroll = 7*(math.ceil(numgames/4)-2)!@#&		end!@#&	elseif(Event==\"mouse_drag\")then!@#&		if(xpos==51)then!@#&			if(oldpos>0)then!@#&				scroll = scroll+((ypos-oldpos)*scrollamount)!@#&				barscroll = barscroll+(ypos-oldpos)!@#&			end!@#&			oldpos = ypos!@#&		end!@#&		if(scroll<0)then!@#&			scroll = 0!@#&		end!@#&		if(scroll>7*(math.ceil(numgames/4)-1))then!@#&			scroll = 7*(math.ceil(numgames/4)-1)!@#&		end!@#&		if(barscroll<0)then!@#&			barscroll = 0!@#&		end!@#&		if(barscroll>barArea-barLength)then!@#&			barscroll = barArea-barLength!@#&		end!@#&	end!@#&end!@#&term.setBackgroundColor(colors.black)!@#&shell.run(\"clear\")",["battleship"]="--[[!@#&                  BATTLESHIP!@#&                  By: Negeator!@#&]]--!@#&local monSide = \"none\"!@#&local turn, selectX, selectY!@#&local myName, opponentName!@#&local menuSelect!@#&-- message1 is what event just happened, message2 displays things!@#&local message1, message2!@#&local sendid --Computer ID to send to!@#&local host --If we are hosting!@#&local gamePlaying  --If the game is playing!@#&local monSide = \"none\" --Monitor Side being used!@#&local monitor --The monitor!@#&local quit -- Did you or the other player quit in the middle of a game!@#&!@#&os.pullEvent = os.pullEventRaw!@#&!@#&--[[!@#&Two grids are stored. One is the player's grid, the other is the opponent's.!@#&!@#&\"-\" = Nothing!@#&\"H\" = Hit!@#&\"S\" = Sunk!@#&\"m\" = Miss!@#&\"o\" = The Player's Ships (only seen on the opponent's grid)!@#&--]]!@#&!@#&local myGrid =!@#&{!@#&  [1] = {\"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\"},!@#&  [2] = {\"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\"},!@#&  [3] = {\"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\"},!@#&  [4] = {\"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\"},!@#&  [5] = {\"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\"},!@#&  [6] = {\"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\"},!@#&  [7] = {\"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\"},!@#&  [8] = {\"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\"},!@#&  [9] = {\"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\"},!@#&  [10] = {\"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\"}!@#&}!@#&!@#&local opponentGrid =!@#&{!@#&  [1] = {\"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\"},!@#&  [2] = {\"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\"},!@#&  [3] = {\"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\"},!@#&  [4] = {\"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\"},!@#&  [5] = {\"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\"},!@#&  [6] = {\"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\"},!@#&  [7] = {\"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\"},!@#&  [8] = {\"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\"},!@#&  [9] = {\"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\"},!@#&  [10] = {\"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\"}!@#&}!@#&!@#&--[[!@#&  Arrays for each of the player's ships!@#&  Each ship has: {x,y,length, direction (0 = horizontal, 1 = vertical), is it sunk? (0 = false, 1 = true)}!@#&!@#&--]]!@#&!@#&local myShips =!@#&{!@#&  -- 2 Long Ships!@#&  [1] = {0,0,2,0,0},!@#&  -- 3 Long Ships!@#&  [2] = {0,0,3,0,0},!@#&  [3] = {0,0,3,0,0},!@#&  -- 4 Long Ships!@#&  [4] = {0,0,4,0,0},!@#&  -- 5 Long Ship!@#&  [5] = {0,0,5,0,0}!@#&}!@#&!@#&local opponentShips =!@#&{!@#&  -- 2 Long Ships!@#&  [1] = {0,0,2,0,0},!@#&  -- 3 Long Ships!@#&  [2] = {0,0,3,0,0},!@#&  [3] = {0,0,3,0,0},!@#&  -- 4 Long Ships!@#&  [4] = {0,0,4,0,0},!@#&  -- 5 Long Ship!@#&  [5] = {0,0,5,0,0}!@#&}!@#&!@#&local menuOptions =!@#&{!@#&  \"Host\",  \"Join\", \"Help\", \"Exit\"!@#&}!@#&!@#&--Reset the grids!@#&function resetGrids()!@#&opponentGrid =!@#&{!@#&  [1] = {\"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\"},!@#&  [2] = {\"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\"},!@#&  [3] = {\"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\"},!@#&  [4] = {\"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\"},!@#&  [5] = {\"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\"},!@#&  [6] = {\"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\"},!@#&  [7] = {\"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\"},!@#&  [8] = {\"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\"},!@#&  [9] = {\"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\"},!@#&  [10] = {\"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\"}!@#&}!@#&myGrid =!@#&{!@#&  [1] = {\"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\"},!@#&  [2] = {\"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\"},!@#&  [3] = {\"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\"},!@#&  [4] = {\"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\"},!@#&  [5] = {\"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\"},!@#&  [6] = {\"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\"},!@#&  [7] = {\"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\"},!@#&  [8] = {\"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\"},!@#&  [9] = {\"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\"},!@#&  [10] = {\"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\"}!@#&}!@#&end!@#&!@#&--Reset the ships (whether they are destroyed or not) for the next game!@#&function resetShips()!@#&  for i = 1, #myShips do!@#&        myShips[i][5] = 0!@#&  end!@#&  for i = 1, #opponentShips do!@#&        opponentShips[i][5] = 0!@#&  end!@#&end!@#&!@#&--Basic Draw Functions!@#&function clearScreen()!@#&  term.clear()!@#&  term.setCursorPos(1,1)!@#&end!@#&!@#&function drawAt(x,y,text)!@#&  term.setCursorPos(x,y)!@#&  term.write(text)!@#&end!@#&!@#&--Basic Monitor Draw Functions!@#&!@#&function clearMonitor()!@#&  monitor.clear()!@#&  monitor.setCursorPos(1,1)!@#&end!@#&!@#&function drawAtMonitor(x,y,text)!@#&  monitor.setCursorPos(x,y)!@#&  monitor.write(text)!@#&end!@#&!@#&-- Draw a Grid!@#&function drawGrid(grid, startX)!@#&  for a = 1, 10 do!@#&        for b = 1, 10 do!@#&          drawAt((a * 2) + startX,b,grid[b][a])!@#&        end!@#&  end!@#&!@#&end!@#&!@#&--Add's the player's ships to the opponent's grid!@#&function addShips()!@#&  for a = 1, #myShips do!@#&        for b = 1, myShips[a][3] do!@#&          if myShips[a][4] == 0 then  --Horizontal!@#&         opponentGrid[ myShips[a][2] ] [ myShips[a][1] + b - 1 ] = \"o\"!@#&          else --Vertical!@#&         opponentGrid[ myShips[a][2] + b - 1 ] [ myShips[a][1] ] = \"o\"!@#&          end!@#&        end!@#&  end!@#&end!@#&!@#&--Draw the ship seen on the menus!@#&function drawArt()!@#&  --Draw Some (Crappy) Ascii Art!@#&  drawAt(1,7,\"                            /|              _\")!@#&  drawAt(1,8,\"                           | |________ / |\")!@#&  drawAt(1,9,\"           ____ '--|_|/__/__|__|_____\")!@#&  drawAt(1,10,\"___---__/        |__/_/_/_/__|-------______________\")!@#&  drawAt(1,11,\"|                                                                                         /\")!@#&  drawAt(1,12, \"_____________________________________________|\")!@#&end!@#&!@#&--Draw Cursor!@#&function drawCursor(x1,x2,y)!@#&  drawAt(x1,y,\"[\")!@#&  drawAt(x2,y,\"]\")!@#&end!@#&!@#&--Set Cursor Position!@#&function setCursorPos(x,y)!@#&  if x < 1 then!@#&        x = 10!@#&  elseif x > 10 then!@#&        x = 1!@#&  end!@#&  if y < 1 then!@#&        y = 10!@#&  elseif y > 10 then!@#&        y= 1!@#&  end!@#&!@#&  selectX = x!@#&  selectY = y!@#&!@#&end  !@#&!@#&--How many ships are sunk!@#&function getShipsSunk(ships)!@#&  local amount = 0!@#&  for a = 1, #ships do!@#&        if ships[a][5] == 1 then!@#&          amount = amount + 1!@#&        end!@#&  end!@#&  return amount!@#&end!@#&!@#&--Check to see if there is a ship at the location!@#&function checkForShip(x,y)!@#&  local xx, yy!@#&  for a = 1, #opponentShips do!@#&        xx = opponentShips[a][1]!@#&        yy = opponentShips[a][2]!@#&        for b = 1, opponentShips[a][3] do!@#&          if x == xx and y == yy then!@#&         myGrid[yy][xx] = \"H\"!@#&         message1 = \"Hit!\"!@#&         if checkIfSunk(a) == 1 then!@#&           setSunk(a)!@#&           message1 = \"Ship Sunk!\"!@#&         end!@#&                        return 1!@#&                  end!@#&          !@#&          if opponentShips[a][4] == 0 then!@#&         xx = xx + 1!@#&          else!@#&         yy = yy + 1!@#&          end!@#&          !@#&        end!@#&  end!@#&  return 0!@#&end!@#&!@#&--Check if the ship is sunk (called in checkForShip())!@#&function checkIfSunk(index)!@#&  local xx = opponentShips[index][1]!@#&  local yy = opponentShips[index][2]!@#&!@#&  for a = 1, opponentShips[index][3] do!@#&         if myGrid[yy][xx] ~= \"H\" then!@#&           return 0!@#&         end!@#&         if opponentShips[index][4] == 0 then!@#&           xx = xx + 1!@#&         else!@#&           yy = yy + 1!@#&         end!@#&  end!@#&  return 1!@#&end!@#&!@#&--Set a ship to sunk, and update the board!@#&function setSunk(index)!@#&  opponentShips[index][5] = 1!@#&!@#&  local xx = opponentShips[index][1]!@#&  local yy = opponentShips[index][2]!@#&  rednet.send(sendID,\"+\"..tostring(index)) -- This tells the other computer to add to your shipsSunk counter!@#&  for a = 1, opponentShips[index][3] do!@#&         myGrid[yy][xx] = \"S\"!@#&         rednet.send(sendID,tostring(xx)..\"|\"..tostring(yy)..\"|\"..myGrid[yy][xx]..\"|\")!@#&         if opponentShips[index][4] == 0 then!@#&           xx = xx + 1!@#&         else!@#&           yy = yy + 1!@#&         end!@#&  end!@#&end!@#&!@#&--When you select a grid location!@#&function selectLocation(selectX,selectY)!@#&  if myGrid[selectY][selectX] == \"-\" then!@#&        if checkForShip(selectX,selectY) == 1 then!@#&         --Grid is set to \"H\" in checkForShip()!@#&         rednet.send(sendID,tostring(selectX)..\"|\"..tostring(selectY)..\"|\"..myGrid[selectY][selectX]..\"|\")!@#&         turn = 1!@#&        else!@#&          myGrid[selectY][selectX] = \"m\"!@#&          message1 = \"Miss...\"!@#&          rednet.send(sendID,tostring(selectX)..\"|\"..tostring(selectY)..\"|\"..myGrid[selectY][selectX]..\"|\")!@#&          turn = 1!@#&        end     !@#&  else!@#&        message1 = \"Space is already taken.\"!@#&  end!@#&end!@#&!@#&--Reading the in-game message send with rednet (x|y|symbol)!@#&function readMessage(text)!@#&  local xx = 1!@#&  local yy = 1!@#&  local symbol = \"!\"!@#&  local counter = 0!@#&  local temp = \"\"!@#&!@#&  if string.sub(text,1,1) == \"X\" then!@#&        quit = true!@#&        gamePlaying = false!@#&  elseif string.sub(text,1,1) == \"+\" then!@#&        for i = 2, string.len(text) do!@#&          temp = temp..string.sub(text,i,i)!@#&        end!@#&        myShips[tonumber(temp)][5] = 1!@#&  else!@#&        for i = 1, string.len(text) do!@#&          if string.sub(text,i,i) ~= \"|\" then!@#&                temp = temp .. string.sub(text,i,i)!@#&          else!@#&                drawAt(1,i,temp)!@#&                if counter == 0 then!@#&                  xx = tonumber(temp)!@#&                elseif counter == 1 then!@#&                  yy = tonumber(temp)!@#&                else!@#&                  symbol = temp!@#&                end!@#&          !@#&                counter = counter + 1!@#&                temp = \"\"!@#&          end!@#&        end!@#&        opponentGrid[yy][xx] = symbol!@#&        --Set Message 2!@#&        if symbol == \"m\" then!@#&          message2 = opponentName..\" missed...\"!@#&        elseif symbol == \"H\" then!@#&          message2 = opponentName..\" hit a target!\"!@#&        elseif symbol == \"S\" then!@#&          message2 = opponentName..\" sunk a ship!\"!@#&        end!@#&  end!@#&end!@#&!@#&--Draws the monitor!@#&function monitorDraw()!@#&  clearMonitor()!@#&  --Draw opponentGrid!@#&  for x = 1, 10 do!@#&        for y = 1, 10 do!@#&          --We don't want to draw our ship on the screen, that would be bad!@#&          if opponentGrid[y][x] ~= \"o\" then!@#&                drawAtMonitor( (x * 2) + 26,y,opponentGrid[y][x])!@#&          else!@#&         drawAtMonitor( (x * 2) + 26,y,\"-\")!@#&          end!@#&        end!@#&  end!@#&  --Draw myGrid!@#&  for x = 1, 10 do!@#&        for y = 1, 10 do!@#&          drawAtMonitor(x * 2 ,y ,myGrid[y][x])!@#&        end!@#&  end!@#&!@#&        --Draw Arrow for whose turn it is!@#&        if turn == 0 then!@#&          drawAtMonitor(22,3,\"<-\")!@#&        else!@#&          drawAtMonitor(26,3,\"->\")!@#&        end!@#&        !@#&        -- Draw Vertical Bar!@#&        for i = 1, 10 do!@#&          drawAtMonitor(24,i,\"|\")!@#&          drawAtMonitor(25,i,\"|\")!@#&        end!@#&        -- Draw Horizontal Bar!@#&        drawAtMonitor(1,11,\"==================================================================\")!@#&        drawAtMonitor(2,12,myName..\":\")!@#&        drawAtMonitor(31,12,opponentName..\":\")!@#&        drawAtMonitor(2,14,\"Ships Sunk: \"..getShipsSunk(opponentShips))!@#&        drawAtMonitor(31,14,\"Ships Sunk: \"..getShipsSunk(myShips))!@#&        -- Draw Horizontal Bar!@#&        drawAtMonitor(1,15,\"==================================================================\")!@#&        !@#&        if turn == 0 then!@#&          drawAtMonitor(1,16,\"Turn: \"..myName)!@#&        else!@#&          drawAtMonitor(1,16,\"Turn: \"..opponentName)!@#&        end!@#&end!@#&!@#&--Draw function for the game!@#&function gameDraw()!@#&        if monSide ~= \"none\" then!@#&          monitorDraw()!@#&        end!@#&        !@#&        clearScreen()!@#&        drawGrid(myGrid, 0)!@#&        drawGrid(opponentGrid, 29)!@#&        drawCursor((selectX * 2) - 1,(selectX * 2) + 1,selectY)!@#&        !@#&        --Draw Arrow for whose turn it is!@#&        if turn == 0 then!@#&          drawAt(23,3,\"<-\")!@#&        else!@#&          drawAt(27,3,\"->\")!@#&        end!@#&        !@#&        -- Draw Vertical Bar!@#&        for i = 1, 10 do!@#&          drawAt(25,i,\"|\")!@#&          drawAt(26,i,\"|\")!@#&        end!@#&        -- Draw Horizontal Bar!@#&        drawAt(1,11,\"==================================================================\")!@#&        drawAt(2,12,myName..\":\")!@#&        drawAt(31,12,opponentName..\":\")!@#&        drawAt(2,13,\"Ships Sunk: \"..getShipsSunk(opponentShips))!@#&        drawAt(31,13,\"Ships Sunk: \"..getShipsSunk(myShips))!@#&        -- Draw Horizontal Bar!@#&        drawAt(1,14,\"==================================================================\")!@#&        drawAt(1,15,message1)!@#&        drawAt(1,16,message2)!@#&        !@#&        if turn == 0 then!@#&          drawAt(1,17,\"Turn: \"..myName)!@#&        else!@#&          drawAt(1,17,\"Turn: \"..opponentName)!@#&        end!@#&        !@#&        if quit == true then!@#&          drawAt(1,18,\"Game Terminated.\")!@#&        end!@#&end!@#&!@#&function checkForWinner()!@#&  if getShipsSunk(opponentShips) >= #opponentShips then!@#&        drawAt(1,18,myName..\" WON!  :)/>/>\")!@#&        gamePlaying = false!@#&  elseif getShipsSunk(myShips) >= #myShips then!@#&        drawAt(1,18,opponentName..\" WON!  :)/>/>\")!@#&        gamePlaying = false!@#&  end!@#&end!@#&!@#&--Handles all of the game events!@#&function gameEvents()!@#&        event, p1, p2 = os.pullEvent()!@#&!@#&        if event == \"key\" then!@#&         if p1 == 200 then!@#&           setCursorPos(selectX, selectY - 1)!@#&                elseif p1 == 203 then!@#&                  setCursorPos(selectX - 1, selectY)!@#&                elseif p1 == 205 then!@#&                  setCursorPos(selectX + 1, selectY)!@#&                elseif p1 == 208 then!@#&                  setCursorPos(selectX, selectY + 1)!@#&                elseif p1 == 28 then!@#&                  if turn == 0 then!@#&                                        selectLocation(selectX,selectY)!@#&                  end!@#&                elseif p1 == 14 then!@#&                  --Quit Game!@#&                  rednet.send(sendID,\"X\")!@#&                  quit = true!@#&                  gamePlaying = false!@#&                end!@#&        elseif event == \"rednet_message\" then!@#&          if p1 == sendID then!@#&         readMessage(p2)!@#&         turn = 0!@#&          end!@#&        elseif event == \"terminate\" then!@#&          rednet.send(sendID,\"X\")!@#&          quit = true!@#&          gamePlaying = false!@#&        end!@#&end!@#&!@#&--Play the game!@#&function game()!@#&  if host == true then!@#&        turn = 0!@#&  else!@#&        turn = 1!@#&  end!@#&  selectX = 4!@#&  selectY = 1!@#&  message1 = \"\"!@#&  message2 = \"\"!@#&  quit = false  --If someone quits the game!@#&  addShips()!@#&  gamePlaying = true!@#&  os.startTimer(.1)!@#&  startMonitor() --Sets up the monitor if there is one!@#&  while gamePlaying == true do!@#&        gameEvents()!@#&        gameDraw()!@#&        checkForWinner()!@#&  end!@#&  drawAt(1,19,\"Press Enter to Exit\")!@#&  while true do!@#&        event, p1 = os.pullEvent()!@#&!@#&        if event == \"key\" then!@#&         if p1 == 28 then!@#&           return!@#&         end!@#&         end!@#&  end!@#&end!@#&!@#&--Check for a ship during the Ship Placement Process. 'amount' is the current ship you are one!@#&function checkForShipPlacement(index)!@#&  local xx, yy!@#&  local x,  y!@#&  x = myShips[index][1]!@#&  y = myShips[index][2]!@#&!@#&  for i = 1, myShips[index][3] do!@#&        for a = 1, index - 1 do!@#&          xx = myShips[a][1]!@#&          yy = myShips[a][2]!@#&          for b = 1, myShips[a][3] do!@#&         if x == xx and y == yy then!@#&           return false!@#&                        end!@#&        !@#&                        --Adjust next place to test based on ship[a]'s direction!@#&         if myShips[a][4] == 0 then!@#&           xx = xx + 1!@#&         else!@#&           yy = yy + 1!@#&         end!@#&           end!@#&        end!@#&        --Adjust where to check next based on ship[i]'s direction!@#&        if myShips[index][4] == 0 then!@#&          x = x + 1!@#&        else!@#&          y = y + 1!@#&        end!@#&  end!@#&  return true!@#&end!@#&!@#&--Check if a Ship (placing) Fits!@#&function checkFit(index)!@#&if myShips[index][4] == 0 then!@#&        if myShips[index][1] + myShips[index][3] > 11 then!@#&          message1 = \"Does not fit on grid.\"!@#&          return false!@#&        end!@#&  else!@#&        if myShips[index][2] + myShips[index][3] > 11 then!@#&          message1 = \"Does not fit on grid.\"!@#&          return false!@#&        end!@#&  end!@#&!@#&  if checkForShipPlacement(index) == true then!@#&        message1 = \"Successfully placed.\"!@#&        return true!@#&  else!@#&        message1 = \"Overlaps another ship.\"!@#&        return false!@#&  end!@#&end!@#&!@#&--Add ships to the grid during the selectShips() function!@#&function selectShipsAdd(currShip)!@#&  local xx,yy!@#&  for i = 1, currShip do!@#&        xx = myShips[i][1]!@#&        yy = myShips[i][2]!@#&        for a = 1, myShips[i][3] do!@#&          if xx <= 10 and yy <= 10 then!@#&                opponentGrid[yy][xx] = \"o\"!@#&          end!@#&          !@#&          if myShips[i][4] == 0 then!@#&                xx = xx + 1!@#&          else!@#&                yy = yy + 1!@#&          end!@#&        end!@#&  end!@#&!@#&end!@#&!@#&function selectShips()!@#&  local placed!@#&  local dir!@#&  for i = 1, #myShips do!@#&        placed = false!@#&        selectX = 1!@#&        selectY = 1!@#&        dir = 0!@#&        message1 = \"\"!@#&        while placed == false do!@#&          clearScreen()!@#&          myShips[i][1] = selectX!@#&          myShips[i][2] = selectY!@#&          myShips[i][4] = dir!@#&          !@#&          drawAt(1,12,\"Place Ship # \"..i..\": \")!@#&          drawAt(1,13,\"=================================================\")!@#&          drawAt(1,14,\"Arrows - Move, Enter - Place, Crl - Rotate\")!@#&          drawAt(1,15,message1)!@#&          resetGrids()!@#&          selectShipsAdd(i)!@#&          drawGrid(opponentGrid,0)!@#&          drawCursor(selectX * 2 - 1, selectX * 2 + 1, selectY)!@#&          !@#&          !@#&          event, p1 = os.pullEvent()!@#&          if event == \"key\" then!@#&        if p1 == 200 then!@#&          setCursorPos(selectX, selectY - 1)!@#&                elseif p1 == 203 then!@#&          setCursorPos(selectX - 1, selectY)!@#&        elseif p1 == 205 then!@#&          setCursorPos(selectX + 1, selectY)!@#&        elseif p1 == 208 then!@#&          setCursorPos(selectX, selectY + 1)!@#&        elseif p1 == 28 then!@#&          placed = checkFit(i)!@#&        elseif p1 == 29 or p1 == 157 then!@#&          if dir == 0 then!@#&                        dir = 1!@#&          else!@#&         dir = 0!@#&          end!@#&                end!@#&           end!@#&         end!@#&  end!@#&end!@#&!@#&function startMonitor()!@#&  for i=1,#rs.getSides() do!@#&        if peripheral.isPresent(rs.getSides()[i]) and peripheral.getType(rs.getSides()[i]) == \"monitor\" then!@#&          monSide = rs.getSides()[i]!@#&          monitor = peripheral.wrap( monSide )!@#&          return!@#&        end!@#&  end!@#&  monSide = \"none\"!@#&end!@#&!@#&function startModem()!@#&  local side!@#&  for i=1,#rs.getSides() do!@#&        if peripheral.isPresent(rs.getSides()[i]) and peripheral.getType(rs.getSides()[i]) == \"modem\" then!@#&          side = rs.getSides()[i]!@#&          rednet.open(side)!@#&          return 1!@#&        end!@#&  end!@#&  return 0!@#&end!@#&!@#&function hostWait()!@#&  clearScreen()!@#&  drawAt(1,1,\"Waiting on \"..opponentName..\" to place ships...\")!@#&  drawArt()!@#&  while true do!@#&        local event, id, message = os.pullEvent()!@#&        if event == \"rednet_message\" then!@#&          if id == sendID then!@#&                rednet.send(sendID,\"!\")!@#&                return!@#&          end!@#&        end!@#&  end!@#&end!@#&!@#&function clientWait()!@#&  os.startTimer(1)!@#&  while true do!@#&        clearScreen()!@#&        drawAt(1,1,\"Waiting on \"..opponentName..\"to place ships...\")!@#&        drawArt()!@#&        rednet.send(sendID,\"!\")!@#&        local event, id, message = os.pullEvent()!@#&        if event == \"rednet_message\" then!@#&          if id == sendID then!@#&                return!@#&          end!@#&        elseif event == \"timer\" then!@#&          os.startTimer(1)!@#&        end!@#&  end!@#&end!@#&!@#&function sendShips()!@#&  clearScreen()!@#&  drawAt(1,1,\"Exchanging Data...\")!@#&  for i = 1, #myShips do!@#&        rednet.send(sendID,tostring(myShips[i][1]))!@#&        rednet.send(sendID,tostring(myShips[i][2]))!@#&        rednet.send(sendID,tostring(myShips[i][4]))!@#&  end!@#&end!@#&!@#&function getShips()!@#&  clearScreen()!@#&  for i = 1, #myShips do!@#&        for a = 1, 3 do!@#&          bool = false!@#&          while bool == false do!@#&                id, message = rednet.receive()!@#&                if id == sendID then!@#&          if a == 3 then --4 is direction, which we want to exchange, not length (3)!@#&         a = 4!@#&          end!@#&                  opponentShips[i][a] = tonumber(message)!@#&          bool = true!@#&                end!@#&          end!@#&        end!@#&  end!@#&end!@#&!@#&function hostLobby()!@#&  clearScreen()!@#&  if startModem() == 0 then!@#&        drawAt(1,1,\"<ERROR> No Modem Detected\")!@#&        sleep(1)!@#&        return false!@#&  end!@#&  drawArt()!@#&  drawAt(1,1,\"Type in your name: \")!@#&  myName = io.read()!@#&  clearScreen()!@#&  drawAt(1,1,\"Battleship - Host Lobby:\")!@#&  drawAt(1,2,\"--------------------------\")!@#&  drawAt(1,3,\"[Name: \"..myName.. \"  Computer ID: \"..os.getComputerID()..\"]\")!@#&  drawAt(1,4,\"Waiting for another player to join...\")!@#&  drawAt(1,5,\"<Press Enter to Exit>\")!@#&  drawArt()!@#&!@#&  while true do!@#&        local event, getid, message = os.pullEvent()!@#&        if event == \"rednet_message\" then!@#&          if message == \"*Battleship*\" then!@#&                sendID = tonumber(getid)!@#&                drawAt(1,4,\"Successfully Connected to #\"..tostring(getid))!@#&        rednet.send(getid,myName)!@#&        !@#&        while true do!@#&          getid2, message = rednet.receive()!@#&          if getid2 == getid then!@#&         opponentName = message!@#&                        return true!@#&          end!@#&        end!@#&          end!@#&        elseif event == \"key\" then!@#&          if getid == 28 then!@#&                return false!@#&          end!@#&        end!@#&  end!@#&end!@#&!@#&function clientLobby()!@#&  local connectID = -1!@#&  clearScreen()!@#&  if startModem() == 0 then!@#&        drawAt(1,1,\"<ERROR> No Modem Detected\")!@#&        sleep(1)!@#&        return false!@#&  end!@#&  drawArt()!@#&  drawAt(1,1,\"Type in your name: \")!@#&  myName = io.read()!@#&  clearScreen()!@#&  drawArt()!@#&  drawAt(1,1,\"Type in Computer # to connect to: \")!@#&  connectID = -1!@#&  while connectID < 0 do!@#&        connectID = tonumber(io.read())!@#&  end!@#&  sendID = tonumber(connectID)!@#&  clearScreen()!@#&  drawAt(1,1,\"Battleship - Client Lobby:\")!@#&  drawAt(1,2,\"--------------------------\")!@#&  drawAt(1,3,\"[Name: \"..myName.. \"  Computer ID: \"..os.getComputerID()..\"]\")!@#&  drawAt(1,4,\"Attemping to Connect to #\"..connectID)!@#&  drawAt(1,5,\"<Press Enter to Exit>\")!@#&  drawArt()!@#&  rednet.send(connectID,\"*Battleship*\")!@#&!@#&  while true do!@#&        local event, getid, message = os.pullEvent()!@#&        if event == \"rednet_message\" and getid == connectID then!@#&                opponentName = message!@#&                drawAt(1,4,\"Successfully Connected to #\"..tostring(getid))!@#&        rednet.send(connectID,myName)!@#&                return true!@#&        elseif event == \"key\" then!@#&          if getid == 28 then!@#&                return false!@#&          end!@#&        end!@#&  end!@#&end!@#&!@#&--Handles all of the menu events!@#&function menuEvents()!@#&        event, p1 = os.pullEvent()!@#&        if event == \"key\" then!@#&          if p1 == 200 then!@#&          menuSelect = menuSelect - 1!@#&          if menuSelect < 1 then!@#&                menuSelect = 4!@#&          end!@#&          elseif p1 == 208 then!@#&         menuSelect = menuSelect + 1!@#&         if menuSelect > 4 then!@#&           menuSelect = 1!@#&           end!@#&                elseif p1 == 28 then!@#&           if menuSelect == 1 then!@#&                 if hostLobby() == true then!@#&                   host = true!@#&                   selectShips()!@#&                   hostWait()!@#&                   resetShips()!@#&                   sendShips()!@#&                   getShips()!@#&                   game()!@#&                 end!@#&           elseif menuSelect == 2 then!@#&                 if clientLobby() == true then!@#&                   host = false!@#&                   selectShips()!@#&                   clientWait()!@#&                   resetShips()!@#&                   getShips()!@#&                   sendShips()!@#&                   game()!@#&                 end!@#&                  elseif menuSelect == 3 then!@#&                 help()!@#&                  elseif menuSelect == 4 then!@#&                 --os.reboot()!@#&                        clearScreen()!@#&                        --error() quits the program!@#&                        error()!@#&           end!@#&           end!@#&        end!@#&end!@#&!@#&--The help menu!@#&function help()!@#&  clearScreen()!@#&  drawAt(1,1,\"Battleship - Help:\")!@#&  drawAt(1,2,\"--------------------------\")!@#&  drawAt(1,3,\"Each player places 5 ships on a 10x10 grid.\")!@#&  drawAt(1,4,\"Players take turns firing on the grid, hoping to\")!@#&  drawAt(1,5,\"  sink their opponent's ships.\")!@#&  drawAt(1,6,\"The first player to sink all 5 of their opponent's\")!@#&  drawAt(1,7,\"  ships wins!\")!@#&  drawAt(1,8,\"Use Arrow Keys to move, and Enter to Fire.\")!@#&  drawAt(1,9,\"You can press 'Backspace' to quit during a game.\")!@#&  drawAt(1,11,\"<Press Enter to Exit Help>\")!@#&  while true do!@#&        event, key = os.pullEvent()!@#&        if event == \"key\" then!@#&          if key == 28 then!@#&         return!@#&          end!@#&        end!@#&  end!@#&end!@#&!@#&function drawMenu()!@#&  clearScreen()!@#&  drawAt(1,1,\"Battleship: ComputerCraft Edition\")!@#&  drawAt(1,2,\"--------------------------\")!@#&  for i = 1, #menuOptions do!@#&        drawAt(2,i + 2,\"*\")!@#&        drawAt(4,i + 2,menuOptions[i])!@#&  end!@#&  drawCursor(1,3,2 + menuSelect)!@#&  drawArt()!@#&end!@#&!@#&--Main Menu!@#&function menu()!@#&  menuSelect = 1!@#&  while true do!@#&        drawMenu()!@#&        menuEvents()!@#&  end!@#&end!@#&!@#&!@#&--Main Function!@#&function main()!@#&  menu()!@#&end!@#&!@#&--Run the program!@#&main()",["eShip14.img"]="!@#&             999999999!@#&           999   7777!@#&          9977   77999!@#&             7777   77!@#&             !@#&             !@#&             7777   77!@#&          9977   77999!@#&           999   7777!@#&             999999999",["lotterycomputer"]={["count"]="12.0",},["eShip10.img"]="                 777b77!@#&             77bbb   7!@#&            77777b   7!@#&                 b   bb!@#&                 b   77!@#&            77bbbb   7!@#&             77777   7!@#&                 777b77",["mastermind"]="columns = 4!@#&colorTable = {colors.red,colors.blue,colors.yellow,colors.orange,colors.purple,colors.lime,colors.pink,colors.green}!@#&function setUp()!@#&	code = {}!@#&	answers = {}!@#&	for place=1,12,1 do!@#&		answers[place] = {}!@#&		for derp=1,columns,1 do!@#&			answers[place][derp] = colors.gray!@#&		end!@#&	end!@#&	!@#&	pegs = {}!@#&	for place=1,12,1 do!@#&		pegs[place] = {}!@#&		for derp=1,columns,1 do!@#&			pegs[place][derp] = colors.gray!@#&		end!@#&	end!@#&	!@#&	for place=1,columns,1 do!@#&		continue = true!@#&		while continue do!@#&			continue = false!@#&			code[place] = colorTable[math.random(1,5+(columns-3))]!@#&			for spot=1,#code-1,1 do!@#&				if(code[spot]==code[place])then!@#&					continue = true!@#&				end!@#&			end!@#&		end!@#&	end!@#&end!@#&!@#&function drawBoard()!@#&	for place=12,1,-1 do!@#&		term.setTextColor(colors.white)!@#&		term.setBackgroundColor(colors.black)!@#&		if(place<10)then!@#&			write(place..\"  \")!@#&		else!@#&			write(place..\" \")!@#&		end!@#&		term.setTextColor(colors.black)!@#&		for derp=1,columns,1 do!@#&			term.setBackgroundColor(pegs[place][derp])!@#&			write(\"o\")!@#&		end!@#&		term.setBackgroundColor(colors.black)!@#&		write(\" \")!@#&		if(place==count)then!@#&			term.setTextColor(colors.white)!@#&			term.setBackgroundColor(colors.blue)!@#&			write(\"Accept\")!@#&			term.setTextColor(colors.black)!@#&		else!@#&			for derp=1,columns,1 do!@#&				term.setBackgroundColor(answers[place][derp])!@#&				write(\"o\")!@#&			end!@#&		end!@#&		print()!@#&	end	!@#&	term.setBackgroundColor(colors.black)!@#&	print()!@#&	write(\"   \")!@#&	for place=1,5+(columns-3),1 do!@#&		term.setBackgroundColor(colorTable[place])!@#&		write(\"o\")!@#&	end!@#&	term.setTextColor(colors.white)!@#&	term.setBackgroundColor(colors.red)!@#&	term.setCursorPos(49,1)!@#&	write(\" X \")!@#&	term.setBackgroundColor(colors.black)!@#&	term.setTextColor(colors.white)!@#&end!@#&!@#&function indexOf(table,index)!@#&	local count = 0!@#&	for place=1,#table,1 do!@#&		if(table[place]==index)then!@#&			count = count+1!@#&		end!@#&	end!@#&	if(count>0)then!@#&		return true,count!@#&	else!@#&		return false,count!@#&	end!@#&end!@#&!@#&function checkPegs()!@#&	correct = 0!@#&	pegcount = 1!@#&	--print(textutils.serialize(pegs))!@#&	--sleep(1)!@#&	for place=1,columns,1 do!@#&		if(pegs[count][place]==code[place])then!@#&			answers[count][pegcount] = colors.white!@#&			correct = correct+1!@#&			pegcount = pegcount+1!@#&		end!@#&	end!@#&	for place=1,columns,1 do!@#&		continue = true!@#&		result,amount = indexOf(pegs[count],pegs[count][place])!@#&		if(amount>1)then!@#&			for derp=1,4,1 do!@#&				if(pegs[count][derp]==pegs[count][place])then!@#&					if(pegs[count][derp]==code[derp])then!@#&						continue = false!@#&					end!@#&				end!@#&			end!@#&		end!@#&		for derp=1,place-1,1 do!@#&			if(pegs[count][derp]==pegs[count][place])then!@#&				continue = false!@#&			end!@#&		end!@#&		--continue  = true !@#&		if(continue)then!@#&			if (indexOf(code,pegs[count][place]))then!@#&				answers[count][pegcount] = colors.lightGray!@#&				pegcount = pegcount+1!@#&			end!@#&		end!@#&	end!@#&	if(correct==columns)then!@#&		return true!@#&	else!@#&		return false!@#&	end!@#&end!@#&!@#&function menu()!@#&	local x,y = term.getSize()!@#&	shell.run(\"clear\")!@#&	write(\"MasterMind\")!@#&	term.setCursorPos(x/2-10,y/2-1)!@#&	term.setTextColor(colors.white)!@#&	term.setBackgroundColor(colors.blue)!@#&	write(\"      \")!@#&	term.setCursorPos(x/2-10,y/2)!@#&	write(\" Easy \")!@#&	term.setCursorPos(x/2-10,y/2+1)!@#&	write(\"      \")!@#&	term.setCursorPos(x/2-3,y/2-1)!@#&	write(\"        \")!@#&	term.setCursorPos(x/2-3,y/2)!@#&	write(\" Medium \")!@#&	term.setCursorPos(x/2-3,y/2+1)!@#&	write(\"        \")!@#&	term.setCursorPos(x/2+6,y/2-1)!@#&	write(\"      \")!@#&	term.setCursorPos(x/2+6,y/2)!@#&	write(\" Hard \")!@#&	term.setCursorPos(x/2+6,y/2+1)!@#&	write(\"      \")!@#&	term.setBackgroundColor(colors.red)!@#&	term.setCursorPos(x-2,1)!@#&	write(\" X \")!@#&	term.setTextColor(colors.white)!@#&	term.setBackgroundColor(colors.black)!@#&end!@#&!@#&function game()!@#&	setUp()!@#&	count = 1!@#&	selectedColor = \"none\"!@#&	while true do!@#&		shell.run(\"clear\")!@#&		drawBoard()!@#&		Event,key,xclick,yclick = os.pullEvent(\"mouse_click\")!@#&		if(yclick==14)then!@#&			if(xclick>=4 and xclick<=9+(columns-4))then!@#&				selectedColor = colorTable[xclick-3]!@#&			end!@#&		elseif(yclick==12-(count-1))then!@#&			if(xclick>=4 and xclick<=7+(columns-4))then!@#&				if(selectedColor~=\"none\")then!@#&					pegs[count][xclick-3] = selectedColor!@#&				end!@#&			elseif(xclick>=9+(columns-4) and xclick<=14+(columns-4))then!@#&				--continue = true!@#&				--for place=1,columns,1 do!@#&				--	if(pegs[count][place]==colors.gray)then!@#&				--		continue = false!@#&				--	end!@#&				--end!@#&				if(not indexOf(pegs[count],colors.gray))then!@#&					if(checkPegs())then!@#&						shell.run(\"clear\")!@#&						print(\"You Broke the Code\")!@#&						print(\"Score: \"..count*30)!@#&						write(\"Code \")!@#&						for place=1,3+(columns-3),1 do!@#&							term.setBackgroundColor(code[place])!@#&							write(\" \")!@#&						end!@#&						sleep(2)!@#&						break!@#&					end!@#&					count = count+1!@#&				end!@#&				if(count==13)then!@#&					shell.run(\"clear\")!@#&					print(\"You Didnt Brake the Code\")!@#&					print(\"Score: \"..count*30)!@#&					write(\"Code \")!@#&					for place=1,3+(columns-3),1 do!@#&						term.setBackgroundColor(code[place])!@#&						write(\" \")!@#&					end!@#&					sleep(2)!@#&					break!@#&				end!@#&			end!@#&		elseif(yclick==1)then!@#&			if(xclick>=49)then!@#&				break!@#&			end!@#&		end!@#&	end!@#&end!@#&!@#&while true do!@#&	term.setTextColor(colors.white)!@#&	term.setBackgroundColor(colors.black)!@#&	local x,y = term.getSize()!@#&	shell.run(\"clear\")!@#&	menu()!@#&	local Event, key, pram1, pram2 = os.pullEvent(\"mouse_click\")!@#&	if(pram2>=y/2-2 and pram2<=y/2+1)then!@#&		if(pram1>=x/2-10 and pram1<=x/2-5)then!@#&			columns = 4!@#&			game()!@#&		elseif(pram1>=x/2-3 and pram1<=x/2+4)then!@#&			columns = 5!@#&			game()!@#&		elseif(pram1>=x/2+6 and pram1<=x/2+11)then!@#&			columns = 6!@#&			game()!@#&		end		!@#&	elseif(pram2==1)then!@#&		if(pram1>=49)then!@#&			break!@#&		end!@#&	end!@#&end",["drag"]="!@#&colorTable = {colors.red,colors.blue,colors.green,colors.orange,colors.purple,colors.lime,colors.yellow,colors.pink,colors.lightBlue,colors.gray,colors.lightGray,colors.brown}!@#&!@#&gravity = true!@#&collisions = true!@#&noclip = false!@#&!@#&inside = false!@#&below = false!@#&drag = false!@#&object = {}!@#&object[1] = {}!@#&object[1][\"x1\"] = 25!@#&object[1][\"y1\"] = 10!@#&object[1][\"x2\"] = 28!@#&object[1][\"y2\"] = 12!@#&!@#&for place=1,math.random(3,5),1 do!@#&	object[place] = {}!@#&	object[place][\"x1\"] = math.ceil(math.random(1,51))!@#&	object[place][\"y1\"] = math.ceil(math.random(1,19))!@#&	object[place][\"x2\"] = math.ceil(object[place][\"x1\"]+math.random(1,5))!@#&	object[place][\"y2\"] = math.ceil(object[place][\"y1\"]+math.random(1,5))!@#&	object[place][\"color\"] = colorTable[math.random(1,12)]!@#&end!@#&!@#&for place=1,#object,1 do!@#&	object[place][\"xlength\"] = object[place][\"x2\"]-object[place][\"x1\"]!@#&	object[place][\"ylength\"] = object[place][\"y2\"]-object[place][\"y1\"]!@#&end!@#&selected = 0!@#&!@#&function drawOptions()!@#&	term.setTextColor(colors.white)!@#&	term.setCursorPos(1,1)!@#&	if(gravity)then!@#&		term.setBackgroundColor(colors.green)	!@#&	else!@#&		term.setBackgroundColor(colors.red)!@#&	end!@#&	write(\"Gravity\")!@#&	term.setCursorPos(9,1)!@#&	if(collisions)then!@#&		term.setBackgroundColor(colors.green)	!@#&	else!@#&		term.setBackgroundColor(colors.red)!@#&	end!@#&	write(\"Collisions\")!@#&	term.setCursorPos(20,1)!@#&	if(noclip)then!@#&		term.setBackgroundColor(colors.green)	!@#&	else!@#&		term.setBackgroundColor(colors.red)!@#&	end!@#&	write(\"NoClip\")!@#&	term.setCursorPos(49,1)!@#&	term.setBackgroundColor(colors.red)!@#&	write(\" X \")!@#&	term.setBackgroundColor(colors.black)!@#&	!@#&end!@#&!@#&function drawObject(number)!@#&	term.setBackgroundColor(object[number][\"color\"])!@#&	!@#&	for y=object[number][\"y1\"],object[number][\"y2\"],1 do!@#&		for x=object[number][\"x1\"],object[number][\"x2\"],1 do!@#&			term.setCursorPos(x,y)!@#&			write(\" \")!@#&		end!@#&	end!@#&	term.setTextColor(colors.black)!@#&	term.setCursorPos(object[number][\"x1\"],object[number][\"y1\"])!@#&	--write(number)!@#&	term.setBackgroundColor(colors.black)!@#&end!@#&!@#&function newObject()!@#&	startx = -1!@#&	starty = -1!@#&	while true do!@#&		term.setBackgroundColor(colors.black)!@#&		Event,key,xclick,yclick = os.pullEvent()!@#&		if(Event==\"mouse_drag\" or Event==\"mouse_click\")then!@#&			shell.run(\"clear\")!@#&			for place=1,#object,1 do!@#&				drawObject(place)!@#&			end!@#&			if(xclick==startx or startx==-1)then!@#&				if(yclick==starty or starty==-1)then!@#&					startx = xclick !@#&					starty = yclick!@#&				end!@#&			else!@#&				term.setBackgroundColor(colors.gray)!@#&				term.setCursorPos(startx,yclick)!@#&				if(yclick<=starty)then!@#&					for derp=1,starty-yclick,1 do !@#&						write(\" \") !@#&						term.setCursorPos(startx,yclick+derp)!@#&					end!@#&				else!@#&					for derp=1,yclick-starty,1 do !@#&						write(\" \") !@#&						term.setCursorPos(startx,yclick-derp)!@#&					end!@#&				end!@#&				if(xclick>=startx)then!@#&					term.setCursorPos(startx,starty)!@#&					for derp=1,xclick-startx,1 do !@#&						write(\" \")!@#&					end!@#&				else!@#&					term.setCursorPos(xclick+1,starty)!@#&					for derp=1,startx-xclick,1 do !@#&						write(\" \")!@#&					end!@#&				end!@#&				if(xclick>=startx)then!@#&					term.setCursorPos(startx,yclick)!@#&					for derp=1,xclick-startx,1 do !@#&						write(\" \")!@#&					end!@#&				else!@#&					term.setCursorPos(xclick,yclick)!@#&					for derp=1,startx-xclick,1 do !@#&						write(\" \")!@#&					end!@#&				end!@#&				term.setCursorPos(xclick,yclick)!@#&				if(yclick<=starty)then!@#&					for derp=1,starty-yclick+1,1 do !@#&						write(\" \") !@#&						term.setCursorPos(xclick,yclick+derp)!@#&					end!@#&				else!@#&					for derp=1,yclick-starty+1,1 do !@#&						write(\" \") !@#&						term.setCursorPos(xclick,yclick-derp)!@#&					end!@#&				end!@#&				term.setCursorPos(startx,starty)!@#&				write(startx..\",\"..starty)!@#&				term.setCursorPos(xclick-4,yclick)!@#&				write(xclick..\",\"..yclick)!@#&				oldx = xclick!@#&				oldy = yclick!@#&			end!@#&		elseif(Event==\"key\")then!@#&			if(key==keys.enter)then!@#&				shell.run(\"clear\")!@#&				if(oldx<startx)then!@#&					if(oldy<starty)then!@#&						newx = oldx!@#&						newy = oldy!@#&						l = startx-oldx!@#&						w = starty-oldy!@#&					else!@#&						newx = oldx!@#&						newy = starty!@#&						l = startx-oldx!@#&						w = oldy-starty!@#&					end!@#&				else!@#&					if(oldy<starty)then!@#&						newx = startx!@#&						newy = oldy!@#&						l = oldx-startx!@#&						w = starty-oldy!@#&					else	!@#&						newy = starty!@#&						newx = startx!@#&						l = oldx-startx!@#&						w = oldy-starty!@#&					end!@#&				end!@#&				term.setBackgroundColor(colors.black)!@#&				timer = os.startTimer(.01)!@#&				return startx,starty,oldx,oldy!@#&			end!@#&		end	!@#&	end!@#&end!@#&!@#&function rotateBlock(number)!@#&	temp = object[selected][\"xlength\"]!@#&	object[selected][\"xlength\"] = object[selected][\"ylength\"]!@#&	object[selected][\"ylength\"] = temp!@#&	if(number%2==0)then!@#&		object[selected][\"x2\"] = object[selected][\"x1\"]+object[selected][\"xlength\"]*2!@#&		object[selected][\"y2\"] = object[selected][\"y1\"]+object[selected][\"ylength\"]/2!@#&	else!@#&		object[selected][\"x2\"] = object[selected][\"x1\"]+object[selected][\"xlength\"]!@#&		object[selected][\"y2\"] = object[selected][\"y1\"]+object[selected][\"ylength\"]!@#&	end!@#&end!@#&!@#&function drawMenu()!@#&	term.setTextColor(colors.white)!@#&	term.setBackgroundColor(colors.white)!@#&	for y=1,6,1 do!@#&		for x=1,16,1 do!@#&			term.setCursorPos(object[selected][\"x1\"]-17+x,object[selected][\"y1\"]-6+y)!@#&			write(\" \")!@#&		end!@#&	end!@#&	term.setBackgroundColor(colors.gray)!@#&	term.setCursorPos(object[selected][\"x1\"]-16,object[selected][\"y1\"]-6)!@#&	for place=1,16,1 do!@#&		write(\" \")!@#&	end!@#&	term.setCursorPos(object[selected][\"x1\"]-16,object[selected][\"y1\"]-6)!@#&	write(\"Block \"..selected)!@#&	term.setBackgroundColor(colors.red)!@#&	term.setCursorPos(object[selected][\"x1\"]-6,object[selected][\"y1\"]-6)!@#&	write(\"Delete\")!@#&	term.setBackgroundColor(colors.white)!@#&	term.setTextColor(colors.black)!@#&	term.setCursorPos(object[selected][\"x1\"]-16,object[selected][\"y1\"]-5)!@#&	write(\"X: \"..object[selected][\"x1\"]..\" Y: \"..object[selected][\"y1\"])!@#&	local count = 1!@#&	for y=0,2,1 do!@#&		for x=0,3,1 do!@#&			term.setCursorPos(object[selected][\"x1\"]-16+(x*2),object[selected][\"y1\"]-4+(y*2))!@#&			term.setBackgroundColor(colorTable[count])!@#&			write(\" \")!@#&			count = count+1!@#&		end!@#&	end!@#&	term.setBackgroundColor(colors.white)!@#&	term.setCursorPos(object[selected][\"x1\"]-7,object[selected][\"y1\"]-4)!@#&	--write(\"Rotate\")!@#&	term.setBackgroundColor(colors.black)!@#&end!@#&!@#&function openMenu()!@#&	rotationCount = 0!@#&	while true do!@#&		shell.run(\"clear\")!@#&		print(#object)!@#&		for place=1,#object,1 do!@#&			drawObject(place)!@#&		end!@#&		drawMenu()!@#&		Event,key,xclick,yclick = os.pullEvent(\"mouse_click\")!@#&		if(yclick==object[selected][\"y1\"]-6)then!@#&			if(xclick>=object[selected][\"x1\"]-6 and xclick<=object[selected][\"x1\"]-1)then!@#&				deleteBlock()!@#&				timer = os.startTimer(.01)!@#&				return!@#&			end!@#&		elseif(yclick>=object[selected][\"y1\"]-4 and yclick<=object[selected][\"y1\"])then!@#&			if(xclick>=object[selected][\"x1\"]-7 and xclick<=object[selected][\"x1\"]-1)then!@#&				if(yclick==object[selected][\"y1\"]-4)then!@#&					--rotateBlock(rotationCount)!@#&					rotationCount = rotationCount+1!@#&				end!@#&			else!@#&				local count = 1 !@#&				for y=0,2,1 do!@#&					for x=0,3,1 do!@#&						if(object[selected][\"x1\"]-16+(x*2)==xclick and object[selected][\"y1\"]-4+(y*2)==yclick)then!@#&							object[selected][\"color\"] = colorTable[count]!@#&							timer = os.startTimer(.01)!@#&							return!@#&						end!@#&						count = count+1!@#&					end!@#&				end!@#&			end!@#&		else!@#&			timer = os.startTimer(.01)!@#&			return	!@#&		end!@#&	end!@#&end!@#&!@#&function deleteBlock()!@#&	object[selected] = {}!@#&	temp = {}!@#&	count = 1!@#&	for place=1,#object,1 do!@#&		if(object[place][\"x1\"]~=nil)then!@#&			temp[count] = object[place]!@#&			count = count+1!@#&		end	!@#&	end!@#&	object = temp!@#&	selected = 0!@#&end!@#&!@#&timer = os.startTimer(.01)!@#&!@#&while true do!@#&	shell.run(\"clear\")!@#&	--print(#object)!@#&	for place=1,#object,1 do!@#&		drawObject(place)!@#&	end!@#&	drawOptions()!@#&	Event,pram1,pram2,pram3 = os.pullEvent()!@#&	if(Event==\"mouse_drag\" or Event==\"mouse_click\")then!@#&		if(Event==\"mouse_click\")then!@#&			if(pram1==1)then!@#&				if(pram3==1)then!@#&					if(pram2>=1 and pram2<=7)then!@#&						if(gravity)then!@#&							gravity=false!@#&						else!@#&							gravity=true!@#&						end!@#&					elseif(pram2>=9 and pram2<=18)then!@#&						if(collisions)then!@#&							collisions=false!@#&						else!@#&							collisions=true!@#&						end!@#&					elseif(pram2>=20 and pram2<=25)then!@#&						if(noclip)then!@#&							noclip=false!@#&						else!@#&							noclip=true!@#&						end!@#&					elseif(pram2>=49)then!@#&						break	!@#&					end!@#&				end!@#&				for place=1,#object,1 do!@#&					if(pram2>=object[place][\"x1\"] and pram2<=object[place][\"x2\"])then!@#&						if(pram3>=object[place][\"y1\"] and pram3<=object[place][\"y2\"])then!@#&							drag = true!@#&							selected = place!@#&							break!@#&						else!@#&							drag = false!@#&							selected = 0!@#&						end!@#&					else!@#&						drag = false!@#&						selected = 0!@#&					end!@#&				end!@#&			elseif(pram1==2 and selected>0)then!@#&				openMenu()!@#&				shell.run(\"clear\")!@#&				print(#object)!@#&				for place=1,#object,1 do!@#&					drawObject(place)!@#&				end!@#&			elseif(pram1==2 and selected==0)then!@#&				local a,b,c,d = newObject()!@#&				object[#object+1] = {}!@#&				if(a>c)then!@#&					object[#object][\"x1\"] = c!@#&					object[#object][\"x2\"] = a!@#&				else!@#&					object[#object][\"x1\"] = a!@#&					object[#object][\"x2\"] = c!@#&				end!@#&				!@#&				if(b>d)then!@#&					object[#object][\"y1\"] = d!@#&					object[#object][\"y2\"] = b!@#&				else!@#&					object[#object][\"y1\"] = b!@#&					object[#object][\"y2\"] = d!@#&				end!@#&				object[#object][\"color\"] = colors.white!@#&				object[#object][\"xlength\"] = math.abs(object[#object][\"x2\"]-object[#object][\"x1\"])!@#&				object[#object][\"ylength\"] = math.abs(object[#object][\"y2\"]-object[#object][\"y1\"])!@#&			end!@#&		elseif(drag)then!@#&			object[selected][\"x1\"] = math.ceil(pram2-(object[selected][\"xlength\"]/2))!@#&			object[selected][\"y1\"] = math.ceil(pram3-(object[selected][\"ylength\"]/2))!@#&			--object[selected][\"x1\"] = pram2!@#&			--object[selected][\"y1\"] = pram3!@#&			object[selected][\"x2\"] = object[selected][\"x1\"]+object[selected][\"xlength\"]!@#&			object[selected][\"y2\"] = object[selected][\"y1\"]+object[selected][\"ylength\"]!@#&		end!@#&	elseif(Event==\"timer\" and pram1==timer)then!@#&		for place=1,#object,1 do					--cycles through objects!@#&			if(selected~=place)then					--prevents gravity to be applied to the object you are holding!@#&				if(object[place][\"y2\"]<19)then		--on the bottom of the screen!@#&					for derp=1,#object,1 do			--cycles through object to test for collisions!@#&						if(derp~=place)then			--makes sure its not testing its self!@#&							if(object[place][\"y2\"]>=object[derp][\"y1\"] and object[place][\"y1\"]<=object[derp][\"y2\"])then --tests for noclip!@#&								--print(\"derp\")!@#&								--sleep(1)!@#&								if(object[place][\"x1\"]>=object[derp][\"x1\"] and object[place][\"x1\"]<=object[derp][\"x2\"])then!@#&									inside = true!@#&									break!@#&								elseif(object[place][\"x2\"]>=object[derp][\"x1\"] and object[place][\"x2\"]<=object[derp][\"x2\"])then!@#&									inside = true!@#&									break!@#&								elseif(object[place][\"x1\"]<=object[derp][\"x1\"] and object[place][\"x2\"]>=object[derp][\"x1\"])then!@#&									inside = true!@#&									break!@#&								else!@#&									inside = false!@#&								end	!@#&							elseif(object[derp][\"y1\"]-1<=object[place][\"y2\"] and object[derp][\"y2\"]>=object[place][\"y1\"])then --tests for collisions!@#&								if(object[place][\"x1\"]>=object[derp][\"x1\"] and object[place][\"x1\"]<=object[derp][\"x2\"])then!@#&									below = true!@#&									break!@#&								elseif(object[place][\"x2\"]>=object[derp][\"x1\"] and object[place][\"x2\"]<=object[derp][\"x2\"])then!@#&									below = true!@#&									break!@#&								elseif(object[place][\"x1\"]<=object[derp][\"x1\"] and object[place][\"x2\"]>=object[derp][\"x1\"])then!@#&									below = true!@#&									break!@#&								else!@#&									below = false!@#&								end!@#&							else!@#&								below = false!@#&								inside = false!@#&							end!@#&						end!@#&					end  !@#&					if(not collisions)then!@#&						below = false!@#&					end!@#&					if(noclip)then!@#&						inside = false!@#&					end!@#&					if(inside)then!@#&						object[place][\"y1\"] = object[place][\"y1\"]-1!@#&						object[place][\"y2\"] = object[place][\"y2\"]-1!@#&					end!@#&					if(not below and gravity)then!@#&						object[place][\"y1\"] = object[place][\"y1\"]+1!@#&						object[place][\"y2\"] = object[place][\"y2\"]+1!@#&					end!@#&				end!@#&			end!@#&		end!@#&		timer = os.startTimer(.01)!@#&	end!@#&end",["NanoMaze"]="--[[!@#&    Project info:!@#&    !@#&    Name: Maze!@#&    Creator: Jesusthekiller!@#&    Language: Lua (CC)!@#&    Website: None!@#&    License: GNU GPL!@#&        License file can be fount at www.jesusthekiller.com/license-gpl.html!@#& !@#&    Version: 1.2!@#&]]--!@#& !@#&--[[!@#&    Changelog:!@#&      1.0:!@#&        Initial Release!@#&      1.1:!@#&        Typos D:!@#&      1.2:!@#&        New logo!@#&        Time fixed!@#&]]--!@#& !@#&--[[!@#&    LICENSE:!@#&    !@#&    Maze!@#&    Copyright (c) 2013 Jesusthekiller!@#& !@#&    This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.!@#& !@#&    This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.!@#& !@#&    See the GNU General Public License for more details. You should have received a copy of the GNU General Public License along with this program. If not, see <http://www.gnu.org/licenses/>.!@#&]]--!@#& !@#&-- The maze!@#& !@#&-- The cprint!@#&local function cwrite(msg)!@#&    msg = tostring(msg)!@#&    local x, y = term.getCursorPos()!@#&    term.setCursorPos((51-#msg)/2, y)!@#&    write(msg)!@#&end!@#& !@#&local function cprint(msg)!@#&    cwrite(msg..\"\\n\")!@#&end!@#& !@#&-- The logo!@#&local f = fs.open(\"maze_logo\", \"w\") or error(\"Error while opening file maze_logo\", 0)!@#&f.write(\"0000000000 0  0  0  0  0  0\\n0    0   0 00 0 0 0 00 0 0 0\\n0000 000 0 0 00 0 0 0 00  0\\n0      0 0\\n0 0000 0 0 0   0  0  00  000\\n0   0    0 00 00 0 0  0  00\\n0000000000 0 0 0 0 0  00 000\")!@#&f.close()!@#& !@#&f = paintutils.loadImage(\"maze_logo\")!@#& !@#&fs.delete(\"maze_logo\")!@#& !@#&-- The splash!@#&term.setBackgroundColor(colors.black)!@#&term.setTextColor(colors.white)!@#&term.clear()!@#& !@#&term.setCursorPos(27, 8)!@#&print(\"Nano maze!\")!@#& !@#&paintutils.drawImage(f, 13, 5)!@#& !@#&parallel.waitForAny(!@#&    function() coroutine.yield(); os.pullEvent(\"key\"); coroutine.yield() end,!@#&    function() term.setBackgroundColor(colors.black); term.setTextColor(colors.white) while true do term.setCursorPos(18, 14); term.write(\"Press any key..\"); sleep(0.5); term.clearLine(); sleep(0.5) end end!@#&)!@#& !@#&-- The size!@#&local size!@#& !@#&repeat!@#&    term.setCursorPos(1, 14)!@#&    term.clearLine()!@#& !@#&    cwrite(\"Enter maze size (5-99):\")!@#&    size = read()!@#&    !@#&    size = tonumber(size)!@#&    if not size then!@#&        size = 0!@#&    end!@#&until size > 4 and size < 100!@#& !@#&-- The generate!@#&local function mazeGen(mx, my)!@#&    !@#&    --[[!@#&        Format:!@#&        !@#&        maze.x.y.(1/2/3/4) = true/false!@#&        !@#&        1 - top!@#&        2 - bottom!@#&        3 - right!@#&        4 - left!@#&    ]]--!@#&    !@#&    local maze = {}!@#&    for i = 1, mx do!@#&        maze[i] = {}!@#&        for j = 1, my do!@#&            maze[i][j] = {}!@#&            for k = 1, 4 do!@#&                maze[i][j][k] = true!@#&            end!@#&        end!@#&    end!@#& !@#&    local vis = 1!@#&    local tot = mx * my!@#&    local curr = {}!@#&    curr.x = math.random(1, mx)!@#&    curr.y = math.random(1, my)!@#&    local stack = {}!@#& !@#&    while vis < tot do!@#&        local intact = {}!@#&        local x = curr.x!@#&        local y = curr.y!@#&        !@#&        if x - 1 >= 1 and maze[x-1][y][1] and maze[x-1][y][2] and maze[x-1][y][3] and maze[x-1][y][4] then -- Check for full cells!@#&            intact[#intact+1] = {x-1, y, 1}!@#&        end!@#&        !@#&        if x + 1 <= mx and maze[x+1][y][1] and maze[x+1][y][2] and maze[x+1][y][3] and maze[x+1][y][4] then!@#&            intact[#intact+1] = {x+1, y, 2}!@#&        end!@#&        !@#&        if y + 1 <= my and maze[x][y+1][1] and maze[x][y+1][2] and maze[x][y+1][3] and maze[x][y+1][4] then!@#&            intact[#intact+1] = {x, y+1, 3}!@#&        end!@#&        !@#&        if y - 1 >= 1 and maze[x][y-1][1] and maze[x][y-1][2] and maze[x][y-1][3] and maze[x][y-1][4] then!@#&            intact[#intact+1] = {x, y-1, 4}!@#&        end!@#&        !@#&        if #intact > 0 then!@#&            local i = math.random(1, #intact) -- Choose random!@#&            !@#&            if intact[i][3] == 1 then -- Set intact's attached wall to false!@#&                maze[intact[i][1]][intact[i][2]][2] = false!@#&            elseif intact[i][3] == 2 then!@#&                maze[intact[i][1]][intact[i][2]][1] = false!@#&            elseif intact[i][3] == 3 then!@#&                maze[intact[i][1]][intact[i][2]][4] = false!@#&            elseif intact[i][3] == 4 then!@#&                maze[intact[i][1]][intact[i][2]][3] = false!@#&            end!@#&            !@#&            maze[x][y][intact[i][3]] = false -- Set attached wall to false!@#&            !@#&            vis = vis + 1 -- Increase vis!@#&            !@#&            stack[#stack+1] = intact[i] -- Add to stack!@#&        else!@#&            local tmp = table.remove(stack) -- Get last cell!@#&            curr.x = tmp[1]!@#&            curr.y = tmp[2]!@#&        end!@#&    end!@#&    !@#&    return maze!@#&end!@#& !@#&local m = mazeGen(size, size)!@#& !@#&-- The game init!@#&local posx = 2!@#&local posy = 2!@#& !@#&local offsetx = 51/2-2!@#&local offsety = 19/2-2!@#& !@#&local stime = os.clock()!@#& !@#&-- The maze-to-table!@#&local tab = {}!@#& !@#&for x = 1, size * 2 + 1 do!@#&    tab[x] = {}!@#&    !@#&    for y = 1, size * 2 + 1 do!@#&        if x % 2 == 0 and y % 2 == 0 then -- Fill cells (empty)!@#&            tab[x][y] = false!@#&        elseif x % 2 == 1 and y % 2 == 1 then -- Fill corners (full)!@#&            tab[x][y] = true!@#&        end!@#&    end!@#&end!@#& !@#&for x, tV in ipairs(m) do!@#&    for y, v in ipairs(tV) do!@#&        tab[x*2-1][y*2] = v[1] -- Up!@#&        tab[x*2+1][y*2] = v[2] -- Down!@#&        tab[x*2][y*2+1] = v[3] -- Right!@#&        tab[x*2][y*2-1] = v[4] -- Left!@#&    end!@#&end!@#& !@#&-- The game itself!@#&repeat!@#&    -- Print map!@#&    term.setBackgroundColor(colors.white)!@#&    term.clear()!@#&    !@#&    if posx == 2 and posy == 2 then!@#&        term.setCursorPos(1, 1)!@#&        term.setTextColor(colors.black)!@#&        print(\"Controls: WASD\")!@#&        print(\"Back to start: R\")!@#&        print(\"Quit: Q\")!@#&        print(\"Goal: Step on # (It's on bottom right corner)\")!@#&        print(\"\\nGood Luck!\")!@#&    end!@#&    !@#&    --[[!@#&        term.setTextColor(colors.black)!@#&        term.setCursorPos(1, 19)!@#&        write(\"X: \"..posx..\"   Y: \"..posy)!@#&    ]]!@#&    !@#&    for x, tV in ipairs(tab) do -- Print the map!@#&        for y, v in ipairs(tV) do!@#&            if offsety+y > 20 then!@#&                break!@#&            end!@#&            !@#&            term.setCursorPos(offsetx+x, offsety+y)!@#&            !@#&            if v then!@#&                term.setBackgroundColor(colors.black)!@#&            else!@#&                term.setBackgroundColor(colors.white)!@#&            end!@#&            !@#&            if offsety+y < 20 and offsety+y > 0 and offsetx+x < 52 and offsetx+x > 0 then!@#&                if x == size*2 and y == size*2 then!@#&                    if term.isColor() then!@#&                        term.setTextColor(colors.cyan)!@#&                    end!@#&                    write(\"#\")!@#&                else!@#&                    write(\" \")!@#&                end!@#&            end!@#&        end!@#&        !@#&        if offsetx+x > 51 then!@#&            break!@#&        end!@#&    end !@#&    !@#&    term.setCursorPos(51/2, 19/2)!@#&    term.setBackgroundColor(colors.white)!@#&    !@#&    if term.isColor() then!@#&        term.setTextColor(colors.red)!@#&    else!@#&        term.setTextColor(colors.black)!@#&    end!@#&    !@#&    write(\"X\")!@#&    !@#&    -- Wait for key!@#&    !@#&    local e, k = os.pullEvent(\"char\")!@#&    !@#&    if k == \"a\" and (not tab[posx-1][posy]) then!@#&        posx = posx - 1!@#&        offsetx = offsetx + 1!@#&    end!@#&    !@#&    if k == \"d\" and (not tab[posx+1][posy]) then!@#&        posx = posx + 1!@#&        offsetx = offsetx - 1!@#&    end!@#&    !@#&    if k == \"w\" and (not tab[posx][posy-1]) then!@#&        posy = posy - 1!@#&        offsety = offsety + 1!@#&    end!@#&    !@#&    if k == \"s\" and (not tab[posx][posy+1]) then!@#&        posy = posy + 1!@#&        offsety = offsety - 1!@#&    end!@#&    !@#&    if k == \"q\" then!@#&        break!@#&    end!@#&    !@#&    if k == \"r\" then!@#&        posx = 2!@#&        posy = 2!@#& !@#&        offsetx = 51/2-2!@#&        offsety = 19/2-2!@#&    end!@#&until posx == size*2 and posy == size*2!@#& !@#&-- The win/loose message!@#&term.setBackgroundColor(colors.white)!@#&term.setTextColor(colors.black)!@#&term.clear()!@#&term.setCursorPos(1, 1)!@#& !@#&if posx == size*2 and posy == size*2 then!@#&    local ntime = os.clock()!@#&    write(\"\\n\")!@#&    cprint(\"Congratulations!\")!@#&    cprint(\"You made it in\")!@#&    cprint(tostring(math.floor((ntime-stime)/60))..\" minutes and \"..tostring(math.ceil((ntime-stime)%60))..\" seconds\")!@#&    cprint(\"Size of maze: \"..size)!@#&else!@#&    write(\"\\n\")!@#&    cprint(\"Oh noes D:\")!@#&end!@#& !@#&parallel.waitForAny(!@#&    function() coroutine.yield(); os.pullEvent(\"key\"); coroutine.yield() end,!@#&    function() term.setBackgroundColor(colors.white); term.setTextColor(colors.black) while true do term.setCursorPos(18, 14); term.write(\"Press any key..\"); sleep(0.5); term.clearLine(); sleep(0.5) end end!@#&)!@#& !@#&term.setBackgroundColor(colors.black)!@#&term.setTextColor(colors.white)!@#&term.clear()!@#&term.setCursorPos(1, 1)!@#&cprint(\"  Maze by Jesusthekiller. Thanks for playing!\")",["eShip4_broken.img"]="                     eee!@#&               eeeeee111f!@#&              e1111f1efff!@#&              ff1effff!@#&              fffff1ff!@#&              1effe111fff!@#&               111eee1eef!@#&                     111",["info.sav"]="",["eShip9_broken.img"]="!@#&                77777b!@#&              777bbbbbf!@#&             77ffbf777f!@#&             ffffff7fff!@#&             fff7f7ffff!@#&             bf7777f77f!@#&              bbbbbbbbf!@#&                77777b",["Maze3D"]="--[[!@#&	Project info:!@#&	!@#&	Name: Maze 3D!@#&	Creator: Jesusthekiller!@#&	Language: Lua (CC)!@#&	Website: None!@#&	License: GNU GPL!@#&		License file can be fount at www.jesusthekiller.com/license-gpl.html!@#&!@#&	Version: 2.1!@#&]]--!@#&!@#&--[[!@#&	Big thanks to Gopher for 3D engine!!@#&	http://www.computercraft.info/forums2/index.php?/topic/10786-wolf3d-style-3d-engine-proof-of-concept/page__hl__wolf3d!@#&]]--!@#&!@#&--[[!@#&	Changelog:!@#&	  1.0:!@#&	    Initial Release!@#&	  2.0:!@#&	    No-HTTP version for Treasure disk!@#&	  2.1:!@#&	    No more temp files!!@#&]]--!@#&!@#&--[[!@#&	LICENSE:!@#&	!@#&	Maze 3D!@#&	Copyright (c) 2013 Jesusthekiller!@#&!@#&	This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.!@#&!@#&	This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.!@#&!@#&	See the GNU General Public License for more details. You should have received a copy of the GNU General Public License along with this program. If not, see <http://www.gnu.org/licenses/>.!@#&]]--!@#&!@#&-- The color check!@#&if (not term.isColor()) or turtle then!@#&	print(\"This program has to be run on advanced computer.\")!@#&	error()!@#&end!@#&!@#&-- The cprint!@#&local function cwrite(msg)!@#&	msg = tostring(msg)!@#&	local x, y = term.getCursorPos()!@#&	term.setCursorPos((51-#msg)/2, y)!@#&	write(msg)!@#&end!@#&!@#&local function cprint(msg)!@#&	cwrite(msg..\"\\n\")!@#&end!@#&!@#&--[[!@#&-- The logo!@#&local f = fs.open(\"maze_logo\", \"w\") or error(\"Error while opening file maze_logo\", 0)!@#&f.write(\"0   0  00   0000 0000\\n00 00 0  0     0 0   \\n0 0 0 0000   00  000 \\n0   0 0  0  0    0   \\n0   0 0  0  0000 0000\\n        \\n   eeee    9999      \\n    777e   97779     \\n   eeee 7  97  97    \\n    777e   97  97    \\n   eeee 7  999977    \\n    7777    7777\")!@#&f.close()!@#&!@#&f = paintutils.loadImage(\"maze_logo\")!@#&!@#&--fs.delete(\"maze_logo\")]]!@#&!@#&-- The splash!@#&term.setBackgroundColor(colors.black)!@#&term.setTextColor(colors.white)!@#&term.clear()!@#&!@#&paintutils.drawImage({[1]={[1]=1,[2]=0,[3]=0,[4]=0,[5]=1,[6]=0,[7]=0,[8]=1,[9]=1,[10]=0,[11]=0,[12]=0,[13]=1,[14]=1,[15]=1,[16]=1,[17]=0,[18]=1,[19]=1,[20]=1,[21]=1,},[2]={[1]=1,[2]=1,[3]=0,[4]=1,[5]=1,[6]=0,[7]=1,[8]=0,[9]=0,[10]=1,[11]=0,[12]=0,[13]=0,[14]=0,[15]=0,[16]=1,[17]=0,[18]=1,[19]=0,[20]=0,[21]=0,},[3]={[1]=1,[2]=0,[3]=1,[4]=0,[5]=1,[6]=0,[7]=1,[8]=1,[9]=1,[10]=1,[11]=0,[12]=0,[13]=0,[14]=1,[15]=1,[16]=0,[17]=0,[18]=1,[19]=1,[20]=1,[21]=0,},[4]={[1]=1,[2]=0,[3]=0,[4]=0,[5]=1,[6]=0,[7]=1,[8]=0,[9]=0,[10]=1,[11]=0,[12]=0,[13]=1,[14]=0,[15]=0,[16]=0,[17]=0,[18]=1,[19]=0,[20]=0,[21]=0,},[5]={[1]=1,[2]=0,[3]=0,[4]=0,[5]=1,[6]=0,[7]=1,[8]=0,[9]=0,[10]=1,[11]=0,[12]=0,[13]=1,[14]=1,[15]=1,[16]=1,[17]=0,[18]=1,[19]=1,[20]=1,[21]=1,},[6]={[1]=0,[2]=0,[3]=0,[4]=0,[5]=0,[6]=0,[7]=0,[8]=0,},[7]={[1]=0,[2]=0,[3]=0,[4]=16384,[5]=16384,[6]=16384,[7]=16384,[8]=0,[9]=0,[10]=0,[11]=0,[12]=512,[13]=512,[14]=512,[15]=512,[16]=0,[17]=0,[18]=0,[19]=0,[20]=0,[21]=0,},[8]={[1]=0,[2]=0,[3]=0,[4]=0,[5]=128,[6]=128,[7]=128,[8]=16384,[9]=0,[10]=0,[11]=0,[12]=512,[13]=128,[14]=128,[15]=128,[16]=512,[17]=0,[18]=0,[19]=0,[20]=0,[21]=0,},[9]={[1]=0,[2]=0,[3]=0,[4]=16384,[5]=16384,[6]=16384,[7]=16384,[8]=0,[9]=128,[10]=0,[11]=0,[12]=512,[13]=128,[14]=0,[15]=0,[16]=512,[17]=128,[18]=0,[19]=0,[20]=0,[21]=0,},[10]={[1]=0,[2]=0,[3]=0,[4]=0,[5]=128,[6]=128,[7]=128,[8]=16384,[9]=0,[10]=0,[11]=0,[12]=512,[13]=128,[14]=0,[15]=0,[16]=512,[17]=128,[18]=0,[19]=0,[20]=0,[21]=0,},[11]={[1]=0,[2]=0,[3]=0,[4]=16384,[5]=16384,[6]=16384,[7]=16384,[8]=0,[9]=128,[10]=0,[11]=0,[12]=512,[13]=512,[14]=512,[15]=512,[16]=128,[17]=128,[18]=0,[19]=0,[20]=0,[21]=0,},[12]={[1]=0,[2]=0,[3]=0,[4]=0,[5]=128,[6]=128,[7]=128,[8]=128,[9]=0,[10]=0,[11]=0,[12]=0,[13]=128,[14]=128,[15]=128,[16]=128,},}, 15, 3)!@#&!@#&parallel.waitForAny(!@#&	function() coroutine.yield(); os.pullEvent(\"key\"); coroutine.yield() end,!@#&	function() term.setBackgroundColor(colors.black); term.setTextColor(colors.white) while true do term.setCursorPos(18, 16); term.write(\"Press any key..\"); sleep(0.5); term.clearLine(); sleep(0.5) end end!@#&)!@#&!@#&-- The size!@#&local size!@#&!@#&repeat!@#&	term.setCursorPos(1, 16)!@#&	term.clearLine()!@#&!@#&	cwrite(\"Enter maze size (5-99):\")!@#&	size = read()!@#&	!@#&	size = tonumber(size)!@#&	if not size then!@#&		size = 0!@#&	end!@#&until size > 4 and size < 100!@#&!@#&-- The generate!@#&local function mazeGen(mx, my)!@#&	!@#&	--[[!@#&		Format:!@#&		!@#&		maze.x.y.(1/2/3/4) = true/false!@#&		!@#&		1 - top!@#&		2 - bottom!@#&		3 - right!@#&		4 - left!@#&	]]--!@#&	!@#&	local maze = {}!@#&	for i = 1, mx do!@#&		maze[i] = {}!@#&		for j = 1, my do!@#&			maze[i][j] = {}!@#&			for k = 1, 4 do!@#&				maze[i][j][k] = true!@#&			end!@#&		end!@#&	end!@#&!@#&	local vis = 1!@#&	local tot = mx * my!@#&	local curr = {}!@#&	curr.x = math.random(1, mx)!@#&	curr.y = math.random(1, my)!@#&	local stack = {}!@#&!@#&	while vis < tot do!@#&		local intact = {}!@#&		local x = curr.x!@#&		local y = curr.y!@#&		!@#&		if x - 1 >= 1 and maze[x-1][y][1] and maze[x-1][y][2] and maze[x-1][y][3] and maze[x-1][y][4] then -- Check for full cells!@#&			intact[#intact+1] = {x-1, y, 1}!@#&		end!@#&		!@#&		if x + 1 <= mx and maze[x+1][y][1] and maze[x+1][y][2] and maze[x+1][y][3] and maze[x+1][y][4] then!@#&			intact[#intact+1] = {x+1, y, 2}!@#&		end!@#&		!@#&		if y + 1 <= my and maze[x][y+1][1] and maze[x][y+1][2] and maze[x][y+1][3] and maze[x][y+1][4] then!@#&			intact[#intact+1] = {x, y+1, 3}!@#&		end!@#&		!@#&		if y - 1 >= 1 and maze[x][y-1][1] and maze[x][y-1][2] and maze[x][y-1][3] and maze[x][y-1][4] then!@#&			intact[#intact+1] = {x, y-1, 4}!@#&		end!@#&		!@#&		if #intact > 0 then!@#&			local i = math.random(1, #intact) -- Choose random!@#&			!@#&			if intact[i][3] == 1 then -- Set intact's attached wall to false!@#&				maze[intact[i][1]][intact[i][2]][2] = false!@#&			elseif intact[i][3] == 2 then!@#&				maze[intact[i][1]][intact[i][2]][1] = false!@#&			elseif intact[i][3] == 3 then!@#&				maze[intact[i][1]][intact[i][2]][4] = false!@#&			elseif intact[i][3] == 4 then!@#&				maze[intact[i][1]][intact[i][2]][3] = false!@#&			end!@#&			!@#&			maze[x][y][intact[i][3]] = false -- Set attached wall to false!@#&			!@#&			vis = vis + 1 -- Increase vis!@#&			!@#&			stack[#stack+1] = intact[i] -- Add to stack!@#&		else!@#&			local tmp = table.remove(stack) -- Get last cell!@#&			curr.x = tmp[1]!@#&			curr.y = tmp[2]!@#&		end!@#&	end!@#&	!@#&	return maze!@#&end!@#&!@#&local m = mazeGen(size, size)!@#&!@#&-- The game init!@#&local posx = 2!@#&local posy = 2!@#&!@#&local offsetx = 51/2-2!@#&local offsety = 19/2-2!@#&!@#&-- The maze-to-table!@#&local tab = {}!@#&!@#&for x = 1, size * 2 + 1 do!@#&	tab[x] = {}!@#&	!@#&	for y = 1, size * 2 + 1 do!@#&		if x % 2 == 0 and y % 2 == 0 then -- Fill cells (empty)!@#&			tab[x][y] = \" \"!@#&		elseif x % 2 == 1 and y % 2 == 1 then -- Fill corners (full)!@#&			tab[x][y] = \"1\"!@#&		end!@#&	end!@#&end!@#&!@#&for x, tV in ipairs(m) do!@#&	for y, v in ipairs(tV) do!@#&		if x == size and y == size then!@#&			v[1] = v[1] and \"2\" or \" \"!@#&			v[2] = v[2] and \"2\" or \" \"!@#&			v[3] = v[3] and \"2\" or \" \"!@#&			v[4] = v[4] and \"2\" or \" \"!@#&			tab[x*2-1][y*2] = v[1] -- Up!@#&			tab[x*2+1][y*2] = v[2] -- Down!@#&			tab[x*2][y*2+1] = v[3] -- Right!@#&			tab[x*2][y*2-1] = v[4] -- Left!@#&		else!@#&			v[1] = v[1] and \"1\" or \" \"!@#&			v[2] = v[2] and \"1\" or \" \"!@#&			v[3] = v[3] and \"1\" or \" \"!@#&			v[4] = v[4] and \"1\" or \" \"!@#&			tab[x*2-1][y*2] = v[1] -- Up!@#&			tab[x*2+1][y*2] = v[2] -- Down!@#&			tab[x*2][y*2+1] = v[3] -- Right!@#&			tab[x*2][y*2-1] = v[4] -- Left!@#&		end!@#&	end!@#&end!@#&!@#&local gtab = {}!@#&!@#&for k, v in ipairs(tab) do!@#&	gtab[#gtab+1] = table.concat(v)!@#&end!@#&!@#&size = size * 2 + 1!@#&!@#&--[[!@#&local template = fs.open(\"maze3d_template\", \"r\")!@#&local game = fs.open(\"maze3d_game\", \"w\")!@#&!@#&game.writeLine(\"local mapH, mapW = \"..size..\",\"..size)!@#&game.writeLine(\"local dir = \"..(gtab[2]:sub(3,3) == \" \" and '0' or '88'))!@#&game.writeLine(\"local map = {\")!@#&!@#&for k, v in ipairs(gtab) do!@#&	game.writeLine('\"'..v..'\",')!@#&end!@#&!@#&game.writeLine(\"}\")!@#&!@#&game.writeLine(template.readAll())!@#&game.close()!@#&template.close()!@#&!@#&shell.run(\"maze3d_game\")!@#&!@#&fs.delete(\"maze3d_game\")!@#&fs.delete(\"maze3d_template\")]]!@#&!@#&local mapH, mapW = size, size!@#&local dir = gtab[2]:sub(3,3) == \" \" and '0' or '88'!@#&local map = gtab!@#&local startdir = dir!@#&!@#&------------------------------------------------------------------------------------------------------!@#&--GOPHER'S CODE HERE!@#&!@#&local buffer=term!@#&local loadedAPI=false!@#&!@#&local stime = os.clock()!@#&!@#&if redirect then!@#&  buffer=redirect.createRedirectBuffer()!@#&  print(\"redirect API found, using buffer\")!@#&else!@#&  local pe=printError!@#&  rawset(_G,\"printError\",error)  !@#&  local ok, err=pcall(os.loadAPI,\"redirect\")!@#&  if not ok then!@#&    print(\"trying \"..shell.dir()..\"/redirect\")!@#&    ok,err=pcall(os.loadAPI,shell.dir()..\"/redirect\")!@#&  end!@#&  if ok then    !@#&    print(\"Loaded redirect API, using buffer\")!@#&    buffer=redirect.createRedirectBuffer()!@#&    loadedAPI=true!@#&  else!@#&    print(\"redirect API not found or could not be loaded, drawing directly; this may cause flickering.\")!@#&  end!@#&  rawset(_G,\"printError\",pe)!@#&end !@#&!@#&local colorSchemes = {!@#&  {0,8}, --white+gray!@#&  {3,11}, --blue!@#&  {6,14}, --red!@#&  {5,13}, --green!@#&  {4,1}, --yellow/orange!@#&}!@#&!@#&!@#&local function cast(cx,cy,angle)!@#&  --direction vector!@#&  local vx,vy=math.cos(angle), math.sin(angle)!@#&  local slope=vy/vx!@#&  --next distance, x and y axis points!@#&  local ndx, ndy!@#&  --steps, distance and block!@#&  local dsx, dsy, bsx, bsy!@#&  if vx<0 then!@#&    local x=(cx%1)!@#&    bsx=-1!@#&    ndx=math.sqrt(x*x*(1+slope*slope))!@#&    dsx=math.sqrt((1+slope*slope))!@#&  else!@#&    local x=1-(cx%1)!@#&    bsx=1!@#&    ndx=math.sqrt(x*x*(1+slope*slope))!@#&    dsx=math.sqrt((1+slope*slope))!@#&  end!@#&!@#&  if vy<0 then!@#&    local y=(cy%1)!@#&    bsy=-1!@#&    ndy=math.sqrt(y*y*(1+1/(slope*slope)))!@#&    dsy=math.sqrt((1+1/(slope*slope)))!@#&  else!@#&    local y=1-(cy%1)!@#&    bsy=1!@#&    ndy=math.sqrt(y*y*(1+1/(slope*slope)))!@#&    dsy=math.sqrt((1+1/(slope*slope)))!@#&  end!@#&!@#&  local x,y=math.floor(cx),math.floor(cy)!@#&  while x>0 and x<=mapW and y>0 and y<=mapH do!@#&    local hitD!@#&    local isX!@#&    if ndx<ndy then!@#&      --x crossing is next!@#&      x=x+bsx!@#&      isX=true!@#&      hitD=ndx!@#&      ndx=ndx+dsx!@#&    else!@#&      y=y+bsy!@#&      isX=false!@#&      hitD=ndy!@#&      ndy=ndy+dsy!@#&    end!@#&    local wall=map[y]:sub(x,x)!@#&    if wall~=\" \" then!@#&      !@#&      return colorSchemes[tonumber(wall)][isX and 1 or 2], hitD!@#&    end!@#&  end  !@#&end!@#&!@#&local w,h=term.getSize()!@#&local centerX, centerY=math.floor((w+1)/2), math.floor((h+1)/2)!@#&!@#&local px, py=2.5,2.5!@#&--local dir=0!@#&local fx,fy!@#&local speed=.1!@#&local turnSpeed=4!@#&!@#&local function turn(amt)!@#&  dir=dir+amt!@#&  fx,fy=math.cos(math.rad(dir)), math.sin(math.rad(dir))!@#&end!@#&!@#&turn(0)!@#&!@#&--build table of angles and base distances per scanline!@#&local screenDist=.55*w!@#&local scan={}!@#&!@#&for x=1,w do!@#&  local t={}!@#&  scan[x]=t!@#&  t.angle=math.atan2(x-centerX,screenDist)!@#&  t.dist=((x-centerX)^2+screenDist^2)^.5/screenDist!@#&end!@#&  !@#&local function redraw()!@#&  if buffer.isBuffer then!@#&    term.redirect(buffer)!@#&  end!@#&  for x=1,w do!@#&    local wall,dist=cast(px,py,math.rad(dir)+scan[x].angle)!@#&    if wall then!@#&      --calc wall height based on distance!@#&      local height=scan[x].dist/dist!@#&      height=math.floor(math.min(height*centerY,(h+1)/2))!@#&      term.setBackgroundColor(colors.gray)!@#&      for y=1,(h+1)/2-height-1 do!@#&        term.setCursorPos(x,y)!@#&        term.write(\" \")!@#&      end!@#&      for y=centerY+height+1,h do!@#&        term.setCursorPos(x,y)!@#&        term.write(\" \")!@#&      end!@#&      term.setBackgroundColor(2^wall)!@#&      for y=centerY-height,centerY+height do!@#&        term.setCursorPos(x,y)!@#&        term.write(\" \")!@#&      end!@#&    end!@#&  end!@#&  if buffer.isBuffer then!@#&    term.restore()!@#&    buffer.blit()!@#&  end!@#&end!@#&!@#&local function clampCollision(x,y,radius)!@#&  --am I *in* a block?!@#&  local gx,gy=math.floor(x),math.floor(y)!@#&  if map[gy]:sub(gx,gx)~=\" \" then!@#&    --I am. Complete fail, do nothing.!@#&    return x,y!@#&  end!@#&  !@#&  --ok, check the neighbors.!@#&  local right=math.floor(x+radius)>gx!@#&  local left=math.floor(x-radius)<gx!@#&  local front=math.floor(y-radius)<gy!@#&  local back=math.floor(y+radius)>gy!@#&  !@#&  local pushed=false!@#&  !@#&  if right and map[gy]:sub(gx+1,gx+1)~=\" \" then!@#&    --push left!@#&    pushed=true!@#&    x=gx+1-radius!@#&  elseif left  and map[gy]:sub(gx-1,gx-1)~=\" \" then!@#&    --push right!@#&    pushed=true!@#&    x=gx+radius!@#&  end!@#&  !@#&  if front and map[gy-1]:sub(gx,gx)~=\" \" then!@#&    --push back!@#&    pushed=true!@#&    y=gy+radius!@#&  elseif back and map[gy+1]:sub(gx,gx)~=\" \" then!@#&    --push forward!@#&    pushed=true!@#&!@#&!@#&!@#&    y=gy+1-radius!@#&  end!@#& !@#&  --if I wasn't pushed out on any side, I might be hitting a corner!@#&  if not pushed then!@#&    --square rad!@#&    local r2=radius^2!@#&    local pushx,pushy=0,0!@#&    if left then!@#&      if front and map[gy-1]:sub(gx-1,gx-1)~=\" \" then!@#&        --check front-left!@#&        local dist2=(gx-x)^2+(gy-y)^2!@#&        if dist2<r2 then!@#&          local pushd=(r2-dist2)/2^.5!@#&          pushx,pushy=pushd,pushd!@#&        end!@#&      elseif back and map[gy+1]:sub(gx-1,gx-1)~=\" \" then!@#&        local dist2=(gx-x)^2+(gy+1-y)^2!@#&        if dist2<r2 then!@#&          local pushd=(r2-dist2)/2^.5!@#&          pushx,pushy=pushd,-pushd!@#&        end!@#&      end!@#&    elseif right then!@#&      if front and map[gy-1]:sub(gx+1,gx+1)~=\" \" then!@#&        --check front-left!@#&        local dist2=(gx+1-x)^2+(gy-y)^2!@#&        if dist2<r2 then!@#&          local pushd=(r2-dist2)/2^.5!@#&          pushx,pushy=-pushd,pushd!@#&        end!@#&      elseif back and map[gy+1]:sub(gx+1,gx+1)~=\" \" then!@#&        local dist2=(gx+1-x)^2+(gy+1-y)^2!@#&        if dist2<r2 then!@#&          local pushd=(r2-dist2)/2^.5!@#&          pushx,pushy=-pushd,-pushd!@#&        end!@#&      end!@#&    end!@#&    x=x+pushx!@#&    y=y+pushy!@#&  end!@#&  !@#&  return x,y!@#&end!@#&!@#&term.setBackgroundColor(colors.black)!@#&--term.setTextColor(colors.white)!@#&term.clear()!@#&term.setCursorPos(1, 1)!@#&!@#&term.setTextColor(colors.yellow)!@#&write(\"Move:                                          \")!@#&term.setTextColor(colors.lime)!@#&print(\"WASD\")!@#&!@#&term.setTextColor(colors.yellow)!@#&write(\"Turn:                              \")!@#&term.setTextColor(colors.lime)!@#&print(\"Left/Right arrow\")!@#&!@#&term.setTextColor(colors.yellow)!@#&write(\"Teleport to start:                                \")!@#&term.setTextColor(colors.lime)!@#&print(\"R\")!@#&!@#&term.setTextColor(colors.yellow)!@#&write(\"Quit:                                             \")!@#&term.setTextColor(colors.lime)!@#&print(\"Q\\n\")!@#&!@#&term.setTextColor(colors.white)!@#&write(\"Goal: go to \")!@#&term.setTextColor(colors.lightBlue)!@#&write(\"blue\")!@#&term.setTextColor(colors.white)!@#&print(\" spot (opposite corner of the map)\\n\\n\\n\\n\")!@#&!@#&term.setTextColor(colors.white)!@#&cprint(\"Press any key to start!\")!@#&!@#&os.pullEvent(\"key\")!@#&!@#&local frameTimer=os.startTimer(0.5)!@#&local prevTick=0!@#&local dirty=true!@#&local win = false!@#&while true do!@#&  px,py=clampCollision(px,py,.25)!@#&  if dirty then!@#&    redraw()!@#&    dirty=false!@#&  end!@#&  !@#&  local e={os.pullEvent()}!@#&  if e[1]==\"key\" then!@#&    if e[2]==keys.left then!@#&      turn(-turnSpeed)!@#&      dirty=true!@#&    elseif e[2]==keys.right then!@#&      turn(turnSpeed)!@#&      dirty=true!@#&    elseif e[2]==keys.up or e[2]==keys.w then!@#&      px=px+fx*speed!@#&      py=py+fy*speed!@#&      dirty=true!@#&    elseif e[2]==keys.down or e[2]==keys.s then!@#&      px=px-fx*speed!@#&      py=py-fy*speed!@#&      dirty=true!@#&    elseif e[2]==keys.a then!@#&      px=px+fy*speed!@#&      py=py-fx*speed!@#&      dirty=true!@#&    elseif e[2]==keys.d then!@#&      px=px-fy*speed!@#&      py=py+fx*speed!@#&      dirty=true!@#&    elseif e[2]==keys.q then!@#&      break!@#&    elseif e[2]==keys.r then!@#&      px,py = 2.5,2.5!@#&      dir=startdir!@#&      dirty=true!@#&    end!@#&    !@#&    if px >= mapW-1 and py >= mapH-1 then!@#&      win = true!@#&      break!@#&    end!@#&  end!@#&end!@#&!@#&!@#&if loadedAPI then!@#&  os.unloadAPI(\"redirect\")!@#&end!@#&!@#&-- JESUS PART!@#&!@#&-- The win/loose message!@#&term.setBackgroundColor(colors.white)!@#&term.setTextColor(colors.black)!@#&term.clear()!@#&term.setCursorPos(1, 1)!@#&!@#&if win then!@#&  local ntime = os.clock()!@#&  write(\"\\n\")!@#&  cprint(\"Congratulations!\")!@#&  cprint(\"You made it in\")!@#&  cprint(tostring(math.floor((ntime-stime)/60))..\" minutes and \"..tostring(math.ceil((ntime-stime)%60))..\" seconds\")!@#&  cprint(\"Size of maze: \"..(mapW-1)/2)!@#&sleep(1)!@#&else!@#&  write(\"\\n\")!@#&  cprint(\"Oh noes D:\")!@#&end!@#&!@#&!@#&!@#&parallel.waitForAny(!@#&  function() coroutine.yield(); os.pullEvent(\"key\"); coroutine.yield() end,!@#&  function() term.setBackgroundColor(colors.white); term.setTextColor(colors.black) while true do term.setCursorPos(18, 14); term.write(\"Press any key..\"); sleep(0.5); term.clearLine(); sleep(0.5) end end!@#&)!@#&!@#&term.setBackgroundColor(colors.black)!@#&term.setTextColor(colors.white)!@#&term.clear()!@#&term.setCursorPos(1, 1)!@#&cprint(\"  Maze by Jesusthekiller. Thanks for playing!\")!@#&cprint(\"3D engine by Gopher, He is A-W-E-S-O-M-E\")",["test"]="content = !@#&{!@#&	page1 = !@#&	{!@#&		background = nil,!@#&		visible = false,!@#&		setBackground = function(path)!@#&			content.page1.background = paintutils.loadImage(path)!@#&		end,!@#&		getBackground = function()!@#&			return content.page1.background!@#&		end,!@#&		getPageContent = function()!@#&			return pageContent!@#&		end,!@#&		setVisable = function(vis)!@#&			visible = vis!@#&		end,!@#&		pageContent = !@#&		{!@#&			buttons = {},!@#&			labels = {},!@#&			dropDowns = {},!@#&			images = {},!@#&			scrollBars = {},!@#&			getButtons = function()!@#&				return content.page1.pageContent.buttons!@#&			end,!@#&			addButton = function(text,xpos,ypos,wid,high,c,tc,f)!@#&				content.page1.pageContent.buttons[#content.page1.pageContent.buttons+1] = !@#&									  {name = text,x = xpos,y = ypos!@#&									  ,width = wid,height = high,color = c!@#&									  ,textcolor = tc, buttonFunction = f}!@#&				return #content.page1.pageContent.buttons!@#&			end,!@#&			drawButton = function(index)!@#&				b = content.page1.pageContent.buttons[index]!@#&				drawing.fillArea(b.color,b.x,b.y,b.width,b.height)      !@#&				drawing.writeTextCentered(b.name,b.x,b.y,b.width,b.height,b.textcolor,b.color)!@#&			end,!@#&			getLabels = function()!@#&				return content.page1.pageContent.labels!@#&			end,!@#&			addLabel = function(text,xpos,ypos,l,cent,c,tc)!@#&				content.page1.pageContent.labels[#content.page1.pageContent.labels+1] = !@#&									{name = text,x = xpos,y = ypos,labelLength = l,centered = cent,color = c,textcolor = tc}!@#&			end,!@#&			setLabelText = function(index,text)!@#&				content.page1.pageContent.labels[index].name = text!@#&			end,!@#&			drawLabel = function(index)!@#&!@#&				b = content.page1.pageContent.labels[index]!@#&				drawing.fillArea(b.color,b.x,b.y,b.labelLength,1)!@#&				if(b.centered)then!@#&					drawing.writeTextCentered(b.name,b.x,b.y,b.labelLength,1,b.textcolor,b.color)!@#&				else!@#&					drawing.writeText(b.name,b.x,b.y,b.textcolor,b.color)!@#&				end!@#&			end,!@#&			addImage = function(i,xpos,ypos)!@#&				content.page1.pageContent.images[#content.page1.pageContent.images+1] = {image = paintutils.loadImage(i),x = xpos,y = ypos}!@#&			end,!@#&			getImages = function()!@#&				return content.page1.pageContent.images!@#&			end,!@#&			drawImage = function(index)!@#&				i=content.page1.pageContent.images[index]!@#&				drawing.displayImage(i.image,i.x,i.y)!@#&			end,!@#&			addDropDown = function(n,xpos,ypos,l,c,tc,ddc,ddtc)!@#&				content.page1.pageContent.dropDowns[#content.page1.pageContent.dropDowns+1] = {name = n,x = xpos,y = ypos,dropDownLength = l,color = c,textColor = tc, dropDownColor = ddc,dropDownTextColor = ddtc,visible = false,elements = {}}!@#&			end,!@#&			addDropDownElement = function(index,n,f)!@#&				content.page1.pageContent.dropDowns[index].elements[#content.page1.pageContent.dropDowns[index].elements+1] = {name = n,elementFunction = f}!@#&			end,!@#&			drawDropDown = function(index)!@#&				d=content.page1.pageContent.dropDowns[index]!@#&				drawing.fillArea(d.color,d.x,d.y,d.dropDownLength,1)!@#&				drawing.writeText(d.name,d.x,d.y,d.color,d.textColor)!@#&				drawing.fillArea(d.dropDownColor,d.x,d.y+1,d.dropDownLength,#content.page3.pageContent.dropDowns[index].elements)!@#&				if(visible)then!@#&					for i=1,#content.page3.pageContent.dropDowns[index].elements,1 do!@#&						drawing.writeText(d.elements[x].name,d.x,d.y+i,d.dropDownColor,d.dropDownTextColor)!@#&					end!@#&				end!@#&			end,!@#&			getDropDowns = function()!@#&				return content.page1.pageContent.dropDowns!@#&			end,!@#&			addScrollBar = function(xpos,ypos,l,ia,s,bgc,bc,ac,tc)!@#&				content.page1.pageContent.scrollBars[#content.page1.pageContent.scrollBars+1] = {x = xpos,y = ypos,length = l,itemAmount = ia,sideWays = s,backGroundColor = bgc,barColor = bc,arrowColor = ac,textColor = tc,scroll = 0}!@#&			end,!@#&			getScrollBars = function()!@#&				return content.page1.pageContent.scrollBars!@#&			end,!@#&			drawScrollBar = function(index)!@#&				s = content.page1.pageContent.scrollBars!@#&				if(s.sideWays)then!@#&					drawing.fillArea(s.backGroindColor,s.x,s.y,s.length,1)!@#&					drawing.writeText(\"<\",s.x,s.y,s.textColor,s.ArrowColor)!@#&					drawing.writeText(\">\",s.x+s.length,s.y,s.textColor,s.ArrowColor)!@#&				else!@#&					drawing.fillArea(s.backGroindColor,s.x,s.y,1,s.length)!@#&					drawing.writeText(\"^\",s.x,s.y,s.textColor,s.ArrowColor)!@#&					drawing.writeText(\"v\",s.x,s.y+s.length,s.textColor,s.ArrowColor)!@#&				end!@#&				!@#&				local barLength  = s.length!@#&				if(s.itemAmount>=s.length*2-1)then!@#&					barLength = 1!@#&				elseif(s.itemAmount>=s.length)then!@#&					barLength = s.length-s.itemAmount!@#&				end!@#&				if(s.sideWays)then!@#&					drawing.fillArea(s.barColor,s.x+s.scroll,s.y,s.x+s.barLength,1)!@#&				else!@#&					drawing.fillArea(s.barColor,s.x,s.y+s.scroll,1,s.y+s.barLength)!@#&				end!@#&			end!@#&		}!@#&		!@#&	},!@#&	page2 = !@#&	{!@#&		background = nil,!@#&		visible = false,!@#&		setBackground = function(path)!@#&			content.page2.background = paintutils.loadImage(path)!@#&		end,!@#&		getBackground = function()!@#&			return content.page2.background!@#&		end,!@#&		getPageContent = function()!@#&			return pageContent!@#&		end,!@#&		setVisable = function(vis)!@#&			visible = vis!@#&		end,!@#&		pageContent = !@#&		{!@#&			buttons = {},!@#&			labels = {},!@#&			dropDowns = {},!@#&			images = {},!@#&			scrollBars = {},!@#&			getButtons = function()!@#&				return content.page2.pageContent.buttons!@#&			end,!@#&			addButton = function(text,xpos,ypos,wid,high,c,tc,f)!@#&				content.page2.pageContent.buttons[#content.page2.pageContent.buttons+1] = !@#&									  {name = text,x = xpos,y = ypos!@#&									  ,width = wid,height = high,color = c!@#&									  ,textcolor = tc, buttonFunction = f}!@#&				return #content.page2.pageContent.buttons!@#&			end,!@#&			drawButton = function(index)!@#&				b = content.page2.pageContent.buttons[index]!@#&				drawing.fillArea(b.color,b.x,b.y,b.width,b.height)      !@#&				drawing.writeTextCentered(b.name,b.x,b.y,b.width,b.height,b.textcolor,b.color)!@#&			end,!@#&			getLabels = function()!@#&				return content.page2.pageContent.labels!@#&			end,!@#&			addLabel = function(text,xpos,ypos,l,cent,c,tc)!@#&				content.page2.pageContent.labels[#content.page2.pageContent.labels+1] = !@#&									{name = text,x = xpos,y = ypos,labelLength = l,centered = cent,color = c,textcolor = tc}!@#&			end,!@#&			setLabelText = function(index,text)!@#&				content.page2.pageContent.labels[index].name = text!@#&			end,!@#&			drawLabel = function(index)!@#&!@#&				b = content.page2.pageContent.labels[index]!@#&				drawing.fillArea(b.color,b.x,b.y,b.labelLength,1)!@#&				if(b.centered)then!@#&					drawing.writeTextCentered(b.name,b.x,b.y,b.labelLength,1,b.textcolor,b.color)!@#&				else!@#&					drawing.writeText(b.name,b.x,b.y,b.textcolor,b.color)!@#&				end!@#&			end,!@#&			addImage = function(i,xpos,ypos)!@#&				content.page2.pageContent.images[#content.page2.pageContent.images+1] = {image = paintutils.loadImage(i),x = xpos,y = ypos}!@#&			end,!@#&			getImages = function()!@#&				return content.page2.pageContent.images!@#&			end,!@#&			drawImage = function(index)!@#&				i=content.page2.pageContent.images[index]!@#&				drawing.displayImage(i.image,i.x,i.y)!@#&			end,!@#&			addDropDown = function(n,xpos,ypos,l,c,tc,ddc,ddtc)!@#&				content.page2.pageContent.dropDowns[#content.page2.pageContent.dropDowns+1] = {name = n,x = xpos,y = ypos,dropDownLength = l,color = c,textColor = tc, dropDownColor = ddc,dropDownTextColor = ddtc,visible = false,elements = {}}!@#&			end,!@#&			addDropDownElement = function(index,n,f)!@#&				content.page2.pageContent.dropDowns[index].elements[#content.page2.pageContent.dropDowns[index].elements+1] = {name = n,elementFunction = f}!@#&			end,!@#&			drawDropDown = function(index)!@#&				d=content.page2.pageContent.dropDowns[index]!@#&				drawing.fillArea(d.color,d.x,d.y,d.dropDownLength,1)!@#&				drawing.writeText(d.name,d.x,d.y,d.color,d.textColor)!@#&				drawing.fillArea(d.dropDownColor,d.x,d.y+1,d.dropDownLength,#content.page3.pageContent.dropDowns[index].elements)!@#&				if(visible)then!@#&					for i=1,#content.page3.pageContent.dropDowns[index].elements,1 do!@#&						drawing.writeText(d.elements[x].name,d.x,d.y+i,d.dropDownColor,d.dropDownTextColor)!@#&					end!@#&				end!@#&			end,!@#&			getDropDowns = function()!@#&				return content.page2.pageContent.dropDowns!@#&			end,!@#&			addScrollBar = function(xpos,ypos,l,ia,s,bgc,bc,ac,tc)!@#&				content.page2.pageContent.scrollBars[#content.page2.pageContent.scrollBars+1] = {x = xpos,y = ypos,length = l,itemAmount = ia,sideWays = s,backGroundColor = bgc,barColor = bc,arrowColor = ac,textColor = tc,scroll = 0}!@#&			end,!@#&			getScrollBars = function()!@#&				return content.page2.pageContent.scrollBars!@#&			end,!@#&			drawScrollBar = function(index)!@#&				s = content.page2.pageContent.scrollBars!@#&				if(s.sideWays)then!@#&					drawing.fillArea(s.backGroindColor,s.x,s.y,s.length,1)!@#&					drawing.writeText(\"<\",s.x,s.y,s.textColor,s.ArrowColor)!@#&					drawing.writeText(\">\",s.x+s.length,s.y,s.textColor,s.ArrowColor)!@#&				else!@#&					drawing.fillArea(s.backGroindColor,s.x,s.y,1,s.length)!@#&					drawing.writeText(\"^\",s.x,s.y,s.textColor,s.ArrowColor)!@#&					drawing.writeText(\"v\",s.x,s.y+s.length,s.textColor,s.ArrowColor)!@#&				end!@#&				!@#&				local barLength  = s.length!@#&				if(s.itemAmount>=s.length*2-1)then!@#&					barLength = 1!@#&				elseif(s.itemAmount>=s.length)then!@#&					barLength = s.length-s.itemAmount!@#&				end!@#&				if(s.sideWays)then!@#&					drawing.fillArea(s.barColor,s.x+s.scroll,s.y,s.x+s.barLength,1)!@#&				else!@#&					drawing.fillArea(s.barColor,s.x,s.y+s.scroll,1,s.y+s.barLength)!@#&				end!@#&			end!@#&		}!@#&	},!@#&	page3 = !@#&	{!@#&		background = nil,!@#&		visible = false,!@#&		setBackground = function(path)!@#&			content.page3.background = paintutils.loadImage(path)!@#&		end,!@#&		getBackground = function()!@#&			return content.page3.background!@#&		end,!@#&		getPageContent = function()!@#&			return pageContent!@#&		end,!@#&		setVisable = function(vis)!@#&			visible = vis!@#&		end,!@#&		pageContent = !@#&		{!@#&			buttons = {},!@#&			labels = {},!@#&			dropDowns = {},!@#&			images = {},!@#&			scrollBars = {},!@#&			getButtons = function()!@#&				return content.page3.pageContent.buttons!@#&			end,!@#&			addButton = function(text,xpos,ypos,wid,high,c,tc,f)!@#&				content.page3.pageContent.buttons[#content.page3.pageContent.buttons+1] = !@#&									  {name = text,x = xpos,y = ypos!@#&									  ,width = wid,height = high,color = c!@#&									  ,textcolor = tc, buttonFunction = f}!@#&				return #content.page3.pageContent.buttons!@#&			end,!@#&			drawButton = function(index)!@#&				b = content.page3.pageContent.buttons[index]!@#&				drawing.fillArea(b.color,b.x,b.y,b.width,b.height)      !@#&				drawing.writeTextCentered(b.name,b.x,b.y,b.width,b.height,b.textcolor,b.color)!@#&			end,!@#&			getLabels = function()!@#&				return content.page3.pageContent.labels!@#&			end,!@#&			addLabel = function(text,xpos,ypos,l,cent,c,tc)!@#&				content.page3.pageContent.labels[#content.page3.pageContent.labels+1] = !@#&									{name = text,x = xpos,y = ypos,labelLength = l,centered = cent,color = c,textcolor = tc}!@#&			end,!@#&			setLabelText = function(index,text)!@#&				content.page3.pageContent.labels[index].name = text!@#&			end,!@#&			drawLabel = function(index)!@#&!@#&				b = content.page3.pageContent.labels[index]!@#&				drawing.fillArea(b.color,b.x,b.y,b.labelLength,1)!@#&				if(b.centered)then!@#&					drawing.writeTextCentered(b.name,b.x,b.y,b.labelLength,1,b.textcolor,b.color)!@#&				else!@#&					drawing.writeText(b.name,b.x,b.y,b.textcolor,b.color)!@#&				end!@#&			end,!@#&			addImage = function(i,xpos,ypos)!@#&				content.page3.pageContent.images[#content.page3.pageContent.images+1] = {image = paintutils.loadImage(i),x = xpos,y = ypos}!@#&			end,!@#&			getImages = function()!@#&				return content.page3.pageContent.images!@#&			end,!@#&			drawImage = function(index)!@#&				i=content.page3.pageContent.images[index]!@#&				drawing.displayImage(i.image,i.x,i.y)!@#&			end,!@#&			addDropDown = function(n,xpos,ypos,l,c,tc,ddc,ddtc)!@#&				content.page3.pageContent.dropDowns[#content.page3.pageContent.dropDowns+1] = {name = n,x = xpos,y = ypos,dropDownLength = l,color = c,textColor = tc, dropDownColor = ddc,dropDownTextColor = ddtc,visible = false,elements = {}}!@#&			end,!@#&			addDropDownElement = function(index,n,f)!@#&				content.page3.pageContent.dropDowns[index].elements[#content.page3.pageContent.dropDowns[index].elements+1] = {name = n,elementFunction = f}!@#&			end,!@#&			drawDropDown = function(index)!@#&				d=content.page3.pageContent.dropDowns[index]!@#&				drawing.fillArea(d.color,d.x,d.y,d.dropDownLength,1)!@#&				drawing.writeText(d.name,d.x,d.y,d.color,d.textColor)!@#&				if(content.page3.pageContent.dropDowns[index].visible)then!@#&					drawing.fillArea(d.dropDownColor,d.x,d.y+1,d.dropDownLength,#content.page3.pageContent.dropDowns[index].elements)!@#&					for i=1,#content.page3.pageContent.dropDowns[index].elements,1 do!@#&						drawing.writeText(d.elements[i].name,d.x,d.y+i,d.dropDownColor,d.dropDownTextColor)!@#&					end!@#&				end!@#&			end,!@#&			getDropDowns = function()!@#&				return content.page3.pageContent.dropDowns!@#&			end,!@#&			addScrollBar = function(xpos,ypos,l,ia,s,bgc,bc,ac,tc)!@#&				content.page3.pageContent.scrollBars[#content.page3.pageContent.scrollBars+1] = {x = xpos,y = ypos,length = l,itemAmount = ia,sideWays = s,backGroundColor = bgc,barColor = bc,arrowColor = ac,textColor = tc,scroll = 0}!@#&			end,!@#&			getScrollBars = function()!@#&				return content.page3.pageContent.scrollBars!@#&			end,!@#&			drawScrollBar = function(index)!@#&				s = content.page3.pageContent.scrollBars[index]!@#&				if(s.sideWays)then!@#&					drawing.fillArea(s.backGroundColor,s.x+1,s.y,s.length,1)!@#&					drawing.writeText(\"<\",s.x,s.y,s.arrowColor,s.textColor)!@#&					drawing.writeText(\">\",s.x+s.length+1,s.y,s.arrowColor,s.textColor)!@#&				else!@#&					drawing.fillArea(s.backGroundColor,s.x,s.y+1,1,s.length)!@#&					drawing.writeText(\"^\",s.x,s.y,s.arrowColor,s.textColor)!@#&					drawing.writeText(\"v\",s.x,s.y+s.length+1,s.arrowColor,s.textColor)!@#&				end!@#&				!@#&				local barLength = s.length!@#&				if(s.itemAmount>=s.length*2-1)then!@#&					barLength = 1!@#&				elseif(s.itemAmount>=s.length)then!@#&					barLength = s.length-(s.itemAmount-s.length)!@#&				end!@#&				if(s.sideWays)then!@#&					drawing.fillArea(s.barColor,s.x+s.scroll+1,s.y,s.x+barLength,1)!@#&				else!@#&					drawing.fillArea(s.barColor,s.x,s.y+s.scroll+1,1,s.y+barLength)!@#&				end!@#&			end!@#&		}!@#&	},!@#&	pages = {}!@#&}!@#&!@#&content.pages = !@#&	{!@#&		content.page1,!@#&		content.page2,!@#&		content.page3!@#&	}!@#&!@#&drawing = !@#&{!@#&	displayImage = function(image,x,y)!@#&		paintutils.drawImage(image,x,y)!@#&	end,!@#&	fillArea = function(color,xpos,ypos,wid,high)!@#&		term.setCursorPos(1,1)!@#&!@#&		term.setBackgroundColor(color)!@#&		for y=ypos,ypos+high-1,1 do!@#&			for x=xpos,xpos+wid-1,1 do!@#&				term.setCursorPos(x,y)!@#&				write(\" \")!@#&			end!@#&		end!@#&	end,!@#&	writeText = function(text,x,y,color,bgcolor)!@#&		term.setBackgroundColor(color)!@#&		term.setCursorPos(x,y)!@#&		write(text)!@#&	end,!@#&	writeTextCentered = function(text,x,y,wid,high,color,bgcolor)!@#&		term.setCursorPos(x+(wid-#text)/2,y+high/2)!@#&		term.setTextColor(color)!@#&		term.setBackgroundColor(bgcolor)!@#&		term.write(text)!@#&	end,!@#&	clear = function()!@#&		term.setBackgroundColor(colors.black)!@#&		term.clear()!@#&		term.setCursorPos(1,1)!@#&	end!@#&}!@#&function drawPageContent()!@#&	showButtons(currentPage.pageContent.getButtons())!@#&	showLabels(currentPage.pageContent.getLabels())!@#&	showImages(currentPage.pageContent.getImages())!@#&	showDropDowns(currentPage.pageContent.getDropDowns())!@#&	showScrollBars(currentPage.pageContent.getScrollBars())!@#&end!@#&!@#&function showButtons(buttons)!@#&	for x=1,#buttons,1 do!@#&		currentPage.pageContent.drawButton(x)!@#&	end!@#&end!@#&!@#&function showLabels(labels)!@#&	for x=1,#labels,1 do!@#&		currentPage.pageContent.drawLabel(x)!@#&	end!@#&end!@#&!@#&function showImages(images)!@#&	for x=1,#images,1 do!@#&		currentPage.pageContent.drawImage(x)!@#&	end!@#&end!@#&!@#&function showDropDowns(dropDowns)!@#&	for x=1,#dropDowns,1 do!@#&		currentPage.pageContent.drawDropDown(x)!@#&	end!@#&end!@#&!@#&function showScrollBars(scrollBars)!@#&	for x=1,#scrollBars,1 do!@#&		currentPage.pageContent.drawScrollBar(x)!@#&	end!@#&end!@#&!@#&function analyseClick(xpos,ypos)!@#&	buttons = currentPage.pageContent.getButtons()!@#&	for i=1,#buttons,1 do!@#&		if(xpos>=buttons[i].x and xpos<=buttons[i].x+buttons[i].width-1) then!@#&			if(ypos>=buttons[i].y and ypos<=buttons[i].y+buttons[i].height-1) then!@#&				buttons[i].buttonFunction()!@#&			end!@#&		end!@#&	end!@#&	dropDowns = currentPage.pageContent.getDropDowns()!@#&	for i=1,#dropDowns,1 do!@#&		if(xpos>=dropDowns[i].x and xpos<=dropDowns[i].x+dropDowns[i].dropDownLength-1) then!@#&			if(ypos==dropDowns[i].y) then!@#&				dropDowns[i].visible = not dropDowns[i].visible!@#&			elseif (dropDowns[i].visible) then 	!@#&				for a=1,#dropDowns[i].elements,1 do!@#&					if(ypos==dropDowns[i].y+a) then!@#&						dropDowns[i].elements[a].elementFunction()!@#&					end!@#&				end!@#&			end!@#&		end!@#&	end!@#&	scrollBars = currentPage.pageContent.getScrollBars()!@#&	for i=1,#scrollBars,1 do!@#&		local barLength = scrollBars[i].length!@#&		if(scrollBars[i].itemAmount>=scrollBars[i].length*2-1)then!@#&			barLength = 1!@#&		elseif(scrollBars[i].itemAmount>=scrollBars[i].length)then!@#&			barLength = scrollBars[i].length-(scrollBars[i].itemAmount-scrollBars[i].length)!@#&		end!@#&		if(xpos==scrollBars[i].x) then!@#&			if(ypos==scrollBars[i].y) then!@#&				if(scrollBars[i].scroll>0)then!@#&					scrollBars[i].scroll = scrollBars[i].scroll-1!@#&				end!@#&			end!@#&		end!@#&		if(xpos==scrollBars[i].x+scrollBars[i].length+1) then!@#&			if(ypos==scrollBars[i].y) then!@#&				if(scrollBars[i].scroll+barLength+1<scrollBars[i].length)then!@#&					scrollBars[i].scroll = scrollBars[i].scroll+1!@#&				end!@#&			end!@#&		end!@#&		if(xpos==scrollBars[i].x) then!@#&			if(ypos==scrollBars[i].y+scrollBars[i].length+1) then!@#&				if(scrollBars[i].scroll+barLength+1<scrollBars[i].length)then!@#&					scrollBars[i].scroll = scrollBars[i].scroll+1!@#&				end!@#&			end!@#&		end!@#&	end!@#&end !@#&!@#&function analyseScroll(xpos,ypos,direction)!@#&!@#&end!@#&!@#&running = true!@#&currentPage = content.pages[1]!@#&local termWidth,termHeight = term.getSize()!@#&!@#&content.page1.setBackground(\"page1\")!@#&content.page2.setBackground(\"page2\")!@#&content.page3.setBackground(\"page3\")!@#&content.page1.pageContent.addButton(\"test\",15,15,6,3,colors.blue,colors.black,function()end)!@#&content.page1.pageContent.addButton(\"Exit\",termWidth-5,1,6,3,colors.red,colors.white,function() running = false end)!@#&content.page1.pageContent.addButton(\"test2\",30,5,7,3,colors.green,colors.black,function()if(content.page1.pageContent.buttons[3].name==\"test2\")then content.page1.pageContent.buttons[3].name = \"boop\" else content.page1.pageContent.buttons[3].name = \"test2\" end end)!@#&content.page1.pageContent.addButton(\"Next Page\",termWidth-10,termHeight-2,11,3,colors.orange,colors.white,function() currentPage = content.pages[2] end)!@#&content.page2.pageContent.addButton(\"Next Page\",termWidth-10,termHeight-2,11,3,colors.orange,colors.white,function() currentPage = content.pages[3] end)!@#&content.page3.pageContent.addButton(\"Next Page\",termWidth-10,termHeight-2,11,3,colors.orange,colors.white,function() currentPage = content.pages[1] end)!@#&content.page2.pageContent.addLabel(\"0\",5,5,4,true,colors.lightGray,colors.black)!@#&content.page2.pageContent.addButton(\"/\\\\\",5,4,4,1,colors.gray,colors.black,function() content.page2.pageContent.setLabelText(1,tostring(tonumber(content.page2.pageContent.labels[1].name)+1))end)!@#&content.page2.pageContent.addButton(\"\\\\/\",5,6,4,1,colors.gray,colors.black,function() content.page2.pageContent.setLabelText(1,tostring(tonumber(content.page2.pageContent.labels[1].name)-1))end)!@#&content.page2.pageContent.addImage(\"testImage\",15,12)!@#&content.page3.pageContent.addScrollBar(termWidth-11,1,termHeight-2,20,false,colors.lightGray,colors.lime,colors.gray,colors.white)!@#&content.page3.pageContent.addDropDown(\"drop Down\",1,1,10,colors.lightGray,colors.white,colors.blue,colors.white)!@#&	content.page3.pageContent.addDropDownElement(1,\"test\",function()drawing.writeText(\"boop\",content.page3.pageContent.dropDowns[1].x+10,content.page3.pageContent.dropDowns[1].y+1,colors.red,colors.white) sleep(1)end)!@#&	content.page3.pageContent.addDropDownElement(1,\"test2\",function()end)!@#&	content.page3.pageContent.addDropDownElement(1,\"test3\",function()end)!@#&content.page3.pageContent.addDropDown(\"Pages\",12,1,10,colors.lightGray,colors.white,colors.blue,colors.white)!@#&	content.page3.pageContent.addDropDownElement(2,\"page 1\",function() currentPage = content.pages[1] end)!@#&	content.page3.pageContent.addDropDownElement(2,\"page 2\",function() currentPage = content.pages[2] end)!@#&	content.page3.pageContent.addDropDownElement(2,\"page 3\",function() currentPage = content.pages[3] end)!@#&!@#&while running do!@#&	drawing.clear()!@#&	drawing.displayImage(currentPage.getBackground(),1,1)!@#&	drawPageContent()!@#&	event, button, x, y = os.pullEvent(\"mouse_click\")!@#&	analyseClick(x,y)!@#&end!@#&drawing.clear()",["CookieClicker"]="if(fs.exists(\"/SpeedOS/Applications/GameBox/CookieCSave\"))then!@#&	f = fs.open(\"/SpeedOS/Applications/GameBox/CookieCSave\", \"r\")!@#&	cookies = f.readLine()!@#&	cpc = f.readLine()!@#&	superclick = f.readLine()!@#&	SuperCPrice = f.readLine()!@#&	megaclick = f.readLine()!@#&	MegaCPrice = f.readLine()!@#&	f.close()!@#&else!@#&	print \"Creating Cookie Save...\"!@#&	sleep(2)!@#&	f = fs.open(\"/SpeedOS/Applications/GameBox/CookieCSave\", \"w\")!@#&	f.writeLine(\"0\") --Cookies!@#&	f.writeLine(\"1\") --Cpc!@#&	f.writeLine(\"0\") --Lvl of item 1!@#&	f.writeLine(\"200\") -- Price Of Item 1!@#&	f.writeLine(\"0\") -- Lvl of item 2!@#&	f.writeLine(\"10000\") -- Price Of Item 2!@#&	f.close()!@#&	cookies = 0!@#&	pc = 1!@#&	superclick = 0!@#&	SuperCPrice = 200!@#&	magaclick = 0!@#&	MegaCPrice = 10000!@#&	print \"Reboot Required\"!@#&	sleep(1)!@#&	os.reboot()!@#&end!@#&!@#&main = true!@#&inShop = false!@#&SuperC = false!@#&!@#&!@#&function cp(x,y)!@#&	term.setCursorPos(x,y)!@#&end!@#&!@#&function bg(color)!@#&	term.setBackgroundColor(color)!@#&end!@#&!@#&function tc(color)!@#&	term.setTextColor(color)!@#&end!@#&!@#&function cl()!@#&	term.clearLine()!@#&end!@#&!@#&function clear()!@#&	bg(colors.black)!@#&	cp(1,1)!@#&	term.clear()!@#&end!@#&!@#&function clearCol(col)!@#&	bg(col)!@#&	cp(1,1)!@#&	term.clear()!@#&end!@#&!@#&function draw()!@#&	bg(colors.lightBlue)!@#&	term.clear()!@#&	cookie = paintutils.loadImage(\"/SpeedOS/Applications/GameBox/ccpics/cookie\")!@#&	paintutils.drawImage(cookie, 15, 3)!@#&!@#&!@#&	bg(colors.gray)!@#&	cp(21,2)!@#&	print \"::Cookies::\"!@#&	cp(25,3)!@#&	print(cookies)!@#&!@#&	bg(colors.green)!@#&	cp(1,1)!@#&	print \"Shop\"!@#&!@#&	bg(colors.brown)!@#&	cp(13, 18)!@#&	print(\"Cookies Per Click(cpc): \"..cpc)!@#&!@#&	bg(colors.green)!@#&	cp(48, 1)!@#&	print \"Save\"!@#&!@#&	bg(colors.lightBlue)!@#&	cp(40, 17)!@#&	print \"Speed OS\" !@#&end!@#&!@#&!@#&function menu()!@#&	bg(colors.gray)!@#&	term.clear()!@#&	cp(1,2)!@#&	print \"--------------------Cookie-Shop--------------------\" -- 17Long!@#&	print(\"SuperClick: x2 mc LVL:\"..superclick..\" Price: \"..SuperCPrice)!@#&	--print(\"AutoClicker +1 cps LVL:\"..autoclick..\" Price: \"..aClickPrice)!@#&	print(\"MegaClick: x4 mc LVL: \"..megaclick..\" Price: \"..MegaCPrice)!@#&	cp(51, 1)!@#&	bg(colors.red)!@#&	print \"X\"!@#&	bg(colors.gray)!@#&end!@#&!@#&!@#&!@#&!@#&function clicker()!@#&!@#&while main == true do!@#&local event, button, x, y = os.pullEvent(\"mouse_click\")!@#&	if(x >= 18 and x <= 33 and y >= 4 and y <= 17 and button == 1)then!@#&		cookies = cookies + cpc!@#&		bg(colors.gray)!@#&		draw()!@#&		elseif(x >= 1 and x <=4 and y == 1 and button == 1)then!@#&			menu()!@#&			inShop = true!@#&			main = false!@#&			CShop()!@#&			elseif(x >= 48 and x <= 51 and y == 1 and button == 1)then!@#&				f = fs.open(\"/SpeedOS/Applications/GameBox/CookieCSave\", \"w\")!@#&				f.writeLine(cookies)!@#&				f.writeLine(cpc)!@#&				f.writeLine(superclick)!@#&				f.writeLine(SuperCPrice)!@#&				f.writeLine(megaclick)!@#&				f.writeLine(MegaCPrice)!@#&				f.close()!@#&	end!@#&!@#&end!@#&end!@#&!@#&function CShop()!@#&	while inShop == true do!@#&	local event2, button2, x2, y2 = os.pullEvent(\"mouse_click\")!@#&	!@#&		if(y2 == 3 and button2 == 1 and tonumber(cookies) >= tonumber(SuperCPrice))then!@#&			superclick = superclick + 1!@#&		    cookies = cookies - SuperCPrice!@#&			SuperCPrice = SuperCPrice * 4!@#&			cpc = cpc * 2!@#&			inShop = false!@#&			main = true!@#&			draw()!@#&			return clicker()!@#&	    end!@#&		!@#&		if(y2 == 4 and button2 == 1 and tonumber(cookies) >= tonumber(MegaCPrice))then!@#&			megaclick = megaclick + 1!@#&			cookies = cookies - MegaCPrice!@#&			MegaCPrice = MegaCPrice * 6!@#&			cpc = cpc * 4!@#&		    inShop = false!@#&			main = true!@#&			draw()!@#&			return clicker()!@#&		end!@#&		!@#&		if(x2 == 51 and y2 == 1 and button2 == 1)then!@#&			inShop = false!@#&			main = true!@#&			draw()!@#&			return clicker()!@#&		end!@#&end!@#&end!@#&draw()!@#&clicker()",["ccpics"]={["cookie"]="                                                 !@#&                                                 !@#&       cccccccc                                  !@#&      cccccccccc                                 !@#&     ccc4c4cfcccc                                !@#&    cccccccccccccc                               !@#&   cccfccccccfccccc                              !@#&   c4ccccc4cccc4ccc                              !@#&   ccfccccccccccccc                              !@#&   ccccffccfccccccc                              !@#&    cccccccfff4ccc                               !@#&     cc4ccccccccc                                !@#&      ccccfccccc                                 !@#&       cccccccc",},["smstester"]="rednet.open(\"back\")!@#&main = 72!@#&function clear()!@#&  term.clear()!@#&  term.setCursorPos(1,1)!@#&end!@#&!@#&while true do!@#&  clear()!@#&  print(\"Enter command: \")!@#&  command = io.read()!@#&  if command == \"\" then!@#&    command = oldcommand!@#&    term.setCursorPos(1,2)!@#&    print(command)!@#&  end!@#&  rednet.send(main,command)!@#&  local ID,message,distance = rednet.receive(1)!@#&  print()!@#&  --if(textutils.unserialize(message)~=nil)then!@#&  --  newtable = textutils.unserialize(message)!@#&  --  for x=0,table.getn(newtable),1 do!@#&  --    print(newtable[x])!@#&  --  end!@#&  --else!@#&  print(message)!@#&  --end!@#&  print()!@#&  print(\"Hit Enter\")!@#&  os.pullEvent(\"key\")!@#&  oldcommand = command!@#&end",["FishSimulator"]="--Config!@#&local k = 37!@#&local FishSimulatorVersion = \"1.7.2\"!@#&local fishX = 10!@#&local fishY = 10!@#&local fishHealth = 40!@#&local fishLt = \"(O<\"!@#&local fishRt = \">O)\"!@#&local fishX2 = 12!@#&local fishY2 = 12!@#&local fishX3 = 6!@#&local fishY3 = 7!@#&local fishX4 = 14!@#&local fishY4 = 13!@#&!@#&--Extra Variables!@#&local reset = 19!@#&local feed = 33 -- the key id for the F key!@#&local h = colors.green -- h is the variable for the color of the health number!@#&local fishLook = true -- true means left false means right!@#&local fishLook2 = false!@#&local fishLook3 = true!@#&local fishLook4 = false!@#&FishScreen = {!@#&  {!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    32,!@#&    0,!@#&    0,!@#&    0,!@#&    32,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    32,!@#&    0,!@#&    0,!@#&    0,!@#&    32,!@#&  },!@#&  {!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    8192,!@#&    0,!@#&    32,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    32,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    32,!@#&  },!@#&  {!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    8192,!@#&    0,!@#&    8192,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    8192,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    8192,!@#&  },!@#&  {!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    8192,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    8192,!@#&    0,!@#&    0,!@#&    8192,!@#&  },!@#&  {!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    8192,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    0,!@#&    8192,!@#&    0,!@#&    0,!@#&    8192,!@#&  },!@#&  {!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&    16,!@#&  },!@#&}!@#&--Functions!@#&function lose(death)!@#&term.setCursorPos(5,5)!@#&term.setBackgroundColor(colors.lightBlue)!@#&    print(death)!@#&    sleep(1)!@#&    term.clear()!@#&    term.setTextColor(1)!@#&        term.setCursorPos(1,1)!@#&        print(\"Restart? (Y/N)\")!@#&		while true do!@#&        E,K = os.pullEvent(\"key\")!@#&        y = 21!@#&        n = 49!@#&        if K == y then!@#&        shell.run(\"pastebin run 5x9Uu1pr\")!@#&        error()!@#&        elseif K == n then!@#&        term.setBackgroundColor(colors.black)!@#&        term.clear()!@#&        term.setCursorPos(1,1)!@#&		sleep(1)!@#&		shell.run(\"shell\")!@#&        error()!@#&        end!@#&		end!@#&end!@#&function reset()!@#&FmoveA = false!@#&term.setCursorPos(3,3)!@#&print(\"Resetting Fish Positions\")!@#&fishX = 10!@#&fishY = 10!@#&fishX2 = 12!@#&fishY2 = 12!@#&fishX3 = 14!@#&fishY3 = 13!@#&fishLook = true -- true means left false means right!@#&fishLook2 = false!@#&fishLook3 = true!@#&fishLook4 = false!@#&end!@#&function fishFeed()!@#&    term.setCursorPos(5,5)!@#&    term.setBackgroundColor(colors.lightBlue)!@#&    print(\"Feeding Your Fish!\")!@#&    fishHealth = fishHealth+1.5!@#&        if fishHealth < 10 then!@#&h = colors.red!@#&elseif fishHealth < 20 then!@#&h = colors.orange!@#&    elseif fishHealth > 30 then!@#&h = colors.green!@#&elseif fishHealth > 20 then!@#&h = 1!@#&elseif fishHealth < 10 then!@#&h = colors.red!@#&end!@#&if fishHealth > 40 then!@#&!@#&        end!@#&    if fishHealth < .5 then!@#&    lose(\"Your Fish Starved To Death!\")!@#&end!@#&end!@#&function fishMove()!@#&  term.setBackgroundColor(colors.lightBlue)!@#&  term.clear()!@#&  term.setCursorPos(1,1)!@#&  term.setTextColor(1)!@#&  term.write(\"Fish's Life: \")!@#&  term.setTextColor(h)!@#&  term.write(fishHealth)!@#&  term.setCursorPos(fishX,fishY)!@#&  term.setTextColor(colors.black)!@#&  term.setBackgroundColor(fishC1)!@#&  if fishLook then!@#&    term.write(fishLt)!@#&    else if fishLook == false then!@#&          term.write(fishRt)!@#&    end!@#&  end!@#&term.setCursorPos(fishX3,fishY3)!@#&  term.setTextColor(colors.black)!@#&  term.setBackgroundColor(fishC3)!@#&  if fishLook3 then!@#&    term.write(fishLt)!@#&    else!@#&          term.write(fishRt)    !@#&end!@#&term.setCursorPos(fishX2,fishY2)!@#&  term.setTextColor(colors.black)!@#&  term.setBackgroundColor(fishC2)!@#&  if fishLook2 then!@#&    print(fishLt)!@#&    else!@#&          print(fishRt)    !@#&end!@#& if FmoveA then!@#&move3 = math.random(4)!@#&    if move3 == 1 then!@#&          fishX3 = fishX3-1!@#&          fishLook3 = true!@#&          elseif move3 == 2 then!@#&          fishX3 = fishX3+1!@#&          fishLook3 = false!@#&          elseif move3 == 3 then!@#&          fishY3 = fishY3-1!@#&          elseif move3 == 4 then!@#&          fishY3 = fishY3+1!@#&end!@#&move2 = math.random(4)!@#&    fishHealth = fishHealth - .5!@#&    if move2 == 1 then!@#&          fishX2 = fishX2-1!@#&          fishLook2 = true!@#&          elseif move2 == 2 then!@#&          fishX2 = fishX2+1!@#&          fishLook2 = false!@#&          elseif move2 == 3 then!@#&          fishY2 = fishY2-1!@#&          elseif move2 == 4 then!@#&          fishY2 = fishY2+1!@#&end!@#&    move = math.random(4)!@#&    if move == 1 then!@#&          fishX = fishX-1!@#&          fishLook = true!@#&          elseif move == 2 then!@#&          fishX = fishX+1!@#&          fishLook = false!@#&          elseif move == 3 then!@#&          fishY = fishY-1!@#&          elseif move == 4 then!@#&          fishY = fishY+1!@#&  --Health ColorChangers!@#&if fishHealth < 5 then!@#&h = colors.red!@#&elseif fishHealth < 10 then!@#&h = colors.orange!@#&    elseif fishHealth > 15 then!@#&h = colors.green!@#&elseif fishHealth > 9 then!@#&h = 1!@#&elseif fishHealth < 5 then!@#&h = colors.red!@#&end!@#&if fishHealth > 40 then!@#&        lose(\"Your Fish Was Overfed!\")!@#&        end   !@#& if fishHealth < .5 then!@#&    lose(\"Your Fish Starved To Death!\")!@#&end!@#&   end!@#&end!@#&  paintutils.drawImage(FishScreen,1,14)!@#&  term.setBackgroundColor(colors.lightBlue)!@#&FmoveA = true!@#&  end!@#&--Startup Screen!@#&function sScreen()!@#&fishC1 = 2^math.random(14)!@#&fishC2 = 2^math.random(14)!@#&fishC3 = 2^math.random(14)!@#&term.setBackgroundColor(colors.lightBlue)!@#&term.setTextColor(colors.black)!@#&term.clear()!@#&paintutils.drawImage(FishScreen,1,14)!@#&paintutils.drawImage(FishScreen,1,14)!@#&term.setCursorPos(1,1)!@#&term.setBackgroundColor(colors.lightBlue)!@#&print(\"Fish Simulator v. \"..FishSimulatorVersion)!@#&term.setCursorPos(fishX,fishY)!@#&term.setBackgroundColor(fishC1)!@#&print(fishLt)!@#&term.setBackgroundColor(fishC2)!@#&term.setCursorPos(fishX2,fishY2)!@#&print(fishRt)!@#&term.setBackgroundColor(fishC3)!@#&term.setCursorPos(fishX3,fishY3)!@#&print(fishLt)!@#&term.setBackgroundColor(colors.lightBlue)!@#&sleep(.50)!@#&term.setCursorPos(1,2)!@#&print(\"Fire An Event To Begin.\")!@#&os.pullEvent()!@#&fishMove()!@#&--Run Code!@#&local id = os.startTimer(1)!@#&while true do!@#&  local event = {os.pullEvent()}!@#&  if event[ 1 ] == \"timer\" and event[ 2 ] == id then!@#&    fishMove()!@#&    id = os.startTimer(1)!@#&  elseif event[ 1 ] == \"key\" and event[ 2 ] == feed then!@#&    fishFeed()!@#&  elseif event[ 1 ] == \"monitor_touch\" then!@#&    fishFeed()!@#&  elseif event[ 1 ] == \"key\" and event[ 2 ] == 19 then!@#&reset()!@#&  elseif event[ 1 ] == \"key\" and event[ 2 ] == k then!@#&    lose(\"You Killed Your Fish!\")!@#&  end!@#&end!@#&end!@#&sScreen()",["newpass"]="selection = 1!@#&choice = \"nothing\"!@#&word = \"nothing\"!@#&menu = true!@#&user = \"\"!@#&done = false!@#&time = os.startTimer(.8333)!@#&	function title()!@#&		term.clear()!@#&		term.setCursorPos(1,1)!@#&		header()!@#&	end!@#&	!@#&	function header()!@#&		local stuff = getsettings()!@#&		if(stuff[\"time\"] == \"true\")then!@#&			stuff[\"time\"] = true!@#&		else!@#&			stuff[\"time\"] = false!@#&		end!@#&		x,y = term.getSize()!@#&		term.setCursorPos(1,1)!@#&		term.clearLine()!@#&		write(\"Door Lock\")!@#&		if(stuff[\"lockstate\"]==\"locked\")then!@#&			term.setCursorPos(x/2-9,1)!@#&			write(\"**TERMINAL IS LOCKED**\")!@#&		end!@#&		if(usertype==\"Owner\" or usertype==\"Admin\")then!@#&			term.setCursorPos(x-8,1)!@#&			print(textutils.formatTime(os.time(), stuff[\"time\"]))!@#&		else!@#&			print()!@#&		end!@#&		local x, y = term.getSize()!@#&		local header=\"-\"!@#&		for index = 0, x-2, 1 do!@#&			header = header..\"-\"!@#&		end!@#&		print(header)!@#&		print(\" \")!@#&	end!@#&	!@#&	function getsettings()!@#&		local stuff = {}!@#&		local open = fs.open(\"userinfo/settings\" , \"r\")!@#&		stuff[\"side\"] = open.readLine()!@#&		stuff[\"lockstate\"] = open.readLine()!@#&		stuff[\"date\"] = open.readLine()!@#&		stuff[\"admin\"] = open.readLine()!@#&		stuff[\"list\"] = open.readLine()!@#&		stuff[\"time\"] = open.readLine()!@#&		open.close()!@#&		return (stuff)!@#&	end!@#&	!@#&	function middle(word,count)!@#&		local x, y = term.getSize()!@#&		if(word==\" \")then!@#&			term.setCursorPos(x/2,count+5)!@#&		else!@#&			term.setCursorPos(x/2-(string.len(word)/2),count+5)!@#&		end!@#&	end	!@#&		!@#&	function addspace(newword, number)!@#&		numSpaces = \"\"!@#&		spaces=\"\"!@#&		local x, y = term.getSize()!@#&		word = tostring(newword)!@#&		if(number==nil)then!@#&				numSpaces = (x/3)-string.len(word)-4!@#&				for derp = 0, numSpaces, 1 do!@#&					spaces = spaces .. \" \"!@#&				end!@#&		else!@#&				numSpaces = number-string.len(word)!@#&				for derp = 0, numSpaces, 1 do!@#&					spaces = spaces .. \" \"!@#&				end!@#&		end!@#&		return(spaces)!@#&	end!@#&	!@#&	function guiSelection(max,min,place)!@#&		local running  = true!@#&		time = os.startTimer(.8333)!@#&		local selection = place!@#&		while running do!@#&			local Event, id = os.pullEvent()!@#&			if(Event==\"key\")then!@#&				if (id==208) then!@#&					selection=selection+1!@#&				elseif (id==200) then!@#&					selection=selection-1!@#&				end!@#&				if(selection==min-1) then!@#&					selection=max!@#&				elseif(selection==max+1) then!@#&					selection=min!@#&				end!@#&				running = false!@#&				return selection , id!@#&			elseif(Event==\"timer\")then!@#&				header()!@#&				time = os.startTimer(.8333)!@#&				if(textutils.formatTime(os.time(), false)==\"0:00 AM\")then!@#&					local stuff = getsettings()!@#&					local edit = fs.open(\"userinfo/settings\" , \"w\")!@#&					edit.writeLine(stuff[\"side\"])!@#&					edit.writeLine(stuff[\"lockstate\"])!@#&					edit.writeLine(stuff[\"date\"]+1)!@#&					edit.writeLine(stuff[\"admin\"])!@#&					edit.writeLine(stuff[\"list\"])!@#&					edit.writeLine(stuff[\"time\"])!@#&					edit.close()!@#&				end!@#&			end!@#&		end!@#&	end!@#&	!@#&	function start()!@#&		title()!@#&		print(\"Welcome\")!@#&		sleep(2)!@#&		title()!@#&		if (fs.exists(\"userinfo\")==false) then!@#&			fs.makeDir(\"userinfo\")!@#&		end!@#&		if (fs.exists(\"userinfo/firsttime\")==false) then!@#&			open = fs.open(\"userinfo/firsttime\" , \"w\")!@#&			open.write(\"first time\")!@#&			open.close()!@#&			--title()!@#&			term.clear()!@#&			term.setCursorPos(1,1)!@#&			print(\"Welcome\")!@#&			sleep(1)!@#&			--title()!@#&			term.clear()!@#&			term.setCursorPos(1,1)!@#&			print(\"System Setup\")!@#&			print(\" \")!@#&			print(\" \")!@#&			print(\"Please create your username\")!@#&			write(\":> \")!@#&			local username = io.read()!@#&			print(\"Please create your password\")!@#&			write(\":> \")!@#&			local pass = read(\"*\")!@#&			local edit = fs.open(\"userinfo/\"..username , \"w\")!@#&			edit.writeLine(pass)!@#&			edit.writeLine(\"Owner\")!@#&			edit.writeLine(\"0\")!@#&			edit.writeLine(\"never\")!@#&			edit.close()!@#&			--title()!@#&			term.clear()!@#&			term.setCursorPos(1,1)!@#&			print(\"Hello \"..username..\" you are currently this computer's Owner\")!@#&			print(\"To finish setup, if you have not already done so\")!@#&			print(\"close this program and rename is as startup\")!@#&			print()!@#&			x, y = term.getCursorPos()!@#&			print(\"where is the door in relation to the terminal?\")!@#&			while done == false do!@#&				write(\":>\")!@#&				side = io.read()!@#&				if(side==\"top\" or side==\"bottom\" or side==\"left\" or side==\"right\" or side==\"front\" or side==\"back\")then!@#&					done = true!@#&					open = fs.open(\"userinfo/firsttime\" , \"w\")!@#&					open.writeLine(\"first time\")!@#&					open.close()!@#&					!@#&					open = fs.open(\"userinfo/settings\" , \"w\")!@#&					open.writeLine(side)!@#&					open.writeLine(\"unlocked\")!@#&					open.writeLine(\"0\")!@#&					open.writeLine(\"false\")--admin stuff!@#&					open.writeLine(\"false\")--list!@#&					open.writeLine(\"false\")--time!@#&					open.close()!@#&				else!@#&					write(\"unknown side please try again\")!@#&					sleep(1)!@#&					term.clearLine()!@#&					term.setCursorPos(1,y)!@#&					term.clearLine()!@#&				end!@#&			end!@#&			print()!@#&			print(\":Hit Any Key to Continue\")!@#&			Event, key = os.pullEvent(\"key\")!@#&			choice = \"nothing\"!@#&		end	!@#&		if (fs.exists(\"userinfo/firsttime\")==true) then!@#&			--promptuserinfo()!@#&			open = fs.open(\"userinfo/settings\" , \"r\")!@#&			local derp = open.readLine()!@#&			side = open.readLine()!@#&			open.close()!@#&		end!@#&		!@#&	end!@#&	!@#&!@#&	function promptuserinfo()!@#&		choice = \"nothing\"!@#&		open = fs.open(\"userinfo/settings\" , \"r\")!@#&		open.readLine()!@#&		lockstate = open.readLine()!@#&		open.close()!@#&		user = \" \"!@#&		done = false!@#&		while done==false do!@#&			local stuff = getsettings()!@#&			title()!@#&			print(\" \")!@#&			print(\"Enter Your Username\")!@#&			write(\":> \")!@#&			local username = io.read()!@#&			user = username!@#&			print(\"Enter Your Password\")!@#&			write(\":> \")!@#&			local password = read(\"*\")	!@#&			if (fs.exists(\"userinfo/\"..username)==true) then!@#&				local open = fs.open(\"userinfo/\"..username , \"r\")!@#&				local pass = open.readLine()!@#&				usertype = open.readLine()!@#&				local logins = open.readLine()!@#&				local lastlogin = open.readLine()!@#&				open.close()!@#&				if(stuff[\"lockstate\"]==\"unlocked\") then!@#&					if (pass==password) then!@#&						if (usertype==\"Employee\")then!@#&							title()!@#&							print(\"Access Granted\")!@#&							sleep(1)!@#&							title()!@#&							print(\"Opening Door...\")!@#&							sleep(.5)!@#&							rs.setOutput(side , true)!@#&							title()!@#&							print(\"Door Open\")!@#&							sleep(5)!@#&							rs.setOutput(side , false)!@#&							title()!@#&							print(\"Closing Door...\")!@#&							sleep(1)!@#&						elseif (usertype==\"Admin\"or\"Owner\") then!@#&							choice = \"guimenu\"!@#&							done = true!@#&						end!@#&						local edit = fs.open(\"userinfo/\"..username , \"w\")!@#&						edit.writeLine(pass)!@#&						edit.writeLine(usertype)!@#&						edit.writeLine(logins+1)!@#&						edit.writeLine(textutils.formatTime(os.time(), false))!@#&						edit.writeLine(stuff[\"date\"])!@#&						edit.close()!@#&					elseif(password~=pass)then!@#&						print(\"Password is incorrect\")!@#&						sleep(2)!@#&					end!@#&				elseif(stuff[\"lockstate\"]==\"locked\") then!@#&					if(usertype==\"Owner\") then!@#&						choice = \"guimenu\"!@#&						done = true!@#&						local edit = fs.open(\"userinfo/\"..username , \"w\")!@#&						edit.writeLine(pass)!@#&						edit.writeLine(usertype)!@#&						edit.writeLine(logins+1)!@#&						edit.writeLine(textutils.formatTime(os.time(), false))!@#&						edit.writeLine(stuff[\"date\"])!@#&						edit.close()!@#&					else!@#&						title()!@#&						print(\"**THIS TERMINAL HAS BEEN LOCKED**\")!@#&						sleep(1)!@#&					end!@#&				end!@#&			else!@#&				print(\"Username does not exists\")!@#&				sleep(1)!@#&			end!@#&		end!@#&	end!@#&	!@#&!@#&	function gui()!@#&		local stuff = getsettings()!@#&		title()!@#&		print(\"Username:> \"..user..\" Type:> \"..usertype)!@#&		print()!@#&		if (selection == 1) then!@#&			print(\"[Add New Account]\")!@#&		!@#&		else!@#&			print(\" Add New Account\")!@#&		!@#&		end!@#&		if (selection == 2) then!@#&			print(\"[Edit An Account]\")!@#&		!@#&		else!@#&			print(\" Edit An Account\")!@#&		!@#&		end!@#&		if (selection == 3) then!@#&			print(\"[Delete Account ]\")!@#&			!@#&		else !@#&			print(\" Delete Account\")!@#&		!@#&		end!@#&		if (selection == 4) then!@#&			print(\"[List Accounts  ]\")!@#&		!@#&		else !@#&			print(\" List Accounts\")!@#&			!@#&		end!@#&		if (selection == 5) then!@#&			print(\"[LogOut         ]\")!@#&			!@#&		else !@#&			print(\" LogOut\")!@#&		end!@#&		if (selection == 6) then!@#&			print(\"[Open Door      ]\")!@#&		else!@#&			print(\" Open Door\")!@#&		end!@#&		if (selection == 7) then!@#&			!@#&			if(stuff[\"lockstate\"]==\"unlocked\")then!@#&				print(\"[Lock Terminal  ]\")!@#&			elseif(stuff[\"lockstate\"]==\"locked\")then!@#&				print(\"[Unlock Terminal]\")!@#&			end		!@#&		else !@#&			if(stuff[\"lockstate\"]==\"unlocked\")then!@#&				print(\" Lock Terminal\")!@#&			elseif(stuff[\"lockstate\"]==\"locked\")then!@#&				print(\" Unlock Terminal\")!@#&			end	!@#&		end!@#&		if (selection ==8) then!@#&			print(\"[Settings       ]\")!@#&		else!@#&			print(\" Settings\")!@#&		end!@#&		if (selection == 9) then!@#&			print(\"[Quit Program   ]\")!@#&		!@#&		else !@#&			print(\" Quit Program\")!@#&			!@#&		end!@#&	!@#&	end!@#&	!@#&	!@#&	function guimenu()!@#&		local stuff = getsettings()!@#&		choice = \"nothing\"!@#&		local done = false!@#&		selection = 1!@#&		gui()!@#&		while done==false do!@#&			selection, key = guiSelection(9,1,selection)!@#&			gui(selection)!@#&			if(key==28) then!@#&				if (selection==1) then!@#&					choice=\"add\"!@#&					done=true!@#&				elseif (selection==2) then	!@#&					choice=\"edit\"!@#&					done=true!@#&				elseif (selection==3) then!@#&					choice=\"delete\"!@#&					done=true!@#&				elseif (selection==4) then!@#&					choice=\"list\"!@#&					done=true!@#&				elseif (selection==5) then!@#&					done=true!@#&					title()!@#&					print(\"Logging out\")!@#&					sleep(1)!@#&					selection = 1!@#&					choice=\"nothing\"!@#&					done = true!@#&					usertype = \"nothing\"!@#&				elseif (selection==6) then!@#&					title()!@#&					print(\"Access Granted\")!@#&					sleep(1)!@#&					title()!@#&					print(\"Opening Door...\")!@#&					sleep(.5)!@#&					print(side)!@#&					rs.setOutput(stuff[\"side\"] , true)!@#&					title()!@#&					print(\"Door Open\")!@#&					sleep(3)!@#&					rs.setOutput(stuff[\"side\"] , false)!@#&					title()!@#&					print(\"Closing Door...\")!@#&					sleep(1)!@#&					done=true!@#&					choice=\"nothing\"!@#&				elseif (selection==7) then!@#&					if(usertype==\"Owner\") then!@#&						done = true!@#&						choice=\"lock\"!@#&					else !@#&						title()!@#&						print(\"//!!ERROR!!This fucntion is off limits//\")!@#&						sleep(1)!@#&						done = true!@#&						choice = \"guimenu\"!@#&					end!@#&				elseif (selection==8) then!@#&					if(usertype==\"Owner\") then!@#&						done = true!@#&						choice=\"settings\"!@#&					else !@#&						title()!@#&						print(\"//!!ERROR!!This fucntion is off limits//\")!@#&						sleep(1)!@#&						done = true!@#&						choice = \"guimenu\"!@#&					end!@#&				elseif (selection==9) then!@#&					if(usertype==\"Owner\") then!@#&						done = true!@#&						menu = false!@#&					else !@#&						title()!@#&						print(\"//!!ERROR!!This fucntion is off limits//\")!@#&						sleep(1)!@#&						done = true!@#&						choice = \"guimenu\"!@#&					end!@#&				end!@#&			end	!@#&		end!@#&	end!@#&!@#&	function addGui()!@#&		title()!@#&		x,yaa = term.getCursorPos()!@#&		if(addSelection==1)then!@#&			print(\"Username:[\"..addusername..\"]\")!@#&		else!@#&			print(\"Username: \"..addusername)!@#&		end!@#&		x,ybb = term.getCursorPos()!@#&		if(addSelection==2)then!@#&			print(\"Password:[\"..addpass..\"]\")!@#&		else!@#&			print(\"Password: \"..addpass)!@#&		end!@#&		x,ycc = term.getCursorPos()!@#&		if(addSelection==3)then!@#&			print(\"Level   :[\"..addlevel..\"]\")!@#&		else!@#&			print(\"Level   : \"..addlevel)!@#&		end!@#&		if(addSelection==4)then!@#&			print(\"    [DONE]\")!@#&		else!@#&			print(\"     DONE\")!@#&		end!@#&		print()!@#&	end!@#&	!@#&	function add()!@#&		addSelection = 1!@#&		adding = true!@#&		addusername = \" \"!@#&		addpass = \"----\"!@#&		addlevel = \"----\"!@#&		while adding==true do!@#&			addGui()!@#&			addSelection, key = guiSelection(4,1,addSelection)!@#&			if(key==28)then!@#&				if(addSelection==1)then!@#&					term.setCursorPos(1,yaa)!@#&					term.clearLine()!@#&					write(\"Username: \")!@#&					local newuser = io.read()!@#&					if(fs.exists(\"userinfo/\"..newuser)==true) then!@#&						term.setCursorPos(1,yaa)!@#&						term.clearLine()!@#&						write(\"Username: \"..addusername)!@#&					else!@#&						addusername = newuser!@#&						addpass = \" \"!@#&						addlevel = \" \"!@#&					end!@#&				elseif(addSelection==2 and addusername~=\" \")then!@#&					term.setCursorPos(1,ybb)!@#&					term.clearLine()!@#&					write(\"Password: \")!@#&					local newpass = io.read()!@#&					!@#&					addpass = newpass!@#&				elseif(addSelection==3 and addusername~=\" \")then!@#&					term.setCursorPos(1,ycc)!@#&					term.clearLine()!@#&					write(\"Level   : \")!@#&					local newlevel = io.read()!@#&					if(usertype==\"Admin\")then!@#&						if(newlevel==\"Admin\" or newlevel==\"admin\" or newlevel==\"Owner\" or newlevel==\"owner\")then!@#&							newlevel=addlevel!@#&						else!@#&							if(newlevel==\"employee\" or newlevel==\"Employee\" or newlevel==\"admin\" or newlevel==\"Admin\" or newlevel==\"owner\" or newlevel==\"Owner\")then!@#&								if (newlevel==\"employee\") then!@#&									newlevel=\"Employee\"!@#&								elseif (newlevel==\"admin\") then!@#&									newlevel=\"Admin\"!@#&								elseif(newlevel==\"owner\")then!@#&									newlevel=\"Owner\"!@#&								end!@#&								addlevel = newlevel!@#&							end!@#&						end!@#&					elseif(usertype==\"Owner\")then!@#&						!@#&						if(newlevel==\"employee\" or newlevel==\"Employee\" or newlevel==\"admin\" or newlevel==\"Admin\" or newlevel==\"owner\" or newlevel==\"Owner\")then!@#&							if (newlevel==\"employee\") then!@#&								newlevel=\"Employee\"!@#&							elseif (newlevel==\"admin\") then!@#&								newlevel=\"Admin\"!@#&							elseif(newlevel==\"owner\")then!@#&								newlevel=\"Owner\"!@#&							end!@#&							addlevel = newlevel!@#&						end!@#&					end!@#&				elseif(addSelection==4 and addusername~=\" \" and addpass~=\" \" and addlevel~=\" \")then!@#&					adding=false!@#&					local open = fs.open(\"userinfo/\"..addusername , \"w\")!@#&					open.writeLine(addpass)!@#&					open.writeLine(addlevel)!@#&					open.writeLine(\"0\")!@#&					open.writeLine(\"never\")!@#&					open.writeLine(\"0\")!@#&					open.close()!@#&					title()!@#&					print(\"User Added\")	!@#&					sleep(1)	!@#&				elseif(addSelection==4 and addusername==\" \")then!@#&					adding = false!@#&				end!@#&			elseif(key==211)then!@#&				adding = false!@#&			end		!@#&		end!@#&		choice = \"guimenu\"!@#&			!@#&	end!@#&	!@#&	function editGui()!@#&		local read = fs.open(\"userinfo/\"..editusername , \"r\")!@#&		local pass = read.readLine()!@#&		local level = read.readLine()!@#&		read.close()!@#&		title()!@#&		x,ya = term.getCursorPos()!@#&		if(editSelection==1)then!@#&			print(\"Username:[\"..editusername..\"]\")!@#&		else!@#&			print(\"Username: \"..editusername)!@#&		end!@#&		x,yb = term.getCursorPos()!@#&		if(editSelection==2)then!@#&			print(\"Password:[\"..pass..\"]\")!@#&		else!@#&			print(\"Password: \"..pass)!@#&		end!@#&		x,yc = term.getCursorPos()!@#&		if(editSelection==3)then!@#&			print(\"Level   :[\"..level..\"]\")!@#&		else!@#&			print(\"Level   : \"..level)!@#&		end!@#&		if(editSelection==4)then!@#&			print(\"    [DONE]\")!@#&		else!@#&			print(\"     DONE\")!@#&		end!@#&	end!@#&	!@#&	function editMenu()!@#&		editing=true!@#&		editSelection=1!@#&		while editing do!@#&			local read = fs.open(\"userinfo/\"..editusername , \"r\")!@#&			local pass = read.readLine()!@#&			local level = read.readLine()!@#&			local logins = read.readLine()!@#&			read.close()!@#&			editGui()!@#&			editSelection , key = guiSelection(4,1,editSelection)!@#&			if(key==28)then!@#&!@#&				if(editSelection==1)then!@#&					term.setCursorPos(1,ya)!@#&					term.clearLine()!@#&					write(\"Username: \")!@#&					local newuser = io.read()!@#&					if(fs.exists(\"userinfo/\"..newuser)==true) then!@#&						term.setCursorPos(1,ya)!@#&						term.clearLine()!@#&						write(\"Username: \"..editusername)!@#&					else!@#&						fs.delete(\"userinfo/\"..editusername)!@#&						local open = fs.open(\"userinfo/\"..newuser , \"w\")!@#&						open.writeLine(pass)!@#&						open.writeLine(level)!@#&						open.close()!@#&						editusername = newuser!@#&					end!@#&				elseif(editSelection==2)then!@#&					term.setCursorPos(1,yb)!@#&					term.clearLine()!@#&					write(\"Password: \")!@#&					local newpass = io.read()!@#&					local open = fs.open(\"userinfo/\"..editusername , \"w\")!@#&					open.writeLine(newpass)!@#&					open.writeLine(level)!@#&					open.close()!@#&				elseif(editSelection==3)then!@#&					term.setCursorPos(1,yc)!@#&					term.clearLine()!@#&					write(\"Level   : \")!@#&					local newlevel = io.read()!@#&					if(newlevel==\"employee\" or newlevel==\"Employee\" or newlevel==\"admin\" or newlevel==\"Admin\" or newlevel==\"owner\" or newlevel==\"Owner\")then!@#&						if (newlevel==\"employee\") then!@#&							newlevel=\"Employee\"!@#&						elseif (newlevel==\"admin\") then!@#&							newlevel=\"Admin\"!@#&						elseif(newlevel==\"owner\")then!@#&							newlevel=\"Owner\"!@#&						end!@#&					end!@#&					if(usertype==\"Admin\")then!@#&						if(newlevel==\"Admin\" or newlevel==\"Owner\")then!@#&							print(\"//!!ERROR!!User Not Authorised To Make This Change//\")!@#&						else!@#&							local open = fs.open(\"userinfo/\"..editusername , \"w\")!@#&							open.writeLine(pass)!@#&							open.writeLine(newlevel)!@#&							open.writeLine(logins)!@#&							open.close()!@#&						end!@#&					elseif(usertype==\"Owner\")then!@#&						local open = fs.open(\"userinfo/\"..editusername , \"w\")!@#&						open.writeLine(pass)!@#&						open.writeLine(newlevel)!@#&						open.writeLine(logins)!@#&						open.close()!@#&					end!@#&				elseif(editSelection==4)then!@#&					editing = false!@#&				end!@#&			end!@#&		end!@#&		choice=\"guimenu\"!@#&	end!@#&	!@#&	function edit()!@#&		title()!@#&		print(\"Enter the username you would like to edit\")!@#&		write(\":> \")!@#&		editusername = io.read()!@#&		if (fs.exists(\"userinfo/\"..editusername)==true) then!@#&			local read = fs.open(\"userinfo/\"..editusername , \"r\")!@#&			editpass = read.readLine()!@#&			editlevel = read.readLine()!@#&			read.close()!@#&			if(editlevel==\"Admin\" or editlevel==\"Owner\") then!@#&				if(usertype==\"Owner\") then!@#&					editMenu()!@#&				else!@#&					print(\"//!!ERROR!!User Not Authorised To Edit This Account//\")!@#&					sleep(1)!@#&				end!@#&			else!@#&				editMenu()!@#&			end!@#&		else!@#&			print(\"//!!ERROR!!User Does Not Exists//\")!@#&			sleep(1)!@#&		end!@#&	end!@#&	!@#&	function delete()!@#&		title()!@#&		print(\"Enter the username you would like to delete\") !@#&		write(\":> \")!@#&		local username = io.read()!@#&		if (fs.exists(\"userinfo/\"..username)==true) then!@#&			local read = fs.open(\"userinfo/\"..username , \"r\")!@#&			local pass = read.readLine()!@#&			local level = read.readLine()!@#&			read.close()!@#&			if(level==\"Admin\" or level==\"Owner\") then!@#&				if(usertype==\"Owner\") then!@#&					fs.delete(\"userinfo/\"..username)!@#&					title()!@#&					print(\"User deleted\")!@#&					sleep(1)!@#&				else!@#&					print(\"//!!ERROR!!User Not Authorised To Delete This Account//\")!@#&					sleep(1)!@#&				end!@#&			else!@#&				fs.delete(\"userinfo/\"..username)!@#&				title()!@#&				print(\"User deleted\")!@#&				sleep(1)!@#&			end!@#&		else !@#&			print(\"//!!ERROR!!User Does Not Exists//\")!@#&			sleep(1)!@#&		end!@#&		choice = \"guimenu\"!@#&	end!@#&	!@#&	function displayAccount(user)!@#&		local running = true!@#&		local derp = 1!@#&		local stuff = getsettings()!@#&		!@#&		local read = fs.open(\"userinfo/\"..user , \"r\")!@#&		local pass = read.readLine()!@#&		local level = read.readLine()!@#&		local numLogins = read.readLine()!@#&		local lastlogtime = read.readLine()!@#&		local lastlogdate = read.readLine()!@#&		read.close()!@#&		!@#&		term.clear()!@#&		term.setCursorPos(1,1)!@#&		while running do!@#&			title()!@#&			print(\"---------\")!@#&			print(\"|  0 0  |\")!@#&			print(\"|   |   |\")!@#&			print(\"|  \\\\_/  |\")!@#&			print(\"---------\")!@#&			print(user)!@#&			print()!@#&			print(\"-userinfo-\")!@#&			print(\"Password: \"..pass)!@#&			print(\"UserLevel: \"..level)!@#&			print(\"# of logins: \"..numLogins)!@#&			if(lastlog==\"never\")then!@#&				print(\"Last login: \"..lastlog)!@#&			else!@#&				print(\"Last login: \"..lastlogtime..\" \"..(tonumber(stuff[\"date\"])-tonumber(lastlogdate))..\" days ago\")!@#&			end!@#&			print()!@#&			print(\":Hit Any Key to Continue\")!@#&			derp , key = guiSelection(2,1,derp)!@#&			if(key~=nil)then!@#&				running = false!@#&			end!@#&		end	!@#&	end!@#&	!@#&	function otherList()!@#&		local selection = 1!@#&		local number = 6!@#&		local endnum=8!@#&		local running = true!@#&		local count = 0!@#&		local accountuser = {}!@#&		local place = 0!@#&		local filename = fs.list(\"userinfo\")!@#&		local derp = true!@#&		for number=1,5,1 do!@#&			accountuser[number] = \" \"!@#&		end!@#&		for _,file in ipairs( filename ) do!@#&			if (file==\"firsttime\" or file==\"settings\") then!@#&			else!@#&				accountuser[number] = file!@#&				number = number+1!@#&			end!@#&		end!@#&		for anumber=table.getn(accountuser),table.getn(accountuser)+2,1 do!@#&			accountuser[anumber] = \" \"!@#&			number = number+1!@#&		end!@#&		--if(count>1)then!@#&		--	number=number-1!@#&		--end!@#&		--if(count<8)then!@#&		--	endnum = number!@#&		--else!@#&		--	endnum = 8!@#&		--end!@#&		while running do!@#&			derp = true!@#&			place = 0!@#&			term.clear()!@#&			term.setCursorPos(1,1)!@#&			term.setCursorPos(15,4)!@#&			for derp=1,20,1 do!@#&				write(\"-\")!@#&			end!@#&			for start=1+count,endnum+count,1 do!@#&				if(start-count == endnum/2)then!@#&					term.setCursorPos(16,10)!@#&					write(\"[\")!@#&				end!@#&				middle(accountuser[start],place)!@#&				write(accountuser[start])!@#&				if(start-count == endnum/2)then!@#&					term.setCursorPos(33,10)!@#&					write(\"]\")!@#&				else!@#&					print()!@#&				end!@#&				place = place+1!@#&			end!@#&			term.setCursorPos(15,13)!@#&			for derp=1,20,1 do!@#&				write(\"-\")!@#&			end!@#&			while derp do!@#&				Event, key = os.pullEvent(\"key\")!@#&				if(endnum~=number)then!@#&					if (key==208) then!@#&						title()!@#&						count=count+1!@#&						derp = false!@#&						selection = selection+1!@#&					elseif (key==200) then!@#&						title()!@#&						count=count-1!@#&						derp = false!@#&						selection = selection-1!@#&					end!@#&				end!@#&				if(key==28)then!@#&					displayAccount(accountuser[selection+5])!@#&					title()!@#&					derp = false!@#&				end!@#&				if(key==211)then!@#&					derp = false!@#&					running = false!@#&				end!@#&				if(count<0) then!@#&					count=0!@#&					selection = selection+1!@#&				elseif(count+11>number) then!@#&					count=number-11!@#&					selection = selection-1!@#&				end  !@#&			end!@#&		end!@#&		choice = \"guimenu\"!@#&	end!@#&	!@#&	function list()!@#&		local theend = \"\"!@#&		O = 0!@#&		A = 0!@#&		E = 0!@#&		local level = \"unknown\"!@#&		local done = false!@#&		local acountsu = {}!@#&		local acountsp = {}!@#&		local acountsl = {}!@#&		acountslog = {}!@#&		numAcounts = 0!@#&		local count = 0!@#&		local endnum=11!@#&		herp = false!@#&		local up=\"  \"!@#&		local down=\"  \"!@#&		title()!@#&		local stuff = getsettings()!@#&		local filename = fs.list(\"userinfo\") !@#&		for _,file in ipairs( filename ) do!@#&			local read = fs.open(\"userinfo/\"..file , \"r\")!@#&			local pass = read.readLine()!@#&			local level = read.readLine()!@#&			local numLogins = read.readLine()!@#&			if (file==\"firsttime\" or file==\"settings\") then!@#&			else!@#&				acountsu[numAcounts] = file!@#&				acountsp[numAcounts] = pass!@#&				acountsl[numAcounts] = level!@#&				acountslog[numAcounts] = numLogins!@#&				numAcounts=numAcounts+1!@#&				if(level==\"Employee\")then!@#&					E = E+1!@#&				elseif(level==\"Admin\")then!@#&					A = A+1!@#&				elseif(level==\"Owner\")then!@#&					O = O+1!@#&				end!@#&			end!@#&			read.close()!@#&		end!@#&		if(numAcounts>1)then!@#&			numAcounts=numAcounts-1!@#&		end!@#&		if(numAcounts<endnum)then!@#&			endnum = numAcounts!@#&		else!@#&			endnum = 11!@#&		end!@#&		while done == false do!@#&			print(\"Format <username : password : usertype>\")!@#&			print(\" \")!@#&			for start=0+count,endnum+count,1 do!@#&									!@#&				if (numAcounts==0) then!@#&					print(\"This database contains no user acounts\")!@#&					break!@#&				elseif(numAcounts>0) then !@#&					if(usertype==\"Owner\") then!@#&						print(\"<\"..acountsu[start]..addspace(acountsu[start])..\" : \"..acountsp[start]..addspace(acountsp[start])..\" : \"..acountsl[start]..addspace(acountsl[start])..\">\")!@#&					elseif(usertype==\"Admin\") then!@#&						if(stuff[\"admin\"]==\"true\")then!@#&							if(acountsl[start]==\"Employee\")then!@#&								print(\"<\"..acountsu[start]..addspace(acountsu[start])..\" : \"..acountsp[start]..addspace(acountsp[start])..\" : \"..acountsl[start]..addspace(acountsl[start])..\">\")!@#&							else!@#&								print(\"<\"..acountsu[start]..addspace(acountsu[start])..\" : ----\"..addspace(\"----\")..\" : \"..acountsl[start]..addspace(acountsl[start])..\">\")	!@#&							end!@#&						else!@#&							print(\"<\"..acountsu[start]..addspace(acountsu[start])..\" : ----\"..addspace(\"----\")..\" : \"..acountsl[start]..addspace(acountsl[start])..\">\")	!@#&						end!@#&					end!@#&					!@#&				end!@#&			end!@#&			if(count==0 and endnum==11) then!@#&				up=\"  \"!@#&				down=\"\\\\/\"!@#&				theend = \"\"!@#&			elseif(count+11==numAcounts) then!@#&				down=\"  \"!@#&				up=\"/\\\\\"!@#&				theend = \"HIT ENTER TO QUIT\"!@#&			elseif(endnum==numAcounts)then!@#&				up=\"  \"!@#&				down=\"  \"!@#&				theend = \"HIT ENTER TO QUIT\"!@#&			else !@#&				up=\"/\\\\\"!@#&				down=\"\\\\/\"!@#&				theend = \"\"!@#&			end!@#&			print(\"               \"..up..\"               Employees:\"..E)!@#&			print(\"               --               Admins:\"..A)!@#&			print(\"               \"..down..\"               Owners:\"..O)           !@#&			write(\"         \"..theend)             !@#&			x,y = term.getSize()!@#&			term.setCursorPos(x/2+8,y)!@#&			print(\"Total:\"..table.getn(acountsu)+1)!@#&			herp = false!@#&			while herp==false do!@#&				Event, key = os.pullEvent(\"key\")!@#&				if(endnum~=numAcounts)then!@#&					if (key==208) then!@#&						title()!@#&						count=count+1!@#&						herp = true!@#&					elseif (key==200) then!@#&						title()!@#&						count=count-1!@#&						herp = true!@#&					end!@#&				end!@#&				if(key==28)then!@#&					done=true!@#&					herp = true!@#&				end!@#&				if(count<0) then!@#&					count=0!@#&				elseif(count+11>numAcounts) then!@#&					count=numAcounts-11!@#&				else !@#&				end!@#&			end!@#&			!@#&		end!@#&		!@#&		choice = \"guimenu\"!@#&	end!@#&	!@#&	function lock()!@#&		stuff = getsettings()!@#&		open = fs.open(\"userinfo/settings\" , \"w\")!@#&		open.writeLine(stuff[\"side\"])!@#&		if (stuff[\"lockstate\"]==\"unlocked\") then!@#&			open.writeLine(\"locked\")!@#&			title()!@#&			print(\"Locking Terminal\")!@#&			sleep(1)!@#&		else!@#&			open.writeLine(\"unlocked\")!@#&			title()!@#&			print(\"Unlocking Terminal\")!@#&			sleep(1)!@#&		end!@#&		open.writeLine(stuff[\"date\"])!@#&		open.writeLine(stuff[\"admin\"])!@#&		open.writeLine(stuff[\"list\"])!@#&		open.writeLine(stuff[\"time\"])!@#&		open.close()!@#&		choice = \"guimenu\"!@#&	end!@#&	!@#&	function settingsgui(setselection)!@#&		title()!@#&		local selection = setselection!@#&		local stuff = getsettings()!@#&		print(\"System settings\")!@#&		print()!@#&		width,height = term.getCursorPos()!@#&		if(selection==1)then!@#&			print(\"[\"..stuff[\"side\"]..addspace(stuff[\"side\"],6)..\"]: side\")!@#&		else!@#&			print(\" \"..stuff[\"side\"]..addspace(stuff[\"side\"],6)..\" : side\")!@#&		end!@#&		!@#&		if(selection==2)then!@#&			print(\"[\"..stuff[\"date\"]..addspace(stuff[\"date\"],6)..\"]: current day\")!@#&		else!@#&			print(\" \"..stuff[\"date\"]..addspace(stuff[\"date\"],6)..\" : current day\")!@#&		end!@#&		!@#&		if(selection==3)then!@#&			print(\"[\"..stuff[\"admin\"]..addspace(stuff[\"admin\"],6)..\"]: can Admin see passwords?\")!@#&		else!@#&			print(\" \"..stuff[\"admin\"]..addspace(stuff[\"admin\"],6)..\" : can Admin see passwords?\")!@#&		end!@#&		!@#&		if(selection==4)then!@#&			print(\"[\"..stuff[\"list\"]..addspace(stuff[\"list\"],6)..\"]: secondary list style\")!@#&		else!@#&			print(\" \"..stuff[\"list\"]..addspace(stuff[\"list\"],6)..\" : secondary list style\")!@#&		end!@#&		!@#&		if(selection==5)then!@#&			print(\"[\"..stuff[\"time\"]..addspace(stuff[\"time\"],6)..\"]: military time\")!@#&		else!@#&			print(\" \"..stuff[\"time\"]..addspace(stuff[\"time\"],6)..\" : military time\")!@#&		end!@#&		if(selection==6)then!@#&			print(\"[Done\"..addspace(\"Done\",6)..\"]\")!@#&		else!@#&			print(\" Done\")!@#&		end!@#&	end!@#&	!@#&	function settings()!@#&		local minecraft = 1!@#&		title()!@#&		local running = true!@#&		while running do!@#&			settingsgui(minecraft)!@#&			minecraft,key = guiSelection(6,1,minecraft)!@#&			if(key==28)then!@#&				local stuff = getsettings()!@#&				if(minecraft==1)then!@#&					term.setCursorPos(width,height)!@#&					term.clearLine()!@#&					term.setCursorPos(width,height)!@#&					term.write(\"         : side\")!@#&					term.setCursorPos(width+1,height)!@#&					stuff[\"side\"] = io.read()!@#&				elseif(minecraft==3)then!@#&					if(stuff[\"admin\"]==\"false\")then!@#&						stuff[\"admin\"]=\"true\"!@#&					else!@#&						stuff[\"admin\"]=\"false\"!@#&					end!@#&				elseif(minecraft==4)then!@#&					if(stuff[\"list\"]==\"false\")then!@#&						stuff[\"list\"]=\"true\"!@#&					else!@#&						stuff[\"list\"]=\"false\"!@#&					end!@#&				elseif(minecraft==5)then!@#&					if(stuff[\"time\"]==\"false\")then!@#&						stuff[\"time\"]=\"true\"!@#&					else!@#&						stuff[\"time\"]=\"false\"!@#&					end	!@#&				elseif(minecraft==6)then!@#&					running = false!@#&				end!@#&				local edit = fs.open(\"userinfo/settings\" , \"w\")!@#&				edit.writeLine(stuff[\"side\"])!@#&				edit.writeLine(stuff[\"lockstate\"])!@#&				edit.writeLine(stuff[\"date\"])!@#&				edit.writeLine(stuff[\"admin\"])!@#&				edit.writeLine(stuff[\"list\"])!@#&				edit.writeLine(stuff[\"time\"])!@#&				edit.close()!@#&			end!@#&		end!@#&		choice = \"guimenu\"!@#&	end!@#&	!@#&--******PROGRAM STARTS HERE*******!@#&start()!@#&while menu==true do!@#&	local stuff = getsettings()!@#&	if (choice==\"add\") then!@#&		if(pcall(add)==false)then!@#&			title()!@#&			print(\"Failed to add acount\")!@#&			sleep(2)!@#&			choice=\"guimenu\"!@#&		end!@#&	elseif (choice==\"edit\") then!@#&		if(pcall(edit)==false)then!@#&			title()!@#&			print(\"Failed to edit acount\")!@#&			sleep(2)!@#&			choice=\"guimenu\"!@#&		end!@#&	elseif (choice==\"delete\") then	!@#&		if(pcall(delete)==false)then!@#&			title()!@#&			print(\"Failed to delete acount\")!@#&			sleep(2)!@#&			choice=\"guimenu\"!@#&		end!@#&	elseif (choice==\"list\") then!@#&		if(stuff[\"list\"]==\"true\")then!@#&			if(pcall(otherList)==false)then!@#&				title()!@#&				print(\"Failed to list available acounts\")!@#&				sleep(2)!@#&				choice=\"guimenu\"!@#&			end !@#&		else!@#&			if(pcall(list)==false)then!@#&				title()!@#&				print(\"Failed to list available acounts\")!@#&				sleep(2)!@#&				choice=\"guimenu\"!@#&			end  !@#&		end!@#&		!@#&	elseif (choice==\"lock\")then!@#&		if(pcall(lock)==false)then!@#&			title()!@#&			print(\"Failed to lock terminal\")!@#&			sleep(2)!@#&			choice=\"guimenu\" !@#&		end!@#&	elseif(choice==\"settings\")then!@#&		if(pcall(settings)==false)then!@#&			title()!@#&			print(\"Failed to access settings GUI\")!@#&			sleep(2)!@#&			choice=\"guimenu\"!@#&		end!@#&	elseif(choice==\"guimenu\")then!@#&		guimenu()!@#&	else!@#&		if(pcall(promptuserinfo)==false)then!@#&			title()!@#&			print(\"Failed to get input/Bad input\")!@#&			sleep(2)!@#&			--choice=\"guimenu\"!@#&		end!@#&	end!@#&end!@#&term.clear()!@#&term.setCursorPos(1,1)",["pong"]="player1Score=0!@#&player2Score=0!@#&player1Pos=1!@#&player2Pos=1!@#&ballXPos=25!@#&ballYPos=1!@#&xVel = 1!@#&yVel = 1!@#&running = true!@#&paddleLength = 4!@#&!@#&function clear()!@#&	term.clear()!@#&	term.setCursorPos(1,1)!@#&end!@#&!@#&function at(x,y,len)!@#&	term.setBackgroundColor(colors.white)!@#&	term.setCursorPos(x,y)!@#&	for place = 1,len,1 do!@#&		write(\" \")!@#&	end!@#&	term.setBackgroundColor(colors.black)!@#&end!@#&!@#&function drawScore(person,score)!@#&	count = 0!@#&	if(person==\"player1\")then!@#&		x=20!@#&	else!@#&		x=35!@#&	end!@#&	temp = tostring(score)!@#&	temp = string.reverse(temp)!@#&	for number in string.gmatch(temp,\"%d\") do!@#&		number = tonumber(number)!@#&		space = count*4 !@#&		if(number==0)then!@#&			at(x-space,1,3)!@#&			at(x-space,2,1)!@#&			at(x-space+2,2,1)!@#&			at(x-space,3,1)!@#&			at(x-space+2,3,1)!@#&			at(x-space,4,1)!@#&			at(x-space+2,4,1)!@#&			at(x-space,5,3)!@#&		elseif(number==1)then!@#&			at(x-space,1,1)!@#&			at(x-space,2,1)!@#&			at(x-space,3,1)!@#&			at(x-space,4,1)!@#&			at(x-space,5,1)!@#&		elseif(number==2)then!@#&			at(x-space,1,3)!@#&			at(x-space+2,2,1)!@#&			at(x-space,3,3)!@#&			at(x-space,4,1)!@#&			at(x-space,5,3)!@#&		elseif(number==3)then!@#&			at(x-space,1,3)!@#&			at(x-space+2,2,1)!@#&			at(x-space,3,3)!@#&			at(x-space+2,4,1)!@#&			at(x-space,5,3)!@#&		elseif(number==4)then!@#&			at(x-space,1,1)!@#&			at(x-space+2,1,1)!@#&			at(x-space,2,1)!@#&			at(x-space+2,2,1)!@#&			at(x-space,3,3)!@#&			at(x-space+2,4,1)!@#&			at(x-space+2,5,1)!@#&		elseif(number==5)then!@#&			at(x-space,1,3)!@#&			at(x-space,2,1)!@#&			at(x-space,3,3)!@#&			at(x-space+2,4,1)!@#&			at(x-space,5,3)!@#&		elseif(number==6)then!@#&			at(x-space,1,3)!@#&			at(x-space,2,1)!@#&			at(x-space,3,3)!@#&			at(x-space,4,1)!@#&			at(x-space,5,3)!@#&			at(x-space+2,4,1)!@#&		elseif(number==7)then!@#&			at(x-space,1,3)!@#&			at(x-space+2,2,1)!@#&			at(x-space+2,3,1)!@#&			at(x-space+2,4,1)!@#&			at(x-space+2,5,1)!@#&		elseif(number==8)then!@#&			at(x-space,1,3)!@#&			at(x-space+2,2,1)!@#&			at(x-space,2,1)!@#&			at(x-space,3,3)!@#&			at(x-space,4,1)!@#&			at(x-space+2,4,1)!@#&			at(x-space,5,3)!@#&		elseif(number==9)then!@#&			at(x-space,1,3)!@#&			at(x-space+2,2,1)!@#&			at(x-space,2,1)!@#&			at(x-space,3,3)!@#&			at(x-space+2,4,1)!@#&			at(x-space+2,5,1)!@#&		end!@#&		count = count+1!@#&	end!@#&	term.setBackgroundColor(colors.black)!@#&end!@#&!@#&function drawPaddle(player,ypos)!@#&	local x,y = term.getSize()!@#&	term.setBackgroundColor(colors.white)!@#&	if(player == \"player1\")then!@#&		xpos = 2!@#&	else!@#&		xpos = x-1!@#&	end!@#&	for x=0,paddleLength-1,1 do!@#&		term.setCursorPos(xpos,ypos+x)!@#&		write(\" \")!@#&	end!@#&	term.setBackgroundColor(colors.black)!@#&end!@#&!@#&function drawBackground()!@#&	term.setBackgroundColor(colors.white)!@#&	local x,y = term.getSize()!@#&	for place=0,y,2 do!@#&		term.setCursorPos(x/2,place)!@#&		write(\" \")!@#&	end!@#&	term.setBackgroundColor(colors.black)!@#&end!@#&!@#&function drawBall()!@#&	term.setBackgroundColor(colors.white)!@#&	term.setCursorPos(ballXPos,ballYPos)!@#&	write(\" \")!@#&	term.setBackgroundColor(colors.black)!@#&end!@#&!@#&function point(person)!@#&	if(person==\"player1\")then!@#&		player1Score = player1Score+1!@#&	else!@#&		player2Score = player2Score+1!@#&	end!@#&	ballXPos=25!@#&	ballYPos=math.random(1,18)!@#&	if(math.random(0,1)==1)then!@#&		xVel = 1!@#&	else!@#&		xVel = -1!@#&	end!@#&	yVel = 1!@#&	timer = os.startTimer(1)!@#&end!@#&!@#&function moveBall()!@#&	local x,y = term.getSize()!@#&	ballXPos = ballXPos+xVel!@#&	ballYPos = ballYPos+yVel!@#&	if(ballXPos<=0)then!@#&		point(\"player2\")		!@#&	elseif(ballXPos>=x)then!@#&		point(\"player1\")		!@#&	end!@#&	if(ballYPos<=1)then!@#&		yVel = yVel*-1!@#&	elseif(ballYPos>=y)then!@#&		yVel = yVel*-1!@#&	end!@#&	if(ballXPos==2)then!@#&		if(ballYPos>=player1Pos and ballYPos<=player1Pos+paddleLength)then	!@#&			xVel = xVel*-1!@#&		end!@#&	elseif(ballXPos==x-1)then!@#&		if(ballYPos>=player2Pos and ballYPos<=player2Pos+paddleLength)then	!@#&			xVel = xVel*-1!@#&		end!@#&	end!@#&	drawBall()!@#&end!@#&!@#&function movePaddle()!@#&	local x,y = term.getSize()!@#&	if(ballXPos>=x/2)then!@#&		if(ballYPos+paddleLength/2<=y and ballYPos-paddleLength/2>=1)then!@#&			if(player2Pos>=ballYPos)then!@#&				player2Pos = player2Pos-speed!@#&			elseif(player2Pos+paddleLength<=ballYPos)then!@#&				player2Pos = player2Pos+speed!@#&			end!@#&		end!@#&	end!@#&end!@#&!@#&function refresh()!@#&	drawBackground()!@#&	drawBall()!@#&	drawScore(\"player1\",player1Score)!@#&	drawScore(\"player2\",player2Score)!@#&end!@#&!@#&function singlePlayer()!@#&	player1Score=0!@#&	player2Score=0!@#&	player1Pos=1!@#&	player2Pos=1!@#&	ballXPos=25!@#&	ballYPos=1!@#&	xVel = 1!@#&	yVel = 1!@#&	running = true!@#&	paddleLength = 4!@#&	write(\"Hit 'Q' to quit\")!@#&	sleep(2)!@#&	timer = os.startTimer(ballSpeed)!@#&	while running do!@#&		clear()!@#&		refresh()!@#&		drawPaddle(\"player1\",player1Pos)	!@#&		drawPaddle(\"player2\",player2Pos)	!@#&		local x,y = term.getSize()!@#&		local Event, key, pram1, pram2 = os.pullEvent()!@#&		if(Event==\"key\")then!@#&			if(key==208)then!@#&				player1Pos = player1Pos+1!@#&			elseif(key==200)then!@#&				player1Pos = player1Pos-1!@#&			end!@#&			if(player1Pos<1)then!@#&				player1Pos=1!@#&			elseif(player1Pos>y-paddleLength)then!@#&				player1Pos=y-(paddleLength-1)!@#&			end!@#&			if(key==16)then!@#&				break!@#&			end!@#&		elseif(Event==\"mouse_scroll\")then!@#&			player1Pos = player1Pos+key!@#&			if(player1Pos<1)then!@#&				player1Pos=1!@#&			elseif(player1Pos>y-paddleLength)then!@#&				player1Pos=y-(paddleLength-1)!@#&			end!@#&		elseif(Event==\"timer\" and key==timer)then!@#&			movePaddle()!@#&			moveBall()!@#&			timer = os.startTimer(ballSpeed)!@#&		end!@#&	end!@#&end!@#&!@#&function doublePlayer()!@#&	player1Score=0!@#&	player2Score=0!@#&	player1Pos=1!@#&	player2Pos=1!@#&	ballXPos=25!@#&	ballYPos=1!@#&	xVel = 1!@#&	yVel = 1!@#&	running = true!@#&	paddleLength = 4!@#&	write(\"Hit 'Q' to quit\")!@#&	sleep(2)!@#&	timer = os.startTimer(ballSpeed)!@#&	while running do!@#&		clear()!@#&		refresh()!@#&		drawPaddle(\"player1\",player1Pos)	!@#&		drawPaddle(\"player2\",player2Pos)	!@#&		local x,y = term.getSize()!@#&		local Event, key, pram1, pram2 = os.pullEvent()!@#&		if(Event==\"key\")then!@#&			if(key==208)then!@#&				player2Pos = player2Pos+1!@#&			elseif(key==200)then!@#&				player2Pos = player2Pos-1!@#&			end!@#&			if(player2Pos<1)then!@#&				player2Pos=1!@#&			elseif(player2Pos>y-paddleLength)then!@#&				player2Pos=y-(paddleLength-1)!@#&			end!@#&			if(key==31)then!@#&				player1Pos = player1Pos+1!@#&			elseif(key==17)then!@#&				player1Pos = player1Pos-1!@#&			end!@#&			if(player1Pos<1)then!@#&				player1Pos=1!@#&			elseif(player1Pos>y-paddleLength)then!@#&				player1Pos=y-(paddleLength-1)!@#&			end!@#&			if(key==16)then!@#&				break!@#&			end!@#&		elseif(Event==\"timer\" and key==timer)then!@#&			moveBall()!@#&			timer = os.startTimer(ballSpeed)!@#&		end!@#&	end!@#&end!@#&!@#&function menu()!@#&	local x,y = term.getSize()!@#&	clear()!@#&	write(\"PONG\")!@#&	term.setCursorPos(x/2-15,y/2-1)!@#&	term.setTextColor(colors.black)!@#&	term.setBackgroundColor(colors.white)!@#&	write(\"               \")!@#&	term.setCursorPos(x/2-15,y/2)!@#&	write(\" Single Player \")!@#&	term.setCursorPos(x/2-15,y/2+1)!@#&	write(\"               \")!@#&	term.setCursorPos(x/2+2,y/2-1)!@#&	write(\"               \")!@#&	term.setCursorPos(x/2+2,y/2)!@#&	write(\" Double Player \")!@#&	term.setCursorPos(x/2+2,y/2+1)!@#&	write(\"               \")!@#&	term.setCursorPos(x-2,1)!@#&	write(\" X \")!@#&	term.setTextColor(colors.white)!@#&	term.setBackgroundColor(colors.black)!@#&end	!@#&!@#&function menu2()!@#&	local x,y = term.getSize()!@#&	clear()!@#&	write(\"PONG\")!@#&	term.setCursorPos(x/2-10,y/2-1)!@#&	term.setTextColor(colors.black)!@#&	term.setBackgroundColor(colors.white)!@#&	write(\"      \")!@#&	term.setCursorPos(x/2-10,y/2)!@#&	write(\" Easy \")!@#&	term.setCursorPos(x/2-10,y/2+1)!@#&	write(\"      \")!@#&	term.setCursorPos(x/2-3,y/2-1)!@#&	write(\"        \")!@#&	term.setCursorPos(x/2-3,y/2)!@#&	write(\" Medium \")!@#&	term.setCursorPos(x/2-3,y/2+1)!@#&	write(\"        \")!@#&	term.setCursorPos(x/2+6,y/2-1)!@#&	write(\"      \")!@#&	term.setCursorPos(x/2+6,y/2)!@#&	write(\" Hard \")!@#&	term.setCursorPos(x/2+6,y/2+1)!@#&	write(\"      \")!@#&	term.setCursorPos(x-2,1)!@#&	write(\" X \")!@#&	term.setTextColor(colors.white)!@#&	term.setBackgroundColor(colors.black)!@#&end!@#&!@#&function MenuInteraction()!@#&	local x,y = term.getSize()!@#&	while true do!@#&		clear()!@#&		menu()!@#&		local Event, key, pram1, pram2 = os.pullEvent(\"mouse_click\")!@#&		if(pram2>=y/2-2 and pram2<=y/2+1)then!@#&			if(pram1>=x/2-15 and pram1<=x/2)then!@#&				menu2Interaction()!@#&			elseif(pram1>=x/2+2 and pram1<=x/2+17)then!@#&				doublePlayer()!@#&			end!@#&		elseif(pram2==1)then!@#&			if(pram1>=49)then!@#&				break!@#&			end!@#&		end!@#&	end!@#&end!@#&!@#&function menu2Interaction()!@#&	local x,y = term.getSize()!@#&	while true do!@#&		clear()!@#&		menu2()!@#&		local Event, key, pram1, pram2 = os.pullEvent(\"mouse_click\")!@#&		if(pram2>=y/2-2 and pram2<=y/2+1)then!@#&			if(pram1>=x/2-10 and pram1<=x/2-5)then!@#&				speed = .5!@#&				ballSpeed = .1!@#&				singlePlayer()!@#&			elseif(pram1>=x/2-3 and pram1<=x/2+4)then!@#&				speed = 1!@#&				ballSpeed = .1!@#&				singlePlayer()!@#&			elseif(pram1>=x/2+6 and pram1<=x/2+11)then!@#&				speed = 1!@#&				ballSpeed = .05!@#&				singlePlayer()!@#&			end		!@#&		elseif(pram2==1)then!@#&			if(pram1>=49)then!@#&				break!@#&			end!@#&		end!@#&	end!@#&end!@#&!@#&MenuInteraction()!@#&clear()",["eShip9.img"]="!@#&                77777b!@#&              777bbbbb!@#&             7      77!@#&             b      77!@#&              bbbbbbbb!@#&                77777b",["FlappyBird"]="------------FlappyBird v1.0----------!@#&----------------Game-----------------!@#&--------------by Creator-------------!@#&!@#&--API--!@#&os.loadAPI(\"/SpeedAPI/SpeedText\")!@#&!@#&--Variables--!@#&--term.redirect(term.native())!@#&local w,h = term.getSize()!@#&local dead = false!@#&local defaultConfing = {!@#&	birdColor = colors.yellow,!@#&	bgColor = colors.lightBlue,!@#&	grassColor = colors.green,!@#&	scoreColor = colors.red,!@#&	obstacleColor = colors.lime!@#&}!@#&local obstacles = {}!@#&local currObstacle = 0!@#&local totalLenght = 0!@#&local howFar = 0!@#&!@#&--PhysicsVars--!@#&local position = math.floor(h/2)!@#&local G = 30!@#&local maxSpeed = 20!@#&local speed = maxSpeed!@#&local position = 1!@#&local totalTime = 0!@#&local diff = 0.05!@#&local xPos = math.floor(w/6)!@#&!@#&--Functions--!@#&local GUI = {}!@#&local Physics = {}!@#&local Events = {}!@#&!@#&--GUI related functions--!@#&!@#&function GUI.DrawBird()!@#&	term.setCursorPos(xPos,h-position)!@#&	term.setBackgroundColor(defaultConfing.birdColor)!@#&	term.write(\"@\")!@#&end!@#&!@#&function GUI.DrawBackground()!@#&	term.setBackgroundColor(defaultConfing.bgColor)!@#&	term.clear()!@#&	term.setCursorPos(1,1)!@#&	term.setTextColor(defaultConfing.scoreColor)!@#&	term.write(\"You have passed \"..tostring(currObstacle)..\" obstacles!\")!@#&	paintutils.drawLine(1,h,w,h,defaultConfing.grassColor)!@#&end!@#&!@#&function GUI.DrawObstacles()!@#&	for i,v in pairs(obstacles) do!@#&		local totalFar = v[1] + howFar!@#&		if 0 < totalFar and totalFar <= w then!@#&			paintutils.drawLine(totalFar,1,totalFar,v[3],defaultConfing.obstacleColor)!@#&			paintutils.drawLine(totalFar,v[2]+v[3]-1,totalFar,h-1,defaultConfing.obstacleColor)!@#&			if totalFar == xPos then!@#&				currObstacle = currObstacle + 1!@#&				if (1 <= h - position and h - position <= v[3]) or (v[2]+v[3]-1 <= h - position and h - position <= h-1) then!@#&					dead = true!@#&				end!@#&			end!@#&		end!@#&		!@#&	end!@#&end!@#&!@#&--Physics related functions--!@#&!@#&function Physics.BirdMove()!@#&	position = position + speed*diff - 0.5*G*math.pow( diff, 2 )!@#&	speed = speed - G*diff!@#&end!@#&!@#&function Physics.KeepInBoundaries()!@#&	if position <= 0 then!@#&		dead = true	!@#&	elseif position > h-2 then!@#&		speed = 0!@#&		position = h-2!@#&	end!@#&end!@#&!@#&function Physics.GenerateObstacles(howMany)!@#&	for i=1,howMany do!@#&		totalLenght = totalLenght + math.random(35,70)!@#&		local opening = math.random(5,15)!@#&		local whereOpen = math.random(1,h-opening)!@#&		obstacles[#obstacles + 1] = {totalLenght,opening,whereOpen}!@#&	end!@#&end!@#&!@#&function Events.main()!@#&	local timer = os.startTimer(.2)!@#&	local event, p2 = os.pullEvent()!@#&	if event == \"key\" and p2 == keys.space then!@#&	 --break!@#&		speed = maxSpeed!@#&	end!@#&end!@#&!@#&--Code--!@#&!@#&--[[f = fs.open(\"FlappyBirdConfig/configs\",\"r\")!@#&configurationBuffer = f.readAll()!@#&f.close()]]--!@#&!@#&Physics.GenerateObstacles(100)!@#&!@#&while true do!@#&	if dead == true then!@#&  sleep(1)!@#&  !@#&  term.setTextColor(colors.red)!@#&  term.setBackgroundColor(colors.lightBlue)!@#&  term.clear()!@#&  !@#&		SpeedText.cPrint(\"You died!\")!@#&  sleep(1)!@#&  !@#&  term.setTextColor(colors.white)!@#&  term.setBackgroundColor(colors.black)!@#&  term.setCursorPos(1, 1)!@#&  term.clear()!@#&  error()!@#&	end!@#&	Events.main()!@#&	GUI.DrawBackground()!@#&	GUI.DrawBird()!@#&	GUI.DrawObstacles()!@#&	Physics.BirdMove()!@#&	Physics.KeepInBoundaries()!@#&	--Physics.DetectColision()!@#&	howFar = howFar - 1!@#&end",["Chislo"]="os.loadAPI(\"/SpeedAPI/SpeedText\")!@#&os.loadAPI(\"/SpeedAPI/SpeedGUI\")!@#&!@#&function choosenum(num)!@#&  real_num = math.random(0, 9)!@#&  !@#&  if num == real_num then!@#&    term.setTextColor(colors.lime)!@#&    SpeedText.cPrint(\"Right!\")!@#&    SpeedText.cPrint(\"Number was \"..tostring(real_num), 10)!@#&    term.setTextColor(colors.black)!@#&!@#&    sleep(3)!@#&    numberMenu()!@#&  else!@#&    term.setTextColor(colors.red)!@#&    SpeedText.cPrint(\"Wrong!\")!@#&    SpeedText.cPrint(\"Number was \"..tostring(real_num), 10)!@#&    term.setTextColor(colors.black)!@#&!@#&    sleep(3)!@#&    numberMenu()!@#&  end!@#&end!@#&!@#&function number1()!@#&  term.setBackgroundColor(colors.white)!@#&  term.setTextColor(colors.blue)!@#&  term.clear()!@#&  term.setCursorPos(1, 1)!@#&!@#&  choosenum(1)!@#&end!@#&!@#&function number2()!@#&  term.setBackgroundColor(colors.white)!@#&  term.setTextColor(colors.blue)!@#&  term.clear()!@#&  term.setCursorPos(1, 1)!@#&!@#&  choosenum(2)!@#&end!@#&!@#&function number3()!@#&  term.setBackgroundColor(colors.white)!@#&  term.setTextColor(colors.blue)!@#&  term.clear()!@#&  term.setCursorPos(1, 1)!@#&!@#&  choosenum(3)!@#&end!@#&!@#&function number4()!@#&  term.setBackgroundColor(colors.white)!@#&  term.setTextColor(colors.blue)!@#&  term.clear()!@#&  term.setCursorPos(1, 1)!@#&!@#&  choosenum(4)!@#&end!@#&!@#&function number5()!@#&  term.setBackgroundColor(colors.white)!@#&  term.setTextColor(colors.blue)!@#&  term.clear()!@#&  term.setCursorPos(1, 1)!@#&!@#&  choosenum(5)!@#&end!@#&!@#&function number6()!@#&  term.setBackgroundColor(colors.white)!@#&  term.setTextColor(colors.blue)!@#&  term.clear()!@#&  term.setCursorPos(1, 1)!@#&!@#&  choosenum(6)!@#&end!@#&!@#&function number7()!@#&  term.setBackgroundColor(colors.white)!@#&  term.setTextColor(colors.blue)!@#&  term.clear()!@#&  term.setCursorPos(1, 1)!@#&!@#&  choosenum(7)!@#&end!@#&!@#&function number8()!@#&  term.setBackgroundColor(colors.white)!@#&  term.setTextColor(colors.blue)!@#&  term.clear()!@#&  term.setCursorPos(1, 1)!@#&!@#&  choosenum(8)!@#&end!@#&!@#&function number9()!@#&  term.setBackgroundColor(colors.white)!@#&  term.setTextColor(colors.blue)!@#&  term.clear()!@#&  term.setCursorPos(1, 1)!@#&!@#&  choosenum(9)!@#&end!@#&!@#&function number0()!@#&  term.setBackgroundColor(colors.white)!@#&  term.setTextColor(colors.blue)!@#&  term.clear()!@#&  term.setCursorPos(1, 1)!@#&!@#&  choosenum(0)!@#&end!@#&!@#&function numberMenu()!@#&	term.setBackgroundColor(colors.white)!@#&	term.setTextColor(colors.blue)!@#&	term.clear()!@#&	term.setCursorPos(1, 1)!@#&!@#&	SpeedText.cPrint(\"  Guess a number!\", 1)!@#&!@#&	term.setTextColor(colors.gray)!@#&!@#&	SpeedText.line()!@#&	term.setCursorPos(1, 12)!@#&	SpeedText.line()!@#&!@#&	term.setCursorPos(51-7, 19)!@#&	term.setTextColor(colors.lightGray)!@#&	term.write(\"by Ma3rX\")!@#&!@#&	SpeedGUI.gui.button.add(\"1\",number1,3,4,2,3,colors.white,colors.cyan)!@#&	SpeedGUI.gui.button.add(\"2\",number2,9,4,2,3,colors.white,colors.cyan)!@#&	SpeedGUI.gui.button.add(\"3\",number3,15,4,2,3,colors.white,colors.cyan)!@#&	SpeedGUI.gui.button.add(\"4\",number4,21,4,2,3,colors.white,colors.cyan)!@#&	SpeedGUI.gui.button.add(\"5\",number5,27,4,2,3,colors.white,colors.cyan)!@#&	SpeedGUI.gui.button.add(\"6\",number6,33,4,2,3,colors.white,colors.cyan)!@#&	SpeedGUI.gui.button.add(\"7\",number7,39,4,2,3,colors.white,colors.cyan)!@#&	SpeedGUI.gui.button.add(\"8\",number8,45,4,2,3,colors.white,colors.cyan)!@#&	SpeedGUI.gui.button.add(\"9\",number9,21,8,2,3,colors.white,colors.cyan)!@#&	SpeedGUI.gui.button.add(\"0\",number0,27,8,2,3,colors.white,colors.cyan)!@#&	SpeedGUI.start()!@#&!@#&end!@#&!@#&numberMenu()",["physics"]="ballx=2!@#&bally=2!@#&xvel=math.random(3,15)!@#&yvel=0!@#&!@#&function drawBall()!@#&  --ballx = math.floor(ballx)!@#&  --bally = math.floor(bally)!@#&  term.setBackgroundColor(colors.black)!@#&  shell.run(\"clear\")!@#&  term.setBackgroundColor(colors.white)!@#&  term.setCursorPos(ballx,bally)!@#&  write(\" \")!@#&end!@#&!@#&function moveBall()!@#&  ballx = ballx+xvel!@#&  bally = bally+yvel!@#&  if(ballx<=1)then!@#&    xvel = xvel*-1!@#&    ballx = 2!@#&  end!@#&  if(ballx>=51)then!@#&    xvel = xvel*-1!@#&    ballx = 50!@#&  end!@#&  if(bally<=1)then!@#&    yvel = yvel*-1!@#&    bally = 2!@#&  end!@#&  if(bally>=19)then!@#&    yvel = yvel*-.8!@#&    bally = 18!@#&  end!@#&end!@#&!@#&timer = os.startTimer(.1)!@#&while true do!@#&  drawBall()!@#&  Event,key,xpos,ypos = os.pullEvent()!@#&  if(Event==\"mouse_drag\")then!@#&  	if(xpos==math.ceil(ballx))then!@#&  		if(ypos==math.ceil(bally))then!@#&  			ballx = xpos!@#&  			bally = ypos!@#&  			xvel = 0!@#&  			yvel = 0!@#&  		end!@#&  	end!@#&  elseif(Event==\"timer\" and key==timer)then!@#&    moveBall()!@#&    yvel = yvel+1!@#&    xvel = xvel*.9!@#&    timer = os.startTimer(.1)!@#&  end!@#&  !@#&end",["eShip5.img"]="               eeeeeeeee!@#&              e1   11111!@#&              e1   11e!@#&              e1   e1e!@#&              e1   e11ee!@#&               11ee11111",["eShip13.img"]="!@#&                977779!@#&             9999   99!@#&            7   9   9!@#&            7   9   9!@#&             9999   99!@#&                977779",["hangman"]="!@#&!@#&function getWords()!@#&	if(fs.exists(\"hangmanwords\"))then!@#&		count = 1!@#&		open = fs.open(\"hangmanwords/words\",\"r\")!@#&		temp = open.readAll()!@#&		for token in string.gmatch(temp, \"[^%,]+\") do!@#&		   words[count]=token!@#&		   count = count+1!@#&		end!@#&	else	!@#&		words = {\"tree\",\"bear\",\"hair\",\"movie\",\"train\",\"telephone\",\"computer\",\"airplane\",\"helicopter\",\"beach\",\"mountain\",\"valley\"}!@#&	end!@#&end!@#&!@#&function drawBoard()!@#&	shell.run(\"clear\")!@#&	print(\"Hang Man\")!@#&	print()!@#&	print(\"------\")!@#&	print(\"|    | \")    !@#&	print(\"|\")   !@#&	print(\"|\")     !@#&	print(\"|\")!@#&	print(\"|\")!@#&	print(\"|\")!@#&!@#&	if(trys>=1)then!@#&		term.setCursorPos(6,5)!@#&		write(\"O\")!@#&	end!@#&	if(trys>=2)then!@#&		term.setCursorPos(6,6)!@#&		write(\"|\")!@#&	end!@#&	if(trys>=3)then!@#&		term.setCursorPos(5,6)!@#&		write(\"/\")!@#&	end!@#&	if(trys>=4)then!@#&		term.setCursorPos(7,6)!@#&		write(\"\\\\\")!@#&	end!@#&	if(trys>=5)then!@#&		term.setCursorPos(6,7)!@#&		write(\"|\")!@#&	end!@#&	if(trys>=6)then!@#&		term.setCursorPos(5,8)!@#&		write(\"/\")!@#&	end!@#&	if(trys>=7)then!@#&		term.setCursorPos(7,8)!@#&		write(\"\\\\\")!@#&	end!@#&	term.setCursorPos(3,12)!@#&	for place=1,#word,1 do!@#&		write(\"- \")!@#&	end!@#&	term.setCursorPos(3,11)!@#&	for place=1,#guesses,1 do!@#&		write(guesses[place]..\" \")!@#&	end!@#&	term.setCursorPos(5+#word*2,11)!@#&	write(\"Used: \")!@#&	for place=1,#wrong,1 do!@#&		write(wrong[place]..\" \")!@#&	end!@#&	term.setBackgroundColor(colors.red)!@#&	term.setCursorPos(49,1)!@#&	write(\" X \")!@#&	term.setBackgroundColor(colors.black)!@#&end!@#&!@#&function pickWord()!@#&	word = words[math.random(1,#words)]!@#&	for place=1,#word,1 do!@#&		guesses[place] = \" \"!@#&		--guesses[place] = string.sub(word,place,place)!@#&	end!@#&end!@#&!@#&function checkLetter(character)!@#&	failed = true!@#&	for place=1,#word,1 do!@#&		if(character==string.sub(word,place,place))then!@#&			guesses[place] = character!@#&			failed = false!@#&		end!@#&	end!@#&	if(failed)then!@#&		wrong[#wrong+1] = character!@#&		trys = trys+1!@#&	end!@#&end!@#&!@#&function concat(table)!@#&	local temp = \"\"!@#&	for place=1,#table,1 do!@#&		temp = temp..guesses[place]!@#&	end!@#&	return temp!@#&end!@#&!@#&function showLetters(number)!@#&	for place=1,number,1 do!@#&		while true do!@#&			local temp = math.random(1,#word)!@#&			if(guesses[temp]==\" \")then!@#&				checkLetter(string.sub(word,temp,temp))!@#&				break!@#&			end!@#&		end!@#&	end!@#&end!@#&!@#&function menu()!@#&	local x,y = term.getSize()!@#&	shell.run(\"clear\")!@#&	write(\"HangMan\")!@#&	term.setCursorPos(x/2-10,y/2-1)!@#&	term.setTextColor(colors.white)!@#&	term.setBackgroundColor(colors.blue)!@#&	write(\"      \")!@#&	term.setCursorPos(x/2-10,y/2)!@#&	write(\" Easy \")!@#&	term.setCursorPos(x/2-10,y/2+1)!@#&	write(\"      \")!@#&	term.setCursorPos(x/2-3,y/2-1)!@#&	write(\"        \")!@#&	term.setCursorPos(x/2-3,y/2)!@#&	write(\" Medium \")!@#&	term.setCursorPos(x/2-3,y/2+1)!@#&	write(\"        \")!@#&	term.setCursorPos(x/2+6,y/2-1)!@#&	write(\"      \")!@#&	term.setCursorPos(x/2+6,y/2)!@#&	write(\" Hard \")!@#&	term.setCursorPos(x/2+6,y/2+1)!@#&	write(\"      \")!@#&	term.setBackgroundColor(colors.red)!@#&	term.setCursorPos(x-2,1)!@#&	write(\" X \")!@#&	term.setTextColor(colors.white)!@#&	term.setBackgroundColor(colors.black)!@#&end!@#&!@#&function game()!@#&	while true do!@#&		drawBoard()!@#&		if(trys==7)then!@#&			print(\"You Lose \"..word)!@#&			sleep(2)!@#&			break!@#&		end!@#&		local Event,char,xpos,ypos = os.pullEvent()!@#&		if(Event==\"char\")then!@#&			checkLetter(char)!@#&			if(concat(guesses)==word)then!@#&				drawBoard()!@#&				print(\"You Win\")!@#&				sleep(2)!@#&				break!@#&			end!@#&		elseif(Event==\"mouse_click\")then!@#&			if(ypos==1)then!@#&				if(xpos>=49)then!@#&					break!@#&				end!@#&			end!@#&		end!@#&	end!@#&end!@#&!@#&words = {}!@#&getWords()!@#&while true do!@#&	trys = 0!@#&	guesses = {}!@#&	wrong = {}!@#&	term.setTextColor(colors.white)!@#&	term.setBackgroundColor(colors.black)!@#&	local x,y = term.getSize()!@#&	shell.run(\"clear\")!@#&	menu()!@#&	local Event, key, pram1, pram2 = os.pullEvent(\"mouse_click\")!@#&	pickWord()!@#&	if(pram2>=y/2-2 and pram2<=y/2+1)then!@#&		if(pram1>=x/2-10 and pram1<=x/2-5)then!@#&			showLetters(math.ceil(#word/4))!@#&			game()!@#&		elseif(pram1>=x/2-3 and pram1<=x/2+4)then!@#&			showLetters(math.ceil(#word/5))!@#&			game()!@#&		elseif(pram1>=x/2+6 and pram1<=x/2+11)then!@#&			columns = 6!@#&			game()!@#&		end		!@#&	elseif(pram2==1)then!@#&		if(pram1>=49)then!@#&			break!@#&		end!@#&	end!@#&end",["skyfall"]="--[[	Skyfall!@#&		By Nitrogenfingers!@#&]]--!@#&!@#&local version = 1!@#&local reponame = \"Skyfall\"!@#&local requiresColour = true!@#&if requiresColour then!@#&	print(\"This game can only be played on an Advanced Computer.\")!@#&end!@#&!@#&local function displayNitrosoftTitle()!@#&	shell.run(\"clear\")!@#&	local _w,_h = term.getSize()!@#&	local _t1,_t2 = \"nitrosoft\", \"games\"!@#&	term.setCursorPos(math.floor(_w/2-#_t1), math.floor(_h/2))!@#&	if term.isColour() then term.setTextColour(colours.blue) end!@#&	term.write(_t1)!@#&	term.setCursorPos(math.floor(_w/2-#_t2/2),math.floor(_h/2)+1)!@#&	term.setTextColour(colours.white)!@#&	term.write(_t2)!@#&	if term.isColour() then term.setTextColour(colours.red) end!@#&	term.setCursorPos(math.floor(_w/2-#_t1), math.floor(_h/2)+2)!@#&	term.write(string.rep(\"-\",#_t1*2))!@#&	if term.isColour() then!@#&		term.setBackgroundColour(colours.green)!@#&		term.setCursorPos(_w/2+#_t1-4, math.floor(_h/2)-2)!@#&		term.write(\"  \")!@#&		term.setCursorPos(_w/2+#_t1-4, math.floor(_h/2)-1)!@#&		term.write(\"  \")!@#&		term.setBackgroundColour(colours.lime)!@#&		term.setCursorPos(_w/2+#_t1-3, math.floor(_h/2)-1)!@#&		term.write(\"  \")!@#&		term.setCursorPos(_w/2+#_t1-3, math.floor(_h/2))!@#&		term.write(\"  \")!@#&	end!@#&	term.setBackgroundColour(colours.black)!@#&	term.setTextColour(colours.white)!@#&	term.setCursorPos(1,_h)!@#&	term.write(\"v\"..version)!@#&	os.pullEvent(\"key\")!@#&end!@#&displayNitrosoftTitle()!@#&!@#&local w,h = term.getSize()!@#&!@#&local levelbg = {colours.lightBlue, colours.blue, colours.black}!@#&local level = {}!@#&local title = {!@#&	\"##### ##  # ## ## #####  ###  ##  ## \";!@#&	\"##    ## ## ## ## ##    ##### ##  ## \";!@#&	\"##### ####  ##### ###   ## ## ##  ## \";!@#&	\"   ## ## ##  ###  ##    ##### ### ###\";!@#&	\"##### ##  #  ###  ##    ## ## ### ###\";!@#&}!@#&!@#&local bgcol = colours.lightBlue!@#&local pcol = colours.red!@#&local flakes = {}!@#&local px, py = math.floor(w/2), h!@#&local pjump = 0!@#&local jtimer, jinterval = nil,0.06 !@#&local gameOver = false!@#&local levelnum = 1!@#&!@#&local gintdef = 0.3!@#&local gtimer, ginterval = nil,gintdef!@#&!@#&local function makeLevel()!@#&	for y = 1, h+1 do!@#&		level[y] = {}!@#&	end!@#&	for x = 1, w do!@#&		level[h+1][x] = \"#\"!@#&	end!@#&	flakes = {}!@#&end!@#&!@#&local function updateTile(x,y)!@#&	term.setCursorPos(x, y)!@#&	if level[y][x] == nil then term.setBackgroundColour(bgcol)!@#&	else term.setBackgroundColour(colours.white) end!@#&	term.write(\" \")!@#&end!@#&!@#&local function drawPlayer()!@#&	if py <= 0 then return end!@#&	if level[py][px] == nil then!@#&		term.setCursorPos(px, py)!@#&		term.setTextColour(pcol)!@#&		term.setBackgroundColour(bgcol)!@#&		term.write(\"&\")!@#&	end!@#&end!@#&!@#&local draw = function(self)!@#&	term.setCursorPos(self.x,self.y)!@#&	term.setBackgroundColour(colours.white)!@#&	term.write(\" \")!@#&end!@#&!@#&local function drawLevel()!@#&	for y = 1, h do!@#&		for x = 1, w do!@#&			updateTile(x,y)!@#&		end!@#&	end!@#&	drawPlayer()!@#&	for i=1,#flakes do!@#&		term.setCursorPos(flakes[i].x, flakes[i].y)!@#&		term.setBackgroundColour(colours.white)!@#&		tern.write(\" \")!@#&	end!@#&end!@#&!@#&local function addFlake()!@#&	local x,y = math.random(1,w),1!@#&	level[y][x] = \"#\"!@#&	updateTile(x,y)!@#&end!@#&!@#&local function updateBG()!@#&	term.setBackgroundColour(bgcol)!@#&	term.setTextColour(colours.white)!@#&	for i=1,#flakes do!@#&		updateTile(flakes[i].x, flakes[i].y)!@#&		flakes[i].y = flakes[i].y + 1!@#&		if level[flakes[i].y][flakes[i].x] == nil then!@#&			term.setCursorPos(flakes[i].x, flakes[i].y)!@#&			term.setBackgroundColour(bgcol)!@#&			term.write(\".\")!@#&		end!@#&	end!@#&	for i=1,2 do!@#&		table.insert(flakes, {x = math.random(1,w), y = 1})!@#&	end!@#&	for i = #flakes,1,-1 do!@#&		if flakes[i].y >= h + 1 then!@#&			table.remove(flakes, i)!@#&		end!@#&	end!@#&	drawPlayer()!@#&end!@#&!@#&local function updateSnow()!@#&	for y = h-1,1,-1 do!@#&		for x = 1,w do!@#&			if level[y][x] ~= nil and level[y+1][x] == nil then!@#&				level[y][x] = nil!@#&				updateTile(x,y)!@#&				level[y+1][x] = \"#\"!@#&				updateTile(x,y+1)!@#&			end!@#&		end!@#&	end!@#&	!@#&	if level[py][px] ~= nil then !@#&		if level[py+1][px] == nil then!@#&			py = py + 1!@#&			pjump = -1!@#&		else!@#&			gameOver = true !@#&		end!@#&	end!@#&end!@#&!@#&local function transitionLevel()!@#&	levelnum = levelnum + 1!@#&	bgcol = levelbg[math.min(levelnum, #levelbg)]!@#&	term.setBackgroundColour(bgcol)!@#&	local ttimer = os.startTimer(0.1)!@#&	local inc = 0!@#&	while inc < h do!@#&		local id,p1 = os.pullEvent(\"timer\")!@#&		if p1 == ttimer then!@#&			term.scroll(-1)!@#&			inc = inc + 1!@#&			ttimer = os.startTimer(0.1)!@#&		end!@#&	end!@#&	makeLevel()!@#&	ginterval = math.max(ginterval - 0.1, 0.1)!@#&	py = h!@#&	gtimer = os.startTimer(ginterval)!@#&	jtimer = os.startTimer(jinterval)!@#&end!@#&!@#&local function update()!@#&	local bgcount = 0!@#&	gtimer = os.startTimer(ginterval)!@#&	jtimer = os.startTimer(jinterval)!@#&	drawLevel()!@#&	while not gameOver do!@#&		local _id, _p1 = os.pullEvent()!@#&		!@#&		if _id == \"timer\" then!@#&			if _p1 == gtimer then!@#&				updateSnow()!@#&				for i=0, math.random(0,levelnum) do!@#&					addFlake()!@#&				end!@#&				gtimer = os.startTimer(ginterval)!@#&			elseif _p1 == jtimer then!@#&				if pjump > 0 then!@#&					updateTile(px,py)!@#&					py = py -1!@#&					pjump = pjump - 1!@#&					if py <= 1 then!@#&						transitionLevel()!@#&						pjump = 0!@#&					end!@#&					!@#&				elseif level[py+1][px] == nil then!@#&					updateTile(px,py)!@#&					py = py + 1!@#&				else!@#&					pjump = 0!@#&				end!@#&				drawPlayer()!@#&				jtimer = os.startTimer(jinterval)!@#&			end!@#&			bgcount = bgcount + 1!@#&			if bgcount % 8 == 0 then updateBG() end!@#&		elseif _id == \"key\" then!@#&			if _p1 == keys.left and px > 1 then!@#&				updateTile(px,py)!@#&				if level[py][px-1] == nil then!@#&					px = px - 1!@#&				elseif level[py-1][px] == nil and level[py-1][px-1] == nil then!@#&					px = px - 1!@#&					py = py - 1!@#&				end!@#&				drawPlayer()!@#&			elseif _p1 == keys.right and px < w then!@#&				updateTile(px,py)!@#&				if level[py][px+1] == nil then!@#&					px = px + 1!@#&				elseif level[py-1][px] == nil and level[py-1][px+1] == nil then!@#&					px = px + 1!@#&					py = py - 1!@#&				end!@#&				drawPlayer()!@#&			elseif _p1 == keys.space and level[py+1][px] ~= nil then!@#&				pjump = 2!@#&			elseif _p1 == keys.enter then!@#&				gameOver = true!@#&			end!@#&		end!@#&	end!@#&end!@#&!@#&makeLevel()!@#&update()!@#&term.setBackgroundColour(colours.black)!@#&shell.run(\"clear\")",["Flappy2"]="ver = \"beta 1.0 build 04\"!@#&aF = true!@#&betatesting = true!@#&!@#&os.loadAPI(\"/SpeedAPI/speedtext\")!@#&!@#&function drawMenu()!@#&  game()!@#&  !@#&  !@#&end!@#&hmD = 0!@#&q = math.random(3,18)!@#&w = math.random(3,18)!@#&e = math.random(3,18)!@#&qp = 28!@#&wp = 38!@#&ep = 45!@#&--pp = 10!@#&function kpress()!@#&  while true do!@#&    event2,char2 = os.pullEvent()!@#&    if event2 == \"key\" then!@#&      hmD = 0!@#&      ppos = ppos-3!@#&!@#&    elseif event2 == \"mouse_click\" then!@#&      hmD = 0!@#&      ppos = ppos-3!@#&    end !@#&    !@#&  end!@#&end!@#&function gener()!@#&  term.clear()!@#&  !@#&!@#&  if qp == 1 then!@#&  q = math.random(3,18)!@#&  qp = 28!@#&  end!@#&  if wp == 1 then!@#&  w = math.random(3,18)!@#&  wp = 28!@#&  end!@#&  if ep == 1 then!@#&  e = math.random(3,18)!@#& !@#&ep = 28!@#&end!@#&  qp = qp - 1!@#&  wp = wp-1!@#&  ep = ep - 1 !@#&  term.setBackgroundColor(colors.lime)!@#&  for j = 1,3 do!@#&  for i=1,26 do!@#&    if j == 1 then!@#&      term.setCursorPos(qp,i)!@#&      term.write(\" \")!@#&    elseif j == 2 then!@#&      term.setCursorPos(wp,i)!@#&      term.write(\" \")!@#&    elseif j == 3 then!@#&      term.setCursorPos(ep,i)!@#&      term.write(\" \")!@#&    end!@#&  end  !@#&  end!@#&  term.setBackgroundColor(colors.lightBlue)!@#&  for j=1,3 do!@#&  for i=-2,0,1 do!@#&    if j==1 then!@#&    term.setCursorPos(qp,q+i)!@#&    term.write(\" \")!@#&    elseif j == 2 then!@#&    term.setCursorPos(wp,w+i)!@#&    term.write(\" \")!@#&    elseif j == 3 then!@#&    term.setCursorPos(ep,e+i)!@#&    term.write(\" \")!@#&    !@#&    end!@#&  end!@#&  end!@#&end!@#&function game()!@#&  parallel.waitForAny(game2,kpress)!@#&end!@#&function lose(text)!@#&  sleep(2)!@#&  term.setBackgroundColor(colors.lightBlue)!@#&  term.setTextColor(colors.red)!@#&  term.setCursorPos(1,5)!@#&  term.clear()!@#&  speedtext.cPrint(text)!@#&  sleep(1)!@#&  speedtext.cPrint(\"Click to restart\", 10)!@#&  qp = 28!@#&  wp = 38!@#&  ep = 45!@#&  !@#&  os.pullEvent(\"mouse_click\")!@#&  return!@#&end!@#&function game2()!@#&  term.setBackgroundColor(colors.lightBlue)!@#&  term.clear()!@#&  function simu()!@#&  ppos = 10!@#&  while true do!@#&--  gener()      !@#&--  goup()!@#&  --ppos = ppos+2!@#&--  hmD = hmD+1!@#&  if ppos < 2 then!@#&    ppos = 1!@#&  end!@#&  gener()!@#&  goup()!@#&  if hmD == 0 then!@#&    ppos = ppos+1!@#&    hmD = 1!@#&  elseif hmD < 5 then!@#&    ppos = ppos+1!@#&    hmD = hmD+1!@#&  elseif hmD < 8 then!@#&    ppos = ppos+2!@#&    hmD = hmD + 1!@#&  elseif hmD < 16 then!@#&    ppos = ppos+3!@#&    hmD = hmD - 1!@#&  else!@#&    ppos = ppos+4!@#&  end!@#&  !@#&  if ppos > 20 then!@#&    lose(\"You're fallen in void\")!@#&    return!@#&  end!@#&  if qp == 2 then!@#&  if q ~= ppos and q ~= ppos - 1 and q ~= ppos + 1 then!@#&    lose(\"FlappyPixel hit building\")!@#&    return!@#&  end!@#&  end!@#&  if w ~= ppos and w ~= ppos + 1 and w ~= ppos - 1 and wp == 2 then!@#&    lose(\"FlappyPixel hit building\")!@#&    return!@#&  end!@#&  if e ~= ppos and e~= ppos-1 and e~= ppos+1 and ep == 2 then!@#&    lose(\"FlappyPixel hit building\")!@#&    return!@#&  end!@#&  sleep(0.3)!@#&  end!@#&  end!@#&  function goup()!@#&  pp = 10!@#&--  while true do!@#&    for i=-1,0 do!@#&      term.setCursorPos(2,ppos+i)!@#&      term.write(\" \")!@#&    end!@#&    term.setCursorPos(2,ppos)!@#&    --term.setBackgroundColor(colors.yellow)!@#&    term.setTextColor(colors.yellow)!@#&    if aF then!@#&    term.write(\"@\")!@#&    aF = false!@#&    else!@#&    term.write(\"@\")!@#&    aF = true!@#&    end!@#&--    pp = pp+1!@#&    !@#&--  end  !@#&  end!@#&  simu()!@#&--  parallel.waitForAny(simu,kpress)!@#&end!@#&function credits()!@#&  !@#&  term.clear()!@#&  term.setCursorPos(1,1)!@#&  print(\"FlappyPixel - Controls\")!@#&  print(\"W to jump\")!@#&  print()!@#&  print(\"Current version:\")!@#&  print(ver)!@#&  print()!@#&  if betatesting then!@#&    !@#&    print(\"Use at your own risk!\")!@#&    print()!@#&  end!@#&  print(\"Click to continue\")!@#&  os.pullEvent(\"mouse_click\")!@#&  return!@#&end!@#&function main()!@#&  while true do!@#&    drawMenu()!@#&    event,button,x,y = os.pullEvent(\"mouse_click\")!@#&    if y == 4 then!@#&      game()!@#&    elseif y == 6 then!@#&      credits()!@#&    elseif y == 8 then!@#&      return!@#&    end!@#&    !@#&    !@#&  end  !@#&end!@#&--!@#&local ok,err = pcall(main)!@#&if err == \"Terminated\" then!@#&  print(\"Terminated\")!@#&  print(\"Thanks for using FlappyPixel\")!@#&  return  !@#&end!@#&--if ok then!@#&  term.setBackgroundColor(colors.black)!@#&  term.setTextColor(colors.white)!@#&  term.clear()!@#&  term.setCursorPos(1,1)!@#&if ok then!@#&  print(\"Thanks for using FlappyPixel\")!@#&  term.setCursorPos(1,3)!@#&else!@#&  print(\"Thanks for using FlappyPixel\")!@#&  term.setCursorPos(1,3)!@#&  error()!@#&end",["derp"]="function test()!@#&  local t = {1,2,3,4}!@#&  return 1,t!@#&end!@#&!@#&a,b = test()!@#&print(a)!@#&for place=1,#b,1 do!@#&  print(b[place])!@#&end",["snakemaze"]="local w,h = term.getSize()!@#&!@#&local map = { }!@#&local scenew,sceneh = 51, 18!@#&local currx, curry = 1, 1!@#&local levelname = 'level.nfp'!@#&!@#&local start = { mx = 1, my = 1, x = 5, y = 5 }!@#&!@#&local snake = { } !@#&local addSegments = 8!@#&local score = 0!@#&local snakefx = 1!@#&local snakefy = 0!@#&!@#&local energy = 1000!@#&local tflip = 1!@#&!@#&local fb = 0!@#&local flaming = false!@#&local fbcx,fbcy = 0,0!@#&local fbx,fby = 0,0!@#&!@#&local baseTimer = 0.25!@#&local timerLength = 0.2!@#&local timerID = -1!@#&local gameOver = false!@#&local exiting = false!@#&local paused = false!@#&!@#&local showScores = false!@#&local inSplash = false!@#&!@#&local bgfmin = 8!@#&local bgfmax = 25!@#&local bgnext = 0!@#&!@#&local eggtotal = 0!@#&local eggcount = 0!@#&!@#&local shfmin = 50!@#&local shfmax = 100!@#&local shnext = 0!@#&!@#&local regex = \"^\"!@#&!@#&--some display consts.!@#&local scw, sch = 34, 14!@#&local scxoff,scyoff = math.floor(w/2 - scw/2), math.floor(h/2 - sch/2)+1!@#&!@#&local hs = {}!@#&!@#&local sncol = {!@#&	{!@#&		index = 1,!@#&		body = colours.lime,!@#&		scales = colours.green,!@#&		eyes = colours.red!@#&	},!@#&	{!@#&		index = 2,!@#&		body = colours.cyan,!@#&		scales = colours.blue,!@#&		eyes = colours.red!@#&	},!@#&	{!@#&		index = 3,!@#&		body = colours.pink,!@#&		scales = colours.purple,!@#&		eyes = colours.red!@#&	},!@#&	{!@#&		index = 4,!@#&		body = colours.lightGrey,!@#&		scales = colours.grey,!@#&		eyes = colours.black!@#&	},!@#&	{!@#&		index = 5,!@#&		body = colours.white,!@#&		scales = colours.black,!@#&		eyes = colours.black!@#&	}!@#&}!@#&local selcol = sncol[math.random(1,3)]!@#&if not term.isColour() then selcol = sncol[5] end!@#&!@#&local function setBG(col, bwcol)!@#&	if term.isColour() then!@#&		term.setBackgroundColour(col)!@#&	else!@#&		term.setBackgroundColour(bwcol)!@#&	end!@#&end!@#&!@#&local function setTX(col, bwcol)!@#&	if term.isColour() then!@#&		term.setTextColour(col)!@#&	else!@#&		term.setTextColour(bwcol)!@#&	end!@#&end!@#&!@#&local function drawFooter()!@#&	term.setCursorPos(3, h)!@#&	setBG(colours.blue, colours.black)!@#&	setTX(colours.white, colours.white)!@#&	term.clearLine()!@#&	term.write(\"Energy: \")!@#&	if energy > 800 then setTX(colours.green, colours.white)!@#&	elseif energy > 600 then setTX(colours.yellow, colours.white)!@#&	elseif energy > 400 then setTX(colours.orange, colours.white)!@#&	elseif energy > 200 or tflip == 1 then setTX(colours.red, colours.white)!@#&	end!@#&	pzero = ''!@#&	if energy % 10 == 0 then pzero = '.0' end!@#&	term.write((energy / 10)..pzero..\"%\")!@#&	tflip = (tflip + 1) % 2!@#&	setTX(colours.white, colours.white)!@#&	term.setCursorPos(21, h)!@#&	term.write(\"Score: \"..score..\"    \")!@#&	setTX(colours.yellow, colours.white)!@#&	term.setCursorPos(w-15, h)!@#&	term.write(\"Eggs: \")!@#&	setTX(colours.white, colours.white)!@#&	term.write(eggcount..\"/\"..eggtotal)!@#&end!@#&!@#&local function drawSegment(i)!@#&	if i == 1 and exiting then return end!@#&	local v = snake[i]!@#&	if inSplash and showScores and v.x > scxoff-1 and v.x <= scxoff + scw - 1 and!@#&		v.y > scyoff - 1 and v.y <= scyoff + sch - 1 then return end!@#&	!@#&	term.setCursorPos(v.x, v.y)!@#&	if energy <= 0 then selcol = sncol[4] end!@#&	term.setBackgroundColour(selcol.body)!@#&	local schar = ' '!@#&	if i == 1 then!@#&		term.setTextColour(selcol.eyes)!@#&		if fb > 0 then setBG(colours.orange, selcol.body) end!@#&		if gameOver then!@#&			if snakefx > 0 then schar = 'X'!@#&			else schar = '*' end!@#&		elseif snakefx == 1 then schar = ':'!@#&		elseif snakefx == -1 then schar = ':'!@#&		elseif snakefy == 1 then schar = '_'!@#&		elseif snakefy == -1 then schar = '^'!@#&		end!@#&	elseif i < #snake then!@#&		vdx = snake[i-1].x - snake[i+1].x!@#&		vdy = snake[i-1].y - snake[i+1].y!@#&		term.setTextColour(selcol.scales)!@#&		if math.abs(vdx) == 2 then schar = '-'!@#&		elseif math.abs(vdy) == 2 then schar = '|'!@#&		elseif vdx == vdy then schar = '\\\\'!@#&		else schar = '/'!@#&		end!@#&	else!@#&		vb = snake[i-1]!@#&		term.setTextColour(selcol.scales)!@#&		if math.abs(vb.x - v.x) == 1 then schar = '-'!@#&		elseif math.abs(vb.y - v.y) == 1 then schar = '|' end!@#&	end!@#&	term.write(schar)!@#&end!@#&!@#&local function drawSnake()!@#&	for i = 1, #snake do!@#&		drawSegment(i)!@#&	end!@#&end!@#&!@#&local function updateMap(mx, my, x, y)!@#&	if mx ~= currx or my ~= curry then return end!@#&	local scene = map[my][mx]!@#&	for i,v in ipairs(snake) do!@#&		if v.mx == mx and v.my == my and v.x == x and v.y == y then!@#&			drawSegment(i)!@#&			return!@#&		end!@#&	end!@#&	!@#&	local val = scene[y][x]!@#&	term.setCursorPos(x, y)!@#&	if val == nil then!@#&		setBG(colours.grey, colours.black)!@#&		term.write(' ')!@#&	elseif val == 0 then!@#&		setBG(colours.lightGrey, colours.white)!@#&		term.write(\" \")!@#&	elseif val == 1 then!@#&		setBG(colours.yellow, colours.white)!@#&		term.write(\" \")!@#&	elseif val == 2 then!@#&		setBG(colours.orange, colours.white)!@#&		term.write(\" \")!@#&	elseif val == 3 then!@#&		setBG(colours.red, colours.white)!@#&		term.write(\" \")!@#&	elseif val == 'e' then!@#&		setBG(colours.grey, colours.black)!@#&		setTX(colours.yellow, colours.white)!@#&		term.write(\"0\")!@#&	elseif val == 't' then!@#&		setBG(colours.grey, colours.black)!@#&		setTX(colours.purple, colours.white)!@#&		term.write(string.char(166))!@#&	elseif val == 'b' then!@#&		setBG(colours.grey, colours.black)!@#&		setTX(colours.green, colours.white)!@#&		term.write('*')!@#&	elseif val == 'B' then!@#&		setBG(colours.grey, colours.black)!@#&		setTX(colours.orange, colours.white)!@#&		term.write('+')!@#&	elseif val == 'X' then!@#&		setBG(colours.grey, colours.black)!@#&		setTX(colours.blue, colours.white)!@#&		term.write('@')!@#&	elseif val == 'F' then!@#&		setBG(colours.grey, colours.black)!@#&		setTX(colours.red, colours.white)!@#&		term.write('&')!@#&	elseif val == '@' and eggcount == eggtotal then!@#&		setBG(colours.blue, colours.white)!@#&		setTX(colours.lightBlue, colours.black)!@#&		term.write('@')!@#&	end!@#&end!@#&!@#&local function updateFire()!@#&	local fcy, fcx = curry, currx!@#&	local scene = map[fcy][fcx]!@#&	setBG(colours.black, colours.black)!@#&	setTX(colours.white, colours.white)!@#&	if snakefx ~= 0 then!@#&		local ffx = snake[1].x + snakefx!@#&		while map[fcy] and map[fcy][fcx] and type(map[fcy][fcx][snake[1].y][ffx]) ~= \"number\" do!@#&			map[fcy][fcx][snake[1].y][ffx] = nil!@#&			for i,v in ipairs(snake) do!@#&				if v.mx == fcx and v.my == fcy and v.x == ffx and v.y ==!@#&				snake[1].y then!@#&					gameOver = true!@#&					break!@#&				end!@#&			end!@#&			!@#&			if fcy == curry and fcx == currx then!@#&				term.setCursorPos(ffx, snake[1].y)!@#&				term.write(\"=\")!@#&			end!@#&			!@#&			ffx = ffx + snakefx!@#&			if ffx < 0 then!@#&				fcx = fcx - 1!@#&				ffx = ffx + scenew!@#&			elseif ffx > scenew then!@#&				fcx = fcx + 1!@#&				ffx = ffx - scenew!@#&			end!@#&		end!@#&		if map[fcy][fcx] then !@#&			fbx = ffx!@#&			fby = snake[1].y!@#&			fbcx = fcx!@#&			fbcy = fcy!@#&		else!@#&			fbx = -1!@#&			fby = -1!@#&			fbcx = -1!@#&			fbcy = -1!@#&		end!@#&	else!@#&		local ffy = snake[1].y + snakefy!@#&		while map[fcy] and map[fcy][fcx] and type(map[fcy][fcx][ffy][snake[1].x]) ~= \"number\" do!@#&			map[fcy][fcx][ffy][snake[1].x] = nil!@#&			for i,v in ipairs(snake) do!@#&				if v.mx == fcx and v.my == fcy and v.x == snake[1].x and v.y ==!@#&				ffy then!@#&					gameOver = true!@#&					break!@#&				end!@#&			end!@#&			if fcy == curry and fcx == currx then!@#&				term.setCursorPos(snake[1].x, ffy)!@#&				term.write(\"|\")!@#&			end!@#&			ffy = ffy + snakefy!@#&			if ffy < 0 then!@#&				fcy = fcy - 1!@#&				ffy = ffy + sceneh!@#&			elseif ffy > sceneh then!@#&				fcy = fcy + 1!@#&				ffy = ffy - sceneh!@#&			end!@#&		end!@#&		if map[fcy][fcx] then !@#&			fbx = snake[1].x!@#&			fby = ffy!@#&			fbcx = fcx!@#&			fbcy = fcy!@#&		else!@#&			fbx = -1!@#&			fby = -1!@#&			fbcx = -1!@#&			fbcy = -1!@#&		end!@#&	end!@#&end!@#&!@#&local function lookup(x,y)!@#&	if y < 1 or y > sceneh or x < 1 or x > scenew then return 0 end!@#&	return map[curry][currx][y][x]!@#&end!@#&!@#&local function drawMap()!@#&	local scene = map[curry][currx]!@#&	for y = 1, sceneh do!@#&		for x = 1, scenew do!@#&			updateMap(currx, curry, x, y)!@#&		end!@#&	end!@#&end!@#&!@#&local function parseValue(mx, my, x, y, lchar)!@#&	if not map[my][mx][y] then map[my][mx][y] = {} end!@#&	if tonumber(lchar, 16) then!@#&		lchar = math.pow(2, tonumber(lchar,16))!@#&		!@#&		if lchar == colours.white then!@#&			map[my][mx][y][x] = 0!@#&		elseif lchar == colours.yellow then!@#&			map[my][mx][y][x] = 'e'!@#&			eggtotal = eggtotal + 1!@#&		elseif lchar == colours.purple then!@#&			map[my][mx][y][x] = 't'!@#&		elseif lchar == colours.lime then!@#&			start = { mx = mx, my = my, x = x, y = y }!@#&		elseif lchar == colours.blue then!@#&			map[my][mx][y][x] = '@'!@#&		elseif lchar == colours.pink then!@#&			map[my][mx][y][x] = 'F'!@#&		end!@#&	else!@#&		table.insert(map[my][mx].whitespace, {x = x, y = y})!@#&	end	!@#&end!@#&!@#&!@#&!@#&local function writeHS()!@#&	local f = io.open(shell.resolve(\".\")..\"/SpeedOS/Applications/GameBox/stuff/hs\", \"w\")!@#&	!@#&	for i,v in ipairs(hs) do!@#&		f:write(v.name..regex..v.snake..regex..v.eggs..regex..v.score)!@#&		if i < #hs then f:write(\"\\n\") end!@#&	end!@#&	!@#&	f:close()!@#&end!@#&!@#&local function loadHS()!@#&	hs = {}!@#&	if not fs.exists(shell.resolve(\".\")..\"/SpeedOS/Applications/GameBox/stuff/hs\") then!@#&		print(\"Error: stuff/hs missing! Rewriting...\")!@#&		os.pullEvent(\"key\")!@#&		writeHS()!@#&		return!@#&	end!@#&	local f = fs.open(shell.resolve(\".\")..\"/SpeedOS/Applications/GameBox/stuff/hs\", \"r\")!@#&	!@#&	local line = f:readLine()!@#&  !@#&	while line do!@#&		local vals = split(line, regex)!@#&		if #vals ~= 4 and not tonumber(vals[2]) and not tonumber(vals[3]) and not tonumber(vals[4]) then!@#&			print(\"Error: stuff/hs invalid! Rewriting...\")!@#&			os.pullEvent(\"key\")!@#&			f:close()!@#&			writeHS()!@#&			return!@#&		end!@#&		table.insert(hs, { name = vals[1], snake = tonumber(vals[2]), !@#&				eggs = tonumber(vals[3]), score = tonumber(vals[4]) })!@#&		if #hs == 10 then break end!@#&		line = f:readLine()!@#&	end!@#&	f:close()!@#&end!@#&!@#&local function addHighScore()!@#&	name = displayInputDialogue(\"You got a new high score! Enter your name:\", 8, colours.blue, colours.white)!@#&	local entry = { name = name, snake = selcol.index, score = score,!@#&			eggs = eggcount }!@#&	local place = 1!@#&	for i=1,#hs do!@#&		if hs[place].score < entry.score then !@#&			break !@#&		end!@#&		place = i + 1!@#&	end!@#&	table.insert(hs, place, entry)!@#&	while #hs > 10 do!@#&		table.remove(hs, #hs)!@#&	end!@#&	writeHS()!@#&end!@#&!@#&local function loadMap(_sPath)!@#&	if not fs.exists(_sPath) then!@#&		return false !@#&	end!@#&	mx, my = 1,1!@#&	lineno = 1!@#&  !@#&	eggtotal = 0!@#&  !@#&	local file = fs.open(_sPath, 'r')!@#&	local line = file:readLine()!@#&  !@#&	map = {}!@#&  !@#&	while line do!@#&		if not map[my] then map[my] = { } end!@#&		for i=1,#line do!@#&			mx = math.floor((i-1)/scenew)+1!@#&			if not map[my][mx] then map[my][mx] = { whitespace = {} } end!@#&			local lchar = string.sub(line,i,i)!@#&			local x = !@#&			parseValue(mx, my, i-((mx-1)*scenew), lineno-((my-1)*sceneh), lchar)!@#&		end!@#&		line = file:readLine()!@#&		my = math.floor(lineno / sceneh) + 1!@#&		lineno = lineno + 1!@#&	end!@#&	file:close()!@#&	maxGoldCount = goldCount!@#&	titleLoaded = false!@#&	return true!@#&end!@#&!@#&local function spawnBug()!@#&	bgnext = math.random(bgfmin, bgfmax)!@#&	bugplaced = false!@#&	while not bugplaced do!@#&		local ran = math.random(1, #map[currx][curry].whitespace)!@#&		local ws = map[currx][curry].whitespace[ran]!@#&		if map[curry][currx][ws.y][ws.x]  == nil then!@#&			bugtype = math.random(1,8)!@#&			bug = ''!@#&			if bugtype <= 5 then bug = 'b'!@#&			elseif bugtype <=7 then bug = 'B'!@#&			else bug = 'X' end!@#&			map[curry][currx][ws.y][ws.x] = bug!@#&			updateMap(currx, curry, ws.x, ws.y)!@#&			bugplaced = true!@#&		end!@#&	end!@#&end!@#&!@#&local function spawnShroom()!@#&	shnext = math.random(shfmin, shfmax)!@#&	shroomplaced = false!@#&	while not shroomplaced do!@#&		local ran = math.random(1, #map[currx][curry].whitespace)!@#&		local ws = map[currx][curry].whitespace[ran]!@#&		if map[curry][currx][ws.y][ws.x] == nil then!@#&			map[curry][currx][ws.y][ws.x] = 't'!@#&		end!@#&		updateMap(currx, curry, ws.x, ws.y)!@#&		shroomplaced = true!@#&	end!@#&end!@#&!@#&local function initSnake()!@#&	-- Hardcoded. Lazy but easy.!@#&	snake = {}!@#&	addSegments = 8!@#&	eggcount = 0!@#&	energy = 1000!@#&	score = 0!@#&	gameOver = false!@#&	paused = false!@#&	exiting = false!@#&	snakefx = 1!@#&	snakefy = 0!@#&	snake[1] = { mx = start.mx, my = start.my, x = start.x, y = start.y }!@#&	currx = snake[1].mx!@#&	curry = snake[1].my!@#&	!@#&	drawSnake()!@#&	drawMap(currx, curry)!@#&end!@#&!@#&local function updateSnake()!@#&	energy = energy - 2!@#&	!@#&	if (addSegments > 0) then!@#&		addSegments = addSegments - 1!@#&	else!@#&		local val = snake[#snake]!@#&		table.remove(snake, #snake)!@#&		behindscores = inSplash and showScores and val.x > scxoff - 1 and val.x <= scxoff + scw - 1 and val.y > scyoff - 1 and val.y <= scyoff + sch - 1!@#&	!@#&		if currx == val.mx and curry == val.my and not behindscores then !@#&			updateMap(currx, curry, val.x, val.y)!@#&		end!@#&	end!@#&	!@#&	if exiting then!@#&		score = score + 5!@#&		if #snake == 1 then	!@#&			drawFooter()!@#&			gameOver = true!@#&			return!@#&		end!@#&	end!@#&	!@#&	local ox,oy = currx,curry!@#&	nx = snake[1].x + snakefx!@#&	ny = snake[1].y + snakefy!@#&	if nx <= 0 then!@#&		currx = currx - 1!@#&		nx = nx + scenew!@#&	elseif nx > scenew then!@#&		currx = currx + 1!@#&		nx = nx - scenew!@#&	elseif ny <= 0 then!@#&		curry = curry - 1!@#&		ny = ny + sceneh!@#&	elseif ny > sceneh then!@#&		curry = curry + 1!@#&		ny = ny - sceneh!@#&	end!@#&	if currx ~= ox or curry ~= oy then!@#&		if not map[curry] or not map[curry][currx] then!@#&			gameOver = true!@#&			return!@#&		else!@#&			if not map[curry][currx].visited then!@#&				for i=1,5 do spawnBug() end!@#&				map[curry][currx].visited = true!@#&			end!@#&			drawMap()!@#&		end!@#&	end!@#&	if not exiting then!@#&		table.insert(snake, 1, {!@#&			mx = currx, my = curry,!@#&			x = nx, y = ny})!@#&	end!@#&	!@#&	local terr = map[snake[1].my][snake[1].mx][snake[1].y][snake[1].x] !@#&	if type(terr) == \"number\" then!@#&		--collision code!@#&		map[snake[1].my][snake[1].mx][snake[1].y][snake[1].x] = nil!@#&		drawSegment(2)!@#&		term.setCursorPos(snake[1].x, snake[1].y)!@#&		setBG(colours.lightGrey, colours.white)!@#&		setTX(colours.brown, colours.black)!@#&		term.write(\"@\")!@#&		gameOver = true!@#&		return!@#&	elseif terr == 'e' then!@#&		map[snake[1].my][snake[1].mx][snake[1].y][snake[1].x] = nil!@#&		table.insert(map[snake[1].my][snake[1].mx].whitespace, !@#&			{ x = snake[1].x, y = snake[1].y })!@#&		energy = energy + 200!@#&		addSegments = addSegments + 5!@#&		score = score + 200!@#&		eggcount = eggcount + 1!@#&	elseif terr == 't' then!@#&		map[snake[1].my][snake[1].mx][snake[1].y][snake[1].x] = nil!@#&		energy = energy - 50!@#&		addSegments = addSegments + 3!@#&		score = score - 50!@#&	elseif terr == 'b' then!@#&		map[snake[1].my][snake[1].mx][snake[1].y][snake[1].x] = nil!@#&		energy = energy + 20!@#&		addSegments = addSegments + 1!@#&		score = score + 10!@#&	elseif terr == 'B' then!@#&		map[snake[1].my][snake[1].mx][snake[1].y][snake[1].x] = nil!@#&		energy = energy + 40!@#&		addSegments = addSegments + 2!@#&		score = score + 20!@#&	elseif terr == 'X' then!@#&		map[snake[1].my][snake[1].mx][snake[1].y][snake[1].x] = nil!@#&		energy = energy + 100!@#&		addSegments = addSegments + 3!@#&		score = score + 50!@#&	elseif terr == 'F' then!@#&		map[snake[1].my][snake[1].mx][snake[1].y][snake[1].x] = nil!@#&		fb = fb + 8!@#&		score = score + 50!@#&	elseif terr == \"@\" and eggcount == eggtotal and not exiting then!@#&		exiting = true!@#&		score = score + 2000!@#&		timerLength = 0.05!@#&	end!@#&	!@#&	if energy < 0 then!@#&		gameOver = true!@#&		drawSnake()!@#&		return!@#&	end!@#&	if energy > 1000 then!@#&		energy = 1000!@#&	end!@#&	!@#&	for i=4,#snake do!@#&		local v = snake[i]!@#&		if v.mx == snake[1].mx and v.my == snake[1].my and !@#&				v.x == snake[1].x and v.y == snake[1].y then!@#&			gameOver = true!@#&			drawSegment(2)!@#&			term.setCursorPos(snake[1].x, snake[1].y)!@#&			term.setBackgroundColour(selcol.body)!@#&			setTX(colours.red, colours.black)!@#&			term.write(\"@\")!@#&			return!@#&		end!@#&	end!@#&	!@#&	if snake[#snake].mx == currx and snake[#snake].my == curry then!@#&		drawSegment(#snake)!@#&	end!@#&	if snake[2].mx == currx and snake[2].my == curry then!@#&		drawSegment(2)!@#&	end!@#&	drawSegment(1)!@#&end!@#&!@#&function readInput(lim)!@#&	sleep(0.1)!@#&	term.setCursorBlink(true)!@#&!@#&	local inputString = \"\"!@#&	local ox,oy = term.getCursorPos()!@#&	term.write(\" \")!@#&	term.setCursorPos(ox, oy)!@#&	if not lim or type(lim) ~= \"number\" or lim < 1 then lim = w - ox end!@#&	!@#&	while true do!@#&		local id,key = os.pullEvent()!@#&		!@#&		if id == \"key\" and key == 14 and #inputString > 0 then!@#&			inputString = string.sub(inputString, 1, #inputString-1)!@#&			term.setCursorPos(ox + #inputString,oy)!@#&			term.write(\" \")!@#&		elseif id == \"key\" and key == 28 and inputString ~= string.rep(\" \", #inputString) then !@#&			break!@#&		elseif id == \"char\" and #inputString < lim and key ~= regex then!@#&			inputString = inputString..key!@#&		end!@#&		term.setCursorPos(ox,oy)!@#&		term.write(inputString)!@#&		term.setCursorPos(ox + #inputString, oy)!@#&	end!@#&	!@#&	while string.sub(inputString, 1, 1) == \" \" do!@#&		inputString = string.sub(inputString, 2, #inputString)!@#&	end!@#&	while string.sub(inputString, #inputString, #inputString) == \" \" do!@#&		inputString = string.sub(inputString, 1, #inputString-1)!@#&	end!@#&	term.setCursorBlink(false)!@#&	!@#&	return inputString!@#&end!@#&!@#&function wprintOffCenter(msg, height, width, offset)!@#&	local inc = 0!@#&	local ops = 1!@#&	while #msg - ops > width do!@#&		local nextspace = 0!@#&		while string.find(msg, \" \", ops + nextspace) and!@#&				string.find(msg, \" \", ops + nextspace) - ops < width do!@#&			nextspace = string.find(msg, \" \", nextspace + ops) + 1 - ops!@#&		end!@#&		local ox,oy = term.getCursorPos()!@#&		term.setCursorPos(width/2 - (nextspace)/2 + offset, height + inc)!@#&		inc = inc + 1!@#&		term.write(string.sub(msg, ops, nextspace + ops - 1))!@#&		ops = ops + nextspace!@#&	end!@#&	term.setCursorPos(width/2 - #string.sub(msg, ops)/2 + offset, height + inc)!@#&	term.write(string.sub(msg, ops))!@#&	!@#&	return inc + 1!@#&end!@#&!@#&function displayConfirmDialogue(msg, offset, backColour, textColour)!@#&	local dialogoffset = 10!@#&	if not offset then offset = 8 end!@#&	if not backColour or not term.isColour() then backColour = colours.white end!@#&	if not textColour or not term.isColour() then textColour = colours.black end!@#&	setBG(backColour, backColour)!@#&	setTX(textColour, textColour)!@#&	--We actually print twice- once to get the lines, second time to print proper. Easier this way.!@#&	local lines = wprintOffCenter(msg, offset, w - (dialogoffset+2) * 2, dialogoffset + 2)!@#&	!@#&	--This cluster of statements prints a nice box with the message the NPC has for the player in it.!@#&	for i=offset-1,offset+lines do!@#&		term.setCursorPos(dialogoffset, i) !@#&		term.write(\" \"..string.rep(\" \", w - (dialogoffset) * 2 - 2)..\" \")!@#&	end!@#&	--term.setCursorPos(dialogoffset, 10 + lines + 1)!@#&	--term.write(string.rep(\" \", w - (dialogoffset) * 2))!@#&	wprintOffCenter(msg, offset, w - (dialogoffset+2) * 2, dialogoffset + 2)!@#&end!@#&!@#&function displayInputDialogue(msg, offset, backColour, textColour, prompt)!@#&	if not prompt then prompt = \">\" end!@#&	!@#&	local dialogoffset = 10!@#&	if not backColour or not term.isColour() then backColour = colours.white end!@#&	if not textColour or not term.isColour() then textColour = colours.black end!@#&	setBG(backColour, backColour)!@#&	setTX(textColour, textColour)!@#&!@#&	--We actually print twice- once to get the lines, second time to print proper. Easier this way.!@#&	local lines = wprintOffCenter(msg, offset, w - (dialogoffset+2) * 2, dialogoffset + 2)!@#&	!@#&	--This cluster of statements prints a nice box with the message the NPC has for the player in it.!@#&	for i=offset-1,offset+2+lines do!@#&		term.setCursorPos(dialogoffset, i) !@#&		term.write(\"*\"..string.rep(\" \", w - (dialogoffset) * 2 - 2)..\"*\")!@#&	end!@#&	wprintOffCenter(msg, offset, w - (dialogoffset+2) * 2, dialogoffset + 2)!@#&	!@#&	term.setCursorPos(dialogoffset + 1, offset + 2 + lines)!@#&	term.write(\" \"..prompt)!@#&	!@#&	--We get our input here!@#&	local input = readInput(10)!@#&	!@#&	return input!@#&end!@#&!@#&local function drawSelect(x,y,word,charl,charr)!@#&	term.setCursorPos(x,y)!@#&	term.write(charl)!@#&	term.setCursorPos(x+#word+1,y)!@#&	term.write(charr)!@#&end!@#&!@#&local function initTimers()!@#&	bgnext = math.random(bgfmin, bgfmax)!@#&	shnext = math.random(shfmin, shfmax)!@#&	timerID = os.startTimer(timerLength)!@#&end!@#&!@#&local function drawScores(sel)!@#&	local noff,soff,eoff = 1,25,31!@#&	local ntoff,stoff,etoff = 5,20,28!@#&	local opt = {\"New Game\", \"Quit\"}!@#&	!@#&	setBG(colours.blue, colours.black)!@#&	setTX(colours.white, colours.white)!@#&	term.setCursorPos(scxoff,scyoff)!@#&	term.write(string.rep(\" *\", scw/2))!@#&	for i=1,12 do!@#&		term.setCursorPos(scxoff,scyoff+i)!@#&		if (i%2) == 1 then!@#&			term.write(\"*\"..string.rep(\" \",scw-2)..\" \")!@#&		else!@#&			term.write(\" \"..string.rep(\" \",scw-2)..\"*\")!@#&		end!@#&	end!@#&	term.setCursorPos(scxoff,scyoff + sch - 1)!@#&	term.write(string.rep(\"* \", scw/2))!@#&	term.setCursorPos(scxoff + ntoff,scyoff+1)!@#&	term.write(\"Name\")!@#&	term.setCursorPos(scxoff + stoff,scyoff+1)!@#&	term.write(\"Score\")!@#&	term.setCursorPos(scxoff + etoff,scyoff+1)!@#&	setTX(colours.yellow, colours.white)!@#&	term.write(\"Eggs\")!@#&	!@#&	for i,v in ipairs(hs) do!@#&		term.setCursorPos(scxoff + noff,scyoff+1+i)!@#&		setBG(sncol[v.snake].body, colours.white)!@#&		setTX(sncol[v.snake].scales, colours.black)!@#&		term.write(\"-- \"..v.name..\" -\")!@#&		setTX(sncol[v.snake].eyes, colours.black)!@#&		term.write(\":\")!@#&		term.setCursorPos(scxoff + soff - #tostring(v.score), scyoff+1+i)!@#&		setBG(colours.blue, colours.black)!@#&		setTX(colours.white, colours.white)!@#&		term.write(tostring(v.score))!@#&		term.setCursorPos(scxoff + eoff - #tostring(v.eggs), scyoff+1+i)!@#&		setTX(colours.yellow, colours.white)!@#&		term.write(tostring(v.eggs))!@#&	end!@#&	!@#&	term.setCursorPos(scxoff + scw/4 - #opt[1]/2 - 1, scyoff + sch-2)!@#&	setTX(colours.white, colours.white)!@#&	if sel == 1 then term.write(\"<\"..opt[1]..\">\")!@#&	else term.write(\" \"..opt[1]..\" \") end!@#&	term.setCursorPos(scxoff + (3*scw)/4 - #opt[2]/2 - 1, scyoff + sch-2)!@#&	if sel == 2 then term.write(\"<\"..opt[2]..\">\")!@#&	else term.write(\" \"..opt[2]..\" \") end!@#&end!@#&!@#&local function prepareRandomScene()!@#&	gameOver = false!@#&	currx = math.random(1,#map[1])!@#&	curry = math.random(1,#map)!@#&	addSegments = 12!@#&	energy = 1000!@#&	local s = map[curry][currx].whitespace[math.random(1,#map[curry][currx].whitespace)]!@#&	snake = {}!@#&	snake[1] = { mx = currx, my = curry, x = s.x, y = s.y}!@#&	selcol = sncol[math.random(1,3)]!@#&	if not term.isColour() then selcol = sncol[5] end!@#&	drawMap(currx, curry)!@#&	drawSnake()!@#&end!@#&!@#&local function runSplash()!@#&	inSplash = true!@#&	exiting = false!@#&	flaming = false!@#&	paused = false!@#&	fb = 0!@#&	loadMap(shell.resolve(\".\")..\"/SpeedOS/Applications/GameBox/stuff/\"..levelname)!@#&	prepareRandomScene()!@#&	local sel = 1!@#&	local splashOver = false!@#&	local msg = \"\"!@#&	if not showScores then!@#&		displayConfirmDialogue(\"Snake Maze\", 8, colours.blue, colours.white)!@#&		displayConfirmDialogue(\"By NitrogenFingers\", 10, colours.blue, colours.white)!@#&		msg = \"Press a key to begin\"!@#&	else!@#&		drawScores(sel)!@#&		msg = \"Use arrows to move and enter to select\"!@#&	end!@#&	term.setCursorPos(w/2 - #msg/2,h)!@#&	setTX(colours.white, colours.white)!@#&	setBG(colours.blue, colours.black)!@#&	term.clearLine()!@#&	term.write(msg)!@#&	local splashTimer = os.startTimer(timerLength)!@#&	while not splashOver do!@#&		local klist = {}!@#&		local head = snake[1]!@#&		local insertOK = true!@#&		if lookup(head.x + 1, head.y) ~= 0 then!@#&			for i = 2,#snake do!@#&				v = snake[i]!@#&				if v.x == head.x + 1 and v.y == head.y then!@#&					insertOK = false!@#&					break!@#&				end!@#&			end!@#&			if insertOK then table.insert(klist, { fx = 1, fy = 0 }) end!@#&		end!@#&		insertOK = true!@#&		if lookup(head.x - 1, head.y) ~= 0 then!@#&			for i = 2,#snake do!@#&				v = snake[i]!@#&				if v.x == head.x - 1 and v.y == head.y then!@#&					insertOK = false!@#&					break!@#&				end!@#&			end!@#&			if insertOK then table.insert(klist, { fx = -1, fy = 0 }) end!@#&		end!@#&		insertOK = true!@#&		if lookup(head.x, head.y + 1) ~= 0 then!@#&			for i = 2,#snake do!@#&				v = snake[i]!@#&				if v.x == head.x and v.y == head.y + 1 then!@#&					insertOK = false!@#&					break!@#&				end!@#&			end!@#&			if insertOK then table.insert(klist, { fx = 0, fy = 1 }) end!@#&		end!@#&		insertOK = true!@#&		if lookup(head.x, head.y - 1) ~= 0 then!@#&			for i = 2,#snake do!@#&				v = snake[i]!@#&				if v.x == head.x and v.y == head.y - 1 then!@#&					insertOK = false!@#&					break!@#&				end!@#&			end!@#&			if insertOK then table.insert(klist, { fx = 0, fy = -1 }) end!@#&		end!@#&		if #klist > 0 then!@#&			local rk = klist[math.random(1,#klist)]!@#&			snakefx = rk.fx!@#&			snakefy = rk.fy!@#&		end!@#&		!@#&		local id, key = os.pullEvent()!@#&		if id == \"key\" then!@#&			if not showScores then!@#&				showScores = true!@#&				drawScores(sel)!@#&				local msg = \"Use arrows to move and enter to select\"!@#&				term.setCursorPos(w/2 - #msg/2,h)!@#&				setTX(colours.white, colours.white)!@#&				setBG(colours.blue, colours.black)!@#&				term.clearLine()!@#&				term.write(msg)!@#&			elseif key == keys.enter then!@#&				inSplash = false!@#&				return sel!@#&			elseif key == keys.left and sel == 2 then!@#&				sel = 1!@#&				drawScores(sel)!@#&			elseif key == keys.right and sel == 1 then!@#&				sel = 2!@#&				drawScores(sel)!@#&			end!@#&		elseif id == \"timer\" and key == splashTimer then!@#&			local ox,oy = currx,curry!@#&			updateSnake()!@#&			if ox ~= currx or oy ~= curry then!@#&				if not showScores then!@#&					displayConfirmDialogue(\"Snake Maze\", 8, colours.blue, colours.white)!@#&					displayConfirmDialogue(\"By NitrogenFingers\", 10, colours.blue, colours.white)!@#&				else!@#&					drawScores(sel)!@#&				end!@#&			end!@#&			if gameOver then!@#&				prepareRandomScene()!@#&				if showScores then drawScores(sel) end!@#&			end!@#&			if not showScores then!@#&				displayConfirmDialogue(\"Snake Maze\", 8, colours.blue, colours.white)!@#&				displayConfirmDialogue(\"By NitrogenFingers\", 10, colours.blue, colours.white)!@#&			end!@#&			splashTimer = os.startTimer(timerLength)!@#&		end!@#&	end!@#&end!@#&!@#&local function runMenu()!@#&	gameOver = false!@#&	exiting = false!@#&	paused = false!@#&	flaming = false!@#&	fb = 0!@#&	currx = 1!@#&	curry = 1!@#&	local menw,menh = 26,14!@#&	local xoff,yoff = math.floor(w/2-menw/2), math.floor(h/2-menh/2)!@#&	local sm, mo = 1,1!@#&	local spsel, snsel = 2, 1!@#&	local spop = { \"Slow\", \"Medium\", \"Fast\", \"Fiendish\" }!@#&	local spopl,spopt,spopy = xoff + 2, xoff + 5, yoff + 4!@#&	local snop = { \"Sammy\", \"Clyde\", \"Joss \" }!@#&	local snopl,snopt,snopy = xoff + menw - 2, xoff + menw - 4 - #snop[1], yoff + 3!@#&	local bot = \"Play Snake Maze\"!@#&	local bott,boty = xoff + (menw/2 - #bot/2) + 1, yoff + 13!@#&	!@#&	for i=1,#hs do!@#&		if hs[i].eggs == 16 then!@#&			table.insert(snop, \"Bones\")!@#&			snopy = snopy - 1!@#&			break!@#&		end!@#&	end!@#&	!@#&	if not term.isColour() then!@#&		snop = {}!@#&		spopl = spopl + 5!@#&		spopt = spopt + 5!@#&	end!@#&	!@#&	setBG(colours.grey, colours.black)!@#&	term.clear()!@#&	setBG(colours.blue, colours.black)!@#&	setTX(colours.white, colours.white)!@#&	for i=1,menh do!@#&		term.setCursorPos(xoff,yoff+i)!@#&		term.write(string.rep(\" \", menw))!@#&	end!@#&	term.setCursorPos(spopl + 1, yoff + 2)!@#&	term.write(\"Speed\")!@#&	if term.isColour() then term.write(string.rep(\" \",9)..\"Snake\") end!@#&	for i=1,#spop do!@#&		term.setCursorPos(spopl, spopy + i*2 - 2)!@#&		if i == spsel then!@#&			setBG(colours.lime, colours.black)!@#&			setTX(colours.lime, colours.white)!@#&		else!@#&			setBG(colours.red, colours.black)!@#&			setTX(colours.red, colours.black)!@#&		end!@#&		term.write(\"X\")!@#&		setBG(colours.blue, colours.black)!@#&		setTX(colours.white, colours.white)!@#&		term.write(\"  \"..spop[i])!@#&	end!@#&	for i=1,#snop do!@#&		setBG(colours.blue, colours.black)!@#&		setTX(colours.white, colours.white)!@#&		term.setCursorPos(snopt, snopy + i*2)!@#&		term.write(snop[i]..\"  \")!@#&		if i == snsel then!@#&			setBG(colours.lime, colours.black)!@#&			setTX(colours.lime, colours.white)!@#&		else!@#&			setBG(colours.red, colours.black)!@#&			setTX(colours.red, colours.black)!@#&		end!@#&		term.write(\"X\")!@#&	end!@#&	setBG(colours.blue, colours.black)!@#&	setTX(colours.white, colours.white)!@#&	term.setCursorPos(bott, boty)!@#&	term.write(bot)!@#&	local snstx = xoff + math.random(2,menw - 1)!@#&	local snsty = yoff + menh + 1!@#&	snakefx = 1!@#&	snakefy = 0!@#&	snake = {}!@#&	for i=1,70 do!@#&		snstx = snstx + snakefx!@#&		snsty = snsty + snakefy!@#&		if snstx == xoff + menw and snsty == yoff + menh + 1 then!@#&			snakefx = 0!@#&			snakefy = -1!@#&		elseif snstx == xoff + menw and snsty == yoff then!@#&			snakefx = -1!@#&			snakefy = 0!@#&		elseif snstx == xoff - 1 and snsty == yoff then!@#&			snakefx = 0!@#&			snakefy = 1!@#&		elseif snstx == xoff - 1 and snsty == yoff + menh + 1 then!@#&			snakefx = 1!@#&			snakefy = 0!@#&		end!@#&		table.insert(snake, 1, {mx = 1, my = 1, x = snstx, y = snsty })!@#&	end!@#&	if term.isColour() then!@#&		selcol = sncol[snsel]!@#&	else!@#&		selcol = sncol[5]!@#&	end!@#&	drawSnake()!@#&	timerLength = baseTimer - (spsel-1)*0.05!@#&	local menutimer = os.startTimer(timerLength)!@#&	local inMenu = true!@#&	while inMenu do!@#&		setTX(selcol.body, selcol.body)!@#&		setBG(colours.blue, colours.black)!@#&		if sm == 1 then!@#&			drawSelect(spopt - 1, spopy + mo*2 - 2, spop[mo], \"<\", \">\")!@#&		elseif sm == 2 then!@#&			drawSelect(snopt - 1, snopy + mo*2, snop[mo], \"<\", \">\")!@#&		else!@#&			drawSelect(bott - 1, boty, bot, \"<\", \">\")!@#&		end!@#&		local id,key = os.pullEvent()!@#&		!@#&		if id == \"timer\" and key == menutimer then!@#&			local head = snake[1]!@#&			if head.x == xoff + menw and head.y == yoff + menh + 1 then!@#&				snakefx = 0!@#&				snakefy = -1!@#&			elseif head.x == xoff + menw and head.y == yoff then!@#&				snakefx = -1!@#&				snakefy = 0!@#&			elseif head.x == xoff - 1 and head.y == yoff then!@#&				snakefx = 0!@#&				snakefy = 1!@#&			elseif head.x == xoff - 1 and head.y == yoff + menh + 1 then!@#&				snakefx = 1!@#&				snakefy = 0!@#&			end!@#&			setBG(colours.grey, colours.black)!@#&			term.setCursorPos(snake[#snake].x, snake[#snake].y)!@#&			term.write(\" \")!@#&			table.remove(snake, #snake)!@#&			table.insert(snake, 1, { mx = 1, my = 1, x = head.x + snakefx, y = !@#&					head.y + snakefy} )!@#&			drawSegment(1)!@#&			drawSegment(2)!@#&			menutimer = os.startTimer(timerLength)!@#&		elseif id == \"key\" then!@#&			if key == keys.left and sm == 2 then!@#&				drawSelect(snopt - 1, snopy + mo*2, snop[mo], \" \", \" \")!@#&				sm = 1!@#&				if mo > #spop then mo = #spop end!@#&			elseif key == keys.right and sm == 1 and term.isColour() then!@#&				drawSelect(spopt - 1, spopy + mo*2 - 2, spop[mo], \" \", \" \")!@#&				sm = 2!@#&				if mo > #snop then mo = #snop end!@#&			elseif key == keys.down then!@#&				if sm == 1 then!@#&					drawSelect(spopt - 1, spopy + mo*2 - 2, spop[mo], \" \", \" \")!@#&					if mo == #spop then!@#&						mo = 1!@#&						sm = 3!@#&					else mo = mo + 1 end!@#&				elseif sm == 2 then!@#&					drawSelect(snopt - 1, snopy + mo*2, snop[mo], \" \", \" \")!@#&					if mo == #snop then!@#&						mo = 1!@#&						sm = 3!@#&					else mo = mo + 1 end!@#&				elseif sm == 3 then!@#&					drawSelect(bott - 1, boty, bot, \" \", \" \")!@#&					sm = 1!@#&					mo = 1!@#&				end!@#&			elseif key == keys.up then!@#&				if sm == 1 then!@#&					drawSelect(spopt - 1, spopy + mo*2 - 2, spop[mo], \" \", \" \")!@#&					if mo == 1 then!@#&						mo = 1!@#&						sm = 3!@#&					else mo = mo - 1 end!@#&				elseif sm == 2 then!@#&					drawSelect(snopt - 1, snopy + mo*2, snop[mo], \" \", \" \")!@#&					if mo == 1 then!@#&						mo = 1!@#&						sm = 3!@#&					else mo = mo - 1 end!@#&				elseif sm == 3 then!@#&					drawSelect(bott - 1, boty, bot, \" \", \" \")!@#&					sm = 1!@#&					mo = #spop!@#&				end!@#&			elseif key == keys.enter then!@#&				if sm == 1 then!@#&					term.setCursorPos(spopl, spopy + spsel*2 - 2)!@#&					setBG(colours.red, colours.black)!@#&					setTX(colours.red, colours.black)!@#&					term.write(\"X\")!@#&					spsel = mo!@#&					timerLength = baseTimer - (spsel-1)*0.05!@#&					term.setCursorPos(spopl, spopy + spsel*2 - 2)!@#&					setBG(colours.lime, colours.black)!@#&					setTX(colours.lime, colours.white)!@#&					term.write(\"X\")!@#&				elseif sm == 2 then!@#&					term.setCursorPos(snopl, snopy + snsel*2)!@#&					setBG(colours.red, colours.black)!@#&					setTX(colours.red, colours.black)!@#&					term.write(\"X\")!@#&					snsel = mo!@#&					selcol = sncol[snsel]!@#&					term.setCursorPos(snopl, snopy + snsel*2)!@#&					setBG(colours.lime, colours.black)!@#&					setTX(colours.lime, colours.white)!@#&					term.write(\"X\")!@#&					drawSnake()!@#&				elseif sm == 3 then!@#&					inMenu = false!@#&				end!@#&			end!@#&		end!@#&	end!@#&end!@#&!@#&local function runGame()!@#&	loadMap(shell.resolve(\".\")..\"/SpeedOS/Applications/GameBox/stuff/\"..levelname)!@#&	initSnake()!@#&	initTimers()!@#&	drawFooter()!@#&	while not gameOver do!@#&		local id,key = os.pullEvent()!@#&		if id == 'timer' and key == timerID and not paused then!@#&			drawFooter()!@#&			bgnext = bgnext - 1!@#&			if bgnext <= 0 then!@#&				spawnBug()!@#&			end!@#&			shnext = shnext - 1!@#&			if shnext <= 0 then!@#&				spawnShroom()!@#&			end!@#&			if flaming then!@#&				if map[fbcy] and map[fbcy][fbcx] then!@#&					map[fbcy][fbcx][fby][fbx] = map[fbcy][fbcx][fby][fbx] + 1!@#&					if map[fbcy][fbcx][fby][fbx] == 4 then!@#&						map[fbcy][fbcx][fby][fbx] = nil!@#&						updateFire()!@#&					else!@#&						updateMap(fbcx,fbcy,fbx,fby)!@#&					end!@#&				end!@#&				fb = fb - 1!@#&				if fb == 0 then !@#&					flaming = false!@#&					drawMap()!@#&				end!@#&			end!@#&			updateSnake()!@#&			timerID = os.startTimer(timerLength)!@#&		elseif id == 'key' and #snake > 1 then!@#&			local xdiff = snake[2].x - snake[1].x!@#&			local ydiff = snake[2].y - snake[1].y!@#&			if not paused then!@#&				if key == keys.left and xdiff ~= -1 and !@#&						not flaming and not exiting then!@#&					snakefx = -1!@#&					snakefy = 0!@#&					drawSegment(1)!@#&				elseif key == keys.right and xdiff ~= 1 and not flaming then!@#&					snakefx = 1!@#&					snakefy = 0!@#&					drawSegment(1)!@#&				elseif key == keys.up and ydiff ~= -1 and not flaming then!@#&					snakefx = 0!@#&					snakefy = -1!@#&					drawSegment(1)!@#&				elseif key == keys.down and ydiff ~= 1 and not flaming then!@#&					snakefx = 0!@#&					snakefy = 1!@#&					drawSegment(1)!@#&				elseif key == keys.space and fb > 0 and not flaming then!@#&					flaming = true!@#&					updateFire()!@#&				elseif key ~= keys.left and key ~= keys.right and key ~= keys.up!@#&						and key ~= keys.down and key ~= keys.space then!@#&					displayConfirmDialogue(\"Paused\", 8, colours.blue, colours.white)!@#&					displayConfirmDialogue(\"Press \\'Q\\' to quit, any other key to continue\", 10, colours.blue, colours.white)!@#&					paused = true!@#&				end				!@#&			elseif key == keys.q then!@#&				gameOver = true!@#&				os.pullEvent()!@#&			else!@#&				drawMap(currx,curry)!@#&				timerID = os.startTimer(timerLength)!@#&				paused = false!@#&			end!@#&		end!@#&	end!@#&	!@#&	if not paused then		!@#&		term.setCursorPos(3,h)!@#&		setBG(colours.blue, colours.white)!@#&		setTX(colours.white, colours.black)!@#&		term.write(\"Game Over!    \")!@#&		os.pullEvent(\"key\")!@#&		!@#&		--high scores here!@#&		if #hs < 10 or score > hs[10].score then!@#&			addHighScore()!@#&		end!@#&	else!@#&		paused = false!@#&	end!@#&end!@#&!@#&function split(str, pattern)!@#&  local t = { }!@#&  local fpat = \"(.-)\" .. pattern!@#&  local last_end = 1!@#&  local s, e, cap = str:find(fpat, 1)!@#&  while s do!@#&    if s ~= 1 or cap ~= \"\" then!@#&      table.insert(t,cap)!@#&    end!@#&    last_end = e+1!@#&    s, e, cap = str:find(fpat, last_end)!@#&  end!@#&  if last_end <= #str then!@#&    cap = str:sub(last_end)!@#&    table.insert(t, cap)!@#&  end!@#&  return t!@#&end!@#&!@#&local tArgs = {...}!@#&if tArgs[1] == \"-o\" then!@#&	scenew = 50!@#&	levelname = \"levelo.nfp\"!@#&end!@#&!@#&loadHS()!@#&--So this is lazy... but whatever!@#&local v = runSplash()!@#&while v == 1 do!@#&	runMenu()!@#&	runGame()!@#&	v = runSplash()!@#&end!@#&setBG(colours.black, colours.black)!@#&shell.run(\"clear\")",["escape"]="--[[!@#&Escape Version 1.1.6!@#&made by cptdeath58!@#&!@#&You have the right to edit this code or!@#&input it in your own as long as I get credit!@#&!@#&Just don't judge me of how unorganized and a mess!@#&this code is... !@#&--]]!@#&--Variables!@#&local w,h = term.getSize()!@#&local bot = colours.red!@#&local player = colours.white!@#&local ox = math.random( 1,51 )!@#&local oy = math.random( 1,18 )!@#&local bx = math.random( 1,51 )!@#&local by = math.random( 1,18 )!@#&local limit = 25!@#&local BML = 1!@#&local tLimit = 5!@#&local tA = 0!@#&local e = 0!@#&local md = 0!@#&local death = false!@#&local ESC = \"Escape\"!@#&local nm = 0 !@#&local suicide = false!@#&--Functions!@#&!@#&--draw Menu!@#&function drawMenu()!@#& term.clear()!@#& term.setTextColour( player )!@#& term.setBackgroundColour( colours.blue )!@#& local mp = 1!@#& term.setCursorPos(1,1)!@#& repeat!@#&  term.clearLine()!@#&  term.setCursorPos(1,mp)!@#&  mp = mp + 1!@#& until mp > h + 1!@#& term.setCursorPos(w / 2 - 4,1)!@#& term.write( \"[Escape]\" )!@#& term.setCursorPos(1,2)!@#& local r = 0!@#& repeat !@#&  term.write( \"=\" )!@#&  r = r + 1!@#& until r == w!@#& term.setCursorPos( w / 3, h / 3 )!@#& term.write( \"O\" )!@#& term.setCursorPos( w / 3 + 5, h / 3 )!@#& term.setTextColour( bot )!@#& term.write( \"<\" )!@#& term.setTextColour( player )!@#&end!@#&!@#&function drawButtons()!@#& term.setCursorPos( w / 4 - 3, h / 2 )!@#& term.write( \"[S]tart\" )!@#& term.setCursorPos( w / 2 - 3, h / 2 )!@#& term.write( \"[S]tats\" )!@#& term.setCursorPos( w / 4 * 3 - 3, h / 2 )!@#& term.write( \"[Q]uit\" )!@#& term.setCursorPos( w / 2 - 3, h / 2 + 2 )!@#& term.write( \"[H]elp\" )!@#&end!@#&!@#&function drawPlayer()!@#& local sx = ox!@#& local sy = oy!@#& term.setCursorPos( sx,sy )!@#& term.setTextColour( player )!@#& term.write( \"O\" )!@#&end!@#&!@#&function goUp()!@#& term.setCursorPos( ox,oy )!@#& term.write( \" \" )!@#& term.setCursorPos( ox,oy - 1 )!@#& term.write( \"^\" )!@#& oy = oy - 1!@#&end!@#&!@#&function goDown()!@#& term.setCursorPos( ox,oy )!@#& term.write( \" \" )!@#& term.setCursorPos( ox,oy + 1 )!@#& term.write( \"v\" )!@#& oy = oy + 1!@#&end!@#&!@#&function goLeft()!@#& term.setCursorPos( ox,oy )!@#& term.write( \" \" )!@#& term.setCursorPos( ox - 1,oy )!@#& term.write( \"<\" )!@#& ox = ox - 1!@#&end!@#&!@#&function goRight()!@#& term.setCursorPos( ox,oy )!@#& term.write( \" \" )!@#& term.setCursorPos( ox + 1,oy )!@#& term.write( \">\" )!@#& ox = ox + 1!@#&end!@#&!@#&function tL()!@#& term.setCursorPos(1,h)!@#& term.write( \"Teleports: \"..tA )!@#& e = e + 1!@#& if e == tLimit then!@#&  tA = tA + 1!@#&  tLimit = tLimit + 5!@#& end!@#&end!@#&!@#&function getMove()!@#& term.setTextColour( player )!@#& local tEvent,Move,px,py = os.pullEvent()!@#& if tA > 0 then!@#&  if tEvent == \"mouse_click\" then!@#&   term.setCursorPos( ox,oy )!@#&   term.write( \" \" )!@#&   term.setCursorPos( px,py )!@#&   term.write( \"O\" )!@#&   ox = px!@#&   oy = py!@#&   tA = tA - 1!@#&  elseif tEvent == \"key\" and Move == keys.q then!@#&   death = true!@#&   suicide = true!@#&  end!@#& end!@#& if tEvent == \"key\" then!@#&  if Move == keys.w then!@#&   goUp()!@#&  elseif Move == keys.s then!@#&   goDown()!@#&  elseif Move == keys.a then!@#&   goLeft()!@#&  elseif Move == keys.d then!@#&   goRight()!@#&  else!@#&   getMove()!@#&   mod = mod - 1!@#&  end!@#& else!@#&  getMove()!@#&  mod = mod - 1!@#& end!@#&  !@#&  checkEdge()!@#&  term.setCursorPos( w - 5, 1 )!@#&  pp = ox..\",\"..oy!@#&  term.write( \"     \" )!@#&  term.setCursorPos( w - 5, 1 )!@#&  term.write( pp )!@#&  listMoves()!@#&end!@#&!@#&function drawBot()!@#& term.setCursorPos( bx,by )!@#& term.setTextColour( bot )!@#& term.write( \"^\" )!@#&end!@#&!@#&function botMove()!@#& term.setTextColour( bot )!@#& local ex,ey = term.getCursorPos()!@#& if ox > bx then!@#&  term.setCursorPos( bx,by )!@#&  term.write( \" \" )!@#&  term.setCursorPos( bx + 1,by )!@#&  term.write( \">\" )!@#&  bx = bx + 1!@#& elseif ox < bx then !@#&  term.setCursorPos( bx,by )!@#&  term.write( \" \" )!@#&  term.setCursorPos( bx - 1,by )!@#&  term.write( \"<\" )!@#&  bx = bx - 1!@#& elseif oy > by then!@#&  term.setCursorPos( bx,by )!@#&  term.write( \" \" )!@#&  term.setCursorPos( bx,by + 1 )!@#&  term.write( \"v\" )!@#&  by = by + 1!@#& elseif oy < by then!@#&  term.setCursorPos( bx,by )!@#&  term.write( \" \" )!@#&  term.setCursorPos( bx,by - 1 )!@#&  term.write( \"^\" )!@#&  by = by - 1!@#& end!@#& !@#& term.setCursorPos( w - 5,h )!@#& bp = bx..\",\"..by!@#& term.write( \"     \" )!@#& term.setCursorPos( w - 5,h )!@#& term.write( bp )!@#&end!@#&!@#&function checkDeath()!@#& nm = nm + 1!@#& if suicide == true then!@#&  endScore = nm * 5 / 3!@#&  suicide = false!@#& elseif suicide == false then!@#&  endScore = nm * 5!@#& else!@#&  endScore = nm * 5!@#& end!@#&  !@#& if death == true then!@#&  death = false!@#&  term.setCursorPos( w / 2, 1 )!@#&  term.write( \"            \" )!@#&  term.setCursorPos(1,3)!@#&  term.setTextColour( bot )!@#&  term.write( \"You Have Lost. Score: \"..endScore )!@#&  sleep(1)!@#&  term.setCursorPos(1,4)!@#&  term.write( \"Better Luck Next Time\" )!@#&  sleep(1)!@#&  term.setCursorPos(1,5)!@#&  term.write( \"Press any key to continue\" )!@#&  statCheck2 = fs.open( \"ESC/Stats\", \"r\" )!@#&  if statCheck2 then!@#&   mname = statCheck2.readLine(1)!@#&   mmoves = statCheck2.readLine(2)!@#&   mhighscore = statCheck2.readLine(3)!@#&  end!@#&  !@#&  mname = mname or \"Guest\"!@#&  mmoves = mmoves or 0!@#&  mhighscore = mhighscore or 0!@#&  !@#&  local phighscore = tonumber( mhighscore )!@#&  statChange = fs.open( \"ESC/Stats\", \"w\" )!@#&  if statChange then!@#&   nmoves = mmoves + nm!@#&   statChange.writeLine( mname )!@#&   statChange.writeLine( nmoves )!@#&   if endScore >= phighscore then!@#&    statChange.write( endScore )!@#&   else!@#&    statChange.write( phighscore )!@#&   end!@#&   !@#&   --statCheck2.close()!@#&   statChange.close()!@#&  end!@#& !@#&  reset()!@#&  Boot()!@#& end!@#&end!@#&!@#&function checkEdge()!@#& if ox > 51 then!@#&  term.setCursorPos( ox,oy )!@#&  term.write( \" \" )!@#&  term.setCursorPos( ox - 1,oy )!@#&  term.write( \">\" )!@#&  ox = 51!@#& elseif ox < 1 then!@#&  term.setCursorPos( ox,oy )!@#&  term.write( \" \" )!@#&  term.setCursorPos( ox + 1,oy )!@#&  term.write( \"<\" )!@#&  ox = 1!@#& end!@#& !@#& if oy > 18 then!@#&  term.setCursorPos( ox,oy )!@#&  term.write( \" \" )!@#&  term.setCursorPos( ox,oy - 1 )!@#&  term.write( \"v\" )!@#&  oy = 18!@#& elseif oy < 2 then!@#&  term.setCursorPos( ox,oy )!@#&  term.write( \" \" )!@#&  term.setCursorPos( ox,oy + 1 )!@#&  term.write( \"^\" )!@#&  oy = 2!@#& end!@#&end!@#&!@#&function ScoreM()!@#& local Score = mod * 5!@#& !@#& !@#& if Score > limit then!@#&  BML = BML + 1!@#&  limit = limit + 25!@#& end!@#& !@#& term.setCursorPos(w / 2,1)!@#& term.write( \"Score: \"..Score )!@#& !@#& local BM = 0!@#& !@#& repeat!@#&  sleep(0.1)!@#&  botMove()!@#&  BM = BM + 1!@#& until BM == BML!@#& !@#& ep = ox..\",\"..oy!@#& if ep == bp then!@#&  death = true!@#& end!@#&end!@#&!@#&function reset()!@#& local ox = math.random( 1,51 )!@#& local oy = math.random( 1,19 )!@#& local by = math.random( 1,19 )!@#& local bx = math.random( 1,51 )!@#& local tA = 0!@#& local e = 0!@#& local m = 0!@#& local limit = 25!@#& local BML = 1!@#& local tLimit = 5 !@#& local Score = 0!@#& local endScore = 0!@#& bp = bx..\",\"..by!@#& pp = ox..\",\"..oy!@#& ep = ox..\",\"..oy!@#& redo = fs.open( \"ESC/Reroute\", \"w\" )!@#& if redo then!@#&  redo.writeLine( \"sleep(1)\" )!@#&  redo.writeLine( \"os.pullEvent()\" )!@#&  redo.writeLine( \"term.clear()\" )!@#&  redo.writeLine( \"sleep(1)\" )!@#&  redo.writeLine( \"shell.run( \"..ESC..\" )\" )!@#&  redo.close()!@#& end!@#& !@#& --shell.run( \"ESC/Reroute\" )!@#& os.reboot()!@#&end!@#&!@#&function listMoves()!@#& mod = mod + 1!@#& term.setCursorPos( 1,1 )!@#& term.write( mod..\" Moves\" )!@#&end!@#&!@#&function doBotMoves()!@#& local BM = 0!@#& repeat!@#&  botMove()!@#&  sleep(1)!@#&  BM = BM + 1!@#& until BM == BML!@#&end!@#&!@#&function start()!@#& term.clear()!@#& drawPlayer()!@#& drawBot()!@#& mod = 0!@#& local BM = 0!@#& while true do!@#&  tL()!@#&  getMove()!@#&  sleep(1)!@#&  ScoreM()!@#&  checkDeath()!@#& end!@#&end!@#&!@#&function secret()!@#& term.setCursorPos( w / 3,h / 3 )!@#& term.write( \"+\" )!@#& sleep(0.5)!@#& term.setCursorPos( 17,6 )!@#& term.write( \"*\" )!@#& sleep(0.5)!@#& term.setCursorPos( 17,6 )!@#& term.write( \" \" )!@#& sleep(0.5)!@#& term.setCursorPos( 1,h / 4 * 3 )!@#& term.write( \"*\" )!@#& sleep(0.5)!@#& term.setCursorPos( 1,h / 4 * 3 )!@#& term.write( \"+\" )!@#& sleep(0.5)!@#& term.setCursorPos( 1,h / 4 * 3 )!@#& term.write( \"O\" )!@#& sleep(0.5)!@#& term.setCursorPos( w / 2 - 14.5,h - 1 )!@#& term.setTextColour( colours.yellow )!@#& textutils.slowPrint( \"[[Achievement] Escape Artist]\" )!@#& term.setTextColour( player )!@#&end!@#&  !@#&function stats()!@#& statCheck = fs.open( \"ESC/Stats\", \"r\" )!@#& if statCheck then!@#&  ename = statCheck.readLine(1)!@#&  emoves = statCheck.readLine(2)!@#&  ehighscore = statCheck.readLine(3)!@#& end!@#&!@#& if not fs.exists( \"ESC/Stats\" ) or ename == nil or ehighscore == nil or emoves == nil then!@#&  statMake = fs.open( \"ESC/Stats\", \"w\" )!@#&  if statMake then!@#&   statMake.writeLine( \"None\" )!@#&   statMake.writeLine( \"0\" )!@#&   statMake.writeLine( \"0\" )!@#&   statMake.close()!@#&  end!@#& end!@#& !@#& statCheck = fs.open( \"ESC/Stats\", \"r\" )!@#& if statCheck then!@#&  ename = statCheck.readLine(1)!@#&  emoves = statCheck.readLine(2)!@#&  ehighscore = statCheck.readLine(3)!@#&  statCheck.close()!@#& end!@#& !@#& term.clear()!@#& term.setCursorPos(1,1)!@#& if ename == \"None\" then!@#&  term.write( \"Please Input Name: \" )!@#&  local input = read()!@#&  statMake = fs.open( \"ESC/Stats\", \"w\" )!@#&  statMake.writeLine( input )!@#&  statMake.writeLine( \"0\" )!@#&  statMake.writeLine( \"0\" )!@#&  ename = input!@#&  emoves = \"0\"!@#&  ehighscore = \"0\"!@#&  statMake.close()!@#& end!@#& term.setCursorPos(51 - 12,1 )!@#& term.write( \"[M]ain Menu\" )!@#& term.setCursorPos(1,2)!@#& term.write( \"[N]ame: \"..ename )!@#& term.setCursorPos( 1,4 )!@#& term.write( \"Moves made in Career: \"..emoves )!@#& term.setCursorPos( 1,6 )!@#& term.write( \"Highest Score Made: \"..ehighscore )!@#& while true do!@#&  local sEvent,Click,mx,my = os.pullEvent()!@#&  if sEvent == \"mouse_click\" then!@#&   mc = mx..\",\"..my!@#&  end!@#&  !@#&  if sEvent == \"mouse_click\" and mc == \"40,1\" then!@#&   Boot()!@#&  elseif sEvent == \"mouse_click\" and mc == \"2,2\" then!@#&   term.setCursorPos( 9,2 )!@#&   local mxz = 9!@#&   repeat!@#&    term.write( \" \" )!@#&    mxz = mxz + 1!@#&   until mxz == w!@#&   term.setCursorPos( 9,2 )!@#&   local newName = read() !@#&   newStat = fs.open( \"ESC/Stats\", \"w\" )!@#&   if newStat then!@#&    newStat.writeLine( newName )!@#&    newStat.writeLine( emoves )!@#&    newStat.writeLine( ehighscore )!@#&    newStat.close()!@#&   end!@#&   term.setCursorPos( 1,2 )!@#&   term.write( \"[N]ame: \"..newName )!@#&  elseif sEvent == \"key\" and Click == keys.m then!@#&   Boot()!@#&  end!@#& end!@#&end!@#&!@#&function None()!@#& term.clear()!@#& term.setCursorPos(1,1)!@#& term.write( \"Sorry, But this function is not available.\" )!@#& term.setCursorPos(1,2)!@#& term.write( \"Press any key to Continue\" )!@#& os.pullEvent()!@#& Boot()!@#&end!@#&!@#&--function Setting()!@#&!@#&function getInput()!@#& local mEvent,sButton,px,py = os.pullEvent()!@#& if mEvent == \"mouse_click\" then!@#&  xy = px..\",\"..py!@#& end!@#& !@#& if mEvent == \"mouse_click\" and xy == \"10,9\" then!@#&  start()!@#& elseif mEvent == \"mouse_click\" and xy == \"23,9\" then!@#&  stats()!@#& elseif mEvent == \"mouse_click\" and xy == \"36,9\" then!@#&  quit()!@#& elseif mEvent == \"mouse_click\" and xy == \"23,11\" then!@#&  help()!@#& elseif mEvent == \"mouse_click\" and xy == \"17,6\" then!@#&  secret()!@#& elseif mEvent == \"key\" and sButton == keys.s then!@#&  term.setCursorPos( w / 4,3 )!@#&  local lol = math.random( 1,100 )!@#&  local lol = math.random( 1,6 )!@#&  if lol == \"1\" or \"4\" then!@#&   term.write( \"Dude, there are 2 S's... :3\" )!@#&   sleep(1)!@#&   term.clearLine()!@#&  elseif lol == \"2\" or \"5\" then!@#&   term.write( \"You called in the creeper army\" )!@#&   sleep(1)!@#&   term.clearLine()!@#&  elseif lol == \"3\" or \"6\" then!@#&   term.write( \"Sss... Aw man...\" )!@#&   sleep(1)!@#&   term.clearLine()!@#&  end!@#& end!@#&end!@#&!@#&function quit()!@#& while true do!@#&  term.setBackgroundColour( colours.black )!@#&  term.clear()!@#&  term.setCursorPos(1,1)!@#&  term.write( \"Thanks for Playing :3\" )!@#&  term.setCursorPos(1,2)!@#&  sleep(1)!@#&  os.reboot()!@#& end!@#&end!@#&!@#&function help()!@#& term.clear()!@#& term.setCursorPos(1,1)!@#& textutils.slowPrint( \"Welcome to the game, Escape by cptdeath58.\" )!@#& sleep(1)!@#& term.setCursorPos(1,2)!@#& textutils.slowPrint( \"This game utilizes your ability to reserve tools,\" )!@#& term.setCursorPos(1,3)!@#& textutils.slowPrint( \"The more resourceful you are, the longer you live.\" )!@#& sleep(1)!@#& term.setCursorPos(1,5)!@#& textutils.slowPrint( \"Your objective is to stay away from this guy:\" )!@#& term.setTextColour( bot )!@#& term.setCursorPos( w - 5, 5 )!@#& textutils.slowPrint( \"<,^,>\" )!@#& term.setCursorPos(1,6)!@#& sleep(1)!@#& term.setTextColour( player )!@#& textutils.slowPrint( \"The longer you survive, the more points you get\" )!@#& term.setCursorPos(1,7)!@#& sleep(1)!@#& textutils.slowPrint( \"After every 5 Moves you receive a teleport,\" )!@#& term.setCursorPos(1,8)!@#& textutils.slowPrint( \"To use teleport, Just click on a location\" )!@#& term.setCursorPos(1,9)!@#& textutils.slowPrint( \"Remember, you only get a limited amount.\" )!@#& term.setCursorPos(1,10)!@#& sleep(1)!@#& textutils.slowPrint( \"For every time you get a teleport,\" )!@#& term.setCursorPos(1,11)!@#& textutils.slowPrint( \"the bot gets a boost so you must be resourceful.\" )!@#& term.setCursorPos(1,12)!@#& textutils.slowPrint( \"Just press any key to continue as this concludes    the help page, Enjoy :3\" )!@#& os.pullEvent()!@#& Boot()!@#&end!@#&!@#&function Boot()!@#& drawMenu()!@#& drawButtons()!@#& if fs.exists( \"ESC/Reroute\" ) then!@#&  fs.delete( \"ESC/Reroute\" )!@#& end!@#& !@#& while true do!@#&  getInput()!@#& end!@#&end!@#&!@#&Boot()",["page1"]="555555555555555555555555555555555555555555555555555!@#&555555555555555555555555555555555555555555555555555!@#&555555555555555555555555555555555555555555555555555!@#&555555555555555555555555555555555555555555555555555!@#&555555555555555555555555555555555555555555555555555!@#&555555555555555555555555555555555555555555555555555!@#&55555555fffff5fff5ffff5fffff55555555555555555555555!@#&5555555555f555f555f555555f5555555555555555555555555!@#&5555555555f555ff55ffff555f5555555555555555555555555!@#&5555555555f555f555555f555f5555555555555555555555555!@#&5555555555f555fff5ffff555f5555555555555555555555555!@#&555555555555555555555555555555555555555555555555555!@#&555555555555555555555555555555555555555555555555555!@#&555555555555555555555555555555555555555555555555555!@#&555555555555555555555555555555555555555555555555555!@#&555555555555555555555555555555555555555555555555555!@#&555555555555555555555555555555555555555555555555555!@#&555555555555555555555555555555555555555555555555555!@#&555555555555555555555555555555555555555555555555555",["mineWorldMap"]="51!@#&30!@#&888888888887777777778888888888888888888888888888888!@#&888888888887777777777888888888888888888888888888888!@#&888888888888777777777788888888888888888888888888888!@#&888888888888877777777778888888888888888888888888888!@#&888888888888877777777777888888888888888888888888888!@#&888888888888887777777777788888888888888888888888888!@#&888888888888888877777777788888888888888888888888888!@#&888888888888888877777777778888888888888888888888888!@#&888888888888888887777777777788888888888888888888888!@#&888888888888888888877777777778888888888888888888888!@#&888888888888888888887777777778888888888888888888888!@#&288888888888888888887777777788888888888888888888888!@#&222228888888888888877777777788888888888888888888888!@#&222222222228888888644444444468888888888888888888888!@#&222222222222222222644444444468888888888888888888888!@#&222222222222222222644444444468888888888888888888888!@#&222222222222222222644444444462222888888888888888888!@#&882222222222222222644444444462222228888888888888888!@#&888882222222222222644444444462222222222222222888888!@#&888888888222222222644444444462222222222222222222222!@#&888888888888822222644444444462222222222222222222222!@#&888888888888888888644444444462222222222222222222222!@#&888888888888888888644444444468888822222222222222222!@#&888888888888888888887777777788888888888882222222222!@#&888888888888888888877777777788888888888888888822222!@#&888888888888888888877777777777888888888888888888882!@#&888888888888888888887777777778888888888888888888888!@#&888888888888888888888777777777888888888888888888888!@#&888888888888888888888887777777788888888888888888888!@#&888888888888888888888887777777777888888888888888888",["cardBack"]="0000000!@#&0eeeee0!@#&0e0e0e0!@#&0ee0ee0!@#&0e0e0e0!@#&0eeeee0!@#&0000000",["mineworld"]="main = 72!@#&username = \"roosterhat\"!@#&map = {}!@#&characters = {}!@#&chat = {}!@#&playerx=1!@#&playery=1!@#&characters[0] = {\"roosterhat\",0,0,colors.red}!@#&characters[1] = {\"jar3ld\",40,20,colors.lime}!@#&colorTable = {colors.red,colors.blue,colors.orange,colors.lightGray,colors.lime,colors.gray,colors.brown,colors.green,colors.black}!@#&!@#&function openPort()!@#&	for n,m in ipairs(rs.getSides()) do !@#&		if peripheral.isPresent(m) and peripheral.getType(m)==\"modem\" then !@#&			rednet.open(m)!@#&		end !@#&	end!@#&end!@#&!@#&function retreiveMap()!@#&	if(fs.exists(\"mineWorldMap\"))then!@#&		local open = fs.open(\"mineWorldMap\",\"r\")!@#&		mapWidth = tonumber(open.readLine())!@#&		mapHeight = tonumber(open.readLine())!@#&		for y=0,mapHeight-1,1 do!@#&			data = open.readLine()!@#&			local count=0!@#&			map[y] = {}!@#&			for token in data:gmatch\".\" do!@#&			   map[y][count]=tonumber(token)!@#&			   count = count+1!@#&			end!@#&		end!@#&		open.close()!@#&	else!@#&		for y=0,50-1,1 do!@#&			map[y] = {}!@#&			for x=0,50-1,1 do!@#&				map[y][x] = 7!@#&			end	!@#&		end!@#&		mapWidth = 50!@#&		mapHeight = 50!@#&	end!@#&end!@#&!@#&function drawMap()!@#&	term.setBackgroundColor(colors.black)!@#&	shell.run(\"clear\")!@#&	for y=0,mapHeight-1,1 do!@#&		for x=0,mapWidth-1,1 do!@#&			term.setBackgroundColor(colorTable[map[y][x]])!@#&			term.setCursorPos((x+26)-playerx,(y+9)-playery)!@#&			write(\" \")!@#&		end!@#&	end!@#&end!@#&!@#&function drawPlayerName(name,x,y,ax,ay)!@#&	local count = 0!@#&	if((ax)-(#name/2)-1<52 and (ax)-(#name/2)-1>0)then!@#&		if(ay<21 and ay>1)then!@#&			for c in name:gmatch\".\" do!@#&		    	term.setCursorPos(ax+count-(#name/2),ay-1)!@#&		    	if(map[y-2]~=nill) then!@#&		    		if(map[y-2][(x+count)-(#name/2)-1]~=nill)then!@#&		    			term.setBackgroundColor(colorTable[map[y-2][(x+count)-(#name/2)-1]])!@#&		    		else!@#&		    			term.setBackgroundColor(colors.black)!@#&		    		end	!@#&		    	else!@#&		    		term.setBackgroundColor(colors.black)!@#&		    	end!@#&		    	if((ax+count)-(#name/2)<52 and (ax+count)-(#name/2)>0)then!@#&		    		write(c)!@#&		    	end!@#&		    	count = count+1!@#&			end !@#&		end!@#&	end!@#&end!@#&!@#&function drawCharacters()!@#&	for x=0,#characters,1 do!@#&		if(characters[x][1]==\"roosterhat\")then!@#&			drawPlayerName(characters[x][1],characters[x][2],characters[x][3],25,8)!@#&			term.setCursorPos(25,8)!@#&		else!@#&			drawPlayerName(characters[x][1],characters[x][2],characters[x][3],characters[x][2]-playerx+25,characters[x][3]-playery+8)!@#&			term.setCursorPos(characters[x][2]-playerx+25,characters[x][3]-playery+8)!@#&		end!@#&		!@#&		term.setBackgroundColor(characters[x][4])!@#&		write(\" \")!@#&	end!@#&end!@#&!@#&function wordsWithBackground(word,x,y)!@#&	for c in word:gmatch\".\" do!@#&    	term.setCursorPos(x,y)!@#&    	if(map[y-2]~=nill) then!@#&    		if(map[y-2][x]~=nill)then!@#&    			term.setBackgroundColor(colorTable[map[y-2][x]])!@#&    		else!@#&    			term.setBackgroundColor(colors.black)!@#&    		end	!@#&    	else!@#&    		term.setBackgroundColor(colors.black)!@#&    	end!@#&    	write(c)!@#&    	--count = count+1!@#&	end !@#&end!@#&!@#&function drawGame()!@#&	drawMap()!@#&	drawCharacters()!@#&	term.setCursorPos(1,1)!@#&	term.setBackgroundColor(colors.black)!@#&	wordsWithBackground(\"(\"..playerx..\",\"..playery..\")\",1,1)!@#&end!@#&!@#&function startChatMessage()!@#&	term.setCursorPos(1,18)!@#&	write(\":> \")!@#&	local message = io.read()!@#&	if(message~=nill)then!@#&		contactServer(\"Message//\"..username..\": \"..message)		!@#&	end!@#&end!@#&!@#&function contactServer(message)!@#&	local count=1!@#&	while true do!@#&		--rednet.send(main,message)!@#&		local id,msg = rednet.receive(.1)!@#&		result = msg!@#&		if(msg==\"true\")then!@#&			break!@#&		elseif(msg~=nill)then!@#&			term.setCursorPos(1,19)!@#&			term.setTextColor(colors.red)!@#&			write(msg)!@#&		end!@#&		if(count==5)then!@#&			term.setCursorPos(1,19)!@#&			term.setTextColor(colors.red)!@#&			write(\"Unable to reach server\")!@#&			break!@#&		else!@#&			count = count+1!@#&		end!@#&	end!@#&end!@#&!@#&function loginScreen()!@#&	function getText(xplace,yplace,mask)!@#&	local x,y = term.getSize()!@#&	local input = \"\"!@#&	term.setCursorPos(xplace-3,yplace)  !@#&	print(\"|                         |\")!@#&	term.setCursorPos(xplace+1,yplace)!@#&	term.setCursorBlink(true)!@#&	while true do!@#&		local derp,herp = term.getCursorPos()!@#&		term.setCursorPos(derp-1,herp)!@#&		local event, p,pram2,pram2 = getEvent()!@#&		if event == \"char\" then!@#&			if(string.len(input)==21)then!@#&			else!@#&				input = input..p!@#&			end!@#&		elseif event == \"key\" then!@#&			if p == keys.enter then!@#&				term.setCursorBlink(false)!@#&				return input!@#&			elseif p == keys.backspace then!@#&				input = input:sub(1, #input - 1)!@#&			end!@#&		end!@#&		term.setCursorPos(xplace,yplace)!@#&		write( ( mask and string.rep(mask, #input) or input )..\" \")!@#&	end!@#&	error( \"should never get here\" )!@#&end!@#&!@#&end!@#&!@#&function main()!@#&	while true do!@#&		drawGame()!@#&		local Event, key, pram1, pram2 = os.pullEvent()!@#&		if(Event==\"key\")then!@#&			if (key==200) then!@#&				contactServer(\"Move//down\")!@#&			elseif (key==208) then!@#&				contactServer(\"Move//up\")!@#&			elseif(key==205)then!@#&				contactServer(\"Move//right\")!@#&			elseif(key==203)then!@#&				contactServer(\"Move//left\")!@#&			end!@#&			if(key==20)then!@#&				startChatMessage()	!@#&			end!@#&			!@#&		elseif(Event==\"rednet_message\")then!@#&			local count = 0!@#&			local prams = {}!@#&			for token in string.gmatch(pram1, \"[^%//]+\") do!@#&			   prams[count]=token!@#&			   count = count+1!@#&			end!@#&			playerData = textutils.unserialze(prams[0])!@#&			for x=0,#playerData,1 do!@#&				characters[x] = {}!@#&				characters[x][1] = playerData[x][1]!@#&				characters[x][2] = playerData[x][2]!@#&				characters[x][3] = playerData[x][3]!@#&				characters[x][4] = playerData[x][4]!@#&			end!@#&			for x=0,#players-1,1 do!@#&				if(characters[x] ==\"roosterhat\")then!@#&					playerx = characters[x][2]!@#&					playerx = characters[x][3]!@#&				end!@#&			end!@#&			chat = textutils.unserialze(prams[1])!@#&		end!@#&	end!@#&end!@#&openPort()!@#&contactServer(\"Login//roosterhat\")!@#&retreiveMap()!@#&main()",["page2"]="000000000000000000000000000000000000000000000000000!@#&000000000000000000000000000000000000000000000000000!@#&000000000000000000000000000000000000000000000000000!@#&0000000000000000e000000e000000000000000000000000000!@#&0000000000000000e000000e000000000000000000000000000!@#&0000000000000000e000000e000000000000000000000000000!@#&0000000000000000e000000e000000000000000000000000000!@#&00000000e000000000000000000000000e00000000000000000!@#&00000000ee00000000000000000000000e00000000000000000!@#&000000000ee000000000000000000000e000000000000000000!@#&0000000000eee00000000000000000ee0000000000000000000!@#&000000000000eeee000000000000eee00000000000000000000!@#&0000000000000000eeeeeeeeeeeee0000000000000000000000!@#&000000000000000000000000000000000000000000000000000!@#&000000000000000000000000000000000000000000000000000!@#&000000000000000000000000000000000000000000000000000!@#&000000000000000000000000000000000000000000000000000!@#&000000000000000000000000000000000000000000000000000!@#&000000000000000000000000000000000000000000000000000",["eShip7_broken.img"]="!@#&               777b777!@#&              77ffbbbbf!@#&             7ffffbf7ff!@#&             ffffffff!@#&             f7ffff7f!@#&             bbfffb77ff!@#&              bff7b777f!@#&               bbbbbbb",},[".rexsettings"]="home!@#&default",["Compressor"]="os.loadAPI(\"/SpeedAPI/SpeedGUI\")!@#&os.loadAPI(\"/SpeedAPI/lddfm\")!@#&term.setBackgroundColor(colors.cyan)!@#&term.clear()!@#&term.setCursorPos(20, 2)!@#&print(\"Compressor\")!@#&term.setCursorPos(1, 3)!@#&print(\"---------------------------------------------------\")!@#&!@#&function compress()!@#&!@#&  term.setBackgroundColor(colors.gray)!@#&  term.setTextColor(colors.white)!@#&  term.setCursorPos(2, 2)!@#&  term.clear()!@#&  !@#&  term.setTextColor(colors.white)!@#&  term.setCursorPos(25, 2)!@#&  i_f = tostring(lddfm.makeMenu())!@#&!@#&  term.setBackgroundColor(colors.gray)!@#&  term.setTextColor(colors.white)!@#&  term.setCursorPos(2, 2)!@#&  term.clear()!@#&  !@#&  print(\"Enter output file: \")!@#&  term.setCursorPos(25, 2)!@#&  term.setBackgroundColor(colors.lightGray)!@#&  term.setTextColor(colors.white)!@#&  print(\"          \")!@#&  !@#&  term.setTextColor(colors.white)!@#&  term.setCursorPos(25, 2)!@#&  o_f = io.read()!@#&  !@#&  term.setBackgroundColor(colors.gray)!@#&  term.setTextColor(colors.orange)!@#&  term.setCursorPos(2, 4)!@#&!@#&  shell.run(\"/SpeedOS/Applications/Utils/compress \"..i_f..\" \"..o_f)!@#&  !@#&  sleep(1)!@#&  term.setTextColor(colors.white)!@#&  term.setBackgroundColor(colors.black)!@#&  term.clear()!@#&  error()!@#&end!@#&!@#&function decompress()!@#&!@#&  term.setBackgroundColor(colors.gray)!@#&  term.setTextColor(colors.white)!@#&  term.setCursorPos(2, 2)!@#&  term.clear()!@#&  !@#&  term.setTextColor(colors.white)!@#&  term.setCursorPos(25, 2)!@#&  i_f = tostring(lddfm.makeMenu())!@#&!@#&  term.setBackgroundColor(colors.gray)!@#&  term.setTextColor(colors.white)!@#&  term.setCursorPos(2, 2)!@#&  term.clear()!@#&  !@#&  print(\"Enter output file: \")!@#&  term.setCursorPos(25, 2)!@#&  term.setBackgroundColor(colors.lightGray)!@#&  term.setTextColor(colors.white)!@#&  print(\"          \")!@#&  !@#&  term.setTextColor(colors.white)!@#&  term.setCursorPos(25, 2)!@#&  o_f = io.read()!@#&  !@#&  term.setBackgroundColor(colors.gray)!@#&  term.setTextColor(colors.orange)!@#&  term.setCursorPos(2, 4)!@#&!@#&  shell.run(\"/SpeedOS/Applications/Utils/decompress \"..i_f..\" \"..o_f)!@#&  print(\"Decompressed \"..i_f..\" to \"..o_f)!@#&  !@#&  sleep(1)!@#&  term.setTextColor(colors.white)!@#&  term.setBackgroundColor(colors.black)!@#&  term.clear()!@#&  error()!@#&end!@#&!@#&SpeedGUI.gui.button.add(\"Compress file\",compress,17,5,2,3,colors.white,colors.lightBlue)!@#&SpeedGUI.gui.button.add(\"Decompress file\",decompress,16,9,2,3,colors.white,colors.blue)!@#&SpeedGUI.start()",["VNC"]="os.loadAPI(\"/SpeedAPI/SpeedText\")!@#&os.loadAPI(\"/SpeedAPI/SpeedGUI\")!@#&!@#&term.setBackgroundColor(colors.white)!@#&term.setTextColor(colors.blue)!@#&term.clear()!@#&term.setCursorPos(1, 1)!@#&!@#&SpeedText.cPrint(\"VNC  \", 1)!@#&!@#&term.setTextColor(colors.gray)!@#&!@#&SpeedText.line()!@#&!@#&term.setCursorPos(51-7, 19)!@#&term.setTextColor(colors.lightGray)!@#&term.write(\"by Ma3rX\")!@#&!@#&function connect()!@#&  term.setBackgroundColor(colors.white)!@#&  term.setTextColor(colors.blue)!@#&  term.clear()!@#&  term.setCursorPos(1, 1)!@#&!@#&  SpeedText.cPrint(\"VNC  \", 1)!@#& !@#&  term.setTextColor(colors.gray)!@#&!@#&  SpeedText.line()!@#&!@#&  term.setCursorPos(2, 4)!@#&  term.setTextColor(colors.black)  !@#&!@#&  SpeedText.cPrint(\"Enter server ID: \", 4)!@#&  term.setCursorPos(20, 5)!@#&  term.setBackgroundColor(colors.lightGray)!@#&  term.setTextColor(colors.white)!@#&  SpeedText.cPrint(\"    \", 5)!@#&  !@#&  term.setTextColor(colors.black)!@#&  term.setCursorPos(23, 5)!@#&  servID = io.read()!@#&!@#&  term.setBackgroundColor(colors.black)!@#&  term.setTextColor(colors.lightBlue)!@#&  term.setCursorPos(1, 1)!@#&  term.clear()!@#&!@#&  shell.run(\"/SpeedOS/Applications/Utils/vnc \"..tostring(servID))!@#&  !@#&  term.setTextColor(colors.white)!@#&  term.setBackgroundColor(colors.black)!@#&  term.setCursorPos(1, 1)!@#&  term.clear()!@#&  error()!@#&end!@#&!@#&function host()!@#&  term.setBackgroundColor(colors.white)!@#&  term.setTextColor(colors.blue)!@#&  term.clear()!@#&  term.setCursorPos(1, 1)!@#&!@#&  SpeedText.cPrint(\"VNC  \", 1)!@#& !@#&  term.setTextColor(colors.gray)!@#&!@#&  SpeedText.line()!@#&!@#&  term.setBackgroundColor(colors.black)!@#&  term.setTextColor(colors.lightBlue)!@#&  term.setCursorPos(1, 1)!@#&  term.clear()!@#&!@#&  shell.run(\"/SpeedOS/Applications/Utils/vnc host\")!@#&  !@#&  term.setTextColor(colors.white)!@#&  term.setBackgroundColor(colors.black)!@#&  term.setCursorPos(1, 1)!@#&  term.clear()!@#&  error()!@#&end!@#&!@#&SpeedGUI.gui.button.add(\"Connect to VNC\",connect,SpeedText.cCursor(\"Connect to VNC\")[1]-2,5,2,3,colors.white,colors.gray)!@#&SpeedGUI.gui.button.add(\"Host VNC\",host,SpeedText.cCursor(\"Host VNC\")[1]-2,9,2,3,colors.white,colors.gray)!@#&SpeedGUI.gui.button.add(\"Exit\",SpeedText.extraExit,SpeedText.cCursor(\"Exit\")[1]-2,13,2,3,colors.white,colors.red)!@#&SpeedGUI.start()",["Credits"]="term.setBackgroundColor(colors.blue)!@#&term.clear()!@#&term.setBackgroundColor(colors.blue)!@#&term.setCursorPos(1,1)!@#&textutils.slowPrint(\"SpeedOS             @inc\")!@#&term.setCursorPos(1,2)!@#&print(\"\")!@#&term.setCursorPos(1,5)!@#&term.setBackgroundColor(colors.blue)!@#&print(\"This operating system was modified specifically for the TechnoMir server, where it remains to this day. Lead Developer: Ma3rX. Please don't steal!\")!@#&while true do!@#&event, button, x, y = os.pullEvent(\"mouse_click\")!@#&if x >= 1 and x <= 52 and y >=1 and y <= 40 then!@#&shell.run(\"FireballOS/filebrowser\")!@#&term.clear()!@#&end!@#&end",["Logs"]={["nothing.score"]="3138.0",["Grammerwords"]="",["RednetScan.log"]=" !@#&Sender ID: 352!@#&Protocol: 8.124039!@#&Message: Ping! !@#& !@#&Sender ID: 352!@#&Protocol: 8.124039!@#&Message: Ping! !@#& !@#&Sender ID: 352!@#&Protocol: 8.124039!@#&Message: Ping! !@#& !@#&Sender ID: 352!@#&Protocol: 8.124039!@#&Message: Ping! ",["sniffer.log"]="[8:32 AM] Received message from ID 352 with distance 8.124039 : Ping! !@#&!@#&[8:33 AM] Received message from ID 352 with distance 8.124039 : Ping! ",["radio.log"]="",["chat.log"]="",},["MAIL"]={["archive"]="",},["Calculator"]="--[[Smart Calculator by Cranium]]--!@#& !@#&local tX, tY = term.getSize()!@#&local calc = {}!@#& !@#&--equation states!@#&calc.mode = false!@#&calc.inverse = false!@#&calc.hyp = false!@#&calc.sqrt = false !@#&calc.exp = false!@#&calc.asin = false!@#&calc.sin = false!@#&calc.sinh = false!@#&calc.atan = false!@#&calc.tan = false!@#&calc.tanh = false!@#&calc.acos = false!@#&calc.cos = false!@#&calc.cosh = false!@#&calc.log = false!@#&calc.pos = false!@#& !@#&-- characters!@#&local charList = {!@#&    [\"0\"] = {!@#&        \".-.\",!@#&        \"| |\",!@#&        \"'-'\"!@#&    },!@#&    [\"1\"] = {!@#&        \" . \",!@#&        \"'| \",!@#&        \"---\"!@#&    },!@#&    [\"2\"] = {!@#&        \".-.\",!@#&        \".-'\",!@#&        \"'- \"!@#&    },!@#&    [\"3\"] = {!@#&        \" -.\",!@#&        \" -|\",!@#&        \" -'\"!@#&    },!@#&    [\"4\"] = {!@#&        \". .\",!@#&        \"'-|\",!@#&        \"  '\"!@#&    },!@#&    [\"5\"] = {!@#&        \".- \",!@#&        \"'-.\",!@#&        \" -'\"!@#&    },!@#&    [\"6\"] = {!@#&        \".-.\",!@#&        \"|-.\",!@#&        \"'-'\"!@#&    },!@#&    [\"7\"] = {!@#&        \".-.\",!@#&        \"  |\",!@#&        \"  '\"!@#&    },!@#&    [\"8\"] = {!@#&        \".-.\",!@#&        \"|-|\",!@#&        \"'-'\"!@#&    },!@#&    [\"9\"] = {!@#&        \".-.\",!@#&        \"'-|\",!@#&        \" -'\"!@#&    },!@#&    [\".\"] = {!@#&        \"   \",!@#&        \"   \",!@#&        \" . \"!@#&    },!@#&    [\"-\"] = {!@#&        \"   \",!@#&        \" --\",!@#&        \"   \"!@#&    },!@#&}!@#&-- lay out the button labels!@#&local labels = {!@#&    ' + ', ' 1 ', ' 2 ', ' 3 ', '<--', 'sin', 'x^y', 'DEG', 'OFF',!@#&    ' - ', ' 4 ', ' 5 ', ' 6 ', 'CLR', 'cos', 'srt', 'RAD', '   ',!@#&    ' x ', ' 7 ', ' 8 ', ' 9 ', '   ', 'tan', 'Pi ', 'inv', '   ',!@#&    ' / ', ' 0 ', '-/+', ' . ', ' = ', 'log', 'exp', 'hyp', '   '!@#&}!@#& !@#& !@#&-- generate the objects!@#&local function objGen()!@#&    local _objects = {}!@#&    local width = 9!@#&    for i=1, #labels do!@#&        table.insert(_objects, {!@#&            x = (((i - 1)%width + 1)*5) - 1;!@#&            y = (math.ceil(i/width) * 3) + 4;!@#&            label = labels[i];!@#&            -- make operators different colors!@#&            color =!@#&            i == 1 and colors.blue or!@#&            i == 5 and colors.red or!@#&            i == 6 and colors.yellow or!@#&            i == 7 and colors.orange or!@#&            i == 8 and colors.white or!@#&            i == 9 and colors.red or!@#&            i == 10 and colors.blue or!@#&            i == 14 and colors.red or!@#&            i == 15 and colors.yellow or!@#&            i == 16 and colors.orange or!@#&            i == 17 and colors.white or!@#&            i == 18 and colors.white or!@#&            i == 19 and colors.blue or!@#&            i == 24 and colors.yellow or!@#&            i == 25 and colors.orange or!@#&            i == 26 and colors.white or!@#&            i == 27 and colors.white or!@#&            i == 28 and colors.blue or!@#&            i == 30 and colors.red or!@#&            i == 32 and colors.white or!@#&            i == 33 and colors.yellow or!@#&            i == 34 and colors.orange or!@#&            i == 35 and colors.white or!@#&            i == 36 and colors.white or!@#&            colors.lightGray;!@#&            -- controls the highlight colors for operators!@#&            back =!@#&            i == 6 and!@#&                calc.sin == true and colors.red or!@#&                calc.asin == true and colors.red or!@#&                calc.sinh == true and colors.red or!@#&            i == 8 and calc.mode == \"deg\" and colors.blue or!@#&            i == 15 and!@#&                calc.cos == true and colors.red or!@#&                calc.acos == true and colors.red or!@#&                calc.cosh == true and colors.red or!@#&            i == 16 and calc.sqrt == true and colors.lightBlue or!@#&            i == 17 and calc.mode == \"rad\" and colors.blue or!@#&            i == 24 and!@#&                calc.tan == true and colors.red or!@#&                calc.atan == true and colors.red or!@#&                calc.tanh == true and colors.red or!@#&            i == 26 and calc.inverse == true and colors.blue or!@#&            i == 30 and calc.pos == true and colors.white or!@#&            i == 33 and calc.log == true and colors.red or!@#&            i == 34 and calc.exp == true and colors.lightBlue or!@#&            i == 35 and calc.hyp == true and colors.blue or!@#&            colors.black;!@#&        })!@#&    end!@#&return _objects!@#&end!@#& !@#&local function draw()!@#&    term.setBackgroundColor(colors.black)!@#&    term.clear()!@#&    local objects = objGen()!@#&    for i=1, #objects do!@#&        local obj = objects[i]!@#&        term.setTextColor(colors.gray)!@#&        term.setBackgroundColor(colors.black)!@#&        --draw the grid!@#&        for num, line in pairs{'+---+','|   |','+---+'} do!@#&            term.setCursorPos(obj.x, obj.y + num - 1)!@#&            write(line)!@#&        end!@#&        --draw the button text and colors!@#&        term.setCursorPos(obj.x+1, obj.y+1)!@#&        term.setTextColor(obj.color)!@#&        term.setBackgroundColor(obj.back)!@#&        write(obj.label)!@#&    end!@#&end!@#&--draw border and screen!@#&local function display()!@#&    term.setBackgroundColor(colors.black)!@#&    term.setTextColor(colors.gray)!@#&    term.setCursorPos(2,1)!@#&    write(\"+\"..string.rep(\"-\", tX - 4)..\"+\")!@#&    for i = 2, tY - 1 do!@#&        term.setCursorPos(2,i)!@#&        write(\"|\")!@#&        term.setCursorPos(tX - 1,i)!@#&        write(\"|\")!@#&    end!@#&    term.setCursorPos(2,tY)!@#&    write(\"+\"..string.rep(\"-\", tX - 4)..\"+\")!@#&    term.setBackgroundColor(colors.lightGray)!@#&    for i = 2, 6 do!@#&        term.setCursorPos(4,i)!@#&        write(string.rep(\" \", tX - 6))!@#&    end!@#&end!@#&--run the equation passed by the user.!@#&local function calculate(eq)!@#&    if table.concat(eq) == \"()\" then!@#&        eq = {\"0\"}!@#&    elseif table.concat(eq) == \"(.)\" then!@#&        eq = {\"0\"}!@#&    end!@#&    local sExpr = table.concat(eq)!@#&    local fnMath, sErr = loadstring(\"return \"..sExpr)!@#&    if not fnMath then!@#&        return \"ERROR! Check syntax!\"!@#&    end!@#&    --setfenv(fnMath, math)!@#&    local bSucc, vRes = pcall(fnMath)!@#&    if not bSucc then!@#&        return \"ERROR! Check syntax!\"!@#&    else!@#&        return vRes!@#&    end!@#&end!@#& !@#&-- function loop!@#&local equation = {\"(\", \")\"}!@#&local result = \"0\"!@#&while true do!@#&    local rLen = 0!@#&    draw()!@#&    display()!@#&    term.setBackgroundColor(colors.lightGray)!@#&    term.setTextColor(colors.white)!@#&    term.setCursorPos(4,2)!@#&    --write the equation!@#&    write(table.concat(equation))!@#&    --write the result!@#&    if tonumber(result) ~= inf then!@#&        if string.len(result) >= 15 then!@#&            term.setCursorPos(5, 4)!@#&            term.setTextColor(colors.black)!@#&            write(\"= \")!@#&            for num in string.gmatch(result, \".\") do!@#&                rLen = rLen + 1!@#&                local pX,pY = term.getCursorPos()!@#&                if pX >= 4 and pX <= 48 then!@#&                    term.setCursorPos(rLen + 5, 4)!@#&                    write(num)!@#&                else!@#&                    term.setCursorPos(rLen + 5 - 48, 5)!@#&                    write(num)!@#&                end!@#&            end!@#&        else!@#&            for num in string.gmatch(result, \".\") do!@#&                rLen = rLen + 1!@#&                for i = 1, #charList[num] do!@#&                    term.setTextColor(colors.black)!@#&                    term.setCursorPos((rLen * 3) + 1, i + 3)!@#&                    write(charList[num][i])!@#&                end!@#&            end!@#&        end!@#&    elseif result == nil then!@#&        term.setCursorPos(5, 4)!@#&        term.setTextColor(colors.black)!@#&        write(\"= ERROR\")!@#&    else!@#&        term.setCursorPos(5, 4)!@#&        term.setTextColor(colors.black)!@#&        write(\"= INFINITY\")!@#&    end!@#&    local events = {os.pullEvent()}!@#&    --mouse click filter!@#&    if events[1] == \"mouse_click\" and events[2] == 1 then!@#&        if events[3] >= 44 and events[3] <= 48 then!@#&            if events[4] >= 7 and events[4] <= 9 then!@#&                term.setBackgroundColor(colors.black)!@#&                term.clear()!@#&                term.setCursorPos(1,1)!@#&                break!@#&            end!@#&        elseif events[3] >= 39 and events[3] <= 43 then!@#&            if events[4] >= 7 and events[4] <= 9 then!@#&                if calc.mode == false then!@#&                    table.remove(equation, 1)!@#&                    calc.mode = \"deg\"!@#&                    table.insert(equation, 1, \"math.deg(\")!@#&                elseif calc.mode == \"deg\" then!@#&                    table.remove(equation, 1)!@#&                    calc.mode = false!@#&                elseif calc.mode == \"rad\" then!@#&                    table.remove(equation, 1)!@#&                    calc.mode = \"deg\"!@#&                    table.insert(equation, 1, \"math.deg(\")!@#&                end!@#&            elseif events[4] >= 10 and events[4] <= 12 then!@#&                if calc.mode == false then!@#&                    table.remove(equation, 1)!@#&                    calc.mode = \"rad\"!@#&                    table.insert(equation, 1, \"math.rad(\")!@#&                elseif calc.mode == \"rad\" then!@#&                    table.remove(equation, 1)!@#&                    calc.mode = false!@#&                elseif calc.mode == \"deg\" then!@#&                    table.remove(equation, 1)!@#&                    calc.mode = \"rad\"!@#&                    table.insert(equation, 1, \"math.rad(\")!@#&                end!@#&            elseif events[4] >= 13 and events[4] <= 15 then!@#&                if calc.inverse == true and calc.hyp == false then!@#&                    calc.inverse = false!@#&                elseif calc.inverse == false and calc.hyp == true then!@#&                    calc.inverse = true!@#&                    calc.hyp = false!@#&                elseif calc.inverse == false and calc.hyp == false then!@#&                    calc.inverse = true!@#&                end!@#&            elseif events[4] >= 16 and events[4] <= 18 then!@#&                if calc.hyp == true and calc.inverse == false then!@#&                    calc.hyp = false!@#&                elseif calc.hyp == false and calc.inverse == true then!@#&                    calc.hyp = true!@#&                    calc.inverse = false!@#&                elseif calc.hyp == false and calc.inverse == false then!@#&                    calc.hyp = true!@#&                end!@#&            end!@#&        elseif events[3] >= 34 and events[3] <= 38 then!@#&            if events[4] >= 7 and events[4] <= 9 then!@#&                table.insert(equation, #equation, \"^\")!@#&            elseif events[4] >= 10 and events[4] <= 12 then!@#&                if calc.sqrt == false then!@#&                    table.insert(equation, #equation, \"math.sqrt(\")!@#&                    calc.sqrt = true!@#&                elseif calc.sqrt == true then!@#&                    table.insert(equation, #equation, \")\")!@#&                    calc.sqrt = false!@#&                end!@#&            elseif events[4] >= 13 and events[4] <= 15 then!@#&                table.insert(equation, #equation, \"math.pi\")!@#&            elseif events[4] >= 16 and events[4] <= 18 then!@#&                if calc.exp == false then!@#&                    table.insert(equation, #equation, \"math.exp(\")!@#&                    calc.exp = true!@#&                elseif calc.exp == true then!@#&                    table.insert(equation, #equation, \")\")!@#&                    calc.exp = false!@#&                end!@#&            end!@#&        elseif events[3] >= 29 and events[3] <= 33 then!@#&            if events[4] >= 7 and events[4] <= 9 then!@#&                if calc.inverse == true and calc.asin == false then!@#&                    table.insert(equation, #equation, \"math.asin(\")!@#&                    calc.asin = true!@#&                elseif calc.inverse == false and calc.hyp == false and calc.sin == false then!@#&                    table.insert(equation, #equation, \"math.sin(\")!@#&                    calc.sin = true!@#&                elseif calc.hyp == true and calc.sinh == false then!@#&                    table.insert(equation, #equation, \"math.sinh(\")!@#&                    calc.sinh = true!@#&                elseif calc.asin == true then!@#&                    table.insert(equation, #equation, \")\")!@#&                    calc.asin = false!@#&                elseif calc.sin == true then!@#&                    table.insert(equation, #equation, \")\")!@#&                    calc.sin = false!@#&                elseif calc.sinh == true then!@#&                    table.insert(equation, #equation, \")\")!@#&                    calc.sinh = false!@#&                end!@#&            elseif events[4] >= 10 and events[4] <= 12 then!@#&                if calc.inverse == true and calc.acos == false then!@#&                    table.insert(equation, #equation, \"math.acos(\")!@#&                    calc.acos = true!@#&                elseif calc.inverse == false and calc.hyp == false and calc.cos == false then!@#&                    table.insert(equation, #equation, \"math.cos(\")!@#&                    calc.cos = true!@#&                elseif calc.hyp == true and calc.cosh == false then!@#&                    table.insert(equation, #equation, \"math.cosh(\")!@#&                    calc.cosh = true!@#&                elseif calc.acos == true then!@#&                    table.insert(equation, #equation, \")\")!@#&                    calc.acos = false!@#&                elseif calc.cos == true then!@#&                    table.insert(equation, #equation, \")\")!@#&                    calc.cos = false!@#&                elseif calc.cosh == true then!@#&                    table.insert(equation, #equation, \")\")!@#&                    calc.cosh = false!@#&                end!@#&            elseif events[4] >= 13 and events[4] <= 15 then!@#&                if calc.inverse == true and calc.atan == false then!@#&                    table.insert(equation, #equation, \"math.atan(\")!@#&                    calc.atan = true!@#&                elseif calc.inverse == false and calc.hyp == false and calc.tan == false then!@#&                    table.insert(equation, #equation, \"math.tan(\")!@#&                    calc.tan = true!@#&                elseif calc.hyp == true and calc.tanh == false then!@#&                    table.insert(equation, #equation, \"math.tanh(\")!@#&                    calc.tanh = true!@#&                elseif calc.atan == true then!@#&                    table.insert(equation, #equation, \")\")!@#&                    calc.atan = false!@#&                elseif calc.tan == true then!@#&                    table.insert(equation, #equation, \")\")!@#&                    calc.tan = false!@#&                elseif calc.tanh == true then!@#&                    table.insert(equation, #equation, \")\")!@#&                    calc.tanh = false!@#&                end!@#&            elseif events[4] >= 16 and events[4] <= 18 then!@#&                if calc.log == false then!@#&                    table.insert(equation, #equation, \"math.log10(\")!@#&                    calc.log = true!@#&                elseif calc.log == true then!@#&                    table.insert(equation, \")\")!@#&                    calc.log = false!@#&                end!@#&            end!@#&        -- backspace, clear, equals!@#&        elseif events[3] >= 24 and events[3] <= 28 then!@#&            if events[4] >= 7 and events[4] <= 9 then!@#&                if table.concat(equation) ~= \"()\" then!@#&                    table.remove(equation, #equation - 1)!@#&                end!@#&            elseif events[4] >= 10 and events[4] <= 12 then!@#&                calc.mode = false!@#&                calc.inverse = false!@#&                calc.hyp = false!@#&                calc.sqrt = false !@#&                calc.exp = false!@#&                calc.asin = false!@#&                calc.sin = false!@#&                calc.sinh = false!@#&                calc.atan = false!@#&                calc.tan = false!@#&                calc.tanh = false!@#&                calc.acos = false!@#&                calc.cos = false!@#&                calc.cosh = false!@#&                calc.log = false!@#&                calc.pos = false!@#&                equation = {\"(\", \")\"}!@#&                result = \"0\"!@#&            elseif events[4] >= 16 and events[4] <= 18 then!@#&                if equation[#equation-1] == \"+\" or!@#&                    equation[#equation-1] == \"-\" or!@#&                    equation[#equation-1] == \"*\" or!@#&                    equation[#equation-1] == \"/\" then!@#&                    table.insert(equation, #equation, \"0\")!@#&                elseif equation[#equation-1] == \"^\" then!@#&                    table.insert(equation, #equation, \"1\")!@#&                end!@#&                for i, v in pairs(calc) do!@#&                    if calc[i] == true then!@#&                        table.insert(equation, #equation, \")\")!@#&                        calc[i] = false!@#&                    end!@#&                end!@#&                result = tostring(calculate(equation))!@#&            end!@#&        -- 3, 6, 9, decimal!@#&        elseif events[3] >= 19 and events[3] <= 23 then!@#&            if events[4] >= 7 and events[4] <= 9 then!@#&                table.insert(equation, #equation, \"3\")!@#&            elseif events[4] >= 10 and events[4] <= 12 then!@#&                table.insert(equation, #equation, \"6\")!@#&            elseif events[4] >= 13 and events[4] <= 15 then!@#&                table.insert(equation, #equation, \"9\")!@#&            elseif events[4] >= 16 and events[4] <= 18 then!@#&                table.insert(equation, #equation, \".\")!@#&            end!@#&        -- 2, 5, 8, positive/negative!@#&        elseif events[3] >= 14 and events[3] <= 18 then!@#&            if events[4] >= 7 and events[4] <= 9 then!@#&                table.insert(equation, #equation, \"2\")!@#&            elseif events[4] >= 10 and events[4] <= 12 then!@#&                table.insert(equation, #equation, \"5\")!@#&            elseif events[4] >= 13 and events[4] <= 15 then!@#&                table.insert(equation, #equation, \"8\")!@#&            elseif events[4] >= 16 and events[4] <= 18 then!@#&                if calc.pos == false then!@#&                    table.insert(equation, #equation, \"(-\")!@#&                    calc.pos = true!@#&                elseif calc.pos == true then!@#&                    table.insert(equation, #equation, \")\")!@#&                    calc.pos = false!@#&                end!@#&            end!@#&        -- 1, 4, 7, 0!@#&        elseif events[3] >= 9 and events[3] <= 13 then!@#&            if events[4] >= 7 and events[4] <= 9 then!@#&                table.insert(equation, #equation, \"1\")!@#&            elseif events[4] >= 10 and events[4] <= 12 then!@#&                table.insert(equation, #equation, \"4\")!@#&            elseif events[4] >= 13 and events[4] <= 15 then!@#&                table.insert(equation, #equation, \"7\")!@#&            elseif events[4] >= 16 and events[4] <= 18 then!@#&                table.insert(equation, #equation, \"0\")!@#&            end!@#&        -- add, subtract, multiply, divide!@#&        elseif events[3] >= 4 and events[3] <= 8 then!@#&            if events[4] >= 7 and events[4] <= 9 then!@#&                table.insert(equation, #equation, \"+\")!@#&            elseif events[4] >= 10 and events[4] <= 12 then!@#&                table.insert(equation, #equation, \"-\")!@#&            elseif events[4] >= 13 and events[4] <= 15 then!@#&                table.insert(equation, #equation, \"*\")!@#&            elseif events[4] >= 16 and events[4] <= 18 then!@#&                table.insert(equation, #equation, \"/\")!@#&            end!@#&        end!@#&    -- filter for keyboard presses!@#&    elseif events[1] == \"key\" then!@#&        if events[2] == 79 then!@#&            table.insert(equation, #equation, \"1\")!@#&        elseif events[2] == 80 then!@#&            table.insert(equation, #equation, \"2\")!@#&        elseif events[2] == 81 then!@#&            table.insert(equation, #equation, \"3\")!@#&        elseif events[2] == 75 then!@#&            table.insert(equation, #equation, \"4\")!@#&        elseif events[2] == 76 then!@#&            table.insert(equation, #equation, \"5\")!@#&        elseif events[2] == 77 then!@#&            table.insert(equation, #equation, \"6\")!@#&        elseif events[2] == 71 then!@#&            table.insert(equation, #equation, \"7\")!@#&        elseif events[2] == 72 then!@#&            table.insert(equation, #equation, \"8\")!@#&        elseif events[2] == 73 then!@#&            table.insert(equation, #equation, \"9\")!@#&        elseif events[2] == 82 then!@#&            table.insert(equation, #equation, \"0\")!@#&        elseif events[2] == 83 then!@#&            table.insert(equation, #equation, \".\")!@#&        elseif events[2] == 78 then!@#&            table.insert(equation, #equation, \"+\")!@#&        elseif events[2] == 74 then!@#&            table.insert(equation, #equation, \"-\")!@#&        elseif events[2] == 55 then!@#&            table.insert(equation, #equation, \"*\")!@#&        elseif events[2] == 181 then!@#&            table.insert(equation, #equation, \"/\")!@#&        elseif events[2] == 14 then!@#&            if table.concat(equation) ~= \"()\" then!@#&                table.remove(equation, #equation - 1)!@#&            end!@#&        elseif events[2] == 28 or events[2] == 156 then!@#&            if equation[#equation-1] == \"+\" or!@#&                equation[#equation-1] == \"-\" or!@#&                equation[#equation-1] == \"*\" or!@#&                equation[#equation-1] == \"/\" then!@#&                table.insert(equation, #equation, \"0\")!@#&            elseif equation[#equation-1] == \"^\" then!@#&                table.insert(equation, #equation, \"1\")!@#&            end!@#&            for i, v in pairs(calc) do!@#&                if calc[i] == true then!@#&                    table.insert(equation, #equation, \")\")!@#&                    calc[i] = false!@#&                end!@#&            end!@#&            result = tostring(calculate(equation))!@#&        end!@#&    end!@#&end!@#&!@#&term.setTextColor(colors.white)",["PictureView"]="os.loadAPI(\"/SpeedAPI/SpeedGUI\")!@#&os.loadAPI(\"/SpeedAPI/peripheral\")!@#&os.loadAPI(\"/SpeedAPI/lddfm\")!@#&!@#&term.setCursorPos(1, 1)!@#&term.clear()!@#&!@#&local args = {...}!@#&local use_monitor = false!@#&local monitor!@#&!@#&if peripheral.find(\"monitor\") then!@#&  term.setCursorPos(1, 1)!@#&  io.write(\"Program found monitor on side \"..peripheral.find(\"monitor\")..\". Do you want to use it? [y/N] \")!@#&  use_mon = io.read()!@#&  if use_mon == \"y\" or use_mon == \"Y\" then!@#&    use_monitor = true!@#&    monitor = peripheral.wrap(peripheral.find(\"monitor\"))    !@#&!@#&  else!@#&    use_monitor = false  !@#&!@#&  end!@#&end!@#&!@#&function draw_picture(filename)!@#&  term.clear()!@#&  if use_monitor then!@#&    term.redirect(monitor)  !@#&    monitor.clear()!@#&  end!@#&  !@#&  image = paintutils.loadImage(filename) !@#&  paintutils.drawImage(image, 1,1)!@#&  sleep(60)!@#&  if use_monitor then!@#&    monitor.clear()!@#&    monitor.setTextColor(colors.white)!@#&    monitor.setBackgroundColor(colors.black)!@#&    monitor.setCursorPos(1, 1)!@#&    os.reboot()!@#&!@#&  else!@#&    term.clear()!@#&    term.setTextColor(colors.white)!@#&    term.setBackgroundColor(colors.black)!@#&    term.setCursorPos(1, 1)!@#&    os.reboot()!@#&  end!@#&end!@#&!@#&if args[1] then!@#&  draw_picture(tostring(args[1]))!@#&  !@#&else!@#&  draw_picture(tostring(lddfm.makeMenu()))!@#&end",["About"]="local xSize, ySize = term.getSize()!@#& !@#&local fileImage = 0!@#&local fileDocument = 0!@#&local fileOther = 0!@#&local computerLabel = os.getComputerLabel()!@#&if computerLabel == nil then computerLabel = \"not set\" end!@#& !@#&--------------------MODEM FIND----------------------------!@#&function findModem()!@#&        local PeriList = rs.getSides() --peripheral.getNames()!@#&        for i=1,#PeriList do!@#&                if peripheral.getType(PeriList[i]) == \"modem\" then!@#&                        return PeriList[i]!@#&                end!@#&        end!@#&end!@#& !@#&local computerModem = findModem()!@#&if computerModem == nil then computerModem = \"not found\" end!@#& !@#&local function clearScreen(color)!@#&        term.setBackgroundColor(color)!@#&        term.clear()!@#&end!@#& !@#&local function fadeIn(time)!@#&        clearScreen(colors.gray)!@#&        sleep(time)!@#&        clearScreen(colors.lightGray)!@#&        sleep(time)!@#&        clearScreen(colors.white)!@#&        sleep(time)!@#&end!@#& !@#&local function fadeOut(time)!@#&        clearScreen(colors.lightGray)!@#&        sleep(time)!@#&        clearScreen(colors.gray)!@#&        sleep(time)!@#&        clearScreen(colors.black)!@#&        sleep(time)!@#&        term.setCursorPos(1,1)!@#&        term.setTextColor(colors.white)!@#&end!@#& !@#&local function getSizeOfAll()!@#&        local sizeOfAll1 = 0!@#&        local function files(path)!@#&                local massiv = fs.list(path)!@#&                for i=1,#massiv do!@#&                        if fs.isDir(massiv[i]) then!@#&                                files(path..\"/\"..massiv[i])!@#&                        else!@#&                                sizeOfAll1 = sizeOfAll1 + fs.getSize(path..\"/\"..massiv[i])!@#&                        end!@#&                end!@#&        end!@#&        files(\"\")!@#&        return sizeOfAll1!@#&end!@#& !@#&local function getFileFormat(file)!@#&        local start,ending = string.find(file,\"%.%w*$\")!@#&        if start == nil then!@#&                return nil!@#&        else!@#&                return string.sub(file,start,ending)!@#&        end!@#&end!@#& !@#&local function getSizeOfFormat()!@#&        local sizeOfAll1 = 0!@#&        local function files(path)!@#&                local massiv = fs.list(path)!@#&                for i=1,#massiv do!@#&                        if fs.isDir(massiv[i]) then!@#&                                files(path..\"/\"..massiv[i])!@#&                        else!@#&                                local f = getFileFormat(path..\"/\"..massiv[i])!@#&                                local s = fs.getSize(path..\"/\"..massiv[i])!@#&                                if f == \".nfp\" or f == \".png\" or f == \".skch\" then!@#&                                        fileImage = fileImage + s!@#&                                elseif f == \".cfg\" or f == \".log\" or f == \".txt\" or f == \".nfa\" or f == \".zip\" then!@#&                                        fileDocument = fileDocument + s!@#&                                elseif f == nil then!@#&                                        fileOther = fileOther + s!@#&                                end!@#&                        end!@#&                end!@#&        end!@#&        files(\"\")!@#&        return sizeOfAll1!@#&end!@#& !@#&local function writeText(text,x,y)!@#&        term.setCursorPos(x,y)!@#&        term.write(text)!@#&end!@#& !@#&local function infoText(key,keyColor,value,x,y)!@#&        term.setCursorPos(x,y)!@#&        term.setTextColor(keyColor)!@#&        term.write(key..\": \")!@#&        term.setTextColor(colors.lightGray)!@#&        term.write(value)!@#&end!@#& !@#&getSizeOfFormat()!@#& !@#&local sizeOfAll =  getSizeOfAll()!@#&local freeSpace = 64000000!@#&local totalSpace = freeSpace + sizeOfAll!@#&local lengthOfPolosa = xSize-6!@#&local lengthOfAll = math.floor(lengthOfPolosa*(math.ceil(sizeOfAll/totalSpace*100))/100)!@#&local lengthOfDocuments = math.floor(lengthOfPolosa*math.ceil(fileDocument/sizeOfAll*100)/100)!@#&local lengthOfImages = math.floor(lengthOfPolosa*math.ceil(fileImage/sizeOfAll*100)/100)!@#& !@#&-------------------------------------------------------------!@#&fadeIn(0.05)!@#& !@#&local xStart = math.floor(xSize/2-lengthOfPolosa/2)!@#&local yStart = ySize-3!@#& !@#& !@#&local function displayBar(time)!@#&        while true do!@#&        for y=yStart,(yStart+1) do!@#&                for x=(xStart+1),(xStart+lengthOfPolosa) do!@#&                        paintutils.drawPixel(x,y,colors.gray)!@#&                end!@#&        end!@#&        for y=yStart,(yStart+1) do!@#&                for x=(xStart+1),(xStart+lengthOfAll) do!@#&                        paintutils.drawPixel(x,y,colors.black)!@#&                end!@#&        end!@#& !@#&------------------------------!@#&        sleep(2)!@#&------------------------------!@#& !@#&        for y=yStart,(yStart+1) do!@#&                for x=(xStart+1),(xStart+lengthOfPolosa) do!@#&                        paintutils.drawPixel(x,y,colors.lime)!@#&                end!@#&        end!@#&        for y=yStart,(yStart+1) do!@#&                for x=(xStart+1),(xStart+lengthOfDocuments) do!@#&                        paintutils.drawPixel(x,y,colors.red)!@#&                end!@#&        end!@#&        for y=yStart,(yStart+1) do!@#&                for x=(xStart+1+lengthOfDocuments),(xStart+lengthOfDocuments+lengthOfImages) do!@#&                        paintutils.drawPixel(x,y,colors.yellow)!@#&                end!@#&        end!@#&------------------------------!@#&        sleep(2)!@#&------------------------------!@#&        end!@#&end!@#& !@#& !@#& !@#&for i=1,xSize do!@#&        paintutils.drawPixel(i,1,colors.gray)!@#&end!@#&term.setTextColor(colors.lightGray)!@#&writeText(\"About\",math.floor(xSize/2-string.len(\"About\")/2),1)!@#& !@#&term.setBackgroundColor(colors.white)!@#&infoText(\"Computer label\",colors.gray,computerLabel,2,3)!@#&infoText(\"Computer ID\",colors.gray,tostring(os.getComputerID()),2,4)!@#&infoText(\"Connected modem\",colors.gray,computerModem,2,5)!@#&infoText(\"Aviable space\",colors.gray,math.ceil(totalSpace/1024)..\" KB\",2,6)!@#&infoText(\"Used space\",colors.black,math.ceil(sizeOfAll/1024)..\" KB\",2,8)!@#&infoText(\"Free space\",colors.gray,math.ceil(freeSpace/1024)..\" KB\",2,9)!@#&infoText(\"Documents\",colors.red,math.ceil(fileDocument/1024)..\" KB\",2,10)!@#&infoText(\"Images\",colors.yellow,math.ceil(fileImage/1024)..\" KB\",2,11)!@#&infoText(\"Other\",colors.lime,math.ceil(fileOther/1024)..\" KB\",2,12)!@#& !@#&local function touch()!@#&        while true do!@#&                event = os.pullEvent()!@#&                if event == \"key\" or event == \"mouse_click\" then break end!@#&        end!@#&end!@#& !@#&parallel.waitForAny(displayBar,touch)!@#& !@#&fadeOut(0.05)",["Screensavers"]={["AlphaClock"]="os.loadAPI(\"SpeedAPI/alphanumeric\")!@#&os.loadAPI(\"SpeedAPI/SpeedText\")!@#&!@#&local x, y = term.getSize()!@#&!@#&while true do!@#&  print(alphanumeric.stringToImg(textutils.formatTime(os.time(), true), colors.white, x/2-13, y/2))!@#&  sleep(0.5)!@#&  term.clear()!@#&end",["Donut_src"]="local a,F,z,b,M,X,H,K!@#&M=math!@#&X=M.floor!@#&H=M.cos!@#&K=M.sin!@#&a = 0!@#&F = 0!@#&z = {}!@#&b = {}!@#&!@#&-- clear screen before starting!@#&term.clear()!@#&!@#&while 1 do!@#&    -- Too long without yielding Fix!@#&    os.queueEvent('')!@#&    os.pullEvent()!@#&    local i,j!@#&    j=0!@#&    -- zeros arrays!@#&    for l=1, 1760 do!@#&        z[l] = 0!@#&    end!@#&    for t=1, 1760 do!@#&        b[t] = ' '!@#&    end!@#&    -- calculate donut!@#&    while j < 6.28 do!@#&        j=j+0.07!@#&        i=0!@#&        while i < 6.28 do!@#&            i=i+0.02!@#&!@#&            local c,d,e,f,g,h,D,l,m,n,t,x,y,o,N!@#&            c = K(i)!@#&            l = H(i)!@#&            d = H(j)!@#&            f = K(j)!@#&!@#&            e = K(a)!@#&            g = H(a)!@#&            h = d + 2!@#&            D = 1 / (c * h * e + f * g + 5)!@#&!@#&            m = H(F)!@#&            n = K(F)!@#&            t = c * h * g - f * e!@#&!@#&            x = X(40 + 30 * D * (l * h * m - t * n))!@#&            y = X(12 + 15 * D * (l * h * n + t * m))!@#&            o = X(x + (80 * y))!@#&            N = X(8 * ((f * e - c * d * g) * m - c * d * e - f * g - l * d * n))!@#&!@#&            if 22>y and y>0 and 80>x and x>0 and D>z[o+1] then!@#&                z[o+1] = D!@#&                if N>0 then!@#&                    b[o+1] = string.sub(\".,-~:;=!*#$@\",N+1,N+1)!@#&                else!@#&                    b[o+1] = '.'!@#&                end!@#&            end!@#&        end!@#&    end!@#&!@#&    -- print!@#&	shell.run(\"clear\")!@#&    for l=1,1760 do!@#&        if l%80 ~= 0 then!@#&            io.write(b[l])!@#&        else!@#&            print()!@#&        end!@#&    end!@#&    !@#&    -- increments!@#&    a=a+0.04!@#&    F=F+0.02!@#&end",["GameOfLife"]="--(c) 2013 Felix Maxwell!@#&--License: CC BY-SA 3.0!@#&!@#&local fps = 8 --Determines how long the program will wait between each tick!@#&local char = \"#\" --Live cells will look like this!@#&!@#&function getMonitors()!@#&	local monitors = {}!@#&	if checkMonitorSide( \"top\" ) then table.insert( monitors, \"top\" ) end!@#&	if checkMonitorSide( \"bottom\" ) then table.insert( monitors, \"bottom\" ) end!@#&	if checkMonitorSide( \"left\" ) then table.insert( monitors, \"left\" ) end!@#&	if checkMonitorSide( \"right\" ) then table.insert( monitors, \"right\" ) end!@#&	if checkMonitorSide( \"front\" ) then table.insert( monitors, \"front\" ) end!@#&	if checkMonitorSide( \"back\" ) then table.insert( monitors, \"back\" ) end!@#&	return monitors!@#&end!@#&function checkMonitorSide( side )!@#&	if peripheral.isPresent( side ) then!@#&		if peripheral.getType(side) == \"monitor\" then!@#&			return true!@#&		end!@#&	end!@#&	return false!@#&end!@#&function printMonitorStats( side )!@#&	local x, y = peripheral.call(side, \"getSize\")!@#&	local color = \"No\"!@#&	if peripheral.call(side, \"isColor\") then!@#&		color = \"Yes\"!@#&	end!@#&	print(\"Side:\"..side..\" Size:(\"..x..\", \"..y..\") Color?\"..color)!@#&end!@#&function askMonitor()!@#&	local monitors = getMonitors()!@#&	if #monitors == 0 then!@#&		print(\"No monitors found, add more!\")!@#&		return nill!@#&	elseif #monitors == 1 then!@#&		return monitors[1]!@#&	else!@#&		while true do!@#&			print(\"Multiple monitors found, please pick one.\")!@#&			for i,v in ipairs(monitors) do!@#&				write(\"[\"..(i)..\"] \")!@#&				printMonitorStats( v )!@#&			end!@#&			write(\"Selection: \")!@#&			local sel = tonumber(io.read())!@#&			if sel < 1 or sel > #monitors then!@#&				print(\"\")!@#&				print(\"Invalid number.\")!@#&			else!@#&				return monitors[sel]!@#&			end!@#&		end!@#&	end!@#&end!@#&!@#&function printCharAt( monitor, x, y, char )!@#&	monitor.setCursorPos( x, y )!@#&	monitor.write( char )!@#&end!@#&function printGrid( monitor, grid )!@#&	monitor.clear()!@#&	for i=1,#grid do!@#&		for o=1,#grid[i] do!@#&			printCharAt( monitor, i, o, grid[i][o] )!@#&		end!@#&	end!@#&end!@#&!@#&function getNumNeighborhood( grid, x, y )!@#&	local neighbors = 0!@#&	if x > 1 then!@#&		if y > 1 then!@#&			if grid[x-1][y-1] == char then neighbors = neighbors + 1 end!@#&		end!@#&		if grid[x-1][y] == char then neighbors = neighbors + 1 end!@#&		if y < #grid[x] then!@#&			if grid[x-1][y+1] == char then neighbors = neighbors + 1 end!@#&		end!@#&	end!@#&	!@#&	if y > 1 then!@#&		if grid[x][y-1] == char then neighbors = neighbors + 1 end!@#&	end!@#&	if y < #grid[x] then!@#&		if grid[x][y+1] == char then neighbors = neighbors + 1 end!@#&	end!@#&	!@#&	if x < #grid then!@#&		if y > 1 then!@#&			if grid[x+1][y-1] == char then neighbors = neighbors + 1 end!@#&		end!@#&		if grid[x+1][y] == char then neighbors = neighbors + 1 end!@#&		if y < #grid then!@#&			if grid[x+1][y+1] == char then neighbors = neighbors + 1 end!@#&		end!@#&	end!@#&	!@#&	return neighbors!@#&end!@#&function lifeOrDeath( cur, neighbors )!@#&	if neighbors < 2 then!@#&		return \" \"!@#&	elseif neighbors > 3 then!@#&		return \" \"!@#&	elseif neighbors == 3 then!@#&		return char!@#&	else!@#&		return cur!@#&	end!@#&end!@#&function tick( grid )!@#&	local retGrid = {}!@#&	for x=1,#grid do!@#&		retGrid[x] = {}!@#&		for y=1,#grid[x] do!@#&			local num = getNumNeighborhood( grid, x, y )!@#&			retGrid[x][y] = lifeOrDeath( grid[x][y], num )!@#&		end!@#&	end!@#&	return retGrid!@#&end!@#&!@#&function setup( w, h )!@#&	local grid = {}!@#&	for i=1,w do!@#&		grid[i] = {}!@#&		for o=1,h do!@#&			if math.random(1, 5) == 1 then!@#&				grid[i][o] = char!@#&			else!@#&				grid[i][o] = \" \"!@#&			end!@#&		end!@#&	end!@#&	return grid!@#&end!@#&function run()!@#&	local monitor = peripheral.wrap( askMonitor() )!@#&	if monitor.isColor() then!@#&		monitor.setTextColor(colors.lime)!@#&		monitor.setBackgroundColor(colors.black)!@#&	end!@#&	local w, h = monitor.getSize()!@#&	local grid = setup( w, h )!@#&	while true do!@#&		printGrid( monitor, grid )!@#&		grid = tick( grid )!@#&		os.sleep(1/fps)!@#&	end!@#&end!@#&!@#&run()!@#&!@#&--This one looks kind of cool!@#&--  ###!@#&--#    #!@#&--#    #!@#&--#    #!@#&--!@#&--  ###",["MerryChristmas"]="local flakes = {}!@#&local deletedFlakes = {}!@#&local maxX,maxY = term.getSize()!@#&local tColors = {colors.white,colors.lightBlue,colors.lightGray}!@#&local textStage = 1!@#&term.setBackgroundColor(colors.black)!@#&term.clear()!@#&function redraw()!@#&    for i,v in pairs(flakes) do!@#&        if v.stage == 1 then!@#&            if v.y < maxY then!@#&            	paintutils.drawPixel(v.x,v.y,colors.black)!@#&                v.y = v.y + 1!@#&                term.setCursorPos(v.x-1,v.y)!@#&                term.setTextColor(v.color)!@#&                term.write(\"*\")!@#&                v.stage = 2!@#&            else!@#&                table.insert(deletedFlakes, i)!@#&            end!@#&        elseif v.stage == 2 then!@#&            if v.y < maxY then!@#&            	paintutils.drawPixel(v.x-1,v.y,colors.black)!@#&                v.y = v.y + 1!@#&                term.setCursorPos(v.x,v.y)!@#&                term.setTextColor(v.color)!@#&                term.write(\"*\")!@#&                v.stage = 3!@#&            else!@#&                table.insert(deletedFlakes, i)!@#&            end!@#&        elseif v.stage == 3 then!@#&            if v.y < maxY then!@#&            	paintutils.drawPixel(v.x,v.y,colors.black)!@#&                v.y = v.y + 1!@#&                term.setCursorPos(v.x+1,v.y)!@#&                term.setTextColor(v.color)!@#&                term.write(\"*\")!@#&                v.stage = 4!@#&            else!@#&                table.insert(deletedFlakes, i)!@#&            end!@#&        elseif v.stage == 4 then!@#&            if v.y < maxY then!@#&            	paintutils.drawPixel(v.x+1,v.y,colors.black)!@#&                v.y = v.y + 1!@#&                term.setCursorPos(v.x,v.y)!@#&                term.setTextColor(v.color)!@#&                term.write(\"*\")!@#&                v.stage = 5!@#&            else!@#&                table.insert(deletedFlakes, i)!@#&            end!@#&        elseif v.stage == 5 then!@#&            if v.y < maxY then!@#&            	paintutils.drawPixel(v.x,v.y,colors.black)!@#&                v.y = v.y + 1!@#&                term.setCursorPos(v.x-1,v.y)!@#&                term.setTextColor(v.color)!@#&                term.write(\"*\")!@#&                v.stage = 2!@#&            else!@#&                table.insert(deletedFlakes, i)!@#&            end!@#&        end!@#&    end!@#&    if textStage == 1 then!@#&    	term.setCursorPos(2,2)!@#&    	term.setTextColor(colors.green)!@#&    	term.write(\"M\")!@#&    	term.setCursorPos(3,2)!@#&    	term.setTextColor(colors.red)!@#&    	term.write(\"e\")!@#&    	term.setCursorPos(4,2)!@#&    	term.setTextColor(colors.green)!@#&    	term.write(\"r\")!@#&    	term.setCursorPos(5,2)!@#&    	term.setTextColor(colors.red)!@#&    	term.write(\"r\")!@#&    	term.setCursorPos(6,2)!@#&    	term.setTextColor(colors.green)!@#&    	term.write(\"y\")!@#&    	term.setCursorPos(8,2)!@#&    	term.setTextColor(colors.red)!@#&    	term.write(\"C\")!@#&    	term.setCursorPos(9,2)!@#&    	term.setTextColor(colors.green)!@#&    	term.write(\"h\")!@#&    	term.setCursorPos(10,2)!@#&    	term.setTextColor(colors.red)!@#&    	term.write(\"r\")!@#&    	term.setCursorPos(11,2)!@#&    	term.setTextColor(colors.green)!@#&    	term.write(\"i\")!@#&    	term.setCursorPos(12,2)!@#&    	term.setTextColor(colors.red)!@#&    	term.write(\"s\")!@#&    	term.setCursorPos(13,2)!@#&    	term.setTextColor(colors.green)!@#&    	term.write(\"t\")!@#&    	term.setCursorPos(14,2)!@#&    	term.setTextColor(colors.red)!@#&    	term.write(\"m\")!@#&    	term.setCursorPos(15,2)!@#&    	term.setTextColor(colors.green)!@#&    	term.write(\"a\")!@#&    	term.setCursorPos(16,2)!@#&    	term.setTextColor(colors.red)!@#&    	term.write(\"s\")!@#&    	textStage = 2!@#&    elseif textStage == 2 then!@#&    	term.setCursorPos(2,2)!@#&    	term.setTextColor(colors.red)!@#&    	term.write(\"M\")!@#&    	term.setCursorPos(3,2)!@#&    	term.setTextColor(colors.green)!@#&    	term.write(\"e\")!@#&    	term.setCursorPos(4,2)!@#&    	term.setTextColor(colors.red)!@#&    	term.write(\"r\")!@#&    	term.setCursorPos(5,2)!@#&    	term.setTextColor(colors.green)!@#&    	term.write(\"r\")!@#&    	term.setCursorPos(6,2)!@#&    	term.setTextColor(colors.red)!@#&    	term.write(\"y\")!@#&    	term.setCursorPos(8,2)!@#&    	term.setTextColor(colors.green)!@#&    	term.write(\"C\")!@#&    	term.setCursorPos(9,2)!@#&    	term.setTextColor(colors.red)!@#&    	term.write(\"h\")!@#&    	term.setCursorPos(10,2)!@#&    	term.setTextColor(colors.green)!@#&    	term.write(\"r\")!@#&    	term.setCursorPos(11,2)!@#&    	term.setTextColor(colors.red)!@#&    	term.write(\"i\")!@#&    	term.setCursorPos(12,2)!@#&    	term.setTextColor(colors.green)!@#&    	term.write(\"s\")!@#&    	term.setCursorPos(13,2)!@#&    	term.setTextColor(colors.red)!@#&    	term.write(\"t\")!@#&    	term.setCursorPos(14,2)!@#&    	term.setTextColor(colors.green)!@#&    	term.write(\"m\")!@#&    	term.setCursorPos(15,2)!@#&    	term.setTextColor(colors.red)!@#&    	term.write(\"a\")!@#&    	term.setCursorPos(16,2)!@#&    	term.setTextColor(colors.green)!@#&    	term.write(\"s\")!@#&    	textStage = 1!@#&    end!@#&    for i,v in pairs(deletedFlakes) do!@#&        table.remove(flakes,v)!@#&    end!@#&    deletedFlakes = {}!@#&end    !@#& !@#&function newflake()!@#&    local template = {!@#&        x = 1,!@#&        y = 0,!@#&        color = colors.white,!@#&        stage = 2}!@#&    template.x = math.random(1,maxX)!@#&    template.color = tColors[math.random(1,3)]!@#&    table.insert(flakes,template)!@#&end!@#& !@#&while true do!@#&newflake()!@#&redraw()!@#&sleep(0.2)!@#&end",["Fireworks"]="local color = {colors.red, colors.orange, colors.yellow, colors.white, colors.lightGray, colors.gray}!@#&local refresh = 0.05!@#&local frequency = 10!@#&local text = {\"<Welcome to SpeedOS>\", colors.lime}!@#&local background = colors.black!@#&local rainbowColors = true!@#&-- change any of the above values to alter the look of the fireworks!@#&term.setBackgroundColor(colors.black)!@#&term.clear()!@#&local fw = {}!@#&local x, y = term.getSize()!@#&color = rainbowColors and {!@#&	{colors.red, colors.orange, colors.yellow, colors.white};!@#&	{colors.green, colors.lime, colors.yellow, colors.white};!@#&	{colors.blue, colors.cyan, colors.lightBlue, colors.white};!@#&	{colors.purple, colors.magenta, colors.pink, colors.white};!@#&} or color!@#&local len = rainbowColors and #color[1] or #color!@#&if rainbowColors then!@#&	for i, t in ipairs(color) do!@#&		t[#t + 1] = background!@#&	end!@#&else!@#&	color[#color + 1] = background!@#&end!@#&local advance = function()!@#&	for k, t in pairs(fw) do!@#&		t[2] = t[3] == 1 and (t[2] + 0.5) or (t[2] - 1)!@#&		t = t[3] == 1 and (t[2] <= (y + len) and t or nil) or (t[2] >= 1 - len and t or nil)!@#&	end!@#&end!@#&local render = function()!@#&	for k, t in pairs(fw) do!@#&		for i = 1, len + 1 do!@#&			if t[2] - i >= 1 then!@#&				term.setCursorPos(t[1], math.floor(t[2]) - i)!@#&				term.setTextColor(t[3] == 1 and (rainbowColors and color[t[4]][i] or color[i]) or (rainbowColors and color[t[4]][len + 2 - i] or color[i]))!@#&				term.write(t[3] == 1 and (t[2] % 1 == 0 and \"-\" or \"_\") or string.char(166))!@#&			end!@#&		end!@#&	end!@#&	term.setCursorPos((x - #text[1]) / 2, y / 2)!@#&	term.setTextColor(text[2])!@#&	for char in text[1]:gmatch(\".\") do!@#&		if char ~=\" \" then!@#&			term.write(char)!@#&		else!@#&			local xpos, ypos = term.getCursorPos()!@#&			term.setCursorPos(xpos + 1, ypos)!@#&		end!@#&	end!@#&end!@#&local timer = os.startTimer(refresh)!@#&while true do!@#&	do!@#&		local e = {os.pullEvent(\"timer\")}!@#&		if e[2] ~= timer then return end!@#&		advance()!@#&		if math.random(len / refresh / frequency) == 1 then!@#&			local rand = math.random(2)!@#&			fw[{}] = {math.random(x), rand == 1 and 0.5 or y + 1, rand, rainbowColors and math.random(#color) or nil}!@#&		end!@#&		render()!@#&		timer = os.startTimer(refresh)!@#&	end!@#&end",["Pipes"]="local BOX = {!@#&	WIDTH = 20,!@#&	HEIGHT = 9,!@#&}!@#&!@#&local BUTTON = {!@#&	WIDTH = 18,!@#&}!@#&!@#&local TIMEOUT = 300 -- cache quotes for 5 minutes!@#&!@#&local URL = \"https://raw.githubusercontent.com/blunty666/CC-Programs-and-APIs/master/games/WhereIsDan/quotes.lua\"!@#&!@#&local WIDTH, HEIGHT = term.getSize()!@#&local CENTER_X, CENTER_Y = math.ceil(WIDTH/2), math.ceil(HEIGHT/2)!@#&!@#&do!@#&	local DELTA_X, DELTA_Y = math.floor(BOX.WIDTH/2), math.floor(BOX.HEIGHT/2)!@#&	!@#&	BOX.X_MIN = CENTER_X - DELTA_X!@#&	BOX.X_MAX = BOX.X_MIN + BOX.WIDTH - 1!@#&	!@#&	BOX.Y_MIN = CENTER_Y - DELTA_Y!@#&	BOX.Y_MAX = BOX.Y_MIN + BOX.HEIGHT - 1!@#&!@#&	BOX.BUTTON_TEXT = {!@#&		X = CENTER_X,!@#&		Y = BOX.Y_MIN + 2,!@#&	}!@#&!@#&	BOX.BUTTON = {!@#&		X_MIN = CENTER_X - math.floor(BUTTON.WIDTH/2),!@#&		X_MAX = CENTER_X - math.floor(BUTTON.WIDTH/2) + BUTTON.WIDTH - 1,!@#&!@#&		Y_MIN = BOX.Y_MIN + 1,!@#&		Y_MAX = BOX.Y_MIN + 3,!@#&	}!@#&!@#&	BOX.TEXT = {!@#&		X = CENTER_X,!@#&		Y = BOX.Y_MIN + 5,!@#&	}!@#&end!@#&!@#&local CHANGE_PROBABILITY = 0.15!@#&!@#&local particles = {}!@#&!@#&local function randomColour()!@#&	return 2^(math.random(0, 14))!@#&end!@#&!@#&local directions = {!@#&	[0] = vector.new(0, -1, 0),!@#&	[1] = vector.new(1, 0, 0),!@#&	[2] = vector.new(0, 1, 0),!@#&	[3] = vector.new(-1, 0, 0),!@#&}!@#&!@#&local function newParticle(x, y, colour, directionIndex)!@#&	return {!@#&		position = vector.new(x, y, 0),!@#&		colour = colour,!@#&		directionIndex = directionIndex,!@#&		direction = directions[directionIndex],!@#&		distanceTravelled = 0,!@#&	}!@#&end!@#&!@#&local function isInTerm(x, y)!@#&	return 1 <= x and x <= WIDTH and 1 <= y and y <= HEIGHT!@#&end!@#&!@#&local function shouldChangeDirection(particle)!@#&	return math.random() < CHANGE_PROBABILITY!@#&end!@#&!@#&local function shouldDraw(particle)!@#&	local x, y = particle.position.x, particle.position.y!@#&	return not (BOX.X_MIN <= x and x <= BOX.X_MAX and BOX.Y_MIN <= y and y <= BOX.Y_MAX)!@#&end!@#&!@#&local function draw(particle)!@#&	term.setCursorPos(particle.position.x, particle.position.y)!@#&	term.setBackgroundColour(particle.colour)!@#&	term.write(\" \")!@#&end!@#&!@#&local function updateParticles()!@#&	while true do!@#&		for _, particle in ipairs(particles) do!@#&			local nextPosition = particle.position + particle.direction!@#&			if not isInTerm(nextPosition.x, nextPosition.y) or shouldChangeDirection(particle) then!@#&!@#&				local directionDelta = (math.random() > 0.5 and 1) or -1!@#&				local newDirectionIndex, newDirection = particle.directionIndex, nil!@#&				repeat!@#&					newDirectionIndex = (newDirectionIndex + directionDelta) % 4!@#&					newDirection = directions[newDirectionIndex]!@#&					nextPosition = particle.position + newDirection!@#&				until isInTerm(nextPosition.x, nextPosition.y)!@#&				!@#&				-- update direction!@#&				particle.directionIndex = newDirectionIndex!@#&				particle.direction = newDirection!@#&!@#&				-- reset distanceTravelled!@#&				particle.distanceTravelled = 0!@#&			end!@#&!@#&			-- move particle!@#&			particle.position = nextPosition!@#&!@#&			-- increase distanceTravelled!@#&			particle.distanceTravelled = particle.distanceTravelled + 1!@#&!@#&			-- check if should draw particle and draw!@#&			if shouldDraw(particle) then!@#&				draw(particle)!@#&			end!@#&		end!@#&		sleep(0.05)!@#&	end!@#&end!@#&!@#&local function writeText(xPos, yPos, text, bgCol, textCol)!@#&	if bgCol then term.setBackgroundColour(bgCol) end!@#&	if textCol then term.setTextColour(textCol) end!@#&	term.setCursorPos(xPos, yPos)!@#&	term.write(text)!@#&end!@#&!@#&local function writeTextAligned(text, xPos, yPos, bgCol, textCol)!@#&	local startX = xPos - math.ceil(#text/2)!@#&	writeText(startX, yPos, text, bgCol, textCol)!@#&end!@#&!@#&local function drawButton(colour)!@#&	writeTextAligned(\"SpeedOS\", BOX.BUTTON_TEXT.X, BOX.BUTTON_TEXT.Y, colour, colours.white)!@#&end!@#&!@#&local function searchBarTimer()!@#&	return math.random() / 4!@#&end!@#&!@#&local function handleEvents()!@#&	local quotes = {!@#&		\"<INSERT TEXT HERE>\",!@#&	}!@#&	local requested = false!@#&	local cachedTime = -(math.huge)!@#&!@#&	local clicked = false!@#&!@#&	local updateTimer = false!@#&	local counter = 1!@#&!@#&	local event = {os.pullEventRaw()}!@#&	while true do!@#&		if event[1] == \"terminate\" or (event[1] == \"char\" and string.lower(event[2]) == \"q\") then!@#&			break!@#&		elseif event[1] == \"mouse_click\" then!@#&			if event[2] == 1 and (BOX.BUTTON.X_MIN <= event[3] and event[3] <= BOX.BUTTON.X_MAX) and (BOX.BUTTON.Y_MIN <= event[4] and event[4] <= BOX.BUTTON.Y_MAX) then!@#&				clicked = true!@#&				drawButton(colours.red)!@#&			end!@#&		elseif event[1] == \"mouse_up\" then!@#&			if clicked then!@#&				drawButton(colours.green)!@#&				if os.clock() - cachedTime > TIMEOUT then!@#&					if not requested then!@#&						http.request(URL)!@#&						requested = true!@#&					end!@#&				end!@#&				if not updateTimer then!@#&					updateTimer = os.startTimer(searchBarTimer())!@#&					writeText(BOX.X_MIN, BOX.TEXT.Y, string.rep(\" \", BOX.WIDTH), colours.black)!@#&					writeTextAligned(\"Searching for Dan...\", BOX.TEXT.X, BOX.TEXT.Y + 1, colours.black, colours.white)!@#&				end!@#&				clicked = false!@#&			end!@#&		elseif event[1] == \"http_success\" and event[2] == URL then!@#&!@#&			quotes = textutils.unserialise(event[3].readAll())!@#&			requested = false!@#&			cachedTime = os.clock()!@#&		!@#&		elseif event[1] == \"timer\" then!@#&			if event[2] == updateTimer then!@#&				if counter <= BOX.WIDTH - 2 then!@#&					writeText(BOX.X_MIN + 1, BOX.TEXT.Y, string.rep(\" \", counter), colours.cyan)!@#&					updateTimer = os.startTimer(searchBarTimer())!@#&					counter = counter + 1!@#&				else!@#&					writeText(BOX.X_MIN, BOX.TEXT.Y, string.rep(\" \", BOX.WIDTH), colours.black)!@#&					writeText(BOX.X_MIN, BOX.TEXT.Y + 1, string.rep(\" \", BOX.WIDTH), colours.black)!@#&					writeTextAligned(quotes[math.random(1, #quotes)], BOX.TEXT.X, BOX.TEXT.Y, colours.black, colours.white)!@#&					updateTimer = false!@#&					counter = 1!@#&				end!@#&			end!@#&		end!@#&		event = {os.pullEventRaw()}!@#&	end!@#&end!@#&!@#&term.setBackgroundColour(colours.black)!@#&term.clear()!@#&!@#&drawButton(colours.green)!@#&writeTextAligned(\"Press 'q' to Quit\", BOX.TEXT.X, BOX.TEXT.Y + 3, colours.black, colours.white)!@#&!@#&for i = 1, 25 do!@#&	local x = math.random(1, WIDTH)!@#&	local y = math.random(1, HEIGHT)!@#&	local colour = randomColour()!@#&	local directionIndex = math.random(0, 3)!@#&	table.insert(particles, newParticle(x, y, colour, directionIndex))!@#&end!@#&!@#&parallel.waitForAny(handleEvents, updateParticles)!@#&!@#&term.setBackgroundColour(colours.black)!@#&term.setTextColour(colours.white)!@#&term.setCursorPos(1, 1)!@#&term.clear()",["Bubbles"]="local bubbles = {}!@#&local bubbleChars = { \"0\", \"O\", \"o\", \",\", \"*\" }!@#&local x, y = term.getSize()!@#&term.setBackgroundColor( colors.blue )!@#&term.setTextColor( colors.lightBlue )!@#&term.clear()!@#&!@#&local rise = {!@#&	[\"0\"] = 3,!@#&	O = 3,!@#&	o = 2,!@#&	[\",\"] = 1,!@#&	[\"*\"] = 1,!@#&	[\".\"] = 1,!@#&}!@#&!@#&for i = 1, x, 3 do!@#&	bubbles[ #bubbles + 1 ] = { c = bubbleChars[ math.random( 1, #bubbleChars ) ], x = i + math.random( 0, 2 ), y = y - math.random( 0, 3 ), ly = 1}!@#&end!@#&!@#&local id!@#&!@#&while true do!@#&	id = os.startTimer( 0.05 )!@#&	for _, bubble in ipairs( bubbles ) do!@#&		if bubble.y < 1 then!@#&			bubble.y = y!@#&			bubble.c = bubbleChars[ math.random( 1, #bubbleChars ) ]!@#&			bubble.lx = bubble.x!@#&			bubble.x = bubble.x + math.random( -1, 1 )!@#&		end!@#&		term.setCursorPos( bubble.lx or bubble.x, bubble.ly )!@#&		term.write( ' ' )!@#&		term.setCursorPos( bubble.x, bubble.y )!@#&		term.write( bubble.c )!@#&		bubble.ly = bubble.y!@#&		local doesRise = math.random( 0, rise[ bubble.c ] ) > 0!@#&		bubble.y = bubble.y - (doesRise and 1 or 0)!@#&		bubble.lx = nil!@#&	end!@#&	while true do!@#&		local event, tid = os.pullEvent( \"timer\" )!@#&		if id == tid then!@#&			break!@#&		end!@#&	end!@#&end",["DigitalClock"]="--giant clock--!@#&local sSide = {!@#&\"left\",!@#&\"right\",!@#&\"top\",!@#&\"bottom\",!@#&\"back\",!@#&\"front\"!@#&}!@#&--peripheral check!@#&for i=1,#sSide do!@#&if peripheral.isPresent(sSide[i]) then!@#&	if peripheral.getType(sSide[i]) == \"monitor\" then mon = peripheral.wrap(sSide[i])!@#&	elseif peripheral.getType(sSide[i])==nil then!@#&		error(\"No peripheral attached\")!@#&	end!@#&end!@#&end!@#&--variables!@#&local digits = {}!@#&digits[0]={\"   ___  \",!@#& \"  / _ \\\\ \",!@#& \" | | | |\",!@#& \" | | | |\",!@#& \" | |_| |\",!@#& \"  \\\\___/ \"}!@#&digits[1]={\"   __   \",!@#& \"  /_ |  \",!@#& \"   | |  \",!@#& \"   | |  \",!@#& \"   | |  \",!@#& \"   |_|  \"}!@#&digits[2]={\"  ___   \",!@#& \" |__ \\\\  \",!@#& \"    ) | \",!@#& \"   / /  \",!@#& \"  / /_  \",!@#& \" |____| \"}!@#&digits[3]={\"  ____  \",!@#& \" |___ \\\\ \",!@#& \"   __) |\",!@#& \"  |__ < \",!@#& \"  ___) |\",!@#& \" |____/ \"}!@#&digits[4]={\" _  _   \",!@#& \"| || |  \",!@#& \"| || |_ \",!@#& \"|__   _|\",!@#& \"   | |  \",!@#& \"   |_|  \"}!@#&digits[5]={\"  _____ \",!@#& \" | ____|\",!@#& \" | |__  \",!@#& \" |___ \\\\ \",!@#& \"  ___) |\",!@#& \" |____/ \"}!@#&digits[6]={\"    __  \",!@#& \"   / /  \",!@#& \"  / /_  \",!@#& \" | '_ \\\\ \",!@#& \" | (_) |\",!@#& \"  \\\\___/ \"}!@#&digits[7]={\" ______ \",!@#& \"|____  |\",!@#& \"    / / \",!@#& \"   / /  \",!@#& \"  / /   \",!@#& \" /_/    \"}!@#&digits[8]={\"   ___  \",!@#& \"  / _ \\\\ \",!@#& \" | (_) |\",!@#& \"  > _ < \",!@#& \" | (_) |\",!@#& \"  \\\\___/ \"}!@#&digits[9]={\"   ___  \",!@#& \"  / _ \\\\ \",!@#& \" | (_) |\",!@#& \"  \\\\__, |\",!@#& \"    / / \",!@#& \"   /_/  \"}!@#&digits[10]={\"   ___  \",!@#& \"  / _ \\\\ \",!@#& \" | | | |\",!@#& \" | | | |\",!@#& \" | |_| |\",!@#& \"  \\\\___/ \"}!@#&digits[11]={\"   __   \",!@#& \"  /_ |  \",!@#& \"   | |  \",!@#& \"   | |  \",!@#& \"   | |  \",!@#& \"   |_|  \"}!@#&digits[12]={\"  ___   \",!@#& \" |__ \\\\  \",!@#& \"    ) | \",!@#& \"   / /  \",!@#& \"  / /_  \",!@#& \" |____| \"}!@#&local colon = {!@#& \"   \",!@#& \" _ \",!@#& \"(_)\",!@#& \"   \",!@#& \" _ \",!@#& \"(_)\"!@#&}!@#&local am = {!@#&\"     ___       ___  ___  \",!@#&\"    /   \\\\     |   \\\\/   | \",!@#&\"   /  ^  \\\\    |  \\\\  /  | \",!@#&\"  /  /_\\\\  \\\\   |  |\\\\/|  | \",!@#&\" /  _____  \\\\  |  |  |  | \",!@#&\"/__/     \\\\__\\\\ |__|  |__| \"!@#&}!@#&local pm = {!@#&\" ______    ___  ___  \",!@#&\"|   _  \\\\  |   \\\\/   | \",!@#&\"|  |_)  | |  \\\\  /  | \",!@#&\"|   ___/  |  |\\\\/|  | \",!@#&\"|  |      |  |  |  | \",!@#&\"|__|      |__|  |__| \"!@#&}!@#&--functions!@#&function digits12(h,m)!@#&mon.clear()!@#&--hours!@#&if h == 0 then!@#&	for i = 1,6 do!@#&		mon.setCursorPos(1,i)!@#&		mon.write(digits[1][i])!@#&		mon.setCursorPos(11,i)!@#&		mon.write(digits[2][i])!@#&	end!@#&elseif h < 12 then!@#&	if h < 10 and h >= 1 then!@#&		for i = 1,6 do!@#&			mon.setCursorPos(1,i)!@#&			mon.write(digits[0][i])!@#&			mon.setCursorPos(11,i)!@#&			mon.write(digits[h][i])!@#&		end!@#&	elseif h >= 10 and h < 20 then!@#&		for i = 1,6 do!@#&			mon.setCursorPos(1,i)!@#&			mon.write(digits[1][i])!@#&			mon.setCursorPos(11,i)!@#&			mon.write(digits[h][i])!@#&		end!@#&	end!@#&elseif h == 12 then!@#&	for i = 1,6 do!@#&		mon.setCursorPos(1,i)!@#&		mon.write(digits[1][i])!@#&		mon.setCursorPos(11,i)!@#&		mon.write(digits[2][i])!@#&	end!@#&elseif h > 12 and h < 24 then!@#&	local h = h - 12!@#&	if h < 10 then!@#&		mon.setCursorPos(1,1)!@#&		for i = 1,6 do!@#&			mon.setCursorPos(1,i)!@#&			mon.write(digits[0][i])!@#&			mon.setCursorPos(11,i)!@#&			mon.write(digits[h][i])!@#&		end!@#&	elseif h >= 10 and h < 20 then!@#&		for i = 1,6 do!@#&			mon.setCursorPos(1,i)!@#&			mon.write(digits[1][i])!@#&			mon.setCursorPos(11,i)!@#&			mon.write(digits[h][i])!@#&		end!@#&	end!@#&end!@#&--colon!@#&for i = 1,6 do!@#&	mon.setCursorPos(20,i)!@#&	mon.write(colon[i])!@#&end!@#&--minutes!@#&if m < 10 then!@#&	for i = 1,6 do!@#&		mon.setCursorPos(24,i)!@#&		mon.write(digits[0][i])!@#&		mon.setCursorPos(34,i)!@#&		mon.write(digits[m][i])!@#&	end!@#&elseif m >=10 and m < 20 then!@#&	local m = m-10!@#&	for i = 1,6 do!@#&		mon.setCursorPos(24,i)!@#&		mon.write(digits[1][i])!@#&		mon.setCursorPos(34,i)!@#&		mon.write(digits[m][i])!@#&	end!@#&elseif m >=20 and m < 30 then!@#&	local m = m-20!@#&	for i = 1,6 do!@#&		mon.setCursorPos(24,i)!@#&		mon.write(digits[2][i])!@#&		mon.setCursorPos(34,i)!@#&		mon.write(digits[m][i])!@#&	end!@#&elseif m >=30 and m < 40 then!@#&	local m = m-30!@#&	for i = 1,6 do!@#&		mon.setCursorPos(24,i)!@#&		mon.write(digits[3][i])!@#&		mon.setCursorPos(34,i)!@#&		mon.write(digits[m][i])!@#&	end!@#&elseif m >=40 and m < 50 then!@#&	local m = m-40!@#&	for i = 1,6 do!@#&		mon.setCursorPos(24,i)!@#&		mon.write(digits[4][i])!@#&		mon.setCursorPos(34,i)!@#&		mon.write(digits[m][i])!@#&	end!@#&elseif m >=50 then!@#&	local m = m-50!@#&	for i = 1,6 do!@#&		mon.setCursorPos(24,i)!@#&		mon.write(digits[5][i])!@#&		mon.setCursorPos(34,i)!@#&		mon.write(digits[m][i])!@#&	end!@#&end!@#&if h < 12 then!@#&	for i = 1,6 do!@#&	mon.setCursorPos(44,i)!@#&	mon.write(am[i])!@#&	end!@#&elseif h >= 12 then!@#&	for i = 1,6 do!@#&	mon.setCursorPos(44,i)!@#&	mon.write(pm[i])!@#&	end!@#&end!@#&end!@#&!@#&!@#&while true do!@#&local MChours = math.floor(os.time())!@#&local MCminutes = math.floor((os.time()-math.floor(os.time()))*60)!@#&digits12(MChours,MCminutes)!@#&sleep(0)!@#&end",["Spectrum"]="w,h = term.getSize()!@#&while true do!@#&term.clear()!@#&for i = 1,(w*h)/10 do!@#&term.setBackgroundColor(colors.black)!@#&term.setTextColor(colors.lightGray)!@#&term.setCursorPos(math.random(1,w),math.random(1,h))!@#&write(\"*\")!@#&end!@#&for i = 1,w do!@#&paintutils.drawLine(i,h,i,math.random(h-10,h),colors.red)!@#&term.setBackgroundColor(colors.black)!@#&end!@#&term.setCursorPos(1,1)!@#&write(\"Wait_\")!@#&sleep(0.5)!@#&end",["TimeSpace"]="local showStars = true!@#&local showTime = true!@#&local starsColor = {colors.white, colors.gray}!@#&local starTwinkleColor = {colors.black, colors.orange}!@#&local timeColor = {colors.white, colors.cyan}!@#&!@#&--End User Settings!@#&!@#&--Don't modify unless you are brave:!@#&local tArgs = { ... }!@#&local mon!@#&local w, h = 1,1!@#&local pix={}!@#&local ss_running = true!@#&local tX = {}!@#&local tY = {}!@#&local tXD = {}!@#&local tYD = {}!@#&local positions = {\"top\", \"bottom\", \"left\", \"right\", \"front\", \"back\"}!@#&local pix = {}!@#&function set(monID,r,c,v)!@#&    if not pix[monID] then!@#&        pix[monID] = {}!@#&    end!@#&    pix[monID][w * r + c] = v!@#&end!@#&function get(monID,r,c)!@#&    if pix[monID] then!@#&        --if #pix[monID] >= w * r + c then!@#&            return pix[monID][w * r + c]!@#&        --end!@#&    end!@#&    return 0!@#&end!@#&function setPix(monID)!@#&    for i=1, ((w*h)/10) do!@#&        set(monID,math.random(1, h),math.random(1, w),math.random(0, 1))!@#&    end!@#&end!@#&!@#&local skipMove = 1!@#&local addRow = 1!@#&local time,timeFmt,timeLen!@#&function getColorMode(monitor)!@#&    if monitor.isColor() then!@#&        return 2!@#&    else!@#&        return 1!@#&    end!@#&end!@#&function update(monitor, monID)!@#&    mon = monitor!@#&    --if mon then!@#&        w, h = mon.getSize()!@#&        local x, y, i, flicker!@#&        mon.clear()!@#&        mon.setBackgroundColor(colors.black)!@#&        local colorMode = getColorMode(mon)!@#&        for y=1, h do!@#&            for x=1, w do!@#&                if get(monID,y,x) == 1 then!@#&                    flicker = math.random(0, 100)!@#&                    mon.setTextColor(starsColor[colorMode])!@#&                    if flicker == 0 then!@#&                        mon.setTextColor(starTwinkleColor[colorMode])!@#&                    end!@#&                    mon.setCursorPos(x, y)!@#&                    mon.write(\".\")!@#&                end!@#&            end!@#&        end!@#&        if addRow == 0 then!@#&            for y=2, h do!@#&                for x=1, w do!@#&                    set(monID,y-1,x,get(monID,y,x))!@#&                end!@#&            end!@#&            for x=1, w do!@#&                set(monID,h,x,0)!@#&            end!@#&            for i=1, (w/10) do!@#&                set(monID,h,math.random(1, w),math.random(0, 1))!@#&            end!@#&        end!@#&        if skipMove == 0 then!@#&            tX[monID] = tX[monID] + tXD[monID]!@#&            tY[monID] = tY[monID] + tYD[monID]!@#&            if tX[monID] > w-timeLen+1 then!@#&                tX[monID] = w-timeLen+1!@#&                tXD[monID] = -1!@#&            end!@#&            if tX[monID] < 1 then!@#&                tX[monID] = 1!@#&                tXD[monID] = 1!@#&            end!@#&            if tY[monID] > h then!@#&                tY[monID] = h!@#&                tYD[monID] = -1!@#&            end!@#&            if tY[monID] < 1 then!@#&                tY[monID] = 1!@#&                tYD[monID] = 1!@#&            end!@#&        end!@#&        mon.setTextColor(timeColor[colorMode])!@#&        mon.setCursorPos(tX[monID], tY[monID])!@#&        mon.write(timeFmt)!@#&    --end!@#&end!@#&function updateSM(monitor, monID)!@#&    mon = monitor!@#&    --if mon then!@#&        w, h = mon.getSize()!@#&        local x, y, i, flicker!@#&        mon.clear()!@#&        mon.setBackgroundColor(colors.black)!@#&        local colorMode = getColorMode(mon)!@#&!@#&        -- Time!@#&        local time = os.time()!@#&        --we want to manually parse am/pm!@#&        timeFmt = textutils.formatTime(time, false)!@#&        local len = string.len(timeFmt)!@#&        local part = string.sub(timeFmt, len-1)!@#&        timeFmt = string.sub(timeFmt, 1, len-3)..part!@#&        timeLen = string.len(timeFmt)!@#&        !@#&        for y=1, h do!@#&            for x=1, w do!@#&                if get(monID,y,x) == 1 then!@#&                    flicker = math.random(0, 100)!@#&                    mon.setTextColor(starsColor[colorMode])!@#&                    if flicker == 0 then!@#&                        mon.setTextColor(starTwinkleColor[colorMode])!@#&                    end!@#&                    mon.setCursorPos(x, y)!@#&                    mon.write(\".\")!@#&                end!@#&            end!@#&        end!@#&        if addRow == 0 then!@#&            for y=2, h do!@#&                for x=1, w do!@#&                    set(monID,y-1,x,get(monID,y,x))!@#&                end!@#&            end!@#&            for x=1, w do!@#&                set(monID,h,x,0)!@#&            end!@#&            for i=1, (w/10) do!@#&                set(monID,h,math.random(1, w),math.random(0, 1))!@#&            end!@#&        end!@#&        if skipMove == 0 then!@#&            tX[monID] = tX[monID] + tXD[monID]!@#&            tY[monID] = tY[monID] + tYD[monID]!@#&            if tX[monID] > w-timeLen+1 then!@#&                tX[monID] = w-timeLen+1!@#&                tXD[monID] = -1!@#&            end!@#&            if tX[monID] < 1 then!@#&                tX[monID] = 1!@#&                tXD[monID] = 1!@#&            end!@#&            if tY[monID] > h then!@#&                tY[monID] = h!@#&                tYD[monID] = -1!@#&            end!@#&            if tY[monID] < 1 then!@#&                tY[monID] = 1!@#&                tYD[monID] = 1!@#&            end!@#&        end!@#&        mon.setTextColor(timeColor[colorMode])!@#&        mon.setCursorPos(tX[monID], tY[monID])!@#&        mon.write(timeFmt)!@#&    --end!@#&end!@#&!@#&function updateTemplate(monitor, monID)!@#&    if monitor then!@#&        w,h = monitor.getSize()!@#&        if w and h then!@#&            if not pix[monID] then!@#&                tX[monID] = math.random(1, w-6)!@#&                tY[monID] = math.random(1, h)!@#&                tXD[monID] = 1!@#&                tYD[monID] = 1!@#&                setPix(monID)!@#&            end!@#&            if w > 7 and h > 5 then!@#&                update(monitor, monID)!@#&            else!@#&                updateSM(monitor, monID)!@#&            end!@#&        end!@#&    end!@#&end!@#&function updateAll()!@#&    updateTemplate(term, 0)!@#&    for i=1, #positions do!@#&        if peripheral.getType(positions[i]) == \"monitor\" then!@#&            updateTemplate(peripheral.wrap(positions[i]), i)!@#&        end!@#&    end!@#&end!@#&function cleanUp()!@#&    term.clear()!@#&    term.setCursorPos(1,1)!@#&    for i=1, #positions do!@#&        if peripheral.getType(positions[i]) == \"monitor\" then!@#&            local mon = peripheral.wrap(positions[i])!@#&            if mon then!@#&                mon.setTextScale(1)!@#&                mon.clear()!@#&                mon.setCursorPos(1,1)!@#&            end!@#&        end!@#&    end!@#&end!@#&local ss_timer = os.startTimer(0)!@#&while ss_running do!@#&    local event, p1, p2 = os.pullEvent()!@#&    if event == \"key\" then!@#&        ss_running = false!@#&    else!@#&        if event == \"timer\" and p1 == ss_timer then!@#&            ss_timer = os.startTimer(0.05)!@#&        end!@#&        if ss_running then!@#&            time = os.time()!@#&            timeFmt = textutils.formatTime(time, false)!@#&            timeLen = string.len(timeFmt)!@#&            updateAll()!@#&            skipMove = skipMove + 1 !@#&            if skipMove > 10 then            !@#&                skipMove = 0!@#&            end!@#&            addRow = addRow + 1!@#&            if addRow > 50 then!@#&                addRow = 0!@#&            end!@#&        end!@#&    end!@#&end!@#&!@#&cleanUp()",["Geometry"]="local largeFont = 0.5!@#&local smallFont = 0.5!@#&local tArgs = { ... }!@#&local mon!@#&local w, h = 1,1!@#&local ss_running = true!@#&local mons = {}!@#&local curMsg = {}!@#&local curColor = {}!@#&!@#&!@#&--colors!@#&local blues = {colors.blue, colors.cyan, colors.white}!@#&local greens = {colors.green, colors.lime, colors.white}!@#&local reds = {colors.red, colors.pink, colors.white}!@#&local grays = {colors.white, colors.lightGray, colors.gray, colors.black}!@#&local fire = {colors.white, colors.yellow, colors.orange, colors.red}!@#&local RedilRed = {colors.cyan, colors.yellow, colors.orange, colors.red}!@#&local hollow = {colors.black, colors.white}!@#&local merica = {colors.blue, colors.white, colors.red}!@#&local wtf = {!@#&    colors.white,!@#&    colors.orange,!@#&    colors.magenta,!@#&    colors.lightBlue,!@#&    colors.yellow,!@#&    colors.lime,!@#&    colors.pink,!@#&    colors.gray,!@#&    colors.lightGray,!@#&    colors.cyan,!@#&    colors.purple,!@#&    colors.blue,!@#&    colors.brown,!@#&    colors.green,!@#&    colors.red!@#&}!@#&!@#&--basic settings!@#&local randomize = true!@#&!@#&--these arrays allow you to define all the possible pallets!@#&local peakChoices =     {blues, grays, greens, reds, wtf}!@#&local barColorChoices = {fire, RedilRed, hollow, merica, greens, blues, reds, grays, wtf}!@#&!@#&--these arrays allow you to specify per-monitor settings!@#&local positions =   {\"term\",    \"top\",      \"bottom\",   \"left\",     \"right\",    \"front\",    \"back\"}     --position/order of the monitor!@#&local reverse =     {false,     false,      true,       false,      false,      false,      false}      --this means \"flip\" the axis!@#&local horizontal =  {true,      true,       true,       false,      true,       true,       true}       --true if horizontal, false if vertical!@#&local peaks =       {blues,     blues,      blues,      blues,      blues,      blues,      blues}      --which peak colors should we show?!@#&local barColors =   {fire,      fire,       fire,       fire,       fire,       fire,       fire}       --which bar colors should we show?!@#&local columns =     {4,         2,          5,          3,          6,          4,          4}          --number of columns to render!@#&local modes =       {\"stack3\",  \"stack3\",   \"stack3\",   \"stack3\",   \"stack3\",   \"stack3\",   \"stack3\"}   --how do we paint the bars? \"split3\", \"solid\" OR \"stack3\"!@#&!@#&--do we split the meter down the middle?!@#&local centered = {true, false, false, false, true, false, false}!@#&!@#&--not settings!@#&local nextChange, lastClock = {},{}!@#&local skipMove = 1!@#&!@#&function randomizeMonitor(monitor, monID)!@#&  peaks[monID] = peakChoices[math.random(1,#peakChoices)]!@#&  barColors[monID] = barColorChoices[math.random(1,#barColorChoices)]!@#&  reverse[monID] = math.random(0,1)==1!@#&  horizontal[monID] = math.random(0,1)==1!@#&  centered[monID] = math.random(0,1)==1!@#&  nextChange[monID] = math.random(3,6)!@#&  lastClock[monID] = os.clock()!@#&end!@#&!@#&function getColorMode(monitor)!@#&    if monitor.isColor() then!@#&        return 2!@#&    else!@#&        return 1!@#&    end!@#&end!@#&local chars = {\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"i\", \"j\", \"k\", \"l\", \"m\", \"n\", \"o\", \"p\", \"q\", \"r\", \"s\", \"t\", \"u\", \"v\", \"w\", \"x\", \"y\", \"z\",\"0\",\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\", \"@\", \"#\", \"$\", \"%\", \"&\", \"?\", \"!\", \"*\"}!@#&!@#&function regen(monID, c, s)!@#&    len = math.random(0,math.random(1,s))!@#&    local lastHeight=0!@#&    local lastTime = os.clock()!@#&    if mons[monID].cols[c] then!@#&      lastHeight = mons[monID].cols[c].lastHeight!@#&      lastTime = mons[monID].cols[c].lastTime!@#&      if len > lastHeight then!@#&        lastHeight = len!@#&        lastTime = os.clock()!@#&      end!@#&      if lastHeight > s-1 then!@#&        lastHeight = s-1!@#&      end!@#&      if os.clock() - lastTime > 1 then!@#&        lastHeight=lastHeight-1!@#&        if lastHeight < 0 then!@#&          lastHeight = 0!@#&        end!@#&      end!@#&    end!@#&    mons[monID].cols[c] = {length=len, x=c, y=s, speed=math.random(1,3), lastHeight=lastHeight, lastTime=lastTime}!@#&end!@#&function update(monitor, monID)!@#&    mon = monitor!@#&    w, h = mon.getSize()!@#&    local colorMode = getColorMode(mon)!@#&    if colorMode == 1 then!@#&      mon.setBackgroundColor(colors.black)!@#&    else!@#&      mon.setBackgroundColor(colors.black)!@#&    end!@#&    mon.clear()!@#&    if horizontal[monID] then!@#&      !@#&      local hh = h!@#&      if centered[monID] then hh = h/2 end!@#&      !@#&      local cols = w / columns[monID]!@#&      local c, lastUpdate = -1!@#&      for cd=0, w-1 do!@#&          c = math.floor(cd/cols)+1!@#&          if lastUpdate ~= c then!@#&            lastUpdate = c!@#&            regen(monID, c, hh)!@#&          end!@#&          if mons[monID] then!@#&              col = mons[monID].cols[c]!@#&              if col then!@#&                  local x, y, i!@#&                  for ii=0, col.length-1, 1 do!@#&                      local y = hh-ii!@#&                      if colorMode == 1 then!@#&                          mon.setBackgroundColor(colors.white)!@#&                      else!@#&                          if modes[monID] == \"stack3\" then!@#&                              local tmpPercent = col.length / #barColors[monID]!@#&                              for cc=1, #barColors[monID] do!@#&                                local curSpot = tmpPercent*(#barColors[monID] - (cc-1))!@#&                                if ii < curSpot then!@#&                                  mon.setBackgroundColor(barColors[monID][#barColors[monID] - (cc-1)])!@#&                                end!@#&                              end!@#&                          elseif modes[monID] == \"solid\" then!@#&                              local tmpPercent = hh / #barColors[monID]!@#&                              for cc=1, #barColors[monID] do!@#&                                local curSpot = tmpPercent*(#barColors[monID] - (cc-1))!@#&                                if col.length < curSpot then!@#&                                  mon.setBackgroundColor(barColors[monID][#barColors[monID] - (cc-1)])!@#&                                end!@#&                              end!@#&                          elseif modes[monID] == \"split3\" then!@#&                              local tmpPercent = hh / #barColors[monID]!@#&                              for cc=1, #barColors[monID] do!@#&                                local curSpot = tmpPercent*(#barColors[monID] - (cc-1))!@#&                                if ii < curSpot then!@#&                                  mon.setBackgroundColor(barColors[monID][#barColors[monID] - (cc-1)])!@#&                                end!@#&                              end!@#&                          end!@#&                      end!@#&                      if reverse[monID] then!@#&                          mon.setCursorPos(cd+1, hh - y)!@#&                          mon.write(\" \")!@#&                          if centered[monID] then!@#&                              mon.setCursorPos(cd+1, hh + y)!@#&                              mon.write(\" \")!@#&                          end!@#&                      else!@#&                          mon.setCursorPos(cd+1, y)!@#&                          mon.write(\" \")!@#&                          if centered[monID] then!@#&                              mon.setCursorPos(cd+1, hh + (hh-y)+1)!@#&                              mon.write(\" \")!@#&                          end!@#&                      end!@#&                  end!@#&                  !@#&                  local peakY = hh-col.lastHeight!@#&                  if colorMode == 1 then!@#&                    mon.setBackgroundColor(colors.white)!@#&                  else!@#&                    local tmpPercent = hh / #peaks[monID]!@#&                    for cc=1, #peaks[monID] do!@#&                      local curSpot = tmpPercent*(#peaks[monID] - (cc-1))!@#&                      if peakY < curSpot then!@#&                        mon.setBackgroundColor(peaks[monID][#peaks[monID] - (cc-1)])!@#&                      end!@#&                    end!@#&                  end!@#&                  if reverse[monID] then!@#&                      mon.setCursorPos(cd+1, hh - peakY)!@#&                      mon.write(\" \")!@#&                      if centered[monID] then!@#&                          mon.setCursorPos(cd+1, hh + peakY)!@#&                          mon.write(\" \")!@#&                      end!@#&                  else!@#&                      mon.setCursorPos(cd+1, peakY)!@#&                      mon.write(\" \")!@#&                      if centered[monID] then!@#&                          mon.setCursorPos(cd+1, hh + (hh-peakY)+1)!@#&                          mon.write(\" \")!@#&                      end!@#&                  end!@#&              else!@#&                  regen(monID, c, hh)!@#&              end!@#&          else!@#&              regen(monID, c, hh)!@#&          end!@#&      end!@#&    else!@#&    !@#&      local ww = w!@#&      if centered[monID] then ww = w/2 end!@#&      !@#&      local cols = h / columns[monID]!@#&      local c, lastUpdate = -1!@#&      for rd=0, h-1 do!@#&          c = math.floor(rd/cols)+1!@#&          if lastUpdate ~= c then!@#&            lastUpdate = c!@#&            regen(monID, c, ww)!@#&          end!@#&          if mons[monID] then!@#&              col = mons[monID].cols[c]!@#&              if col then!@#&                  local x, y, i!@#&                  for ii=0, col.length-1, 1 do!@#&                      local y = ww-ii!@#&                      if colorMode == 1 then!@#&                          mon.setBackgroundColor(colors.white)!@#&                      else!@#&                          if modes[monID] == \"stack3\" then!@#&                              local tmpPercent = col.length / #barColors[monID]!@#&                              for cc=1, #barColors[monID] do!@#&                                local curSpot = tmpPercent*(#barColors[monID] - (cc-1))!@#&                                if ii < curSpot then!@#&                                  mon.setBackgroundColor(barColors[monID][#barColors[monID] - (cc-1)])!@#&                                end!@#&                              end!@#&                          elseif modes[monID] == \"solid\" then!@#&                              local tmpPercent = ww / #barColors[monID]!@#&                              for cc=1, #barColors[monID] do!@#&                                local curSpot = tmpPercent*(#barColors[monID] - (cc-1))!@#&                                if col.length < curSpot then!@#&                                  mon.setBackgroundColor(barColors[monID][#barColors[monID] - (cc-1)])!@#&                                end!@#&                              end!@#&                          elseif modes[monID] == \"split3\" then!@#&                              local tmpPercent = ww / #barColors[monID]!@#&                              for cc=1, #barColors[monID] do!@#&                                local curSpot = tmpPercent*(#barColors[monID] - (cc-1))!@#&                                if ii < curSpot then!@#&                                  mon.setBackgroundColor(barColors[monID][#barColors[monID] - (cc-1)])!@#&                                end!@#&                              end!@#&                          end!@#&                      end!@#&                      if reverse[monID] then!@#&                          mon.setCursorPos(ww - y, rd+1)!@#&                          mon.write(\" \")!@#&                          if centered[monID] then!@#&                              mon.setCursorPos(ww + y, rd+1)!@#&                              mon.write(\" \")!@#&                          end!@#&                      else!@#&                          mon.setCursorPos(y, rd+1)!@#&                          mon.write(\" \")!@#&                          if centered[monID] then!@#&                              mon.setCursorPos(ww + (ww-y), (rd)+1)!@#&                              mon.write(\" \")!@#&                          end!@#&                      end!@#&                  end!@#&                  !@#&                  local peakY = ww-col.lastHeight!@#&                  if colorMode == 1 then!@#&                    mon.setBackgroundColor(colors.white)!@#&                  else!@#&                    local tmpPercent = w / #peaks[monID]!@#&                    for cc=1, #peaks[monID] do!@#&                      local curSpot = tmpPercent*(#peaks[monID] - (cc-1))!@#&                      if peakY < curSpot then!@#&                        mon.setBackgroundColor(peaks[monID][#peaks[monID] - (cc-1)])!@#&                      end!@#&                    end!@#&                  end!@#&                  if reverse[monID] then!@#&                      mon.setCursorPos(ww - peakY, rd+1)!@#&                      mon.write(\" \")!@#&                      if centered[monID] then!@#&                          mon.setCursorPos(ww + peakY, rd+1)!@#&                          mon.write(\" \")!@#&                      end!@#&                  else!@#&                      mon.setCursorPos(peakY, rd+1)!@#&                      mon.write(\" \")!@#&                      if centered[monID] then!@#&                          mon.setCursorPos(ww + (ww-peakY), (rd)+1)!@#&                          mon.write(\" \")!@#&                      end!@#&                  end!@#&              else!@#&                  regen(monID, c, w)!@#&              end!@#&          else!@#&              regen(monID, c, w)!@#&          end!@#&      end!@#&    end!@#&end!@#&function updateTemplate(monitor, monID)!@#&    if monitor then!@#&        w,h = monitor.getSize()!@#&        if w and h then!@#&            if not mons[monID] then!@#&                if monitor ~= term then!@#&                    if w > 7 and h > 5 then!@#&                        monitor.setTextScale(largeFont)!@#&                    else!@#&                        monitor.setTextScale(smallFont)!@#&                    end!@#&                    w,h = monitor.getSize()!@#&                end!@#&                mons[monID] = {cols={}}!@#&                if randomize then!@#&                  randomizeMonitor(monitor, monID)!@#&                end!@#&            end!@#&            if randomize then!@#&              if os.clock() - lastClock[monID] > nextChange[monID] then!@#&                randomizeMonitor(monitor, monID)!@#&              end!@#&            end!@#&            update(monitor, monID)!@#&        end!@#&    end!@#&end!@#&function updateAll()!@#&    for i=1, #positions do!@#&        if positions[i] == \"term\" then!@#&            updateTemplate(term, i)!@#&        elseif peripheral.getType(positions[i]) == \"monitor\" then!@#&            updateTemplate(peripheral.wrap(positions[i]), i)!@#&        end!@#&    end!@#&end!@#&function cleanUp()!@#&    for i=1, #positions do!@#&        if positions[i] == \"term\" then!@#&            term.setBackgroundColor(colors.black)!@#&            term.setTextColor(colors.white)!@#&            term.clear()!@#&            term.setCursorPos(1,1)!@#&        elseif peripheral.getType(positions[i]) == \"monitor\" then!@#&            local mon = peripheral.wrap(positions[i])!@#&            if mon then!@#&                mon.setBackgroundColor(colors.black)!@#&                mon.setTextColor(colors.white)!@#&                mon.setTextScale(1)!@#&                mon.clear()!@#&                mon.setCursorPos(1,1)!@#&            end!@#&        end!@#&    end!@#&end!@#&local ss_timer = os.startTimer(0)!@#&while ss_running do!@#&    local event, p1, p2 = os.pullEvent()!@#&    if event == \"key\" then!@#&        ss_running = false!@#&    else!@#&        if event == \"timer\" and p1 == ss_timer then!@#&            ss_timer = os.startTimer(0.05)!@#&            updateAll()!@#&        end!@#&    end!@#&end!@#&!@#&cleanUp()",["Lines"]="local scr_x, scr_y = term.getSize()!@#&       !@#&local doit = function(move)!@#&  if not move then move = 0 end!@#&  local res1,res2!@#&  for a = 1, scr_y do!@#&    for b = 1, scr_x do!@#&      local x = b+math.floor(scr_x/2)!@#&      local y = a-math.ceil(scr_y/2)!@#&      res1 = math.abs( math.floor(math.sin((x/7)+move)*6) - y ) <= 2!@#&      term.setCursorPos(b,a)!@#&      if res1 then!@#&        term.write(\" \",\"7\",\"7\")!@#&      else!@#&        term.write(\" \")!@#&      end!@#&      res2 = math.abs( math.floor(math.cos((x/4)+(move*4))*3) - y+2 ) <= 1!@#&      term.setCursorPos(b,a)!@#&      if res2 then!@#&        term.write(\" \",\"8\",\"8\")!@#&      else!@#&        if not res1 then!@#&          if (x % 2 == 0) and ((y+math.floor(move*-10)+(x % 5)) % 5 <= 1) then!@#&            term.write(\"|\",\"7\",\"f\")!@#&          else!@#&            term.write(\" \")!@#&          end!@#&        end!@#&      end!@#&    end!@#&  end!@#&end!@#&!@#&while true do!@#&  for a = 1, 900 do!@#&    --term.clear()!@#&    doit(a/10)!@#&    sleep(0.05)!@#&  end!@#&end",["Clock"]="-- Analogue Clock!@#&-- (c) Ramdor 2013!@#&-- v1.6!@#&--!@#&-- changes!@#&-- v1.6 - added non filled face option (bFaceFilled = true  ... is the default)!@#&-- v1.5 - now uses computercraft paintutils line, re-worked circle code, auto find monitor!@#&-- v1.4 - colours added and some loop derps fixed!@#&-- v1.3 - added resize/auto scale and 0.5 textsize!@#&--        to double the effective resolution!@#&-- v1.2 - changed timer code!@#&-- v1.1 - tidy up!@#&-- v1.0 - initial release!@#&--!@#&-- You may edit/copy/redistribute/whatever this!@#&-- code in any way.  Just a credit listing this!@#&-- pastebin link (pastebin.com/LGNUpDzz) will be fine :)!@#&-- Have fun, I did :)!@#& !@#&-- see  http://www.youtube.com/watch?v=RrgOIGW0C-s   for some more info!@#& !@#&-- these two settings will hide/show!@#&-- the M and H that is on the end of the hand!@#&local bShowHourChar = false!@#&local bShowMinuteChar = false!@#&local bFaceFilled = false!@#& !@#&-- coloured clocks anyone?!@#&local nBackColour = colors.black!@#&local nFaceColour = colors.white!@#&local nHandColour = colors.blue!@#&local nTickColour = colors.lightBlue!@#& !@#&-- find the monitor and set it up!@#&local monitor = nil!@#&local i,side!@#&for i, side in pairs(rs.getSides()) do!@#&  if peripheral.getType(side) == \"monitor\" then!@#&    monitor = peripheral.wrap(side)!@#&    break!@#&  end!@#&end!@#&if monitor==nil then!@#&  print(\"NO MONITOR FOUND\")!@#&  print(\"Please attach a monitor and try again.\")!@#&  return!@#&end!@#& !@#&-- calculate scaling!@#&monitor.setTextScale(0.5)!@#&!@#&-- hackish fix to enable large monitor arrays enough time to initialise?!@#&os.sleep(1)!@#&!@#&local mw,mh = monitor.getSize()!@#&mw = mw / (15/10) -- 15x10 is w,h of 0.5 scale single monitor!@#&local minSize = (math.min(mw,mh) / 2) - 2!@#& !@#&-- clock radius in character. 18 is good for a 6x6 advanced monitor!@#&-- or you can use minSize which attempts to fit!@#&-- to monitor size automatically!@#&local nClockRad = minSize!@#& !@#&-- set up the screens!@#&term.clear()!@#&term.setCursorPos(1,1)!@#&print(\"Clock by Ramdor (c) 2013\")!@#&print(\"Press 'Q' to terminate.\")!@#&term.redirect(monitor)!@#&term.setBackgroundColor(nBackColour)!@#&term.clear()!@#& !@#&-- some variables!@#&local h = 0 -- parsed hour!@#&local m = 0 -- parsed minute!@#&local nOldHX = -1!@#&local nOldHY = -1!@#&local nOldMX = -1!@#&local nOldMY = -1!@#& !@#&local function plot(s,x,y)!@#&  term.setCursorPos(x,y)!@#&  term.write(s)!@#&end!@#& !@#&-- the clock face ticks!@#&local function ticks(nW,nH)!@#&  local nIndex!@#&  local x!@#&  local y!@#&  local xi!@#&  local yi!@#&  local nInRadius = nClockRad-(nClockRad/4)!@#&  local nOutRadius = nClockRad-2!@#& !@#&  local nxOutRad = nOutRadius + (nOutRadius/2)!@#&  local nyOutRad = nOutRadius!@#&  local nxInRad = nInRadius + (nInRadius/2)!@#&  local nyInRad = nInRadius!@#& !@#&  for nIndex=0,359,(360/12) do!@#&    x = nW + math.sin(math.rad(nIndex)) * nxOutRad!@#&    y = nH + math.cos(math.rad(nIndex)) * nyOutRad!@#& !@#&    xi = nW + math.sin(math.rad(nIndex)) * nxInRad!@#&    yi = nH + math.cos(math.rad(nIndex)) * nyInRad!@#&   !@#&    paintutils.drawLine(xi,yi,x,y,nTickColour)!@#&  end!@#&end!@#& !@#&-- draw the face (circle)!@#&-- by working out a quarter of the points!@#&-- then drawing lines from oposite quarter!@#&-- results in much faster circle code!@#&local function face(nW,nH,nRadius)!@#&  local nIndex!@#&  local x!@#&  local y!@#&  local nxRad = nRadius + (nRadius/2)!@#&  local nyRad = nRadius!@#&  local nOldX = -1!@#&  local nOldY = -1!@#& !@#&  local points = {}!@#&  local xy!@#&  local n = 1!@#& !@#&  for nIndex=0,89 do!@#&    x = math.sin(math.rad(nIndex)) * nxRad!@#&    y = math.cos(math.rad(nIndex)) * nyRad!@#&    x = math.floor(x)!@#&    y = math.floor(y)!@#& !@#&    -- only store positions if they are different from last time  !@#&    if x~=nOldX or y~=nOldY then!@#&      xy = {}!@#&      xy[1] = x!@#&      xy[2] = y!@#&      points[n] = xy!@#&     !@#&      if y~=nOldY or not bFaceFilled then!@#&        n=n+1!@#&      end!@#& !@#&      nOldX = x!@#&      nOldY = y!@#&    end!@#&  end!@#& !@#&  -- plot the circle!@#&  for nIndex=1,#points do!@#&    x = points[nIndex][1]!@#&    y = points[nIndex][2]!@#& !@#&    if bFaceFilled then!@#&      paintutils.drawLine(nW-x,nH+y,nW+x,nH+y,nFaceColour)!@#&      paintutils.drawLine(nW-x,nH-y,nW+x,nH-y,nFaceColour)!@#&    else!@#&      paintutils.drawPixel(nW-x,nH+y,nFaceColour)!@#&      paintutils.drawPixel(nW+x,nH+y,nFaceColour)!@#&      paintutils.drawPixel(nW-x,nH-y,nFaceColour)!@#&      paintutils.drawPixel(nW+x,nH-y,nFaceColour)!@#&    end!@#&  end!@#&end!@#& !@#&-- parse the time into H and M!@#&-- these are stored globally in h and m!@#&local function parseTime()!@#&  local t = os.time()!@#&  local sT = textutils.formatTime(t, true)!@#& !@#&  local n = string.find(sT, \":\")!@#& !@#&  if(n>0) then!@#&    h = tonumber(string.sub(sT,1,n-1))!@#&    m = tonumber(string.sub(sT,n+1))!@#&  end!@#&end!@#& !@#&-- plot minute hand!@#&-- it removes the previous minute hand!@#&-- then draws the new one!@#&local function plotM(nW,nH,nX,nY)!@#&  local nTmpColour!@#& !@#&  if(nOldMX==nX and nOldMY==nY) then!@#&    return!@#&  end!@#& !@#&  -- remove previous by drawing it again!@#&  -- in the face colour.  Also remove the!@#&  -- hand tag!@#&  if(nOldMX~=-1) then!@#&    if bFaceFilled then!@#&      nTmpColour = nFaceColour!@#&    else!@#&      nTmpColour = nBackColour!@#&    end!@#&    paintutils.drawLine(nW,nH,nOldMX,nOldMY,nTmpColour)!@#&     !@#&    if(bShowMinuteChar) then!@#&      plot(\".\",nOldMX,nOldMY)!@#&    end!@#&  end!@#& !@#&  nOldMX = nX!@#&  nOldMY = nY!@#& !@#&  paintutils.drawLine(nW,nH,nX,nY,nHandColour)!@#& !@#&  -- draw the centre O!@#&  term.setTextColor(colors.black)!@#&  term.setBackgroundColor(colors.lightGray)!@#&  plot(\"O\",nW,nH)!@#& !@#&  if(bShowMinuteChar) then!@#&    -- draw the minute hand tag!@#&    plot(\"M\",nX,nY)!@#&  end!@#&end!@#& !@#&-- plot hour hand!@#&-- it removes the previous hour hand!@#&-- then draws the new one!@#&local function plotH(nW,nH,nX,nY)!@#&  local nTmpColour!@#&  if(nOldHX==nX and nOldHY==nY) then!@#&    return!@#&  end!@#& !@#&  -- remove previous by drawing it again!@#&  -- in the face colour.  Also remove the!@#&  -- hand tag!@#&  if(nOldHX~=-1) then!@#&    if bFaceFilled then!@#&      nTmpColour = nFaceColour!@#&    else!@#&      nTmpColour = nBackColour!@#&    end!@#&    paintutils.drawLine(nW,nH,nOldHX,nOldHY,nTmpColour)!@#& !@#&    if(bShowHourChar) then!@#&      plot(\".\",nOldHX,nOldHY)!@#&    end!@#&  end!@#& !@#&  nOldHX = nX!@#&  nOldHY = nY!@#& !@#&  paintutils.drawLine(nW,nH,nX,nY,nHandColour)!@#& !@#&  if(bShowHourChar) then!@#&    -- draw the hour hand tag!@#&    term.setTextColor(colors.black)!@#&    term.setBackgroundColor(colors.lightGray)!@#&    plot(\"H\",nX,nY)!@#&  end!@#&end!@#& !@#&local fH!@#&local fM!@#&local fXH!@#&local fYH!@#&local fXM!@#&local fYM!@#&local nyMRadius = nClockRad - (nClockRad / 4)!@#&local nyHRadius = nClockRad - (nClockRad / 2)!@#& !@#&local nxMRadius = nyMRadius + (nyMRadius / 2)!@#&local nxHRadius = nyHRadius + (nyHRadius / 2)!@#&local nW, nH = term.getSize()!@#& !@#&nW = (nW / 2)+1!@#&nH = (nH / 2)+1!@#& !@#&-- plot the circle!@#&face(nW,nH,nClockRad + 1)!@#& !@#&local bRunning = true!@#&local nTimer!@#&nTimer = os.startTimer(0.25) -- the timer interval to update the clock!@#& !@#&while(bRunning) do!@#&  parseTime()!@#& !@#&  fH = (((h % 12)/12) + (m/60/12)) * 360!@#&  fM = (m/60) * 360!@#& !@#&  -- shift by half a circle!@#&  fH = fH + 180!@#&  fM = fM + 180!@#& !@#&  fXH = math.sin(math.rad(-fH))!@#&  fYH = math.cos(math.rad(fH))!@#&  fXM = math.sin(math.rad(-fM))!@#&  fYM = math.cos(math.rad(fM))!@#& !@#&  plotH(nW,nH,  nW + fXH * nxHRadius, nH + fYH * nyHRadius)!@#&  plotM(nW,nH, nW + fXM * nxMRadius, nH + fYM * nyMRadius)!@#& !@#&  -- draw the ticks on!@#&  ticks(nW,nH)!@#& !@#&  local event, param1 = os.pullEvent()!@#& !@#&  while (not (event==\"timer\" and param1==nTimer) and event~=\"char\") do!@#&    event, param1 = os.pullEvent()!@#&  end!@#& !@#&  if(event==\"char\") then!@#&     if(param1==\"q\" or param1==\"Q\") then!@#&       bRunning=false!@#&     end!@#&  elseif(event==\"timer\" and param1==nTimer) then!@#&     -- timer timed out, lets start again!@#&     nTimer = os.startTimer(0.25)!@#&  end!@#&end!@#& !@#&term.restore()!@#&print(\"Ended.\")",["Pulse"]="local chartbl = {\"*\",\"%\",\"@\"}!@#&local colortbl = {colors.blue, colors.lightBlue, colors.cyan, colors.green, colors.lime, colors.yellow, colors.pink, colors.magenta, colors.purple, colors.blue}!@#&!@#&local curCol, incCol, reverse, maxx, maxy = 1, 1, false, term.getSize()!@#&!@#&local function advClear( c, b, t )!@#&	term.setBackgroundColor( b )!@#&	term.setTextColor( t )!@#&	write( \"\\n\" .. c:rep( maxx ) .. \"\\n\" .. c:rep( maxx ) )!@#&end!@#&!@#&term.setCursorPos( 1, maxy )!@#&!@#&while true do!@#&	for theChar = 1, #chartbl do!@#&		advClear( chartbl[ theChar ], colortbl[ curCol ], colortbl[ curCol + (1) ] or colortbl[ 1 ] )!@#&		sleep( 0.05 )!@#&	end!@#&	for theChar = #chartbl, 1, -1 do!@#&		advClear( chartbl[ theChar ], colortbl[ curCol + (1) ] or colortbl[ 1 ], colortbl[ curCol ]  )!@#&		sleep( 0.05 )!@#&	end!@#&	curCol = curCol + 1!@#&	if curCol == #colortbl then!@#&		curCol = 1!@#&	end!@#&end",["Jungle"]="while true do!@#&print \"  SSSSSS   SSSSSS         =\"!@#&print \" SSSSSSSS    SSSSSSSS    =\"!@#&print \"SSSSSSSSSS  SSSSSSSSSS   =\"!@#&print \" I  XX I  I  XX   I   =\"!@#&print \"    XX I  I  XX   I   =\"!@#&print \"    XX             XX   I   =\"!@#&print \"    XX             XX       =\"!@#&print \"    XX             XX       =\"!@#&print \"    XX             XX       =\"!@#&print \"=======     ============\"!@#&print \"=======~~~~~~~============\"!@#&print \"==========================\"!@#&sleep(4)!@#&shell.run(\"clear\")!@#&print \"  SSSSSS   SSSSSS         =\"!@#&print \" SSSSSSSS    SSSSSSSS    =\"!@#&print \"SSSSSSSSSS  SSSSSSSSSS   =\"!@#&print \" I  XX I  I  XX   I   =\"!@#&print \"    XX I  I  XX   I   =\"!@#&print \"    XX I     XX   I   =\"!@#&print \"    XX             XX       =\"!@#&print \"    XX             XX       =\"!@#&print \"    XX             XX       =\"!@#&print \"=======     ============\"!@#&print \"=======~~~~~~~============\"!@#&print \"==========================\"!@#&sleep(4)!@#&shell.run(\"clear\")!@#&print \"  SSSSSS   SSSSSS         =\"!@#&print \" SSSSSSSS    SSSSSSSS    =\"!@#&print \"SSSSSSSSSS  SSSSSSSSSS   =\"!@#&print \" I  XX I  I  XX   I   =\"!@#&print \"    XX I  I  XX   I   =\"!@#&print \"    XX I     XX   I   =\"!@#&print \"    XX             XX   I   =\"!@#&print \"    XX             XX       =\"!@#&print \"    XX             XX       =\"!@#&print \"=======     ============\"!@#&print \"=======~~~~~~~============\"!@#&print \"==========================\"!@#&sleep(1)!@#&shell.run(\"clear\")!@#&print \"  SSSSSS   SSSSSS         =\"!@#&print \" SSSSSSSS    SSSSSSSS    =\"!@#&print \"SSSSSSSSSS  SSSSSSSSSS   =\"!@#&print \" I  XX I  I  XX   I   =\"!@#&print \"    XX I  I  XX   I   =\"!@#&print \"    XX I     XX   I   =\"!@#&print \"    XX             XX   I   =\"!@#&print \"    XX             XX       =\"!@#&print \"    XX             XX       =\"!@#&print \"=======     ============\"!@#&print \"=======~-~~~~~============\"!@#&print \"==========================\"!@#&sleep(1)!@#&shell.run(\"clear\")!@#&print \"  SSSSSS   SSSSSS         =\"!@#&print \" SSSSSSSS    SSSSSSSS    =\"!@#&print \"SSSSSSSSSS  SSSSSSSSSS   =\"!@#&print \" I  XX I  I  XX   I   =\"!@#&print \"    XX I  I  XX   I   =\"!@#&print \"    XX I     XX   I   =\"!@#&print \"    XX             XX   I   =\"!@#&print \"    XX             XX       =\"!@#&print \"    XX             XX       =\"!@#&print \"=======  -    ============\"!@#&print \"=======~~~~~~~============\"!@#&print \"==========================\"!@#&sleep(1)!@#&shell.run(\"clear\")!@#&print \"  SSSSSS   SSSSSS         =\"!@#&print \" SSSSSSSS    SSSSSSSS    =\"!@#&print \"SSSSSSSSSS  SSSSSSSSSS   =\"!@#&print \" I  XX I  I  XX   I   =\"!@#&print \"    XX I  I  XX   I   =\"!@#&print \"    XX I     XX   I   =\"!@#&print \"    XX             XX   I   =\"!@#&print \"    XX             XX       =\"!@#&print \"    XX             XX       =\"!@#&print \"=======     ============\"!@#&print \"=======~~~-~~~============\"!@#&print \"==========================\"!@#&sleep(1)!@#&shell.run(\"clear\")!@#&print \"  SSSSSS   SSSSSS         =\"!@#&print \" SSSSSSSS    SSSSSSSS    =\"!@#&print \"SSSSSSSSSS  SSSSSSSSSS   =\"!@#&print \" I  XX I  I  XX   I   =\"!@#&print \"    XX I  I  XX   I   =\"!@#&print \"    XX I     XX   I   =\"!@#&print \"    XX             XX   I   =\"!@#&print \"    XX             XX       =\"!@#&print \"    XX             XX       =\"!@#&print \"=======     ============\"!@#&print \"=======~~~~~~~============\"!@#&print \"==========================\"!@#&sleep(4)!@#&shell.run(\"clear\")!@#&end",["RandomColors"]="local maxX, maxY = term.getSize()!@#&local count = 1!@#&local d = {}!@#&!@#&local resetTimer = os.startTimer(5)!@#&local addTimer = os.startTimer(0.1)!@#&!@#&local function clear()!@#&  term.setBackgroundColor(colors.black)!@#&  term.clear()!@#&  term.setCursorPos(1,1)!@#&end!@#&!@#&while true do!@#&  event = { os.pullEventRaw() }!@#&!@#&  if event[1] == \"key\" or event[1] == \"mouse_click\" then!@#&    clear()!@#&    return!@#&  elseif event[1] == \"timer\" then!@#&    if event[2] == addTimer then!@#&      t = {!@#&      [\"x\"] = math.random(1,maxX),!@#&      [\"y\"] = math.random(1,maxY),!@#&      [\"color\"] = 2^math.random(0,15)!@#&      }!@#&!@#&      table.insert(d, t)!@#&      addTimer = os.startTimer(0.1)!@#&    elseif event[2] == resetTimer then!@#&      d = {}!@#&      resetTimer = os.startTimer(5)!@#&    end!@#&  end!@#&!@#&  clear()!@#&  for _, v in pairs( d ) do!@#&    term.setCursorPos( v[\"x\"], v[\"y\"] )!@#&    term.setBackgroundColor(v[\"color\"])!@#&    write(\" \")!@#&  end!@#&end",["NyanCat"]="!@#&local fps = 10!@#&!@#&!@#&local nyans = {!@#&  {!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,.,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,.,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \".,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,''''''''''''''',,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,>>>>>>>,,,,,,,,>>>>>>'@@@@@@@@@@@@@@@',,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \">>>>>>>>>>>>>>>>>>>>>>>'@@@$$$$$$$$$$$@@@',,,,,,,,,,,,,,,,,,,,,,\",!@#&  \">>>>>>>>>>>>>>>>>>>>>>>'@@$$$$$-$$-$$$$@@',,,,,,,,,,,,,,,,,,,,,,\",!@#&  \"&&&&&&&&&&&&&&&&&&&&&&&'@$$-$$$$$$''$-$$@','',,,,,,,,,,,,,,,,,,,\",!@#&  \"&&&&&&&&&&&&&&&&&&&&&&&'@$$$$$$$$'**'$$$@''**',,,,,,,,,,,,,,,,,,\",!@#&  \"&&&+++++++&&&&&&&&'''++'@$$$$$-$$'***$$$@'***',,,,,,,,,,,,,,,,,,\",!@#&  \"++++++++++++++++++**''+'@$$$$$$$$'***''''****',,,,,,,,,,,,,,,,,,\",!@#&  \"++++++++++++++++++'**'''@$$$$$$$$'***********',,,,,,,,,,,,,,,,,,\",!@#&  \"+++#######++++++++''**''@$$$$$$-'*************',,,,,,,,,,,,,,,,,\",!@#&  \"###################''**'@$-$$$$$'***.'****.'**',,,,,,,,,,,,,,,,,\",!@#&  \"####################''''@$$$$$$$'***''**'*''**',,,,,,,,,,,,,,,,,\",!@#&  \"###=======########====''@@$$$-$$'*%%********%%',,,,,,,,,,,,,,,,,\",!@#&  \"======================='@@@$$$$$$'***''''''**',,,,,,,,,,,,,,,,,,\",!@#&  \"===;;;;;;;.=======;;;;'''@@@@@@@@@'*********',,,,,,,,,,,,,,,,,,,\",!@#&  \";;;;;;;;;;;;;;;;;;;;;'***''''''''''''''''''',,,,,,,,,,,,,,,,,,,,\",!@#&  \";;;;;;;;;;;;;;;;;;;;;'**'','*',,,,,'*','**',,,,,,,,,,,,,,,,,,,,,\",!@#&  \";;;,,,,.,,;;;.;;;;,,,'''',,'',,,,,,,'',,'',,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,..,..,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\"},!@#&  {!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,..,..,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,.,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,.,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,.,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,''''''''''''''',,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,>>>>>>>,,,,,,,,>>>>>>'@@@@@@@@@@@@@@@',,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \">>>>>>>>>>>>>>>>>>>>>>>'@@@$$$$$$$$$$$@@@',,,,,,,,,,,,,,,,,,,,,,\",!@#&  \">>>>>>>>>>>>>>>>>>>>>>>'@@$$$$$-$$-$$$$@@',,,,,,,,,,,,,,,,,,,,,,\",!@#&  \"&&&&&&&&&&&&&&&&&&&&&&&'@$$-$$$$$$$''-$$@',,'',,,,,,,,,,,,,,,,,,\",!@#&  \"&&&&&&&&&&&&&&&&&&&&&&&'@$$$$$$$$$'**'$$@','**',,,,,,,,,,,,,,,,,\",!@#&  \"&&&+++++++&&&&&&&&+++++'@$$$$$-$$$'***$$@''***',,,,,,,,,,,,,,,,,\",!@#&  \"+++++++++++++++++++'+++'@$$$$$$$$$'***''''****',,,,,,,,,,,,,,,,,\",!@#&  \"++++++++++++++++++'*'++'@$$$$$$$$$'***********',,,,,,,,,,,,,,,,,\",!@#&  \"+++#######++++++++'*''''@$$$$$$-$'*************',,,,,,,,,,,,,,,,\",!@#&  \"###################****'@$-$$$$$$'***.'****.'**',,,,,,,,,,,,,,,,\",!@#&  \"###################''**'@$$$$$$$$'***''**'*''**',,,,,,,,,,,,,,,,\",!@#&  \"###=======########==='''@@$$$-$$$'*%%********%%',,,,,,,,,,,,,,,,\",!@#&  \"======================='@@@$$$$$$$'***''''''**',,,,,,,,,,,,,,,,,\",!@#&  \"===;;;;;;;========;;;;;''@@@@@@@@@@'*********',,,,,,,,,,,,,,,,,,\",!@#&  \";;;;;;;;;;;;;;;;;;;;;;'**'''''''''''''''''''',,,,,,,,,,,,,,,,,,,\",!@#&  \";;;;;;;;;;;;;;;;;;;;;;'**','*',,,,,,**','**',,,,,,,,,,,,,,,,,,,,\",!@#&  \";;;,,.,,,,;;;;;;;;,,,,''',,,'',,,,,,''',,''',,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,..,,..,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\"},!@#&  {!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,..,.,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,.,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,..,.\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.\",!@#&  \">>,,,,,,,>>>>>>>>,,,,,,,,''''''''''''''',,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \">>>>>>>>>>>>>>>>>>>>>>>>'@@@@@@@@@@@@@@@',,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \">>>>>>>>>>>>>>>>>>>>>>>'@@@$$$$$$$$$$$@@@',,,,,,,,,,,,,,,,,,,,,,\",!@#&  \"&&&&&&&&&&&&&&&&&&&&&&&'@@$$$$$-$$-$$$$@@',,,,,,,,,,,,,,,,,,,,,,\",!@#&  \"&&&&&&&&&&&&&&&&&&&&&&&'@$$-$$$$$$$''-$$@',,'',,,,,,,,,,,,,,,,,,\",!@#&  \"++&&&&&&&++++++++&&&&&&'@$$$$$$$$$'**'$$@','**',,,,,,,,,,,,,,,,,\",!@#&  \"+++++++++++++++++++++++'@$$$$$-$$$'***$$@''***',,,,,,,,,,,,,,,,,\",!@#&  \"+++++++++++++++++++++++'@$$$$$$$$$'***''''****',,,,,,,,,,,,,,,,,\",!@#&  \"##+++++++########++++++'@$$$$$$$$$'***********',,,,,,,,,,,,,,,,,\",!@#&  \"######################''@$$$$$$-$'*************',,,,,,,,,,,,,,,,\",!@#&  \"###################'''''@$-$$$$$$'***.'****.'**',,,,,,,,,,,,,,,,\",!@#&  \"==#######========#'****'@$$$$$$$$'***''**'*''**',,,,,,,,,,,,,,,,\",!@#&  \"==================='''='@@$$$-$$$'*%%********%%',,,,,,,,,,,,,,,,\",!@#&  \";;=======;;;;;;;;======'@@@$$$$$$$'***''''''**',,,,,,,,,,,,,,,,,\",!@#&  \";;;;;;;;;;;;;;;;;;;;;;;''@@@@@@@@@@'*********',,,,,,,,,,,,,,,,,,\",!@#&  \";.;;;;;;;;;;;;;;;;;;;;;'*'''''''''''''''''''',,,,,,,,,,,,,,,,,,,\",!@#&  \".,.;;;;;;,,,,,,,,;;;;;;'**',**',,,,,,**','**',,,,,,,,,,,,,,,,,,,\",!@#&  \",.,,,,,,,,,,,,,,,,,,,,,''',,''',,,,,,''',,''',,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,.,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,.,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\"},!@#&  {!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,.,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,.,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,.,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,.,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,\",!@#&  \">>,,,,,,,>>>>>>>>,,,,,,,,''''''''''''''',,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \">>>>>>>>>>>>>>>>>>>>>>>>'@@@@@@@@@@@@@@@',,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \">>>>>>>>>>>>>>>>>>>>>>>'@@@$$$$$$$$$$$@@@',,,,,,,,,,,,,,,,,,,,,,\",!@#&  \"&&&&&&&&&&&&&&&&&&&&&&&'@@$$$$$-$$-$$$$@@',,,,,,,,,,,,,,,,,,,,,,\",!@#&  \"&&&&&&&&&&&&&&&&&&&&&&&'@$$-$$$$$$$''-$$@',,'',,,,,,,,,,,,,,,,,,\",!@#&  \"++&&&&&&&++++++++&&&&&&'@$$$$$$$$$'**'$$@','**',,,,,,,,,,,,,,,,,\",!@#&  \"+++++++++++++++++++++++'@$$$$$-$$$'***$$@''***',,,,,,,,,,,,,,,,,\",!@#&  \"+++++++++++++++++++++++'@$$$$$$$$$'***''''****',,,,,,,,,,,,,,,,,\",!@#&  \"##+++++++########++++++'@$$$$$$$$$'***********',,,,,,,,,,,,,,,,,\",!@#&  \"#####################'''@$$$$$$-$'*************',,,,,,,,,,,,,,,,\",!@#&  \"###################''**'@$-$$$$$$'***.'****.'**',,,,,,,,,,,,,,,,\",!@#&  \"==#######========##****'@$$$$$$$$'***''**'*''**',,,,,,,,,,,,,,,,\",!@#&  \"=================='*'=='@@$$$-$$$'*%%********%%',,,,,,,,,,,,,,,,\",!@#&  \";;=======;;;;;;;;=='==='@@@$$$$$$$'***''''''**',,,,,,,,,,,,,,,,,\",!@#&  \";;;;;;;;;;;;;;;;;;;;;;;''@@@@@@@@@@'*********',,,,,,,,,,,,,,,,,,\",!@#&  \";;;;;;;;;;;;;;;;;;;;;;'**'''''''''''''''''''',,,,,,,,,,,,,,,,,,,\",!@#&  \",,;;;;;;;,,,,,,,,;;;;;'**','*',,,,,,'*','**',,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,''',,,'',,,,,,,'',,''',,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,.,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,.,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\"},!@#&  {!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,.,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,.,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,.,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,\",!@#&  \",,,>>>>>>>,,,,,,,,>>>>>>>''''''''''''''',,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \">>>>>>>>>>>>>>>>>>>>>>>>'@@@@@@@@@@@@@@@',,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \">>>>>>>>>>>>>>>>>>>>>>>'@@@$$$$$$$$$$$@@@',,,,,,,,,,,,,,,,,,,,,,\",!@#&  \"&&&&&&&&&&&&&&&&&&&&&&&'@@$$$$$-$$-$$$$@@',,,,,,,,,,,,,,,,,,,,,,\",!@#&  \"&&&&&&&&&&&&&&&&&&&&&&&'@$$-$$$$$$''$-$$@','',,,,,,,,,,,,,,,,,,,\",!@#&  \"&&&+++++++&&&&&&&&+++++'@$$$$$$$$'**'$$$@''**',,,,,,,,,,,,,,,,,,\",!@#&  \"+++++++++++++++++++++++'@$$$$$-$$'***$$$@'***',,,,,,,,,,,,,,,,,,\",!@#&  \"++++++++++++++++++'''++'@$$$$$$$$'***''''****',,,,,,,,,,,,,,,,,,\",!@#&  \"+++#######+++++++'**''''@$$$$$$$$'***********',,,,,,,,,,,,,,,,,,\",!@#&  \"#################'****''@$$$$$$-'*************',,,,,,,,,,,,,,,,,\",!@#&  \"##################''''*'@$-$$$$$'***.'****.'**',,,,,,,,,,,,,,,,,\",!@#&  \"###=======########==='''@$$$$$$$'***''**'*''**',,,,,,,,,,,,,,,,,\",!@#&  \"======================='@@$$$-$$'*%%********%%',,,,,,,,,,,,,,,,,\",!@#&  \"===;;;;;;;========;;;;''@@@$$$$$$'***''''''**',,,,,,,,,,,,,,,,,,\",!@#&  \";;;;;;;;;;;;;;;;;;;;;''''@@@@@@@@@'*********',,,,,,,,,,,,,,,,,,,\",!@#&  \";;;;;;;;;;;;;;;;;;;;'***'''''''''''''''''''',,,,,,,,,,,,,,,,,,,,\",!@#&  \";;;,,,,,,,;;;;;;;;,,'**','**,,,,,,'**,'**',,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,''',,,'',,,,,,,'',,''',,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,.,..,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\"},!@#&  {!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,..,..,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,>>>>>>>,,,,,,,,>>>>>>>''''''''''''''',,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \">>>>>>>>>>>>>>>>>>>>>>>>'@@@@@@@@@@@@@@@',,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \">>>>>>>>>>>>>>>>>>>>>>>'@@@$$$$$$$$$$$@@@',,,,,,,,,,,,,,,,,,,,,,\",!@#&  \"&&&&&&&&&&&&&&&&&&&&&&&'@@$$$$$-$$''$$$@@','',,,,,,,,,,,,,,,,,,,\",!@#&  \"&&&&&&&&&&&&&&&&&&&&&&&'@$$-$$$$$'**'-$$@''**',,,,,,,,,,,,,,,,,,\",!@#&  \"&&&+++++++&&&&&&&&+++++'@$$$$$$$$'***$$$@'***',,,,,,,,,,,,,,,,,,\",!@#&  \"+++++++++++++++++++'+++'@$$$$$-$$'***''''****',,,,,,,,,,,,,,,,,,\",!@#&  \"++++++++++++++++++'*'++'@$$$$$$$$'***********',,,,,,,,,,,,,,,,,,\",!@#&  \"+++#######++++++++'*''''@$$$$$$$'*************',,,,,,,,,,,,,,,,,\",!@#&  \"###################****'@$$$$$$-'***.'****.'**',,,,,,,,,,,,,,,,,\",!@#&  \"###################''**'@$-$$$$$'***''**'*''**',,,,,,,,,,,,,,,,,\",!@#&  \"###=======########==='''@$$$$$$$'*%%********%%',,,,,,,,,,,,,,,,,\",!@#&  \"======================='@@$$$-$$$'***''''''**',,,,,,,,,,,,,,,,,,\",!@#&  \"===;;;;;;;========;;;;''@@@$$$$$$$'*********',,,,,,,,,,,,,,,,,,.\",!@#&  \";;;;;;;;;;;;;;;;;;;;;'*''@@@@@@@@@@''''''''',,,,,,,,,,,,,,,,,,,.\",!@#&  \";;;;;;;;;;;;;;;;;;;;'***''''''''''''''''*',,,,,,,,,,,,,,,,,,,,,,\",!@#&  \";;;,,,,,,,;;;;;;;;,,'**','**,,,,,,'**,'**',,,,,,,,,,,,,,,,,,..,.\",!@#&  \",,,,,,,,,,,,,,,,,,,,''',,''',,,,,,''',,''',,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,..,..,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",.,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\"},!@#&  {!@#&  \".,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \".,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,..,.,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,.,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,''''''''''''''',,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \">>,,,,,,,>>>>>>>>,,,,,,,'@@@@@@@@@@@@@@@',,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \">>>>>>>>>>>>>>>>>>>>>>>'@@@$$$$$$$$$$$@@@',,,,,,,,,,,,,,,,,,,,,,\",!@#&  \">>>>>>>>>>>>>>>>>>>>>>>'@@$$$$$-$$-$$$$@@',,,,,,,,,,,,,,,,,,,,,,\",!@#&  \"&&&&&&&&&&&&&&&&&&&&&&&'@$$-$$$$$$''$-$$@','',,,,,,,,,,,,,,,,,,,\",!@#&  \"&&&&&&&&&&&&&&&&&&&&&&&'@$$$$$$$$'**'$$$@''**',,,,,,,,,,,,,,,,,,\",!@#&  \"++&&&&&&&++++++++&'''&&'@$$$$$-$$'***$$$@'***',,,,,,,,,,,,,,,,,,\",!@#&  \"++++++++++++++++++'*''+'@$$$$$$$$'***''''****',,,,,,,,,,,,,,,,,,\",!@#&  \"++++++++++++++++++'**'''@$$$$$$$$'***********',,,,,,,,,,,,,,,,,,\",!@#&  \"##+++++++########++'**''@$$$$$$-'*************',,,,,,,,,,,,,,,,,\",!@#&  \"###################''**'@$-$$$$$'***.'****.'**',,,,,,,,,,,,,,,,,\",!@#&  \"####################''''@$$$$$$$'***''**'*''**',,,,,,,,,,,,,,,,,\",!@#&  \"==#######========#####''@@$$$-$$'*%%********%%',,,,,,,,,,,,,,,,,\",!@#&  \"======================='@@@$$$$$$'***''''''**',,,,,,,,,,,,,,,,,,\",!@#&  \";;=======;;;;;;;;====='''@@@@@@@@@'*********',,,,,,,,,,,.,,,,,,,\",!@#&  \";;;;;;;;;;;;;;;;;;;;;'***''''''''''''''''''',,,,,,,,,,.,,,.,,,,,\",!@#&  \";;;;;;;;;;;;;;;;;;;;;'**'','*',,,,,'**,'**',,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,;;;;;;;,,,,,,,,;;;;'''',,'',,,,,,,'',,'',,,,,,,,,,,.,,,,,.,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,.,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,.,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\"},!@#&  {!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,.,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,..,..,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,''''''''''''''',,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \">>,,,,,,,>>>>>>>>,,,,,,,'@@@@@@@@@@@@@@@',,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \">>>>>>>>>>>>>>>>>>>>>>>'@@@$$$$$$$$$$$@@@',,,,,,,,,,,,,,,,,,,,,,\",!@#&  \">>>>>>>>>>>>>>>>>>>>>>>'@@$$$$$-$$-$$$$@@',,,,,,,,,,,,,,,,,,,,,,\",!@#&  \"&&&&&&&&&&&&&&&&&&&&&&&'@$$-$$$$$$$''-$$@',,'',,,,,,,,,,,,,,,,,,\",!@#&  \"&&&&&&&&&&&&&&&&&&&&&&&'@$$$$$$$$$'**'$$@','**',,,,,,,,,,,,,,,,,\",!@#&  \"++&&&&&&&++++++++&&&&&&'@$$$$$-$$$'***$$@''***',,,,,,,,,,,,,,,,,\",!@#&  \"+++++++++++++++++++'+++'@$$$$$$$$$'***''''****',,,,,,,,,,,,,,,,,\",!@#&  \"++++++++++++++++++'*'++'@$$$$$$$$$'***********',,,,,,,,,,,,,,,,,\",!@#&  \"##+++++++########+'*''''@$$$$$$-$'*************',,,,,,,,,,,,,,,,\",!@#&  \"###################****'@$-$$$$$$'***.'****.'**',,,,,,,,,,,,,,,,\",!@#&  \"###################''**'@$$$$$$$$'***''**'*''**',,,,,,,,,,,,,,,,\",!@#&  \"==#######========####'''@@$$$-$$$'*%%********%%',,,,,,,,,,,,,,,,\",!@#&  \"======================='@@@$$$$$$$'***''''''**',,,,,,,,,,,,,,,,,\",!@#&  \";;=======;;;;;;;;======''@@@@@@@@@@'*********',,,.,,,,,,,,,,,,,,\",!@#&  \";;;;;;;;;;;;;;;;;;;;;;'**'''''''''''''''''''',,,,,,,,,,,,,,,,,,,\",!@#&  \";;;;;;;;;;;;;;;;;;;;;;'**','*',,,,,,**','**',,,,,,,,,,,,,,,,,,,,\",!@#&  \",,;;;;;;;,,,,,,,,;;;;;''',,,'',,,,,,''',,''',,.,,,,.,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,..,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\"},!@#&  {!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,.,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,.,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,..,...,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,>>>>>>>,,,,,,,,>>>>>>>''''''''''''''',,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \">>>>>>>>>>>>>>>>>>>>>>>>'@@@@@@@@@@@@@@@',,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \">>>>>>>>>>>>>>>>>>>>>>>'@@@$$$$$$$$$$$@@@',,,,,,,,,,,,,,,,,,,,,,\",!@#&  \"&&&&&&&&&&&&&&&&&&&&&&&'@@$$$$$-$$-$$$$@@',,,,,,,,,,,,,,,,,,,,,,\",!@#&  \"&&&&&&&&&&&&&&&&&&&&&&&'@$$-$$$$$$$''-$$@',,'',,,,,,,,,,,,,,,,,,\",!@#&  \"&&&+++++++&&&&&&&&+++++'@$$$$$$$$$'**'$$@','**',,,,,,,,,,,,,,,,,\",!@#&  \"+++++++++++++++++++++++'@$$$$$-$$$'***$$@''***',,,,,,,,,,,,,,,,,\",!@#&  \"+++++++++++++++++++++++'@$$$$$$$$$'***''''****',,,,,,,,,,,,,,,,,\",!@#&  \"+++#######++++++++#####'@$$$$$$$$$'***********',,,,,,,,,,,,,,,,,\",!@#&  \"######################''@$$$$$$-$'*************',,,,,,,,,,,,,,,,\",!@#&  \"###################'''''@$-$$$$$$'***.'****.'**',,,,,,,,,,,,,,,,\",!@#&  \"###=======########'****'@$$$$$$$$'***''**'*''**',,,,,,,,,,,,,,,,\",!@#&  \"==================='''='@@$$$-$$$'*%%********%%',,,,,,,,,,,,,,,,\",!@#&  \"===;;;;;;;========;;;;;'@@@$$$$$$$'***''''''**',,,,,,,,,,,,,,,,,\",!@#&  \";;;;;;;;;;;;;;;;;;;;;;;''@@@@@@@@@@'*********',,,,,,,,,,,,,,,,,,\",!@#&  \";;;;;;;;;;;;;;;;;;;;;;;'*'''''''''''''''''''',,,,,,,,,,,,,,,,,,,\",!@#&  \";;;,,,,,,,;;;;;;;;,,,,,'**',**',,,,,,**'.'**',,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,''',,''',,,,,,''',,''',,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,.,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,.,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,\"},!@#&  {!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,.,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,.,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,.,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,>>>>>>>,,,,,,,,>>>>>>>''''''''''''''',,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \">>>>>>>>>>>>>>>>>>>>>>>>'@@@@@@@@@@@@@@@',,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \">>>>>>>>>>>>>>>>>>>>>>>'@@@$$$$$$$$$$$@@@',,,,,,,,,,,,,,,,,,,,,,\",!@#&  \"&&&&&&&&&&&&&&&&&&&&&&&'@@$$$$$-$$-$$$$@@',,,,,,,,,,,,,,,,,,,,,,\",!@#&  \"&&&&&&&&&&&&&&&&&&&&&&&'@$$-$$$$$$$''-$$@',,'',,,,,,,,,,,,,,,,,,\",!@#&  \"&&&+++++++&&&&&&&&+++++'@$$$$$$$$$'**'$$@','**',,,,,,,,,,,,,,,,,\",!@#&  \"+++++++++++++++++++++++'@$$$$$-$$$'***$$@''***',,,,,,,,,,,,,,,,,\",!@#&  \"+++++++++++++++++++++++'@$$$$$$$$$'***''''****',,,,,,,,,,,,,,,,,\",!@#&  \"+++#######++++++++#####'@$$$$$$$$$'***********',,,,,,,,,,,,,,,,,\",!@#&  \"#####################'''@$$$$$$-$'*************',,,,,,,,,,,,,,,,\",!@#&  \"###################''**'@$-$$$$$$'***.'****.'**',,,,,,,,,,,,,,,,\",!@#&  \"###=======########=****'@$$$$$$$$'***''**'*''**',,,,,,,,,,,,,,,,\",!@#&  \"=================='*'=='@@$$$-$$$'*%%********%%',,,,,,,,,,,,,,,,\",!@#&  \"===;;;;;;;========;';;;'@@@$$$$$$$'***''''''**',,,,,,,,,,,,,,,,,\",!@#&  \";;;;;;;;;;;;;;;;;;;;;;;''@@@@@@@@@@'*********',,,,,,,,,,,,,,,,,,\",!@#&  \";;;;;;;;;;;;;;;;;;;;;;'**'''''''''''''''''''',,,,,,,,,,,,,,,,,,,\",!@#&  \";;;,,,,,,,;;;;;;;;,,,,'**','*',,..,.**','**',,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,''',,,'',,,,.,''',,''',,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,.,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,.,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,.,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,.,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,\"},!@#&  {!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,.,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \".,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \".,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,.,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \">>,,,,,,,>>>>>>>>,,,,,,,,''''''''''''''',,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \">>>>>>>>>>>>>>>>>>>>>>>>'@@@@@@@@@@@@@@@',,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \">>>>>>>>>>>>>>>>>>>>>>>'@@@$$$$$$$$$$$@@@',,,,,,,,,,,,,,,,,,,,,,\",!@#&  \"&&&&&&&&&&&&&&&&&&&&&&&'@@$$$$$-$$-$$$$@@',,,,,,,,,,,,,,,,,,,,,,\",!@#&  \"&&&&&&&&&&&&&&&&&&&&&&&'@$$-$$$$$$''$-$$@','',,,,,,,,,,,,,,,,,,,\",!@#&  \"++&&&&&&&++++++++&&&&&&'@$$$$$$$$'**'$$$@''**',,,,,,,,,,,,,,,,,,\",!@#&  \"+++++++++++++++++++++++'@$$$$$-$$'***$$$@'***',,,,,,,,,,,,,,,,,,\",!@#&  \"++++++++++++++++++'''++'@$$$$$$$$'***''''****',,,,,,,,,,,,,,,,,,\",!@#&  \"##+++++++########'**''''@$$$$$$$$'***********',,,,,,,,,,,,,,,,,,\",!@#&  \"#################'****''@$$$$$$-'*************',,,,,,,,,,,,,,,,,\",!@#&  \"##################''''*'@$-$$$$$'***.'****.'**',,,,,,,,,,,,,,,,,\",!@#&  \"==#######========####'''@$$$$$$$'***''**'*''**',,,,,,,,,,,,,,,,,\",!@#&  \"======================='@@$$$-$$'*%%********%%',,,,,,,,,,,,,,,,,\",!@#&  \";;=======;;;;;;;;=====''@@@$$$$$$'***''''''**',,,,,,,,,,,,,,,,,,\",!@#&  \";;;;;;;;;;;;;;;;;;;;;''''@@@@@@@@@'*********',,,,,,,,,,,,,,,,,,,\",!@#&  \";;;;;;;;;;;;;;;;;;;;'***'''''''''''''''''''',,,,,,,,,,,,,,,,,,,,\",!@#&  \",,;;;;;;;,,,,,,,,;;;'**'.'**..,,,,'**''**',,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,''',,,'',,,,,,,''',''',,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \".,.,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\"},!@#&  {!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \">>,,,,,,,>>>>>>>>,,,,,,,,''''''''''''''',,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \">>>>>>>>>>>>>>>>>>>>>>>>'@@@@@@@@@@@@@@@',,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \">>>>>>>>>>>>>>>>>>>>>>>'@@@$$$$$$$$$$$@@@',,,,,,,,,,,,,,,,,,,,,,\",!@#&  \"&&&&&&&&&&&&&&&&&&&&&&&'@@$$$$$-$$''$$$@@','',,,,,,,,,,,,,,,,,,,\",!@#&  \"&&&&&&&&&&&&&&&&&&&&&&&'@$$-$$$$$'**'-$$@''**',,,,,,,,,,,,,,,,,,\",!@#&  \"++&&&&&&&++++++++&&&&&&'@$$$$$$$$'***$$$@'***',,,,,,,,,,,,,,,,,,\",!@#&  \"+++++++++++++++++++'+++'@$$$$$-$$'***''''****',,,,,,,,,,,,,,,,,,\",!@#&  \"++++++++++++++++++'*'++'@$$$$$$$$'***********',,,,,,,,,,,,,,,,,,\",!@#&  \"##+++++++########+'*''''@$$$$$$$'*************',,,,,,,,,,,,,,,,,\",!@#&  \"###################****'@$$$$$$-'***.'****.'**',,,,,,,,,,,,,,,,,\",!@#&  \"###################''**'@$-$$$$$'***''**'*''**',,,,,,,,,,,,,,,,,\",!@#&  \"==#######========####'''@$$$$$$$'*%%********%%',,,,,,,,,,,,,,,,,\",!@#&  \"======================='@@$$$-$$$'***''''''**',,,,,,,,,,,,,,,,,,\",!@#&  \";;=======;;;;;;;;=.===''@@@$$$$$$$'*********',,,,,,,,,,,,,,,,,,,\",!@#&  \";;;;;;;;;;;;;;;;;;;;.'*''@@@@@@@@@@''''''''',,,,,,,,,,,,,,,,,,,,\",!@#&  \";;;;;;;;;;;;;;;;;;;;'***''''''''''''''''*',,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,;;;;;;;,,,,,,,.;;;'**','**,,,,,,'**''**',,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,''',,''',,,,,,''',,''',,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,.,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\",!@#&  \",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\"}!@#&}!@#&!@#&fps = 1/fps!@#&!@#&colors={!@#&  [\",\"] = colours.blue, -- Blue background!@#&  [\".\"] = colours.white, -- White stars!@#&  [\"'\"] = colours.black, -- Black border!@#&  [\"@\"] = colours.lightGrey, -- Tan poptart!@#&  [\"$\"] = colours.pink, -- Pink poptart!@#&  [\"-\"] = colours.magenta, -- Red poptart!@#&  [\">\"] = colours.red, -- Red rainbow!@#&  [\"&\"] = colours.orange, -- Orange rainbow!@#&  [\"+\"] = colours.yellow, -- Yellow Rainbow!@#&  [\"#\"] = colours.lime, -- Green rainbow!@#&  [\"=\"] = colours.lightBlue, -- Light blue rainbow!@#&  [\";\"] = colours.cyan, -- Dark blue rainbow!@#&  [\"*\"] = colours.grey, -- Gray cat face!@#&  [\"%\"] = colours.pink, -- Pink cheeks!@#&}!@#&!@#&function pause()!@#&  local timer = os.startTimer(fps)!@#&  while true do!@#&    local e, t = os.pullEvent(\"timer\")!@#&    if t == timer then!@#&      return!@#&    end!@#&  end!@#&end!@#&!@#&function draw(out)!@#&  local sizeX,sizeY = out.getSize()!@#&  local min_row = math.floor((64-sizeY)/2)+1!@#&  local min_col = math.floor((64-sizeX)/2)+1!@#&  if min_row < 1 then min_row = 1 end!@#&  if min_col < 1 then min_col = 1 end!@#&  local current_color = -1!@#&  while true do!@#&    for frame=1,#nyans do!@#&      for y=1,sizeY do!@#&        for x=1,sizeX do!@#&          out.setCursorPos(x,y)!@#&          local pos = (min_row+y-1 <= 64 and min_col+x-1 <= 64) and string.sub(nyans[frame][min_row+y-1],min_col+x-1,min_col+x-1) or \",\"!@#&          if colors[pos] ~= current_color then!@#&            out.setBackgroundColor(colors[pos])!@#&            current_color = colors[pos]!@#&          end!@#&          out.write(\" \")!@#&        end!@#&      end!@#&      pause()!@#&    end!@#&  end!@#&end!@#&!@#&local out = term.isColour() and term or nil!@#&for i,side in pairs(rs.getSides()) do!@#&  if peripheral.getType(side) == \"monitor\" then!@#&    if peripheral.call(side,\"isColour\") then!@#&      out = peripheral.wrap(side)!@#&      break!@#&    end!@#&  end!@#&end!@#&!@#&if out == nil then!@#&  print(\"No colorful output device detected, meow :(\")!@#&else!@#&  draw(out)!@#&end",["BacterialCulture"]="freq = .2!@#&myTimer = os.startTimer(freq)!@#&width, height = term.getSize()!@#&!@#&function draw()!@#&  term.setBackgroundColor(colors.black)!@#&  if term.isColor() then term.setTextColor(colors.lightGray) end!@#&  term.clear()!@#&  term.setCursorPos(1,1)!@#&  for i=1, height do!@#&    for i=1, width do!@#&      color = math.random(16384)!@#&      num = math.random(10)!@#&      if term.isColor() then term.setTextColor(color) end!@#&      if num == 2 then!@#&        term.write('*')!@#&      else!@#&        term.write(' ')!@#&      end!@#&    end!@#&    cx,cy = term.getCursorPos()!@#&    term.setCursorPos(1,cy + 1)!@#&  end!@#&end!@#&!@#&draw()!@#&!@#&function stop()!@#&  term.setBackgroundColor(colors.black)!@#&  term.setTextColor(colors.white)!@#&  term.clear()!@#&  term.setCursorPos(1,1)!@#&  error()!@#&end!@#&function redraw()!@#&  local x = math.random(width)!@#&  local y = math.random(height)!@#&  term.setCursorPos(x,y)!@#&  color = math.random(16384)!@#&  if term.isColor() then term.setTextColor(color) end!@#&  num = math.random(5)!@#&  if num == 2 then!@#&    term.write('*')!@#&  else!@#&    term.write(' ')!@#&  end!@#&end!@#&while true do!@#&  event, btn, x, y = os.pullEvent()!@#&  if event == 'key' then!@#&    if btn >= 1 then!@#&      stop()!@#&    end!@#&  elseif event == 'mouse_click' then!@#&    if x >= 1 and y >= 1 then!@#&      stop()!@#&    end!@#&  elseif event == 'timer' then!@#&    redraw()!@#&  end!@#&  myTimer = os.startTimer(freq)!@#&end",["Snowy"]="--snow generator!@#&local snowflake, maxx, maxy, bShifted = \"%\", term.getSize()!@#&local snowWin = term-- window.create( term.current(), 1, 1, maxx + 1, maxy )!@#&snowWin.setBackgroundColor( colors.lightBlue )!@#&snowWin.clear()!@#&while true do!@#&	--snowWin.setVisible( false )!@#&	snowWin.setCursorPos( math.random( 1, maxx ), 1 )!@#&	snowWin.write( snowflake )!@#&	snowWin.scroll( -1 )!@#&	--snowWin.reposition( bShifted and 1 or 0, 1 )!@#&	bShifted = not bShifted!@#&--	snowWin.setVisible( true )!@#&	sleep( 0.1 )!@#&end",["Donut"]="os.loadAPI(\"SpeedAPI/peripheral\")!@#&os.loadAPI(\"SpeedAPI/windows\")!@#&!@#&if not peripheral.find(\"monitor\", true) then!@#&    windows.clearScreen(colors.white)!@#&    windows.error(\"You need an advanced monitor!\")!@#&    error()!@#&end!@#&!@#&shell.run(\"monitor \"..peripheral.find(\"monitor\", true)..\" SpeedOS/Applications/Screensavers/Donut_src\")",["Matirx"]="--(c) 2013 Felix Maxwell!@#&--License: CC BY-SA 3.0!@#&!@#&local fps = 8 --Determines how long the system will wait between each update!@#&local maxLifetime = 40 --Max lifetime of each char!@#&local minLifetime = 8 --Min lifetime of each char!@#&local maxSourcesPerTick = 5 --Maximum number of sources created each tick!@#&local sourceWeight = 0 --Affects the chance that no sources will be generated!@#&local greenWeight = 8 --Threshhold out of 10 that determines when characters will switch from lime to green!@#&local grayWeight = 2 --Same as about, but from green to gray!@#&!@#&function getMonitors()!@#&	local monitors = {}!@#&	if checkMonitorSide( \"top\" ) then table.insert( monitors, \"top\" ) end!@#&	if checkMonitorSide( \"bottom\" ) then table.insert( monitors, \"bottom\" ) end!@#&	if checkMonitorSide( \"left\" ) then table.insert( monitors, \"left\" ) end!@#&	if checkMonitorSide( \"right\" ) then table.insert( monitors, \"right\" ) end!@#&	if checkMonitorSide( \"front\" ) then table.insert( monitors, \"front\" ) end!@#&	if checkMonitorSide( \"back\" ) then table.insert( monitors, \"back\" ) end!@#&	return monitors!@#&end!@#&function checkMonitorSide( side )!@#&	if peripheral.isPresent( side ) then!@#&		if peripheral.getType(side) == \"monitor\" then!@#&			return true!@#&		end!@#&	end!@#&	return false!@#&end!@#&function printMonitorStats( side )!@#&	local x, y = peripheral.call(side, \"getSize\")!@#&	local color = \"No\"!@#&	if peripheral.call(side, \"isColor\") then!@#&		color = \"Yes\"!@#&	end!@#&	print(\"Side:\"..side..\" Size:(\"..x..\", \"..y..\") Color?\"..color)!@#&end!@#&function askMonitor()!@#&	local monitors = getMonitors()!@#&	if #monitors == 0 then!@#&		print(\"No monitors found, add more!\")!@#&		return nill!@#&	elseif #monitors == 1 then!@#&		return monitors[1]!@#&	else!@#&		while true do!@#&			print(\"Multiple monitors found, please pick one.\")!@#&			for i,v in ipairs(monitors) do!@#&				write(\"[\"..(i)..\"] \")!@#&				printMonitorStats( v )!@#&			end!@#&			write(\"Selection: \")!@#&			local sel = tonumber(io.read())!@#&			if sel < 1 or sel > #monitors then!@#&				print(\"\")!@#&				print(\"Invalid number.\")!@#&			else!@#&				return monitors[sel]!@#&			end!@#&		end!@#&	end!@#&end!@#&!@#&function printCharAt( monitor, x, y, char )!@#&	monitor.setCursorPos( x, y )!@#&	monitor.write( char )!@#&end!@#&function printGrid( monitor, grid, color )!@#&	for i=1,#grid do!@#&		for o=1,#grid[i] do!@#&			if color then monitor.setTextColor( grid[i][o][\"color\"] ) end!@#&			printCharAt( monitor, i, o, grid[i][o][\"char\"] )!@#&		end!@#&	end!@#&end!@#&!@#&function colorLifetime( life, originalLifetime )!@#&	local lifetimePart = originalLifetime/10!@#&	if life < grayWeight*lifetimePart then!@#&		return colors.gray!@#&	elseif life < greenWeight*lifetimePart then!@#&		return colors.green!@#&	else!@#&		return colors.lime!@#&	end!@#&end!@#&function getRandomChar()!@#&	local randTable = {\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"0\",\"!\",\"@\",\"#\",\"$\",\"%\",\"^\",\"&\",\"*\",\"(\",\")\",\"_\",\"-\",\"+\",\"=\",\"~\",\"`\",\",\",\"<\",\">\",\".\",\"/\",\"?\",\":\",\"{\",\"}\",\"[\",\"]\",\"\\\\\",\"\\\"\",\"\\'\"}!@#&	return randTable[math.random(1, #randTable)]!@#&end!@#&function tick( screen )!@#&!@#&	--update lifetimes!@#&	for x=1,#screen do!@#&		for y=1,#screen[x] do!@#&			screen[x][y][\"curLife\"] = screen[x][y][\"curLife\"] - 1!@#&		end!@#&	end!@#&!@#&	--make the sources 'fall' and delete timed out chars!@#&	for x=1,#screen do!@#&		for y=1,#screen[x] do!@#&			if screen[x][y][\"type\"] == \"source\" and screen[x][y][\"curLife\"] == 0 then!@#&				screen[x][y][\"type\"] = \"char\"!@#&				screen[x][y][\"lifetime\"] = math.random(minLifetime, maxLifetime)!@#&				screen[x][y][\"curLife\"] = screen[x][y][\"lifetime\"]!@#&				screen[x][y][\"color\"] = colors.lime!@#&			!@#&				if y < #screen[x] then!@#&					screen[x][y+1][\"char\"] = getRandomChar()!@#&					screen[x][y+1][\"lifetime\"] = 1!@#&					screen[x][y+1][\"curLife\"] = 1!@#&					screen[x][y+1][\"type\"] = \"source\"!@#&					screen[x][y+1][\"color\"] = colors.white!@#&				end!@#&			elseif screen[x][y][\"curLife\"] < 0 then!@#&				screen[x][y][\"char\"] = \" \"!@#&				screen[x][y][\"lifetime\"] = 0!@#&				screen[x][y][\"curLife\"] = 0!@#&				screen[x][y][\"type\"] = \"blank\"!@#&				screen[x][y][\"color\"] = colors.black!@#&			elseif screen[x][y][\"type\"] == \"char\" then!@#&				screen[x][y][\"color\"] = colorLifetime( screen[x][y][\"curLife\"], screen[x][y][\"lifetime\"] )!@#&			end!@#&		end!@#&	end!@#&		!@#&	--create new character sources!@#&	local newSources = math.random( 0-sourceWeight, maxSourcesPerTick )!@#&	for i=1,newSources do!@#&		local col = math.random(1, #screen)!@#&		screen[col][1][\"char\"] = getRandomChar()!@#&		screen[col][1][\"lifetime\"] = 1!@#&		screen[col][1][\"curLife\"] = 1!@#&		screen[col][1][\"type\"] = \"source\"!@#&		screen[col][1][\"color\"] = colors.white!@#&	end!@#&	!@#&	return screen!@#&end!@#&!@#&function setup( w, h )!@#&	local retTab = {}!@#&	for x=1,w do!@#&		retTab[x] = {}!@#&		for y=1,h do!@#&			retTab[x][y] = {}!@#&			retTab[x][y][\"char\"] = \" \"!@#&			retTab[x][y][\"lifetime\"] = 0!@#&			retTab[x][y][\"curLife\"] = 0!@#&			retTab[x][y][\"type\"] = \"blank\"!@#&			retTab[x][y][\"color\"] = colors.black!@#&		end!@#&	end!@#&	return retTab!@#&end!@#&function run()!@#&	local monitor = peripheral.wrap( askMonitor() )!@#&	local color = monitor.isColor()!@#&	local w, h = monitor.getSize()!@#&	local screen = setup( w, h )!@#&	while true do!@#&		screen = tick( screen )!@#&		printGrid( monitor, screen, color )!@#&		os.sleep(1/fps)!@#&	end!@#&end!@#&!@#&run()",["RandomSymbols"]="czas=0.05                                       -- time between iterations!@#&!@#&function Main()!@#&	term.clear()!@#&	szer,wys=term.getSize()!@#&	wys=wys+1!@#&	szer=szer-1!@#&	clearMap()!@#&	isFull=false                                    -- mode var!@#&	!@#&	os.startTimer(czas)!@#&	!@#&	while true do!@#&		local event,p1=os.pullEvent()!@#&		if event==\"timer\" then                      -- using timer instead of sleep() so it doesn't block the terminal!@#&			Wypelnij()!@#&		elseif event==\"key\" and p1~=1 then!@#&			term.clear()!@#&			term.setCursorPos(1,1)!@#&			break!@#&		end!@#&	end!@#&end!@#&!@#&function clearMap()!@#&	map={}!@#&	for i=1,szer do!@#&		map[i]=1!@#&	end!@#&end!@#&!@#&function Wypelnij()!@#&	local kol=math.random(szer)!@#&	while map[kol]==wys do                          -- skips columns that are already full!@#&		kol=math.random(szer)!@#&	end!@#&	term.setCursorPos(kol,map[kol])!@#&	if isFull then!@#&		write(\" \")!@#&	else!@#&		znak=string.char(math.random(32,126))       -- visible symbols have ascii codes between 32 and 126!@#&		write(znak)!@#&	end!@#&	if map[kol]~=wys then!@#&		map[kol]=map[kol]+1!@#&	end!@#&	local full=0!@#&	for i=1,szer do                                 -- checks if screen is already full!@#&		if map[i]==wys then!@#&			full=full+1!@#&		end!@#&	end!@#&	if full==szer then                              -- changes the mode!@#&		clearMap()!@#&		isFull=not isFull!@#&	end!@#&			!@#&	os.startTimer(czas)!@#&end !@#&!@#&Main()",["DumbScreensaver"]="local ssinfo=!@#&{!@#&    {x=3,y=1,a={true,true,false,false}},!@#&    {x=5,y=10,a={false,true,true,false}},!@#&    {x=20,y=15,a={true,false,false,true}}!@#&}!@#&local function screensaver()!@#&local function inv(q)!@#&  if q==true then!@#&    return false!@#&  end!@#&  if q==false then!@#&    return true!@#&  end!@#&end!@#&!@#&local ball =!@#&{!@#&  x=1;!@#&  y=1;!@#&  a={false,false,false,false};!@#&  !@#&  movefwd = function(self, speed)!@#&    if self.a[1]==true then!@#&      self.x=self.x+speed!@#&    end!@#&    if self.a[2]==true then!@#&      self.y=self.y+speed!@#&    end!@#&    if self.a[3]==true then!@#&      self.x=self.x-speed!@#&    end!@#&    if self.a[4]==true then!@#&      self.y=self.y-speed!@#&    end     !@#&  end;!@#&  !@#&  bounce = function(self,flip)!@#&    for i=1,4,1 do!@#&      if flip[i] then!@#&        self.a[i] = inv(self.a[i])!@#&      end!@#&    end!@#&  end!@#&}!@#&!@#&local function render(obj,char)!@#&  term.setCursorPos(obj.x,obj.y)!@#&  write(char)!@#&end!@#&!@#&local function main()!@#&  !@#&  w,h=term.getSize()!@#&  while true do!@#&  for no=1,3,1 do!@#&    ball.x=ssinfo[no].x!@#&    ball.y=ssinfo[no].y!@#&    ball.a=ssinfo[no].a!@#&    ball:movefwd(1)!@#&  !@#&    local arr={false,false,false,false}!@#&    if ball.x>w-1 or ball.x<2 then!@#&      arr[1]=true!@#&      arr[3]=true!@#&    end!@#&    if ball.y>h-1 or ball.y<2 then!@#&      arr[2]=true!@#&      arr[4]=true!@#&    end!@#&  !@#&    ball:bounce(arr)!@#&!@#&    render(ball,\"*\")!@#&    ssinfo[no].x=ball.x!@#&    ssinfo[no].y=ball.y!@#&    ssinfo[no].a=ball.a!@#&  end!@#&  sleep(0.2--[[1.2]])!@#&  for no=1,3,1 do!@#&    ball.x=ssinfo[no].x!@#&    ball.y=ssinfo[no].y!@#&    ball.a=ssinfo[no].a!@#&    render(ball,\" \")!@#&  end!@#&  end!@#&end!@#&!@#&term.clear()!@#&main()!@#&end!@#&!@#&local function disturb()!@#&  function reset()!@#&    os.pullEvent(\"key\")!@#&  end!@#&  function wait()!@#&    term.setCursorBlink(false)!@#&    screensaver()!@#&  end!@#&  while true do!@#&    parallel.waitForAny(reset,wait)!@#&    term.clear()!@#&    term.setCursorPos(1,1)!@#&    term.setCursorBlink(true)!@#&    return!@#&  end!@#&end!@#&!@#&disturb()",},["Utils"]={["ping"]="-- pastebin get R4DKXbzm ping!@#&-- std pb R4DKXbzm ping!@#&!@#&function displayHelp()!@#&	print(\"ping <url> <times>\")!@#&end!@#&!@#&function averageTable(tab)!@#&	temp = 0!@#&	for a = 1, #tab do!@#&		temp = temp + tab[a]!@#&	end!@#&	temp = temp / #tab!@#&	return temp!@#&end!@#&!@#&tArg = {...}!@#&url = tArg[1]!@#&times = tonumber(tArg[2])!@#&if not url then!@#&	displayHelp()!@#&	return false!@#&end!@#&if not times then times = 4 end!@#&!@#&if times <= 0 then!@#&	error(\"must be greater than 0.\")!@#&elseif times >= 200 then!@#&	error(\"Seriously?\")!@#&end!@#&!@#&if not string.find(url, \"://\") then!@#&	url = \"http://\"..url!@#&end!@#&!@#&print(\"Pinging \"..url..\"...\")!@#&completeRatio = {}!@#&pingList = {}!@#&for a = 1, times do!@#&	sleep(0)!@#&	oldtime = os.time()!@#&	b = http.get(url)!@#&	newtime = os.time()!@#&	diff = math.ceil((newtime - oldtime)*1000)!@#&	table.insert(pingList, diff)!@#&	write(\" delay: \"..diff..\" ticks...(\"..a..\")\")!@#&	if b then!@#&		table.insert(completeRatio,1)!@#&		print(\"\")!@#&	else!@#&		table.insert(completeRatio,0)!@#&		print(\"fail\")!@#&	end!@#&end!@#&print(\"done with \"..(averageTable(completeRatio)*100)..\"% success\")!@#&print(\"average ping is \"..(averageTable(pingList))..\" ticks\")",["sp"]="local tArg = {...} if realID == nil then realID = os.getComputerID() end if tArg[1] == \"reset\" then os.getComputerID = function() return realID end end if not tonumber(tArg[1]) then return false else newID = tonumber(tArg[1]) end os.getComputerID = function() return newID end",["fileinfo"]="os.loadAPI(\"/SpeedAPI/lddfm\")!@#&!@#&local tArgs = {...}!@#&if #tArgs ~= 1 then!@#&	tArgs[1] = tostring(lddfm.makeMenu())!@#&	term.clear()!@#&end!@#&print(\"-----Infomation------\")!@#&if fs.exists(tArgs[1]) then!@#&	if not fs.isDir(tArgs[1]) then!@#&		print(\"Name : \"..fs.getName(tArgs[1]))!@#&		local sizBytes = fs.getSize(tArgs[1])!@#&		local one,two = math.modf(sizBytes/1024)!@#&		print(\"Size : \"..tostring(one)..\".\"..string.sub(tostring(two),3,4)..\" KB (\"..sizBytes..\" bytes )\")!@#&		local where = fs.getDrive(tArgs[1])!@#&		if where == \"hdd\" or where == \"rom\" then!@#&			print(\"Location : \"..where)!@#&		else!@#&			print(\"Location : \"..where..\" disk drive\")!@#&		end!@#&		if fs.isReadOnly(tArgs[1]) then!@#&			print(\"File is read only\")!@#&		else!@#&			print([[Read / write enabled]])!@#&		end!@#&	else!@#&		print(\"This is a directory\")!@#&	end!@#&else!@#&	print(\"Not file or Folder\")!@#&end!@#&print(\"---------------------\")",["pkg"]="sPackage = \"local pkg = %@1 local function makeFile(_path, _content) local file = fs.open(_path, \\\"w\\\") _content = _content:gsub(\\\"\\!@\\\"..\\\"#&\\\", \\\"%\\\\n\\\") _content = textutils.unserialize(_content) file.write(_content) file.close() end local function makeFolder(_path, _content) fs.makeDir(_path) for k,v in pairs(_content) do if type(v) == \\\"table\\\" then makeFolder(_path .. \\\"/\\\" .. k, v) else makeFile(_path .. \\\"/\\\" .. k, v) end end end local sDest = shell.resolve( \\\"%@2\\\" ) or \\\"/\\\" if sDest == \\\"root\\\" then sDest = \\\"/\\\" end local tPackage = pkg makeFolder(sDest, tPackage) print(\\\"Package Extracted to '\\\" .. sDest .. \\\"'!\\\")\"!@#&!@#&function addFile(_package, _path)!@#&	if fs.getName(_path) == \".DS_Store\" then!@#&		return _package!@#&	end!@#&	local file, err = fs.open(_path, \"r\")!@#&	local content = file.readAll()!@#&	content = content:gsub(\"%\\n\", \"\\!@\"..\"#&\")!@#&	content = content:gsub(\"%%\", \"%%%%\")!@#&	_package[fs.getName(_path)] = content!@#&	file.close()!@#&	print(\"Added file '\".._path..\"'\")!@#&	return _package!@#&end!@#&!@#&function addFolder(_package, _path)!@#&	if string.sub(_path,1,string.len(\"rom\"))==\"rom\" or string.sub(_path,1,string.len(\"/rom\"))==\"/rom\" then!@#&		print(\"Ignored 'rom' folder. (\".._path..\")\")!@#&		return!@#&	end!@#&	_package = _package or {}!@#&	for _,f in ipairs(fs.list(_path)) do!@#&		local path = _path..\"/\"..f!@#&		if fs.isDir(path) then!@#&			_package[fs.getName(f)] = addFolder(_package[fs.getName(f)], path)!@#&		else!@#&			_package =  addFile(_package, path)!@#&		end!@#&	end!@#&	return _package!@#&end!@#&!@#&local tArgs = { ... }!@#&if #tArgs < 2 then!@#&	print( \"Usage: pkg <source> <destination>\" )!@#&	return!@#&end!@#&!@#&local sSource = shell.resolve( tArgs[1] )!@#&local sDest = shell.resolve( tArgs[2] )!@#&!@#&if fs.isDir( sDest ) then!@#&	error(\"Destination must not be a folder.\")!@#&end!@#&!@#&if sSource == sDest then!@#&	error(\"Source can not be equal to destination.\")!@#&end!@#&!@#&if fs.exists( sSource ) and fs.isDir( sSource ) then!@#&	tPackage = {}!@#&	tPackage = addFolder(tPackage, sSource)!@#&	fPackage = fs.open(sDest,\"w\")!@#&!@#&	sPackage = string.gsub(sPackage, \"%%@2\", fs.getName(sSource))!@#&	sPackage = string.gsub(sPackage, \"%%@1\", textutils.serialize(tPackage))!@#&	fPackage.write(sPackage)!@#&	fPackage.close()!@#&	print(\"Package Done! ('\" .. sDest .. \"')\")!@#&	print(\"Type '\" .. sDest .. \"' to run it.\")!@#&else!@#&	error(\"Source does not exist or is not a folder.\")!@#&end",["VNC"]="local args = { ... }!@#&!@#&local connections = {}!@#&!@#&local nshAPI = {!@#&	connList = connections!@#&}!@#&!@#&local bufferDirs = {\"/\",\"/LyqydOS/\",\"/usr/apis/\",\"/disk/\"}!@#&!@#&if not framebuffer then!@#&	for i = 1, #bufferDirs do!@#&		if fs.exists(bufferDirs[i]..\"framebuffer\") and os.loadAPI(bufferDirs[i]..\"framebuffer\") then!@#&			break!@#&		end!@#&	end!@#&end!@#&if not framebuffer then!@#&	print(\"Couldn't find framebuffer API, using fallback\")!@#&end!@#&!@#&local function rawSend(id, msg)!@#&	if term.current then!@#&		return rednet.send(id, msg, \"tror\")!@#&	else!@#&		return rednet.send(id, msg)!@#&	end!@#&end!@#&!@#&local function rawRecv(id, timeout)!@#&	if type(timeout) == \"number\" then timeout = os.startTimer(timeout) end!@#&	while true do!@#&		event = {os.pullEvent()}!@#&		if event[1] == \"rednet_message\" and (id == nil and true or event[2] == id) and (not term.current and true or event[4] == \"tror\") then!@#&			return event[3]!@#&		elseif event[1] == \"timer\" and event[2] == timeout then!@#&			return nil!@#&		end!@#&	end!@#&end!@#&!@#&!@#&nshAPI.getRemoteID = function()!@#&	--check for connected clients with matching threads.!@#&	for cNum, cInfo in pairs(nshAPI.connList) do!@#&		if cInfo and type(cInfo) == \"table\" and cInfo.thread == coroutine.running() then!@#&			if cNum == \"localShell\" then!@#&				--if we are a client running on the server, return the remote server ID.!@#&				if nshAPI.serverNum then!@#&					return nshAPI.serverNum!@#&				else!@#&					return nil!@#&				end!@#&			end!@#&			return cNum!@#&		end!@#&	end!@#&	--client running without local server, return remote server ID.!@#&	if nshAPI.serverNum then return nshAPI.serverNum end!@#&	return nil!@#&end!@#&!@#&nshAPI.send = function(msg)!@#&	local id = nshAPI.getRemoteID()!@#&	if id then!@#&		return rawSend(id, msg)!@#&	end!@#&	return nil!@#&end!@#&!@#&nshAPI.receive = function(timeout)!@#&	return rawRecv(nshAPI.getRemoteID(), timeout)!@#&end!@#&!@#&nshAPI.getClientCapabilities = function()!@#&	if nshAPI.clientCapabilities then return nshAPI.clientCapabilities end!@#&	nshAPI.send(\"SP:;clientCapabilities\")!@#&	return nshAPI.receive(1)!@#&end!@#&!@#&nshAPI.getRemoteConnections = function()!@#&	local remotes = {}!@#&	for cNum, cInfo in pairs(nshAPI.connList) do!@#&		table.insert(remotes, cNum)!@#&		if cInfo.outbound then!@#&			table.insert(remotes, cInfo.outbound)!@#&		end!@#&	end!@#&	return remotes!@#&end!@#&!@#&nshAPI.packFile = function(path)!@#&	local data = {}!@#&	local count = 0!@#&	local handle = io.open(path, \"rb\")!@#&	if handle then!@#&		local byte = handle:read()!@#&		repeat!@#&			data[#data + 1] = byte!@#&			count = count + 1!@#&			if count % 1000 == 0 then!@#&				os.queueEvent(\"yield\")!@#&				os.pullEvent(\"yield\")!@#&			end!@#&			byte = handle:read()!@#&		until not byte!@#&		handle:close()!@#&	else!@#&		return false!@#&	end!@#&	local outputTable = {}!@#&	for i = 1, #data, 3 do!@#&		local num1, num2, num3 = data[i], data[i + 1] or 0, data[i + 2] or 0!@#&		table.insert(outputTable, string.char(bit.band(bit.brshift(num1, 2), 63)))!@#&		table.insert(outputTable, string.char(bit.bor(bit.band(bit.blshift(num1, 4), 48), bit.band(bit.brshift(num2, 4), 15))))!@#&		table.insert(outputTable, string.char(bit.bor(bit.band(bit.blshift(num2, 2), 60), bit.band(bit.brshift(num3, 6), 3))))!@#&		table.insert(outputTable, string.char(bit.band(num3, 63)))!@#&	end!@#&	--mark non-data (invalid) bytes!@#&	if #data % 3 == 1 then!@#&		outputTable[#outputTable] = \"=\"!@#&		outputTable[#outputTable - 1] = \"=\"!@#&	elseif #data % 3 == 2 then!@#&		outputTable[#outputTable] = \"=\"!@#&	end!@#&	return table.concat(outputTable, \"\")!@#&end!@#&!@#&nshAPI.unpackAndSaveFile = function(path, data)!@#&	local outputTable = {}!@#&	for i=1, #data, 4 do!@#&		local char1, char2, char3, char4 = string.byte(string.sub(data, i, i)), string.byte(string.sub(data, i + 1, i + 1)), string.byte(string.sub(data, i + 2, i + 2)), string.byte(string.sub(data, i + 3, i + 3))!@#&		table.insert(outputTable, bit.band(bit.bor(bit.blshift(char1, 2), bit.brshift(char2, 4)), 255))!@#&		table.insert(outputTable, bit.band(bit.bor(bit.blshift(char2, 4), bit.brshift(char3, 2)), 255))!@#&		table.insert(outputTable, bit.band(bit.bor(bit.blshift(char3, 6), char4), 255))!@#&	end!@#&	--clean invalid bytes if marked!@#&	if string.sub(data, #data, #data) == \"=\" then!@#&		table.remove(outputTable)!@#&		if string.sub(data, #data - 1, #data - 1) == \"=\" then!@#&			table.remove(outputTable)!@#&		end!@#&	end!@#&	local handle = io.open(path, \"wb\")!@#&	if handle then!@#&		for i = 1, #outputTable do!@#&			handle:write(outputTable[i])!@#&			if i % 10 == 0 then!@#&				os.startTimer(0.1)!@#&				os.pullEvent(\"timer\")!@#&			end!@#&		end!@#&		handle:close()!@#&	end!@#&end!@#&!@#&local packetConversion = {!@#&	query = \"SQ\",!@#&	response = \"SR\",!@#&	data = \"SP\",!@#&	close = \"SC\",!@#&	fileQuery = \"FQ\",!@#&	fileSend = \"FS\",!@#&	fileResponse = \"FR\",!@#&	fileHeader = \"FH\",!@#&	fileData = \"FD\",!@#&	fileEnd = \"FE\",!@#&	textWrite = \"TW\",!@#&	textCursorPos = \"TC\",!@#&	textGetCursorPos = \"TG\",!@#&	textGetSize = \"TD\",!@#&	textInfo = \"TI\",!@#&	textClear = \"TE\",!@#&	textClearLine = \"TL\",!@#&	textScroll = \"TS\",!@#&	textBlink = \"TB\",!@#&	textColor = \"TF\",!@#&	textBackground = \"TK\",!@#&	textIsColor = \"TA\",!@#&	textTable = \"TT\",!@#&	event = \"EV\",!@#&	SQ = \"query\",!@#&	SR = \"response\",!@#&	SP = \"data\",!@#&	SC = \"close\",!@#&	FQ = \"fileQuery\",!@#&	FS = \"fileSend\",!@#&	FR = \"fileResponse\",!@#&	FH = \"fileHeader\",!@#&	FD = \"fileData\",!@#&	FE = \"fileEnd\",!@#&	TW = \"textWrite\",!@#&	TC = \"textCursorPos\",!@#&	TG = \"textGetCursorPos\",!@#&	TD = \"textGetSize\",!@#&	TI = \"textInfo\",!@#&	TE = \"textClear\",!@#&	TL = \"textClearLine\",!@#&	TS = \"textScroll\",!@#&	TB = \"textBlink\",!@#&	TF = \"textColor\",!@#&	TK = \"textBackground\",!@#&	TA = \"textIsColor\",!@#&	TT = \"textTable\",!@#&	EV = \"event\",!@#&}!@#&!@#&local function openModem()!@#&	local modemFound = false!@#&	for _, side in ipairs(rs.getSides()) do!@#&		if peripheral.getType(side) == \"modem\" then!@#&			if not rednet.isOpen(side) then rednet.open(side) end!@#&			modemFound = true!@#&			break!@#&		end!@#&	end!@#&	return modemFound!@#&end!@#&!@#&local function send(id, pType, message)!@#&	if pType and message then!@#&		return rawSend(id, packetConversion[pType]..\":;\"..message)!@#&	end!@#&end!@#&!@#&local function awaitResponse(id, time)!@#&	id = tonumber(id)!@#&	local listenTimeOut = nil!@#&	local messRecv = false!@#&	if time then listenTimeOut = os.startTimer(time) end!@#&	while not messRecv do!@#&		local event, p1, p2 = os.pullEvent()!@#&		if event == \"timer\" and p1 == listenTimeOut then!@#&			return false!@#&		elseif event == \"rednet_message\" then!@#&			sender, message = p1, p2!@#&			if id == sender and message then!@#&				if packetConversion[string.sub(message, 1, 2)] then packetType = packetConversion[string.sub(message, 1, 2)] end!@#&				message = string.match(message, \";(.*)\")!@#&				messRecv = true!@#&			end!@#&		end!@#&	end!@#&	return packetType, message!@#&end!@#&!@#&local function processText(conn, pType, value)!@#&	if not pType then return false end!@#&	if pType == \"textWrite\" and value then!@#&		term.write(value)!@#&	elseif pType == \"textClear\" then!@#&		term.clear()!@#&	elseif pType == \"textClearLine\" then!@#&		term.clearLine()!@#&	elseif pType == \"textGetCursorPos\" then!@#&		local x, y = term.getCursorPos()!@#&		send(conn, \"textInfo\", math.floor(x)..\",\"..math.floor(y))!@#&	elseif pType == \"textCursorPos\" then!@#&		local x, y = string.match(value, \"(%-?%d+),(%-?%d+)\")!@#&		term.setCursorPos(tonumber(x), tonumber(y))!@#&	elseif pType == \"textBlink\" then!@#&		if value == \"true\" then!@#&			term.setCursorBlink(true)!@#&		else!@#&			term.setCursorBlink(false)!@#&		end!@#&	elseif pType == \"textGetSize\" then!@#&		x, y = term.getSize()!@#&		send(conn, \"textInfo\", x..\",\"..y)!@#&	elseif pType == \"textScroll\" and value then!@#&		term.scroll(tonumber(value))!@#&	elseif pType == \"textIsColor\" then!@#&		send(conn, \"textInfo\", tostring(term.isColor()))!@#&	elseif pType == \"textColor\" and value then!@#&		value = tonumber(value)!@#&		if (value == 1 or value == 32768) or term.isColor() then!@#&			term.setTextColor(value)!@#&		end!@#&	elseif pType == \"textBackground\" and value then!@#&		value = tonumber(value)!@#&		if (value == 1 or value == 32768) or term.isColor() then!@#&			term.setBackgroundColor(value)!@#&		end!@#&	elseif pType == \"textTable\" then!@#&		local linesTable = textutils.unserialize(value)!@#&		for i=1, linesTable.sizeY do!@#&			term.setCursorPos(1,i)!@#&			local lineEnd = false!@#&			local offset = 1!@#&			while not lineEnd do!@#&				local textColorString = string.match(string.sub(linesTable.textColor[i], offset), string.sub(linesTable.textColor[i], offset, offset)..\"*\")!@#&				local backColorString = string.match(string.sub(linesTable.backColor[i], offset), string.sub(linesTable.backColor[i], offset, offset)..\"*\")!@#&				term.setTextColor(2 ^ tonumber(string.sub(textColorString, 1, 1), 16))!@#&				term.setBackgroundColor(2 ^ tonumber(string.sub(backColorString, 1, 1), 16))!@#&				term.write(string.sub(linesTable.text[i], offset, offset + math.min(#textColorString, #backColorString) - 1))!@#&				offset = offset + math.min(#textColorString, #backColorString)!@#&				if offset > linesTable.sizeX then lineEnd = true end!@#&			end!@#&		end!@#&		term.setCursorPos(linesTable.cursorX, linesTable.cursorY)!@#&		term.setCursorBlink(linesTable.cursorBlink)!@#&	end!@#&	return!@#&end!@#&!@#&local function textRedirect(id)!@#&	local textTable = {}!@#&	textTable.id = id!@#&	textTable.write = function(text)!@#&		return send(textTable.id, \"textWrite\", text)!@#&	end!@#&	textTable.clear = function()!@#&		return send(textTable.id, \"textClear\", \"nil\")!@#&	end!@#&	textTable.clearLine = function()!@#&		return send(textTable.id, \"textClearLine\", \"nil\")!@#&	end!@#&	textTable.getCursorPos = function()!@#&		send(textTable.id, \"textGetCursorPos\", \"nil\")!@#&		local pType, message = awaitResponse(textTable.id, 2)!@#&		if pType and pType == \"textInfo\" then!@#&			local x, y = string.match(message, \"(%-?%d+),(%-?%d+)\")!@#&			return tonumber(x), tonumber(y)!@#&		end!@#&	end!@#&	textTable.setCursorPos = function(x, y)!@#&		return send(textTable.id, \"textCursorPos\", math.floor(x)..\",\"..math.floor(y))!@#&	end!@#&	textTable.setCursorBlink = function(b)!@#&		if b then!@#&			return send(textTable.id, \"textBlink\", \"true\")!@#&		else!@#&			return send(textTable.id, \"textBlink\", \"false\")!@#&		end!@#&	end!@#&	textTable.getSize = function()!@#&		send(textTable.id, \"textGetSize\", \"nil\")!@#&		local pType, message = awaitResponse(textTable.id, 2)!@#&		if pType and pType == \"textInfo\" then!@#&			local x, y = string.match(message, \"(%d+),(%d+)\")!@#&			return tonumber(x), tonumber(y)!@#&		end!@#&	end!@#&	textTable.scroll = function(lines)!@#&		return send(textTable.id, \"textScroll\", lines)!@#&	end!@#&	textTable.isColor = function()!@#&		send(textTable.id, \"textIsColor\", \"nil\")!@#&		local pType, message = awaitResponse(textTable.id, 2)!@#&		if pType and pType == \"textInfo\" then!@#&			if message == \"true\" then!@#&				return true!@#&			end!@#&		end!@#&		return false!@#&	end!@#&	textTable.isColour = textTable.isColor!@#&	textTable.setTextColor = function(color)!@#&		return send(textTable.id, \"textColor\", tostring(color))!@#&	end!@#&	textTable.setTextColour = textTable.setTextColor!@#&	textTable.setBackgroundColor = function(color)!@#&		return send(textTable.id, \"textBackground\", tostring(color))!@#&	end!@#&	textTable.setBackgroundColour = textTable.setBackgroundColor!@#&	return textTable!@#&end!@#&!@#&local function getServerID(server)!@#&	if tonumber(server) then!@#&		return tonumber(server)!@#&	elseif term.current then!@#&		return rednet.lookup(\"tror\", args[1])!@#&	end!@#&end!@#&!@#&local function resumeThread(conn, event)!@#&	local cInfo = connections[conn]!@#&	if connections[conn] and (not connections[conn].filter or event[1] == connections[conn].filter) then!@#&		connections[conn].filter = nil!@#&		local _oldTerm = term.redirect(connections[conn].target)!@#&		local passback = {coroutine.resume(connections[conn].thread, unpack(event))}!@#&		if passback[1] and passback[2] then!@#&			connections[conn].filter = passback[2]!@#&		end!@#&		if coroutine.status(connections[conn].thread) == \"dead\" then!@#&			send(conn, \"close\", \"disconnect\")!@#&			connections[conn] = false!@#&		end!@#&		if _oldTerm then!@#&			term.redirect(_oldTerm)!@#&		else!@#&			term.restore()!@#&		end!@#&		if connections[conn] and conn ~= \"localShell\" and framebuffer and connections[conn].target.changed then!@#&			send(conn, \"textTable\", textutils.serialize(connections[conn].target.buffer))!@#&			connections[conn].target.changed = false!@#&		end!@#&	end!@#&end!@#&!@#&local eventFilter = {!@#&	key = true,!@#&	char = true,!@#&	mouse_click = true,!@#&	mouse_drag = true,!@#&	mouse_scroll = true,!@#&}!@#&!@#&local function newSession(conn, x, y, color)!@#&	local session = {}!@#&	local path = \"/rom/programs/shell\"!@#&	if #args >= 2 and shell.resolveProgram(args[2]) then path = shell.resolveProgram(args[2]) end!@#&	session.thread = coroutine.create(function() shell.run(path) end)!@#&	if framebuffer then!@#&		local target = {}!@#&		local _target = framebuffer.new(x, y, color)!@#&		for k, v in pairs(_target) do!@#&			if type(k) == \"string\" and type(v) == \"function\" then!@#&				target[k] = function(...)!@#&					target.changed = true!@#&					return _target[k](...)!@#&				end!@#&			else!@#&				target[k] = _target[k]!@#&			end!@#&		end!@#&		session.target = target!@#&	else!@#&		session.target = textRedirect(conn)!@#&	end!@#&	session.status = \"open\"!@#&	_oldTerm = term.redirect(session.target)!@#&	coroutine.resume(session.thread)!@#&	if _oldTerm then!@#&		term.redirect(_oldTerm)!@#&	else!@#&		term.restore()!@#&	end!@#&	if framebuffer then!@#&		send(conn, \"textTable\", textutils.serialize(session.target.buffer))!@#&		session.target.changed = false!@#&	end!@#&	return session!@#&end!@#&!@#&if #args >= 1 and args[1] == \"host\" then!@#&	_G.nsh = nshAPI!@#&	if not openModem() then return end!@#&	if term.current then!@#&		if args[4] then!@#&			rednet.host(\"tror\", args[4])!@#&		elseif os.getComputerLabel() then!@#&			rednet.host(\"tror\", os.getComputerLabel())!@#&		else!@#&			print(\"No label or hostname provided!\")!@#&			return!@#&		end!@#&	end!@#&	local connInfo = {}!@#&	connInfo.target = term.current and term.current() or term.native!@#&	local path = \"/rom/programs/shell\"!@#&	if #args >= 3 and shell.resolveProgram(args[3]) then path = shell.resolveProgram(args[3]) end!@#&	connInfo.thread = coroutine.create(function() shell.run(path) end)!@#&	connections.localShell = connInfo!@#&	term.clear()!@#&	term.setCursorPos(1,1)!@#&	coroutine.resume(connections.localShell.thread)!@#&!@#&	while true do!@#&		event = {os.pullEventRaw()}!@#&		if event[1] == \"rednet_message\" then!@#&			if type(event[3]) == \"string\" and packetConversion[string.sub(event[3], 1, 2)] then!@#&				--this is a packet meant for us.!@#&				conn = event[2]!@#&				packetType = packetConversion[string.sub(event[3], 1, 2)]!@#&				message = string.match(event[3], \";(.*)\")!@#&				if connections[conn] and connections[conn].status == \"open\" then!@#&					if packetType == \"event\" or string.sub(packetType, 1, 4) == \"text\" then!@#&						local eventTable = {}!@#&						if packetType == \"event\" then!@#&							eventTable = textutils.unserialize(message)!@#&						else!@#&							--we can pass the packet in raw, since this is not an event packet.!@#&							eventTable = event!@#&						end!@#&						resumeThread(conn, eventTable)!@#&					elseif packetType == \"query\" then!@#&						local connType, color, x, y = string.match(message, \"(%a+):(%a+);(%d+),(%d+)\")!@#&						if connType == \"connect\" or (connType == \"resume\" and (not framebuffer)) then!@#&							--reset connection!@#&							send(conn, \"response\", \"OK\")!@#&							connections[conn] = newSession(conn, tonumber(x), tonumber(y), color == \"true\")!@#&						elseif connType == \"resume\" and connections[conn] and tonumber(x) == connections[conn].target.buffer.sizeX and tonumber(y) == connections[conn].target.buffer.sizeY then!@#&							--restore connection!@#&							send(conn, \"response\", \"OK\")!@#&							send(conn, \"textTable\", textutils.serialize(connections[conn].target.buffer))!@#&						end!@#&					elseif packetType == \"close\" then!@#&						connections[conn] = nil!@#&						send(conn, \"close\", \"disconnect\")!@#&						--close connection!@#&					else!@#&						--we got a packet, have an open connection, but despite it being in the conversion table, don't handle it ourselves. Send it onward.!@#&						resumeThread(conn, event)!@#&					end!@#&				elseif packetType ~= \"query\" then!@#&					--usually, we would send a disconnect here, but this prevents one from hosting nsh and connecting to other computers.  Pass these to all shells as well.!@#&					for cNum, cInfo in pairs(connections) do!@#&						resumeThread(cNum, event)!@#&					end!@#&				else!@#&					--open new connection!@#&					send(conn, \"response\", \"OK\")!@#&					local color, x, y = string.match(message, \"connect:(%a+);(%d+),(%d+)\")!@#&					local connInfo = newSession(conn, tonumber(x), tonumber(y), color == \"true\")!@#&					connections[conn] = connInfo!@#&				end!@#&			else!@#&				--rednet message, but not in the correct format, so pass to all shells.!@#&				for cNum, cInfo in pairs(connections) do!@#&					resumeThread(cNum, event)!@#&				end!@#&			end!@#&		elseif eventFilter[event[1]] then!@#&			--user interaction.!@#&			coroutine.resume(connections.localShell.thread, unpack(event))!@#&			if coroutine.status(connections.localShell.thread) == \"dead\" then!@#&				for cNum, cInfo in pairs(connections) do!@#&					if cNum ~= \"localShell\" then!@#&						send(cNum, \"close\", \"disconnect\")!@#&					end!@#&				end!@#&				return!@#&			end!@#&		else!@#&			--dispatch all other events to all shells!@#&			for cNum, cInfo in pairs(connections) do!@#&				resumeThread(cNum, event)!@#&			end!@#&		end!@#&	end!@#&!@#&elseif #args <= 2 and nsh and nsh.getRemoteID() then!@#&	print(nsh.getRemoteID())!@#&	--forwarding mode!@#&	local conns = nsh.getRemoteConnections()!@#&	for i = 1, #conns do!@#&		if conns[i] == serverNum then!@#&			print(\"Cyclic connection refused.\")!@#&			return!@#&		end!@#&	end!@#&	local fileTransferState = nil!@#&	local fileData = nil!@#&	local serverNum = getServerID(args[1])!@#&	if not serverNum then!@#&		print(\"Server Not Found\")!@#&		return!@#&	end!@#&	send(serverNum, \"query\", \"connect\")!@#&	local pType, message = awaitResponse(serverNum, 2)!@#&	if pType ~= \"response\" then!@#&		print(\"Connection Failed\")!@#&		return!@#&	else!@#&		nsh.connList[nsh.getRemoteID()].outbound = serverNum!@#&		term.clear()!@#&		term.setCursorPos(1,1)!@#&	end!@#&	local clientID = nsh.getRemoteID()!@#&	local serverID = tonumber(args[1])!@#&	while true do!@#&		event = {os.pullEvent()}!@#&		if event[1] == \"rednet_message\" then!@#&			if event[2] == clientID or event[2] == serverID then!@#&				if event[2] == serverID and string.sub(event[3], 1, 2) == \"SC\" then break end!@#&				rednet.send((event[2] == clientID and serverID or clientID), event[3])!@#&			end!@#&		elseif eventFilter[event[1]] then!@#&			rednet.send(serverID, \"EV:;\"..textutils.serialize(event))!@#&		end!@#&	end!@#&	nsh.connList[nsh.getRemoteID()].outbound = nil!@#&	term.clear()!@#&	term.setCursorPos(1, 1)!@#&	print(\"Connection closed by server\")!@#&!@#&elseif #args >= 1 then --either no server running or we are the local shell on the server.!@#&	if not openModem() then return end!@#&	local serverNum = getServerID(args[1])!@#&	if not serverNum then!@#&		print(\"Server Not Found\")!@#&		return!@#&	end!@#&	if nsh then!@#&		local conns = nsh.getRemoteConnections()!@#&		for i = 1, #conns do!@#&			if conns[i] == serverNum then!@#&				print(\"Connection refused.\")!@#&				return!@#&			end!@#&		end!@#&	end!@#&	local fileTransferState = nil!@#&	local fileData = nil!@#&	local fileBinaryData = nil!@#&	local unpackCo = {}!@#&	local color = term.isColor()!@#&	local x, y = term.getSize()!@#&	if args[2] == \"resume\" then!@#&		send(serverNum, \"query\", \"resume:\"..tostring(color)..\";\"..tostring(x)..\",\"..tostring(y))!@#&	else!@#&		send(serverNum, \"query\", \"connect:\"..tostring(color)..\";\"..tostring(x)..\",\"..tostring(y))!@#&	end!@#&	local timeout = os.startTimer(2)!@#&	while true do!@#&		local event = {os.pullEvent()}!@#&		if event[1] == \"timer\" and event[2] == timeout then!@#&			print(\"Connection failed.\")!@#&			return!@#&		elseif event[1] == \"rednet_message\" and event[2] == serverNum and type(event[3]) == \"string\" and string.sub(event[3], 1, 2) == \"SR\" then!@#&			if nsh then nshAPI = nsh end!@#&			if nshAPI.connList and nshAPI.connList.localShell then nshAPI.connList.localShell.outbound = serverNum end!@#&			nshAPI.serverNum = serverNum!@#&			nshAPI.clientCapabilities = \"-fileTransfer-extensions-\"!@#&			term.clear()!@#&			term.setCursorPos(1,1)!@#&			break!@#&		end!@#&	end!@#&!@#&	while true do!@#&		event = {os.pullEventRaw()}!@#&		if #unpackCo > 0 then!@#&			for i = #unpackCo, 1, -1 do!@#&				if coroutine.status(unpackCo[i]) ~= \"dead\" then!@#&					coroutine.resume(unpackCo[i], unpack(event))!@#&				else!@#&					table.remove(unpackCo, i)!@#&				end!@#&			end!@#&		end!@#&		if event[1] == \"rednet_message\" and event[2] == serverNum and type(event[3]) == \"string\" then!@#&			if packetConversion[string.sub(event[3], 1, 2)] then!@#&				packetType = packetConversion[string.sub(event[3], 1, 2)]!@#&				message = string.match(event[3], \";(.*)\")!@#&				if string.sub(packetType, 1, 4) == \"text\" then!@#&					processText(serverNum, packetType, message)!@#&				elseif packetType == \"data\" then!@#&					if message == \"clientCapabilities\" then!@#&						rednet.send(serverNum, nshAPI.clientCapabilities)!@#&					end!@#&				elseif packetType == \"fileQuery\" then!@#&					--send a file to the server!@#&					local mode, file = string.match(message, \"^(%a)=(.*)\")!@#&					if fs.exists(file) then!@#&						send(serverNum, \"fileHeader\", file)!@#&						if mode == \"b\" then!@#&							local fileString = nshAPI.packFile(file)!@#&							send(serverNum, \"fileData\", \"b=\"..fileString)!@#&						else!@#&							local handle = io.open(file, \"r\")!@#&							if handle then!@#&								send(serverNum, \"fileData\", \"t=\"..handle:read(\"*a\"))!@#&								handle:close()!@#&							end!@#&						end!@#&					else!@#&						send(serverNum, \"fileHeader\", \"fileNotFound\")!@#&					end!@#&					send(serverNum, \"fileEnd\", \"end\")!@#&				elseif packetType == \"fileSend\" then!@#&					--receive a file from the server, but don't overwrite existing files.!@#&					local mode, file = string.match(message, \"^(%a)=(.*)\")!@#&					if not fs.exists(file) then!@#&						fileTransferState = \"receive_wait:\"..file!@#&						send(serverNum, \"fileResponse\", \"ok\")!@#&						if mode == \"b\" then!@#&							fileBinaryData = \"\"!@#&							fileData = nil!@#&						else!@#&							fileData = \"\"!@#&							fileBinaryData = nil!@#&						end!@#&					else!@#&						send(serverNum, \"fileResponse\", \"reject\")!@#&					end!@#&				elseif packetType == \"fileHeader\" then!@#&					if message == \"fileNotFound\" then!@#&						fileTransferState = nil!@#&					end!@#&				elseif packetType == \"fileData\" then!@#&					if fileTransferState and string.match(fileTransferState, \"(.-):\") == \"receive_wait\" then!@#&						if string.match(message, \"^(%a)=\") == \"b\" then!@#&							fileBinaryData = fileBinaryData..string.match(message, \"^b=(.*)\")!@#&						else!@#&							fileData = fileData..string.match(message, \"^t=(.*)\")!@#&						end!@#&					end!@#&				elseif packetType == \"fileEnd\" then!@#&					if fileTransferState and string.match(fileTransferState, \"(.-):\") == \"receive_wait\" then!@#&						if fileBinaryData then!@#&							local co = coroutine.create(nshAPI.unpackAndSaveFile)!@#&							coroutine.resume(co, string.match(fileTransferState, \":(.*)\"), fileBinaryData)!@#&							if coroutine.status(co) ~= \"dead\" then!@#&								table.insert(unpackCo, co)!@#&							end!@#&						elseif fileData then!@#&							local handle = io.open(string.match(fileTransferState, \":(.*)\"), \"w\")!@#&							if handle then!@#&								handle:write(fileData)!@#&								handle:close()!@#&							end!@#&						end!@#&						fileTransferState = nil!@#&					end!@#&				elseif packetType == \"close\" then!@#&					if term.isColor() then!@#&						term.setBackgroundColor(colors.black)!@#&						term.setTextColor(colors.white)!@#&					end!@#&					term.clear()!@#&					term.setCursorPos(1, 1)!@#&					print(\"Connection closed by server.\")!@#&					nshAPI.serverNum = nil!@#&					if nshAPI.connList and nshAPI.connList.localShell then nshAPI.connList.localShell.outbound = nil end!@#&					return!@#&				end!@#&			end!@#&		elseif event[1] == \"mouse_click\" or event[1] == \"mouse_drag\" or event[1] == \"mouse_scroll\" or event[1] == \"key\" or event[1] == \"char\" then!@#&			--pack up event!@#&			send(serverNum, \"event\", textutils.serialize(event))!@#&		elseif event[1] == \"terminate\" then!@#&			nshAPI.serverNum = nil!@#&			if nshAPI.localShell then nshAPI.localShell.outbound = nil end!@#&			term.clear()!@#&			term.setCursorPos(1, 1)!@#&			print(\"Connection closed locally.\")!@#&			return!@#&		end!@#&	end!@#&else!@#&	print(\"Usage: VNC <serverID> [resume]\")!@#&	print(\"       VNC host [remote [local [name]]]\")!@#&end",["wget"]="local args = {...}!@#&!@#&if args[1] and args[2] then!@#&  f = http.get(args[1]).readAll()!@#&  f2 = fs.open(args[2], \"w\")!@#&  f2.write(f)!@#&  f2.close()!@#&  print(\"Downloaded \"..args[1]..\" to \"..args[2])!@#&!@#&else!@#&  print(\"Usage: wget <link> <filename>\")!@#&end",["get"]="if not nsh then print(\"No nsh session!\") return end!@#&!@#&local args = {...}!@#&!@#&if #args < 2 then!@#&	print(\"Usage: get <remote> <local>\")!@#&	print(\"<remote>: any file on the server\")!@#&	print(\"<local>: any non-existant file on the client\")!@#&	return!@#&end!@#&!@#&if fs.exists(args[1]) then!@#&	nsh.send(\"FS:;t=\"..args[2])!@#&	local message = nsh.receive()!@#&	if message == \"FR:;ok\" then!@#&		nsh.send(\"FH:;\"..args[1])!@#&		local handle = io.open(args[1], \"r\")!@#&		if handle then!@#&			nsh.send(\"FD:;t=\"..handle:read(\"*a\"))!@#&			handle:close()!@#&		end!@#&		nsh.send(\"FE:;end\")!@#&	else!@#&		print(\"Client rejected file!\")!@#&	end!@#&end",["clone"]="local args = {...}!@#&local allowExit = false!@#&!@#&local function setColor(color)!@#&	-- shorthand color setting!@#&	if term.isColor() then!@#&		term.setTextColor(color)!@#&	end!@#&end!@#&!@#&local function writeColor(...)!@#&	-- shorthand color writing!@#&	-- format: printColor(color1, 'text', color2, 'text', ...)!@#&	local curColor!@#&	for _, v in pairs{...} do!@#&		if type(v) == 'number' then!@#&			curColor = v!@#&		else!@#&			if curColor then!@#&				setColor(curColor)!@#&			end!@#&			write(tostring(v))!@#&		end!@#&	end!@#&end!@#&!@#&local function printColor(...)!@#&	-- same as writeColor but with a \\n!@#&	writeColor(...)!@#&	print()!@#&end!@#&!@#&local function openRednet()!@#&	-- shorthand rednet opening!@#&	for _, side in pairs(rs.getSides()) do!@#&		if peripheral.getType(side) == 'modem' then!@#&			rednet.open(side)!@#&			return side!@#&		end!@#&	end!@#&	printColor(colors.red, 'Please attach rednet modem')!@#&end!@#&!@#&local function client(server)!@#&	-- password get!@#&	writeColor(colors.magenta, 'Password: ')	!@#&	setColor(colors.white)!@#&	local pass = read('*')!@#&	!@#&	printColor(colors.yellow, 'Sending clone request')!@#&	!@#&	-- request files from the server while sending pass as well!@#&	rednet.send(server, 'clone_req '..pass)!@#&	!@#&	-- listen for a sendback!@#&	-- only allow max 10 seconds of delay!@#&	local msg!@#&	repeat!@#&		local id, _msg = rednet.receive(10)!@#&		msg = _msg!@#&	until id == server or not id!@#&	!@#&	-- no message? probably timed out!@#&	if not msg then!@#&		printColor(colors.red, 'Request timed out')!@#&		return!@#&	end!@#&	!@#&	-- the uSER SHOULD STOP TRYING TO HACK THE SERVER oMG!@#&	if msg == 'clone_failed_pass' then!@#&		printColor(colors.red, 'Wrong password')!@#&		return!@#&	end!@#&	!@#&	printColor(colors.lime, 'Request successful')!@#&	printColor(colors.yellow, 'Writing files')!@#&	!@#&	-- get the program list and establish a directory for our new files!@#&	local programs = textutils.unserialize(msg)!@#&	local clonepath = 'SpeedOS/Downloads/cloned/'..server!@#&	!@#&	-- erase the current clone, then make a new one!@#&	if fs.exists(clonepath) then!@#&		fs.delete(clonepath)!@#&	end!@#&	fs.makeDir(clonepath)!@#&	!@#&	-- write ALL OF THE PROGRAMS!!@#&	for i=1, #programs do!@#&		local prog = programs[i]!@#&		local path = clonepath..'/'..prog.path!@#&	!@#&	-- because i can't directly write \"cloned/254/stuff/stuff/more_stuff\"!@#&	-- gotta make the directory for it first!@#&	local pathfolder = path:match('(.+)/')!@#&	if not fs.exists(pathfolder) then!@#&		fs.makeDir(pathfolder)!@#&	end!@#&	!@#&	-- PROCEED WITH THE WRITING!@#&		local file = fs.open(path, 'w')!@#&		if file then!@#&			file.write(prog.contents)!@#&			file.close()!@#&			!@#&			setColor(colors.lime)!@#&			printColor(colors.lime, 'Successfully wrote '..prog.path)!@#&		else!@#&		-- wtf why? :C!@#&			printColor(colors.red, 'Could not write '..prog.path)!@#&		end!@#&	end!@#&	!@#&	shell.setDir(clonepath)!@#&end!@#&!@#&local function files()!@#&	printColor(colors.yellow, 'Generating file list')!@#&	!@#&	-- recursively make a file list!@#&	-- exclude specific directories!@#&	local filelist = {}!@#&	!@#&	local function genFiles(cdir)!@#&		for _, localpath in pairs(fs.list(cdir)) do!@#&			local path = fs.combine(cdir, localpath)!@#&		!@#&			if fs.isDir(path) then!@#&				if not path:find('rom')!@#&				and not path:find('SpeedOS/Downloads/cloned') then!@#&					genFiles(path)!@#&				end!@#&			else!@#&				if not localpath:match('^/?%.') then!@#&					local file = fs.open(path,'r')!@#&					if file then!@#&						table.insert(filelist, {!@#&							path = path;!@#&							contents = file.readAll()!@#&						})!@#&						file.close()!@#&					else!@#&						printColor(colors.red, 'Could not read '..path)!@#&					end!@#&				end!@#&			end!@#&		end!@#&	end!@#&	!@#&	genFiles '/'!@#&	return filelist!@#&end!@#&!@#&local function server()!@#&	-- if there's a password file!@#&	-- read it and key it in to the read() function!@#&	-- by abusing events!@#&	local passfile = fs.open('.clone_pass','r')!@#&	if passfile then!@#&		for v in (passfile.readAll()):gmatch('.') do!@#&			os.queueEvent('char',v)!@#&		end!@#&		passfile.close()!@#&	end!@#&	!@#&	-- get a server password!@#&	writeColor(colors.magenta, 'Password: ')!@#&	setColor(colors.white)!@#&	local password = read('*')!@#&	!@#&	-- go ahead and key in a y if the saved password exists,!@#&	-- and n if otherwise!@#&	-- for convenience!@#&	os.queueEvent('char', passfile and 'y' or 'n')!@#&	!@#&	-- save the password to the file!@#&	-- if the user chooses to remember it!@#&	writeColor(colors.magenta, 'Remember password? [y/n] ')!@#&	setColor(colors.white)!@#&	local answer = read():lower():sub(1,1)!@#&	!@#&	if answer == 'y' then!@#&		local passfile = fs.open('.clone_pass','w')!@#&		if passfile then!@#&			passfile.write(password)!@#&			passfile.close()!@#&		end!@#&		!@#&	-- otherwise, delete the file!@#&	-- to prevent rememberance!@#&	elseif answer == 'n' then!@#&		if fs.exists('.clone_pass') then!@#&			fs.delete('.clone_pass')!@#&		end!@#&	end!@#&	!@#&	printColor(colors.lime, 'Hosting clone server')!@#&	printColor(colors.yellow, 'Press backspace to quit.')!@#&	allowExit = true!@#&	!@#&	-- loooOOOOOOOoooop!@#&	while true do!@#&		local id, msg = rednet.receive()!@#&		!@#&		printColor(colors.yellow, 'Request from '..id)!@#&		!@#&		local pass = msg:match('clone_req (.+)')!@#&		if pass == password then!@#&			printColor(colors.lime, 'Successful authentication')!@#&			local files = textutils.serialize(files())!@#&			printColor(colors.yellow, 'Sending files')!@#&			rednet.send(id, files)!@#&			printColor(colors.lime, 'Done')!@#&		else!@#&			printColor(colors.red, 'Access denied')!@#&			rednet.send(id, 'clone_failed_pass')!@#&		end!@#&	end!@#&end!@#&!@#&local function exit()!@#&	-- when used with parallel,!@#&	-- allows exiting the program!@#&	-- at any time :D (when allowExit is true)!@#&	!@#&	repeat!@#&		local _, k = os.pullEvent('key')!@#&	until k == keys.backspace!@#&	and allowExit!@#&end!@#&!@#&printColor(colors.yellow, 'Opening rednet')!@#&local modemSide = openRednet()!@#&if not modemSide then return end!@#&!@#&if args[1] == 'host' then!@#&	parallel.waitForAny(server, exit)!@#&elseif tonumber(args[1]) then!@#&	client(tonumber(args[1]))!@#&else!@#&	print 'Usage: \"clone <id>\" or \"clone host\"'!@#&end!@#&!@#&rednet.close(modemSide)",["compress"]="local inFN, outFN!@#&!@#&local args = {...}!@#&if #args ~= 2 then!@#&	error(\"Usage: \"..shell.getRunningProgram()..\" <input file> <output file>\", 0)!@#&end!@#&inFN = args[1]!@#&outFN = args[2]!@#&!@#&local function countTabs(l)!@#&	for k = 1, #l do!@#&		if l:sub(k, k) ~= \"\\t\" then!@#&			return k - 1!@#&		end!@#&	end!@#&	return #l!@#&end!@#&!@#&local compressNonIdentGroups = false!@#&local huffmanEncode = true!@#&!@#&-- read input file!@#&local f = fs.open(inFN, \"r\")!@#&local lines = {}!@#&for line in f.readLine do!@#&	lines[#lines+1] = line!@#&end!@#&f.close()!@#&!@#&-- convert indentation!@#&local inText = \"\"!@#&local lastIndent = 0!@#&for lineNo, line in ipairs(lines) do!@#&	local thisIndent = countTabs(line)!@#&	local nextIndent = lines[lineNo+1] and countTabs(lines[lineNo+1]) or thisIndent!@#&	local prevIndent = lines[lineNo-1] and countTabs(lines[lineNo-1]) or 0!@#&	!@#&	if thisIndent > nextIndent and thisIndent > prevIndent then!@#&		thisIndent = math.min(nextIndent, prevIndent)!@#&	end!@#&	!@#&	while lastIndent < thisIndent do!@#&		inText = inText .. \"&+\"!@#&		lastIndent = lastIndent + 1!@#&	end!@#&	while lastIndent > thisIndent do!@#&		inText = inText .. \"&-\"!@#&		lastIndent = lastIndent - 1!@#&	end!@#&	!@#&	if line:sub(1,1) == \"&\" then!@#&		line = \"&\" .. line!@#&	end!@#&	!@#&	inText = inText .. line:sub(lastIndent+1) .. \"\\n\"!@#&end!@#&!@#&!@#&-- parse into alternating strings of alphanumerics and non-alphanumerics!@#&local parsed = {}!@#&local idents = \"abcdefghijklmnopqrstvuwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_\"!@#&local lastIdent = nil!@#&!@#&local function isIdentString(s)!@#&	return idents:find(s:sub(1,1), 1, true) ~= nil!@#&end!@#&!@#&local groupCounts = {}!@#&!@#&local function onFinishSegment(isIdent, segment)!@#&	if isIdent or compressNonIdentGroups then!@#&		groupCounts[segment] = (groupCounts[segment] or 0) + 1!@#&	end!@#&end!@#&!@#&for k = 1, #inText do!@#&	local ch = inText:sub(k, k)!@#&	local isIdent = idents:find(ch, 1, true) ~= nil!@#&	if isIdent ~= lastIdent then!@#&		if #parsed > 0 then!@#&			onFinishSegment(lastIdent, parsed[#parsed])!@#&		end!@#&		parsed[#parsed+1] = \"\"!@#&	end!@#&	lastIdent = isIdent!@#&	parsed[#parsed] = parsed[#parsed]..ch!@#&end!@#&if #parsed > 0 then!@#&	onFinishSegment(isIdent, parsed[#parsed])!@#&end!@#&!@#&--print(table.concat(parsed,\" \"))!@#&!@#&local id_literal_escape = \"_\"!@#&local pc_literal_escape = \"$\"!@#&!@#&local nextCompressed!@#&do!@#&	local validchars_id = idents:gsub(id_literal_escape,\"\")!@#&	local validchars_pc = \"\"!@#&	!@#&	for n=32,126 do!@#&		local ch = string.char(n)!@#&		if not idents:find(ch,1,true) and ch ~= pc_literal_escape then!@#&			validchars_pc = validchars_pc .. ch!@#&		end!@#&	end!@#&	!@#&	local function encode(n, isIdent)!@#&		local s = \"\"!@#&		local validchars = isIdent and validchars_id or validchars_pc!@#&		while n > 0 do!@#&			local digit = (n % #validchars) + 1!@#&			s = s .. validchars:sub(digit, digit)!@#&			n = math.floor(n / #validchars)!@#&		end!@#&		return s!@#&	end!@#&	!@#&	local next = {[true]=0,[false]=0}!@#&	function nextCompressed(isIdent)!@#&		next[isIdent] = next[isIdent] + 1!@#&		return encode(next[isIdent], isIdent)!@#&	end!@#&end!@#&!@#&!@#&!@#&!@#&!@#&!@#&local groupsSorted = {}!@#&local groups = {}!@#&for k, v in pairs(groupCounts) do!@#&	if (#k > 1 and v > 1) or k:find(isIdentString(k) and id_literal_escape or pc_literal_escape) then!@#&		local t = {k, v}!@#&		groups[k] = t!@#&		table.insert(groupsSorted, t)!@#&	end!@#&end!@#&!@#&local avgCompressedLength = 2!@#&!@#&local function estSavings(a)!@#&	local str = a[1]!@#&	local count = a[2]!@#&	local compressedLength = a[3] and #a[3] or avgCompressedLength!@#&	!@#&	-- estimates the number of chars saved by compressing this group!@#&	!@#&	-- it costs #str+1 chars to encode the group literally, or about compressedLength chars to compress it!@#&	-- so by compressing it, each time the group occurs we save (#str + 1 - compressedLength) chars!@#&	local saved = (#str + 1 - compressedLength) * count!@#&	!@#&	-- but we also use about #str + 1 chars in the name table if we compress it.!@#&	saved = saved - (#str + 1)!@#&	!@#&	return saved!@#&end!@#&!@#&table.sort(groupsSorted, function(a, b)!@#&	return estSavings(a) > estSavings(b)!@#&end)!@#&!@#&--local total = 0!@#&for _, v in ipairs(groupsSorted) do!@#&	v[3] = nextCompressed(isIdentString(v[1]))!@#&	--total = total + estSavings(v)!@#&	--[[if estSavings(v) > 0 then!@#&		print(v[1]:gsub(\"\\n\",\"\\\\n\"),\" \",v[2],\" \",v[3],\" \",estSavings(v))!@#&	end]]!@#&end!@#&!@#&--print(total,\" \",#inText,\" \",#inText-total)!@#&!@#&!@#&!@#&!@#&!@#&local out = #groupsSorted .. \"^\"!@#&for _, v in ipairs(groupsSorted) do!@#&	local encoded = v[1]:gsub(\"&\", \"&a\"):gsub(\"%^\",\"&b\")!@#&	out = out .. encoded .. \"^\"!@#&end!@#&for _, v in pairs(parsed) do!@#&	if groups[v] then!@#&		out = out .. groups[v][3]!@#&	elseif isIdentString(v) then!@#&		out = out .. id_literal_escape .. v!@#&	elseif compressNonIdentGroups then!@#&		out = out .. pc_literal_escape .. v!@#&	else!@#&		out = out .. v!@#&	end!@#&end!@#&!@#&if huffmanEncode then!@#&	-- generate a huffman tree - first we need to count the number of times each symbol occurs!@#&	local symbolCounts = {}!@#&	local numSymbols = 0!@#&	for k = 1, #out do!@#&		local sym = out:sub(k,k)!@#&		if not symbolCounts[sym] then!@#&			numSymbols = numSymbols + 1!@#&			symbolCounts[sym] = 1!@#&		else!@#&			symbolCounts[sym] = symbolCounts[sym] + 1!@#&		end!@#&	end!@#&	!@#&	-- convert them to tree nodes and sort them by count, ascending order!@#&	-- a tree node is either {symbol, count} or {{subtree_0, subtree_1}, count}!@#&	local treeFragments = {}!@#&	for sym, count in pairs(symbolCounts) do!@#&		treeFragments[#treeFragments + 1] = {sym, count}!@#&	end!@#&	table.sort(treeFragments, function(a, b)!@#&		return a[2] < b[2]!@#&	end)!@#&	!@#&	while #treeFragments > 1 do!@#&		-- take the two lowest-count fragments and combine them!@#&		local a = table.remove(treeFragments, 1)!@#&		local b = table.remove(treeFragments, 1)!@#&		!@#&		local newCount = a[2] + b[2]!@#&		local new = {{a, b}, newCount}!@#&		!@#&		-- insert the new fragment in the right place!@#&		if #treeFragments == 0 or newCount > treeFragments[#treeFragments][2] then!@#&			table.insert(treeFragments, new)!@#&		else!@#&			local ok = false!@#&			for k=1,#treeFragments do!@#&				if treeFragments[k][2] >= newCount then!@#&					table.insert(treeFragments, k, new)!@#&					ok = true!@#&					break!@#&				end!@#&			end!@#&			assert(ok, \"internal error: couldn't find place for tree fragment\")!@#&		end!@#&	end!@#&	!@#&	local symbolCodes = {}!@#&	!@#&	local function shallowCopyTable(t)!@#&		local rv = {}!@#&		for k,v in pairs(t) do!@#&			rv[k] = v!@#&		end!@#&		return rv!@#&	end!@#&	!@#&	-- now we have a huffman tree (codes -> symbols) but we need a map of symbols -> codes, so do that!@#&	local function iterate(root, path)!@#&		if type(root[1]) == \"table\" then!@#&			local t = shallowCopyTable(path)!@#&			t[#t+1] = false!@#&			iterate(root[1][1], t)!@#&			path[#path+1] = true!@#&			iterate(root[1][2], path)!@#&		else!@#&			symbolCodes[root[1]] = path!@#&		end!@#&	end!@#&	iterate(treeFragments[1], {})!@#&	!@#&	local rv = {}!@#&	!@#&	local symbolBitWidth = 8!@#&	!@#&	--print(\"#syms: \",numSymbols)!@#&	--print(\"sbw: \",symbolBitWidth)!@#&	!@#&	local function writeTree(tree)!@#&		if type(tree[1]) == \"table\" then!@#&			rv[#rv+1] = false!@#&			writeTree(tree[1][1])!@#&			writeTree(tree[1][2])!@#&		else!@#&			rv[#rv+1] = true!@#&			local symbol = tree[1]:byte()!@#&			for k = 0, symbolBitWidth - 1 do!@#&				!@#&				local testBit = 2 ^ k!@#&				!@#&				-- local bit = ((symbol & testBit) != 0)!@#&				local bit = (symbol % (2 * testBit)) >= testBit!@#&				rv[#rv+1] = bit!@#&			end!@#&		end!@#&	end!@#&	!@#&	writeTree(treeFragments[1])!@#&	!@#&	--print(\"tree size: \",#rv)!@#&	!@#&	for k = 1, #out do!@#&		local symbol = out:sub(k,k)!@#&		--print(symbol,\" \",#symbolCodes[symbol])!@#&		for _, bit in ipairs(symbolCodes[symbol] or error(\"internal error: symbol \"..symbol..\" has no code\")) do!@#&			rv[#rv+1] = bit!@#&		end!@#&	end!@#&	!@#&	--print(\"total size: \",#rv)!@#&	!@#&	!@#&	-- convert the array of bits (rv) back to characters!@#&	!@#&	!@#&	local s = \"\"!@#&	!@#&	-- write 6 bits per byte because LuaJ (and/or CC)	!@#&	local bitsPerByte = 6!@#&	local firstCharacter = 32!@#&	!@#&	-- pad to an integral number of bytes!@#&	local padbit = not rv[#rv]!@#&	repeat!@#&		rv[#rv+1] = padbit!@#&	until (#rv % bitsPerByte) == 0!@#&	!@#&	!@#&	for k = 1, #rv, bitsPerByte do!@#&		local byte = firstCharacter!@#&		for i = 0, bitsPerByte-1 do!@#&			if rv[k+i] then 	!@#&				byte = byte + 2 ^ i!@#&			end!@#&		end!@#&		s = s .. string.char(byte)!@#&	end!@#&	!@#&	out = s!@#&end!@#&!@#&local f = fs.open(outFN, \"w\")!@#&f.write(out)!@#&f.close()!@#&!@#&print(\"uncompressed size: \",inText:len())!@#&print(\"compressed size: \",out:len())!@#&print(\"compression ratio: \",out:len()/inText:len())",["decompress"]="local inFN, outFN!@#&!@#&local args = {...}!@#&if #args ~= 2 then!@#&	error(\"Usage: \"..shell.getRunningProgram()..\" <input file> <output file>\")!@#&end!@#&inFN = args[1]!@#&outFN = args[2]!@#&!@#&local f = fs.open(inFN, \"r\")!@#&local inText = f.readAll()!@#&f.close()!@#&!@#&local inPos = 1!@#&!@#&local huffmanCompression = true!@#&!@#&if huffmanCompression then!@#&	-- convert characters to bits!@#&	local inBits = {}!@#&	for k = 1, #inText do!@#&		local byte = inText:sub(k, k):byte() - 32!@#&		for i = 0, 5 do!@#&			local testBit = 2 ^ i!@#&			inBits[#inBits + 1] = (byte % (2 * testBit)) >= testBit!@#&		end!@#&	end!@#&	!@#&	-- remove padding!@#&	local padbit = inBits[#inBits]!@#&	while inBits[#inBits] == padbit do!@#&		inBits[#inBits] = nil!@#&	end!@#&	!@#&	local pos = 1!@#&	local function readBit()!@#&		if pos > #inBits then error(\"end of stream\", 2) end!@#&		pos = pos + 1!@#&		return inBits[pos - 1]!@#&	end!@#&	!@#&	-- read huffman tree!@#&	local function readTree()!@#&		if readBit() then!@#&			local byte = 0!@#&			for i = 0, 7 do!@#&				if readBit() then!@#&					byte = byte + 2 ^ i!@#&				end!@#&			end!@#&			--write(string.char(byte))!@#&			return string.char(byte)!@#&		else!@#&			local subtree_0 = readTree()!@#&			local subtree_1 = readTree()!@#&			return {[false]=subtree_0, [true]=subtree_1}!@#&		end!@#&	end!@#&	local tree = readTree()!@#&	!@#&	inText = \"\"!@#&	!@#&	local treePos = tree!@#&	while pos <= #inBits do!@#&		local bit = readBit()!@#&		treePos = treePos[bit]!@#&		if type(treePos) ~= \"table\" then!@#&			inText = inText .. treePos!@#&			treePos = tree!@#&		end!@#&	end!@#&	if treePos ~= tree then!@#&		error(\"unexpected end of stream\")!@#&	end!@#&end!@#&!@#&local function readTo(delim)!@#&	local start = inPos!@#&	local nextCaret = inText:find(delim, inPos, true)!@#&	if not nextCaret then!@#&		inPos = #inText + 1!@#&		return inText:sub(start)!@#&	end!@#&	inPos = nextCaret + 1!@#&	return inText:sub(start, nextCaret - 1)!@#&end!@#&!@#&-- returns iterator!@#&local function splitString(str, delim)!@#&	local pos = 1!@#&	return function()!@#&		if pos > #str then return end!@#&		local start = pos!@#&		local nextDelim = str:find(delim, pos, true)!@#&		if not nextDelim then!@#&			pos = #str + 1!@#&			return str:sub(start)!@#&		end!@#&		pos = nextDelim + 1!@#&		return str:sub(start, nextDelim - 1)!@#&	end!@#&end!@#&!@#&local nameTable = {}!@#&!@#&local idents = \"abcdefghijklmnopqrstvuwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_\"!@#&local nextCompressed!@#&do!@#&	local validchars = idents:gsub(\"_\",\"\")!@#&	!@#&	local function encode(n)!@#&		local s = \"\"!@#&		while n > 0 do!@#&			local digit = (n % #validchars) + 1!@#&			s = s .. validchars:sub(digit, digit)!@#&			n = math.floor(n / #validchars)!@#&		end!@#&		return s!@#&	end!@#&	!@#&	local next = 0!@#&	function nextCompressed()!@#&		next = next + 1!@#&		return encode(next)!@#&	end!@#&end!@#&!@#&for k = 1, tonumber(readTo(\"^\")) do!@#&	local key = nextCompressed()!@#&	local value = readTo(\"^\")!@#&	--print(key,\" -> \",value)!@#&	nameTable[key] = value!@#&	--assert(readTo(\"^\") == tostring(k), \"mismatch at \"..k)!@#&end!@#&!@#&local out = \"\"!@#&!@#&local function onFinishSegment(isIdent, segment)!@#&	if isIdent then!@#&		if segment:sub(1, 1) == \"_\" then!@#&			out = out .. segment:sub(2)!@#&		else!@#&			out = out .. tostring(nameTable[segment])!@#&		end!@#&	else!@#&		out = out .. segment!@#&	end!@#&end!@#&!@#&local parsed = {}!@#&local idents = \"abcdefghijklmnopqrstvuwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_\"!@#&local lastIdent = nil!@#&!@#&for k = inPos, #inText do!@#&	local ch = inText:sub(k, k)!@#&	local isIdent = idents:find(ch, 1, true) ~= nil!@#&	if isIdent ~= lastIdent then!@#&		if #parsed > 0 then!@#&			onFinishSegment(lastIdent, parsed[#parsed])!@#&		end!@#&		parsed[#parsed+1] = \"\"!@#&	end!@#&	lastIdent = isIdent!@#&	parsed[#parsed] = parsed[#parsed]..ch!@#&end!@#&if #parsed > 0 then!@#&	onFinishSegment(isIdent, parsed[#parsed])!@#&end!@#&!@#&-- convert indentation back!@#&local out2 = \"\"!@#&local lastIndent = \"\"!@#&for line in splitString(out, \"\\n\") do!@#&	while line:sub(1,2) == \"&+\" do!@#&		lastIndent = lastIndent .. \"\\t\"!@#&		line = line:sub(3)!@#&	end!@#&	while line:sub(1,2) == \"&-\" do!@#&		lastIndent = lastIndent:sub(1, #lastIndent - 1)!@#&		line = line:sub(3)!@#&	end!@#&	if line:sub(1,2) == \"&&\" then!@#&		line = line:sub(2)!@#&	end!@#&	!@#&	out2 = out2 .. lastIndent .. line .. \"\\n\"!@#&end!@#&!@#&--print(out2)!@#&!@#&local f = fs.open(outFN, \"w\")!@#&f.write(out2)!@#&f.close()",["put"]="if not nsh then print(\"No nsh session!\") return end!@#&!@#&local args = {...}!@#&!@#&if #args < 2 then!@#&	print(\"Usage: put <local> <remote>\")!@#&	print(\"<local>: any file on the client\")!@#&	print(\"<remote>: any file on the server\")!@#&	return!@#&end!@#&!@#&local fileData = \"\"!@#&!@#&nsh.send(\"FQ:;t=\"..args[1])!@#&local message = nsh.receive()!@#&if message ~= \"fileNotFound\" then!@#&	while true do!@#&		message = nsh.receive()!@#&		pType = string.sub(message, 1, 2)!@#&		if pType == \"FD\" then!@#&			fileData = fileData..string.match(message, \"^FD:;t=(.*)\")!@#&		elseif pType == \"FE\" then!@#&			break!@#&		end!@#&	end!@#&	if #fileData > 0 then!@#&		local handle = io.open(args[2], \"w\")!@#&		if handle then!@#&			handle:write(fileData)!@#&			handle:close()!@#&		end!@#&	else!@#&		print(\"Empty file not written!\")!@#&	end!@#&end",},["DiskLabel"]="local headerColor = colors.lightGray!@#&local bodyColor = colors.gray!@#&local textColor = colors.white!@#&local exitColor = colors.yellow!@#&local title = \"SpeedOS - Disk labelling utility\"!@#&!@#&local termw, termh = term.getSize()!@#&local sides = rs.getSides()!@#&!@#&term.setBackgroundColor(bodyColor)!@#&term.clear()!@#&term.setTextColor(headerColor)!@#&term.setBackgroundColor(headerColor)!@#&term.setCursorPos(1, 1)!@#&write(string.rep(\"#\", termw * 3))!@#&term.setCursorPos(math.floor((termw - #title) / 2), 2)!@#&term.setTextColor(textColor)!@#&term.write(title)!@#&!@#&term.setBackgroundColor(bodyColor)!@#&!@#&local yoffset = math.floor((termh - 6) / 2) + 1!@#&local availableSides = {}!@#&!@#&function redrawScreen()!@#&	term.setCursorPos(2, yoffset)!@#&	term.clearLine()!@#&	term.write(\"Side    | Label\")!@#&	for i = 1, 6 do!@#&		term.setCursorPos(2, yoffset + i)!@#&		term.clearLine()!@#&		local theLabel!@#&		if availableSides[sides[i]] then!@#&			theLabel = disk.getLabel(sides[i]) or \"[No label]\"!@#&		else!@#&			if peripheral.getType(sides[i]) == \"drive\" then!@#&				theLabel = \"[No disk]\"!@#&			else!@#&				theLabel = \"[No drive]\"!@#&			end!@#&		end!@#&		term.write(sides[i] .. string.rep(\" \", 8 - #sides[i]) .. \"| \" .. theLabel)!@#&	end!@#&	term.setCursorPos(2, termh - 3)!@#&	term.clearLine()!@#&	term.write(\"Click on a label to edit it\")!@#&	term.setCursorPos(2, termh - 2)!@#&	term.write(\"Right click on a label to clear it quickly\")!@#&	term.setTextColor(exitColor)!@#&	term.setCursorPos(2, termh - 1)!@#&	term.write(\"Click on this text to exit\")!@#&	term.setTextColor(textColor)!@#&end!@#&!@#&function setDiskLabel(sideID, bclear)!@#&	local label = \"\"!@#&	if not bclear then!@#&		term.setCursorPos(2, yoffset + sideID)!@#&		term.clearLine()!@#&		term.write(sides[sideID] .. string.rep(\" \", 8 - #sides[sideID]) .. \"|\")!@#&		term.setCursorPos(2, termh - 3)!@#&		term.clearLine()!@#&		term.write(\"Press Enter/Return to save\")!@#&		term.setCursorPos(12, sideID + yoffset)!@#&		label = read()!@#&	end!@#&	disk.setLabel(sides[sideID], label)!@#&	redrawScreen()!@#&end!@#&function updateAvailableSides()!@#&	for key, value in pairs(sides) do availableSides[value] = disk.isPresent(value) end!@#&	redrawScreen()!@#&end!@#&!@#&updateAvailableSides()!@#&while true do!@#&	local event, p1, p2, p3 = os.pullEvent()!@#&	if event == \"mouse_click\" then!@#&		if p1 == 1 then!@#&			if p3 == termh - 1 then return end!@#&			if p3 > yoffset and p3 < yoffset + 7 then if availableSides[sides[p3 - yoffset]] then setDiskLabel(p3 - yoffset) end end!@#&		end!@#&		if p1 == 2 and p3 > yoffset and p3 < yoffset + 7 then if availableSides[sides[p3 - yoffset]] then setDiskLabel(p3 - yoffset, true) end end!@#&	end!@#&	if event == \"disk\" or event == \"disk_eject\" or event == \"peripheral\" or event == \"peripheral_detach\" then updateAvailableSides() end!@#&end",["SensorView"]="os.loadAPI(\"SpeedAPI/windows\")!@#&os.loadAPI(\"SpeedAPI/graph\")!@#&os.loadAPI(\"SpeedAPI/sensor\")!@#&!@#&local sideNames = rs.getSides()!@#&windows.clearScreen(colors.white)!@#&hui = windows.input(\"auto\", \"auto\", \"Additional side\", 10, {\"Side\", \"\"})!@#&windows.clearScreen(colors.black)!@#&table.insert(sideNames,  hui[1])!@#&local sensorSides = {}!@#&local sideSelection, targetSelection, targetOffset, detailOffset = 1, 1, 1, 1!@#&local detailLines, targetNameMenuTable!@#&local graphing, graphSide, graphTarget, graphMatch, graphInstance = false!@#&!@#&local function checkSensors()!@#&	for _,side in ipairs(sideNames) do!@#&		if peripheral.getType(side) == \"sensor\" then!@#&			sensorSides[side] = true!@#&		else!@#&			sensorSides[side] = false!@#&		end	!@#&	end!@#&end!@#&!@#&local function writeEntry(menuTable, index, cursorPos)!@#&	if cursorPos == index then!@#&		term.setBackgroundColor(term.isColor() and colors.blue or colors.white)!@#&		term.setTextColor(term.isColor() and colors.white or colors.black)!@#&		term.write(string.sub(menuTable[index], 1, 16))!@#&		term.setBackgroundColor(colors.black)!@#&		term.setTextColor(colors.white)!@#&	else!@#&		term.write(string.sub(menuTable[index], 1, 16))!@#&	end!@#&end!@#&!@#&local function toLines(currTable, linesTable, trackingTable, depth)!@#&	for k,v in pairs(currTable) do!@#&		if type(v) == \"table\" then!@#&			table.insert(linesTable, string.rep(\" \", depth)..tostring(k)..\":\")!@#&			if trackingTable[v] then!@#&				table.insert(linesTable, string.rep(\" \", depth + 1)..\"<Cyclic Reference: \"..trackingTable[v]..\">\")!@#&			else!@#&				trackingTable[v] = #linesTable!@#&				toLines(v, linesTable, trackingTable, depth + 1)!@#&			end!@#&		else!@#&			table.insert(linesTable, string.rep(\" \", depth)..tostring(k)..\"> \"..tostring(v))!@#&		end!@#&	end!@#&end!@#&!@#&local function drawDividerDown(startY)!@#&	local w, h = term.getSize()!@#&	for i=startY, h do!@#&		term.setCursorPos(17, i)!@#&		term.write(\"|\")!@#&	end!@#&end!@#&!@#&local function redraw()!@#&	w, h = term.getSize()!@#&	--pre-fetch sensor targets and detailed target information.!@#&	local targetNames = nil!@#&	detailLines = {}!@#&	checkSensors()!@#&	if sensorSides[sideNames[sideSelection]] then!@#&		targetNames = sensor.call(sideNames[sideSelection], \"getSensorName\") and sensor.call(sideNames[sideSelection], \"getTargets\")!@#&		targetNameMenuTable = {}!@#&		if targetNames then!@#&			for k,v in pairs(targetNames) do!@#&				table.insert(targetNameMenuTable, k)!@#&			end!@#&			table.sort(targetNameMenuTable)!@#&			if #targetNameMenuTable > 0 then!@#&				toLines(sensor.call(sideNames[sideSelection], \"getTargetDetails\", targetNameMenuTable[targetSelection]), detailLines, {}, 0)!@#&			end!@#&		end!@#&	end!@#&	--now draw the screen.!@#&	term.clear()!@#&	term.setCursorPos(1, 1)!@#&	term.write(\"=Sensor Info Viewer=\"..string.rep(\"=\", w - 20))!@#&	term.setCursorPos(1, 2)!@#&	for n,side in ipairs(sideNames) do!@#&		if n == sideSelection then!@#&			term.setBackgroundColor(term.isColor() and colors.blue or colors.white)!@#&			term.setTextColor(term.isColor() and colors.white or colors.black)!@#&			term.write(side)!@#&			term.setBackgroundColor(colors.black)!@#&			term.setTextColor(colors.white)!@#&			term.write(\" \")!@#&		else!@#&			term.write(side..\" \")!@#&		end!@#&	end!@#&	term.setCursorPos(1, 3)!@#&	term.write(\"-Targets--------+-Info-\"..string.rep(\"-\", w - 23))!@#&!@#&	if targetNames then!@#&		--make sure we have valid targets, even if we have a valid sensor.!@#&		if #targetNameMenuTable > 0 then!@#&			term.setCursorPos(1, 4)!@#&			if targetOffset > 1 then!@#&				term.write(\"/\\\\\")!@#&			else!@#&				writeEntry(targetNameMenuTable, 1, targetSelection)	!@#&			end!@#&			--h-5 to leave room for top and bottom entries.!@#&			for i=1, math.min(h - 5, #targetNameMenuTable - 1) do!@#&				term.setCursorPos(1, i + 4)!@#&				writeEntry(targetNameMenuTable, targetOffset + i, targetSelection)!@#&			end!@#&			if #targetNameMenuTable >= h then!@#&				term.setCursorPos(1, h)!@#&				if #targetNameMenuTable > targetOffset + h - 4 then!@#&					term.write(\"\\\\/\")!@#&				else!@#&					writeEntry(targetNameMenuTable, #targetNameMenuTable, targetSelection)!@#&				end!@#&			end!@#&!@#&			--detailed info.!@#&			for i=1, math.min(h - 3, #detailLines - ((detailOffset - 1) * (h - 3))) do!@#&				term.setCursorPos(17, i + 3)!@#&				term.write(\"|\"..string.sub(detailLines[(detailOffset - 1) * (h - 3) + i], 1, w - 17))!@#&			end!@#&			local currX, currY = term.getCursorPos()!@#&			drawDividerDown(currY + 1)!@#&		else!@#&			term.setCursorPos(1, 4)!@#&			term.write(\"No targets found|\")!@#&			drawDividerDown(5)!@#&		end!@#&	else!@#&		if peripheral.getType(sideNames[sideSelection]) == \"sensor\" then!@#&			term.setCursorPos(1, 4)!@#&			term.write(\"No sensor card  |\")!@#&			drawDividerDown(5)!@#&		else!@#&			term.setCursorPos(1, 4)!@#&			term.write(\"No sensor found |\")!@#&			drawDividerDown(5)!@#&		end!@#&	end!@#&	term.setCursorPos(1, h)!@#&end!@#&!@#&local function findGraphMatch(currTable, target, matchCount, trackingTable)!@#&	for k, v in pairs(currTable) do!@#&		if type(v) == \"table\" then!@#&			if trackingTable[v] then return false end!@#&			trackingTable[v] = true!@#&			ret, path, count = findGraphMatch(v, target, matchCount, trackingTable)!@#&			if ret and path then!@#&				return ret, tostring(k)..\"-\"..path!@#&			elseif count then!@#&				matchCount = count!@#&			end!@#&		elseif type(v) == \"number\" then!@#&			matchCount = matchCount + 1!@#&			if matchCount == target then return v, tostring(k) end!@#&		end!@#&	end!@#&	return false, nil, matchCount!@#&end!@#&!@#&local function createGraph(targetNum)!@#&	local monSide = \"\"!@#&	for k, side in ipairs(rs.getSides()) do!@#&		if peripheral.getType(side) == \"monitor\" then!@#&			monSide = side!@#&			break!@#&		end!@#&	end!@#&	if monSide and targetNum >= 1 and findGraphMatch(sensor.call(graphSide, \"getTargetDetails\", graphTarget), targetNum, 0, {}) then!@#&		graphMatch = targetNum!@#&		local val, name = findGraphMatch(sensor.call(graphSide, \"getTargetDetails\", graphTarget), targetNum, 0, {})!@#&		local updateFunc = function() return (findGraphMatch(sensor.call(graphSide, \"getTargetDetails\", graphTarget), graphMatch, 0, {})) end!@#&		graphInst = graph.new(peripheral.wrap(monSide), updateFunc, name)!@#&		return graphInst!@#&	end!@#&end!@#&!@#&while true do!@#&	redraw()!@#&	local e, p1 = os.pullEvent()!@#&	if e == \"key\" then!@#&		local w, h = term.getSize()!@#&		if p1 == 203 then!@#&			--left, selects previous side!@#&			if sideSelection > 1 then!@#&				sideSelection = sideSelection - 1!@#&				targetSelection = 1!@#&				targetOffset = 1!@#&				detailOffset = 1!@#&				detailLines = nil!@#&			end!@#&		elseif p1 == 205 then!@#&			--right, selects next side!@#&			if true then!@#&				sideSelection = sideSelection + 1!@#&				targetSelection = 1!@#&				targetOffset = 1!@#&				detailOffset = 1!@#&				detailLines = nil!@#&			end!@#&		elseif p1 == 200 then!@#&			--up, selects previous target, adjusting offset if necessary.!@#&			if targetSelection > 1 then!@#&				if targetSelection - targetOffset + 1 == 2 and targetOffset > 1 then!@#&					targetOffset = targetOffset - 1!@#&				end!@#&				targetSelection = targetSelection - 1!@#&				detailOffset = 1!@#&				detailLines = nil!@#&			end!@#&		elseif p1 == 208 then!@#&			--down, selects next target, adjusting offset if necessary.!@#&			if targetNameMenuTable and targetSelection < #targetNameMenuTable then!@#&				if targetSelection - targetOffset + 1 == h - 4 and targetSelection ~= #targetNameMenuTable - 1 then!@#&					targetOffset = targetOffset + 1!@#&				end!@#&				targetSelection = targetSelection + 1!@#&				detailOffset = 1!@#&				detailLines = nil!@#&			end!@#&		elseif p1 == 201 then!@#&			--pgup, moves detail!@#&			if detailOffset > 1 then!@#&				detailOffset = detailOffset - 1!@#&			end!@#&		elseif p1 == 209 then!@#&			--pgdown, moves detail!@#&			local w, h = term.getSize()!@#&			if detailLines and detailOffset < math.ceil(#detailLines / (h - 3)) then!@#&				detailOffset = detailOffset + 1!@#&			end!@#&		--and now, since redraw() will eat char events with the change to sensor.call:!@#&		elseif p1 == 31 then --s!@#&			if detailLines then!@#&				local fileHandle = io.open(\"sensorDetailed-\"..sideNames[sideSelection]..\"-\"..targetNameMenuTable[targetSelection], \"w\")!@#&				if fileHandle then!@#&					for k, v in ipairs(detailLines) do!@#&						fileHandle:write(v..\"\\n\")!@#&					end!@#&					fileHandle:close()!@#&				end!@#&			end!@#&		elseif p1 == 16 then --q!@#&			sleep(0)!@#&			return!@#&		elseif p1 == 34 then --g!@#&			if graph then!@#&				graphing = not graphing!@#&				if not graphing then!@#&					graphSide = nil!@#&					graphTarget = nil!@#&					graphUpdate = nil!@#&				else!@#&					graphSide = sideNames[sideSelection]!@#&					graphTarget = targetNameMenuTable[targetSelection]!@#&					graphInstance = createGraph(1)!@#&					graphUpdate = os.startTimer(0.5)!@#&				end!@#&			end!@#&		elseif p1 == 49 then --n!@#&			if graphing then!@#&				local newGraph = createGraph(graphMatch + 1)!@#&				if newGraph then!@#&					graphInstance = newGraph!@#&					graphUpdate = os.startTimer(0.5)!@#&				end!@#&			end!@#&		elseif p1 == 25 then --p!@#&			if graphing then!@#&				local newGraph = createGraph(graphMatch - 1)!@#&				if newGraph then!@#&					graphInstance = newGraph!@#&					graphUpdate = os.startTimer(0.5)!@#&				end!@#&			end!@#&		end!@#&	elseif e == \"timer\" then!@#&		if p1 == graphUpdate then!@#&			graphInstance:draw()!@#&			graphUpdate = os.startTimer(0.5)!@#&		end!@#&	end!@#&end",["Sketch"]="if OneOS then!@#&	--running under OneOS!@#&	OneOS.ToolBarColour = colours.grey!@#&	OneOS.ToolBarTextColour = colours.white!@#&end!@#&!@#&colours.transparent = -1!@#&colors.transparent = -1!@#&!@#&--APIS--!@#&!@#&--This is my drawing API, is is pretty much identical to what drives OneOS, PearOS, etc.!@#&local _w, _h = term.getSize()!@#&!@#&local round = function(num, idp)!@#&	local mult = 10^(idp or 0)!@#&	return math.floor(num * mult + 0.5) / mult!@#&end!@#&!@#&Clipboard = {!@#&	Content = nil,!@#&	Type = nil,!@#&	IsCut = false,!@#&!@#&	Empty = function()!@#&		Clipboard.Content = nil!@#&		Clipboard.Type = nil!@#&		Clipboard.IsCut = false!@#&	end,!@#&!@#&	isEmpty = function()!@#&		return Clipboard.Content == nil!@#&	end,!@#&!@#&	Copy = function(content, _type)!@#&		Clipboard.Content = content!@#&		Clipboard.Type = _type or 'generic'!@#&		Clipboard.IsCut = false!@#&	end,!@#&!@#&	Cut = function(content, _type)!@#&		Clipboard.Content = content!@#&		Clipboard.Type = _type or 'generic'!@#&		Clipboard.IsCut = true!@#&	end,!@#&!@#&	Paste = function()!@#&		local c, t = Clipboard.Content, Clipboard.Type!@#&		if Clipboard.IsCut then!@#&			Clipboard.Empty()!@#&		end!@#&		return c, t!@#&	end!@#&}!@#&!@#&if OneOS and OneOS.Clipboard then!@#&	Clipboard = OneOS.Clipboard!@#&end!@#&!@#&Drawing = {!@#&	!@#&	Screen = {!@#&		Width = _w,!@#&		Height = _h!@#&	},!@#&!@#&	DrawCharacters = function (x, y, characters, textColour,bgColour)!@#&		Drawing.WriteStringToBuffer(x, y, characters, textColour, bgColour)!@#&	end,!@#&	!@#&	DrawBlankArea = function (x, y, w, h, colour)!@#&		Drawing.DrawArea (x, y, w, h, \" \", 1, colour)!@#&	end,!@#&!@#&	DrawArea = function (x, y, w, h, character, textColour, bgColour)!@#&		--width must be greater than 1, other wise we get a stack overflow!@#&		if w < 0 then!@#&			w = w * -1!@#&		elseif w == 0 then!@#&			w = 1!@#&		end!@#&!@#&		for ix = 1, w do!@#&			local currX = x + ix - 1!@#&			for iy = 1, h do!@#&				local currY = y + iy - 1!@#&				Drawing.WriteToBuffer(currX, currY, character, textColour, bgColour)!@#&			end!@#&		end!@#&	end,!@#&!@#&	DrawImage = function(_x,_y,tImage, w, h)!@#&		if tImage then!@#&			for y = 1, h do!@#&				if not tImage[y] then!@#&					break!@#&				end!@#&				for x = 1, w do!@#&					if not tImage[y][x] then!@#&						break!@#&					end!@#&					local bgColour = tImage[y][x]!@#&		            local textColour = tImage.textcol[y][x] or colours.white!@#&		            local char = tImage.text[y][x]!@#&		            Drawing.WriteToBuffer(x+_x-1, y+_y-1, char, textColour, bgColour)!@#&				end!@#&			end!@#&		elseif w and h then!@#&			Drawing.DrawBlankArea(x, y, w, h, colours.green)!@#&		end!@#&	end,!@#&	--using .nft!@#&	LoadImage = function(path)!@#&		local image = {!@#&			text = {},!@#&			textcol = {}!@#&		}!@#&		local _fs = fs!@#&		if OneOS then!@#&			_fs = OneOS.FS!@#&		end!@#&		if _fs.exists(path) then!@#&			local _open = io.open!@#&			if OneOS then!@#&				_open = OneOS.IO.open!@#&			end!@#&	        local file = _open(path, \"r\")!@#&	        local sLine = file:read()!@#&	        local num = 1!@#&	        while sLine do  !@#&	                table.insert(image, num, {})!@#&	                table.insert(image.text, num, {})!@#&	                table.insert(image.textcol, num, {})!@#&	                                            !@#&	                --As we're no longer 1-1, we keep track of what index to write to!@#&	                local writeIndex = 1!@#&	                --Tells us if we've hit a 30 or 31 (BG and FG respectively)- next char specifies the curr colour!@#&	                local bgNext, fgNext = false, false!@#&	                --The current background and foreground colours!@#&	                local currBG, currFG = nil,nil!@#&	                for i=1,#sLine do!@#&	                        local nextChar = string.sub(sLine, i, i)!@#&	                        if nextChar:byte() == 30 then!@#&                                bgNext = true!@#&	                        elseif nextChar:byte() == 31 then!@#&                                fgNext = true!@#&	                        elseif bgNext then!@#&                                currBG = Drawing.GetColour(nextChar)!@#&                                bgNext = false!@#&	                        elseif fgNext then!@#&                                currFG = Drawing.GetColour(nextChar)!@#&                                fgNext = false!@#&	                        else!@#&                                if nextChar ~= \" \" and currFG == nil then!@#&                                       currFG = colours.white!@#&                                end!@#&                                image[num][writeIndex] = currBG!@#&                                image.textcol[num][writeIndex] = currFG!@#&                                image.text[num][writeIndex] = nextChar!@#&                                writeIndex = writeIndex + 1!@#&	                        end!@#&	                end!@#&	                num = num+1!@#&	                sLine = file:read()!@#&	        end!@#&	        file:close()!@#&		end!@#&	 	return image!@#&	end,!@#&!@#&	DrawCharactersCenter = function(x, y, w, h, characters, textColour,bgColour)!@#&		w = w or Drawing.Screen.Width!@#&		h = h or Drawing.Screen.Height!@#&		x = x or 0!@#&		y = y or 0!@#&		x = math.ceil((w - #characters) / 2) + x!@#&		y = math.floor(h / 2) + y!@#&!@#&		Drawing.DrawCharacters(x, y, characters, textColour, bgColour)!@#&	end,!@#&!@#&	GetColour = function(hex)!@#&		if hex == ' ' then!@#&			return colours.transparent!@#&		end!@#&	    local value = tonumber(hex, 16)!@#&	    if not value then return nil end!@#&	    value = math.pow(2,value)!@#&	    return value!@#&	end,!@#&!@#&	Clear = function (_colour)!@#&		_colour = _colour or colours.black!@#&		Drawing.ClearBuffer()!@#&		Drawing.DrawBlankArea(1, 1, Drawing.Screen.Width, Drawing.Screen.Height, _colour)!@#&	end,!@#&!@#&	Buffer = {},!@#&	BackBuffer = {},!@#&!@#&	DrawBuffer = function()!@#&		for y,row in pairs(Drawing.Buffer) do!@#&			for x,pixel in pairs(row) do!@#&				local shouldDraw = true!@#&				local hasBackBuffer = true!@#&				if Drawing.BackBuffer[y] == nil or Drawing.BackBuffer[y][x] == nil or #Drawing.BackBuffer[y][x] ~= 3 then!@#&					hasBackBuffer = false!@#&				end!@#&				if hasBackBuffer and Drawing.BackBuffer[y][x][1] == Drawing.Buffer[y][x][1] and Drawing.BackBuffer[y][x][2] == Drawing.Buffer[y][x][2] and Drawing.BackBuffer[y][x][3] == Drawing.Buffer[y][x][3] then!@#&					shouldDraw = false!@#&				end!@#&				if shouldDraw then!@#&					term.setBackgroundColour(pixel[3])!@#&					term.setTextColour(pixel[2])!@#&					term.setCursorPos(x, y)!@#&					term.write(pixel[1])!@#&				end!@#&			end!@#&		end!@#&		Drawing.BackBuffer = Drawing.Buffer!@#&		Drawing.Buffer = {}!@#&		term.setCursorPos(1,1)!@#&	end,!@#&!@#&	ClearBuffer = function()!@#&		Drawing.Buffer = {}!@#&	end,!@#&!@#&	WriteStringToBuffer = function (x, y, characters, textColour,bgColour)!@#&		for i = 1, #characters do!@#&   			local character = characters:sub(i,i)!@#&   			Drawing.WriteToBuffer(x + i - 1, y, character, textColour, bgColour)!@#&		end!@#&	end,!@#&!@#&	WriteToBuffer = function(x, y, character, textColour,bgColour)!@#&		x = round(x)!@#&		y = round(y)!@#&		if bgColour == colours.transparent then!@#&			Drawing.Buffer[y] = Drawing.Buffer[y] or {}!@#&			Drawing.Buffer[y][x] = Drawing.Buffer[y][x] or {\"\", colours.white, colours.black}!@#&			Drawing.Buffer[y][x][1] = character!@#&			Drawing.Buffer[y][x][2] = textColour!@#&		else!@#&			Drawing.Buffer[y] = Drawing.Buffer[y] or {}!@#&			Drawing.Buffer[y][x] = {character, textColour, bgColour}!@#&		end!@#&	end,!@#&}!@#&!@#&--Colour Deffitions--!@#&UIColours = {!@#&	Toolbar = colours.grey,!@#&	ToolbarText = colours.lightGrey,!@#&	ToolbarSelected = colours.lightBlue,!@#&	ControlText = colours.white,!@#&	ToolbarItemTitle = colours.black,!@#&	Background = colours.lightGrey,!@#&	MenuBackground = colours.white,!@#&	MenuText = colours.black,!@#&	MenuSeparatorText = colours.grey,!@#&	MenuDisabledText = colours.lightGrey,!@#&	Shadow = colours.grey,!@#&	TransparentBackgroundOne = colours.white,!@#&	TransparentBackgroundTwo = colours.lightGrey,!@#&	MenuBarActive = colours.white!@#&}!@#&!@#&--Lists--!@#&Current = {!@#&	Artboard = nil,!@#&	Layer = nil,!@#&	Tool = nil,!@#&	ToolSize = 1,!@#&	Toolbar = nil,!@#&	Colour = colours.lightBlue,!@#&	Menu = nil,!@#&	MenuBar = nil,!@#&	Window = nil,!@#&	Input = nil,!@#&	CursorPos = {1,1},!@#&	CursorColour = colours.black,!@#&	InterfaceVisible = true,!@#&	Selection = {},!@#&	SelectionDrawTimer = nil,!@#&	HandDragStart = {},!@#&	Modified = false,!@#&}!@#&!@#&local isQuitting = false!@#&!@#&function PrintCentered(text, y)!@#&    local w, h = term.getSize()!@#&    x = math.ceil(math.ceil((w / 2) - (#text / 2)), 0)+1!@#&    term.setCursorPos(x, y)!@#&    print(text)!@#&end!@#&!@#&function DoVanillaClose()!@#&	term.setBackgroundColour(colours.black)!@#&	term.setTextColour(colours.white)!@#&	term.clear()!@#&	term.setCursorPos(1, 1)!@#&	PrintCentered(\"Thanks for using Sketch!\", (Drawing.Screen.Height/2)-1)!@#&	term.setTextColour(colours.lightGrey)!@#&	PrintCentered(\"Photoshop Inspired Image Editor for ComputerCraft\", (Drawing.Screen.Height/2))!@#&	term.setTextColour(colours.white)!@#&	PrintCentered(\"(c) SpeedOS 2024\", (Drawing.Screen.Height/2)+3)!@#&	term.setCursorPos(1, Drawing.Screen.Height)!@#&	error('', 0)!@#&end!@#&!@#&function Close()!@#&	if isQuitting or not Current.Artboard or not Current.Modified then!@#&		if not OneOS then!@#&			DoVanillaClose()!@#&		end!@#&		return true!@#&	else!@#&		local _w = ButtonDialougeWindow:Initialise('Quit Sketch?', 'You have unsaved changes, do you want to quit anyway?', 'Quit', 'Cancel', function(window, success)!@#&			if success then!@#&				if OneOS then!@#&					OneOS.Close(true)!@#&				else!@#&					DoVanillaClose()!@#&				end!@#&			end!@#&			window:Close()!@#&			Draw()!@#&		end):Show()!@#&		--it's hacky but it works!@#&		os.queueEvent('mouse_click', 1, _w.X, _w.Y)!@#&		return false!@#&	end!@#&end!@#&!@#&if OneOS then!@#&	OneOS.CanClose = function()!@#&		return Close()!@#&	end!@#&end!@#&!@#&Lists = {!@#&	Artboards = {},!@#&	Interface = {!@#&		Toolbars = {}!@#&	}	!@#&}!@#&!@#&Events = {!@#&	!@#&}!@#&!@#&--Setters--!@#&!@#&function SetColour(colour)!@#&	Current.Colour = colour!@#&	Draw()!@#&end!@#&!@#&function SetTool(tool)!@#&	if tool and tool.Select and tool:Select() then!@#&		Current.Input = nil!@#&		Current.Tool = tool!@#&		return true!@#&	end!@#&	return false!@#&end!@#&!@#&function GetAbsolutePosition(object)!@#&	local obj = object!@#&	local i = 0!@#&	local x = 1!@#&	local y = 1!@#&	while true do!@#&		x = x + obj.X - 1!@#&		y = y + obj.Y - 1!@#&!@#&		if not obj.Parent then!@#&			return {X = x, Y = y}!@#&		end!@#&!@#&		obj = obj.Parent!@#&!@#&		if i > 32 then!@#&			return {X = 1, Y = 1}!@#&		end!@#&!@#&		i = i + 1!@#&	end!@#&!@#&end!@#&!@#&--Object Defintions--!@#&!@#&Pixel = {!@#&	TextColour = colours.black,!@#&	BackgroundColour = colours.white,!@#&	Character = \" \",!@#&	Layer = nil,!@#&!@#&	Draw = function(self, x, y)!@#&		if self.BackgroundColour ~= colours.transparent or self.Character ~= ' ' then!@#&			Drawing.WriteToBuffer(self.Layer.Artboard.X + x - 1, self.Layer.Artboard.Y + y - 1, self.Character, self.TextColour, self.BackgroundColour)!@#&		end!@#&	end,!@#&!@#&	Initialise = function(self, textColour, backgroundColour, character, layer)!@#&		local new = {}    -- the new instance!@#&		setmetatable( new, {__index = self} )!@#&		new.TextColour = textColour or self.TextColour!@#&		new.BackgroundColour = backgroundColour or self.BackgroundColour!@#&		new.Character = character or self.Character!@#&		new.Layer = layer!@#&		return new!@#&	end,!@#&!@#&	Set = function(self, textColour, backgroundColour, character)!@#&		self.TextColour = textColour or self.TextColour!@#&		self.BackgroundColour = backgroundColour or self.BackgroundColour!@#&		self.Character = character or self.Character!@#&	end!@#&}!@#&!@#&Layer = {!@#&	Name = \"\",!@#&	Pixels = {!@#&!@#&	},!@#&	Artboard = nil,!@#&	BackgroundColour = colours.white,!@#&	Visible = true,!@#&	Index = 1,!@#&!@#&	Draw = function(self)!@#&		if self.Visible then!@#&			for x = 1, self.Artboard.Width do!@#&				for y = 1, self.Artboard.Height do!@#&					self.Pixels[x][y]:Draw(x, y)!@#&				end!@#&			end!@#&		end!@#&	end,!@#&!@#&	Remove = function(self)!@#&		for i, v in ipairs(self.Artboard.Layers) do!@#&			if v == Current.Layer then!@#&				Current.Artboard.Layers[i] = nil!@#&				Current.Layer = Current.Artboard.Layers[1]!@#&				ModuleNamed('Layers'):Update()!@#&			end!@#&		end!@#&	end,!@#&!@#&	Initialise = function(self, name, backgroundColour, artboard, index, pixels)!@#&		local new = {}    -- the new instance!@#&		setmetatable( new, {__index = self} )!@#&		new.Name = name!@#&		new.Pixels = {}!@#&		new.BackgroundColour = backgroundColour!@#&		new.Artboard = artboard!@#&		new.Index = index or #artboard.Layers + 1!@#&		if not pixels then!@#&			new:MakeAllBlankPixels()!@#&		else!@#&			new:MakeAllBlankPixels()!@#&			for x, col in ipairs(pixels) do!@#&				for y, pixel in ipairs(col) do!@#&					new:SetPixel(x, y, pixel.TextColour, pixel.BackgroundColour, pixel.Character)!@#&				end!@#&			end!@#&		end!@#&		!@#&		return new!@#&	end,!@#&!@#&	SetPixel = function(self, x, y, textColour, backgroundColour, character)!@#&		textColour = textColour or Current.Colour!@#&		backgroundColour = backgroundColour or Current.Colour!@#&		character = character or \" \"!@#&!@#&		if x < 1 or y < 1 or x > self.Artboard.Width or y > self.Artboard.Height then!@#&			return!@#&		end!@#&!@#&		if self.Pixels[x][y] then!@#&			self.Pixels[x][y]:Set(textColour, backgroundColour, character)!@#&			self.Pixels[x][y]:Draw(x,y)!@#&		end!@#&	end,!@#&!@#&	MakePixel = function(self, x, y, backgroundColour)!@#&		backgroundColour = backgroundColour or self.BackgroundColour			!@#&		self.Pixels[x][y] = Pixel:Initialise(nil, backgroundColour, nil, self)!@#&	end,!@#&!@#&	MakeColumn = function(self, x)!@#&		self.Pixels[x] = {}!@#&	end,!@#&!@#&	MakeAllBlankPixels = function(self)!@#&		for x = 1, self.Artboard.Width do!@#&			if not self.Pixels[x] then!@#&				self:MakeColumn(x)!@#&			end!@#&!@#&			for y = 1, self.Artboard.Height do			!@#&			!@#&				if not self.Pixels[x][y] then!@#&					self:MakePixel(x, y)!@#&				end!@#&!@#&			end!@#&		end!@#&	end,!@#&!@#&	PixelsInSelection = function(self, cut)!@#&		local pixels = {}!@#&		if Current.Selection and Current.Selection[1] and Current.Selection[2] ~= nil then!@#&			local point1 = Current.Selection[1]!@#&			local point2 = Current.Selection[2]!@#&!@#&			local size = point2 - point1!@#&			local cornerX = point1.x!@#&			local cornerY = point1.y!@#&			for x = 1, size.x + 1 do!@#&				for y = 1, size.y + 1 do!@#&					if not pixels[x] then!@#&						pixels[x] = {}!@#&					end!@#&					if not self.Pixels[cornerX + x - 1] or not self.Pixels[cornerX + x - 1][cornerY + y - 1] then!@#&						break!@#&					end!@#&					local pixel =  self.Pixels[cornerX + x - 1][cornerY + y - 1]!@#&					pixels[x][y] = Pixel:Initialise(pixel.TextColour, pixel.BackgroundColour, pixel.Character, Current.Layer)!@#&					if cut then!@#&						Current.Layer:SetPixel(cornerX + x - 1, cornerY + y - 1, nil, Current.Layer.BackgroundColour, nil)!@#&					end!@#&				end!@#&			end!@#&		end!@#&		return pixels!@#&	end,!@#&!@#&	EraseSelection = function(self)!@#&		if Current.Selection and Current.Selection[1] and Current.Selection[2] ~= nil then!@#&			local point1 = Current.Selection[1]!@#&			local point2 = Current.Selection[2]!@#&!@#&			local size = point2 - point1!@#&			local cornerX = point1.x!@#&			local cornerY = point1.y!@#&			for x = 1, size.x + 1 do!@#&				for y = 1, size.y + 1 do!@#&					Current.Layer:SetPixel(cornerX + x - 1, cornerY + y - 1, nil, Current.Layer.BackgroundColour, nil)!@#&				end!@#&			end!@#&		end!@#&	end,!@#&!@#&	InsertPixels = function(self, pixels)!@#&		local cornerX = Current.Selection[1].x!@#&		local cornerY = Current.Selection[1].y!@#&		for x, col in ipairs(pixels) do!@#&			for y, pixel in ipairs(col) do!@#&				Current.Layer:SetPixel(cornerX + x - 1, cornerY + y - 1, pixel.TextColour, pixel.BackgroundColour, pixel.Character)!@#&			end!@#&		end!@#&	end!@#&}!@#&!@#&Artboard = {!@#&	X = 0,!@#&	Y = 0,!@#&	Name = \"\",!@#&	Path = \"\",!@#&	Width = 1,!@#&	Height = 1,!@#&	Layers = {},!@#&	Format = nil,!@#&	SelectionIsBlack = true,!@#&!@#&	Draw = function(self)!@#&		Drawing.DrawBlankArea(self.X + 1, self.Y + 1, self.Width, self.Height, UIColours.Shadow)!@#&!@#&		local odd!@#&		for x = 1, self.Width do!@#&			odd = x % 2!@#&			if odd == 1 then!@#&				odd = true!@#&			else!@#&				odd = false!@#&			end!@#&			for y = 1, self.Height do!@#&				if odd then!@#&					Drawing.WriteToBuffer(self.X + x - 1, self.Y + y - 1, \":\", UIColours.TransparentBackgroundTwo, UIColours.TransparentBackgroundOne)!@#&				else!@#&					Drawing.WriteToBuffer(self.X + x - 1, self.Y + y - 1, \":\", UIColours.TransparentBackgroundOne, UIColours.TransparentBackgroundTwo)!@#&				end!@#&!@#&				odd = not odd!@#&			end!@#&		end!@#&!@#&		for i, layer in ipairs(self.Layers) do!@#&			layer:Draw()!@#&		end!@#&!@#&		if Current.Selection and Current.Selection[1] and Current.Selection[2] ~= nil then!@#&			local point1 = Current.Selection[1]!@#&			local point2 = Current.Selection[2]!@#&!@#&			local size = point2 - point1!@#&!@#&			local isBlack = self.SelectionIsBlack!@#&!@#&			local function c()!@#&				local c = colours.white!@#&				if isBlack then!@#&					c = colours.black!@#&				end!@#&				isBlack = not isBlack!@#&				return c!@#&			end!@#&!@#&			function horizontal(y)!@#&				Drawing.WriteToBuffer(self.X - 1 + point1.x, self.Y - 1 + y, '+', c(), colours.transparent)!@#&				if size.x > 0 then!@#&					for i = 1, size.x - 1 do!@#&						Drawing.WriteToBuffer(self.X - 1 + point1.x + i, self.Y - 1 + y, '-', c(), colours.transparent)!@#&					end!@#&				else!@#&					for i = 1, (-1 * size.x) - 1 do!@#&						Drawing.WriteToBuffer(self.X - 1 + point1.x - i, self.Y - 1 + y, '-', c(), colours.transparent)!@#&					end!@#&				end!@#&!@#&				Drawing.WriteToBuffer(self.X - 1 + point1.x + size.x, self.Y - 1 + y, '+', c(), colours.transparent)!@#&			end!@#&!@#&			function vertical(x)!@#&				if size.y < 0 then!@#&					for i = 1, (-1 * size.y) - 1 do!@#&						Drawing.WriteToBuffer(self.X - 1 + x, self.Y - 1 + point1.y  - i, '|', c(), colours.transparent)!@#&					end!@#&				else!@#&					for i = 1, size.y - 1 do!@#&						Drawing.WriteToBuffer(self.X - 1 + x, self.Y - 1 + point1.y  + i, '|', c(), colours.transparent)!@#&					end!@#&				end!@#&			end!@#&!@#&			horizontal(point1.y)!@#&			vertical(point1.x)!@#&			horizontal(point1.y + size.y)!@#&			vertical(point1.x + size.x)!@#&		end!@#&	end,!@#&!@#&	Initialise = function(self, name, path, width, height, format, backgroundColour, layers)!@#&		local new = {}    -- the new instance!@#&		setmetatable( new, {__index = self} )!@#&		new.Y = 3!@#&		new.X = 2!@#&		new.Name = name!@#&		new.Path = path!@#&		new.Width = width!@#&		new.Height = height!@#&		new.Format = format!@#&		new.Layers = {}!@#&		if not layers then!@#&			new:MakeLayer('Background', backgroundColour)!@#&		else!@#&			for i, layer in ipairs(layers) do!@#&				new:MakeLayer(layer.Name, layer.BackgroundColour, layer.Index, layer.Pixels)!@#&				new.Layers[i].Visible = layer.Visible!@#&			end!@#&			Current.Layer = new.Layers[#new.Layers]!@#&		end!@#&		return new!@#&	end,!@#&!@#&	Resize = function(self, top, bottom, left, right)!@#&		self.Height = self.Height + top + bottom!@#&		self.Width = self.Width + left + right!@#&!@#&		for i, layer in ipairs(self.Layers) do!@#&!@#&			if left < 0 then!@#&				for x = 1, -left do!@#&					table.remove(layer.Pixels, 1)!@#&				end!@#&			end!@#&!@#&			if right < 0 then!@#&				for x = 1, -right do!@#&					table.remove(layer.Pixels, #layer.Pixels)!@#&				end!@#&			end!@#&!@#&			for x = 1, left do!@#&				table.insert(layer.Pixels, 1, {})!@#&				for y = 1, self.Height do!@#&					layer:MakePixel(1, y)!@#&				end!@#&			end!@#&!@#&			for x = 1, right do!@#&				table.insert(layer.Pixels, {})!@#&				for y = 1, self.Height do!@#&					layer:MakePixel(#layer.Pixels, y)!@#&				end!@#&			end!@#&!@#&			for y = 1, top do!@#&				for x = 1, self.Width do!@#&					table.insert(layer.Pixels[x], 1, {})!@#&					layer:MakePixel(x, 1)!@#&				end!@#&			end!@#&!@#&			for y = 1, bottom do!@#&				for x = 1, self.Width do!@#&					table.insert(layer.Pixels[x], {})!@#&					layer:MakePixel(x, #layer.Pixels[x])!@#&				end!@#&			end!@#&!@#&			if top < 0 then!@#&				for y = 1, -top do!@#&					for x = 1, self.Width do!@#&						table.remove(layer.Pixels[x], 1)!@#&					end!@#&				end!@#&			end!@#&!@#&			if bottom < 0 then!@#&				for y = 1, -bottom do!@#&					for x = 1, self.Width do!@#&						table.remove(layer.Pixels[x], #layer.Pixels[x])!@#&					end!@#&				end!@#&			end!@#&		end!@#&	end,!@#&!@#&	MakeLayer = function(self, name, backgroundColour, index, pixels)!@#&		backgroundColour = backgroundColour or colours.white!@#&		name = name or \"Layer\"!@#&		local layer = Layer:Initialise(name, backgroundColour, self, index, pixels)!@#&		table.insert(self.Layers, layer)!@#&		Current.Layer = layer!@#&		ModuleNamed('Layers'):Update()!@#&		return layer!@#&	end,!@#&!@#&	New = function(self, name, path, width, height, format, backgroundColour, layers)!@#&		local new = self:Initialise(name, path, width, height, format, backgroundColour, layers)!@#&		table.insert(Lists.Artboards, new)!@#&		Current.Artboard = new!@#&		--new:Save()!@#&		return new!@#&	end,!@#&!@#&	Save = function(self, path)!@#&		Current.Artboard = self!@#&		path = path or self.Path!@#&		local _open = io.open!@#&		if OneOS then!@#&			_open = OneOS.IO.open!@#&		end!@#&        local file = _open(path, \"w\", true)!@#&		if self.Format == '.skch' then!@#&			file:write(textutils.serialize(SaveSKCH()))!@#&		else!@#&			local lines = {}!@#&			if self.Format == '.nfp' then!@#&				lines = SaveNFP()!@#&			elseif self.Format == '.nft' then!@#&				lines = SaveNFT()!@#&			end!@#&!@#&			for i, line in ipairs(lines) do!@#&                file:write(line..\"\\n\")!@#&			end!@#&		end!@#&		file:close()!@#&		Current.Modified = false!@#&	end,!@#&!@#&	Click = function(self, side, x, y, drag)!@#&		if Current.Tool and Current.Layer and Current.Layer.Visible then!@#&			Current.Tool:Use(x, y, side, drag)!@#&			Current.Modified = true!@#&			return true!@#&		end!@#&	end!@#&}!@#&!@#&Toolbar = {!@#&	X = 0,!@#&	Y = 0,!@#&	Width = 0,!@#&	ExpandedWidth = 14,!@#&	ClosedWidth = 2,!@#&	Height = 0,!@#&	Expanded = true,!@#&	ToolbarItems = {},!@#&!@#&	AbsolutePosition = function(self)!@#&		return {X = self.X, Y = self.Y}!@#&	end,!@#&!@#&	Draw = function(self)!@#&		self:CalculateToolbarItemPositions()!@#&		--Drawing.DrawArea(self.X - 1, self.Y, 1, self.Height, \"|\", UIColours.ToolbarText, UIColours.Background)!@#&!@#&		!@#&!@#&		--if not Current.Window then!@#&			Drawing.DrawBlankArea(self.X, self.Y, self.Width, self.Height, UIColours.Toolbar)!@#&		--else!@#&		--	Drawing.DrawArea(self.X, self.Y, self.Width, self.Height, '|', colours.lightGrey, UIColours.Toolbar)!@#&		--end!@#&		for i, toolbarItem in ipairs(self.ToolbarItems) do!@#&			toolbarItem:Draw()!@#&		end!@#&	end,!@#&!@#&	Initialise = function(self, side, expanded)!@#&		local new = {}    -- the new instance!@#&		setmetatable( new, {__index = self} )!@#&		new.Expanded = expanded!@#&!@#&		if expanded then!@#&			new.Width = new.ExpandedWidth!@#&		else!@#&			new.Width = new.ClosedWidth!@#&		end!@#&!@#&		if side == 'right' then!@#&			new.X = Drawing.Screen.Width - new.Width + 1!@#&		end!@#&!@#&		if side == 'right' or side == 'left' then!@#&			new.Height = Drawing.Screen.Width!@#&		end!@#&!@#&		new.Y = 1!@#&!@#&		return new!@#&	end,!@#&!@#&	AddToolbarItem = function(self, item)!@#&		table.insert(self.ToolbarItems, item)!@#&		self:CalculateToolbarItemPositions()!@#&	end,!@#&!@#&	CalculateToolbarItemPositions = function(self)!@#&		local currY = 1!@#&		for i, toolbarItem in ipairs(self.ToolbarItems) do!@#&			toolbarItem.Y = currY!@#&			currY = currY + toolbarItem.Height!@#&		end!@#&	end,!@#&!@#&	Update = function(self)!@#&		for i, toolbarItem in ipairs(self.ToolbarItems) do!@#&			if toolbarItem.Module.Update then!@#&				toolbarItem.Module:Update(toolbarItem)!@#&			end!@#&		end!@#&	end,!@#&!@#&	New = function(self, side, expanded)!@#&		local new = self:Initialise(side, expanded)!@#&!@#&		--new:AddToolbarItem(ToolbarItem:Initialise(\"Colours\", nil, true, new))!@#&		--new:AddToolbarItem(ToolbarItem:Initialise(\"IDK\", true, new))!@#&!@#&		table.insert(Lists.Interface.Toolbars, new)!@#&		return new!@#&	end,!@#&!@#&	Click = function(self, side, x, y)!@#&		return false!@#&	end!@#&}!@#&!@#&ToolbarItem = {!@#&	X = 0,!@#&	Y = 0,!@#&	Width = 0,!@#&	Height = 0,!@#&	ExpandedHeight = 5,!@#&	Expanded = true,!@#&	Toolbar = nil,!@#&	Title = \"\",!@#&	MenuIcon = \"=\",!@#&	ExpandedIcon = \"+\",!@#&	ContractIcon = \"-\",!@#&	ContentView = nil,!@#&	Module = nil,!@#&	MenuItems = nil,!@#&!@#&	Draw = function(self)!@#&		Drawing.DrawBlankArea(self.X, self.Y, self.Width, 1, UIColours.ToolbarItemTitle)!@#&		Drawing.DrawCharacters(self.X + 1, self.Y, self.Title, UIColours.ToolbarText, UIColours.ToolbarItemTitle)!@#&!@#&		Drawing.DrawCharacters(self.X + self.Width - 1, self.Y, self.MenuIcon, UIColours.ToolbarText, UIColours.ToolbarItemTitle)!@#&!@#&		local expandContractIcon = self.ContractIcon!@#&		if not self.Expanded then!@#&			expandContractIcon = self.ExpandedIcon!@#&		end!@#&!@#&		if self.Expanded and self.ContentView then!@#&			self.ContentView:Draw()!@#&		end!@#&!@#&		Drawing.DrawCharacters(self.X + self.Width - 2, self.Y, expandContractIcon, UIColours.ToolbarText, UIColours.ToolbarItemTitle)!@#&	end,!@#&!@#&	Initialise = function(self, module, height, expanded, toolbar, menuItems)!@#&		local new = {}    -- the new instance!@#&		setmetatable( new, {__index = self} )!@#&		new.Expanded = expanded!@#&		new.Title = module.Title!@#&		new.Width = toolbar.Width!@#&		new.Height = height or 5!@#&		new.Module = module!@#&		new.MenuItems = menuItems or {}!@#&		table.insert(new.MenuItems,!@#&			{!@#&				Title = 'Shrink',!@#&				Click = function()!@#&					new:ToggleExpanded()!@#&				end!@#&			})!@#&		new.ExpandedHeight = height or 5!@#&		new.Y = 1!@#&		new.X = toolbar.X!@#&		new.ContentView = ContentView:Initialise(1, 2, new.Width, new.Height - 1, nil, new)!@#&		new.Toolbar = toolbar!@#&!@#&		return new!@#&	end,!@#&!@#&	ToggleExpanded = function(self)!@#&		self.Expanded = not self.Expanded!@#&		if self.Expanded then!@#&			self.Height = self.ExpandedHeight!@#&		else!@#&			self.Height = 1!@#&		end!@#&	end,!@#&!@#&	Click = function(self, side, x, y)!@#&		local pos = GetAbsolutePosition(self)!@#&		if x == self.Width and y == 1 then!@#&			local expandContract = \"Shrink\"!@#&!@#&			if not self.Expanded then!@#&				expandContract = \"Expand\"!@#&			end!@#&			self.MenuItems[#self.MenuItems].Title = expandContract!@#&			Menu:New(pos.X + x, pos.Y + y, self.MenuItems, self)!@#&			return true!@#&		elseif x == self.Width - 1 and y == 1 then!@#&			self:ToggleExpanded()!@#&			return true!@#&		elseif y ~= 1 then!@#&			return self.ContentView:Click(side,  x - self.ContentView.X + 1,  y - self.ContentView.Y + 1)!@#&		end!@#&!@#&		return false!@#&	end!@#&}!@#&!@#&ContentView = {!@#&	X = 1,!@#&	Y = 1,!@#&	Width = 0,!@#&	Height = 0,!@#&	Parent = nil,!@#&	Views = {},!@#&!@#&	AbsolutePosition = function(self)!@#&		return self.Parent:AbsolutePosition()!@#&	end,!@#&!@#&	Draw = function(self)!@#&		for i, view in ipairs(self.Views) do!@#&			view:Draw()!@#&		end!@#&	end,!@#&!@#&	Initialise = function(self, x, y, width, height, views, parent)!@#&		local new = {}    -- the new instance!@#&		setmetatable( new, {__index = self} )!@#&		new.Width = width!@#&		new.Height = height!@#&		new.Y = y!@#&		new.X = x!@#&		new.Views = views or {}!@#&		new.Parent = parent!@#&		return new!@#&	end,!@#&!@#&	Click = function(self, side, x, y)!@#&		for k, view in pairs(self.Views) do!@#&			if DoClick(view, side, x, y) then!@#&				return true!@#&			end!@#&		end!@#&	end!@#&}!@#&!@#&Button = {!@#&	X = 1,!@#&	Y = 1,!@#&	Width = 0,!@#&	Height = 0,!@#&	BackgroundColour = colours.lightGrey,!@#&	TextColour = colours.white,!@#&	ActiveBackgroundColour = colours.lightGrey,!@#&	Text = \"\",!@#&	Parent = nil,!@#&	_Click = nil,!@#&	Toggle = nil,!@#&!@#&	AbsolutePosition = function(self)!@#&		return self.Parent:AbsolutePosition()!@#&	end,!@#&!@#&	Draw = function(self)!@#&		local bg = self.BackgroundColour!@#&		local tc = self.TextColour!@#&		if type(bg) == 'function' then!@#&			bg = bg()!@#&		end!@#&!@#&		if self.Toggle then!@#&			tc = UIColours.MenuBarActive!@#&			bg = self.ActiveBackgroundColour!@#&		end!@#&!@#&		local pos = GetAbsolutePosition(self)!@#&		Drawing.DrawBlankArea(pos.X, pos.Y, self.Width, self.Height, bg)!@#&		Drawing.DrawCharactersCenter(pos.X, pos.Y, self.Width, self.Height, self.Text, tc, bg)!@#&	end,!@#&!@#&	Initialise = function(self, x, y, width, height, backgroundColour, parent, click, text, textColour, toggle, activeBackgroundColour)!@#&		local new = {}    -- the new instance!@#&		setmetatable( new, {__index = self} )!@#&		height = height or 1!@#&		new.Width = width or #text + 2!@#&		new.Height = height!@#&		new.Y = y!@#&		new.X = x!@#&		new.Text = text or \"\"!@#&		new.BackgroundColour = backgroundColour or colours.lightGrey!@#&		new.TextColour = textColour or colours.white!@#&		new.ActiveBackgroundColour = activeBackgroundColour or colours.lightGrey!@#&		new.Parent = parent!@#&		new._Click = click!@#&		new.Toggle = toggle!@#&		return new!@#&	end,!@#&!@#&	Click = function(self, side, x, y)!@#&		if self._Click then!@#&			if self:_Click(side, x, y, not self.Toggle) ~= false and self.Toggle ~= nil then!@#&				self.Toggle = not self.Toggle!@#&				Draw()!@#&			end!@#&			return true!@#&		else!@#&			return false!@#&		end!@#&	end!@#&}!@#&!@#&TextBox = {!@#&	X = 1,!@#&	Y = 1,!@#&	Width = 0,!@#&	Height = 0,!@#&	BackgroundColour = colours.lightGrey,!@#&	TextColour = colours.black,!@#&	Parent = nil,!@#&	TextInput = nil,!@#&!@#&	AbsolutePosition = function(self)!@#&		return self.Parent:AbsolutePosition()!@#&	end,!@#&!@#&	Draw = function(self)		!@#&		local pos = GetAbsolutePosition(self)!@#&		Drawing.DrawBlankArea(pos.X, pos.Y, self.Width, self.Height, self.BackgroundColour)!@#&		local text = self.TextInput.Value!@#&		if #text > (self.Width - 2) then!@#&			text = text:sub(#text-(self.Width - 3))!@#&			if Current.Input == self.TextInput then!@#&				Current.CursorPos = {pos.X + 1 + self.Width-2, pos.Y}!@#&			end!@#&		else!@#&			if Current.Input == self.TextInput then!@#&				Current.CursorPos = {pos.X + 1 + self.TextInput.CursorPos, pos.Y}!@#&			end!@#&		end!@#&		Drawing.DrawCharacters(pos.X + 1, pos.Y, text, self.TextColour, self.BackgroundColour)!@#&!@#&		term.setCursorBlink(true)!@#&		!@#&		Current.CursorColour = self.TextColour!@#&	end,!@#&!@#&	Initialise = function(self, x, y, width, height, parent, text, backgroundColour, textColour, done, numerical)!@#&		local new = {}    -- the new instance!@#&		setmetatable( new, {__index = self} )!@#&		height = height or 1!@#&		new.Width = width or #text + 2!@#&		new.Height = height!@#&		new.Y = y!@#&		new.X = x!@#&		new.TextInput = TextInput:Initialise(text or '', function(key)!@#&			if done then!@#&				done(key)!@#&			end!@#&			Draw()!@#&		end, numerical)!@#&		new.BackgroundColour = backgroundColour or colours.lightGrey!@#&		new.TextColour = textColour or colours.black!@#&		new.Parent = parent!@#&		return new!@#&	end,!@#&!@#&	Click = function(self, side, x, y)!@#&		Current.Input = self.TextInput!@#&		self:Draw()!@#&	end!@#&}!@#&!@#&TextInput = {!@#&	Value = \"\",!@#&	Change = nil,!@#&	CursorPos = nil,!@#&	Numerical = false,!@#&!@#&	Initialise = function(self, value, change, numerical)!@#&		local new = {}    -- the new instance!@#&		setmetatable( new, {__index = self} )!@#&		new.Value = value!@#&		new.Change = change!@#&		new.CursorPos = #value!@#&		new.Numerical = numerical!@#&		return new!@#&	end,!@#&!@#&	Char = function(self, char)!@#&		if self.Numerical then!@#&			char = tostring(tonumber(char))!@#&		end!@#&		if char == 'nil' then!@#&			return!@#&		end!@#&		self.Value = string.sub(self.Value, 1, self.CursorPos ) .. char .. string.sub( self.Value, self.CursorPos + 1 )!@#&		!@#&		self.CursorPos = self.CursorPos + 1!@#&		self.Change(key)!@#&	end,!@#&!@#&	Key = function(self, key)!@#&		if key == keys.enter then!@#&			self.Change(key)		!@#&		elseif key == keys.left then!@#&			-- Left!@#&			if self.CursorPos > 0 then!@#&				self.CursorPos = self.CursorPos - 1!@#&				self.Change(key)!@#&			end!@#&			!@#&		elseif key == keys.right then!@#&			-- Right				!@#&			if self.CursorPos < string.len(self.Value) then!@#&				self.CursorPos = self.CursorPos + 1!@#&				self.Change(key)!@#&			end!@#&		!@#&		elseif key == keys.backspace then!@#&			-- Backspace!@#&			if self.CursorPos > 0 then!@#&				self.Value = string.sub( self.Value, 1, self.CursorPos - 1 ) .. string.sub( self.Value, self.CursorPos + 1 )!@#&				self.CursorPos = self.CursorPos - 1!@#&			end!@#&			self.Change(key)!@#&		elseif key == keys.home then!@#&			-- Home!@#&			self.CursorPos = 0!@#&			self.Change(key)!@#&		elseif key == keys.delete then!@#&			if self.CursorPos < string.len(self.Value) then!@#&				self.Value = string.sub( self.Value, 1, self.CursorPos ) .. string.sub( self.Value, self.CursorPos + 2 )				!@#&				self.Change(key)!@#&			end!@#&		elseif key == keys[\"end\"] then!@#&			-- End!@#&			self.CursorPos = string.len(self.Value)!@#&			self.Change(key)!@#&		end!@#&	end!@#&}!@#&!@#&LayerItem = {!@#&	X = 1,!@#&	Y = 1,!@#&	Parent = nil,!@#&	Layer = nil,!@#&!@#&	Draw = function(self)!@#&		self.Y = self.Layer.Index!@#&!@#&		local pos = GetAbsolutePosition(self)!@#&!@#&		local tc = colours.lightGrey!@#&!@#&		if Current.Layer == self.Layer then!@#&			tc = colours.white!@#&		end!@#&!@#&		Drawing.DrawBlankArea(pos.X, pos.Y, self.Width, self.Height, UIColours.Toolbar)!@#&		!@#&		Drawing.DrawCharacters(pos.X + 3, pos.Y, self.Layer.Name, tc, UIColours.Toolbar)!@#&!@#&		if self.Layer.Visible then!@#&			Drawing.DrawCharacters(pos.X + 1, pos.Y, \"@\", tc, UIColours.Toolbar)!@#&		else!@#&			Drawing.DrawCharacters(pos.X + 1, pos.Y, \"X\", tc, UIColours.Toolbar)!@#&		end!@#&!@#&	end,!@#&!@#&	Initialise = function(self, layer, parent)!@#&		local new = {}    -- the new instance!@#&		setmetatable( new, {__index = self} )!@#&		new.Width = parent.Width!@#&		new.Height = 1!@#&		new.Y = 1!@#&		new.X = 1!@#&		new.Layer = layer!@#&		new.Parent = parent!@#&		return new!@#&	end,!@#&!@#&	Click = function(self, side, x, y)!@#&		if x == 2 then!@#&			self.Layer.Visible = not self.Layer.Visible!@#&		else!@#&			Current.Layer = self.Layer!@#&		end!@#&		return true!@#&	end!@#&}!@#&!@#&Menu = {!@#&	X = 0,!@#&	Y = 0,!@#&	Width = 0,!@#&	Height = 0,!@#&	Owner = nil,!@#&	Items = {},!@#&	RemoveTop = false,!@#&!@#&	Draw = function(self)!@#&		Drawing.DrawBlankArea(self.X + 1, self.Y + 1, self.Width, self.Height, UIColours.Shadow)!@#&		if not self.RemoveTop then!@#&			Drawing.DrawBlankArea(self.X, self.Y, self.Width, self.Height, UIColours.MenuBackground)!@#&			for i, item in ipairs(self.Items) do!@#&				if item.Separator then!@#&					Drawing.DrawArea(self.X, self.Y + i, self.Width, 1, '-', colours.grey, UIColours.MenuBackground)!@#&				else!@#&					local textColour = UIColours.MenuText!@#&					if (item.Enabled and type(item.Enabled) == 'function' and item.Enabled() == false) or item.Enabled == false then!@#&						textColour = UIColours.MenuDisabledText!@#&					end!@#&					Drawing.DrawCharacters(self.X + 1, self.Y + i, item.Title, textColour, UIColours.MenuBackground)!@#&				end!@#&			end!@#&		else!@#&			Drawing.DrawBlankArea(self.X, self.Y, self.Width, self.Height, UIColours.MenuBackground)!@#&			for i, item in ipairs(self.Items) do!@#&				if item.Separator then!@#&					Drawing.DrawArea(self.X, self.Y + i - 1, self.Width, 1, '-', colours.grey, UIColours.MenuBackground)!@#&				else!@#&					local textColour = UIColours.MenuText!@#&					if (item.Enabled and type(item.Enabled) == 'function' and item.Enabled() == false) or item.Enabled == false then!@#&						textColour = UIColours.MenuDisabledText!@#&					end!@#&					Drawing.DrawCharacters(self.X + 1, self.Y + i - 1, item.Title, textColour, UIColours.MenuBackground)!@#&!@#&					Drawing.DrawCharacters(self.X - 1 + self.Width-#item.KeyName, self.Y + i - 1, item.KeyName, textColour, UIColours.MenuBackground)!@#&				end!@#&			end!@#&		end!@#&	end,!@#&!@#&	NameForKey = function(self, key)!@#&		if key == keys.leftCtrl then!@#&			return '^'!@#&		elseif key == keys.tab then!@#&			return 'Tab'!@#&		elseif key == keys.delete then!@#&			return 'Delete'!@#&		elseif key == keys.n then!@#&			return 'N'!@#&		elseif key == keys.s then!@#&			return 'S'!@#&		elseif key == keys.o then!@#&			return 'O'!@#&		elseif key == keys.z then!@#&			return 'Z'!@#&		elseif key == keys.y then!@#&			return 'Y'!@#&		elseif key == keys.c then!@#&			return 'C'!@#&		elseif key == keys.x then!@#&			return 'X'!@#&		elseif key == keys.v then!@#&			return 'V'!@#&		elseif key == keys.r then!@#&			return 'R'!@#&		elseif key == keys.l then!@#&			return 'L'!@#&		elseif key == keys.t then!@#&			return 'T'!@#&		elseif key == keys.h then!@#&			return 'H'!@#&		elseif key == keys.e then!@#&			return 'E'!@#&		elseif key == keys.p then!@#&			return 'P'!@#&		elseif key == keys.f then!@#&			return 'F'!@#&		elseif key == keys.m then!@#&			return 'M'!@#&		else!@#&			return '?'		!@#&		end!@#&	end,!@#&!@#&	Initialise = function(self, x, y, items, owner, removeTop)!@#&		local new = {}    -- the new instance!@#&		setmetatable( new, {__index = self} )!@#&		if not owner then!@#&			return!@#&		end!@#&!@#&		local keyNames = {}!@#&!@#&		for i, v in ipairs(items) do!@#&			items[i].KeyName = ''!@#&			if v.Keys then!@#&				for _i, key in ipairs(v.Keys) do!@#&					items[i].KeyName = items[i].KeyName .. self:NameForKey(key)!@#&				end!@#&			end!@#&			if items[i].KeyName ~= '' then!@#&				table.insert(keyNames, items[i].KeyName)!@#&			end!@#&		end!@#&		local keysLength = LongestString(keyNames)!@#&		if keysLength > 0 then!@#&			keysLength = keysLength + 2!@#&		end!@#&!@#&		new.Width = LongestString(items, 'Title') + 2 + keysLength!@#&		if new.Width < 10 then!@#&			new.Width = 10!@#&		end!@#&		new.Height = #items + 2!@#&		new.RemoveTop = removeTop or false!@#&		if removeTop then!@#&			new.Height = new.Height - 1!@#&		end!@#&		!@#&		if y < 1 then!@#&			y = 1!@#&		end!@#&		if x < 1 then!@#&			x = 1!@#&		end!@#&!@#&		if y + new.Height > Drawing.Screen.Height + 1 then!@#&			y = Drawing.Screen.Height - new.Height!@#&		end!@#&		if x + new.Width > Drawing.Screen.Width + 1 then!@#&			x = Drawing.Screen.Width - new.Width!@#&		end!@#&!@#&!@#&		new.Y = y!@#&		new.X = x!@#&		new.Items = items!@#&		new.Owner = owner!@#&		return new!@#&	end,!@#&!@#&	New = function(self, x, y, items, owner, removeTop)!@#&		if Current.Menu and Current.Menu.Owner == owner then!@#&			Current.Menu = nil!@#&			return!@#&		end!@#&!@#&		local new = self:Initialise(x, y, items, owner, removeTop)!@#&		Current.Menu = new!@#&		return new!@#&	end,!@#&!@#&	Click = function(self, side, x, y)!@#&		local i = y-1!@#&		if self.RemoveTop then!@#&			i = y!@#&		end!@#&		if i >= 1 and y < self.Height then!@#&			if not ((self.Items[i].Enabled and type(self.Items[i].Enabled) == 'function' and self.Items[i].Enabled() == false) or self.Items[i].Enabled == false) and self.Items[i].Click then!@#&				self.Items[i]:Click()!@#&				if Current.Menu.Owner and Current.Menu.Owner.Toggle then!@#&					Current.Menu.Owner.Toggle = false!@#&				end!@#&				Current.Menu = nil!@#&				self = nil!@#&			end!@#&			return true!@#&		end!@#&	end!@#&}!@#&!@#&MenuBar = {!@#&	X = 1,!@#&	Y = 1,!@#&	Width = Drawing.Screen.Width,!@#&	Height = 1,!@#&	MenuBarItems = {},!@#&!@#&	AbsolutePosition = function(self)!@#&		return {X = self.X, Y = self.Y}!@#&	end,!@#&!@#&	Draw = function(self)!@#&		--Drawing.DrawArea(self.X - 1, self.Y, 1, self.Height, \"|\", UIColours.ToolbarText, UIColours.Background)!@#&!@#&		Drawing.DrawBlankArea(self.X, self.Y, self.Width, self.Height, UIColours.Toolbar)!@#&		for i, button in ipairs(self.MenuBarItems) do!@#&			button:Draw()!@#&		end!@#&	end,!@#&!@#&	Initialise = function(self, items)!@#&		local new = {}    -- the new instance!@#&		setmetatable( new, {__index = self} )!@#&		new.X = 1!@#&		new.Y = 1!@#&		new.MenuBarItems = items!@#&		return new!@#&	end,!@#&!@#&	AddToolbarItem = function(self, item)!@#&		table.insert(self.ToolbarItems, item)!@#&		self:CalculateToolbarItemPositions()!@#&	end,!@#&!@#&	CalculateToolbarItemPositions = function(self)!@#&		local currY = 1!@#&		for i, toolbarItem in ipairs(self.ToolbarItems) do!@#&			toolbarItem.Y = currY!@#&			currY = currY + toolbarItem.Height!@#&		end!@#&	end,!@#&!@#&	Click = function(self, side, x, y)!@#&		for i, item in ipairs(self.MenuBarItems) do!@#&			if item.X <= x and item.X + item.Width > x then!@#&				if item:Click(item, side, x - item.X + 1, 1) then!@#&					break!@#&				end!@#&			end!@#&		end!@#&		return false!@#&	end!@#&}!@#&!@#&--Modules--!@#&!@#&Modules = {!@#&	{!@#&		Title = \"Colours\",!@#&		ToolbarItem = nil,!@#&		Initialise = function(self)!@#&			self.ToolbarItem = ToolbarItem:Initialise(self, nil, true, Current.Toolbar)!@#&!@#&			local buttons = {}!@#&!@#&			local i = 0!@#&!@#&			local coloursWidth = 8!@#&			local _colours = {!@#&				colours.brown,!@#&				colours.yellow,!@#&				colours.orange,!@#&				colours.red,!@#&				colours.green,!@#&				colours.lime,!@#&				colours.magenta,!@#&				colours.pink,!@#&				colours.purple,!@#&				colours.blue,!@#&				colours.cyan,!@#&				colours.lightBlue,!@#&				colours.lightGrey,!@#&				colours.grey,!@#&				colours.black,!@#&				colours.white!@#&			}!@#&!@#&			for k, colour in pairs(_colours) do!@#&				if type(colour) == 'number' and colour ~= -1 then!@#&					i = i + 1!@#&!@#&					local y = math.floor(i/(coloursWidth/2))!@#&!@#&					local x = (i%(coloursWidth/2))!@#&					if x == 0 then!@#&						x = (coloursWidth/2)!@#&						y = y -1!@#&					end!@#&!@#&					table.insert(buttons,!@#&						{!@#&							X = x*2 - 2 + self.ToolbarItem.Width - coloursWidth,!@#&							Y = y+1,!@#&							Width = 2,!@#&							Height = 1,!@#&							BackgroundColour = colour,!@#&							Click = function(self, side, x, y)!@#&								SetColour(self.BackgroundColour)!@#&							end!@#&						}!@#&					)!@#&				end!@#&			end!@#&!@#&			for i, button in ipairs(buttons) do!@#&				table.insert(self.ToolbarItem.ContentView.Views, !@#&					Button:Initialise(button.X, button.Y, button.Width, button.Height, button.BackgroundColour, self.ToolbarItem.ContentView, button.Click))	!@#&			end!@#&			!@#&			table.insert(self.ToolbarItem.ContentView.Views, !@#&					Button:Initialise(1, 1, 4, 3, function()return Current.Colour end, self.ToolbarItem.ContentView, nil))!@#&		!@#&			Current.Toolbar:AddToolbarItem(self.ToolbarItem)!@#&		end!@#&	},!@#&!@#&	{!@#&		Title = \"Tools\",!@#&		ToolbarItem = nil,!@#&		Update = function(self)!@#&			for i, view in ipairs(self.ToolbarItem.ContentView.Views) do!@#&				if (Current.Tool and Current.Tool.Name == view.Text) then!@#&					view.TextColour = colours.white!@#&				else!@#&					view.TextColour = colours.lightGrey!@#&				end!@#&			end!@#&			self.ToolbarItem.ContentView.Views[1].Text = 'Size: '..Current.ToolSize!@#&		end,!@#&!@#&		Initialise = function(self)!@#&			self.ToolbarItem = ToolbarItem:Initialise(self, #Tools+2, true, Current.Toolbar,!@#&				{{!@#&					Title = \"Change Tool Size\",!@#&					Click = function()!@#&						DisplayToolSizeWindow()!@#&					end,!@#&				}})!@#&!@#&			table.insert(self.ToolbarItem.ContentView.Views, Button:Initialise(1, 1, self.ToolbarItem.Width, 1, UIColours.Toolbar, self.ToolbarItem.ContentView, DisplayToolSizeWindow, 'Size: '..Current.ToolSize))!@#&!@#&			local y = 2!@#&			for i, tool in ipairs(Tools) do!@#&				table.insert(self.ToolbarItem.ContentView.Views, Button:Initialise(1, y, self.ToolbarItem.Width, 1, UIColours.Toolbar, self.ToolbarItem.ContentView, function() SetTool(tool) self:Update(self.ToolbarItem) end, tool.Name))!@#&				y = y + 1!@#&			end!@#&!@#&			self:Update(self.ToolbarItem)!@#&!@#&			Current.Toolbar:AddToolbarItem(self.ToolbarItem)!@#&		end!@#&	},!@#&!@#&	{!@#&		Title = \"Layers\",!@#&		ToolbarItem = nil,!@#&		Update = function(self)!@#&			if Current.Artboard then!@#&				self.ToolbarItem.ContentView.Views = {}!@#&				for i = 1, #Current.Artboard.Layers do!@#&					table.insert(self.ToolbarItem.ContentView.Views, LayerItem:Initialise(Current.Artboard.Layers[#Current.Artboard.Layers-i+1], self.ToolbarItem.ContentView))!@#&				end					!@#&			end!@#&		end,!@#&!@#&		Initialise = function(self)!@#&			self.ToolbarItem = ToolbarItem:Initialise(self, nil, true, Current.Toolbar,!@#&				{{!@#&					Title = \"New Layer\",!@#&					Click = function()!@#&						MakeNewLayer()!@#&					end,!@#&					Enabled = function()!@#&						return CheckOpenArtboard()!@#&					end!@#&				},!@#&				{!@#&					Title = 'Delete Layer',!@#&					Click = function()!@#&						DeleteLayer()!@#&					end,!@#&					Enabled = function()!@#&						return CheckSelectedLayer()!@#&					end!@#&				},!@#&				{!@#&					Title = 'Rename Layer...',!@#&					Click = function()!@#&						RenameLayer()!@#&					end,!@#&					Enabled = function()!@#&						return CheckSelectedLayer()!@#&					end!@#&				}})!@#&			!@#&			self:Update()!@#&!@#&			Current.Toolbar:AddToolbarItem(self.ToolbarItem)!@#&		end!@#&	}!@#&!@#&}!@#&!@#&function ModuleNamed(name)!@#&	for i, v in ipairs(Modules) do!@#&		if v.Title == name then!@#&			return v!@#&		end!@#&	end!@#&end!@#&!@#&--Tools--!@#&!@#&function ToolAffectedPixels(x, y)!@#&	if not CheckSelectedLayer() then!@#&		return {}!@#&	end!@#&	if Current.ToolSize == 1 then!@#&		if Current.Layer.Pixels[x] and Current.Layer.Pixels[x][y] then!@#&			return {{Current.Layer.Pixels[x][y], x, y}}!@#&		end!@#&	else!@#&		local pixels = {}!@#&		local cornerX = x - math.ceil(Current.ToolSize/2)!@#&		local cornerY = y - math.ceil(Current.ToolSize/2)!@#&		for _x = 1, Current.ToolSize do!@#&			for _y = 1, Current.ToolSize do!@#&				if Current.Layer.Pixels[cornerX + _x] and Current.Layer.Pixels[cornerX + _x][cornerY + _y] then!@#&					table.insert(pixels, {Current.Layer.Pixels[cornerX + _x][cornerY + _y], cornerX + _x, cornerY + _y})!@#&				end!@#&			end!@#&		end!@#&		return pixels!@#&	end!@#&end!@#&local moveStartPoint = {}!@#&Tools = {!@#&	{!@#&		Name = \"Hand\",!@#&		Use = function(self, x, y, side, drag)!@#&			Current.Input = nil!@#&			if drag and Current.HandDragStart and Current.HandDragStart[1] and Current.HandDragStart[2] then!@#&				local deltaX = x - Current.HandDragStart[1]!@#&				local deltaY = y - Current.HandDragStart[2]!@#&				Current.Artboard.X = Current.Artboard.X + deltaX!@#&				Current.Artboard.Y = Current.Artboard.Y + deltaY!@#&			else!@#&				Current.HandDragStart = {x, y}!@#&			end!@#&			sleep(0)!@#&		end,!@#&		Select = function(self)!@#&			return true!@#&		end!@#&	},!@#&!@#&	{!@#&		Name = \"Pencil\",!@#&		Use = function(self, _x, _y, side, artboard)!@#&			Current.Input = nil!@#&			for i, pixel in ipairs(ToolAffectedPixels(_x, _y)) do!@#&				if side == 1 then!@#&					pixel[1].BackgroundColour = Current.Colour!@#&				elseif side == 2 then!@#&					pixel[1].TextColour = Current.Colour!@#&				end!@#&				pixel[1]:Draw(pixel[2], pixel[3])!@#&			end!@#&		end,!@#&		Select = function(self)!@#&			return true!@#&		end!@#&	},!@#&!@#&	{!@#&		Name = \"Eraser\",!@#&		Use = function(self, x, y, side)!@#&			Current.Input = nil!@#&			Current.Layer:SetPixel(x, y, nil, Current.Layer.BackgroundColour, nil)!@#&			for i, pixel in ipairs(ToolAffectedPixels(x, y)) do!@#&				Current.Layer:SetPixel(pixel[2], pixel[3], nil, Current.Layer.BackgroundColour, nil)!@#&			end!@#&		end,!@#&		Select = function(self)!@#&			return true!@#&		end!@#&	},!@#&!@#&	{!@#&		Name = \"Fill Bucket\",!@#&		Use = function(self, x, y, side)!@#&			local replaceColour = Current.Layer.Pixels[x][y].BackgroundColour!@#&			if side == 2 then!@#&				replaceColour = Current.Layer.Pixels[x][y].TextColour!@#&			end!@#&!@#&			local nodes = {{X = x, Y = y}}!@#&!@#&			while #nodes > 0 do!@#&				local node = nodes[1]!@#&				if Current.Layer.Pixels[node.X] and Current.Layer.Pixels[node.X][node.Y] then!@#&					local replacing = Current.Layer.Pixels[node.X][node.Y].BackgroundColour!@#&					if side == 2 then!@#&						replacing = Current.Layer.Pixels[node.X][node.Y].TextColour!@#&					end!@#&					if replacing == replaceColour and replacing ~= Current.Colour then!@#&						if side == 1 then!@#&							Current.Layer.Pixels[node.X][node.Y].BackgroundColour = Current.Colour!@#&						elseif side == 2 then!@#&							Current.Layer.Pixels[node.X][node.Y].TextColour = Current.Colour!@#&						end!@#&						table.insert(nodes, {X = node.X, Y = node.Y + 1})!@#&						table.insert(nodes, {X = node.X + 1, Y = node.Y})!@#&						if x > 1 then!@#&							table.insert(nodes, {X = node.X - 1, Y = node.Y})!@#&						end!@#&						if y > 1 then!@#&							table.insert(nodes, {X = node.X, Y = node.Y - 1})!@#&						end!@#&					end!@#&				end!@#&				table.remove(nodes, 1)!@#&			end!@#&			Draw()!@#&		end,!@#&		Select = function(self)!@#&			return true!@#&		end!@#&	},!@#&!@#&	{!@#&		Name = \"Select\",!@#&		Use = function(self, x, y, side, drag)!@#&			Current.Input = nil!@#&			if not drag then!@#&				Current.Selection[1] = vector.new(x, y, 0)!@#&				Current.Selection[2] = nil!@#&			else!@#&				Current.Selection[2] = vector.new(x, y, 0)!@#&			end!@#&		end,!@#&		Select = function(self)!@#&			return true!@#&		end!@#&	},!@#&!@#&	{!@#&		Name = \"Move\",!@#&		Use = function(self, x, y, side, drag)!@#&			Current.Input = nil!@#&!@#&			if Current.Selection and Current.Selection[1] and Current.Selection[2] ~= nil then!@#&				if drag and moveStartPoint then!@#&					local pixels = Current.Layer:PixelsInSelection(true)!@#&					local size = Current.Selection[1] - Current.Selection[2]!@#&					Current.Selection[1] = vector.new(x-moveStartPoint[1], y-moveStartPoint[2], 0)!@#&					Current.Selection[2] = vector.new(x-moveStartPoint[1]-size.x, y-moveStartPoint[2]-size.y, 0)!@#&					Current.Layer:InsertPixels(pixels)!@#&				else!@#&					moveStartPoint = {x-Current.Selection[1].x, y-Current.Selection[1].y}!@#&				end!@#&			end!@#&		end,!@#&		Select = function(self)!@#&			return true!@#&		end!@#&	},!@#&!@#&	{!@#&		Name = \"Text\",!@#&		Use = function(self, x, y)!@#&			Current.Input = TextInput:Initialise('', function(key)!@#&				if key == keys.delete or key == keys.backspace then!@#&					if #Current.Input.Value == 0 then!@#&						if Current.Layer.Pixels[x] and Current.Layer.Pixels[x][y] then!@#&							Current.Layer.Pixels[x][y]:Set(nil, nil, ' ')!@#&							local newPos = Current.CursorPos[1] - Current.Artboard.X!@#&							if newPos < Current.Artboard.X - 1 then!@#&								newPos = Current.Artboard.X - 1!@#&							end!@#&							Current.Tool:Use(newPos, Current.CursorPos[2] - Current.Artboard.Y + 1)!@#&							Draw()!@#&						end!@#&						return!@#&					else!@#&						if Current.Layer.Pixels[x+#Current.Input.Value] and Current.Layer.Pixels[x+#Current.Input.Value][y] then!@#&							Current.Layer.Pixels[x+#Current.Input.Value][y]:Set(nil, nil, ' ')!@#&						end!@#&					end!@#&				else!@#&					local i = #Current.Input.Value!@#&					if Current.Layer.Pixels[x+i-1] then!@#&						Current.Layer.Pixels[x+i-1][y]:Set(Current.Colour, nil, Current.Input.Value:sub(i,i))!@#&						Current.Layer.Pixels[x+i-1][y]:Draw(x+i-1, y)!@#&					end!@#&				end!@#&!@#&				local newPos = x+Current.Input.CursorPos!@#&!@#&				if newPos > Current.Artboard.Width then!@#&					Current.Input.CursorPos = Current.Input.CursorPos - 1!@#&				end!@#&!@#&				Current.CursorPos = {x+Current.Input.CursorPos + Current.Artboard.X - 1, y + Current.Artboard.Y - 1}!@#&				Current.CursorColour = Current.Colour!@#&				Draw()!@#&			end)!@#&!@#&			Current.CursorPos = {x + Current.Artboard.X - 1, y + Current.Artboard.Y - 1}!@#&			Current.CursorColour = Current.Colour!@#&		end,!@#&		Select = function(self)!@#&			if Current.Artboard.Format == '.nfp' then!@#&				ButtonDialougeWindow:Initialise('NFP does not support text!', 'The format you are using, NFP, does not support text. Use NFT or SKCH to use text.', 'Ok', nil, function(window)!@#&					window:Close()!@#&				end):Show()!@#&				return false!@#&			else!@#&				return true!@#&			end!@#&		end!@#&	}!@#&}!@#&!@#&!@#&function ToolNamed(name)!@#&	for i, v in ipairs(Tools) do!@#&		if v.Name == name then!@#&			return v!@#&		end!@#&	end!@#&end!@#&!@#&--Windows--!@#&!@#&NewDocumentWindow = {!@#&	X = 1,!@#&	Y = 1,!@#&	Width = 0,!@#&	Height = 0,!@#&	CursorPos = 1,!@#&	Visible = true,!@#&	Return = nil,!@#&	OkButton = nil,!@#&	Format = '.skch',!@#&	ImageBackgroundColour = colours.white,!@#&	NameLabelHighlight = false,!@#&	SizeLabelHighlight = false,!@#&!@#&!@#&	AbsolutePosition = function(self)!@#&		return {X = self.X, Y = self.Y}!@#&	end,!@#&!@#&	Draw = function(self)!@#&		if not self.Visible then!@#&			return!@#&		end!@#&		Drawing.DrawBlankArea(self.X + 1, self.Y+1, self.Width, self.Height, colours.grey)!@#&		Drawing.DrawBlankArea(self.X, self.Y, self.Width, 1, colours.lightGrey)!@#&		Drawing.DrawBlankArea(self.X, self.Y+1, self.Width, self.Height-1, colours.white)!@#&		Drawing.DrawCharactersCenter(self.X, self.Y, self.Width, 1, self.Title, colours.black, colours.lightGrey)!@#&!@#&		local nameLabelColour = colours.black!@#&		if self.NameLabelHighlight then!@#&			nameLabelColour = colours.red!@#&		end!@#&!@#&		Drawing.DrawCharacters(self.X+1, self.Y+2, \"Name\", nameLabelColour, colours.white)!@#&		Drawing.DrawCharacters(self.X+1, self.Y+4, \"Type\", colours.black, colours.white)!@#&!@#&		local sizeLabelColour = colours.black!@#&		if self.SizeLabelHighlight then!@#&			sizeLabelColour = colours.red!@#&		end!@#&		Drawing.DrawCharacters(self.X+1, self.Y+6, \"Size\", sizeLabelColour, colours.white)!@#&		Drawing.DrawCharacters(self.X+11, self.Y+6, \"x\", colours.black, colours.white)!@#&		Drawing.DrawCharacters(self.X+1, self.Y+8, \"Background\", colours.black, colours.white)!@#&!@#&		self.OkButton:Draw()!@#&		self.CancelButton:Draw()!@#&		self.SKCHButton:Draw()!@#&		self.NFTButton:Draw()!@#&		self.NFPButton:Draw()!@#&		self.PathTextBox:Draw()!@#&		self.WidthTextBox:Draw()!@#&		self.HeightTextBox:Draw()!@#&		self.WhiteButton:Draw()!@#&		self.BlackButton:Draw()!@#&		self.TransparentButton:Draw()!@#&	end,	!@#&!@#&	Initialise = function(self, returnFunc)!@#&		local new = {}    -- the new instance!@#&		setmetatable( new, {__index = self} )!@#&		new.Width = 32!@#&		new.Height = 13!@#&		new.Return = returnFunc!@#&		new.X = math.ceil((Drawing.Screen.Width - new.Width) / 2)!@#&		new.Y = math.ceil((Drawing.Screen.Height - new.Height) / 2)!@#&		new.Title = 'New Document'!@#&		new.Visible = true!@#&		new.NameLabelHighlight = false!@#&		new.SizeLabelHighlight = false!@#&		new.Format = '.skch'!@#&		new.OkButton = Button:Initialise(new.Width - 4, new.Height - 1, nil, nil, colours.lightGrey, new, function(self, side, x, y, toggle)!@#&			local path = new.PathTextBox.TextInput.Value!@#&			local ok = true!@#&			new.NameLabelHighlight = false!@#&			new.SizeLabelHighlight = false!@#&			local _fs = fs!@#&			if OneOS then!@#&				_fs = OneOS.FS!@#&			end!@#&			if path:sub(-1) == \"/SpeedOS/Pictures/\" or _fs.isDir(\"/SpeedOS/Pictures/\"..path) or #path == 0 then!@#&				ok = false!@#&				new.NameLabelHighlight = true!@#&			end!@#&!@#&			if #new.WidthTextBox.TextInput.Value == 0 or tonumber(new.WidthTextBox.TextInput.Value) <= 0 then!@#&				ok = false!@#&				new.SizeLabelHighlight = true!@#&			end!@#&!@#&			if #new.HeightTextBox.TextInput.Value == 0 or tonumber(new.HeightTextBox.TextInput.Value) <= 0 then!@#&				ok = false!@#&				new.SizeLabelHighlight = true!@#&			end!@#&!@#&			if ok then!@#&				returnFunc(new, true, path, tonumber(new.WidthTextBox.TextInput.Value), tonumber(new.HeightTextBox.TextInput.Value), new.Format, new.ImageBackgroundColour)!@#&			else!@#&				Draw()!@#&			end!@#&		end, 'Ok', colours.black)!@#&		new.CancelButton = Button:Initialise(new.Width - 13, new.Height - 1, nil, nil, colours.lightGrey, new, function(self, side, x, y, toggle)returnFunc(new, false)end, 'Cancel', colours.black)!@#&!@#&		new.SKCHButton = Button:Initialise(7, 5, nil, nil, colours.lightGrey, new, function(self, side, x, y, toggle)!@#&			new.NFTButton.Toggle = false!@#&			new.NFPButton.Toggle = false!@#&			self.Toggle = false!@#&			new.Format = '.skch'!@#&		end, '.skch', colours.black, true, colours.lightBlue)!@#&		new.NFTButton = Button:Initialise(15, 5, nil, nil, colours.lightGrey, new, function(self, side, x, y, toggle)!@#&			new.SKCHButton.Toggle = false!@#&			new.NFPButton.Toggle = false!@#&			self.Toggle = false!@#&			new.Format = '.nft'!@#&		end, '.nft', colours.black, false, colours.lightBlue)!@#&		new.NFPButton = Button:Initialise(22, 5, nil, nil, colours.lightGrey, new, function(self, side, x, y, toggle)!@#&			new.SKCHButton.Toggle = false!@#&			new.NFTButton.Toggle = false!@#&			self.Toggle = false!@#&			new.Format = '.nfp'!@#&		end, '.nfp', colours.black, false, colours.lightBlue)!@#&!@#&		local path = \"/SpeedOS/Pictures/\"!@#&		if OneOS then!@#&			path = '/Desktop/'!@#&		end!@#&		new.PathTextBox = TextBox:Initialise(7, 3, new.Width - 7, 1, new, path, nil, nil, function(key)!@#&			if key == keys.enter or key == keys.tab then!@#&				Current.Input = new.WidthTextBox.TextInput!@#&			end			!@#&		end)!@#&		new.WidthTextBox = TextBox:Initialise(7, 7, 4, 1, new, tostring(15), nil, nil, function()!@#&			if key == keys.enter or key == keys.tab then!@#&				Current.Input = new.HeightTextBox.TextInput!@#&			end!@#&		end, true)!@#&		new.HeightTextBox = TextBox:Initialise(14, 7, 4, 1, new, tostring(10), nil, nil, function()!@#&			if key == keys.enter or key == keys.tab then!@#&				Current.Input = new.PathTextBox.TextInput!@#&			end!@#&		end, true)!@#&		Current.Input = new.PathTextBox.TextInput!@#&!@#&!@#&		new.WhiteButton = Button:Initialise(2, 10, nil, nil, colours.lightGrey, new, function(self, side, x, y, toggle)!@#&			new.TransparentButton.Toggle = false!@#&			new.BlackButton.Toggle = false!@#&			self.Toggle = false!@#&			new.ImageBackgroundColour = colours.white!@#&		end, 'White', colours.black, true, colours.lightBlue)!@#&		new.BlackButton = Button:Initialise(10, 10, nil, nil, colours.lightGrey, new, function(self, side, x, y, toggle)!@#&			new.TransparentButton.Toggle = false!@#&			new.WhiteButton.Toggle = false!@#&			self.Toggle = false!@#&			new.ImageBackgroundColour = colours.black!@#&		end, 'Black', colours.black, false, colours.lightBlue)!@#&		new.TransparentButton = Button:Initialise(18, 10, nil, nil, colours.lightGrey, new, function(self, side, x, y, toggle)!@#&			new.WhiteButton.Toggle = false!@#&			new.BlackButton.Toggle = false!@#&			self.Toggle = false!@#&			new.ImageBackgroundColour = colours.transparent!@#&		end, 'Transparent', colours.black, false, colours.lightBlue)!@#&!@#&		return new!@#&	end,!@#&!@#&	Show = function(self)!@#&		Current.Window = self!@#&		return self!@#&	end,!@#&!@#&	Close = function(self)!@#&		Current.Input = nil!@#&		Current.Window = nil!@#&		self = nil!@#&	end,!@#&!@#&	Flash = function(self)!@#&		self.Visible = false!@#&		Draw()!@#&		sleep(0.15)!@#&		self.Visible = true!@#&		Draw()!@#&		sleep(0.15)!@#&		self.Visible = false!@#&		Draw()!@#&		sleep(0.15)!@#&		self.Visible = true!@#&		Draw()!@#&	end,!@#&!@#&	ButtonClick = function(self, button, x, y)!@#&		if button.X <= x and button.Y <= y and button.X + button.Width > x and button.Y + button.Height > y then!@#&			button:Click()!@#&		end!@#&	end,!@#&!@#&	Click = function(self, side, x, y)!@#&		local items = {self.OkButton, self.CancelButton, self.SKCHButton, self.NFTButton, self.NFPButton, self.PathTextBox, self.WidthTextBox, self.HeightTextBox, self.WhiteButton, self.BlackButton, self.TransparentButton}!@#&		for i, v in ipairs(items) do!@#&			if CheckClick(v, x, y) then!@#&				v:Click(side, x, y)!@#&			end!@#&		end!@#&		return true!@#&	end!@#&}!@#&!@#&local TidyPath = function(path)!@#&	path = \"/SpeedOS/Pictures/\"..path!@#&	local _fs = fs!@#&	if OneOS then!@#&		_fs = OneOS.FS!@#&	end!@#&	if _fs.isDir(path) then!@#&		path = path .. '/'!@#&	end!@#&!@#&	path, n = path:gsub(\"//\", \"/\")!@#&	while n > 0 do!@#&		path, n = path:gsub(\"//\", \"/\")!@#&	end!@#&	return path!@#&end!@#&!@#&local WrapText = function(text, maxWidth)!@#&	local lines = {''}!@#&    for word, space in text:gmatch('(%S+)(%s*)') do!@#&            local temp = lines[#lines] .. word .. space:gsub('\\n','')!@#&            if #temp > maxWidth then!@#&                    table.insert(lines, '')!@#&            end!@#&            if space:find('\\n') then!@#&                    lines[#lines] = lines[#lines] .. word!@#&                    !@#&                    space = space:gsub('\\n', function()!@#&                            table.insert(lines, '')!@#&                            return ''!@#&                    end)!@#&            else!@#&                    lines[#lines] = lines[#lines] .. word .. space!@#&            end!@#&    end!@#&	return lines!@#&end!@#&!@#&OpenDocumentWindow = {!@#&	X = 1,!@#&	Y = 1,!@#&	Width = 0,!@#&	Height = 0,!@#&	CursorPos = 1,!@#&	Visible = true,!@#&	Return = nil,!@#&	OpenButton = nil,!@#&	PathTextBox = nil,!@#&	CurrentDirectory = '/',!@#&	Scroll = 0,!@#&	MaxScroll = 0,!@#&	GoUpButton = nil,!@#&	SelectedFile = '',!@#&	Files = {},!@#&	Typed = false,!@#&!@#&	AbsolutePosition = function(self)!@#&		return {X = self.X, Y = self.Y}!@#&	end,!@#&!@#&	Draw = function(self)!@#&		if not self.Visible then!@#&			return!@#&		end!@#&		Drawing.DrawBlankArea(self.X + 1, self.Y+1, self.Width, self.Height, colours.grey)!@#&		Drawing.DrawBlankArea(self.X, self.Y, self.Width, 3, colours.lightGrey)!@#&		Drawing.DrawBlankArea(self.X, self.Y+1, self.Width, self.Height-6, colours.white)!@#&		Drawing.DrawCharactersCenter(self.X, self.Y, self.Width, 1, self.Title, colours.black, colours.lightGrey)!@#&		Drawing.DrawBlankArea(self.X, self.Y + self.Height - 5, self.Width, 5, colours.lightGrey)!@#&		self:DrawFiles()!@#&!@#&		local _fs = fs!@#&		if OneOS then!@#&			_fs = OneOS.FS!@#&		end!@#&		if (_fs.exists(self.PathTextBox.TextInput.Value)) or (self.SelectedFile and #self.SelectedFile > 0 and _fs.exists(self.CurrentDirectory .. self.SelectedFile)) then!@#&			self.OpenButton.TextColour = colours.black!@#&		else!@#&			self.OpenButton.TextColour = colours.lightGrey!@#&		end!@#&!@#&		self.PathTextBox:Draw()!@#&		self.OpenButton:Draw()!@#&		self.CancelButton:Draw()!@#&		self.GoUpButton:Draw()!@#&	end,!@#&!@#&	DrawFiles = function(self)!@#&		local _fs = fs!@#&		if OneOS then!@#&			_fs = OneOS.FS!@#&		end!@#&		for i, file in ipairs(self.Files) do!@#&			if i > self.Scroll and i - self.Scroll <= 11 then!@#&				if file == self.SelectedFile then!@#&					Drawing.DrawCharacters(self.X + 1, self.Y + i - self.Scroll, file, colours.white, colours.lightBlue)!@#&				elseif string.find(file, '%.skch') or string.find(file, '%.nft') or string.find(file, '%.nfp') or _fs.isDir(self.CurrentDirectory .. file) then!@#&					Drawing.DrawCharacters(self.X + 1, self.Y + i - self.Scroll, file, colours.black, colours.white)!@#&				else!@#&					Drawing.DrawCharacters(self.X + 1, self.Y + i - self.Scroll, file, colours.grey, colours.white)!@#&				end!@#&			end!@#&		end!@#&		self.MaxScroll = #self.Files - 11!@#&		if self.MaxScroll < 0 then!@#&			self.MaxScroll = 0!@#&		end!@#&	end,!@#&!@#&	Initialise = function(self, returnFunc)!@#&		local new = {}    -- the new instance!@#&		setmetatable( new, {__index = self} )!@#&		new.Width = 32!@#&		new.Height = 17!@#&		new.Return = returnFunc!@#&		new.X = math.ceil((Drawing.Screen.Width - new.Width) / 2)!@#&		new.Y = math.ceil((Drawing.Screen.Height - new.Height) / 2)!@#&		new.Title = 'Open Document'!@#&		new.Visible = true!@#&		new.CurrentDirectory = '/'!@#&		new.SelectedFile = nil!@#&		if OneOS then!@#&			new.CurrentDirectory = '/Desktop/'!@#&		end!@#&		local _fs = fs!@#&		if OneOS then!@#&			_fs = OneOS.FS!@#&		end!@#&		new.OpenButton = Button:Initialise(new.Width - 6, new.Height - 1, nil, nil, colours.white, new, function(self, side, x, y, toggle)!@#&			if _fs.exists(new.PathTextBox.TextInput.Value) and self.TextColour == colours.black and not _fs.isDir(new.PathTextBox.TextInput.Value) then!@#&				returnFunc(new, true, TidyPath(new.PathTextBox.TextInput.Value))!@#&			elseif new.SelectedFile and self.TextColour == colours.black and _fs.isDir(new.CurrentDirectory .. new.SelectedFile) then!@#&				new:GoToDirectory(new.CurrentDirectory .. new.SelectedFile)!@#&			elseif new.SelectedFile and self.TextColour == colours.black then!@#&				returnFunc(new, true, TidyPath(new.CurrentDirectory .. '/' .. new.SelectedFile))!@#&			end!@#&		end, 'Open', colours.black)!@#&		new.CancelButton = Button:Initialise(new.Width - 15, new.Height - 1, nil, nil, colours.white, new, function(self, side, x, y, toggle)!@#&			returnFunc(new, false)!@#&		end, 'Cancel', colours.black)!@#&		new.GoUpButton = Button:Initialise(2, new.Height - 1, nil, nil, colours.white, new, function(self, side, x, y, toggle)!@#&			local folderName = _fs.getName(new.CurrentDirectory)!@#&			local parentDirectory = new.CurrentDirectory:sub(1, #new.CurrentDirectory-#folderName-1)!@#&			new:GoToDirectory(parentDirectory)!@#&		end, 'Go Up', colours.black)!@#&		new.PathTextBox = TextBox:Initialise(2, new.Height - 3, new.Width - 2, 1, new, new.CurrentDirectory, colours.white, colours.black)!@#&		new:GoToDirectory(new.CurrentDirectory)!@#&		return new!@#&	end,!@#&!@#&	Show = function(self)!@#&		Current.Window = self!@#&		return self!@#&	end,!@#&!@#&	Close = function(self)!@#&		Current.Input = nil!@#&		Current.Window = nil!@#&		self = nil!@#&	end,!@#&!@#&	GoToDirectory = function(self, path)!@#&		path = TidyPath(path)!@#&		self.CurrentDirectory = path!@#&		self.Scroll = 0!@#&		self.SelectedFile = nil!@#&		self.Typed = false!@#&		self.PathTextBox.TextInput.Value = path!@#&		local _fs = fs!@#&		if OneOS then!@#&			_fs = OneOS.FS!@#&		end!@#&		self.Files = _fs.list(self.CurrentDirectory)!@#&		Draw()!@#&	end,!@#&!@#&	Flash = function(self)!@#&		self.Visible = false!@#&		Draw()!@#&		sleep(0.15)!@#&		self.Visible = true!@#&		Draw()!@#&		sleep(0.15)!@#&		self.Visible = false!@#&		Draw()!@#&		sleep(0.15)!@#&		self.Visible = true!@#&		Draw()!@#&	end,!@#&!@#&	Click = function(self, side, x, y)!@#&		local items = {self.OpenButton, self.CancelButton, self.PathTextBox, self.GoUpButton}!@#&		local found = false!@#&		for i, v in ipairs(items) do!@#&			if CheckClick(v, x, y) then!@#&				v:Click(side, x, y)!@#&				found = true!@#&			end!@#&		end!@#&!@#&		if not found then!@#&			if y <= 12 then!@#&				local _fs = fs!@#&				if OneOS then!@#&					_fs = OneOS.FS!@#&				end!@#&				self.SelectedFile = _fs.list(self.CurrentDirectory)[y-1]!@#&				self.PathTextBox.TextInput.Value = TidyPath(self.CurrentDirectory .. '/' .. self.SelectedFile)!@#&				Draw()!@#&			end!@#&		end!@#&		return true!@#&	end!@#&}!@#&!@#&ButtonDialougeWindow = {!@#&	X = 1,!@#&	Y = 1,!@#&	Width = 0,!@#&	Height = 0,!@#&	CursorPos = 1,!@#&	Visible = true,!@#&	CancelButton = nil,!@#&	OkButton = nil,!@#&	Lines = {},!@#&!@#&	AbsolutePosition = function(self)!@#&		return {X = self.X, Y = self.Y}!@#&	end,!@#&!@#&	Draw = function(self)!@#&		if not self.Visible then!@#&			return!@#&		end!@#&		Drawing.DrawBlankArea(self.X + 1, self.Y+1, self.Width, self.Height, colours.grey)!@#&		Drawing.DrawBlankArea(self.X, self.Y, self.Width, 1, colours.lightGrey)!@#&		Drawing.DrawBlankArea(self.X, self.Y+1, self.Width, self.Height-1, colours.white)!@#&		Drawing.DrawCharactersCenter(self.X, self.Y, self.Width, 1, self.Title, colours.black, colours.lightGrey)!@#&!@#&		for i, text in ipairs(self.Lines) do!@#&			Drawing.DrawCharacters(self.X + 1, self.Y + 1 + i, text, colours.black, colours.white)!@#&		end!@#&!@#&		self.OkButton:Draw()!@#&		if self.CancelButton then!@#&			self.CancelButton:Draw()!@#&		end!@#&	end,!@#&!@#&	Initialise = function(self, title, message, okText, cancelText, returnFunc)!@#&		local new = {}    -- the new instance!@#&		setmetatable( new, {__index = self} )!@#&		new.Width = 28!@#&		new.Lines = WrapText(message, new.Width - 2)!@#&		new.Height = 5 + #new.Lines!@#&		new.Return = returnFunc!@#&		new.X = math.ceil((Drawing.Screen.Width - new.Width) / 2)!@#&		new.Y = math.ceil((Drawing.Screen.Height - new.Height) / 2)!@#&		new.Title = title!@#&		new.Visible = true!@#&		new.Visible = true!@#&		new.OkButton = Button:Initialise(new.Width - #okText - 2, new.Height - 1, nil, 1, nil, new, function()!@#&			returnFunc(new, true)!@#&		end, okText)!@#&		if cancelText then!@#&			new.CancelButton = Button:Initialise(new.Width - #okText - 2 - 1 - #cancelText - 2, new.Height - 1, nil, 1, nil, new, function()!@#&				returnFunc(new, false)!@#&			end, cancelText)!@#&		end!@#&!@#&		return new!@#&	end,!@#&!@#&	Show = function(self)!@#&		Current.Window = self!@#&		return self!@#&	end,!@#&!@#&	Close = function(self)!@#&		Current.Window = nil!@#&		self = nil!@#&	end,!@#&!@#&	Flash = function(self)!@#&		self.Visible = false!@#&		Draw()!@#&		sleep(0.15)!@#&		self.Visible = true!@#&		Draw()!@#&		sleep(0.15)!@#&		self.Visible = false!@#&		Draw()!@#&		sleep(0.15)!@#&		self.Visible = true!@#&		Draw()!@#&	end,!@#&!@#&	Click = function(self, side, x, y)!@#&		local items = {self.OkButton, self.CancelButton}!@#&		local found = false!@#&		for i, v in ipairs(items) do!@#&			if CheckClick(v, x, y) then!@#&				v:Click(side, x, y)!@#&				found = true!@#&			end!@#&		end!@#&		return true!@#&	end!@#&}!@#&!@#&TextDialougeWindow = {!@#&	X = 1,!@#&	Y = 1,!@#&	Width = 0,!@#&	Height = 0,!@#&	CursorPos = 1,!@#&	Visible = true,!@#&	CancelButton = nil,!@#&	OkButton = nil,!@#&	Lines = {},!@#&	TextInput = nil,!@#&!@#&	AbsolutePosition = function(self)!@#&		return {X = self.X, Y = self.Y}!@#&	end,!@#&!@#&	Draw = function(self)!@#&		if not self.Visible then!@#&			return!@#&		end!@#&		Drawing.DrawBlankArea(self.X + 1, self.Y+1, self.Width, self.Height, colours.grey)!@#&		Drawing.DrawBlankArea(self.X, self.Y, self.Width, 1, colours.lightGrey)!@#&		Drawing.DrawBlankArea(self.X, self.Y+1, self.Width, self.Height-1, colours.white)!@#&		Drawing.DrawCharactersCenter(self.X, self.Y, self.Width, 1, self.Title, colours.black, colours.lightGrey)!@#&!@#&		for i, text in ipairs(self.Lines) do!@#&			Drawing.DrawCharacters(self.X + 1, self.Y + 1 + i, text, colours.black, colours.white)!@#&		end!@#&!@#&!@#&		Drawing.DrawBlankArea(self.X + 1, self.Y + self.Height - 4, self.Width - 2, 1, colours.lightGrey)!@#&		Drawing.DrawCharacters(self.X + 2, self.Y + self.Height - 4, self.TextInput.Value, colours.black, colours.lightGrey)!@#&		Current.CursorPos = {self.X + 2 + self.TextInput.CursorPos, self.Y + self.Height - 4}!@#&		Current.CursorColour = colours.black!@#&!@#&		self.OkButton:Draw()!@#&		if self.CancelButton then!@#&			self.CancelButton:Draw()!@#&		end!@#&	end,!@#&!@#&	Initialise = function(self, title, message, okText, cancelText, returnFunc, numerical)!@#&		local new = {}    -- the new instance!@#&		setmetatable( new, {__index = self} )!@#&		new.Width = 28!@#&		new.Lines = WrapText(message, new.Width - 2)!@#&		new.Height = 7 + #new.Lines!@#&		new.Return = returnFunc!@#&		new.X = math.ceil((Drawing.Screen.Width - new.Width) / 2)!@#&		new.Y = math.ceil((Drawing.Screen.Height - new.Height) / 2)!@#&		new.Title = title!@#&		new.Visible = true!@#&		new.Visible = true!@#&		new.OkButton = Button:Initialise(new.Width - #okText - 2, new.Height - 1, nil, 1, nil, new, function()!@#&			if #new.TextInput.Value > 0 then!@#&				returnFunc(new, true, new.TextInput.Value)!@#&			end!@#&		end, okText)!@#&		if cancelText then!@#&			new.CancelButton = Button:Initialise(new.Width - #okText - 2 - 1 - #cancelText - 2, new.Height - 1, nil, 1, nil, new, function()!@#&				returnFunc(new, false)!@#&			end, cancelText)!@#&		end!@#&		new.TextInput = TextInput:Initialise('', function(enter)!@#&			if enter then!@#&				new.OkButton:Click()!@#&			end!@#&			Draw()!@#&		end, numerical)!@#&!@#&		Current.Input = new.TextInput!@#&!@#&		return new!@#&	end,!@#&!@#&	Show = function(self)!@#&		Current.Window = self!@#&		return self!@#&	end,!@#&!@#&	Close = function(self)!@#&		Current.Window = nil!@#&		Current.Input = nil!@#&		self = nil!@#&	end,!@#&!@#&	Flash = function(self)!@#&		self.Visible = false!@#&		Draw()!@#&		sleep(0.15)!@#&		self.Visible = true!@#&		Draw()!@#&		sleep(0.15)!@#&		self.Visible = false!@#&		Draw()!@#&		sleep(0.15)!@#&		self.Visible = true!@#&		Draw()!@#&	end,!@#&!@#&	Click = function(self, side, x, y)!@#&		local items = {self.OkButton, self.CancelButton}!@#&		local found = false!@#&		for i, v in ipairs(items) do!@#&			if CheckClick(v, x, y) then!@#&				v:Click(side, x, y)!@#&				found = true!@#&			end!@#&		end!@#&		return true!@#&	end!@#&}!@#&!@#&ResizeDocumentWindow = {!@#&	X = 1,!@#&	Y = 1,!@#&	Width = 0,!@#&	Height = 0,!@#&	CursorPos = 1,!@#&	Visible = true,!@#&	Return = nil,!@#&	OkButton = nil,!@#&	AnchorPosition = 5,!@#&	WidthLabelHighlight = false,!@#&	HeightLabelHighlight = false,!@#&!@#&	AbsolutePosition = function(self)!@#&		return {X = self.X, Y = self.Y}!@#&	end,!@#&!@#&	Draw = function(self)!@#&		if not self.Visible then!@#&			return!@#&		end!@#&		Drawing.DrawBlankArea(self.X + 1, self.Y+1, self.Width, self.Height, colours.grey)!@#&		Drawing.DrawBlankArea(self.X, self.Y, self.Width, 1, colours.lightGrey)!@#&		Drawing.DrawBlankArea(self.X, self.Y+1, self.Width, self.Height-1, colours.white)!@#&		Drawing.DrawCharactersCenter(self.X, self.Y, self.Width, 1, self.Title, colours.black, colours.lightGrey)!@#&!@#&		Drawing.DrawCharacters(self.X+1, self.Y+2, \"New Size\", colours.lightGrey, colours.white)!@#&		if (#self.WidthTextBox.TextInput.Value > 0 and tonumber(self.WidthTextBox.TextInput.Value) < Current.Artboard.Width) or (#self.HeightTextBox.TextInput.Value > 0 and tonumber(self.HeightTextBox.TextInput.Value) < Current.Artboard.Height) then!@#&			Drawing.DrawCharacters(self.X+1, self.Y+8, \"Clipping will occur!\", colours.red, colours.white)!@#&		end!@#&!@#&		local widthLabelColour = colours.black!@#&		if self.WidthLabelHighlight then!@#&			widthLabelColour = colours.red!@#&		end!@#&		!@#&		local heightLabelColour = colours.black!@#&		if self.HeightLabelHighlight then!@#&			heightLabelColour = colours.red!@#&		end!@#&!@#&		Drawing.DrawCharacters(self.X+1, self.Y+4, \"Width\", widthLabelColour, colours.white)!@#&		Drawing.DrawCharacters(self.X+1, self.Y+6, \"Height\", heightLabelColour, colours.white)!@#&!@#&		Drawing.DrawCharacters(self.X+14, self.Y+2, \"Anchor\", colours.lightGrey, colours.white)!@#&!@#&		self.WidthTextBox:Draw()!@#&		self.HeightTextBox:Draw()!@#&		self.OkButton:Draw()!@#&		self.Anchor1:Draw()!@#&		self.Anchor2:Draw()!@#&		self.Anchor3:Draw()!@#&		self.Anchor4:Draw()!@#&		self.Anchor5:Draw()!@#&		self.Anchor6:Draw()!@#&		self.Anchor7:Draw()!@#&		self.Anchor8:Draw()!@#&		self.Anchor9:Draw()!@#&	end,	!@#&!@#&	Initialise = function(self, returnFunc)!@#&		local new = {}    -- the new instance!@#&		setmetatable( new, {__index = self} )!@#&		new.Width = 27!@#&		new.Height = 10!@#&		new.Return = returnFunc!@#&		new.X = math.ceil((Drawing.Screen.Width - new.Width) / 2)!@#&		new.Y = math.ceil((Drawing.Screen.Height - new.Height) / 2)!@#&		new.Title = 'Resize Document'!@#&		new.Visible = true!@#&!@#&		new.WidthTextBox = TextBox:Initialise(9, 5, 4, 1, new, tostring(Current.Artboard.Width), nil, nil, function()!@#&			new:UpdateAnchorButtons()!@#&		end, true)!@#&		new.HeightTextBox = TextBox:Initialise(9, 7, 4, 1, new, tostring(Current.Artboard.Height), nil, nil, function()!@#&			new:UpdateAnchorButtons()!@#&		end, true)!@#&		new.OkButton = Button:Initialise(new.Width - 4, new.Height - 1, nil, nil, colours.lightGrey, new, function(self, side, x, y, toggle)!@#&			local ok = true!@#&			new.WidthLabelHighlight = false!@#&			new.HeightLabelHighlight = false!@#&!@#&			if #new.WidthTextBox.TextInput.Value == 0 or tonumber(new.WidthTextBox.TextInput.Value) <= 0 then!@#&				ok = false!@#&				new.WidthLabelHighlight = true!@#&			end!@#&!@#&			if #new.HeightTextBox.TextInput.Value == 0 or tonumber(new.HeightTextBox.TextInput.Value) <= 0 then!@#&				ok = false!@#&				new.HeightLabelHighlight = true!@#&			end!@#&!@#&			if ok then!@#&				returnFunc(new, tonumber(new.WidthTextBox.TextInput.Value), tonumber(new.HeightTextBox.TextInput.Value), new.AnchorPosition)!@#&			else!@#&				Draw()!@#&			end!@#&		end, 'Ok', colours.black)!@#&!@#&		local anchorX = 15!@#&		local anchorY = 5!@#&		new.Anchor1 = Button:Initialise(anchorX, anchorY, 1, 1, colours.lightGrey, new, function(self, side, x, y, toggle)new.AnchorPosition = 1 new:UpdateAnchorButtons() end, ' ', colours.black)!@#&		new.Anchor2 = Button:Initialise(anchorX+1, anchorY, 1, 1, colours.lightGrey, new, function(self, side, x, y, toggle)new.AnchorPosition = 2 new:UpdateAnchorButtons() end, '^', colours.black)!@#&		new.Anchor3 = Button:Initialise(anchorX+2, anchorY, 1, 1, colours.lightGrey, new, function(self, side, x, y, toggle)new.AnchorPosition = 3 new:UpdateAnchorButtons() end, ' ', colours.black)!@#&		new.Anchor4 = Button:Initialise(anchorX, anchorY+1, 1, 1, colours.lightGrey, new, function(self, side, x, y, toggle)new.AnchorPosition = 4 new:UpdateAnchorButtons() end, '<', colours.black)!@#&		new.Anchor5 = Button:Initialise(anchorX+1, anchorY+1, 1, 1, colours.lightGrey, new, function(self, side, x, y, toggle)new.AnchorPosition = 5 new:UpdateAnchorButtons() end, '#', colours.black)!@#&		new.Anchor6 = Button:Initialise(anchorX+2, anchorY+1, 1, 1, colours.lightGrey, new, function(self, side, x, y, toggle)new.AnchorPosition = 6 new:UpdateAnchorButtons() end, '>', colours.black)!@#&		new.Anchor7 = Button:Initialise(anchorX, anchorY+2, 1, 1, colours.lightGrey, new, function(self, side, x, y, toggle)new.AnchorPosition = 7 new:UpdateAnchorButtons() end, ' ', colours.black)!@#&		new.Anchor8 = Button:Initialise(anchorX+1, anchorY+2, 1, 1, colours.lightGrey, new, function(self, side, x, y, toggle)new.AnchorPosition = 8 new:UpdateAnchorButtons() end, 'v', colours.black)!@#&		new.Anchor9 = Button:Initialise(anchorX+2, anchorY+2, 1, 1, colours.lightGrey, new, function(self, side, x, y, toggle)new.AnchorPosition = 9 new:UpdateAnchorButtons() end, ' ', colours.black)!@#&!@#&		return new!@#&	end,!@#&!@#&	UpdateAnchorButtons = function(self)!@#&		local anchor1 = ' '!@#&		local anchor2 = ' '!@#&		local anchor3 = ' '!@#&		local anchor4 = ' '!@#&		local anchor5 = ' '!@#&		local anchor6 = ' '!@#&		local anchor7 = ' '!@#&		local anchor8 = ' '!@#&		local anchor9 = ' '!@#&		self.AnchorPosition = self.AnchorPosition or 5!@#&		if self.AnchorPosition == 1 then!@#&			anchor1 = '#'!@#&			anchor2 = '>'!@#&			anchor4 = 'v'!@#&		elseif self.AnchorPosition == 2 then!@#&			anchor1 = '<'!@#&			anchor2 = '#'!@#&			anchor3 = '>'!@#&			anchor5 = 'v'!@#&		elseif self.AnchorPosition == 3 then!@#&			anchor2 = '<'!@#&			anchor3 = '#'!@#&			anchor6 = 'v'!@#&		elseif self.AnchorPosition == 4 then!@#&			anchor1 = '^'!@#&			anchor4 = '#'!@#&			anchor5 = '>'!@#&			anchor7 = 'v'!@#&		elseif self.AnchorPosition == 5 then!@#&			anchor2 = '^'!@#&			anchor4 = '<'!@#&			anchor5 = '#'!@#&			anchor6 = '>'!@#&			anchor8 = 'v'!@#&		elseif self.AnchorPosition == 6 then!@#&			anchor3 = '^'!@#&			anchor6 = '#'!@#&			anchor5 = '<'!@#&			anchor9 = 'v'!@#&		elseif self.AnchorPosition == 7 then!@#&			anchor4 = '^'!@#&			anchor7 = '#'!@#&			anchor8 = '>'!@#&		elseif self.AnchorPosition == 8 then!@#&			anchor5 = '^'!@#&			anchor8 = '#'!@#&			anchor7 = '<'!@#&			anchor9 = '>'!@#&		elseif self.AnchorPosition == 9 then!@#&			anchor6 = '^'!@#&			anchor9 = '#'!@#&			anchor8 = '<'!@#&		end!@#&!@#&		if #self.HeightTextBox.TextInput.Value > 0 and Current.Artboard.Height > tonumber(self.HeightTextBox.TextInput.Value) then!@#&			local r = function(str)!@#&				if string.find(str, \"%^\") then!@#&					str = str:gsub('%^','v')!@#&				elseif string.find(str, \"v\") then!@#&					str = str:gsub('v','%^')!@#&				end!@#&				return str!@#&			end!@#&			anchor1 = r(anchor1)!@#&			anchor2 = r(anchor2)!@#&			anchor3 = r(anchor3)!@#&			anchor4 = r(anchor4)!@#&			anchor5 = r(anchor5)!@#&			anchor6 = r(anchor6)!@#&			anchor7 = r(anchor7)!@#&			anchor8 = r(anchor8)!@#&			anchor9 = r(anchor9)!@#&		end!@#&!@#&		if #self.WidthTextBox.TextInput.Value > 0 and Current.Artboard.Width > tonumber(self.WidthTextBox.TextInput.Value) then!@#&			local r = function(str)!@#&				if string.find(str, \">\") then!@#&					str = str:gsub('>','<')!@#&				elseif string.find(str, \"<\") then!@#&					str = str:gsub('<','>')!@#&				end!@#&				return str!@#&			end!@#&			anchor1 = r(anchor1)!@#&			anchor2 = r(anchor2)!@#&			anchor3 = r(anchor3)!@#&			anchor4 = r(anchor4)!@#&			anchor5 = r(anchor5)!@#&			anchor6 = r(anchor6)!@#&			anchor7 = r(anchor7)!@#&			anchor8 = r(anchor8)!@#&			anchor9 = r(anchor9)!@#&		end!@#&!@#&		self.Anchor1.Text = anchor1!@#&		self.Anchor2.Text = anchor2!@#&		self.Anchor3.Text = anchor3!@#&		self.Anchor4.Text = anchor4!@#&		self.Anchor5.Text = anchor5!@#&		self.Anchor6.Text = anchor6!@#&		self.Anchor7.Text = anchor7!@#&		self.Anchor8.Text = anchor8!@#&		self.Anchor9.Text = anchor9!@#&	end,!@#&!@#&	Show = function(self)!@#&		Current.Window = self!@#&		return self!@#&	end,!@#&!@#&	Close = function(self)!@#&		Current.Input = nil!@#&		Current.Window = nil!@#&		self = nil!@#&	end,!@#&!@#&	Flash = function(self)!@#&		self.Visible = false!@#&		Draw()!@#&		sleep(0.15)!@#&		self.Visible = true!@#&		Draw()!@#&		sleep(0.15)!@#&		self.Visible = false!@#&		Draw()!@#&		sleep(0.15)!@#&		self.Visible = true!@#&		Draw()!@#&	end,!@#&!@#&	ButtonClick = function(self, button, x, y)!@#&		if button.X <= x and button.Y <= y and button.X + button.Width > x and button.Y + button.Height > y then!@#&			button:Click()!@#&		end!@#&	end,!@#&!@#&	Click = function(self, side, x, y)!@#&		local items = {self.OkButton, self.WidthTextBox, self.HeightTextBox, self.Anchor1, self.Anchor2, self.Anchor3, self.Anchor4, self.Anchor5, self.Anchor6, self.Anchor7, self.Anchor8, self.Anchor9}!@#&		for i, v in ipairs(items) do!@#&			if CheckClick(v, x, y) then!@#&				v:Click(side, x, y)!@#&			end!@#&		end!@#&		return true!@#&	end!@#&}!@#&!@#&----------------------!@#&!@#&function CheckOpenArtboard()!@#&	if Current.Artboard then!@#&		return true!@#&	else!@#&		return false!@#&	end!@#&end!@#&!@#&function CheckSelectedLayer()!@#&	if Current.Artboard and Current.Layer then!@#&		return true!@#&	else!@#&		return false!@#&	end!@#&end!@#&!@#&function DisplayNewDocumentWindow()!@#&	NewDocumentWindow:Initialise(function(self, success, path, width, height, format, backgroundColour)!@#&		if success then!@#&			if path:sub(-4) ~= format then!@#&				path = path .. format!@#&			end!@#&			local oldWindow = self!@#&			Current.Input = nil!@#&			Current.Window = nil!@#&			makeDocument = function()oldWindow:Close()NewDocument(path, width, height, format, backgroundColour)end!@#&			local _fs = fs!@#&			if OneOS then!@#&				_fs = OneOS.FS!@#&			end!@#&			if _fs.exists(path) then!@#&				ButtonDialougeWindow:Initialise('File Exists', path..' already exists! Use a different name and try again.', 'Ok', nil, function(window, ok)!@#&					window:Close()!@#&					oldWindow:Show()!@#&				end):Show()!@#&			elseif format == '.nfp' then!@#&				Current.Window = nil!@#&				ButtonDialougeWindow:Initialise('Use NFP?', 'The NFT format does not support text or layers, if you use it you will only be able to use 1 layer and not have any text.', 'Use NFP', 'Cancel', function(window, ok)!@#&					window:Close()!@#&					if ok then!@#&						makeDocument()!@#&					else!@#&						oldWindow:Show()!@#&					end!@#&				end):Show()!@#&			elseif format == '.nft' then!@#&				ButtonDialougeWindow:Initialise('Use NFT?', 'The NFT format does not support layers, if you use it you will only be able to use 1 layer.', 'Use NFT', 'Cancel', function(window, ok)!@#&					window:Close()!@#&					if ok then!@#&						makeDocument()!@#&					else!@#&						oldWindow:Show()!@#&					end!@#&				end):Show()!@#&			else!@#&				makeDocument()!@#&			end!@#&!@#&			!@#&		else!@#&			self:Close()!@#&		end!@#&	end):Show()!@#&end!@#&!@#&function NewDocument(path, width, height, format, backgroundColour)!@#&	local _fs = fs!@#&	if OneOS then!@#&		_fs = OneOS.FS!@#&	end!@#&	ab = Artboard:New(_fs.getName(path), path, width, height, format, backgroundColour)!@#&	Current.Tool = Tools[2]!@#&	Current.Toolbar:Update()!@#&	Current.Modified = false!@#&	Draw()!@#&end!@#&!@#&function DisplayToolSizeWindow()!@#&	if not CheckOpenArtboard() then!@#&		return!@#&	end	!@#&	TextDialougeWindow:Initialise('Change Tool Size', 'Enter the new tool size you\\'d like to use.', 'Ok', 'Cancel', function(window, success, value)!@#&		if success then!@#&			Current.ToolSize = math.ceil(tonumber(value))!@#&			if Current.ToolSize < 1 then!@#&				Current.ToolSize = 1!@#&			elseif Current.ToolSize > 50 then!@#&				Current.ToolSize = 50!@#&			end!@#&			ModuleNamed('Tools'):Update()!@#&		end!@#&		window:Close()!@#&	end, true):Show()	!@#&end!@#&!@#&--[[!@#&	Attempt to figure out what format the image is if it doesn't have an extension!@#&]]--!@#&function GetFormat(path)!@#&	local _fs = fs!@#&	if OneOS then!@#&		_fs = OneOS.FS!@#&	end!@#&	local file = _fs.open(path, 'r')!@#&	local content = file.readAll()!@#&	file.close()!@#&	if type(textutils.unserialize(content)) == 'table' then!@#&		-- It's a serlized table, asume sketch!@#&		return '.skch'!@#&	elseif string.find(content, string.char(30)) or string.find(content, string.char(31)) then!@#&		-- Contains the characters that set colours, asume nft!@#&		return '.nft'!@#&	else!@#&		-- Otherwise asume nfp!@#&		return '.nfp'!@#&	end!@#&end!@#&!@#&function DisplayOpenDocumentWindow()!@#&	OpenDocumentWindow:Initialise(function(self, success, path)!@#&		self:Close()!@#&		if success then!@#&			OpenDocument(path)!@#&		end!@#&	end):Show()!@#&end!@#&!@#&!@#&local function Extension(path, addDot)!@#&	if not path then!@#&		return nil!@#&	elseif not string.find(fs.getName(path), '%.') then!@#&		if not addDot then!@#&			return fs.getName(path)!@#&		else!@#&			return ''!@#&		end!@#&	else!@#&		local _path = path!@#&		if path:sub(#path) == '/' then!@#&			_path = path:sub(1,#path-1)!@#&		end!@#&		local extension = _path:gmatch('\\.[0-9a-z]+$')()!@#&		if extension then!@#&			extension = extension:sub(2)!@#&		else!@#&			--extension = nil!@#&			return ''!@#&		end!@#&		if addDot then!@#&			extension = '.'..extension!@#&		end!@#&		return extension:lower()!@#&	end!@#&end!@#&!@#&local RemoveExtension = function(path)!@#&	if path:sub(1,1) == '.' then!@#&		return path!@#&	end!@#&	local extension = Extension(path)!@#&	if extension == path then!@#&		return fs.getName(path)!@#&	end!@#&	return string.gsub(path, extension, ''):sub(1, -2)!@#&end!@#&--[[!@#&	Open a documet at a given path!@#&]]--!@#&function OpenDocument(path)!@#&	local _fs = fs!@#&	if OneOS then!@#&		_fs = OneOS.FS!@#&	end!@#&	if _fs.exists(path) and not _fs.isDir(path) then!@#&		local format = Extension(path, true)!@#&		if (not format or format == '') and (format ~= '.nfp' and format ~= '.nft' and format ~= '.skch') then!@#&			format = GetFormat(path)!@#&		end!@#&		local layers = {}!@#&		if format == '.nfp' then!@#&			layers = ReadNFP(path)!@#&		elseif format == '.nft' then!@#&			layers = ReadNFT(path)		!@#&		elseif format == '.skch' then!@#&			layers = ReadSKCH(path)!@#&		end!@#&!@#&		for i, layer in ipairs(layers) do!@#&			if layer.Visible == nil then!@#&				layer.Visible = true!@#&			end!@#&			if layer.Index == nil then!@#&				layer.Index = 1!@#&			end!@#&			if layer.Name == nil then!@#&				if layer.Index == 1 then!@#&					layer.Name = 'Background'!@#&				else!@#&					layer.Name = 'Layer'!@#&				end!@#&			end!@#&			if layer.BackgroundColour == nil then!@#&				layer.BackgroundColour = colours.white!@#&			end!@#&		end!@#&!@#&		if not layers[1] then!@#&			--log('File could not be read.')!@#&			return!@#&		end!@#&!@#&		local width = #layers[1].Pixels!@#&		local height = #layers[1].Pixels[1]!@#&!@#&		Current.Artboard = nil!@#&		local _fs = fs!@#&		if OneOS then!@#&			_fs = OneOS.FS!@#&		end!@#&		ab = Artboard:New(_fs.getName('Image'), path, width, height, format, nil, layers)!@#&		Current.Tool = Tools[2]!@#&		Current.Toolbar:Update()!@#&		Current.Modified = false!@#&		Draw()!@#&	end!@#&end!@#&!@#&function MakeNewLayer()!@#&	if not CheckOpenArtboard() then!@#&		return!@#&	end!@#&	if Current.Artboard.Format == '.skch' then!@#&		TextDialougeWindow:Initialise('New Layer Name', 'Enter the name you want for the next layer.', 'Ok', 'Cancel', function(window, success, value)!@#&			if success then!@#&				Current.Artboard:MakeLayer(value, colours.transparent)!@#&			end!@#&			window:Close()!@#&		end):Show()	!@#&	else!@#&		local format = 'NFP'!@#&		if Current.Artboard.Format == '.nft' then!@#&			format = 'NFT'!@#&		end!@#&		ButtonDialougeWindow:Initialise(format..' does not support layers!', 'The format you are using, '..format..', does not support multiple layers. Use SKCH to have more than one layer.', 'Ok', nil, function(window)!@#&			window:Close()!@#&		end):Show()!@#&	end!@#&end!@#&!@#&function ResizeDocument()!@#&	if not CheckOpenArtboard() then!@#&		return!@#&	end!@#&	ResizeDocumentWindow:Initialise(function(window, width, height, anchor)!@#&		window:Close()!@#&		local topResize = 0!@#&		local rightResize = 0!@#&		local bottomResize = 0!@#&		local leftResize = 0!@#&!@#&		if anchor == 1 then!@#&			rightResize = 1!@#&			bottomResize = 1!@#&		elseif anchor == 2 then!@#&			rightResize = 0.5!@#&			leftResize = 0.5!@#&			bottomResize = 1!@#&		elseif anchor == 3 then!@#&			leftResize = 1!@#&			bottomResize = 1!@#&		elseif anchor == 4 then!@#&			rightResize = 1!@#&			bottomResize = 0.5!@#&			topResize = 0.5!@#&		elseif anchor == 5 then!@#&			rightResize = 0.5!@#&			leftResize = 0.5!@#&			bottomResize = 0.5!@#&			topResize = 0.5!@#&		elseif anchor == 6 then!@#&			leftResize = 1!@#&			bottomResize = 0.5!@#&			topResize = 0.5!@#&		elseif anchor == 7 then!@#&			rightResize = 1!@#&			topResize = 1!@#&		elseif anchor == 8 then!@#&			rightResize = 0.5!@#&			leftResize = 0.5!@#&			topResize = 1!@#&		elseif anchor == 9 then!@#&			leftResize = 1!@#&			topResize = 1!@#&		end!@#&!@#&		topResize = topResize * (height - Current.Artboard.Height)!@#&		if topResize > 0 then!@#&			topResize = math.floor(topResize)!@#&		else!@#&			topResize = math.ceil(topResize)!@#&		end!@#&!@#&		bottomResize = bottomResize * (height - Current.Artboard.Height)!@#&		if bottomResize > 0 then!@#&			bottomResize = math.ceil(bottomResize)!@#&		else!@#&			bottomResize = math.floor(bottomResize)!@#&		end!@#&!@#&		leftResize = leftResize * (width - Current.Artboard.Width)!@#&		if leftResize > 0 then!@#&			leftResize = math.floor(leftResize)!@#&		else!@#&			leftResize = math.ceil(leftResize)!@#&		end!@#&!@#&		rightResize = rightResize * (width - Current.Artboard.Width)!@#&		if rightResize > 0 then!@#&			rightResize = math.ceil(rightResize)!@#&		else!@#&			rightResize = math.floor(rightResize)!@#&		end!@#&!@#&		Current.Artboard:Resize(topResize, bottomResize, leftResize, rightResize)!@#&	end):Show()!@#&end!@#&!@#&function RenameLayer()!@#&	if not CheckOpenArtboard() then!@#&		return!@#&	end!@#&	if Current.Artboard.Format == '.skch' then!@#&		TextDialougeWindow:Initialise(\"Rename Layer '\"..Current.Layer.Name..\"'\", 'Enter the new name you want the layer to be called.', 'Ok', 'Cancel', function(window, success, value)!@#&			if success then!@#&				Current.Layer.Name = value!@#&			end!@#&			window:Close()!@#&		end):Show()	!@#&	else!@#&		local format = 'NFP'!@#&		if Current.Artboard.Format == '.nft' then!@#&			format = 'NFT'!@#&		end!@#&		ButtonDialougeWindow:Initialise(format..' does not support layers!', 'The format you are using, '..format..', does not support renaming layers. Use SKCH to rename layers.', 'Ok', nil, function(window)!@#&			window:Close()!@#&		end):Show()!@#&	end!@#&end!@#&!@#&function DeleteLayer()!@#&	if not CheckOpenArtboard() then!@#&		return!@#&	end!@#&	if Current.Artboard.Format == '.skch' then!@#&		if #Current.Artboard.Layers > 1 then!@#&			ButtonDialougeWindow:Initialise(\"Delete Layer '\"..Current.Layer.Name..\"'?\", 'Are you sure you want delete the layer?', 'Ok', 'Cancel', function(window, success)!@#&				if success then!@#&					Current.Layer:Remove()!@#&				end!@#&				window:Close()!@#&			end):Show()!@#&		else!@#&			ButtonDialougeWindow:Initialise('Can not delete layer!', 'You can not delete the last layer of an image! Make another layer to delete this one.', 'Ok', nil, function(window)!@#&				window:Close()!@#&			end):Show()!@#&		end!@#&	else!@#&		local format = 'NFP'!@#&		if Current.Artboard.Format == '.nft' then!@#&			format = 'NFT'!@#&		end!@#&		ButtonDialougeWindow:Initialise(format..' does not support layers!', 'The format you are using, '..format..', does not support deleting layers. Use SKCH to deleting layers.', 'Ok', nil, function(window)!@#&			window:Close()!@#&		end):Show()!@#&	end!@#&end!@#&!@#&needsDraw = false!@#&isDrawing = false!@#&function Draw()!@#&	if isDrawing then!@#&		needsDraw = true!@#&		return!@#&	end!@#&	needsDraw = false!@#&	isDrawing = true!@#&	if not Current.Window then!@#&		Drawing.Clear(UIColours.Background)!@#&	else!@#&		Drawing.DrawArea(1, 2, Drawing.Screen.Width, Drawing.Screen.Height, '|', colours.black, colours.lightGrey)!@#&	end!@#&!@#&	if Current.Artboard then!@#&		ab:Draw()!@#&	end!@#&!@#&	if Current.InterfaceVisible then!@#&		Current.MenuBar:Draw()!@#&		Current.Toolbar.Width = Current.Toolbar.ExpandedWidth!@#&		Current.Toolbar:Draw()!@#&	else!@#&		Current.Toolbar.Width = Current.Toolbar.ExpandedWidth!@#&	end!@#&!@#&	if Current.InterfaceVisible and Current.Menu then!@#&		Current.Menu:Draw()!@#&	end!@#&!@#&	if Current.Window then!@#&		Current.Window:Draw()!@#&	end!@#&!@#&	if not Current.InterfaceVisible then!@#&		ShowInterfaceButton:Draw()!@#&	end!@#&!@#&	Drawing.DrawBuffer()!@#&	if Current.Input and not Current.Menu then!@#&		term.setCursorPos(Current.CursorPos[1], Current.CursorPos[2])!@#&		term.setCursorBlink(true)!@#&		term.setTextColour(Current.CursorColour)!@#&	else!@#&		term.setCursorBlink(false)!@#&	end!@#&!@#&	if Current.Selection and Current.Selection[1] and Current.Selection[2] ~= nil then!@#&		Current.SelectionDrawTimer = os.startTimer(0.5)!@#&	end!@#&	isDrawing = false!@#&	if needsDraw then!@#&		Draw()!@#&	end!@#&end!@#&!@#&function LoadMenuBar()!@#&	Current.MenuBar = MenuBar:Initialise({!@#&		Button:Initialise(1, 1, nil, nil, colours.grey, Current.MenuBar, function(self, side, x, y, toggle)!@#&			if toggle then!@#&				Menu:New(1, 2, {!@#&					{!@#&						Title = \"New...\",!@#&						Click = function()!@#&							DisplayNewDocumentWindow()!@#&						end,!@#&						Keys = {!@#&							keys.leftCtrl,!@#&							keys.n!@#&						}!@#&					},!@#&					{!@#&						Title = 'Open...',!@#&						Click = function()!@#&							DisplayOpenDocumentWindow()!@#&						end,!@#&						Keys = {!@#&							keys.leftCtrl,!@#&							keys.o!@#&						}!@#&					},!@#&					{!@#&						Separator = true!@#&					},!@#&					{!@#&						Title = 'Save...',!@#&						Click = function()!@#&							Current.Artboard:Save()!@#&						end,!@#&						Keys = {!@#&							keys.leftCtrl,!@#&							keys.s!@#&						},!@#&						Enabled = function()!@#&							return CheckOpenArtboard()!@#&						end!@#&					},!@#&					{!@#&						Separator = true!@#&					},!@#&					{!@#&						Title = 'Quit',!@#&						Click = function()!@#&							if Close() then!@#&								OneOS.Close()!@#&							end!@#&						end!@#&					},!@#&			--[[!@#&					{!@#&						Title = 'Save As...',!@#&						Click = function()!@#&!@#&						end!@#&					}	!@#&			]]--!@#&				}, self, true)!@#&			else!@#&				Current.Menu = nil!@#&			end!@#&			return true !@#&		end, 'File', colours.lightGrey, false),!@#&		Button:Initialise(7, 1, nil, nil, colours.grey, Current.MenuBar, function(self, side, x, y, toggle)!@#&			if not self.Toggle then!@#&				Menu:New(7, 2, {!@#&			--[[!@#&					{!@#&						Title = \"Undo\",!@#&						Click = function()!@#&						end,!@#&						Keys = {!@#&							keys.leftCtrl,!@#&							keys.z!@#&						},!@#&						Enabled = function()!@#&							return false!@#&						end!@#&					},!@#&					{!@#&						Title = 'Redo',!@#&						Click = function()!@#&							!@#&						end,!@#&						Keys = {!@#&							keys.leftCtrl,!@#&							keys.y!@#&						},!@#&						Enabled = function()!@#&							return false!@#&						end!@#&					},!@#&					{!@#&						Separator = true!@#&					},!@#&			]]--!@#&					{!@#&						Title = 'Cut',!@#&						Click = function()!@#&							Clipboard.Cut(Current.Layer:PixelsInSelection(true), 'sketchpixels')!@#&						end,!@#&						Keys = {!@#&							keys.leftCtrl,!@#&							keys.x!@#&						},!@#&						Enabled = function()!@#&							return Current.Selection and Current.Selection[1] and Current.Selection[2] ~= nil!@#&						end!@#&					},!@#&					{!@#&						Title = 'Copy',!@#&						Click = function()!@#&							Clipboard.Copy(Current.Layer:PixelsInSelection(), 'sketchpixels')!@#&						end,!@#&						Keys = {!@#&							keys.leftCtrl,!@#&							keys.c!@#&						},!@#&						Enabled = function()!@#&							return Current.Selection and Current.Selection[1] and Current.Selection[2] ~= nil!@#&						end!@#&					},!@#&					{!@#&						Title = 'Paste',!@#&						Click = function()!@#&							Current.Layer:InsertPixels(Clipboard.Paste())!@#&						end,!@#&						Keys = {!@#&							keys.leftCtrl,!@#&							keys.v!@#&						},!@#&						Enabled = function()!@#&							return (not Clipboard.isEmpty()) and Clipboard.Type == 'sketchpixels'!@#&						end!@#&					}!@#&				}, self, true)!@#&			else!@#&				Current.Menu = nil!@#&			end!@#&			return true !@#&		end, 'Edit', colours.lightGrey, false),!@#&		Button:Initialise(13, 1, nil, nil, colours.grey, Current.MenuBar, function(self, side, x, y, toggle)!@#&			if toggle then!@#&				Menu:New(13, 2, {!@#&					{!@#&						Title = \"Resize...\",!@#&						Click = function()!@#&							ResizeDocument()!@#&						end,!@#&						Keys = {!@#&							keys.leftCtrl,!@#&							keys.r!@#&						},!@#&						Enabled = function()!@#&							return CheckOpenArtboard()!@#&						end!@#&					},!@#&					{!@#&						Title = \"Crop\",!@#&						Click = function()!@#&							local top = 0!@#&							local left = 0!@#&							local bottom = 0!@#&							local right = 0!@#&							if Current.Selection[1].x < Current.Selection[2].x then!@#&								left = Current.Selection[1].x - 1!@#&								right = Current.Artboard.Width - Current.Selection[2].x!@#&							else!@#&								left = Current.Selection[2].x - 1!@#&								right = Current.Artboard.Width - Current.Selection[1].x!@#&							end!@#&							if Current.Selection[1].y < Current.Selection[2].y then!@#&								top = Current.Selection[1].y - 1!@#&								bottom = Current.Artboard.Height - Current.Selection[2].y!@#&							else!@#&								top = Current.Selection[2].y - 1!@#&								bottom = Current.Artboard.Height - Current.Selection[1].y!@#&							end!@#&							Current.Artboard:Resize(-1*top, -1*bottom, -1*left, -1*right)!@#&!@#&							Current.Selection[2] = nil!@#&						end,!@#&						Enabled = function()!@#&							if CheckSelectedLayer() and Current.Selection and Current.Selection[1] and Current.Selection[2] ~= nil then!@#&								return true!@#&							else!@#&								return false!@#&							end!@#&						end!@#&					},!@#&					{!@#&						Separator = true!@#&					},!@#&					{!@#&						Title = 'New Layer...',!@#&						Click = function()!@#&							MakeNewLayer()!@#&						end,!@#&						Keys = {!@#&							keys.leftCtrl,!@#&							keys.l!@#&						},!@#&						Enabled = function()!@#&							return CheckOpenArtboard()!@#&						end!@#&					},!@#&					{!@#&						Title = 'Delete Layer',!@#&						Click = function()!@#&							DeleteLayer()!@#&						end,!@#&						Enabled = function()!@#&							return CheckSelectedLayer()!@#&						end!@#&					},!@#&					{!@#&						Title = 'Rename Layer...',!@#&						Click = function()!@#&							RenameLayer()!@#&						end,!@#&						Enabled = function()!@#&							return CheckSelectedLayer()!@#&						end!@#&					},!@#&					{!@#&						Separator = true!@#&					},!@#&					{!@#&						Title = 'Erase Selection',!@#&						Click = function()!@#&							Current.Layer:EraseSelection()!@#&						end,!@#&						Keys = {!@#&							keys.delete!@#&						},!@#&						Enabled = function()!@#&							if CheckSelectedLayer() and Current.Selection and Current.Selection[1] and Current.Selection[2] ~= nil then!@#&								return true!@#&							else!@#&								return false!@#&							end!@#&						end!@#&					},!@#&					{!@#&						Separator = true!@#&					},!@#&					{!@#&						Title = 'Hide Interface',!@#&						Click = function()!@#&							Current.InterfaceVisible = not Current.InterfaceVisible!@#&						end,!@#&						Keys = {!@#&							keys.tab!@#&						}!@#&					}!@#&				}, self, true)!@#&			else!@#&				Current.Menu = nil!@#&			end!@#&			return true !@#&		end, 'Image', colours.lightGrey, false),!@#&		!@#&		Button:Initialise(20, 1, nil, nil, colours.grey, Current.MenuBar, function(self, side, x, y, toggle)!@#&			if toggle then!@#&				local menuItems = {{!@#&						Title = \"Change Size\",!@#&						Click = function()!@#&							DisplayToolSizeWindow()!@#&						end,!@#&						Keys = {!@#&							keys.leftCtrl,!@#&							keys.t!@#&						}!@#&					},!@#&					{!@#&						Separator = true!@#&					}!@#&				}!@#&				!@#&				local _keys = {'h','p','e','f','s','m','t'}!@#&				for i, tool in ipairs(Tools) do!@#&					table.insert(menuItems, {!@#&						Title = tool.Name,!@#&						Click = function()!@#&							SetTool(tool)!@#&							local m = ModuleNamed('Tools')!@#&							m:Update(m.ToolbarItem)!@#&						end,!@#&						Keys = {!@#&							keys[_keys[i]]!@#&						},!@#&						Enabled = function()!@#&							return CheckOpenArtboard()!@#&						end!@#&					})!@#&				end!@#&!@#&				Menu:New(20, 2, menuItems, self, true)!@#&			else!@#&				Current.Menu = nil!@#&			end!@#&			return true !@#&		end, 'Tools', colours.lightGrey, false),!@#&	})!@#&end!@#&!@#&function Timer(event, timer)!@#&	if timer == Current.ControlPressedTimer then!@#&		Current.ControlPressedTimer = nil!@#&	elseif timer == Current.SelectionDrawTimer then!@#&		if Current.Artboard then!@#&			Current.Artboard.SelectionIsBlack = not Current.Artboard.SelectionIsBlack!@#&			Draw()!@#&		end!@#&	end!@#&end!@#&!@#&function Initialise(arg)!@#&	if not OneOS then!@#&		SplashScreen()!@#&	end!@#&	EventRegister('mouse_click', TryClick)!@#&	EventRegister('mouse_drag', function(event, side, x, y)TryClick(event, side, x, y, true)end)!@#&	EventRegister('mouse_scroll', Scroll)!@#&	EventRegister('key', HandleKey)!@#&	EventRegister('char', HandleKey)!@#&	EventRegister('timer', Timer)!@#&	EventRegister('terminate', function(event) if Close() then error( \"Terminated\", 0 ) end end)!@#&!@#&!@#&	Current.Toolbar = Toolbar:New('right', true)!@#&!@#&	for k, v in pairs(Modules) do!@#&		v:Initialise()!@#&	end!@#&	!@#&	--term.setBackgroundColour(UIColours.Background)!@#&	--term.clear()!@#&!@#&	LoadMenuBar()!@#&!@#&	local _fs = fs!@#&	if OneOS then!@#&		_fs = OneOS.FS!@#&	end!@#&	if arg and _fs.exists(arg) then!@#&		OpenDocument(arg)!@#&	else!@#&		DisplayNewDocumentWindow()!@#&		Current.Window.Visible = false!@#&	end!@#&!@#&	ShowInterfaceButton = Button:Initialise(Drawing.Screen.Width - 15, 1, nil, 1, colours.grey, nil, function(self)!@#&		Current.InterfaceVisible = true!@#&		Draw()!@#&	end, 'Show Interface')!@#&!@#&	Draw()!@#&	if Current.Window then!@#&		Current.Window.Visible = true!@#&		Draw()!@#&	end!@#&!@#&	EventHandler()!@#&end!@#&!@#&function SplashScreen()!@#&	local splashIcon = {{1,1,1,256,256,256,256,256,256,256,256,1,1,1,},{1,256,256,8,8,8,8,8,8,8,8,256,256,1,},{256,8,8,8,8,8,8,8,8,8,8,8,8,256,},{256,256,256,8,8,8,8,8,8,8,8,256,256,256,},{256,256,256,256,256,256,256,256,256,256,256,256,256,256,},{2048,2048,256,256,256,256,256,256,256,256,256,256,2048,2048,},{2048,2048,2048,2048,2048,2048,2048,2048,2048,2048,2048,2048,2048,2048,},{2048,2048,2048,2048,2048,2048,2048,2048,2048,2048,2048,2048,2048,2048,},{2048,2048,2048,2048,2048,2048,2048,2048,2048,2048,2048,2048,2048,2048,},{2048,2048,2048,2048,2048,2048,2048,2048,2048,2048,2048,2048,2048,2048,},{256,256,2048,2048,2048,2048,2048,2048,2048,2048,2048,2048,256,256,},{1,256,256,256,256,256,256,256,256,256,256,256,256,1,},{1,1,1,256,256,256,256,256,256,256,256,1,1,1,},[\"text\"]={{\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",},{\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",},{\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",},{\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",},{\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",},{\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",},{\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",},{\" \",\" \",\" \",\" \",\"S\",\"k\",\"e\",\"t\",\"c\",\"h\",\" \",\" \",\" \",\" \",},{\" \",\" \",\" \",\" \",\"M\",\"a\",\"3\",\"r\",\"X\",\" \",\" \",\" \",\" \",\" \",},{\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",},{\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",},{\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",},{\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",},},[\"textcol\"]={{32768,32768,32768,32768,32768,32768,32768,32768,32768,32768,32768,32768,32768,32768,},{32768,32768,32768,256,32768,32768,32768,32768,32768,32768,32768,32768,32768,32768,},{32768,32768,32768,32768,32768,32768,32768,32768,32768,32768,32768,32768,32768,32768,},{32768,32768,32768,32768,32768,32768,32768,32768,32768,32768,32768,32768,32768,32768,},{32768,32768,32768,32768,32768,32768,32768,32768,32768,32768,32768,32768,32768,32768,},{32768,32768,32768,32768,32768,32768,32768,32768,32768,32768,32768,32768,32768,32768,},{32768,32768,32768,32768,32768,32768,32768,32768,32768,32768,32768,32768,32768,32768,},{32768,32768,32768,32768,1,1,1,1,1,1,32768,32768,32768,32768,},{32768,32768,32768,32768,8,8,8,8,8,8,8,32768,32768,32768,},{32768,32768,32768,32768,1,1,1,1,1,32768,8,32768,32768,32768,},{32768,32768,32768,32768,32768,32768,32768,32768,32768,32768,32768,32768,32768,32768,},{32768,32768,32768,32768,32768,32768,32768,32768,32768,32768,32768,32768,32768,32768,},{32768,32768,32768,32768,32768,32768,32768,32768,32768,32768,32768,32768,32768,32768,},},}!@#&	Drawing.Clear(colours.white)!@#&	Drawing.DrawImage((Drawing.Screen.Width - 14)/2, (Drawing.Screen.Height - 13)/2, splashIcon, 14, 13)!@#&	Drawing.DrawBuffer()!@#&	parallel.waitForAny(function()sleep(1)end, function()os.pullEvent('mouse_click')end)!@#&end!@#&!@#&LongestString = function(input, key)!@#&	local length = 0!@#&	for i = 1, #input do!@#&		local value = input[i]!@#&		if key then!@#&			if value[key] then!@#&				value = value[key]!@#&			else!@#&				value = ''!@#&			end!@#&		end!@#&		local titleLength = string.len(value)!@#&		if titleLength > length then!@#&			length = titleLength!@#&		end!@#&	end!@#&	return length!@#&end!@#&!@#&function HandleKey(...)!@#&	local args = {...}!@#&	local event = args[1]!@#&	local keychar = args[2]!@#&	if event == 'key' and Current.Tool and Current.Tool.Name == 'Text' and Current.Input and (keychar == keys.up or keychar == keys.down or keychar == keys.left or keychar == keys.right) then!@#&		local currentPos = {Current.CursorPos[1] - Current.Artboard.X + 1, Current.CursorPos[2] - Current.Artboard.Y + 1}!@#&		if keychar == keys.up then!@#&			currentPos[2] = currentPos[2] - 1!@#&		elseif keychar == keys.down then!@#&			currentPos[2] = currentPos[2] + 1!@#&		elseif keychar == keys.left then!@#&			currentPos[1] = currentPos[1] - 1!@#&		elseif keychar == keys.right then!@#&			currentPos[1] = currentPos[1] + 1!@#&		end!@#&!@#&		if currentPos[1] < 1 then!@#&			currentPos[1] = 1!@#&		end!@#&!@#&		if currentPos[1] > Current.Artboard.Width then!@#&			currentPos[1] = Current.Artboard.Width!@#&		end!@#&!@#&		if currentPos[2] < 1 then!@#&			currentPos[2] = 1!@#&		end!@#&!@#&		if currentPos[2] > Current.Artboard.Height then!@#&			currentPos[2] = Current.Artboard.Height!@#&		end!@#&!@#&		Current.Tool:Use(currentPos[1], currentPos[2])!@#&		Current.Modified = true!@#&		Draw()!@#&	elseif Current.Input then!@#&		if event == 'char' then!@#&			Current.Input:Char(keychar)!@#&		elseif event == 'key' then!@#&			Current.Input:Key(keychar)!@#&		end!@#&	elseif event == 'key' then!@#&		CheckKeyboardShortcut(keychar)!@#&	end!@#&end!@#&!@#&function Scroll(event, direction, x, y)!@#&	if Current.Window and Current.Window.OpenButton then!@#&		Current.Window.Scroll = Current.Window.Scroll + direction!@#&		if Current.Window.Scroll < 0 then!@#&			Current.Window.Scroll = 0!@#&		elseif Current.Window.Scroll > Current.Window.MaxScroll then!@#&			Current.Window.Scroll = Current.Window.MaxScroll!@#&		end!@#&	end!@#&	Draw()!@#&end!@#&!@#&function CheckKeyboardShortcut(key)!@#&	local shortcuts = {}!@#&!@#&	if key == keys.leftCtrl then!@#&		Current.ControlPressedTimer = os.startTimer(0.5)!@#&		return!@#&	end!@#&	if Current.ControlPressedTimer then!@#&		shortcuts[keys.n] = function() DisplayNewDocumentWindow() end!@#&		shortcuts[keys.o] = function() DisplayOpenDocumentWindow() end!@#&		shortcuts[keys.s] = function() Current.Artboard:Save() end!@#&		shortcuts[keys.x] = function() if Current.Selection and Current.Selection[1] and Current.Selection[2] ~= nil then Clipboard.Cut(Current.Layer:PixelsInSelection(true), 'sketchpixels') end end!@#&		shortcuts[keys.c] = function() if Current.Selection and Current.Selection[1] and Current.Selection[2] ~= nil then Clipboard.Copy(Current.Layer:PixelsInSelection(), 'sketchpixels') end end!@#&		shortcuts[keys.v] = function() if (not Clipboard.isEmpty()) and Clipboard.Type == 'sketchpixels' then Current.Layer:InsertPixels(Clipboard.Paste()) end end!@#&		shortcuts[keys.r] = function() ResizeDocument() end!@#&		shortcuts[keys.l] = function() MakeNewLayer() end!@#&	end!@#&!@#&	shortcuts[keys.delete] = function() if CheckSelectedLayer() and Current.Selection and Current.Selection[1] and Current.Selection[2] ~= nil then Current.Layer:EraseSelection() Draw() end end!@#&	shortcuts[keys.backspace] = shortcuts[keys.delete]!@#&	shortcuts[keys.tab] = function() Current.InterfaceVisible = not Current.InterfaceVisible Draw() end!@#&!@#&	shortcuts[keys.h] = function() SetTool(ToolNamed('Hand')) ModuleNamed('Tools'):Update() Draw() end!@#&	shortcuts[keys.e] = function() SetTool(ToolNamed('Eraser')) ModuleNamed('Tools'):Update() Draw() end!@#&	shortcuts[keys.p] = function() SetTool(ToolNamed('Pencil')) ModuleNamed('Tools'):Update() Draw() end!@#&	shortcuts[keys.f] = function() SetTool(ToolNamed('Fill Bucket')) ModuleNamed('Tools'):Update() Draw() end!@#&	shortcuts[keys.m] = function() SetTool(ToolNamed('Move')) ModuleNamed('Tools'):Update() Draw() end!@#&	shortcuts[keys.s] = function() SetTool(ToolNamed('Select')) ModuleNamed('Tools'):Update() Draw() end!@#&	shortcuts[keys.t] = function() SetTool(ToolNamed('Text')) ModuleNamed('Tools'):Update() Draw() end!@#&!@#&	if shortcuts[key] then!@#&		shortcuts[key]()!@#&		return true!@#&	else!@#&		return false!@#&	end!@#&end!@#&!@#&--[[!@#&	Check if the given object falls under the click coordinates!@#&]]--!@#&function CheckClick(object, x, y)!@#&	if object.X <= x and object.Y <= y and object.X + object.Width > x and object.Y + object.Height > y then!@#&		return true!@#&	end!@#&end!@#&!@#&--[[!@#&	Attempt to clicka given object!@#&]]--!@#&function DoClick(object, side, x, y, drag)!@#&	if object and CheckClick(object, x, y) then!@#&		return object:Click(side, x - object.X + 1, y - object.Y + 1, drag)!@#&	end	!@#&end!@#&!@#&--[[!@#&	Try to click at the given coordinates!@#&]]--!@#&function TryClick(event, side, x, y, drag)!@#&	if Current.InterfaceVisible and Current.Menu then!@#&		if DoClick(Current.Menu, side, x, y, drag) then!@#&			Draw()!@#&			return!@#&		else!@#&			if Current.Menu.Owner and Current.Menu.Owner.Toggle then!@#&				Current.Menu.Owner.Toggle = false!@#&			end!@#&			Current.Menu = nil!@#&			Draw()!@#&			return!@#&		end!@#&	elseif Current.Window then!@#&		if DoClick(Current.Window, side, x, y, drag) then!@#&			Draw()!@#&			return!@#&		else!@#&			Current.Window:Flash()!@#&			return!@#&		end!@#&	end!@#&	local interfaceElements = {}!@#&!@#&	if Current.InterfaceVisible then!@#&		table.insert(interfaceElements, Current.MenuBar)!@#&	else!@#&		table.insert(interfaceElements, ShowInterfaceButton)!@#&	end!@#&!@#&	for i, v in ipairs(Lists.Interface.Toolbars) do!@#&		for i, v2 in ipairs(v.ToolbarItems) do!@#&			table.insert(interfaceElements, v2)!@#&		end!@#&		table.insert(interfaceElements, v)!@#&	end!@#&!@#&	table.insert(interfaceElements, Current.Artboard)!@#&!@#&	for i, object in ipairs(interfaceElements) do!@#&		if DoClick(object, side, x, y, drag) then!@#&			Draw()!@#&			return!@#&		end		!@#&	end!@#&	Draw()!@#&end!@#&!@#&--[[!@#&	Registers functions to run on certain events!@#&]]--!@#&function EventRegister(event, func)!@#&	if not Events[event] then!@#&		Events[event] = {}!@#&	end!@#&!@#&	table.insert(Events[event], func)!@#&end!@#&!@#&--[[!@#&	The main loop event handler, runs registered event functinos!@#&]]--!@#&function EventHandler()!@#&	while true do!@#&		local event, arg1, arg2, arg3, arg4 = os.pullEventRaw()!@#&		if Events[event] then!@#&			for i, e in ipairs(Events[event]) do!@#&				e(event, arg1, arg2, arg3, arg4)!@#&			end!@#&		end!@#&	end!@#&end!@#&!@#&--[[!@#&	Thanks to NitrogenFingers for the colour functions and NFT + NFP read/write functions!@#&]]--!@#&!@#&--[[!@#&	Gets the hex value from a colour!@#&]]--!@#&local hexnums = { [10] = \"a\", [11] = \"b\", [12] = \"c\", [13] = \"d\", [14] = \"e\" , [15] = \"f\" }!@#&local function getHexOf(colour)!@#&    if colour == colours.transparent or not colour or not tonumber(colour) then!@#&            return \" \"!@#&    end!@#&    local value = math.log(colour)/math.log(2)!@#&    if value > 9 then!@#&            value = hexnums[value]!@#&    end!@#&    return value!@#&end!@#&!@#&--[[!@#&	Gets the colour from a hex value!@#&]]--!@#&local function getColourOf(hex)!@#&	if hex == ' ' then!@#&		return colours.transparent!@#&	end!@#&    local value = tonumber(hex, 16)!@#&    if not value then return nil end!@#&    value = math.pow(2,value)!@#&    return value!@#&end!@#&!@#&--[[!@#&	Saves the current artboard in .skch format!@#&]]--!@#&function SaveSKCH()!@#&	local layers = {}!@#&	for i, l in ipairs(Current.Artboard.Layers) do!@#&		local pixels = SaveNFT(i)!@#&		local layer = {!@#&			Name = l.Name,!@#&			Pixels = pixels,!@#&			BackgroundColour = l.BackgroundColour,!@#&			Visible = l.Visible,!@#&			Index = l.Index,!@#&		}!@#&		table.insert(layers, layer)!@#&	end!@#&	return layers!@#&end!@#&!@#&--[[!@#&	Saves the current artboard in .nft format!@#&]]--!@#&function SaveNFT(layer)!@#&	layer = layer or 1!@#&	local lines = {}!@#&	local width = Current.Artboard.Width!@#&	local height = Current.Artboard.Height!@#&	for y = 1, height do!@#&		local line = ''!@#&		local currentBackgroundColour = nil!@#&		local currentTextColour = nil!@#&		for x = 1, width do!@#&			local pixel = Current.Artboard.Layers[layer].Pixels[x][y]!@#&			if pixel.BackgroundColour ~= currentBackgroundColour then!@#&				line = line..string.char(30)..getHexOf(pixel.BackgroundColour)!@#&				currentBackgroundColour = pixel.BackgroundColour!@#&			end!@#&			if pixel.TextColour ~= currentTextColour then!@#&				line = line..string.char(31)..getHexOf(pixel.TextColour)!@#&				currentTextColour = pixel.TextColour!@#&			end!@#&			line = line .. pixel.Character!@#&		end!@#&		table.insert(lines, line)!@#&	end!@#&	return lines!@#&end!@#&!@#&--[[!@#&	Saves the current artboard in .nfp format!@#&]]--!@#&function SaveNFP()!@#&	local lines = {}!@#&	local width = Current.Artboard.Width!@#&	local height = Current.Artboard.Height!@#&	for y = 1, height do!@#&		local line = ''!@#&		for x = 1, width do!@#&			line = line .. getHexOf(Current.Artboard.Layers[1].Pixels[x][y].BackgroundColour)!@#&		end!@#&		table.insert(lines, line)!@#&	end!@#&	return lines!@#&end!@#&!@#&--[[!@#&	Reads a .nfp file from the given path!@#&]]--!@#&function ReadNFP(path)!@#&	local pixels = {}!@#&	local _fs = fs!@#&	if OneOS then!@#&		_fs = OneOS.FS!@#&	end!@#&	local file = _fs.open(path, 'r')!@#&	local line = file.readLine()!@#&	local y = 1!@#&	while line do!@#&		for x = 1, #line do!@#&			if not pixels[x] then!@#&				pixels[x] = {}!@#&			end!@#&			pixels[x][y] = {BackgroundColour = getColourOf(line:sub(x,x))}!@#&		end!@#&		y = y + 1!@#&		line = file.readLine()!@#&	end!@#&	file.close()!@#&	return {{Pixels = pixels}}!@#&end!@#&!@#&--[[!@#&	Reads a .nft file from the given path!@#&]]--!@#&function ReadNFT(path)!@#&	local _fs = fs!@#&	if OneOS then!@#&		_fs = OneOS.FS!@#&	end!@#&	local file = _fs.open(path, 'r')!@#&	local line = file.readLine()!@#&	local lines = {}!@#&	while line do!@#&		table.insert(lines, line)!@#&		line = file.readLine()!@#&	end!@#&	file.close()!@#&	return {{Pixels = ParseNFT(lines)}}!@#&end!@#&!@#&--[[!@#&	Converts the lines of an .nft document to readble pixel data!@#&]]--!@#&function ParseNFT(lines)!@#&	local pixels = {}!@#&	for y, line in ipairs(lines) do!@#&		local bgNext, fgNext = false, false!@#&		local currBG, currFG = nil,nil!@#&		local writePosition = 1!@#&		for x = 1, #line do!@#&			if not pixels[writePosition] then!@#&				pixels[writePosition] = {}!@#&			end!@#&!@#&			local nextChar = string.sub(line, x, x)!@#&            if nextChar:byte() == 30 then!@#&                    bgNext = true!@#&            elseif nextChar:byte() == 31 then!@#&                    fgNext = true!@#&            elseif bgNext then!@#&                    currBG = getColourOf(nextChar)!@#&                    if currBG == nil then!@#&                    	currBG = colours.transparent!@#&                    end!@#&                    bgNext = false!@#&            elseif fgNext then!@#&                    currFG = getColourOf(nextChar)!@#&                    fgNext = false!@#&            else!@#&                    if nextChar ~= \" \" and currFG == nil then!@#&                            currFG = colours.white!@#&                    end!@#&                    pixels[writePosition][y] = {BackgroundColour = currBG, TextColour = currFG, Character = nextChar}!@#&                    writePosition = writePosition + 1!@#&            end!@#&		end!@#&	end!@#&	return pixels!@#&end!@#&!@#&--[[!@#&	Read a .skch file from the given path!@#&]]--!@#&function ReadSKCH(path)!@#&	local _fs = fs!@#&	if OneOS then!@#&		_fs = OneOS.FS!@#&	end!@#&	local file = _fs.open(path, 'r')!@#&	local _layers = textutils.unserialize(file.readAll())!@#&	file.close()!@#&	local layers = {}!@#&!@#&	for i, l in ipairs(_layers) do!@#&		local layer = {!@#&			Name = l.Name,!@#&			Pixels = ParseNFT(l.Pixels),!@#&			BackgroundColour = l.BackgroundColour,!@#&			Visible = l.Visible,!@#&			Index = l.Index,!@#&		}!@#&		table.insert(layers, layer)!@#&	end!@#&	return layers!@#&end!@#&!@#&--[[!@#&	Start the program after all functions and tables are loaded!@#&]]--!@#&if term.isColor and term.isColor() then!@#&	Initialise(...)!@#&else!@#&	print('Sorry, but Sketch only works on Advanced (gold) Computers')!@#&end",["DoorLock"]="!@#&--rawdownloadcloneembedreportprintLua 10.32 KB!@#&os.loadAPI(\"SpeedAPI/windows\")!@#&os.loadAPI(\"SpeedAPI/peripheral\")!@#& !@#&--????????? ????? ???????!@#&if peripheral.find(\"modem\") then!@#&      rednet.open(peripheral.find(\"modem\")) !@#&end!@#&!@#&--!@#&io.write(\"Enter password: \")!@#&local password = io.read()!@#& !@#&--   !@#&local doorOpenTime = 5!@#& !@#&--   !@#&local buttonPressTime = 0.2!@#& !@#&-- !@#&local changePasswordTimer = nil!@#& !@#&--  !@#&local mode = \"default\"!@#& !@#&--   !@#&local hidePassword = \"false\"!@#& !@#&--   ,   !@#&io.write(\"Enter redstone side: \")!@#&local redstoneSide = io.read()!@#&-- ,   !@#&io.write(\"Enter alarm side: \")!@#&local redstoneSideOnWrongPassword = io.read() --\"right\"!@#& !@#&--!@#&local buttons = {!@#&        {\"1\",\"2\",\"3\"},!@#&        {\"4\",\"5\",\"6\"},!@#&        {\"7\",\"8\",\"9\"},!@#&        {\"C\",\"0\",\"#\"},!@#&}!@#& !@#&-- !@#&local Obj = {}!@#& !@#&-- ,    !@#&local inputCode = {}!@#& !@#&--  !@#&local xSize, ySize = term.getSize()!@#& !@#&-- !@#&local function findPeripheral(whatToFind)!@#&      local PeriList = rs.getSides() --peripheral.getNames()!@#&      for i=1,#PeriList do!@#&            if peripheral.getType(PeriList[i]) == whatToFind then!@#&                  return PeriList[i]!@#&            end!@#&      end!@#&end!@#& !@#&--       !@#&local function centerText(how,coord,text,textColor,backColor)!@#&            term.setTextColor(textColor)!@#&            term.setBackgroundColor(backColor)!@#&            if how == \"xy\" then!@#&                        term.setCursorPos(math.floor(xSize/2-#text/2),math.floor(ySize/2))!@#&            elseif how == \"x\" then!@#&                        term.setCursorPos(math.floor(xSize/2-#text/2),coord)!@#&            elseif how == \"y\" then!@#&                        term.setCursorPos(coord,math.floor(ySize/2))!@#&            end!@#&            term.write(text)!@#&end!@#& !@#&-- !@#&function configRead(pathToConfig,whatToRead)!@#&            if not fs.exists(pathToConfig) then error(\"No such file\") end!@#&            local file = fs.open(pathToConfig,\"r\")!@#&            while true do!@#&                        local line = file.readLine()!@#&                        if line ~= nil then!@#&                                    local key, value = string.match(line,\"(.*)=(.*)\")!@#&                                    if value ~= nil and key == whatToRead then!@#&                                                file.close()!@#&                                                return value!@#&                                    end!@#&                        else!@#&                                    file.close()!@#&                                    break!@#&                        end!@#&            end!@#&end!@#& !@#&--  !@#&local function configWrite(pathToConfig,key,value)!@#&            if not fs.exists(pathToConfig) then!@#&                        local file = fs.open(pathToConfig,\"w\")!@#&                        file.close()!@#&            end!@#&     !@#&            local file = fs.open(pathToConfig,\"r\")!@#&            local Massiv = {}!@#&           !@#&            local lineCounter = 1!@#&            while true do!@#&                        local line = file.readLine()!@#&                        if line ~= nil then!@#&                                    Massiv[lineCounter] = line!@#&                        else!@#&                                    file.close()!@#&                                    break!@#&                        end!@#&                        lineCounter = lineCounter + 1!@#&            end!@#&     !@#&            local success = false!@#&            for i=1,#Massiv do!@#&                        local key1, value1 = string.match(Massiv[i],\"(.*)=(.*)\")!@#&                        if value1 ~= nil and key1 == key then!@#&                                    Massiv[i] = key..\"=\"..value!@#&                                    success = true!@#&                        end!@#&            end!@#&     !@#&            if success == false then Massiv[#Massiv+1] = key..\"=\"..value end!@#&     !@#&            local file = fs.open(pathToConfig,\"w\")!@#&            for i=1,#Massiv do!@#&                        file.writeLine(Massiv[i])!@#&            end!@#&            file.close()!@#&end!@#& !@#&--!@#&local function newObj(name,x,y)!@#&            Obj[name]={}!@#&            Obj[name][\"x\"]=x!@#&            Obj[name][\"y\"]=y!@#&end!@#& !@#&--   !@#&local function clearScreen(color)!@#&            term.setBackgroundColor(color)!@#&            term.clear()!@#&end!@#& !@#&-- !@#&local function usualText(x,y,text)!@#&            term.setCursorPos(x,y)!@#&            term.write(text)!@#&end!@#& !@#&--  !@#&local function drawTab(textColor,backColor)!@#&            term.setBackgroundColor(backColor)!@#&            term.setTextColor(textColor)!@#&            term.setCursorPos(2,1)!@#&            term.clearLine()!@#&            term.write(\"-----\")!@#&     !@#&            for i=1,#inputCode do!@#&                        if hidePassword == \"true\" then!@#&                                    usualText(i+1,1,\"*\")!@#&                        else!@#&                                    usualText(i+1,1,inputCode[i])!@#&                        end!@#&            end!@#&end!@#& !@#&--  !@#&local function drawButton(name,textColor,backColor)!@#&            term.setBackgroundColor(backColor)!@#&            term.setTextColor(textColor)!@#&            usualText(Obj[name][\"x\"],Obj[name][\"y\"],name)!@#&end!@#& !@#& !@#&--  !@#&local function gui()!@#&            -- !@#&            term.setCursorBlink(false)!@#&            clearScreen(colors.white)!@#&            term.setTextColor(colors.black)!@#&     !@#&            -- !@#&            for j=1,#buttons do!@#&                        for i=1,#buttons[j] do!@#&                                    local xPos = i*2!@#&                                    local yPos = 1+j!@#&                                    usualText(xPos,yPos,buttons[j][i])!@#&                                    newObj(buttons[j][i],xPos,yPos)!@#&                        end!@#&            end!@#&     !@#&            --  !@#&            drawTab(colors.white,colors.black)!@#&end!@#& !@#&------------------------------C ------------------------------------!@#& !@#&if not term.isColor() then!@#&            error(\"This program requires an advanced computer.\")!@#&end!@#& !@#&--   !@#&clearScreen(colors.white)!@#&centerText(\"xy\",0,\"Program started.\",colors.lightGray,colors.white)!@#& !@#&-- !@#&local m = findPeripheral(\"monitor\")!@#&if m ~= nil then!@#&            m = peripheral.wrap(m)!@#&            if not m.isColor() then!@#&                        windows.error(\"This program works only with advanced monitor.\")!@#&                    do return end!@#&        end!@#&        m.setTextScale(1)!@#&        term.redirect(m)!@#&else!@#&            windows.error(\"This program requires advanced external monitor.\")!@#&        do return end!@#&end!@#& !@#&-- !@#&if fs.exists(\"System/CodeDoor.cfg\") then!@#&            password = configRead(\"System/CodeDoor.cfg\",\"password\")!@#&            redstoneSide = configRead(\"System/CodeDoor.cfg\",\"redstone side\")!@#&            redstoneSideOnWrongPassword = configRead(\"System/CodeDoor.cfg\",\"redstone side on wrong password\")!@#&            doorOpenTime = configRead(\"System/CodeDoor.cfg\",\"door open time\")!@#&            hidePassword = configRead(\"System/CodeDoor.cfg\",\"hide password\")!@#&else!@#&            configWrite(\"System/CodeDoor.cfg\",\"password\",password)!@#&            configWrite(\"System/CodeDoor.cfg\",\"redstone side\",redstoneSide)!@#&            configWrite(\"System/CodeDoor.cfg\",\"redstone side on wrong password\",redstoneSideOnWrongPassword)!@#&            configWrite(\"System/CodeDoor.cfg\",\"door open time\",doorOpenTime)!@#&            configWrite(\"System/CodeDoor.cfg\",\"hide password\",hidePassword)!@#&end!@#& !@#&-- !@#&gui()!@#& !@#&--  !@#&while true do!@#&            --    !@#&            rs.setOutput(redstoneSide,false)!@#&            rs.setOutput(redstoneSideOnWrongPassword,false)!@#&     !@#&            local event,side,x,y = os.pullEvent()!@#&            if event == \"monitor_touch\" then!@#&                        --    !@#&                        for key,val in pairs(Obj) do!@#&                                    --      !@#&                                    if x==Obj[key][\"x\"] and y==Obj[key][\"y\"] then!@#&                                                --  !@#&                                                drawButton(key,colors.white,colors.green)!@#&                                                sleep(buttonPressTime)!@#&                                                drawButton(key,colors.black,colors.white)!@#&                 !@#&                                                --,     -    !@#&                                                if key == \"C\" then!@#&                                                            inputCode = {}!@#&                                                            if mode == \"edit\" then!@#&                                                                        drawTab(colors.white,colors.orange)!@#&                                                            else!@#&                                                                        drawTab(colors.white,colors.black)!@#&                                                            end!@#&                     !@#&                                                elseif key == \"#\" then!@#&                                                            --       !@#&                                                            local inputPass = \"\"!@#&                                                            for i=1,#inputCode do!@#&                                                                        inputPass = inputPass..inputCode[i]!@#&                                                            end!@#&                     !@#&                                                            -- !@#&                                                            if mode == \"edit\" then!@#&                                                                        -- !@#&                                                                        password = inputPass!@#&                                                                        configWrite(\"System/CodeDoor.cfg\",\"password\",password)!@#&                                                                        inputCode = {}!@#&                                                                        term.setCursorPos(3,1)!@#&                                                                        term.setBackgroundColor(colors.orange)!@#&                                                                        term.clearLine()!@#&                                                                        term.setTextColor(colors.white)!@#&                                                                        term.write(\"Ok!\")!@#&                         !@#&                                                                        sleep(2)!@#&                         !@#&                                                                        drawTab(colors.white,colors.black)!@#&                                                                        mode = \"default\"!@#&                                                            else!@#&                                                                        --     !@#&                                                                        if inputPass == password then!@#&                                                                                    drawTab(colors.white,colors.green)!@#&                                                                                    rs.setOutput(redstoneSide,true)!@#&                                                                                    rs.setOutput(redstoneSideOnWrongPassword,false)!@#&                             !@#&                                                                                    --    !@#&                                                                                    changePasswordTimer = os.startTimer(tonumber(doorOpenTime))!@#&                                                                                    while true do!@#&                                                                                                local event2,side2,x2,y2 = os.pullEvent()!@#&                                                                                                --   ,    !@#&                                                                                                if event2 == \"timer\" then!@#&                                                                                                            if side2 == changePasswordTimer then!@#&                                                                                                                        break!@#&                                                                                                            end!@#&                                                                                                    --   \"\",     !@#&                                                                                                elseif event2 == \"monitor_touch\" then!@#&                                                                                                            if x2==Obj[\"C\"][\"x\"] and y2==Obj[\"C\"][\"y\"] then!@#&                                                                                                                        drawButton(\"C\",colors.white,colors.green)!@#&                                                                                                                        sleep(buttonPressTime)!@#&                                                                                                                        drawButton(\"C\",colors.black,colors.white)!@#&                                                                                                                        mode = \"edit\"!@#&                                                                                                                        os.queueEvent(\"timer\",changePasswordTimer)!@#&                                                                                                            end!@#&                                                                                                end    !@#&                                                                                    end!@#&                             !@#&                                                                                    --     !@#&                                                                                    inputCode = {}!@#&                                                                                    rs.setOutput(redstoneSide,false)!@#&                             !@#&                                                                                    --        !@#&                                                                                    if mode == \"edit\" then!@#&                                                                                                drawTab(colors.white,colors.orange)!@#&                                                                                    else!@#&                                                                                                drawTab(colors.white,colors.black)!@#&                                                                                    end!@#&                                                                            --   !@#&                                                                        else!@#&                                                                                    drawTab(colors.white,colors.red)!@#&                                                                                    rs.setOutput(redstoneSide,false)!@#&                                                                                    rs.setOutput(redstoneSideOnWrongPassword,true)!@#&                                                                                    sleep(3)!@#&                                                                                    rs.setOutput(redstoneSideOnWrongPassword,false)!@#&                                                                                    inputCode = {}!@#&                                                                                    drawTab(colors.white,colors.black)!@#&                                                                        end!@#&                                                            end!@#&                                                    --   !@#&                                                else!@#&                                                            if #inputCode < 5 then!@#&                                                                        inputCode[#inputCode+1] = key!@#&                                                                        if mode == \"edit\" then!@#&                                                                                    drawTab(colors.white,colors.orange)!@#&                                                                        else!@#&                                                                                    drawTab(colors.white,colors.black)!@#&                                                                        end!@#&                                                            end!@#&                                                end!@#&                                                --    !@#&                                                break!@#&                                    end!@#&                        end!@#&         !@#&                --   ENTER!@#&            elseif event == \"key\" and side == 28 then!@#&                        break!@#&            end!@#&end!@#& !@#&clearScreen(colors.black)!@#&term.setTextColor(colors.white)!@#& !@#&term.redirect(term.native())!@#& !@#&clearScreen(colors.black)!@#&term.setTextColor(colors.white)!@#&term.setCursorPos(1,1)",["OLD_NPaint"]="--[[!@#&                NPaintPro!@#&                By NitrogenFingers!@#&]]--!@#& !@#&--The screen size!@#&local w,h = term.getSize()!@#&--Whether or not the program is currently waiting on user input!@#&local inMenu = false!@#&--Whether or not a drop down menu is active!@#&local inDropDown = false!@#&--Whether or not animation tools are enabled (use -a to turn them on)!@#&local animated = false!@#&--Whether or not the text tools are enabled (use -t to turn them on)!@#&local textual = false!@#&--Whether or not \"blueprint\" display mode is on!@#&local blueprint = false!@#&--Whether or not the \"layer\" display is on!@#&local layerDisplay = false!@#&--Whether or not the interface is presently hidden!@#&local interfaceHidden = false!@#&--Whether or not the \"direction\" display is on!@#&local printDirection = false!@#&--The tool/mode npaintpro is currently in. Default is \"paint\"!@#&--For a list of modes, check out the help file!@#&local state = \"paint\"!@#&--Whether or not the program is presently running!@#&local isRunning = true!@#&--The rednet address of the 3D printer, if one has been attached!@#&local printer = nil!@#& !@#&--The list of every frame, containing every image in the picture/animation!@#&--Note: nfp files always have the picture at frame 1!@#&local frames = { }!@#&--How many frames are currently in the given animation.!@#&local frameCount = 1!@#&--The Colour Picker column!@#&local column = {}!@#&--The offset of visible colours in the picker column, if the screen cannot fit all 16!@#&local columnoffset = 0!@#&--The currently selected left and right colours!@#&local lSel,rSel = colours.white,nil!@#&--The amount of scrolling on the X and Y axis!@#&local sx,sy = 0,0!@#&--The alpha channel colour!@#&--Change this to change default canvas colour!@#&local alphaC = colours.black!@#&--The currently selected frame. Default is 1!@#&local sFrame = 1!@#&--The contents of the image buffer- contains contents, width and height!@#&local buffer = nil!@#&--The position, width and height of the selection rectangle!@#&local selectrect = nil!@#& !@#&--Whether or not text tools are enabled for this document!@#&local textEnabled = false!@#&--The X and Y positions of the text cursor!@#&local textCurX, textCurY = 1,1!@#& !@#&--The currently calculated required materials!@#&local requiredMaterials = {}!@#&--Whether or not required materials are being displayed in the pallette!@#&local requirementsDisplayed = false!@#&--A list of the rednet ID's all in-range printers located!@#&local printerList = { }!@#&--A list of the names of all in-range printers located. Same as the printerList in reference!@#&local printerNames = { }!@#&--The selected printer!@#&local selectedPrinter = 1!@#&--The X,Y,Z and facing of the printer!@#&local px,py,pz,pfx,pfz = 0,0,0,0,0!@#&--The form of layering used!@#&local layering = \"up\"!@#& !@#&--The animation state of the selection rectangle and image buffer!@#&local rectblink = 0!@#&--The ID for the timer!@#&local recttimer = nil!@#&--The radius of the brush tool!@#&local brushsize = 3!@#&--Whether or not \"record\" mode is activated (animation mode only)!@#&local record = false!@#&--The time between each frame when in play mode (animation mode only)!@#&local animtime = 0.3!@#& !@#&--The current \"cursor position\" in text mode!@#&local cursorTexX,cursorTexY = 1,1!@#& !@#&--A list of hexidecimal conversions from numbers to hex digits!@#&local hexnums = { [10] = \"a\", [11] = \"b\", [12] = \"c\", [13] = \"d\", [14] = \"e\" , [15] = \"f\" }!@#&--The NPaintPro logo (divine, isn't it?)!@#&local logo = {!@#&\"fcc              3   339\";!@#&\" fcc          9333    33\";!@#&\"  fcc        933 333  33\";!@#&\"   fcc       933  33  33\";!@#&\"    fcc      933   33 33\";!@#&\"     c88     333   93333\";!@#&\"     888     333    9333\";!@#&\"      333 3  333     939\";!@#&}!@#&--The Layer Up and Layer Forward printing icons!@#&local layerUpIcon = {!@#&        \"0000000\";!@#&        \"0088880\";!@#&        \"0888870\";!@#&        \"07777f0\";!@#&        \"0ffff00\";!@#&        \"0000000\";!@#&}!@#&local layerForwardIcon = {!@#&        \"0000000\";!@#&        \"000fff0\";!@#&        \"00777f0\";!@#&        \"0888700\";!@#&        \"0888000\";!@#&        \"0000000\";!@#&}!@#&--The available menu options in the ctrl menu!@#&local mChoices = {\"Save\",\"Exit\"}!@#&--The available modes from the dropdown menu- tables indicate submenus (include a name!)!@#&local ddModes = { { \"paint\", \"brush\", \"pippette\", \"flood\", \"move\", \"clear\", \"select\", name = \"painting\" }, { \"alpha to left\", \"alpha to right\", \"hide interface\", name = \"display\" }, \"help\", { \"print\", \"save\", \"exit\", name = \"file\" }, name = \"menu\" }!@#&--The available modes from the selection right-click menu!@#&local srModes = { \"cut\", \"copy\", \"paste\", \"clear\", \"hide\", name = \"selection\" }!@#&--The list of available help topics for each mode 127!@#&local helpTopics = {!@#&        [1] = {!@#&                name = \"Paint Mode\",!@#&                key = nil,!@#&                animonly = false,!@#&                textonly = false,!@#&                message = \"The default mode for NPaintPro, for painting pixels.\"!@#&                ..\" Controls here that are not overridden will apply for all other modes. Leaving a mode by selecting that mode \"!@#&                ..\" again will always send the user back to paint mode.\",!@#&                controls = {!@#&                        { \"Arrow keys\", \"Scroll the canvas\" },!@#&                        { \"Left Click\", \"Paint/select left colour\" },!@#&                        { \"Right Click\", \"Paint/select right colour\" },!@#&                        { \"Z Key\", \"Clear image on screen\" },!@#&                        { \"Tab Key\", \"Hide selection rectangle if visible\" },!@#&                        { \"Q Key\", \"Set alpha mask to left colour\" },!@#&                        { \"W Key\", \"Set alpha mask to right colour\" },!@#&                        { \"Number Keys\", \"Swich between frames 1-9\" },!@#&                        { \"</> keys\", \"Move to the next/last frame\" },!@#&                        { \"R Key\", \"Removes every frame after the current frame\"}!@#&                }!@#&        },!@#&        [2] = {!@#&                name = \"Brush Mode\",!@#&                key = \"b\",!@#&                animonly = false,!@#&                textonly = false,!@#&                message = \"Brush mode allows painting a circular area of variable diameter rather than a single pixel, working in \"..!@#&                \"the exact same way as paint mode in all other regards.\",!@#&                controls = {!@#&                        { \"Left Click\", \"Paints a brush blob with the left colour\" },!@#&                        { \"Right Click\", \"Paints a brush blob with the right colour\" },!@#&                        { \"Number Keys\", \"Changes the radius of the brush blob from 2-9\" }!@#&                }!@#&        },!@#&        [3] = {!@#&                name = \"Pippette Mode\",!@#&                key = \"p\",!@#&                animonly = false,!@#&                textonly = false,!@#&                message = \"Pippette mode allows the user to click the canvas and set the colour clicked to the left or right \"..!@#&                \"selected colour, for later painting.\",!@#&                controls = {!@#&                        { \"Left Click\", \"Sets clicked colour to the left selected colour\" },!@#&                        { \"Right Click\", \"Sets clicked colour to the right selected colour\" }!@#&                }!@#&        },!@#&        [4] = {!@#&                name = \"Move Mode\",!@#&                key = \"m\",!@#&                animonly = false,!@#&                textonly = false,!@#&                message = \"Mode mode allows the moving of the entire image on the screen. This is especially useful for justifying\"..!@#&                \" the image to the top-left for animations or game assets.\",!@#&                controls = {!@#&                        { \"Left/Right Click\", \"Moves top-left corner of image to selected square\" },!@#&                        { \"Arrow keys\", \"Moves image one pixel in any direction\" }!@#&                }!@#&        },!@#&        [5] = {!@#&                name = \"Flood Mode\",!@#&                key = \"f\",!@#&                animonly = false,!@#&                textonly = false,!@#&                message = \"Flood mode allows the changing of an area of a given colour to that of the selected colour. \"..!@#&                \"The tool uses a flood4 algorithm and will not fill diagonally. Transparency cannot be flood filled.\",!@#&                controls = {!@#&                        { \"Left Click\", \"Flood fills selected area to left colour\" },!@#&                        { \"Right Click\", \"Flood fills selected area to right colour\" }!@#&                }!@#&        },!@#&        [6] = {!@#&                name = \"Select Mode\",!@#&                key = \"s\",!@#&                animonly = false,!@#&                textonly = false,!@#&                message = \"Select mode allows the creation and use of the selection rectangle, to highlight specific areas on \"..!@#&                \"the screen and perform operations on the selected area of the image. The selection rectangle can contain an \"..!@#&                \"image on the clipboard- if it does, the image will flash inside the rectangle, and the rectangle edges will \"..!@#&                \"be light grey instead of dark grey.\",!@#&                controls = {!@#&                        { \"C Key\", \"Copy: Moves selection into the clipboard\" },!@#&                        { \"X Key\", \"Cut: Clears canvas under the rectangle, and moves it into the clipboard\" },!@#&                        { \"V Key\", \"Paste: Copys clipboard to the canvas\" },!@#&                        { \"Z Key\", \"Clears clipboard\" },!@#&                        { \"Left Click\", \"Moves top-left corner of rectangle to selected pixel\" },!@#&                        { \"Right Click\", \"Opens selection menu\" },!@#&                        { \"Arrow Keys\", \"Moves rectangle one pixel in any direction\" }!@#&                }!@#&        },!@#&        [7] = {!@#&                name = \"Corner Select Mode\",!@#&                key = nil,!@#&                animonly = false,!@#&                textonly = false,!@#&                message = \"If a selection rectangle isn't visible, this mode is selected automatically. It allows the \"..!@#&                \"defining of the corners of the rectangle- one the top-left and bottom-right corners have been defined, \"..!@#&                \"NPaintPro switches to selection mode. Note rectangle must be at least 2 pixels wide and high.\",!@#&                controls = {!@#&                        { \"Left/Right Click\", \"Defines a corner of the selection rectangle\" }!@#&                }!@#&        },!@#&        [8] = {!@#&                name = \"Play Mode\",!@#&                key = \"space\",!@#&                animonly = true,!@#&                textonly = false,!@#&                message = \"Play mode will loop through each frame in your animation at a constant rate. Editing tools are \"..!@#&                \"locked in this mode, and the coordinate display will turn green to indicate it is on.\",!@#&                controls = {!@#&                        { \"</> Keys\", \"Increases/Decreases speed of the animation\" },!@#&                        { \"Space Bar\", \"Returns to paint mode\" }!@#&                }!@#&        },!@#&        [9] = {!@#&                name = \"Record Mode\",!@#&                key = \"\\\\\",!@#&                animonly = true,!@#&                textonly = false,!@#&                message = \"Record mode is not a true mode, but influences how other modes work. Changes made that modify the \"..!@#&                \"canvas in record mode will affect ALL frames in the animation. The coordinates will turn red to indicate that \"..!@#&                \"record mode is on.\",!@#&                controls = {!@#&                        { \"\", \"Affects:\" },!@#&                        { \"- Paint Mode\", \"\" },!@#&                        { \"- Brush Mode\", \"\" },!@#&                        { \"- Cut and Paste in Select Mode\", \"\"},!@#&                        { \"- Move Mode\", \"\"}!@#&                }!@#&        },!@#&		[10] = {!@#&				name = \"Hide Interface\",!@#&				key = \"~\",!@#&				animonly = false,!@#&				textonly = false,!@#&				message = \"Hides the sidebar and colour picker so only the image is visible.\"..!@#&				\" The program can be started with the interface hidden using the -d command line option.\"..!@#&				\" When hidden, if a file is animated it will automatically go to play mode.\\n\"..!@#&				\"Note that all other input is locked until the display is revealed again in this\"..!@#&				\" mode.\",!@#&				controls = {!@#&                    { \"</> Keys\", \"Increases/Decreases speed of the animation\" },!@#&					{ \"~ Key\", \"Shows interface\"}!@#&				}!@#&		},!@#&        [11] = {!@#&                name = \"Help Mode\",!@#&                key = \"h\",!@#&                animonly = false,!@#&                textonly = false,!@#&                message = \"Displays this help screen. Clicking on options will display help on that topic. Clicking out of the screen\"..!@#&                \" will leave this mode.\",!@#&                controls = {!@#&                        { \"Left/Right Click\", \"Displays a topic/Leaves the mode\" }!@#&                }!@#&        },!@#&        [12] = {!@#&                name = \"File Mode\",!@#&                key = nil,!@#&                animonly = false,!@#&                textonly = false,!@#&                message = \"Clicking on the mode display at the bottom of the screen will open the options menu. Here you can\"..!@#&                \" activate all of the modes in the program with a simple mouse click. Pressing left control will open up the\"..!@#&                \" file menu automatically.\",!@#&                controls = {!@#&                        { \"leftCtrl\", \"Opens the file menu\" },!@#&                        { \"leftAlt\", \"Opens the paint menu\" }!@#&                }!@#&        },!@#&        [13] = {!@#&                name = \"Text Mode\",!@#&                key = \"t\",!@#&                animonly = false,!@#&                textonly = true,!@#&                message = \"In this mode, the user is able to type letters onto the document for display. The left colour \"..!@#&                \"pallette value determines what colour the text will be, and the right determines what colour the background \"..!@#&                \"will be (set either to nil to keep the same colours as already there).\",!@#&                controls = {!@#&                        { \"Backspace\", \"Deletes the character on the previous line\" },!@#&                        { \"Arrow Keys\", \"Moves the cursor in any direction\" },!@#&                        { \"Left Click\", \"Moves the cursor to beneath the mouse cursor\" }!@#&                }!@#&        },!@#&        [14] = {!@#&                name = \"Textpaint Mode\",!@#&                key = \"y\",!@#&                animonly = false,!@#&                textonly = true,!@#&                message = \"Allows the user to paint any text on screen to the desired colour with the mouse. If affects the text colour\"..!@#&                \" values rather than the background values, but operates identically to paint mode in all other regards.\",!@#&                controls = {!@#&                        { \"Left Click\", \"Paints the text with the left colour\" },!@#&                        { \"Right Click\", \"Paints the text with the right colour\" }!@#&                }!@#&        },!@#&        [15] = {!@#&                name = \"About NPaintPro\",!@#&                keys = nil,!@#&                animonly = false,!@#&                textonly = false,!@#&                message = \"NPaintPro: The feature-bloated paint program for SpeedOS.\",!@#&                controls = {!@#&                        { \"Testers:\", \" \"},!@#&                        { \" \", \"Faubiguy\"},!@#&                        { \" \", \"TheOriginalBIT\"}!@#&                }!@#&        }!@#&}!@#&--The \"bounds\" of the image- the first/last point on both axes where a pixel appears!@#&local toplim,botlim,leflim,riglim = nil,nil,nil,nil!@#&--The selected path!@#&local sPath = nil!@#&!@#&!@#&--Screen Size Parameters- decided dynamically further down the program!@#&--Whether or not the help screen is available!@#&local helpAvailable = true!@#&--Whether or not the main menu is available!@#&local mainAvailable = true!@#&--Whether or not selection box dropdowns are available!@#&local boxdropAvailable = true!@#&--Whether or not a manual file descriptor option is available (part of the title)!@#&local filemakerAvailable = true!@#& !@#&--[[  !@#&                        Section:  Helpers              !@#&]]--!@#& !@#&--[[Converts a colour parameter into a single-digit hex coordinate for the colour!@#&    Params: colour:int = The colour to be converted!@#&        Returns:string A string conversion of the colour!@#&]]--!@#&local function getHexOf(colour)!@#&        if not colour or not tonumber(colour) then!@#&                return \" \"!@#&        end!@#&        local value = math.log(colour)/math.log(2)!@#&        if value > 9 then!@#&                value = hexnums[value]!@#&        end!@#&        return value!@#&end!@#& !@#&--[[Converts a hex digit into a colour value!@#&        Params: hex:?string = the hex digit to be converted!@#&        Returns:string A colour value corresponding to the hex, or nil if the character is invalid!@#&]]--!@#&local function getColourOf(hex)!@#&        local value = tonumber(hex, 16)!@#&        if not value then return nil end!@#&        value = math.pow(2,value)!@#&        return value!@#&end!@#& !@#&--[[Finds the largest width and height of the text in a given menu. Should conform to the format!@#&	of all standard menus (number indexed values and a 'name' field).!@#&	This is done recursively. It's just easier that way.!@#&	Params: menu:table = the table being tested for the max width and height!@#&	Returns:number,number = the max width and height of the text or names of any menu or submenu.!@#&]]--!@#&local function findMaxWH(menu)!@#&	local wmax,hmax = #menu.name, #menu!@#&	for _,entry in pairs(menu) do!@#&		if type(entry) == \"table\" then!@#&			local nw,nh = findMaxWH(entry)!@#&			wmax = math.max(wmax,nw)!@#&			hmax = math.max(hmax,nh)!@#&		else!@#&			wmax = math.max(wmax,#entry)!@#&		end!@#&	end!@#&	return wmax,hmax!@#&end!@#& !@#&--[[Determines what services are available depending on the size of the screen. Certain features!@#&	may be disabled with screen real estate does not allow for it.!@#&	Params: none!@#&	Returns:nil!@#&]]--!@#&local function determineAvailableServices()!@#&	--Help files were designed to fit a 'standard' CC screen, of 51 x 19. The height of the screen!@#&	--needs to match the number of available options plus white space, but for consistency with!@#&	--the files themselves, a natural size of 51 is required for the screen width as well.!@#&	if w < 51 or h < #helpTopics+3 then helpAvailable = false end!@#&	if not helpAvailable then table.remove(ddModes,3) end!@#&	--These hard-coded values mirror the drawLogo values, with extra consideration for the !@#&	--additional menu options!@#&	if h < 14 or w < 24 then filemakerAvailable = false end!@#&	!@#&	--Menus can't cover the picker and need 2 spaces for branches. 4 whitespace on X total.!@#&	--Menus need a title and can't eclipse the footer. 2 whitespace on Y total.!@#&	local wmin,hmin = findMaxWH(ddModes)!@#&	if w < wmin+4 or h < hmin+2 then mainAvailable = false end!@#&	wmin,hmin = findMaxWH(srModes)!@#&	if w < wmin+4 or h < hmin+2 then boxdropAvailable = false end!@#&end!@#& !@#&--[[Finds the biggest and smallest bounds of the image- the outside points beyond which pixels do not appear!@#&        These values are assigned to the \"lim\" parameters for access by other methods!@#&        Params: forAllFrames:bool = True if all frames should be used to find bounds, otherwise false or nil!@#&        Returns:nil!@#&]]--!@#&local function updateImageLims(forAllFrames)!@#&        local f,l = sFrame,sFrame!@#&        if forAllFrames == true then f,l = 1,framecount end!@#&       !@#&        toplim,botlim,leflim,riglim = nil,nil,nil,nil!@#&        for locf = f,l do!@#&                for y,_ in pairs(frames[locf]) do!@#&                        if type(y) == \"number\" then!@#&                                for x,_ in pairs(frames[locf][y]) do!@#&                                        if frames[locf][y][x] ~= nil then!@#&                                                if leflim == nil or x < leflim then leflim = x end!@#&                                                if toplim == nil or y < toplim then toplim = y end!@#&                                                if riglim == nil or x > riglim then riglim = x end!@#&                                                if botlim == nil or y > botlim then botlim = y end!@#&                                        end!@#&                                end!@#&                        end!@#&                end!@#&        end!@#&       !@#&        --There is just... no easier way to do this. It's horrible, but necessary!@#&        if textEnabled then!@#&                for locf = f,l do!@#&                        for y,_ in pairs(frames[locf].text) do!@#&                                for x,_ in pairs(frames[locf].text[y]) do!@#&                                        if frames[locf].text[y][x] ~= nil then!@#&                                                if leflim == nil or x < leflim then leflim = x end!@#&                                                if toplim == nil or y < toplim then toplim = y end!@#&                                                if riglim == nil or x > riglim then riglim = x end!@#&                                                if botlim == nil or y > botlim then botlim = y end!@#&                                        end!@#&                                end!@#&                        end!@#&                        for y,_ in pairs(frames[locf].textcol) do!@#&                                for x,_ in pairs(frames[locf].textcol[y]) do!@#&                                        if frames[locf].textcol[y][x] ~= nil then!@#&                                                if leflim == nil or x < leflim then leflim = x end!@#&                                                if toplim == nil or y < toplim then toplim = y end!@#&                                                if riglim == nil or x > riglim then riglim = x end!@#&                                                if botlim == nil or y > botlim then botlim = y end!@#&                                        end!@#&                                end!@#&                        end!@#&                end!@#&        end!@#&end!@#& !@#&--[[Determines how much of each material is required for a print. Done each time printing is called.!@#&        Params: none!@#&        Returns:table A complete list of how much of each material is required.!@#&]]--!@#&function calculateMaterials()!@#&        updateImageLims(animated)!@#&        requiredMaterials = {}!@#&        for i=1,16 do!@#&                requiredMaterials[i] = 0!@#&        end!@#&       !@#&        if not toplim then return end!@#&       !@#&        for i=1,#frames do!@#&                for y = toplim, botlim do!@#&                        for x = leflim, riglim do!@#&                                if type(frames[i][y][x]) == \"number\" then!@#&                                        requiredMaterials[math.log10(frames[i][y][x])/math.log10(2) + 1] =!@#&                                                requiredMaterials[math.log10(frames[i][y][x])/math.log10(2) + 1] + 1!@#&                                end    !@#&                        end!@#&                end!@#&        end!@#&end!@#& !@#& !@#&--[[Updates the rectangle blink timer. Should be called anywhere events are captured, along with a timer capture.!@#&        Params: nil!@#&        Returns:nil!@#&]]--!@#&local function updateTimer(id)!@#&        if id == recttimer then!@#&                recttimer = os.startTimer(0.5)!@#&                rectblink = (rectblink % 2) + 1!@#&        end!@#&end!@#& !@#&--[[Constructs a message based on the state currently selected!@#&        Params: nil!@#&        Returns:string A message regarding the state of the application!@#&]]--!@#&local function getStateMessage()!@#&        local msg = \" \"..string.upper(string.sub(state, 1, 1))..string.sub(state, 2, #state)..\" mode\"!@#&        if state == \"brush\" then msg = msg..\", size=\"..brushsize end!@#&        return msg!@#&end!@#& !@#&--[[Calls the rednet_message event, but also looks for timer events to keep then!@#&        system timer ticking.!@#&        Params: timeout:number how long before the event times out!@#&        Returns:number the id of the sender!@#&                   :number the message send!@#&]]--!@#&local function rsTimeReceive(timeout)!@#&        local timerID!@#&        if timeout then timerID = os.startTimer(timeout) end!@#&       !@#&        local id,key,msg = nil,nil!@#&        while true do!@#&                id,key,msg = os.pullEvent()!@#&               !@#&                if id == \"timer\" then!@#&                        if key == timerID then return!@#&                        else updateTimer(key) end!@#&                end!@#&                if id == \"rednet_message\" then!@#&                        return key,msg!@#&                end!@#&        end!@#&end!@#& !@#&--[[Draws a picture, in paint table format on the screen!@#&        Params: image:table = the image to display!@#&                        xinit:number = the x position of the top-left corner of the image!@#&                        yinit:number = the y position of the top-left corner of the image!@#&                        alpha:number = the color to display for the alpha channel. Default is white.!@#&        Returns:nil!@#&]]--!@#&local function drawPictureTable(image, xinit, yinit, alpha)!@#&        if not alpha then alpha = 1 end!@#&        for y=1,#image do!@#&                for x=1,#image[y] do!@#&                        term.setCursorPos(xinit + x-1, yinit + y-1)!@#&                        local col = getColourOf(string.sub(image[y], x, x))!@#&                        if not col then col = alpha end!@#&                        term.setBackgroundColour(col)!@#&                        term.write(\" \")!@#&                end!@#&        end!@#&end!@#& !@#&--[[  !@#&                        Section: Loading  !@#&]]--!@#& !@#&--[[Loads a non-animted paint file into the program!@#&        Params: path:string = The path in which the file is located!@#&        Returns:nil!@#&]]--!@#&local function loadNFP(path)!@#&        sFrame = 1!@#&        frames[sFrame] = { }!@#&        if fs.exists(path) then!@#&                local file = io.open(path, \"r\" )!@#&                local sLine = file:read()!@#&                local num = 1!@#&                while sLine do!@#&                        table.insert(frames[sFrame], num, {})!@#&                        for i=1,#sLine do!@#&                                frames[sFrame][num][i] = getColourOf(string.sub(sLine,i,i))!@#&                        end!@#&                        num = num+1!@#&                        sLine = file:read()!@#&                end!@#&                file:close()!@#&        end!@#&end!@#& !@#&--[[Loads a text-paint file into the program!@#&        Params: path:string = The path in which the file is located!@#&        Returns:nil!@#&]]--!@#&local function loadNFT(path)!@#&        sFrame = 1!@#&        frames[sFrame] = { }!@#&        frames[sFrame].text = { }!@#&        frames[sFrame].textcol = { }!@#&       !@#&        if fs.exists(path) then!@#&                local file = io.open(path, \"r\")!@#&                local sLine = file:read()!@#&                local num = 1!@#&                while sLine do!@#&                        table.insert(frames[sFrame], num, {})!@#&                        table.insert(frames[sFrame].text, num, {})!@#&                        table.insert(frames[sFrame].textcol, num, {})!@#&                       !@#&                        --As we're no longer 1-1, we keep track of what index to write to!@#&                        local writeIndex = 1!@#&                        --Tells us if we've hit a 30 or 31 (BG and FG respectively)- next char specifies the curr colour!@#&                        local bgNext, fgNext = false, false!@#&                        --The current background and foreground colours!@#&                        local currBG, currFG = nil,nil!@#&                        term.setCursorPos(1,1)!@#&                        for i=1,#sLine do!@#&                                local nextChar = string.sub(sLine, i, i)!@#&                                if nextChar:byte() == 30 then!@#&                                        bgNext = true!@#&                                elseif nextChar:byte() == 31 then!@#&                                        fgNext = true!@#&                                elseif bgNext then!@#&                                        currBG = getColourOf(nextChar)!@#&                                        bgNext = false!@#&                                elseif fgNext then!@#&                                        currFG = getColourOf(nextChar)!@#&                                        fgNext = false!@#&                                else!@#&                                        if nextChar ~= \" \" and currFG == nil then!@#&                                                currFG = colours.white!@#&                                        end!@#&                                        frames[sFrame][num][writeIndex] = currBG!@#&                                        frames[sFrame].textcol[num][writeIndex] = currFG!@#&                                        frames[sFrame].text[num][writeIndex] = nextChar!@#&                                        writeIndex = writeIndex + 1!@#&                                end!@#&                        end!@#&                        num = num+1!@#&                        sLine = file:read()!@#&                end!@#&                file:close()!@#&        end!@#&end!@#& !@#&--[[Loads an animated paint file into the program!@#&        Params: path:string = The path in which the file is located!@#&        Returns:nil!@#&]]--!@#&local function loadNFA(path)!@#&        frames[sFrame] = { }!@#&        if fs.exists(path) then!@#&                local file = io.open(path, \"r\" )!@#&                local sLine = file:read()!@#&                local num = 1!@#&                while sLine do!@#&                        table.insert(frames[sFrame], num, {})!@#&                        if sLine == \"~\" then!@#&                                sFrame = sFrame + 1!@#&                                frames[sFrame] = { }!@#&                                num = 1!@#&                        else!@#&                                for i=1,#sLine do!@#&                                        frames[sFrame][num][i] = getColourOf(string.sub(sLine,i,i))!@#&                                end!@#&                                num = num+1!@#&                        end!@#&                        sLine = file:read()!@#&                end!@#&                file:close()!@#&        end!@#&        framecount = sFrame!@#&        sFrame = 1!@#&end!@#& !@#&--[[Saves a non-animated paint file to the specified path!@#&        Params: path:string = The path to save the file to!@#&        Returns:nil!@#&]]--!@#&local function saveNFP(path)!@#&        local sDir = string.sub(sPath, 1, #sPath - #fs.getName(sPath))!@#&        if not fs.exists(sDir) then!@#&                fs.makeDir(sDir)!@#&        end!@#& !@#&        local file = io.open(path, \"w\")!@#&        updateImageLims(false)!@#&        if not toplim then!@#&                file:close()!@#&                return!@#&        end!@#&        for y=1,botlim do!@#&                local line = \"\"!@#&                if frames[sFrame][y] then!@#&                        for x=1,riglim do!@#&                                line = line..getHexOf(frames[sFrame][y][x])!@#&                        end!@#&                end!@#&                file:write(line..\"\\n\")!@#&        end!@#&        file:close()!@#&end!@#& !@#&--[[Saves a text-paint file to the specified path!@#&        Params: path:string = The path to save the file to!@#&        Returns:nil!@#&]]--!@#&local function saveNFT(path)!@#&        local sDir = string.sub(sPath, 1, #sPath - #fs.getName(sPath))!@#&        if not fs.exists(sDir) then!@#&                fs.makeDir(sDir)!@#&        end!@#&       !@#&        local file = io.open(path, \"w\")!@#&        updateImageLims(false)!@#&        if not toplim then!@#&                file:close()!@#&                return!@#&        end!@#&        for y=1,botlim do!@#&                local line = \"\"!@#&                local currBG, currFG = nil,nil!@#&                for x=1,riglim do!@#&                        if frames[sFrame][y] and frames[sFrame][y][x] ~= currBG then!@#&                                line = line..string.char(30)..getHexOf(frames[sFrame][y][x])!@#&                                currBG = frames[sFrame][y][x]!@#&                        end!@#&                        if frames[sFrame].textcol[y] and frames[sFrame].textcol[y][x] ~= currFG then!@#&                                line = line..string.char(31)..getHexOf(frames[sFrame].textcol[y][x])!@#&                                currFG = frames[sFrame].textcol[y][x]!@#&                        end!@#&                        if frames[sFrame].text[y] then!@#&                                local char = frames[sFrame].text[y][x]!@#&                                if not char then char = \" \" end!@#&                                line = line..char!@#&                        end!@#&                end!@#&                file:write(line..\"\\n\")!@#&        end!@#&        file:close()!@#&end!@#& !@#&--[[Saves a animated paint file to the specified path!@#&        Params: path:string = The path to save the file to!@#&        Returns:nil!@#&]]--!@#&local function saveNFA(path)!@#&        local sDir = string.sub(sPath, 1, #sPath - #fs.getName(sPath))!@#&        if not fs.exists(sDir) then!@#&                fs.makeDir(sDir)!@#&        end!@#&       !@#&        local file = io.open(path, \"w\")!@#&        updateImageLims(true)!@#&        if not toplim then!@#&                file:close()!@#&                return!@#&        end!@#&        for i=1,#frames do!@#&                for y=1,botlim do!@#&                        local line = \"\"!@#&                        if frames[i][y] then!@#&                                for x=1,riglim do!@#&                                        line = line..getHexOf(frames[i][y][x])!@#&                                end!@#&                        end!@#&                        file:write(line..\"\\n\")!@#&                end!@#&                if i < #frames then file:write(\"~\\n\") end!@#&        end!@#&        file:close()!@#&end!@#&!@#&--[[Runs a special pre-program dialogue to determine the filename and filepath. Done if!@#&	there's room, and a file name hasn't been specified!@#&	Params: none!@#&	Returns:bool= true if file is created; false otherwise!@#&]]--!@#&local function runFileMaker()!@#&	local newFName = \"\"!@#&	local fileType = 1!@#&	if animated then fileType = 2!@#&	elseif textEnabled then fileType = 3 end!@#&	!@#&	local tlx,tly = math.floor(w/2 - #logo[1]/2), math.floor(h/2 + #logo/2 + 1)!@#&!@#&	--This is done on top of the logo, so it backpedals a bit.!@#&	term.setCursorPos(tlx, tly)!@#&	term.clearLine()!@#&	term.write(\"Name: \")!@#&	term.setCursorPos(tlx, tly + 1)!@#&	term.clearLine()!@#&	term.write(\"Filetype:   Sprite\")!@#&	term.setCursorPos(tlx + 12, tly + 2)!@#&	term.write(\"Animation\")!@#&	term.setCursorPos(tlx + 12, tly + 3)!@#&	term.write(\"Text\")!@#&	!@#&	while true do!@#&		term.setCursorPos(tlx + 6, tly)!@#&		term.setBackgroundColour(colours.lightGrey)!@#&		term.setTextColour(colours.grey)!@#&		term.write(newFName..string.rep(\" \", 15-#newFName))!@#&		term.setBackgroundColour(colours.white)!@#&		term.setTextColour(colours.black)!@#&		local extension = \".nfp\"!@#&		if fileType == 2 then extension = \".nfa\"!@#&		elseif fileType == 3 then extension = \".nft\" end!@#&		term.write(extension)!@#&		!@#&		term.setBackgroundColour(colours.lightGrey)!@#&		term.setTextColour(colours.grey)!@#&		for i=1,3 do!@#&			term.setCursorPos(tlx + 24, tly + i)!@#&			if i==fileType then term.write(\"X\")!@#&			else term.write(\" \") end!@#&		end!@#&		!@#&		local fPath = shell.resolve(newFName..extension)!@#&		term.setCursorPos(tlx, tly + 3)!@#&		local fileValid = true!@#&		if (fs.exists(fPath) and fs.isDir(fPath)) or newFName == \"\" then!@#&			term.setBackgroundColour(colours.white)!@#&			term.setTextColour(colours.red)!@#&			term.write(\"Invalid \")!@#&			fileValid = false!@#&		elseif fs.exists(fPath) then!@#&			term.setBackgroundColour(colours.grey)!@#&			term.setTextColour(colours.lightGrey)!@#&			term.write(\" Edit  \")!@#&		else!@#&			term.setBackgroundColour(colours.grey)!@#&			term.setTextColour(colours.lightGrey)!@#&			term.write(\" Create \")!@#&		end!@#&		!@#&		term.setTextColour(colours.grey)!@#&		term.setCursorPos(tlx + 6 + #newFName, tly)!@#&		term.setCursorBlink(true)!@#&		!@#&		local id,p1,p2,p3 = os.pullEvent()!@#&		if id == \"key\" then!@#&			if p1 == keys.backspace and #newFName > 0 then !@#&				newFName = string.sub(newFName, 1, #newFName-1)!@#&			elseif p1 == keys.enter and fileValid then!@#&				sPath = fPath!@#&				return true!@#&			end!@#&		elseif id == \"char\" and p1 ~= \".\" and p1 ~= \" \" and #newFName < 15 then!@#&			newFName = newFName..p1!@#&		elseif id == \"mouse_click\" then!@#&			--The option boxes. Man, hardcoding is ugly...!@#&			if p2 == tlx + 24 then!@#&				for i=1,3 do !@#&					if p3 == tly+i then fileType = i end !@#&				end!@#&			end!@#&			if p3 == tly + 3 and p2 >= tlx and p2 <= tlx + 8 and fileValid then!@#&				sPath = fPath!@#&				return true!@#&			end!@#&		end!@#&	end!@#&end!@#& !@#&--[[Initializes the program, by loading in the paint file. Called at the start of each program.!@#&        Params: none!@#&        Returns:nil!@#&]]--!@#&local function init()!@#&        if textEnabled then!@#&                loadNFT(sPath)!@#&                table.insert(ddModes, 2, { \"text\", \"textpaint\", name = \"text\"})!@#&        elseif animated then!@#&                loadNFA(sPath)!@#&                table.insert(ddModes, #ddModes, { \"record\", \"play\", name = \"anim\" })!@#&                table.insert(ddModes, #ddModes, { \"go to\", \"remove\", name = \"frames\"})!@#&                table.insert(ddModes[2], #ddModes[2], \"blueprint on\")!@#&                table.insert(ddModes[2], #ddModes[2], \"layers on\")!@#&        else!@#&                loadNFP(sPath)!@#&                table.insert(ddModes[2], #ddModes[2], \"blueprint on\")!@#&        end!@#&		!@#&        for i=0,15 do!@#&                table.insert(column, math.pow(2,i))!@#&        end!@#&end!@#& !@#&--[[  !@#&                        Section: Drawing  !@#&]]--!@#& !@#& !@#&--[[Draws the rather superflous logo. Takes about 1 second, before user is able to move to the!@#&        actual program.!@#&        Params: none!@#&        Returns:bool= true if the file select ran successfully; false otherwise.!@#&]]--!@#&local function drawLogo()!@#&        term.setBackgroundColour(colours.white)!@#&        term.clear()!@#&		if h >= 12 and w >= 24 then!@#&			drawPictureTable(logo, w/2 - #logo[1]/2, h/2 - #logo/2, colours.white)!@#&			term.setBackgroundColour(colours.white)!@#&			term.setTextColour(colours.black)!@#&			local msg = \"NPaintPro\"!@#&			term.setCursorPos(w/2 - #msg/2, h/2 + #logo/2 + 1)!@#&			term.write(msg)!@#&			msg = \"For SpeedOS\"!@#&			term.setCursorPos(w/2 - #msg/2, h/2 + #logo/2 + 2)!@#&			term.write(msg)!@#&        elseif w >= 15 then!@#&			local msg = \"NPaintPro\"!@#&			term.setCursorPos(math.ceil(w/2 - #msg/2), h/2)!@#&			term.setTextColour(colours.cyan)!@#&			term.write(msg)!@#&			msg = \"Ma3rX\"!@#&			term.setCursorPos(math.ceil(w/2 - #msg/2), h/2 + 1)!@#&			term.setTextColour(colours.black)!@#&			term.write(msg)!@#&		else!@#&			local msg = \"NPP\"!@#&			term.setCursorPos(math.ceil(w/2 - #msg/2), math.floor(h/2))!@#&			term.setTextColour(colours.cyan)!@#&			term.write(msg)!@#&			msg = \"By NF\"!@#&			term.setCursorPos(math.ceil(w/2 - #msg/2), math.ceil(h/2))!@#&			term.setTextColour(colours.black)!@#&			term.write(msg)!@#&		end!@#&        os.pullEvent()!@#&end!@#& !@#&--[[Clears the display to the alpha channel colour, draws the canvas, the image buffer and the selection!@#&        rectanlge if any of these things are present.!@#&        Params: none!@#&        Returns:nil!@#&]]--!@#&local function drawCanvas()!@#&        --We have to readjust the position of the canvas if we're printing!@#&        turtlechar = \"@\"!@#&        if state == \"active print\" then!@#&                if layering == \"up\" then!@#&                        if py >= 1 and py <= #frames then!@#&                                sFrame = py!@#&                        end!@#&                        if pz < sy then sy = pz!@#&                        elseif pz > sy + h - 1 then sy = pz + h - 1 end!@#&                        if px < sx then sx = px!@#&                        elseif px > sx + w - 2 then sx = px + w - 2 end!@#&                else!@#&                        if pz >= 1 and pz <= #frames then!@#&                                sFrame = pz!@#&                        end!@#&                       !@#&                        if py < sy then sy = py!@#&                        elseif py > sy + h - 1 then sy = py + h - 1 end!@#&                        if px < sx then sx = px!@#&                        elseif px > sx + w - 2 then sx = px + w - 2 end!@#&                end!@#&               !@#&                if pfx == 1 then turtlechar = \">\"!@#&                elseif pfx == -1 then turtlechar = \"<\"!@#&                elseif pfz == 1 then turtlechar = \"V\"!@#&                elseif pfz == -1 then turtlechar = \"^\"!@#&                end!@#&        end!@#& !@#&        --Picture next!@#&        local topLayer, botLayer!@#&        if layerDisplay then!@#&                topLayer = sFrame!@#&                botLayer = 1!@#&        else!@#&                topLayer,botLayer = sFrame,sFrame!@#&        end!@#&       !@#&	    --How far the canvas draws. If the interface is visible, it stops short of that.!@#&	    local wlim,hlim = 0,0!@#&		if not interfaceHidden then!@#&			wlim = 2!@#&			hlim = 1!@#&		end!@#&	   !@#&        for currframe = botLayer,topLayer,1 do!@#&                for y=sy+1,sy+h-hlim do!@#&                        if frames[currframe][y] then!@#&                                for x=sx+1,sx+w-wlim do!@#&                                        term.setCursorPos(x-sx,y-sy)!@#&                                        if frames[currframe][y][x] then!@#&                                                term.setBackgroundColour(frames[currframe][y][x])!@#&                                                if textEnabled and frames[currframe].textcol[y][x] and frames[currframe].text[y][x] then!@#&                                                        term.setTextColour(frames[currframe].textcol[y][x])!@#&                                                        term.write(frames[currframe].text[y][x])!@#&                                                else!@#&                                                        term.write(\" \")!@#&                                                end!@#&                                        else!@#&                                                tileExists = false!@#&                                                for i=currframe-1,botLayer,-1 do!@#&                                                        if frames[i][y][x] then!@#&                                                                tileExists = true!@#&                                                                break!@#&                                                        end!@#&                                                end!@#&                                               !@#&                                                if not tileExists then!@#&                                                        if blueprint then!@#&                                                                term.setBackgroundColour(colours.blue)!@#&                                                                term.setTextColour(colours.white)!@#&                                                                if x == sx+1 and y % 4 == 1 then!@#&                                                                        term.write(\"\"..((y/4) % 10))!@#&                                                                elseif y == sy + 1 and x % 4 == 1 then!@#&                                                                        term.write(\"\"..((x/4) % 10))!@#&                                                                elseif x % 2 == 1 and y % 2 == 1 then!@#&                                                                        term.write(\"+\")!@#&                                                                elseif x % 2 == 1 then!@#&                                                                        term.write(\"|\")!@#&                                                                elseif y % 2 == 1 then!@#&                                                                        term.write(\"-\")!@#&                                                                else!@#&                                                                        term.write(\" \")!@#&                                                                end!@#&                                                        else!@#&                                                                term.setBackgroundColour(alphaC)!@#&                                                                if textEnabled and frames[currframe].textcol[y][x] and frames[currframe].text[y][x] then!@#&                                                                        term.setTextColour(frames[currframe].textcol[y][x])!@#&                                                                        term.write(frames[currframe].text[y][x])!@#&                                                                else!@#&                                                                        term.write(\" \")!@#&                                                                end!@#&                                                        end!@#&                                                end!@#&                                        end!@#&                                end!@#&                        else!@#&                                for x=sx+1,sx+w-wlim do!@#&                                        term.setCursorPos(x-sx,y-sy)!@#&                                       !@#&                                        tileExists = false!@#&                                        for i=currframe-1,botLayer,-1 do!@#&                                                if frames[i][y] and frames[i][y][x] then!@#&                                                        tileExists = true!@#&                                                        break!@#&                                                end!@#&                                        end!@#&                                       !@#&                                        if not tileExists then!@#&                                                if blueprint then!@#&                                                        term.setBackgroundColour(colours.blue)!@#&                                                        term.setTextColour(colours.white)!@#&                                                        if x == sx+1 and y % 4 == 1 then!@#&                                                                term.write(\"\"..((y/4) % 10))!@#&                                                        elseif y == sy + 1 and x % 4 == 1 then!@#&                                                                term.write(\"\"..((x/4) % 10))!@#&                                                        elseif x % 2 == 1 and y % 2 == 1 then!@#&                                                                term.write(\"+\")!@#&                                                        elseif x % 2 == 1 then!@#&                                                                term.write(\"|\")!@#&                                                        elseif y % 2 == 1 then!@#&                                                                term.write(\"-\")!@#&                                                        else!@#&                                                                term.write(\" \")!@#&                                                        end!@#&                                                else!@#&                                                        term.setBackgroundColour(alphaC)!@#&                                                        term.write(\" \")!@#&                                                end!@#&                                        end!@#&                                end!@#&                        end!@#&                end!@#&        end!@#&       !@#&        --Then the printer, if he's on!@#&        if state == \"active print\" then!@#&                local bgColour = alphaC!@#&                if layering == \"up\" then!@#&                        term.setCursorPos(px-sx,pz-sy)!@#&                        if frames[sFrame] and frames[sFrame][pz-sy] and frames[sFrame][pz-sy][px-sx] then!@#&                                bgColour = frames[sFrame][pz-sy][px-sx]!@#&                        elseif blueprint then bgColour = colours.blue end!@#&                else!@#&                        term.setCursorPos(px-sx,py-sy)!@#&                        if frames[sFrame] and frames[sFrame][py-sy] and frames[sFrame][py-sy][px-sx] then!@#&                                bgColour = frames[sFrame][py-sy][px-sx]!@#&                        elseif blueprint then bgColour = colours.blue end!@#&                end!@#&               !@#&                term.setBackgroundColour(bgColour)!@#&                if bgColour == colours.black then term.setTextColour(colours.white)!@#&                else term.setTextColour(colours.black) end!@#&               !@#&                term.write(turtlechar)!@#&        end!@#&       !@#&        --Then the buffer!@#&        if selectrect then!@#&                if buffer and rectblink == 1 then!@#&                for y=selectrect.y1, math.min(selectrect.y2, selectrect.y1 + buffer.height-1) do!@#&                        for x=selectrect.x1, math.min(selectrect.x2, selectrect.x1 + buffer.width-1) do!@#&                                if buffer.contents[y-selectrect.y1+1][x-selectrect.x1+1] then!@#&                                        term.setCursorPos(x+sx,y+sy)!@#&                                        term.setBackgroundColour(buffer.contents[y-selectrect.y1+1][x-selectrect.x1+1])!@#&                                        term.write(\" \")!@#&                                end!@#&                        end!@#&                end!@#&                end!@#&       !@#&                --This draws the \"selection\" box!@#&                local add = nil!@#&                if buffer then!@#&                        term.setBackgroundColour(colours.lightGrey)!@#&                else!@#&                        term.setBackgroundColour(colours.grey)!@#&                end!@#&                for i=selectrect.x1, selectrect.x2 do!@#&                        add = (i + selectrect.y1 + rectblink) % 2 == 0!@#&                        term.setCursorPos(i-sx,selectrect.y1-sy)!@#&                        if add then term.write(\" \") end!@#&                        add = (i + selectrect.y2 + rectblink) % 2 == 0!@#&                        term.setCursorPos(i-sx,selectrect.y2-sy)!@#&                        if add then term.write(\" \") end!@#&                end!@#&                for i=selectrect.y1 + 1, selectrect.y2 - 1 do!@#&                        add = (i + selectrect.x1 + rectblink) % 2 == 0!@#&                        term.setCursorPos(selectrect.x1-sx,i-sy)!@#&                        if add then term.write(\" \") end!@#&                        add = (i + selectrect.x2 + rectblink) % 2 == 0!@#&                        term.setCursorPos(selectrect.x2-sx,i-sy)!@#&                        if add then term.write(\" \") end!@#&                end!@#&        end!@#&end!@#& !@#&--[[Draws the colour picker on the right side of the screen, the colour pallette and the footer with any!@#&        messages currently being displayed!@#&        Params: none!@#&        Returns:nil!@#&]]--!@#&local function drawInterface()!@#&        --Picker!@#&		local coffset,ioffset = 0,0!@#&		local maxcsize = h-2!@#&		if h < #column + 2 then!@#&			maxcsize = h-4!@#&			coffset = columnoffset!@#&			ioffset = 1!@#&			term.setBackgroundColour(colours.lightGrey)!@#&			term.setTextColour(colours.grey)!@#&			term.setCursorPos(w-1,1)!@#&			term.write(\"^^\")!@#&			term.setCursorPos(w-1,h-2)!@#&			term.write(\"VV\")!@#&		end!@#&        for i=1,math.min(#column+1,maxcsize) do!@#&			term.setCursorPos(w-1, i + ioffset)!@#&			local ci = i+coffset!@#&			if ci == #column+1 then!@#&				term.setBackgroundColour(colours.black)!@#&				term.setTextColour(colours.red)!@#&				term.write(\"XX\")!@#&			elseif state == \"print\" then!@#&				term.setBackgroundColour(column[ci])!@#&				if column[ci] == colours.black then!@#&					term.setTextColour(colours.white)!@#&				else term.setTextColour(colours.black) end!@#&				!@#&				if requirementsDisplayed then!@#&						if requiredMaterials[i] < 10 then term.write(\" \") end!@#&						term.setCursorPos(w-#tostring(requiredMaterials[i])+1, i)!@#&						term.write(requiredMaterials[i])!@#&				else!@#&						if i+coffset < 10 then term.write(\" \") end!@#&						term.write(i+coffset)!@#&				end!@#&			else!@#&				term.setBackgroundColour(column[ci])!@#&				term.write(\"  \")!@#&			end!@#&        end!@#&		--Filling the whitespace with... 'greyspace' *shudder*!@#&		if h > #column+3 then!@#&			term.setTextColour(colours.grey)!@#&			term.setBackgroundColour(colours.lightGrey)!@#&			for y=#column+2,h-2 do!@#&				term.setCursorPos(w-1,y)!@#&				term.write(\"| \")!@#&			end!@#&		end!@#&        --Pallette!@#&        term.setCursorPos(w-1,h-1)!@#&        if not lSel then!@#&                term.setBackgroundColour(colours.black)!@#&                term.setTextColour(colours.red)!@#&                term.write(\"X\")!@#&        else!@#&                term.setBackgroundColour(lSel)!@#&                term.setTextColour(lSel)!@#&                term.write(\" \")!@#&        end!@#&        if not rSel then!@#&                term.setBackgroundColour(colours.black)!@#&                term.setTextColour(colours.red)!@#&                term.write(\"X\")!@#&        else!@#&                term.setBackgroundColour(rSel)!@#&                term.setTextColour(rSel)!@#&                term.write(\" \")!@#&        end!@#&        --Footer!@#&        if inMenu then return end!@#&       !@#&        term.setCursorPos(1, h)!@#&        term.setBackgroundColour(colours.lightGrey)!@#&        term.setTextColour(colours.grey)!@#&        term.clearLine()!@#&		if mainAvailable then!@#&			if inDropDown then!@#&					term.write(string.rep(\" \", #ddModes.name + 2))!@#&			else!@#&					term.setBackgroundColour(colours.grey)!@#&					term.setTextColour(colours.lightGrey)!@#&					term.write(ddModes.name..\"  \")!@#&			end!@#&		end!@#&        term.setBackgroundColour(colours.lightGrey)!@#&        term.setTextColour(colours.grey)!@#&        term.write(getStateMessage())!@#&       !@#&        local coords=\"X:\"..sx..\" Y:\"..sy!@#&        if animated then coords = coords..\" Frame:\"..sFrame..\"/\"..framecount..\"   \" end!@#&        term.setCursorPos(w-#coords+1,h)!@#&        if state == \"play\" then term.setBackgroundColour(colours.lime)!@#&        elseif record then term.setBackgroundColour(colours.red) end!@#&        term.write(coords)!@#&       !@#&        if animated then!@#&                term.setCursorPos(w-1,h)!@#&                term.setBackgroundColour(colours.grey)!@#&                term.setTextColour(colours.lightGrey)!@#&                term.write(\"<>\")!@#&        end!@#&end!@#& !@#&--[[Runs an interface where users can select topics of help. Will return once the user quits the help screen.!@#&        Params: none!@#&        Returns:nil!@#&]]--!@#&local function drawHelpScreen()!@#&        local selectedHelp = nil!@#&        while true do!@#&                term.setBackgroundColour(colours.lightGrey)!@#&                term.clear()!@#&                if not selectedHelp then!@#&                        term.setCursorPos(4, 1)!@#&                        term.setTextColour(colours.brown)!@#&                        term.write(\"Available modes (click for info):\")!@#&                        for i=1,#helpTopics do!@#&                                term.setCursorPos(2, 2 + i)!@#&                                term.setTextColour(colours.black)!@#&                                term.write(helpTopics[i].name)!@#&                                if helpTopics[i].key then!@#&                                        term.setTextColour(colours.red)!@#&                                        term.write(\" (\"..helpTopics[i].key..\")\")!@#&                                end!@#&                        end!@#&                        term.setCursorPos(4,h)!@#&                        term.setTextColour(colours.black)!@#&                        term.write(\"Press any key to exit\")!@#&                else!@#&                        term.setCursorPos(4,1)!@#&                        term.setTextColour(colours.brown)!@#&                        term.write(helpTopics[selectedHelp].name)!@#&                        if helpTopics[selectedHelp].key then!@#&                                term.setTextColour(colours.red)!@#&                                term.write(\" (\"..helpTopics[selectedHelp].key..\")\")!@#&                        end!@#&                        term.setCursorPos(1,3)!@#&                        term.setTextColour(colours.black)!@#&                        print(helpTopics[selectedHelp].message..\"\\n\")!@#&                        for i=1,#helpTopics[selectedHelp].controls do!@#&                                term.setTextColour(colours.brown)!@#&                                term.write(helpTopics[selectedHelp].controls[i][1]..\" \")!@#&                                term.setTextColour(colours.black)!@#&                                print(helpTopics[selectedHelp].controls[i][2])!@#&                        end!@#&                end!@#&               !@#&                local id,p1,p2,p3 = os.pullEvent()!@#&               !@#&                if id == \"timer\" then updateTimer(p1)!@#&                elseif id == \"key\" then!@#&                        if selectedHelp then selectedHelp = nil!@#&                        else break end!@#&                elseif id == \"mouse_click\" then!@#&                        if not selectedHelp then!@#&                                if p3 >=3 and p3 <= 2+#helpTopics then!@#&                                        selectedHelp = p3-2!@#&                                else break end!@#&                        else!@#&                                selectedHelp = nil!@#&                        end!@#&                end!@#&        end!@#&end!@#& !@#&--[[Draws a message in the footer bar. A helper for DrawInterface, but can be called for custom messages, if the!@#&        inMenu paramter is set to true while this is being done (remember to set it back when done!)!@#&        Params: message:string = The message to be drawn!@#&        Returns:nil!@#&]]--!@#&local function drawMessage(message)!@#&        term.setCursorPos(1,h)!@#&        term.setBackgroundColour(colours.lightGrey)!@#&        term.setTextColour(colours.grey)!@#&        term.clearLine()!@#&        term.write(message)!@#&end!@#& !@#&--[[!@#&                        Section: Generic Interfaces!@#&]]--!@#& !@#& !@#&--[[One of my generic text printing methods, printing a message at a specified position with width and offset.!@#&        No colour materials included.!@#&        Params: msg:string = The message to print off-center!@#&                        height:number = The starting height of the message!@#&                        width:number = The limit as to how many characters long each line may be!@#&                        offset:number = The starting width offset of the message!@#&        Returns:number the number of lines used in printing the message!@#&]]--!@#&local function wprintOffCenter(msg, height, width, offset)!@#&        local inc = 0!@#&        local ops = 1!@#&        while #msg - ops > width do!@#&                local nextspace = 0!@#&                while string.find(msg, \" \", ops + nextspace) and!@#&                                string.find(msg, \" \", ops + nextspace) - ops < width do!@#&                        nextspace = string.find(msg, \" \", nextspace + ops) + 1 - ops!@#&                end!@#&                local ox,oy = term.getCursorPos()!@#&                term.setCursorPos(width/2 - (nextspace)/2 + offset, height + inc)!@#&                inc = inc + 1!@#&                term.write(string.sub(msg, ops, nextspace + ops - 1))!@#&                ops = ops + nextspace!@#&        end!@#&        term.setCursorPos(width/2 - #string.sub(msg, ops)/2 + offset, height + inc)!@#&        term.write(string.sub(msg, ops))!@#&       !@#&        return inc + 1!@#&end!@#& !@#&--[[Draws a message that must be clicked on or a key struck to be cleared. No options, so used for displaying!@#&        generic information.!@#&        Params: ctitle:string = The title of the confirm dialogue!@#&                        msg:string = The message displayed in the dialogue!@#&        Returns:nil!@#&]]--!@#&local function displayConfirmDialogue(ctitle, msg)!@#&        local dialogoffset = 8!@#&        --We actually print twice- once to get the lines, second time to print proper. Easier this way.!@#&        local lines = wprintOffCenter(msg, 5, w - (dialogoffset+2) * 2, dialogoffset + 2)!@#&       !@#&        term.setCursorPos(dialogoffset, 3)!@#&        term.setBackgroundColour(colours.grey)!@#&        term.setTextColour(colours.lightGrey)!@#&        term.write(string.rep(\" \", w - dialogoffset * 2))!@#&        term.setCursorPos(dialogoffset + (w - dialogoffset * 2)/2 - #ctitle/2, 3)!@#&        term.write(ctitle)!@#&        term.setTextColour(colours.grey)!@#&        term.setBackgroundColour(colours.lightGrey)!@#&        term.setCursorPos(dialogoffset, 4)!@#&        term.write(string.rep(\" \", w - dialogoffset * 2))!@#&        for i=5,5+lines do!@#&                term.setCursorPos(dialogoffset, i)!@#&                term.write(\" \"..string.rep(\" \", w - (dialogoffset) * 2 - 2)..\" \")!@#&        end!@#&        wprintOffCenter(msg, 5, w - (dialogoffset+2) * 2, dialogoffset + 2)!@#&       !@#&        --In the event of a message, the player hits anything to continue!@#&        while true do!@#&                local id,key = os.pullEvent()!@#&                if id == \"timer\" then updateTimer(key);!@#&                elseif id == \"key\" or id == \"mouse_click\" or id == \"mouse_drag\" then break end!@#&        end!@#&end!@#& !@#&--[[Produces a nice dropdown menu based on a table of strings. Depending on the position, this will auto-adjust the position!@#&        of the menu drawn, and allows nesting of menus and sub menus. Clicking anywhere outside the menu will cancel and return nothing!@#&        Params: x:int = the x position the menu should be displayed at!@#&                        y:int = the y position the menu should be displayed at!@#&                        options:table = the list of options available to the user, as strings or submenus (tables of strings, with a name parameter)!@#&        Returns:string the selected menu option.!@#&]]--!@#&local function displayDropDown(x, y, options)!@#&        inDropDown = true!@#&        --Figures out the dimensions of our thing!@#&        local longestX = #options.name!@#&        for i=1,#options do!@#&                local currVal = options[i]!@#&                if type(currVal) == \"table\" then currVal = currVal.name end!@#&               !@#&                longestX = math.max(longestX, #currVal)!@#&        end!@#&        local xOffset = math.max(0, longestX - ((w-2) - x) + 1)!@#&        local yOffset = math.max(0, #options - ((h-1) - y))!@#&       !@#&        local clickTimes = 0!@#&        local tid = nil!@#&        local selection = nil!@#&        while clickTimes < 2 do!@#&                drawCanvas()!@#&                drawInterface()!@#&               !@#&                term.setCursorPos(x-xOffset,y-yOffset)!@#&                term.setBackgroundColour(colours.grey)!@#&                term.setTextColour(colours.lightGrey)!@#&                term.write(options.name..string.rep(\" \", longestX-#options.name + 2))!@#&       !@#&                for i=1,#options do!@#&                        term.setCursorPos(x-xOffset, y-yOffset+i)!@#&                        if i==selection and clickTimes % 2 == 0 then!@#&                                term.setBackgroundColour(colours.grey)!@#&                                term.setTextColour(colours.lightGrey)!@#&                        else!@#&                                term.setBackgroundColour(colours.lightGrey)!@#&                                term.setTextColour(colours.grey)!@#&                        end!@#&                        local currVal = options[i]!@#&                        if type(currVal) == \"table\" then!@#&                                term.write(currVal.name..string.rep(\" \", longestX-#currVal.name + 1))!@#&                                term.setBackgroundColour(colours.grey)!@#&                                term.setTextColour(colours.lightGrey)!@#&                                term.write(\">\")!@#&                        else!@#&                                term.write(currVal..string.rep(\" \", longestX-#currVal + 2))!@#&                        end!@#&                end!@#&               !@#&                local id, p1, p2, p3 = os.pullEvent()!@#&                if id == \"timer\" then!@#&                        if p1 == tid then!@#&                                clickTimes = clickTimes + 1!@#&                                if clickTimes > 2 then!@#&                                        break!@#&                                else!@#&                                        tid = os.startTimer(0.1)!@#&                                end!@#&                        else!@#&                                updateTimer(p1)!@#&                                drawCanvas()!@#&                                drawInterface()!@#&                        end!@#&                elseif id == \"mouse_click\" then!@#&                        if p2 >=x-xOffset and p2 <= x-xOffset + longestX + 1 and p3 >= y-yOffset+1 and p3 <= y-yOffset+#options then!@#&                                selection = p3-(y-yOffset)!@#&                                tid = os.startTimer(0.1)!@#&                        else!@#&                                selection = \"\"!@#&                                break!@#&                        end!@#&                end!@#&        end!@#&       !@#&        if type(selection) == \"number\" then!@#&                selection = options[selection]!@#&        end!@#&       !@#&        if type(selection) == \"string\" then!@#&                inDropDown = false!@#&                return selection!@#&        elseif type(selection) == \"table\" then!@#&                return displayDropDown(x, y, selection)!@#&        end!@#&end!@#& !@#&--[[A custom io.read() function with a few differences- it limits the number of characters being printed,!@#&        waits a 1/100th of a second so any keys still in the event library are removed before input is read and!@#&        the timer for the selectionrectangle is continuously updated during the process.!@#&        Params: lim:int = the number of characters input is allowed!@#&        Returns:string the inputted string, trimmed of leading and tailing whitespace!@#&]]--!@#&local function readInput(lim)!@#&        term.setCursorBlink(true)!@#& !@#&        local inputString = \"\"!@#&        if not lim or type(lim) ~= \"number\" or lim < 1 then lim = w - ox end!@#&        local ox,oy = term.getCursorPos()!@#&        --We only get input from the footer, so this is safe. Change if recycling!@#&        term.setBackgroundColour(colours.lightGrey)!@#&        term.setTextColour(colours.grey)!@#&        term.write(string.rep(\" \", lim))!@#&        term.setCursorPos(ox, oy)!@#&        --As events queue immediately, we may get an unwanted key... this will solve that problem!@#&        local inputTimer = os.startTimer(0.01)!@#&        local keysAllowed = false!@#&       !@#&        while true do!@#&                local id,key = os.pullEvent()!@#&               !@#&                if keysAllowed then!@#&                        if id == \"key\" and key == 14 and #inputString > 0 then!@#&                                inputString = string.sub(inputString, 1, #inputString-1)!@#&                                term.setCursorPos(ox + #inputString,oy)!@#&                                term.write(\" \")!@#&                        elseif id == \"key\" and key == 28 and inputString ~= string.rep(\" \", #inputString) then!@#&                                break!@#&                        elseif id == \"key\" and key == keys.leftCtrl then!@#&                                return \"\"!@#&                        elseif id == \"char\" and #inputString < lim then!@#&                                inputString = inputString..key!@#&                        end!@#&                end!@#&               !@#&                if id == \"timer\" then!@#&                        if key == inputTimer then!@#&                                keysAllowed = true!@#&                        else!@#&                                updateTimer(key)!@#&                                drawCanvas()!@#&                                drawInterface()!@#&                                term.setBackgroundColour(colours.lightGrey)!@#&                                term.setTextColour(colours.grey)!@#&                        end!@#&                end!@#&                term.setCursorPos(ox,oy)!@#&                term.write(inputString)!@#&                term.setCursorPos(ox + #inputString, oy)!@#&        end!@#&       !@#&        while string.sub(inputString, 1, 1) == \" \" do!@#&                inputString = string.sub(inputString, 2, #inputString)!@#&        end!@#&        while string.sub(inputString, #inputString, #inputString) == \" \" do!@#&                inputString = string.sub(inputString, 1, #inputString-1)!@#&        end!@#&        term.setCursorBlink(false)!@#&       !@#&        return inputString!@#&end!@#& !@#&--[[  !@#&                        Section: Image tools!@#&]]--!@#& !@#& !@#&--[[Copies all pixels beneath the selection rectangle into the image buffer. Empty buffers are converted to nil.!@#&        Params: removeImage:bool = true if the image is to be erased after copying, false otherwise!@#&        Returns:nil!@#&]]--!@#&local function copyToBuffer(removeImage)!@#&        buffer = { width = selectrect.x2 - selectrect.x1 + 1, height = selectrect.y2 - selectrect.y1 + 1, contents = { } }!@#&       !@#&        local containsSomething = false!@#&        for y=1,buffer.height do!@#&                buffer.contents[y] = { }!@#&                local f,l = sFrame,sFrame!@#&                if record then f,l = 1, framecount end!@#&               !@#&                for fra = f,l do!@#&                        if frames[fra][selectrect.y1 + y - 1] then!@#&                                for x=1,buffer.width do!@#&                                        buffer.contents[y][x] = frames[sFrame][selectrect.y1 + y - 1][selectrect.x1 + x - 1]!@#&                                        if removeImage then frames[fra][selectrect.y1 + y - 1][selectrect.x1 + x - 1] = nil end!@#&                                        if buffer.contents[y][x] then containsSomething = true end!@#&                                end!@#&                        end!@#&                end!@#&        end!@#&        --I don't classify an empty buffer as a real buffer- confusing to the user.!@#&        if not containsSomething then buffer = nil end!@#&end!@#& !@#&--[[Replaces all pixels under the selection rectangle with the image buffer (or what can be seen of it). Record-dependent.!@#&        Params: removeBuffer:bool = true if the buffer is to be emptied after copying, false otherwise!@#&        Returns:nil!@#&]]--!@#&local function copyFromBuffer(removeBuffer)!@#&        if not buffer then return end!@#& !@#&        for y = 1, math.min(buffer.height,selectrect.y2-selectrect.y1+1) do!@#&                local f,l = sFrame, sFrame!@#&                if record then f,l = 1, framecount end!@#&               !@#&                for fra = f,l do!@#&                        if not frames[fra][selectrect.y1+y-1] then frames[fra][selectrect.y1+y-1] = { } end!@#&                        for x = 1, math.min(buffer.width,selectrect.x2-selectrect.x1+1) do!@#&                                frames[fra][selectrect.y1+y-1][selectrect.x1+x-1] = buffer.contents[y][x]!@#&                        end!@#&                end!@#&        end!@#&       !@#&        if removeBuffer then buffer = nil end!@#&end!@#& !@#&--[[Moves the entire image (or entire animation) to the specified coordinates. Record-dependent.!@#&        Params: newx:int = the X coordinate to move the image to!@#&                        newy:int = the Y coordinate to move the image to!@#&        Returns:nil!@#&]]--!@#&local function moveImage(newx,newy)!@#&        if not leflim or not toplim then return end!@#&        if newx <=0 or newy <=0 then return end!@#&        local f,l = sFrame,sFrame!@#&        if record then f,l = 1,framecount end!@#&       !@#&        for i=f,l do!@#&                local newlines = { }!@#&                for y=toplim,botlim do!@#&                        local line = frames[i][y]!@#&                        if line then!@#&                                newlines[y-toplim+newy] = { }!@#&                                for x,char in pairs(line) do!@#&                                        newlines[y-toplim+newy][x-leflim+newx] = char!@#&                                end!@#&                        end!@#&                end!@#&                --Exceptions that allow us to move the text as well!@#&                if textEnabled then!@#&                        newlines.text = { }!@#&                        for y=toplim,botlim do!@#&                                local line = frames[i].text[y]!@#&                                if line then!@#&                                        newlines.text[y-toplim+newy] = { }!@#&                                        for x,char in pairs(line) do!@#&                                                newlines.text[y-toplim+newy][x-leflim+newx] = char!@#&                                        end!@#&                                end!@#&                        end!@#&                       !@#&                        newlines.textcol = { }!@#&                        for y=toplim,botlim do!@#&                                local line = frames[i].textcol[y]!@#&                                if line then!@#&                                        newlines.textcol[y-toplim+newy] = { }!@#&                                        for x,char in pairs(line) do!@#&                                                newlines.textcol[y-toplim+newy][x-leflim+newx] = char!@#&                                        end!@#&                                end!@#&                        end!@#&                end!@#&               !@#&                frames[i] = newlines!@#&        end!@#&end!@#& !@#&--[[Prompts the user to clear the current frame or all frames. Record-dependent.,!@#&        Params: none!@#&        Returns:nil!@#&]]--!@#&local function clearImage()!@#&        inMenu = true!@#&        if not animated then!@#&                drawMessage(\"Clear image? Y/N: \")!@#&        elseif record then!@#&                drawMessage(\"Clear ALL frames? Y/N: \")!@#&        else!@#&                drawMessage(\"Clear current frame? Y/N :\")!@#&        end!@#&        if string.find(string.upper(readInput(1)), \"Y\") then!@#&                local f,l = sFrame,sFrame!@#&                if record then f,l = 1,framecount end!@#&               !@#&                for i=f,l do!@#&                        frames[i] = { }!@#&                end!@#&        end!@#&        inMenu = false!@#&end!@#& !@#&--[[A recursively called method (watch out for big calls!) in which every pixel of a set colour is!@#&        changed to another colour. Does not work on the nil colour, for obvious reasons.!@#&        Params: x:int = The X coordinate of the colour to flood-fill!@#&                        y:int = The Y coordinate of the colour to flood-fill!@#&                        targetColour:colour = the colour that is being flood-filled!@#&                        newColour:colour = the colour with which to replace the target colour!@#&        Returns:nil!@#&]]--!@#&local function floodFill(x, y, targetColour, newColour)!@#&        if not newColour or not targetColour then return end!@#&        local nodeList = { }!@#&       !@#&        table.insert(nodeList, {x = x, y = y})!@#&       !@#&        while #nodeList > 0 do!@#&                local node = nodeList[1]!@#&                if frames[sFrame][node.y] and frames[sFrame][node.y][node.x] == targetColour then!@#&                        frames[sFrame][node.y][node.x] = newColour!@#&                        table.insert(nodeList, { x = node.x + 1, y = node.y})!@#&                        table.insert(nodeList, { x = node.x, y = node.y + 1})!@#&                        if x > 1 then table.insert(nodeList, { x = node.x - 1, y = node.y}) end!@#&                        if y > 1 then table.insert(nodeList, { x = node.x, y = node.y - 1}) end!@#&                end!@#&                table.remove(nodeList, 1)!@#&        end!@#&end!@#& !@#&--[[  !@#&                        Section: Animation Tools  !@#&]]--!@#& !@#&--[[Enters play mode, allowing the animation to play through. Interface is restricted to allow this,!@#&        and method only leaves once the player leaves play mode.!@#&        Params: none!@#&        Returns:nil!@#&]]--!@#&local function playAnimation()!@#&        state = \"play\"!@#&        selectedrect = nil!@#&       !@#&        local animt = os.startTimer(animtime)!@#&        repeat!@#&                drawCanvas()!@#&                drawInterface()!@#&               !@#&                local id,key,_,y = os.pullEvent()!@#&               !@#&                if id==\"timer\" then!@#&                        if key == animt then!@#&                                animt = os.startTimer(animtime)!@#&                                sFrame = (sFrame % framecount) + 1!@#&                        else!@#&                                updateTimer(key)!@#&                        end!@#&                elseif id==\"key\" then!@#&                        if key == keys.comma and animtime > 0.1 then animtime = animtime - 0.05!@#&                        elseif key == keys.period and animtime < 0.5 then animtime = animtime + 0.05!@#&                        elseif key == keys.space then state = \"paint\" end!@#&                elseif id==\"mouse_click\" and y == h then!@#&                        state = \"paint\"!@#&                end!@#&        until state ~= \"play\"!@#&        os.startTimer(0.5)!@#&end!@#& !@#&--[[Changes the selected frame (sFrame) to the chosen frame. If this frame is above the framecount,!@#&        additional frames are created with a copy of the image on the selected frame.!@#&        Params: newframe:int = the new frame to move to!@#&        Returns:nil!@#&]]--!@#&local function changeFrame(newframe)!@#&        inMenu = true!@#&        if not tonumber(newframe) then!@#&                term.setCursorPos(1,h)!@#&                term.setBackgroundColour(colours.lightGrey)!@#&                term.setTextColour(colours.grey)!@#&                term.clearLine()!@#&       !@#&                term.write(\"Go to frame: \")!@#&                newframe = tonumber(readInput(2))!@#&                if not newframe or newframe <= 0 then!@#&                        inMenu = false!@#&                        return!@#&                end!@#&        elseif newframe <= 0 then return end!@#&       !@#&        if newframe > framecount then!@#&                for i=framecount+1,newframe do!@#&                        frames[i] = {}!@#&                        for y,line in pairs(frames[sFrame]) do!@#&                                frames[i][y] = { }!@#&                                for x,v in pairs(line) do!@#&                                        frames[i][y][x] = v!@#&                                end!@#&                        end!@#&                end!@#&                framecount = newframe!@#&        end!@#&        sFrame = newframe!@#&        inMenu = false!@#&end!@#& !@#&--[[Removes every frame leading after the frame passed in!@#&        Params: frame:int the non-inclusive lower bounds of the delete!@#&        Returns:nil!@#&]]--!@#&local function removeFramesAfter(frame)!@#&        inMenu = true!@#&        if frame==framecount then return end!@#&        drawMessage(\"Remove frames \"..(frame+1)..\"/\"..framecount..\"? Y/N :\")!@#&        local answer = string.upper(readInput(1))!@#&       !@#&        if string.find(answer, string.upper(\"Y\")) ~= 1 then!@#&                inMenu = false!@#&                return!@#&        end!@#&       !@#&        for i=frame+1, framecount do!@#&                frames[i] = nil!@#&        end!@#&        framecount = frame!@#&        inMenu = false!@#&end!@#& !@#&--[[!@#&                        Section: Printing Tools!@#&]]--!@#& !@#&--[[Constructs a new facing to the left of the current facing!@#&        Params: curx:number = The facing on the X axis!@#&                        curz:number = The facing on the Z axis!@#&                        hand:string = The hand of the axis (\"right\" or \"left\")!@#&        Returns:number,number = the new facing on the X and Z axis after a left turn!@#&]]--!@#&local function getLeft(curx, curz)!@#&        local hand = \"left\"!@#&        if layering == \"up\" then hand = \"right\" end!@#&       !@#&        if hand == \"right\" then!@#&                if curx == 1 then return 0,-1 end!@#&                if curx == -1 then return 0,1 end!@#&                if curz == 1 then return 1,0 end!@#&                if curz == -1 then return -1,0 end!@#&        else!@#&                if curx == 1 then return 0,1 end!@#&                if curx == -1 then return 0,-1 end!@#&                if curz == 1 then return -1,0 end!@#&                if curz == -1 then return 1,0 end!@#&        end!@#&end!@#& !@#&--[[Constructs a new facing to the right of the current facing!@#&        Params: curx:number = The facing on the X axis!@#&                        curz:number = The facing on the Z axis!@#&                        hand:string = The hand of the axis (\"right\" or \"left\")!@#&        Returns:number,number = the new facing on the X and Z axis after a right turn!@#&]]--!@#&local function getRight(curx, curz)!@#&        local hand = \"left\"!@#&        if layering == \"up\" then hand = \"right\" end!@#&       !@#&        if hand == \"right\" then!@#&                if curx == 1 then return 0,1 end!@#&                if curx == -1 then return 0,-1 end!@#&                if curz == 1 then return -1,0 end!@#&                if curz == -1 then return 1,0 end!@#&        else!@#&                if curx == 1 then return 0,-1 end!@#&                if curx == -1 then return 0,1 end!@#&                if curz == 1 then return 1,0 end!@#&                if curz == -1 then return -1,0 end!@#&        end!@#&end!@#& !@#& !@#&--[[Sends out a rednet signal requesting local printers, and will listen for any responses. Printers found are added to the!@#&        printerList (for ID's) and printerNames (for names)!@#&        Params: nil!@#&        Returns:nil!@#&]]--!@#&local function locatePrinters()!@#&        printerList = { }!@#&        printerNames = { name = \"Printers\" }!@#&        local oldState = state!@#&        state = \"Locating printers, please wait...   \"!@#&        drawCanvas()!@#&        drawInterface()!@#&        state = oldState!@#&       !@#&        local modemOpened = false!@#&        for k,v in pairs(rs.getSides()) do!@#&                if peripheral.isPresent(v) and peripheral.getType(v) == \"modem\" then!@#&                        rednet.open(v)!@#&                        modemOpened = true!@#&                        break!@#&                end!@#&        end!@#&       !@#&        if not modemOpened then!@#&                displayConfirmDialogue(\"Modem not found!\", \"No modem peripheral. Must have network modem to locate printers.\")!@#&                return false!@#&        end!@#&       !@#&        rednet.broadcast(\"$3DPRINT IDENTIFY\")!@#&       !@#&        while true do!@#&                local id, msg = rsTimeReceive(1)!@#&               !@#&                if not id then break end!@#&                if string.find(msg, \"$3DPRINT IDACK\") == 1 then!@#&                        msg = string.gsub(msg, \"$3DPRINT IDACK \", \"\")!@#&                        table.insert(printerList, id)!@#&                        table.insert(printerNames, msg)!@#&                end!@#&        end!@#&       !@#&        if #printerList == 0 then!@#&                displayConfirmDialogue(\"Printers not found!\", \"No active printers found in proximity of this computer.\")!@#&                return false!@#&        else!@#&                return true!@#&        end!@#&end!@#& !@#&--[[Sends a request to the printer. Waits on a response and updates the state of the application accordingly.!@#&        Params: command:string the command to send!@#&                        param:string a parameter to send, if any!@#&        Returns:nil!@#&]]--!@#&local function sendPC(command,param)!@#&        local msg = \"$PC \"..command!@#&        if param then msg = msg..\" \"..param end!@#&        rednet.send(printerList[selectedPrinter], msg)!@#&       !@#&        while true do!@#&                local id,key = rsTimeReceive()!@#&                if id == printerList[selectedPrinter] then!@#&                        if key == \"$3DPRINT ACK\" then!@#&                                break!@#&                        elseif key == \"$3DPRINT DEP\" then!@#&                                displayConfirmDialogue(\"Printer Empty\", \"The printer has exhasted a material. Please refill slot \"..param..!@#&                                        \", and click this message when ready to continue.\")!@#&                                rednet.send(printerList[selectedPrinter], msg)!@#&                        elseif key == \"$3DPRINT OOF\" then!@#&                                displayConfirmDialogue(\"Printer Out of Fuel\", \"The printer has no fuel. Please replace the material \"..!@#&                                        \"in slot 1 with a fuel source, then click this message.\")!@#&                                rednet.send(printerList[selectedPrinter], \"$PC SS 1\")!@#&                                id,key = rsTimeReceive()!@#&                                rednet.send(printerList[selectedPrinter], \"$PC RF\")!@#&                                id,key = rsTimeReceive()!@#&                                rednet.send(printerList[selectedPrinter], msg)!@#&                        end!@#&                end!@#&        end!@#&       !@#&        --Changes to position are handled after the event has been successfully completed!@#&        if command == \"FW\" then!@#&                px = px + pfx!@#&                pz = pz + pfz!@#&        elseif command == \"BK\" then!@#&                px = px - pfx!@#&                pz = pz - pfz!@#&        elseif command == \"UP\" then!@#&                if layering == \"up\" then!@#&                        py = py + 1!@#&                else!@#&                        py = py - 1!@#&                end!@#&        elseif command == \"DW\" then!@#&                if layering == \"up\" then!@#&                        py = py - 1!@#&                else    !@#&                        py = py + 1!@#&                end!@#&        elseif command == \"TL\" then!@#&                pfx,pfz = getLeft(pfx,pfz)!@#&        elseif command == \"TR\" then!@#&                pfx,pfz = getRight(pfx,pfz)!@#&        elseif command == \"TU\" then!@#&                pfx = -pfx!@#&                pfz = -pfz!@#&        end!@#&       !@#&        drawCanvas()!@#&        drawInterface()!@#&end!@#& !@#&--[[A printing function that commands the printer to turn to face the desired direction, if it is not already doing so!@#&        Params: desx:number = the normalized x direction to face!@#&                        desz:number = the normalized z direction to face!@#&        Returns:nil!@#&]]--!@#&local function turnToFace(desx,desz)!@#&        if desx ~= 0 then!@#&                if pfx ~= desx then!@#&                        local temppfx,_ = getLeft(pfx,pfz)!@#&                        if temppfx == desx then!@#&                                sendPC(\"TL\")!@#&                        elseif temppfx == -desx then!@#&                                sendPC(\"TR\")!@#&                        else!@#&                                sendPC(\"TU\")!@#&                        end!@#&                end!@#&        else!@#&                print(\"on the z axis\")!@#&                if pfz ~= desz then!@#&                        local _,temppfz = getLeft(pfx,pfz)!@#&                        if temppfz == desz then!@#&                                sendPC(\"TL\")!@#&                        elseif temppfz == -desz then!@#&                                sendPC(\"TR\")!@#&                        else!@#&                                sendPC(\"TU\")!@#&                        end!@#&                end!@#&        end!@#&end!@#& !@#&--[[Performs the print!@#&        Params: nil!@#&        Returns:nil!@#&]]--!@#&local function performPrint()!@#&        state = \"active print\"!@#&        if layering == \"up\" then!@#&                --An up layering starts our builder bot on the bottom left corner of our build!@#&                px,py,pz = leflim, 0, botlim + 1!@#&                pfx,pfz = 0,-1!@#&               !@#&                --We move him forward and up a bit from his original position.!@#&                sendPC(\"FW\")!@#&                sendPC(\"UP\")!@#&                --For each layer that needs to be completed, we go up by one each time!@#&                for layers=1,#frames do!@#&                        --We first decide if we're going forwards or back, depending on what side we're on!@#&                        local rowbot,rowtop,rowinc = nil,nil,nil!@#&                        if pz == botlim then!@#&                                rowbot,rowtop,rowinc = botlim,toplim,-1!@#&                        else!@#&                                rowbot,rowtop,rowinc = toplim,botlim,1!@#&                        end!@#&                       !@#&                        for rows = rowbot,rowtop,rowinc do!@#&                                --Then we decide if we're going left or right, depending on what side we're on!@#&                                local linebot,linetop,lineinc = nil,nil,nil!@#&                                if px == leflim then!@#&                                        --Facing from the left side has to be easterly- it's changed here!@#&                                        turnToFace(1,0)!@#&                                        linebot,linetop,lineinc = leflim,riglim,1!@#&                                else!@#&                                        --Facing from the right side has to be westerly- it's changed here!@#&                                        turnToFace(-1,0)!@#&                                        linebot,linetop,lineinc = riglim,leflim,-1!@#&                                end!@#&                               !@#&                                for lines = linebot,linetop,lineinc do!@#&                                        --We move our turtle forward, placing the right material at each step!@#&                                        local material = frames[py][pz][px]!@#&                                        if material then!@#&                                                material = math.log10(frames[py][pz][px])/math.log10(2) + 1!@#&                                                sendPC(\"SS\", material)!@#&                                                sendPC(\"PD\")!@#&                                        end!@#&                                        if lines ~= linetop then!@#&                                                sendPC(\"FW\")!@#&                                        end!@#&                                end!@#&                               !@#&                                --The printer then has to do a U-turn, depending on which way he's facing and!@#&                                --which way he needs to go!@#&                                local temppfx,temppfz = getLeft(pfx,pfz)!@#&                                if temppfz == rowinc and rows ~= rowtop then!@#&                                        sendPC(\"TL\")!@#&                                        sendPC(\"FW\")!@#&                                        sendPC(\"TL\")!@#&                                elseif temppfz == -rowinc and rows ~= rowtop then!@#&                                        sendPC(\"TR\")!@#&                                        sendPC(\"FW\")!@#&                                        sendPC(\"TR\")!@#&                                end!@#&                        end!@#&                        --Now at the end of a run he does a 180 and moves up to begin the next part of the print!@#&                        sendPC(\"TU\")!@#&                        if layers ~= #frames then!@#&                                sendPC(\"UP\")!@#&                        end!@#&                end!@#&                --All done- now we head back to where we started.!@#&                if px ~= leflim then!@#&                        turnToFace(-1,0)!@#&                        while px ~= leflim do!@#&                                sendPC(\"FW\")!@#&                        end!@#&                end!@#&                if pz ~= botlim then!@#&                        turnToFace(0,-1)!@#&                        while pz ~= botlim do!@#&                                sendPC(\"BK\")!@#&                        end!@#&                end!@#&                turnToFace(0,-1)!@#&                sendPC(\"BK\")!@#&                while py > 0 do!@#&                        sendPC(\"DW\")!@#&                end!@#&        else!@#&                --The front facing is at the top-left corner, facing south not north!@#&                px,py,pz = leflim, botlim, 1!@#&                pfx,pfz = 0,1!@#&                --We move the printer to the last layer- he prints from the back forwards!@#&                while pz < #frames do!@#&                        sendPC(\"FW\")!@#&                end!@#&               !@#&                --For each layer in the frame we build our wall, the move back!@#&                for layers = 1,#frames do!@#&                        --We first decide if we're going left or right based on our position!@#&                        local rowbot,rowtop,rowinc = nil,nil,nil!@#&                        if px == leflim then!@#&                                rowbot,rowtop,rowinc = leflim,riglim,1!@#&                        else!@#&                                rowbot,rowtop,rowinc = riglim,leflim,-1!@#&                        end!@#&                       !@#&                        for rows = rowbot,rowtop,rowinc do!@#&                                --Then we decide if we're going up or down, depending on our given altitude!@#&                                local linebot,linetop,lineinc = nil,nil,nil!@#&                                if py == botlim then!@#&                                        linebot,linetop,lineinc = botlim,toplim,-1!@#&                                else!@#&                                        linebot,linetop,lineinc = toplim,botlim,1!@#&                                end!@#&                               !@#&                                for lines = linebot,linetop,lineinc do!@#&                                --We move our turtle up/down, placing the right material at each step!@#&                                        local material = frames[pz][py][px]!@#&                                        if material then!@#&                                                material = math.log10(frames[pz][py][px])/math.log10(2) + 1!@#&                                                sendPC(\"SS\", material)!@#&                                                sendPC(\"PF\")!@#&                                        end!@#&                                        if lines ~= linetop then!@#&                                                if lineinc == 1 then sendPC(\"DW\")!@#&                                                else sendPC(\"UP\") end!@#&                                        end!@#&                                end!@#&                                       !@#&                                if rows ~= rowtop then!@#&                                        turnToFace(rowinc,0)!@#&                                        sendPC(\"FW\")!@#&                                        turnToFace(0,1)!@#&                                end!@#&                        end!@#&                       !@#&                        if layers ~= #frames then!@#&                                sendPC(\"TU\")!@#&                                sendPC(\"FW\")!@#&                                sendPC(\"TU\")!@#&                        end!@#&                end!@#&                --He's easy to reset!@#&                while px ~= leflim do!@#&                        turnToFace(-1,0)!@#&                        sendPC(\"FW\")!@#&                end!@#&                turnToFace(0,1)!@#&        end!@#&       !@#&        sendPC(\"DE\")!@#&       !@#&        displayConfirmDialogue(\"Print complete\", \"The 3D print was successful.\")!@#&end!@#& !@#&--[[  !@#&                        Section: Interface  !@#&]]--!@#& !@#&--[[Runs the printing interface. Allows users to find/select a printer, the style of printing to perform and to begin the operation!@#&        Params: none!@#&        Returns:boolean true if printing was started, false otherwse!@#&]]--!@#&local function runPrintInterface()!@#&        calculateMaterials()!@#&        --There's nothing on canvas yet!!@#&        if not botlim then!@#&                displayConfirmDialogue(\"Cannot Print Empty Canvas\", \"There is nothing on canvas that \"..!@#&                                \"can be printed, and the operation cannot be completed.\")!@#&                return false!@#&        end!@#&        --No printers nearby!@#&        if not locatePrinters() then!@#&                return false!@#&        end!@#&       !@#&        layering = \"up\"!@#&        requirementsDisplayed = false!@#&        selectedPrinter = 1!@#&        while true do!@#&                drawCanvas()!@#&                term.setBackgroundColour(colours.lightGrey)!@#&                for i=1,10 do!@#&                        term.setCursorPos(1,i)!@#&                        term.clearLine()!@#&                end!@#&                drawInterface()!@#&                term.setBackgroundColour(colours.lightGrey)!@#&                term.setTextColour(colours.black)!@#&               !@#&                local msg = \"3D Printing\"!@#&                term.setCursorPos(w/2-#msg/2 - 2, 1)!@#&                term.write(msg)!@#&                term.setBackgroundColour(colours.grey)!@#&                term.setTextColour(colours.lightGrey)!@#&                if(requirementsDisplayed) then!@#&                        msg = \"Count:\"!@#&                else!@#&                        msg = \" Slot:\"!@#&                end!@#&                term.setCursorPos(w-3-#msg, 1)!@#&                term.write(msg)!@#&                term.setBackgroundColour(colours.lightGrey)!@#&                term.setTextColour(colours.black)!@#&               !@#&                term.setCursorPos(7, 2)!@#&                term.write(\"Layering\")!@#&                drawPictureTable(layerUpIcon, 3, 3, colours.white)!@#&                drawPictureTable(layerForwardIcon, 12, 3, colours.white)!@#&                if layering == \"up\" then!@#&                        term.setBackgroundColour(colours.red)!@#&                else!@#&                        term.setBackgroundColour(colours.lightGrey)!@#&                end!@#&                term.setCursorPos(3, 9)!@#&                term.write(\"Upwards\")!@#&                if layering == \"forward\" then!@#&                        term.setBackgroundColour(colours.red)!@#&                else!@#&                        term.setBackgroundColour(colours.lightGrey)!@#&                end!@#&                term.setCursorPos(12, 9)!@#&                term.write(\"Forward\")!@#&               !@#&                term.setBackgroundColour(colours.lightGrey)!@#&                term.setTextColour(colours.black)!@#&                term.setCursorPos(31, 2)!@#&                term.write(\"Printer ID\")!@#&                term.setCursorPos(33, 3)!@#&                if #printerList > 1 then!@#&                        term.setBackgroundColour(colours.grey)!@#&                        term.setTextColour(colours.lightGrey)!@#&                else!@#&                        term.setTextColour(colours.red)!@#&                end!@#&                term.write(\" \"..printerNames[selectedPrinter]..\" \")!@#&               !@#&                term.setBackgroundColour(colours.grey)!@#&                term.setTextColour(colours.lightGrey)!@#&                term.setCursorPos(25, 10)!@#&                term.write(\" Cancel \")!@#&                term.setCursorPos(40, 10)!@#&                term.write(\" Print \")!@#&               !@#&                local id, p1, p2, p3 = os.pullEvent()!@#&               !@#&                if id == \"timer\" then!@#&                        updateTimer(p1)!@#&                elseif id == \"mouse_click\" then!@#&                        --Layering Buttons!@#&                        if p2 >= 3 and p2 <= 9 and p3 >= 3 and p3 <= 9 then!@#&                                layering = \"up\"!@#&                        elseif p2 >= 12 and p2 <= 18 and p3 >= 3 and p3 <= 9 then!@#&                                layering = \"forward\"!@#&                        --Count/Slot!@#&                        elseif p2 >= w - #msg - 3 and p2 <= w - 3 and p3 == 1 then!@#&                                requirementsDisplayed = not requirementsDisplayed!@#&                        --Printer ID!@#&                        elseif p2 >= 33 and p2 <= 33 + #printerNames[selectedPrinter] and p3 == 3 and #printerList > 1 then!@#&                                local chosenName = displayDropDown(33, 3, printerNames)!@#&                                for i=1,#printerNames do!@#&                                        if printerNames[i] == chosenName then!@#&                                                selectedPrinter = i!@#&                                                break;!@#&                                        end!@#&                                end!@#&                        --Print and Cancel!@#&                        elseif p2 >= 25 and p2 <= 32 and p3 == 10 then!@#&                                break!@#&                        elseif p2 >= 40 and p2 <= 46 and p3 == 10 then!@#&                                rednet.send(printerList[selectedPrinter], \"$3DPRINT ACTIVATE\")!@#&                                ready = false!@#&                                while true do!@#&                                        local id,msg = rsTimeReceive(10)!@#&                                       !@#&                                        if id == printerList[selectedPrinter] and msg == \"$3DPRINT ACTACK\" then!@#&                                                ready = true!@#&                                                break!@#&                                        end!@#&                                end!@#&                                if ready then!@#&                                        performPrint()!@#&                                        break!@#&                                else!@#&                                        displayConfirmDialogue(\"Printer Didn't Respond\", \"The printer didn't respond to the activation command. Check to see if it's online\")!@#&                                end!@#&                        end!@#&                end!@#&        end!@#&        state = \"paint\"!@#&end!@#&!@#&--[[Performs a legacy save. When the dropdown menu is unavailable, it requests the user to save!@#&	or exit using keyboard shortcuts rather than selecting a menu option from the dropdown.!@#&	Pressing the control key again will cancel the save operation.!@#&	Params: none!@#&	Returns:string = the selection made!@#&]]--!@#&local function performLegacySaveExit()!@#&	local saveMsg = \"(S)ave/(E)xit?\"!@#&	if w < #saveMsg then saveMsg = \"S/E?\" end!@#&	!@#&	term.setCursorPos(1,h)!@#&	term.setBackgroundColour(colours.lightGrey)!@#&	term.setTextColour(colours.grey)!@#&	term.clearLine()!@#&	term.write(saveMsg)!@#&	!@#&	while true do!@#&		local id,val = os.pullEvent()!@#&		if id == \"timer\" then updateTimer(val)!@#&		elseif id == \"key\" then!@#&			if val == keys.s then return \"save\" !@#&			elseif val == keys.e then!@#&				--Get rid of the extra event!@#&				os.pullEvent(\"char\")!@#&				return \"exit\"!@#&			elseif val == keys.leftCtrl then return nil!@#&			end!@#&		end!@#&	end!@#&end!@#& !@#&--[[This function changes the current paint program to another tool or mode, depending on user input. Handles!@#&        any necessary changes in logic involved in that.!@#&        Params: mode:string = the name of the mode to change to!@#&        Returns:nil!@#&]]--!@#&local function performSelection(mode)!@#&        if not mode or mode == \"\" then return!@#&       !@#&        elseif mode == \"help\" and helpAvailable then!@#&                drawHelpScreen()!@#&               !@#&        elseif mode == \"blueprint on\" then!@#&                blueprint = true!@#&				for i=1,#ddModes[2] do if ddModes[2][i] == \"blueprint on\" then!@#&					ddModes[2][i] = \"blueprint off\"!@#&				end end!@#&               !@#&        elseif mode == \"blueprint off\" then!@#&                blueprint = false!@#&				for i=1,#ddModes[2] do if ddModes[2][i] == \"blueprint off\" then!@#&					ddModes[2][i] = \"blueprint on\"!@#&				end end!@#&               !@#&        elseif mode == \"layers on\" then!@#&                layerDisplay = true!@#&				for i=1,#ddModes[2] do if ddModes[2][i] == \"layers on\" then!@#&					ddModes[2][i] = \"layers off\"!@#&				end end!@#&       !@#&        elseif mode == \"layers off\" then!@#&                layerDisplay = false!@#&				for i=1,#ddModes[2] do if ddModes[2][i] == \"layers off\" then!@#&					ddModes[2][i] = \"layers on\"!@#&				end end!@#&       !@#&        elseif mode == \"direction on\" then!@#&                printDirection = true!@#&				for i=1,#ddModes[2] do if ddModes[2][i] == \"direction on\" then!@#&					ddModes[2][i] = \"direction off\"!@#&				end end!@#&               !@#&        elseif mode == \"direction off\" then!@#&                printDirection = false!@#&				for i=1,#ddModes[2] do if ddModes[2][i] == \"direction off\" then!@#&					ddModes[2][i] = \"direction on\"!@#&				end end!@#&		!@#&		elseif mode == \"hide interface\" then!@#&				interfaceHidden = true!@#&			!@#&		elseif mode == \"show interface\" then!@#&				interfaceHidden = false!@#&       !@#&        elseif mode == \"go to\" then!@#&                changeFrame()!@#&       !@#&        elseif mode == \"remove\" then!@#&                removeFramesAfter(sFrame)!@#&       !@#&        elseif mode == \"play\" then!@#&                playAnimation()!@#&               !@#&        elseif mode == \"copy\" then!@#&                if selectrect and selectrect.x1 ~= selectrect.x2 then!@#&                        copyToBuffer(false)!@#&                end!@#&       !@#&        elseif mode == \"cut\" then!@#&                if selectrect and selectrect.x1 ~= selectrect.x2 then!@#&                        copyToBuffer(true)!@#&                end!@#&               !@#&        elseif mode == \"paste\" then!@#&                if selectrect and selectrect.x1 ~= selectrect.x2 then!@#&                        copyFromBuffer(false)!@#&                end!@#&               !@#&        elseif mode == \"hide\" then!@#&                selectrect = nil!@#&                if state == \"select\" then state = \"corner select\" end!@#&			   !@#&        elseif mode == \"alpha to left\" then!@#&                if lSel then alphaC = lSel end!@#&               !@#&        elseif mode == \"alpha to right\" then!@#&                if rSel then alphaC = rSel end!@#&               !@#&        elseif mode == \"record\" then!@#&                record = not record!@#&               !@#&        elseif mode == \"clear\" then!@#&                if state==\"select\" then buffer = nil!@#&                else clearImage() end!@#&       !@#&        elseif mode == \"select\" then!@#&                if state==\"corner select\" or state==\"select\" then!@#&                        state = \"paint\"!@#&                elseif selectrect and selectrect.x1 ~= selectrect.x2 then!@#&                        state = \"select\"!@#&                else!@#&                        state = \"corner select\"!@#&                end!@#&               !@#&        elseif mode == \"print\" then!@#&                state = \"print\"!@#&                runPrintInterface()!@#&                state = \"paint\"!@#&               !@#&        elseif mode == \"save\" then!@#&                if animated then saveNFA(sPath)!@#&                elseif textEnabled then saveNFT(sPath)!@#&                else saveNFP(sPath) end!@#&               !@#&        elseif mode == \"exit\" then!@#&                isRunning = false!@#&       !@#&        elseif mode ~= state then state = mode!@#&        else state = \"paint\"!@#&        end!@#&end!@#& !@#&--[[The main function of the program, reads and handles all events and updates them accordingly. Mode changes,!@#&        painting to the canvas and general selections are done here.!@#&        Params: none!@#&        Returns:nil!@#&]]--!@#&local function handleEvents()!@#&        recttimer = os.startTimer(0.5)!@#&        while isRunning do!@#&                drawCanvas()!@#&                if not interfaceHidden then drawInterface() end!@#&               !@#&                if state == \"text\" then!@#&                        term.setCursorPos(textCurX - sx, textCurY - sy)!@#&                        term.setCursorBlink(true)!@#&                end!@#&               !@#&                local id,p1,p2,p3 = os.pullEvent()!@#&                term.setCursorBlink(false)!@#&                if id==\"timer\" then!@#&                        updateTimer(p1)!@#&                elseif (id==\"mouse_click\" or id==\"mouse_drag\") and not interfaceHidden then!@#&                        if p2 >=w-1 and p3 < #column+1 then!@#&								local off = 0!@#&								local cansel = true!@#&								if h < #column + 2 then!@#&									if p3 == 1 then !@#&										if columnoffset > 0 then columnoffset = columnoffset-1 end!@#&										cansel = false!@#&									elseif p3 == h-2 then!@#&										if columnoffset < #column-(h-4)+1 then columnoffset = columnoffset+1 end!@#&										cansel = false!@#&									else!@#&										off = columnoffset - 1!@#&									end!@#&								end!@#&								--This rather handily accounts for the nil case (p3+off=#column+1)!@#&								if p1==1 and cansel then lSel = column[p3+off]!@#&                                elseif p1==2 and cansel then rSel = column[p3+off] end!@#&                        elseif p2 >=w-1 and p3==#column+1 then!@#&                                if p1==1 then lSel = nil!@#&                                else rSel = nil end!@#&                        elseif p2==w-1 and p3==h and animated then!@#&                                changeFrame(sFrame-1)!@#&                        elseif p2==w and p3==h and animated then!@#&                                changeFrame(sFrame+1)!@#&                        elseif p2 <= #ddModes.name + 2 and p3==h and mainAvailable then!@#&                                local sel = displayDropDown(1, h-1, ddModes)!@#&                                performSelection(sel)!@#&                        elseif p2 < w-1 and p3 <= h-1 then!@#&                                if state==\"pippette\" then!@#&                                        if p1==1 then!@#&                                                if frames[sFrame][p3+sy] and frames[sFrame][p3+sy][p2+sx] then!@#&                                                        lSel = frames[sFrame][p3+sy][p2+sx]!@#&                                                end!@#&                                        elseif p1==2 then!@#&                                                if frames[sFrame][p3+sy] and frames[sFrame][p3+sy][p2+sx] then!@#&                                                        rSel = frames[sFrame][p3+sy][p2+sx]!@#&                                                end!@#&                                        end!@#&                                elseif state==\"move\" then!@#&                                        updateImageLims(record)!@#&                                        moveImage(p2,p3)!@#&                                elseif state==\"flood\" then!@#&                                        if p1 == 1 and lSel and frames[sFrame][p3+sy]  then!@#&                                                floodFill(p2,p3,frames[sFrame][p3+sy][p2+sx],lSel)!@#&                                        elseif p1 == 2 and rSel and frames[sFrame][p3+sy] then!@#&                                                floodFill(p2,p3,frames[sFrame][p3+sy][p2+sx],rSel)!@#&                                        end!@#&                                elseif state==\"corner select\" then!@#&                                        if not selectrect then!@#&                                                selectrect = { x1=p2+sx, x2=p2+sx, y1=p3+sy, y2=p3+sy }!@#&                                        elseif selectrect.x1 ~= p2+sx and selectrect.y1 ~= p3+sy then!@#&                                                if p2+sx<selectrect.x1 then selectrect.x1 = p2+sx!@#&                                                else selectrect.x2 = p2+sx end!@#&                                               !@#&                                                if p3+sy<selectrect.y1 then selectrect.y1 = p3+sy!@#&                                                else selectrect.y2 = p3+sy end!@#&                                               !@#&                                                state = \"select\"!@#&                                        end!@#&                                elseif state==\"textpaint\" then!@#&                                        local paintCol = lSel!@#&                                        if p1 == 2 then paintCol = rSel end!@#&                                        if frames[sFrame].textcol[p3+sy] then!@#&                                                frames[sFrame].textcol[p3+sy][p2+sx] = paintCol!@#&                                        end!@#&                                elseif state==\"text\" then!@#&                                        textCurX = p2 + sx!@#&                                        textCurY = p3 + sy!@#&                                elseif state==\"select\" then!@#&                                        if p1 == 1 then!@#&                                                local swidth = selectrect.x2 - selectrect.x1!@#&                                                local sheight = selectrect.y2 - selectrect.y1!@#&                                       !@#&                                                selectrect.x1 = p2 + sx!@#&                                                selectrect.y1 = p3 + sy!@#&                                                selectrect.x2 = p2 + swidth + sx!@#&                                                selectrect.y2 = p3 + sheight + sy!@#&                                        elseif p1 == 2 and p2 < w-2 and p3 < h-1 and boxdropAvailable then!@#&                                                inMenu = true!@#&                                                local sel = displayDropDown(p2, p3, srModes)!@#&                                                inMenu = false!@#&                                                performSelection(sel)!@#&                                        end!@#&                                else!@#&                                        local f,l = sFrame,sFrame!@#&                                        if record then f,l = 1,framecount end!@#&                                        local bwidth = 0!@#&                                        if state == \"brush\" then bwidth = brushsize-1 end!@#&                               !@#&                                        for i=f,l do!@#&                                                for x = math.max(1,p2+sx-bwidth),p2+sx+bwidth do!@#&                                                        for y = math.max(1,p3+sy-bwidth), p3+sy+bwidth do!@#&                                                                if math.abs(x - (p2+sx)) + math.abs(y - (p3+sy)) <= bwidth then!@#&                                                                        if not frames[i][y] then frames[i][y] = {} end!@#&                                                                        if p1==1 then frames[i][y][x] = lSel!@#&                                                                        else frames[i][y][x] = rSel end!@#&                                                                       !@#&                                                                        if textEnabled then!@#&                                                                                if not frames[i].text[y] then frames[i].text[y] = { } end!@#&                                                                                if not frames[i].textcol[y] then frames[i].textcol[y] = { } end!@#&                                                                        end!@#&                                                                end!@#&                                                        end!@#&                                                end!@#&                                        end!@#&                                end!@#&                        end!@#&                elseif id==\"char\" then!@#&                        if state==\"text\" then!@#&                                if not frames[sFrame][textCurY] then frames[sFrame][textCurY] = { } end!@#&                                if not frames[sFrame].text[textCurY] then frames[sFrame].text[textCurY] = { } end!@#&                                if not frames[sFrame].textcol[textCurY] then frames[sFrame].textcol[textCurY] = { } end!@#&                               !@#&                                if rSel then frames[sFrame][textCurY][textCurX] = rSel end!@#&                                if lSel then!@#&                                        frames[sFrame].text[textCurY][textCurX] = p1!@#&                                        frames[sFrame].textcol[textCurY][textCurX] = lSel!@#&                                else!@#&                                        frames[sFrame].text[textCurY][textCurX] = \" \"!@#&                                        frames[sFrame].textcol[textCurY][textCurX] = rSel!@#&                                end!@#&                               !@#&                                textCurX = textCurX+1!@#&                                if textCurX > w + sx - 2 then sx = textCurX - w + 2 end!@#&                        elseif tonumber(p1) then!@#&                                if state==\"brush\" and tonumber(p1) > 1 then!@#&                                        brushsize = tonumber(p1)!@#&                                elseif animated and tonumber(p1) > 0 then!@#&                                        changeFrame(tonumber(p1))!@#&                                end!@#&                        end!@#&                elseif id==\"key\" then!@#&						--All standard interface methods are locked when the interface is hidden!@#&						if interfaceHidden then!@#&							if p1==keys.grave then!@#&								performSelection(\"show interface\") !@#&							end!@#&                        --Text needs special handlers (all other keyboard shortcuts are of course reserved for typing)!@#&                        elseif state==\"text\" then!@#&                                if p1==keys.backspace and textCurX > 1 then!@#&                                        textCurX = textCurX-1!@#&                                        if frames[sFrame].text[textCurY] then!@#&                                                frames[sFrame].text[textCurY][textCurX] = nil!@#&                                                frames[sFrame].textcol[textCurY][textCurX] = nil!@#&                                        end!@#&                                        if textCurX < sx then sx = textCurX end!@#&                                elseif p1==keys.left and textCurX > 1 then!@#&                                        textCurX = textCurX-1!@#&                                        if textCurX-1 < sx then sx = textCurX-1 end!@#&                                elseif p1==keys.right then!@#&                                        textCurX = textCurX+1!@#&                                        if textCurX > w + sx - 2 then sx = textCurX - w + 2 end!@#&                                elseif p1==keys.up and textCurY > 1 then!@#&                                        textCurY = textCurY-1!@#&                                        if textCurY-1 < sy then sy = textCurY-1 end!@#&                                elseif p1==keys.down then!@#&                                        textCurY = textCurY+1!@#&                                        if textCurY > h + sy - 1 then sy = textCurY - h + 1 end!@#&                                end!@#&                       !@#&                        elseif p1==keys.leftCtrl then!@#&                                local sel = nil!@#&								if mainAvailable then !@#&									sel = displayDropDown(1, h-1, ddModes[#ddModes])!@#&								else sel = performLegacySaveExit() end!@#&                                performSelection(sel)!@#&                        elseif p1==keys.leftAlt then!@#&                                local sel = displayDropDown(1, h-1, ddModes[1])!@#&                                performSelection(sel)!@#&                        elseif p1==keys.h then!@#&                                performSelection(\"help\")!@#&                        elseif p1==keys.x then!@#&                                performSelection(\"cut\")!@#&                        elseif p1==keys.c then!@#&                                performSelection(\"copy\")!@#&                        elseif p1==keys.v then!@#&                                performSelection(\"paste\")!@#&                        elseif p1==keys.z then!@#&                                performSelection(\"clear\")!@#&                        elseif p1==keys.s then!@#&                                performSelection(\"select\")!@#&                        elseif p1==keys.tab then!@#&                                performSelection(\"hide\")!@#&                        elseif p1==keys.q then!@#&                                performSelection(\"alpha to left\")!@#&                        elseif p1==keys.w then!@#&                                performSelection(\"alpha to right\")!@#&                        elseif p1==keys.f then!@#&                                performSelection(\"flood\")!@#&                        elseif p1==keys.b then!@#&                                performSelection(\"brush\")!@#&                        elseif p1==keys.m then!@#&                                performSelection(\"move\")!@#&                        elseif p1==keys.backslash and animated then!@#&                                performSelection(\"record\")!@#&                        elseif p1==keys.p then!@#&                                performSelection(\"pippette\")!@#&                        elseif p1==keys.g and animated then!@#&                                performSelection(\"go to\")!@#&						elseif p1==keys.grave then !@#&								performSelection(\"hide interface\")!@#&                        elseif p1==keys.period and animated then!@#&                                changeFrame(sFrame+1)!@#&                        elseif p1==keys.comma and animated then!@#&                                changeFrame(sFrame-1)!@#&                        elseif p1==keys.r and animated then!@#&                                performSelection(\"remove\")!@#&                        elseif p1==keys.space and animated then!@#&                                performSelection(\"play\")!@#&                        elseif p1==keys.t and textEnabled then!@#&                                performSelection(\"text\")!@#&                                sleep(0.01)!@#&                        elseif p1==keys.y and textEnabled then!@#&                                performSelection(\"textpaint\")!@#&                        elseif p1==keys.left then!@#&                                if state == \"move\" and toplim then!@#&                                        updateImageLims(record)!@#&                                        if toplim and leflim then!@#&                                                moveImage(leflim-1,toplim)!@#&                                        end!@#&                                elseif state==\"select\" and selectrect.x1 > 1 then!@#&                                        selectrect.x1 = selectrect.x1-1!@#&                                        selectrect.x2 = selectrect.x2-1!@#&                                elseif sx > 0 then sx=sx-1 end!@#&                        elseif p1==keys.right then!@#&                                if state == \"move\" then!@#&                                        updateImageLims(record)!@#&                                        if toplim and leflim then!@#&                                                moveImage(leflim+1,toplim)!@#&                                        end!@#&                                elseif state==\"select\" then!@#&                                        selectrect.x1 = selectrect.x1+1!@#&                                        selectrect.x2 = selectrect.x2+1!@#&                                else sx=sx+1 end!@#&                        elseif p1==keys.up then!@#&                                if state == \"move\" then!@#&                                        updateImageLims(record)!@#&                                        if toplim and leflim then!@#&                                                moveImage(leflim,toplim-1)!@#&                                        end!@#&                                elseif state==\"select\" and selectrect.y1 > 1 then!@#&                                        selectrect.y1 = selectrect.y1-1!@#&                                        selectrect.y2 = selectrect.y2-1!@#&                                elseif sy > 0 then sy=sy-1 end!@#&                        elseif p1==keys.down then!@#&                                if state == \"move\" then!@#&                                        updateImageLims(record)!@#&                                        if toplim and leflim then!@#&                                                moveImage(leflim,toplim+1)!@#&                                        end!@#&                                elseif state==\"select\" then!@#&                                        selectrect.y1 = selectrect.y1+1!@#&                                        selectrect.y2 = selectrect.y2+1!@#&                                else sy=sy+1 end!@#&                        end!@#&                end!@#&        end!@#&end!@#& !@#&--[[!@#&                        Section: Main  !@#&]]--!@#& !@#&--The first thing done is deciding what features we actually have, given the screen size!@#&if w < 7 or h < 4 then!@#&	--NPaintPro simply doesn't work at certain configurations!@#&	shell.run(\"clear\")!@#&	print(\"Screen too small\")!@#&	os.pullEvent(\"key\")!@#&	return!@#&end!@#&--And reduces the number of features in others.!@#&determineAvailableServices()!@#& !@#&--There is no b&w support for NPP.!@#&if not term.isColour() then!@#&	shell.run(\"clear\")!@#&	print(\"NPaintPro\\nBy Ma3rX\\n\\nNPaintPro can only be run on advanced \"..!@#&	\"computers. Please reinstall on an advanced computer.\")!@#&    return!@#&end!@#& !@#&--Taken almost directly from edit (for consistency)!@#&local tArgs = {...}!@#& !@#&--Command line options can appear before the file path to specify the file format!@#&local ca = 1!@#&while ca <= #tArgs do!@#&	if tArgs[ca] == \"-a\" then animated = true!@#&	elseif tArgs[ca] == \"-t\" then textEnabled = true!@#&	elseif tArgs[ca] == \"-d\" then interfaceHidden = true!@#&	elseif string.sub(tArgs[ca], 1, 1) == \"-\" then!@#&		print(\"Unrecognized option: \"..tArgs[ca])!@#&		return!@#&	else break end!@#&	ca = ca + 1!@#&end!@#&!@#&--Presently, animations and text files are not supported!@#&if animated and textEnabled then!@#&    print(\"No support for animated text files- cannot have both -a and -t\")!@#&	return!@#&end!@#&!@#&--Filepaths must be added if the screen is too small!@#&if #tArgs < ca then!@#&	if not filemakerAvailable then!@#&		print(\"Usage: npaintpro [-a,-t,-d] <path>\")!@#&		return!@#&	else!@#&		--Otherwise do the logo draw early, to determine the file.!@#&		drawLogo()!@#&		if not runFileMaker() then return end!@#&	end!@#&else!@#&	if not interfaceHidden then drawLogo() end!@#&	sPath = shell.resolve(tArgs[ca])!@#&end!@#& !@#&if fs.exists(sPath) then!@#&        if fs.isDir(sPath) then!@#&                print(\"Cannot edit a directory.\")!@#&                return!@#&        elseif string.find(sPath, \".nfp\") ~= #sPath-3 and string.find(sPath, \".nfa\") ~= #sPath-3 and!@#&                        string.find(sPath, \".nft\") ~= #sPath-3 then!@#&                print(\"Can only edit .nfp, .nft and .nfa files:\",string.find(sPath, \".nfp\"),#sPath-3)!@#&                return!@#&        end!@#&       !@#&        if string.find(sPath, \".nfa\") == #sPath-3 then!@#&                animated = true!@#&        end!@#&       !@#&        if string.find(sPath, \".nft\") == #sPath-3 then!@#&                textEnabled = true!@#&        end    !@#&       !@#&        if string.find(sPath, \".nfp\") == #sPath-3 and animated then!@#&                print(\"Convert to nfa? Y/N\")!@#&                if string.find(string.lower(io.read()), \"y\") then!@#&                        local nsPath = string.sub(sPath, 1, #sPath-1)..\"a\"!@#&                        fs.move(sPath, nsPath)!@#&                        sPath = nsPath!@#&                else!@#&                        animated = false!@#&                end!@#&        end!@#&       !@#&        --Again this is possible, I just haven't done it. Maybe I will?!@#&        if textEnabled and (string.find(sPath, \".nfp\") == #sPath-3 or string.find(sPath, \".nfa\") == #sPath-3) then!@#&                print(\"Cannot convert to nft\")!@#&        end!@#&else!@#&        if not animated and not textEnabled and string.find(sPath, \".nfp\") ~= #sPath-3 then!@#&                sPath = sPath..\".nfp\"!@#&        elseif animated and string.find(sPath, \".nfa\") ~= #sPath-3 then!@#&                sPath = sPath..\".nfa\"!@#&        elseif textEnabled and string.find(sPath, \".nft\") ~= #sPath-3 then!@#&                sPath = sPath..\".nft\"!@#&        end!@#&end!@#& !@#&init()!@#&handleEvents()!@#& !@#&term.setBackgroundColour(colours.black)!@#&shell.run(\"clear\")",["rFTP"]="os.loadAPI(\"SpeedAPI/devices\")!@#&os.loadAPI(\"SpeedAPI/windows\")!@#&!@#&windows.clearScreen(colors.white)!@#&!@#&-- GLOBAL VARIABLES --!@#&local ver=\"1.1\"!@#&local id=os.getComputerID()!@#&local wifi!@#&local dest!@#&local sfile!@#&local sender!@#&local dcat!@#&local dfile!@#&local dpath!@#&-- /GLOBAL VARIABLES --!@#&!@#&function Main()!@#&  Clear()!@#&  Menu()!@#& !@#&  wifi=devices.find(\"modem\")!@#&  rednet.open(wifi)!@#&  if wifi~=\"none\" then!@#&    windows.error(\"You need wireless modem!\")!@#&    error()!@#&  end!@#&end!@#&!@#&function Menu()!@#&  windows.clearScreen(colors.white)!@#&  pressedButton = windows.select({\"Hello!\"},{\"Welcome to FTP!\"},{\"Send\",colors.lightGray,colors.black},{\"Receive\",colors.lightBlue,colors.black})!@#&!@#&  local p1 = pressedButton!@#&    if p1==\"Send\" then!@#&          SendMenu()!@#&    elseif p1==\"Receive\" then!@#&          DownMenu()!@#&    end!@#&end  !@#&!@#&function SendMenu()!@#&  windows.clearScreen(colors.white)!@#&  local govno = windows.input(\"auto\", \"auto\", \"Send\", 10, {\"ID\", \"\"}, {\"Filename\", \"\"})!@#&  dest=tonumber(govno[1])!@#&  sfile=govno[2]!@#&  if fs.exists(sfile)==true then!@#&    windows.clearScreen(colors.black)!@#&    term.setTextColor(colors.white)!@#&    term.setCursorPos(1,1)!@#&  else!@#&    windows.error(\"File not found!\")!@#&    Menu()!@#&  end!@#&  print(\"Estabilishing connection\")!@#&  rednet.send(dest,\"@rftpstart\")!@#&  rednet.send(dest,sfile)!@#&  print(\"Waiting for device #\"..dest..\" to respond... [Press SPACE to cancel]\")!@#&  Waiting()!@#&end!@#&!@#&function Waiting()!@#&  while true do!@#&    local event,p1,p2=os.pullEvent()!@#&!@#&    if (event==\"rednet_message\") and (p2==\"@rftpagree\") then!@#&        print(\"File accepted by #\"..dest..\"!\")!@#&        sleep(1)!@#&        Transfer()!@#&        break!@#&    elseif (event==\"rednet_message\") and (p2==\"@rftpdeny\") then!@#&        print(\"#\"..dest..\" denied connection! Any key to continue...\")!@#&        os.pullEvent(\"key\")!@#&        Menu()!@#&        break!@#&    elseif (event==\"key\") and (p1==57) then!@#&        Menu()!@#&        break!@#&    end!@#&  end!@#&end!@#&!@#&function Transfer()!@#&    local plik=fs.open(sfile,\"r\")!@#&    local tresc=plik.readAll()!@#&    rednet.send(dest,tresc)!@#&    sleep(0.3)!@#&    rednet.send(dest,\"@rftpend\")!@#&    plik.close()!@#&    print(\"Transfer complete! Any key to continue...\")!@#&    os.pullEvent(\"key\")!@#&    Menu()!@#&end!@#&    !@#&function DownMenu()!@#&    Clear()!@#&    print(\"Your ID: \"..id)!@#&    print()!@#&    print(\"Waiting for an oncoming file... [Press SPACE to cancel]\")!@#&    local event,p1,p2!@#&    repeat!@#&    event,p1,p2=os.pullEvent()!@#&    until ((event==\"rednet_message\") and (p2==\"@rftpstart\")) or ((event==\"key\") and (p1==57))!@#&    if (event==\"rednet_message\") and (p2==\"@rftpstart\") then!@#&        sender=p1!@#&        event,p1,p2=os.pullEvent(\"rednet_message\")!@#&        print(\"Device \"..p1..\" want to send you a file: \"..p2..\". Accept? [y/N]\")!@#&        local event,pp1=os.pullEvent(\"key\")!@#&        if (pp1==20) or (pp1==21) then!@#&            Download()!@#&        else!@#&            rednet.send(p1,\"@rftpdeny\")!@#&            Menu()!@#&        end!@#&    elseif (event==\"key\") and (p1==57) then!@#&        Menu()!@#&    end!@#&end!@#&!@#&function Download()!@#&    Clear()!@#&    !@#&    print(\"Select the folder: [default: /SpeedOS/Downloads]\")!@#&    dcat=read()!@#&    if dcat==\"\" then!@#&        dcat=\"/SpeedOS/Downloads\"!@#&    end!@#&    fs.makeDir(dcat)!@#&    !@#&    print(\"Select filename:\")!@#&    dfile=read()!@#&    !@#&    dpath=fs.combine(dcat,dfile)!@#&    !@#&    if fs.exists(dpath)==false then!@#&        SaveFile()!@#&    else!@#&        print(\"File already exists! Try again? [y/N]\")!@#&        local event,p1=os.pullEvent(\"key\")!@#&        if (p1==20) or (p1==21) then!@#&            Download()!@#&        else!@#&            rednet.send(p1,\"@rftpdeny\")!@#&            Menu()!@#&        end!@#&    end!@#&end!@#&!@#&function SaveFile()!@#&    local plik=fs.open(dpath,\"w\")!@#&    rednet.send(p1,\"@rftpagree\")!@#&    local event,p1,p2!@#&    repeat!@#&        event,p1,p2=os.pullEvent(\"rednet_message\")!@#&    until p1==sender!@#&    if p2~=\"@rftpend\" then!@#&        plik.write(p2)!@#&    end!@#&    os.startTimer(10)!@#&    while true do!@#&        local event,p1,p2=os.pullEvent()!@#&        if event==\"rednet_message\" and p1==sender and p2==\"@rftpend\" then!@#&            write(\"Transfer completed! \")!@#&            break!@#&        elseif event==\"timer\" then!@#&            write(\"Timed out! Check the file. \")!@#&            break!@#&        end!@#&    end!@#&    plik.close()!@#&    print(\"Any key to continue...\")!@#&    os.pullEvent(\"key\")!@#&    Menu()!@#&end!@#&!@#&function Clear()!@#&  windows.clearScreen(colors.black)!@#&  term.setTextColor(colors.white)!@#&  term.setCursorPos(1, 1)!@#&end!@#&!@#&Main()",["Word"]="tArgs = {...}!@#&!@#&if OneOS then!@#&	--running under OneOS!@#&	OneOS.ToolBarColour = colours.grey!@#&	OneOS.ToolBarTextColour = colours.white!@#&end!@#&!@#&local _w, _h = term.getSize()!@#&!@#&local round = function(num, idp)!@#&	local mult = 10^(idp or 0)!@#&	return math.floor(num * mult + 0.5) / mult!@#&end!@#&!@#&UIColours = {!@#&	Toolbar = colours.grey,!@#&	ToolbarText = colours.lightGrey,!@#&	ToolbarSelected = colours.lightBlue,!@#&	ControlText = colours.white,!@#&	ToolbarItemTitle = colours.black,!@#&	Background = colours.lightGrey,!@#&	MenuBackground = colours.white,!@#&	MenuText = colours.black,!@#&	MenuSeparatorText = colours.grey,!@#&	MenuDisabledText = colours.lightGrey,!@#&	Shadow = colours.grey,!@#&	TransparentBackgroundOne = colours.white,!@#&	TransparentBackgroundTwo = colours.lightGrey,!@#&	MenuBarActive = colours.white!@#&}!@#&!@#&local getNames = peripheral.getNames or function()!@#&	local tResults = {}!@#&	for n,sSide in ipairs( rs.getSides() ) do!@#&		if peripheral.isPresent( sSide ) then!@#&			table.insert( tResults, sSide )!@#&			local isWireless = false!@#&			if not pcall(function()isWireless = peripheral.call(sSide, 'isWireless') end) then!@#&				isWireless = true!@#&			end     !@#&			if peripheral.getType( sSide ) == \"modem\" and not isWireless then!@#&				local tRemote = peripheral.call( sSide, \"getNamesRemote\" )!@#&				for n,sName in ipairs( tRemote ) do!@#&					table.insert( tResults, sName )!@#&				end!@#&			end!@#&		end!@#&	end!@#&	return tResults!@#&end!@#&!@#&Peripheral = {!@#&	GetPeripheral = function(_type)!@#&		for i, p in ipairs(Peripheral.GetPeripherals()) do!@#&			if p.Type == _type then!@#&				return p!@#&			end!@#&		end!@#&	end,!@#&!@#&	Call = function(type, ...)!@#&		local tArgs = {...}!@#&		local p = Peripheral.GetPeripheral(type)!@#&		peripheral.call(p.Side, unpack(tArgs))!@#&	end,!@#&!@#&	GetPeripherals = function(filterType)!@#&		local peripherals = {}!@#&		for i, side in ipairs(getNames()) do!@#&			local name = peripheral.getType(side):gsub(\"^%l\", string.upper)!@#&			local code = string.upper(side:sub(1,1))!@#&			if side:find('_') then!@#&				code = side:sub(side:find('_')+1)!@#&			end!@#&!@#&			local dupe = false!@#&			for i, v in ipairs(peripherals) do!@#&				if v[1] == name .. ' ' .. code then!@#&					dupe = true!@#&				end!@#&			end!@#&!@#&			if not dupe then!@#&				local _type = peripheral.getType(side)!@#&				local isWireless = false!@#&				if _type == 'modem' then!@#&					if not pcall(function()isWireless = peripheral.call(sSide, 'isWireless') end) then!@#&						isWireless = true!@#&					end     !@#&					if isWireless then!@#&						_type = 'wireless_modem'!@#&						name = 'W '..name!@#&					end!@#&				end!@#&				if not filterType or _type == filterType then!@#&					table.insert(peripherals, {Name = name:sub(1,8) .. ' '..code, Fullname = name .. ' ('..side:sub(1, 1):upper() .. side:sub(2, -1)..')', Side = side, Type = _type, Wireless = isWireless})!@#&				end!@#&			end!@#&		end!@#&		return peripherals!@#&	end,!@#&!@#&	PresentNamed = function(name)!@#&		return peripheral.isPresent(name)!@#&	end,!@#&!@#&	CallType = function(type, ...)!@#&		local tArgs = {...}!@#&		local p = GetPeripheral(type)!@#&		return peripheral.call(p.Side, unpack(tArgs))!@#&	end,!@#&!@#&	CallNamed = function(name, ...)!@#&		local tArgs = {...}!@#&		return peripheral.call(name, unpack(tArgs))!@#&	end!@#&}!@#&!@#&TextLine = {!@#&	Text = \"\",!@#&	Alignment = AlignmentLeft,!@#&!@#&	Initialise = function(self, text, alignment)!@#&		local new = {}    -- the new instance!@#&		setmetatable( new, {__index = self} )!@#&		new.Text = text!@#&		new.Alignment = alignment or AlignmentLeft!@#&		return new!@#&	end!@#&}!@#&!@#&local StripColours = function(str)!@#&	return str:gsub('['..string.char(14)..'-'..string.char(29)..']','')!@#&end!@#&!@#&Printer = {!@#&	Name = nil,!@#&	PeripheralType = 'printer',!@#&!@#&	paperLevel = function(self)!@#&		return Peripheral.CallNamed(self.Name, 'getPaperLevel')!@#&	end,!@#&!@#&	newPage = function(self)!@#&		return Peripheral.CallNamed(self.Name, 'newPage')!@#&	end,!@#&!@#&	endPage = function(self)!@#&		return Peripheral.CallNamed(self.Name, 'endPage')!@#&	end,!@#&!@#&	pageWrite = function(self, text)!@#&		return Peripheral.CallNamed(self.Name, 'write', text)!@#&	end,!@#&!@#&	setPageTitle = function(self, title)!@#&		return Peripheral.CallNamed(self.Name, 'setPageTitle', title)!@#&	end,!@#&!@#&	inkLevel = function(self)!@#&		return Peripheral.CallNamed(self.Name, 'getInkLevel')!@#&	end,!@#&!@#&	getCursorPos = function(self)!@#&		return Peripheral.CallNamed(self.Name, 'getCursorPos')!@#&	end,!@#&!@#&	setCursorPos = function(self, x, y)!@#&		return Peripheral.CallNamed(self.Name, 'setCursorPos', x, y)!@#&	end,!@#&!@#&	pageSize = function(self)!@#&		return Peripheral.CallNamed(self.Name, 'getPageSize')!@#&	end,!@#&!@#&	Present = function()!@#&		if Peripheral.GetPeripheral(Printer.PeripheralType) == nil then!@#&			return false!@#&		else!@#&			return true!@#&		end!@#&	end,!@#&!@#&	PrintLines = function(self, lines, title, copies)!@#&		local pages = {}!@#&		local pageLines = {}!@#&		for i, line in ipairs(lines) do!@#&			table.insert(pageLines, TextLine:Initialise(StripColours(line)))!@#&			if i % 25 == 0 then!@#&				table.insert(pages, pageLines)!@#&				pageLines = {}!@#&			end!@#&		end!@#&		if #pageLines ~= 0 then!@#&				table.insert(pages, pageLines)!@#&		end!@#&		return self:PrintPages(pages, title, copies)!@#&	end,!@#&!@#&	PrintPages = function(self, pages, title, copies)!@#&		copies = copies or 1!@#&		for c = 1, copies do!@#&			for p, page in ipairs(pages) do!@#&				if self:paperLevel() < #pages * copies then!@#&					return 'Add more paper to the printer'!@#&				end!@#&				if self:inkLevel() < #pages * copies then!@#&					return 'Add more ink to the printer'!@#&				end!@#&				self:newPage()!@#&				for i, line in ipairs(page) do!@#&					self:setCursorPos(1, i)!@#&					self:pageWrite(StripColours(line.Text))!@#&				end!@#&				if title then!@#&					self:setPageTitle(title)!@#&				end!@#&				self:endPage()!@#&			end!@#&		end!@#&	end,!@#&!@#&	Initialise = function(self, name)!@#&		if Printer.Present() then --fix!@#&			local new = {}    -- the new instance!@#&			setmetatable( new, {__index = self} )!@#&			if name and Peripheral.PresentNamed(name) then!@#&				new.Name = name!@#&			else!@#&				new.Name = Peripheral.GetPeripheral(Printer.PeripheralType).Side!@#&			end!@#&			return new!@#&		end!@#&	end!@#&}!@#&!@#&Clipboard = {!@#&	Content = nil,!@#&	Type = nil,!@#&	IsCut = false,!@#&!@#&	Empty = function()!@#&		Clipboard.Content = nil!@#&		Clipboard.Type = nil!@#&		Clipboard.IsCut = false!@#&	end,!@#&!@#&	isEmpty = function()!@#&		return Clipboard.Content == nil!@#&	end,!@#&!@#&	Copy = function(content, _type)!@#&		Clipboard.Content = content!@#&		Clipboard.Type = _type or 'generic'!@#&		Clipboard.IsCut = false!@#&	end,!@#&!@#&	Cut = function(content, _type)!@#&		Clipboard.Content = content!@#&		Clipboard.Type = _type or 'generic'!@#&		Clipboard.IsCut = true!@#&	end,!@#&!@#&	Paste = function()!@#&		local c, t = Clipboard.Content, Clipboard.Type!@#&		if Clipboard.IsCut then!@#&			Clipboard.Empty()!@#&		end!@#&		return c, t!@#&	end!@#&}!@#&!@#&if OneOS and OneOS.Clipboard then!@#&	Clipboard = OneOS.Clipboard!@#&end!@#&!@#&Drawing = {!@#&	!@#&	Screen = {!@#&		Width = _w,!@#&		Height = _h!@#&	},!@#&!@#&	DrawCharacters = function (x, y, characters, textColour,bgColour)!@#&		Drawing.WriteStringToBuffer(x, y, characters, textColour, bgColour)!@#&	end,!@#&	!@#&	DrawBlankArea = function (x, y, w, h, colour)!@#&		Drawing.DrawArea (x, y, w, h, \" \", 1, colour)!@#&	end,!@#&!@#&	DrawArea = function (x, y, w, h, character, textColour, bgColour)!@#&		--width must be greater than 1, other wise we get a stack overflow!@#&		if w < 0 then!@#&			w = w * -1!@#&		elseif w == 0 then!@#&			w = 1!@#&		end!@#&!@#&		for ix = 1, w do!@#&			local currX = x + ix - 1!@#&			for iy = 1, h do!@#&				local currY = y + iy - 1!@#&				Drawing.WriteToBuffer(currX, currY, character, textColour, bgColour)!@#&			end!@#&		end!@#&	end,!@#&!@#&	DrawImage = function(_x,_y,tImage, w, h)!@#&		if tImage then!@#&			for y = 1, h do!@#&				if not tImage[y] then!@#&					break!@#&				end!@#&				for x = 1, w do!@#&					if not tImage[y][x] then!@#&						break!@#&					end!@#&					local bgColour = tImage[y][x]!@#&		            local textColour = tImage.textcol[y][x] or colours.white!@#&		            local char = tImage.text[y][x]!@#&		            Drawing.WriteToBuffer(x+_x-1, y+_y-1, char, textColour, bgColour)!@#&				end!@#&			end!@#&		elseif w and h then!@#&			Drawing.DrawBlankArea(x, y, w, h, colours.green)!@#&		end!@#&	end,!@#&	--using .nft!@#&	LoadImage = function(path)!@#&		local image = {!@#&			text = {},!@#&			textcol = {}!@#&		}!@#&		local fs = fs!@#&		if OneOS then!@#&			fs = OneOS.FS!@#&		end!@#&		if fs.exists(path) then!@#&			local _open = io.open!@#&			if OneOS then!@#&				_open = OneOS.IO.open!@#&			end!@#&	        local file = _open(path, \"r\")!@#&	        local sLine = file:read()!@#&	        local num = 1!@#&	        while sLine do  !@#&	                table.insert(image, num, {})!@#&	                table.insert(image.text, num, {})!@#&	                table.insert(image.textcol, num, {})!@#&	                                            !@#&	                --As we're no longer 1-1, we keep track of what index to write to!@#&	                local writeIndex = 1!@#&	                --Tells us if we've hit a 30 or 31 (BG and FG respectively)- next char specifies the curr colour!@#&	                local bgNext, fgNext = false, false!@#&	                --The current background and foreground colours!@#&	                local currBG, currFG = nil,nil!@#&	                for i=1,#sLine do!@#&	                        local nextChar = string.sub(sLine, i, i)!@#&	                        if nextChar:byte() == 30 then!@#&                                bgNext = true!@#&	                        elseif nextChar:byte() == 31 then!@#&                                fgNext = true!@#&	                        elseif bgNext then!@#&                                currBG = Drawing.GetColour(nextChar)!@#&                                bgNext = false!@#&	                        elseif fgNext then!@#&                                currFG = Drawing.GetColour(nextChar)!@#&                                fgNext = false!@#&	                        else!@#&                                if nextChar ~= \" \" and currFG == nil then!@#&                                       currFG = colours.white!@#&                                end!@#&                                image[num][writeIndex] = currBG!@#&                                image.textcol[num][writeIndex] = currFG!@#&                                image.text[num][writeIndex] = nextChar!@#&                                writeIndex = writeIndex + 1!@#&	                        end!@#&	                end!@#&	                num = num+1!@#&	                sLine = file:read()!@#&	        end!@#&	        file:close()!@#&		end!@#&	 	return image!@#&	end,!@#&!@#&	DrawCharactersCenter = function(x, y, w, h, characters, textColour,bgColour)!@#&		w = w or Drawing.Screen.Width!@#&		h = h or Drawing.Screen.Height!@#&		x = x or 0!@#&		y = y or 0!@#&		x = math.ceil((w - #characters) / 2) + x!@#&		y = math.floor(h / 2) + y!@#&!@#&		Drawing.DrawCharacters(x, y, characters, textColour, bgColour)!@#&	end,!@#&!@#&	GetColour = function(hex)!@#&		if hex == ' ' then!@#&			return colours.transparent!@#&		end!@#&	    local value = tonumber(hex, 16)!@#&	    if not value then return nil end!@#&	    value = math.pow(2,value)!@#&	    return value!@#&	end,!@#&!@#&	Clear = function (_colour)!@#&		_colour = _colour or colours.black!@#&		Drawing.ClearBuffer()!@#&		Drawing.DrawBlankArea(1, 1, Drawing.Screen.Width, Drawing.Screen.Height, _colour)!@#&	end,!@#&!@#&	Buffer = {},!@#&	BackBuffer = {},!@#&!@#&	DrawBuffer = function()!@#&		for y,row in pairs(Drawing.Buffer) do!@#&			for x,pixel in pairs(row) do!@#&				local shouldDraw = true!@#&				local hasBackBuffer = true!@#&				if Drawing.BackBuffer[y] == nil or Drawing.BackBuffer[y][x] == nil or #Drawing.BackBuffer[y][x] ~= 3 then!@#&					hasBackBuffer = false!@#&				end!@#&				if hasBackBuffer and Drawing.BackBuffer[y][x][1] == Drawing.Buffer[y][x][1] and Drawing.BackBuffer[y][x][2] == Drawing.Buffer[y][x][2] and Drawing.BackBuffer[y][x][3] == Drawing.Buffer[y][x][3] then!@#&					shouldDraw = false!@#&				end!@#&				if shouldDraw then!@#&					term.setBackgroundColour(pixel[3])!@#&					term.setTextColour(pixel[2])!@#&					term.setCursorPos(x, y)!@#&					term.write(pixel[1])!@#&				end!@#&			end!@#&		end!@#&		Drawing.BackBuffer = Drawing.Buffer!@#&		Drawing.Buffer = {}!@#&		term.setCursorPos(1,1)!@#&	end,!@#&!@#&	ClearBuffer = function()!@#&		Drawing.Buffer = {}!@#&	end,!@#&!@#&	WriteStringToBuffer = function (x, y, characters, textColour,bgColour)!@#&		for i = 1, #characters do!@#&   			local character = characters:sub(i,i)!@#&   			Drawing.WriteToBuffer(x + i - 1, y, character, textColour, bgColour)!@#&		end!@#&	end,!@#&!@#&	WriteToBuffer = function(x, y, character, textColour,bgColour)!@#&		x = round(x)!@#&		y = round(y)!@#&		if bgColour == colours.transparent then!@#&			Drawing.Buffer[y] = Drawing.Buffer[y] or {}!@#&			Drawing.Buffer[y][x] = Drawing.Buffer[y][x] or {\"\", colours.white, colours.black}!@#&			Drawing.Buffer[y][x][1] = character!@#&			Drawing.Buffer[y][x][2] = textColour!@#&		else!@#&			Drawing.Buffer[y] = Drawing.Buffer[y] or {}!@#&			Drawing.Buffer[y][x] = {character, textColour, bgColour}!@#&		end!@#&	end,!@#&}!@#&!@#&Current = {!@#&	Document = nil,!@#&	TextInput = nil,!@#&	CursorPos = {1,1},!@#&	CursorColour = colours.black,!@#&	Selection = {8, 36},!@#&	Window = nil,!@#&	Modified = false,!@#&}!@#&!@#&local isQuitting = false!@#&!@#&function OrderSelection()!@#&	if Current.Selection then!@#&		if Current.Selection[1] <= Current.Selection[2] then!@#&			return Current.Selection!@#&		else!@#&			return {Current.Selection[2], Current.Selection[1]}!@#&		end!@#&	end!@#&end!@#&!@#&function StripColours(str)!@#&	return str:gsub('['..string.char(14)..'-'..string.char(29)..']','')!@#&end!@#&!@#&function FindColours(str)!@#&	local _, count = str:gsub('['..string.char(14)..'-'..string.char(29)..']','')!@#&	return count!@#&end!@#&!@#&ColourFromCharacter = function(character)!@#&	local n = character:byte() - 14!@#&	if n > 16 then!@#&		return nil!@#&	else!@#&		return 2^n!@#&	end!@#&end!@#&!@#&CharacterFromColour = function(colour)!@#&	return string.char(math.floor(math.log(colour)/math.log(2))+14)!@#&end!@#&!@#&Events = {}!@#&!@#&Button = {!@#&	X = 1,!@#&	Y = 1,!@#&	Width = 0,!@#&	Height = 0,!@#&	BackgroundColour = colours.lightGrey,!@#&	TextColour = colours.white,!@#&	ActiveBackgroundColour = colours.lightGrey,!@#&	Text = \"\",!@#&	Parent = nil,!@#&	_Click = nil,!@#&	Toggle = nil,!@#&!@#&	AbsolutePosition = function(self)!@#&		return self.Parent:AbsolutePosition()!@#&	end,!@#&!@#&	Draw = function(self)!@#&		local bg = self.BackgroundColour!@#&		local tc = self.TextColour!@#&		if type(bg) == 'function' then!@#&			bg = bg()!@#&		end!@#&!@#&		if self.Toggle then!@#&			tc = UIColours.MenuBarActive!@#&			bg = self.ActiveBackgroundColour!@#&		end!@#&!@#&		local pos = GetAbsolutePosition(self)!@#&		Drawing.DrawBlankArea(pos.X, pos.Y, self.Width, self.Height, bg)!@#&		Drawing.DrawCharactersCenter(pos.X, pos.Y, self.Width, self.Height, self.Text, tc, bg)!@#&	end,!@#&!@#&	Initialise = function(self, x, y, width, height, backgroundColour, parent, click, text, textColour, toggle, activeBackgroundColour)!@#&		local new = {}    -- the new instance!@#&		setmetatable( new, {__index = self} )!@#&		height = height or 1!@#&		new.Width = width or #text + 2!@#&		new.Height = height!@#&		new.Y = y!@#&		new.X = x!@#&		new.Text = text or \"\"!@#&		new.BackgroundColour = backgroundColour or colours.lightGrey!@#&		new.TextColour = textColour or colours.white!@#&		new.ActiveBackgroundColour = activeBackgroundColour or colours.lightGrey!@#&		new.Parent = parent!@#&		new._Click = click!@#&		new.Toggle = toggle!@#&		return new!@#&	end,!@#&!@#&	Click = function(self, side, x, y)!@#&		if self._Click then!@#&			if self:_Click(side, x, y, not self.Toggle) ~= false and self.Toggle ~= nil then!@#&				self.Toggle = not self.Toggle!@#&				Draw()!@#&			end!@#&			return true!@#&		else!@#&			return false!@#&		end!@#&	end!@#&}!@#&!@#&TextBox = {!@#&	X = 1,!@#&	Y = 1,!@#&	Width = 0,!@#&	Height = 0,!@#&	BackgroundColour = colours.lightGrey,!@#&	TextColour = colours.black,!@#&	Parent = nil,!@#&	TextInput = nil,!@#&	Placeholder = '',!@#&!@#&	AbsolutePosition = function(self)!@#&		return self.Parent:AbsolutePosition()!@#&	end,!@#&!@#&	Draw = function(self)		!@#&		local pos = GetAbsolutePosition(self)!@#&		Drawing.DrawBlankArea(pos.X, pos.Y, self.Width, self.Height, self.BackgroundColour)!@#&		local text = self.TextInput.Value!@#&		if #tostring(text) > (self.Width - 2) then!@#&			text = text:sub(#text-(self.Width - 3))!@#&			if Current.TextInput == self.TextInput then!@#&				Current.CursorPos = {pos.X + 1 + self.Width-2, pos.Y}!@#&			end!@#&		else!@#&			if Current.TextInput == self.TextInput then!@#&				Current.CursorPos = {pos.X + 1 + self.TextInput.CursorPos, pos.Y}!@#&			end!@#&		end!@#&		!@#&		if #tostring(text) == 0 then!@#&			Drawing.DrawCharacters(pos.X + 1, pos.Y, self.Placeholder, colours.lightGrey, self.BackgroundColour)!@#&		else!@#&			Drawing.DrawCharacters(pos.X + 1, pos.Y, text, self.TextColour, self.BackgroundColour)!@#&		end!@#&!@#&		term.setCursorBlink(true)!@#&		!@#&		Current.CursorColour = self.TextColour!@#&	end,!@#&!@#&	Initialise = function(self, x, y, width, height, parent, text, backgroundColour, textColour, done, numerical)!@#&		local new = {}    -- the new instance!@#&		setmetatable( new, {__index = self} )!@#&		height = height or 1!@#&		new.Width = width or #text + 2!@#&		new.Height = height!@#&		new.Y = y!@#&		new.X = x!@#&		new.TextInput = TextInput:Initialise(text or '', function(key)!@#&			if done then!@#&				done(key)!@#&			end!@#&			Draw()!@#&		end, numerical)!@#&		new.BackgroundColour = backgroundColour or colours.lightGrey!@#&		new.TextColour = textColour or colours.black!@#&		new.Parent = parent!@#&		return new!@#&	end,!@#&!@#&	Click = function(self, side, x, y)!@#&		Current.Input = self.TextInput!@#&		self:Draw()!@#&	end!@#&}!@#&!@#&TextInput = {!@#&	Value = \"\",!@#&	Change = nil,!@#&	CursorPos = nil,!@#&	Numerical = false,!@#&	IsDocument = nil,!@#&!@#&	Initialise = function(self, value, change, numerical, isDocument)!@#&		local new = {}    -- the new instance!@#&		setmetatable( new, {__index = self} )!@#&		new.Value = tostring(value)!@#&		new.Change = change!@#&		new.CursorPos = #tostring(value)!@#&		new.Numerical = numerical!@#&		new.IsDocument = isDocument or false!@#&		return new!@#&	end,!@#&!@#&	Insert = function(self, str)!@#&		if self.Numerical then!@#&			str = tostring(tonumber(str))!@#&		end!@#&!@#&		local selection = OrderSelection()!@#&!@#&		if self.IsDocument and selection then!@#&			self.Value = string.sub(self.Value, 1, selection[1]-1) .. str .. string.sub( self.Value, selection[2]+2)!@#&			self.CursorPos = selection[1]!@#&			Current.Selection = nil!@#&		else!@#&			local _, newLineAdjust = string.gsub(self.Value:sub(1, self.CursorPos), '\\n','')!@#&!@#&			self.Value = string.sub(self.Value, 1, self.CursorPos + newLineAdjust) .. str .. string.sub( self.Value, self.CursorPos + 1  + newLineAdjust)!@#&			self.CursorPos = self.CursorPos + 1!@#&		end!@#&		!@#&		self.Change(key)!@#&	end,!@#&!@#&	Extract = function(self, remove)!@#&		local selection = OrderSelection()!@#&		if self.IsDocument and selection then!@#&			local _, newLineAdjust = string.gsub(self.Value:sub(selection[1], selection[2]), '\\n','')!@#&			local str = string.sub(self.Value, selection[1], selection[2]+1+newLineAdjust)!@#&			if remove then!@#&				self.Value = string.sub(self.Value, 1, selection[1]-1) .. string.sub( self.Value, selection[2]+2+newLineAdjust)!@#&				self.CursorPos = selection[1] - 1!@#&				Current.Selection = nil!@#&			end!@#&			return str!@#&		end!@#&	end,!@#&!@#&	Char = function(self, char)!@#&		if char == 'nil' then!@#&			return!@#&		end!@#&		self:Insert(char)!@#&	end,!@#&!@#&	Key = function(self, key)!@#&		if key == keys.enter then!@#&			if self.IsDocument then!@#&				self.Value = string.sub(self.Value, 1, self.CursorPos ) .. '\\n' .. string.sub( self.Value, self.CursorPos + 1 )!@#&				self.CursorPos = self.CursorPos + 1!@#&			end!@#&			self.Change(key)		!@#&		elseif key == keys.left then!@#&			-- Left!@#&			if self.CursorPos > 0 then!@#&				local colShift = FindColours(string.sub( self.Value, self.CursorPos, self.CursorPos))!@#&				self.CursorPos = self.CursorPos - 1 - colShift!@#&				self.Change(key)!@#&			end!@#&			!@#&		elseif key == keys.right then!@#&			-- Right				!@#&			if self.CursorPos < string.len(self.Value) then!@#&				local colShift = FindColours(string.sub( self.Value, self.CursorPos+1, self.CursorPos+1))!@#&				self.CursorPos = self.CursorPos + 1 + colShift!@#&				self.Change(key)!@#&			end!@#&		!@#&		elseif key == keys.backspace then!@#&			-- Backspace!@#&			if self.IsDocument and Current.Selection then!@#&				self:Extract(true)!@#&				self.Change(key)!@#&			elseif self.CursorPos > 0 then!@#&				local colShift = FindColours(string.sub( self.Value, self.CursorPos, self.CursorPos))!@#&				local _, newLineAdjust = string.gsub(self.Value:sub(1, self.CursorPos), '\\n','')!@#&!@#&				self.Value = string.sub( self.Value, 1, self.CursorPos - 1 - colShift + newLineAdjust) .. string.sub( self.Value, self.CursorPos + 1 - colShift + newLineAdjust)!@#&				self.CursorPos = self.CursorPos - 1 - colShift!@#&				self.Change(key)!@#&			end!@#&		elseif key == keys.home then!@#&			-- Home!@#&			self.CursorPos = 0!@#&			self.Change(key)!@#&		elseif key == keys.delete then!@#&			if self.IsDocument and Current.Selection then!@#&				self:Extract(true)!@#&				self.Change(key)!@#&			elseif self.CursorPos < string.len(self.Value) then!@#&				self.Value = string.sub( self.Value, 1, self.CursorPos ) .. string.sub( self.Value, self.CursorPos + 2 )				!@#&				self.Change(key)!@#&			end!@#&		elseif key == keys[\"end\"] then!@#&			-- End!@#&			self.CursorPos = string.len(self.Value)!@#&			self.Change(key)!@#&		elseif key == keys.up and self.IsDocument then!@#&			-- Up!@#&			if Current.Document.CursorPos then!@#&				local page = Current.Document.Pages[Current.Document.CursorPos.Page]!@#&				self.CursorPos = page:GetCursorPosFromPoint(Current.Document.CursorPos.Collum + page.MarginX, Current.Document.CursorPos.Line - page.MarginY - 1 + Current.Document.ScrollBar.Scroll, true)!@#&				self.Change(key)!@#&			end!@#&		elseif key == keys.down and self.IsDocument then!@#&			-- Down!@#&			if Current.Document.CursorPos then!@#&				local page = Current.Document.Pages[Current.Document.CursorPos.Page]!@#&				self.CursorPos = page:GetCursorPosFromPoint(Current.Document.CursorPos.Collum + page.MarginX, Current.Document.CursorPos.Line - page.MarginY + 1 + Current.Document.ScrollBar.Scroll, true)!@#&				self.Change(key)!@#&			end!@#&		end!@#&	end!@#&}!@#&!@#&Menu = {!@#&	X = 0,!@#&	Y = 0,!@#&	Width = 0,!@#&	Height = 0,!@#&	Owner = nil,!@#&	Items = {},!@#&	RemoveTop = false,!@#&!@#&	Draw = function(self)!@#&		Drawing.DrawBlankArea(self.X + 1, self.Y + 1, self.Width, self.Height, UIColours.Shadow)!@#&		if not self.RemoveTop then!@#&			Drawing.DrawBlankArea(self.X, self.Y, self.Width, self.Height, UIColours.MenuBackground)!@#&			for i, item in ipairs(self.Items) do!@#&				if item.Separator then!@#&					Drawing.DrawArea(self.X, self.Y + i, self.Width, 1, '-', colours.grey, UIColours.MenuBackground)!@#&				else!@#&					local textColour = item.Colour or UIColours.MenuText!@#&					if (item.Enabled and type(item.Enabled) == 'function' and item.Enabled() == false) or item.Enabled == false then!@#&						textColour = UIColours.MenuDisabledText!@#&					end!@#&					Drawing.DrawCharacters(self.X + 1, self.Y + i, item.Title, textColour, UIColours.MenuBackground)!@#&				end!@#&			end!@#&		else!@#&			Drawing.DrawBlankArea(self.X, self.Y, self.Width, self.Height, UIColours.MenuBackground)!@#&			for i, item in ipairs(self.Items) do!@#&				if item.Separator then!@#&					Drawing.DrawArea(self.X, self.Y + i - 1, self.Width, 1, '-', colours.grey, UIColours.MenuBackground)!@#&				else!@#&					local textColour = item.Colour or UIColours.MenuText!@#&					if (item.Enabled and type(item.Enabled) == 'function' and item.Enabled() == false) or item.Enabled == false then!@#&						textColour = UIColours.MenuDisabledText!@#&					end!@#&					Drawing.DrawCharacters(self.X + 1, self.Y + i - 1, item.Title, textColour, UIColours.MenuBackground)!@#&!@#&					Drawing.DrawCharacters(self.X - 1 + self.Width-#item.KeyName, self.Y + i - 1, item.KeyName, textColour, UIColours.MenuBackground)!@#&				end!@#&			end!@#&		end!@#&	end,!@#&!@#&	NameForKey = function(self, key)!@#&		if key == keys.leftCtrl then!@#&			return '^'!@#&		elseif key == keys.tab then!@#&			return 'Tab'!@#&		elseif key == keys.delete then!@#&			return 'Delete'!@#&		elseif key == keys.n then!@#&			return 'N'!@#&		elseif key == keys.a then!@#&			return 'A'!@#&		elseif key == keys.s then!@#&			return 'S'!@#&		elseif key == keys.o then!@#&			return 'O'!@#&		elseif key == keys.z then!@#&			return 'Z'!@#&		elseif key == keys.y then!@#&			return 'Y'!@#&		elseif key == keys.c then!@#&			return 'C'!@#&		elseif key == keys.x then!@#&			return 'X'!@#&		elseif key == keys.v then!@#&			return 'V'!@#&		elseif key == keys.r then!@#&			return 'R'!@#&		elseif key == keys.l then!@#&			return 'L'!@#&		elseif key == keys.t then!@#&			return 'T'!@#&		elseif key == keys.h then!@#&			return 'H'!@#&		elseif key == keys.e then!@#&			return 'E'!@#&		elseif key == keys.p then!@#&			return 'P'!@#&		elseif key == keys.f then!@#&			return 'F'!@#&		elseif key == keys.m then!@#&			return 'M'!@#&		elseif key == keys.q then!@#&			return 'Q'!@#&		else!@#&			return '?'		!@#&		end!@#&	end,!@#&!@#&	Initialise = function(self, x, y, items, owner, removeTop)!@#&		local new = {}    -- the new instance!@#&		setmetatable( new, {__index = self} )!@#&		if not owner then!@#&			return!@#&		end!@#&!@#&		local keyNames = {}!@#&!@#&		for i, v in ipairs(items) do!@#&			items[i].KeyName = ''!@#&			if v.Keys then!@#&				for _i, key in ipairs(v.Keys) do!@#&					items[i].KeyName = items[i].KeyName .. self:NameForKey(key)!@#&				end!@#&			end!@#&			if items[i].KeyName ~= '' then!@#&				table.insert(keyNames, items[i].KeyName)!@#&			end!@#&		end!@#&		local keysLength = LongestString(keyNames)!@#&		if keysLength > 0 then!@#&			keysLength = keysLength + 2!@#&		end!@#&!@#&		new.Width = LongestString(items, 'Title') + 2 + keysLength!@#&		if new.Width < 10 then!@#&			new.Width = 10!@#&		end!@#&		new.Height = #items + 2!@#&		new.RemoveTop = removeTop or false!@#&		if removeTop then!@#&			new.Height = new.Height - 1!@#&		end!@#&		!@#&		if y < 1 then!@#&			y = 1!@#&		end!@#&		if x < 1 then!@#&			x = 1!@#&		end!@#&!@#&		if y + new.Height > Drawing.Screen.Height + 1 then!@#&			y = Drawing.Screen.Height - new.Height!@#&		end!@#&		if x + new.Width > Drawing.Screen.Width + 1 then!@#&			x = Drawing.Screen.Width - new.Width!@#&		end!@#&!@#&!@#&		new.Y = y!@#&		new.X = x!@#&		new.Items = items!@#&		new.Owner = owner!@#&		return new!@#&	end,!@#&!@#&	New = function(self, x, y, items, owner, removeTop)!@#&		if Current.Menu and Current.Menu.Owner == owner then!@#&			Current.Menu = nil!@#&			return!@#&		end!@#&!@#&		local new = self:Initialise(x, y, items, owner, removeTop)!@#&		Current.Menu = new!@#&		return new!@#&	end,!@#&!@#&	Click = function(self, side, x, y)!@#&		local i = y-1!@#&		if self.RemoveTop then!@#&			i = y!@#&		end!@#&		if i >= 1 and y < self.Height then!@#&			if not ((self.Items[i].Enabled and type(self.Items[i].Enabled) == 'function' and self.Items[i].Enabled() == false) or self.Items[i].Enabled == false) and self.Items[i].Click then!@#&				self.Items[i]:Click()!@#&				if Current.Menu.Owner and Current.Menu.Owner.Toggle then!@#&					Current.Menu.Owner.Toggle = false!@#&				end!@#&				Current.Menu = nil!@#&				self = nil!@#&			end!@#&			return true!@#&		end!@#&	end!@#&}!@#&!@#&MenuBar = {!@#&	X = 1,!@#&	Y = 1,!@#&	Width = Drawing.Screen.Width,!@#&	Height = 1,!@#&	MenuBarItems = {},!@#&!@#&	AbsolutePosition = function(self)!@#&		return {X = self.X, Y = self.Y}!@#&	end,!@#&!@#&	Draw = function(self)!@#&		--Drawing.DrawArea(self.X - 1, self.Y, 1, self.Height, \"|\", UIColours.ToolbarText, UIColours.Background)!@#&!@#&		Drawing.DrawBlankArea(self.X, self.Y, self.Width, self.Height, colours.grey)!@#&		for i, button in ipairs(self.MenuBarItems) do!@#&			button:Draw()!@#&		end!@#&	end,!@#&!@#&	Initialise = function(self, items)!@#&		local new = {}    -- the new instance!@#&		setmetatable( new, {__index = self} )!@#&		new.X = 1!@#&		new.Y = 1!@#&		new.MenuBarItems = items!@#&		return new!@#&	end,!@#&!@#&	AddToolbarItem = function(self, item)!@#&		table.insert(self.ToolbarItems, item)!@#&		self:CalculateToolbarItemPositions()!@#&	end,!@#&!@#&	CalculateToolbarItemPositions = function(self)!@#&		local currY = 1!@#&		for i, toolbarItem in ipairs(self.ToolbarItems) do!@#&			toolbarItem.Y = currY!@#&			currY = currY + toolbarItem.Height!@#&		end!@#&	end,!@#&!@#&	Click = function(self, side, x, y)!@#&		for i, item in ipairs(self.MenuBarItems) do!@#&			if item.X <= x and item.X + item.Width > x then!@#&				if item:Click(item, side, x - item.X + 1, 1) then!@#&					return true!@#&				end!@#&			end!@#&		end!@#&		return false!@#&	end!@#&}!@#&!@#&TextFormatPlainText = 1!@#&TextFormatInkText = 2!@#&!@#&Document = {!@#&	X = 1,!@#&	Y = 1,!@#&	PageSize = {Width = 25, Height = 21},!@#&	TextInput = nil,!@#&	Pages = {},!@#&	Format = TextFormatPlainText,!@#&	Title = '',!@#&	Path = nil,!@#&	ScrollBar = nil,!@#&	Lines = {},!@#&	CursorPos = nil,!@#&!@#&	CalculateLineWrapping = function(self)!@#&		local limit = self.PageSize.Width!@#&		local text = self.TextInput.Value!@#&        local lines = {''}!@#&        local words = {}!@#&!@#&        for word, space in text:gmatch('(%S+)(%s*)') do!@#&        	for i = 1, math.ceil(#word/limit) do!@#&        		local _space = ''!@#&        		if i == math.ceil(#word/limit) then!@#&        			_space = space!@#&        		end!@#&        		table.insert(words, {word:sub(1+limit*(i-1), limit*i), _space})!@#&        	end!@#&        end!@#&!@#&        for i, ws in ipairs(words) do!@#&        		local word = ws[1]!@#&        		local space = ws[2]!@#&                local temp = lines[#lines] .. word .. space:gsub('\\n','')!@#&                if #temp > limit then!@#&                    table.insert(lines, '')!@#&                end!@#&                if space:find('\\n') then!@#&                    lines[#lines] = lines[#lines] .. word!@#&                    !@#&                    space = space:gsub('\\n', function()!@#&                            table.insert(lines, '')!@#&                            return ''!@#&                    end)!@#&                else!@#&                    lines[#lines] = lines[#lines] .. word .. space!@#&                end!@#&        end!@#&        return lines!@#&	end,!@#&!@#&	CalculateCursorPos = function(self)!@#&		local passedCharacters = 0!@#&		Current.CursorPos = nil!@#&		for p, page in ipairs(self.Pages) do!@#&			page:Draw()!@#&			if not Current.CursorPos then!@#&				for i, line in ipairs(page.Lines) do!@#&					local relCursor = self.TextInput.CursorPos - FindColours(self.TextInput.Value:sub(1,self.TextInput.CursorPos))!@#&					if passedCharacters + #StripColours(line.Text:gsub('\\n','')) >= relCursor then!@#&						Current.CursorPos = {self.X + page.MarginX + (relCursor - passedCharacters), page.Y + 1 + i}!@#&						self.CursorPos = {Page = p, Line = i, Collum = relCursor - passedCharacters - FindColours(self.TextInput.Value:sub(1,self.TextInput.CursorPos-1))}!@#&						break!@#&					end!@#&					passedCharacters = passedCharacters + #StripColours(line.Text:gsub('\\n',''))!@#&				end!@#&			end!@#&		end!@#&	end,!@#&!@#&	Draw = function(self)!@#&		self:CalculatePages()!@#&		self:CalculateCursorPos()!@#&		self.ScrollBar:Draw()!@#&	end,!@#&!@#&	CalculatePages = function(self)!@#&		self.Pages = {}!@#&		local lines = self:CalculateLineWrapping()!@#&		self.Lines = lines!@#&		local pageLines = {}!@#&		local totalPageHeight = (3 + self.PageSize.Height + 2 * Page.MarginY)!@#&		for i, line in ipairs(lines) do!@#&			table.insert(pageLines, TextLine:Initialise(line))!@#&			if i % self.PageSize.Height == 0 then!@#&				table.insert(self.Pages, Page:Initialise(self, pageLines, 3 - self.ScrollBar.Scroll + totalPageHeight*(#self.Pages)))!@#&				pageLines = {}!@#&			end!@#&		end!@#&		if #pageLines ~= 0 then!@#&			table.insert(self.Pages, Page:Initialise(self, pageLines, 3 - self.ScrollBar.Scroll + totalPageHeight*(#self.Pages)))!@#&		end!@#&!@#&		self.ScrollBar.MaxScroll = totalPageHeight*(#self.Pages) - Drawing.Screen.Height + 1!@#&	end,!@#&!@#&	ScrollToCursor = function(self)!@#&		self:CalculateCursorPos()!@#&		if Current.CursorPos and !@#&			(Current.CursorPos[2] > Drawing.Screen.Height !@#&			or Current.CursorPos[2] < 2) then!@#&			self.ScrollBar:DoScroll(Current.CursorPos[2] - Drawing.Screen.Height)!@#&		end!@#&	end,!@#&!@#&	SetSelectionColour = function(self, colour)!@#&		local selection = OrderSelection()!@#&		local text = self.TextInput:Extract(true)!@#&		local colChar = CharacterFromColour(colour)!@#&		local precedingColour = ''!@#&		if FindColours(self.TextInput.Value:sub(self.TextInput.CursorPos+1, self.TextInput.CursorPos+1)) == 0 then!@#&			for i = 1, self.TextInput.CursorPos do!@#&				local c = self.TextInput.Value:sub(self.TextInput.CursorPos - i,self.TextInput.CursorPos - i)!@#&				if FindColours(c) == 1 then!@#&					precedingColour = c!@#&					break!@#&				end!@#&			end!@#&			if precedingColour == '' then!@#&				precedingColour = CharacterFromColour(colours.black)!@#&			end!@#&		end!@#&!@#&		self.TextInput:Insert(colChar..StripColours(text)..precedingColour)!@#&		--text = text:gsub('['..string.char(14)..'-'..string.char(29)..']','')!@#&	end,!@#&!@#&	Initialise = function(self, text, title, path)!@#&		local new = {}    -- the new instance!@#&		setmetatable( new, {__index = self} )!@#&		new.Title = title or 'New Document'!@#&		new.Path = path!@#&		new.X = (Drawing.Screen.Width - (new.PageSize.Width + 2*(Page.MarginX)))/2!@#&		new.Y = 2!@#&		new.TextInput = TextInput:Initialise(text, function()!@#&			new:ScrollToCursor() !@#&			Current.Modified = true!@#&			Draw()!@#&		end, false, true)!@#&		new.ScrollBar = ScrollBar:Initialise(Drawing.Screen.Width, new.Y, Drawing.Screen.Height-1, 0, nil, nil, nil, function()end)!@#&		Current.TextInput = new.TextInput!@#&		Current.ScrollBar = new.ScrollBar!@#&		return new!@#&	end!@#&}!@#&!@#&ScrollBar = {!@#&	X = 1,!@#&	Y = 1,!@#&	Width = 1,!@#&	Height = 1,!@#&	BackgroundColour = colours.grey,!@#&	BarColour = colours.lightBlue,!@#&	Parent = nil,!@#&	Change = nil,!@#&	Scroll = 0,!@#&	MaxScroll = 0,!@#&	ClickPoint = nil,!@#&!@#&	AbsolutePosition = function(self)!@#&		return self.Parent:AbsolutePosition()!@#&	end,!@#&!@#&	Draw = function(self)!@#&		local pos = GetAbsolutePosition(self)!@#&	    local barHeight = self.Height - self.MaxScroll!@#&	    if barHeight < 3 then!@#&	      barHeight = 3!@#&	    end!@#&	    local percentage = (self.Scroll/self.MaxScroll)!@#&!@#&	    Drawing.DrawBlankArea(pos.X, pos.Y, self.Width, self.Height, self.BackgroundColour)!@#&	    Drawing.DrawBlankArea(pos.X, pos.Y + round(self.Height*percentage - barHeight*percentage), self.Width, barHeight, self.BarColour)!@#&	end,!@#&!@#&	Initialise = function(self, x, y, height, maxScroll, backgroundColour, barColour, parent, change)!@#&		local new = {}    -- the new instance!@#&		setmetatable( new, {__index = self} )!@#&		new.Width = 1!@#&		new.Height = height!@#&		new.Y = y!@#&		new.X = x!@#&		new.BackgroundColour = backgroundColour or colours.grey!@#&		new.BarColour = barColour or colours.lightBlue!@#&		new.Parent = parent!@#&		new.Change = change or function()end!@#&		new.MaxScroll = maxScroll!@#&		new.Scroll = 0!@#&		return new!@#&	end,!@#&!@#&	DoScroll = function(self, amount)!@#&		amount = round(amount)!@#&		if self.Scroll < 0 or self.Scroll > self.MaxScroll then!@#&			return false!@#&		end!@#&		self.Scroll = self.Scroll + amount!@#&		if self.Scroll < 0 then!@#&			self.Scroll = 0!@#&		elseif self.Scroll > self.MaxScroll then!@#&			self.Scroll = self.MaxScroll!@#&		end!@#&		self.Change()!@#&		return true!@#&	end,!@#&!@#&	Click = function(self, side, x, y, drag)!@#&		local percentage = (self.Scroll/self.MaxScroll)!@#&		local barHeight = (self.Height - self.MaxScroll)!@#&		if barHeight < 3 then!@#&			barHeight = 3!@#&		end!@#&		local relScroll = (self.MaxScroll*(y + barHeight*percentage)/self.Height)!@#&		if not drag then!@#&			self.ClickPoint = self.Scroll - relScroll + 1!@#&		end!@#&!@#&		if self.Scroll-1 ~= relScroll then!@#&			self:DoScroll(relScroll-self.Scroll-1 + self.ClickPoint)!@#&		end!@#&		return true!@#&	end!@#&}!@#&!@#&AlignmentLeft = 1!@#&AlignmentCentre = 2!@#&AlignmentRight = 3!@#&!@#&TextLine = {!@#&	Text = \"\",!@#&	Alignment = AlignmentLeft,!@#&!@#&	Initialise = function(self, text, alignment)!@#&		local new = {}    -- the new instance!@#&		setmetatable( new, {__index = self} )!@#&		new.Text = text!@#&		new.Alignment = alignment or AlignmentLeft!@#&		return new!@#&	end!@#&}!@#&!@#&local clickPos = 1!@#&Page = {!@#&	X = 1,!@#&	Y = 1,!@#&	Width = 1,!@#&	Height = 1,!@#&	MarginX = 3,!@#&	MarginY = 2,!@#&	BackgroundColour = colours.white,!@#&	TextColour = colours.white,!@#&	ActiveBackgroundColour = colours.lightGrey,!@#&	Lines = {},!@#&	Parent = nil,!@#&!@#&	AbsolutePosition = function(self)!@#&		return self.Parent:AbsolutePosition()!@#&	end,!@#&!@#&	Draw = function(self)!@#&		local pos = GetAbsolutePosition(self)!@#&!@#&		if pos.Y > Drawing.Screen.Height or pos.Y + self.Height < 1 then!@#&			return!@#&		end!@#&!@#&		Drawing.DrawBlankArea(pos.X+self.Width,pos.Y -1 + 1, 1, self.Height, UIColours.Shadow)!@#&		Drawing.DrawBlankArea(pos.X+1, pos.Y -1 + self.Height, self.Width, 1, UIColours.Shadow)!@#&		Drawing.DrawBlankArea(pos.X, pos.Y -1, self.Width, self.Height, self.BackgroundColour)!@#&!@#&		local textColour = self.TextColour!@#&		if not Current.Selection then!@#&			for i, line in ipairs(self.Lines) do!@#&				local _c = 1!@#&				for c = 1, #line.Text do!@#&					local col = ColourFromCharacter(line.Text:sub(c,c))!@#&					if col then!@#&						textColour = col!@#&					else!@#&						Drawing.WriteToBuffer(pos.X + self.MarginX - 1 + _c, pos.Y -2 + i + self.MarginY, line.Text:sub(c,c), textColour, self.BackgroundColour)!@#&						_c = _c + 1!@#&					end!@#&				end!@#&			end!@#&		else!@#&			local selection = OrderSelection()!@#&			local char = 1!@#&			local textColour = self.TextColour!@#&			for i, line in ipairs(self.Lines) do!@#&				local _c = 1!@#&				for c = 1, #line.Text do!@#&					local col = ColourFromCharacter(line.Text:sub(c,c))!@#&					if col then!@#&						textColour = col!@#&					else!@#&						local tc = textColour!@#&						local colour = colours.white!@#&						if char >= selection[1] and char <= selection[2] then!@#&							colour = colours.lightBlue!@#&							tc = colours.white!@#&						end!@#&!@#&						Drawing.WriteToBuffer(pos.X + self.MarginX - 1 + _c, pos.Y -2 + i + self.MarginY, line.Text:sub(c,c), tc, colour)!@#&						_c = _c + 1!@#&					end!@#&					char = char + 1!@#&				end!@#&			end!@#&		end!@#&	end,!@#&!@#&	Initialise = function(self, parent, lines, y)!@#&		local new = {}    -- the new instanc!@#&		setmetatable( new, {__index = self} )!@#&		new.Height = parent.PageSize.Height + 2 * self.MarginY!@#&		new.Width = parent.PageSize.Width + 2 * self.MarginX!@#&		new.X = 1!@#&		new.Y = y or 1!@#&		new.Lines = lines or {}!@#&		new.BackgroundColour = colours.white!@#&		new.TextColour = colours.black!@#&		new.Parent = parent!@#&		new.ClickPos = 1!@#&		return new!@#&	end,!@#&!@#&	GetCursorPosFromPoint = function(self, x, y, rel)!@#&		local pos = GetAbsolutePosition(self)!@#&		if rel then!@#&			pos = {Y = 0, X = 0}!@#&		end!@#&		local row = y - pos.Y + self.MarginY - self.Parent.ScrollBar.Scroll!@#&		local col = x - self.MarginX - pos.X + 1!@#&		local cursorPos = 0!@#&		if row <= 0 or col <= 0 then!@#&			return 0!@#&		end!@#&!@#&		if row > #self.Lines then!@#&			for i, v in ipairs(self.Lines) do!@#&				cursorPos = cursorPos + #v.Text-- - FindColours(v.Text)!@#&			end!@#&			return cursorPos!@#&		end!@#&!@#&		--term.setCursorPos(1,3)!@#&		local prevLineCount = 0!@#&		for i, v in ipairs(self.Lines) do!@#&			if i == row then!@#&				if col > #v.Text then!@#&					col = #v.Text-- + FindColours(v.Text)!@#&				else!@#&					col = col + FindColours(v.Text:sub(1, col))!@#&				end!@#&				--term.setCursorPos(1,2)!@#&				--print(prevLineCount)!@#&				cursorPos = cursorPos + col + 2 - i - prevLineCount!@#&				break!@#&			else!@#&				prevLineCount = FindColours(v.Text)!@#&				if prevLineCount ~= 0 then!@#&					prevLineCount = prevLineCount!@#&				end!@#&				cursorPos = cursorPos + #v.Text + 2 - i + FindColours(v.Text)!@#&			end!@#&		end!@#&!@#&		return cursorPos - 2!@#&	end,!@#&!@#&	Click = function(self, side, x, y, drag)!@#&		local cursorPos = self:GetCursorPosFromPoint(x, y)!@#&		self.Parent.TextInput.CursorPos = cursorPos!@#&		if drag == nil then!@#&			Current.Selection = nil!@#&			clickPos = x!@#&		else!@#&			local relCursor = cursorPos-- - FindColours(self.Parent.TextInput.Value:sub(1,cursorPos)) + 1!@#&			if not Current.Selection then!@#&				local adder = 1!@#&				if clickPos and clickPos < x then!@#&					adder = 0!@#&				end!@#&				Current.Selection = {relCursor + adder, relCursor + 1 + adder}!@#&			else!@#&				Current.Selection[2] = relCursor + 1!@#&			end!@#&		end!@#&		Draw()!@#&		return true!@#&	end!@#&}!@#&!@#&function GetAbsolutePosition(object)!@#&	local obj = object!@#&	local i = 0!@#&	local x = 1!@#&	local y = 1!@#&	while true do!@#&		x = x + obj.X - 1!@#&		y = y + obj.Y - 1!@#&!@#&		if not obj.Parent then!@#&			return {X = x, Y = y}!@#&		end!@#&!@#&		obj = obj.Parent!@#&!@#&		if i > 32 then!@#&			return {X = 1, Y = 1}!@#&		end!@#&!@#&		i = i + 1!@#&	end!@#&!@#&end!@#&!@#&function Draw()!@#&	if not Current.Window then!@#&		Drawing.Clear(colours.lightGrey)!@#&	else!@#&		Drawing.DrawArea(1, 2, Drawing.Screen.Width, Drawing.Screen.Height, '|', colours.black, colours.lightGrey)!@#&	end!@#&!@#&	if Current.Document then!@#&		Current.Document:Draw()!@#&	end!@#&!@#&	Current.MenuBar:Draw()!@#&!@#&	if Current.Window then!@#&		Current.Window:Draw()!@#&	end!@#&!@#&	if Current.Menu then!@#&		Current.Menu:Draw()!@#&	end!@#&!@#&	Drawing.DrawBuffer()!@#&!@#&	if Current.TextInput and Current.CursorPos and not Current.Menu and not(Current.Window and Current.Document and Current.TextInput == Current.Document.TextInput) and Current.CursorPos[2] > 1 then!@#&		term.setCursorPos(Current.CursorPos[1], Current.CursorPos[2])!@#&		term.setCursorBlink(true)!@#&		term.setTextColour(Current.CursorColour)!@#&	else!@#&		term.setCursorBlink(false)!@#&	end!@#&end!@#&MainDraw = Draw!@#&!@#&LongestString = function(input, key)!@#&	local length = 0!@#&	for i = 1, #input do!@#&		local value = input[i]!@#&		if key then!@#&			if value[key] then!@#&				value = value[key]!@#&			else!@#&				value = ''!@#&			end!@#&		end!@#&		local titleLength = string.len(value)!@#&		if titleLength > length then!@#&			length = titleLength!@#&		end!@#&	end!@#&	return length!@#&end!@#&!@#&function LoadMenuBar()!@#&	Current.MenuBar = MenuBar:Initialise({!@#&		Button:Initialise(1, 1, nil, nil, colours.grey, Current.MenuBar, function(self, side, x, y, toggle)!@#&			if toggle then!@#&				Menu:New(1, 2, {!@#&					{!@#&						Title = \"New...\",!@#&						Click = function()!@#&							Current.Document = Document:Initialise('')							!@#&						end,!@#&						Keys = {!@#&							keys.leftCtrl,!@#&							keys.n!@#&						}!@#&					},!@#&					{!@#&						Title = 'Open...',!@#&						Click = function()!@#&							DisplayOpenDocumentWindow()!@#&						end,!@#&						Keys = {!@#&							keys.leftCtrl,!@#&							keys.o!@#&						}!@#&					},!@#&					{!@#&						Separator = true!@#&					},!@#&					{!@#&						Title = 'Save...',!@#&						Click = function()!@#&							SaveDocument()!@#&						end,!@#&						Keys = {!@#&							keys.leftCtrl,!@#&							keys.s!@#&						},!@#&						Enabled = function()!@#&							return true!@#&						end!@#&					},!@#&					{!@#&						Separator = true!@#&					},!@#&					{!@#&						Title = 'Print...',!@#&						Click = function()!@#&							PrintDocument()!@#&						end,!@#&						Keys = {!@#&							keys.leftCtrl,!@#&							keys.p!@#&						},!@#&						Enabled = function()!@#&							return true!@#&						end!@#&					},!@#&					{!@#&						Separator = true!@#&					},!@#&					{!@#&						Title = 'Quit',!@#&						Click = function()!@#&							Close()!@#&						end!@#&					},!@#&			--[[!@#&					{!@#&						Title = 'Save As...',!@#&						Click = function()!@#&!@#&						end!@#&					}	!@#&			]]--!@#&				}, self, true)!@#&			else!@#&				Current.Menu = nil!@#&			end!@#&			return true !@#&		end, 'File', colours.lightGrey, false),!@#&		Button:Initialise(7, 1, nil, nil, colours.grey, Current.MenuBar, function(self, side, x, y, toggle)!@#&			if not self.Toggle then!@#&				Menu:New(7, 2, {!@#&			--[[!@#&					{!@#&						Title = \"Undo\",!@#&						Click = function()!@#&						end,!@#&						Keys = {!@#&							keys.leftCtrl,!@#&							keys.z!@#&						},!@#&						Enabled = function()!@#&							return false!@#&						end!@#&					},!@#&					{!@#&						Title = 'Redo',!@#&						Click = function()!@#&							!@#&						end,!@#&						Keys = {!@#&							keys.leftCtrl,!@#&							keys.y!@#&						},!@#&						Enabled = function()!@#&							return false!@#&						end!@#&					},!@#&					{!@#&						Separator = true!@#&					},!@#&			]]--!@#&					{!@#&						Title = 'Cut',!@#&						Click = function()!@#&							Clipboard.Cut(Current.Document.TextInput:Extract(true), 'text')!@#&						end,!@#&						Keys = {!@#&							keys.leftCtrl,!@#&							keys.x!@#&						},!@#&						Enabled = function()!@#&							return Current.Document ~= nil and Current.Selection and Current.Selection[1] and Current.Selection[2] ~= nil!@#&						end!@#&					},!@#&					{!@#&						Title = 'Copy',!@#&						Click = function()!@#&							Clipboard.Copy(Current.Document.TextInput:Extract(), 'text')!@#&						end,!@#&						Keys = {!@#&							keys.leftCtrl,!@#&							keys.c!@#&						},!@#&						Enabled = function()!@#&							return Current.Document ~= nil and Current.Selection and Current.Selection[1] and Current.Selection[2] ~= nil!@#&						end!@#&					},!@#&					{!@#&						Title = 'Paste',!@#&						Click = function()!@#&							local paste = Clipboard.Paste()!@#&							Current.Document.TextInput:Insert(paste)!@#&							Current.Document.TextInput.CursorPos = Current.Document.TextInput.CursorPos + #paste - 1!@#&						end,!@#&						Keys = {!@#&							keys.leftCtrl,!@#&							keys.v!@#&						},!@#&						Enabled = function()!@#&							return Current.Document ~= nil and (not Clipboard.isEmpty()) and Clipboard.Type == 'text'!@#&						end!@#&					},!@#&					{!@#&						Separator = true,	!@#&					},!@#&					{!@#&						Title = 'Select All',!@#&						Click = function()!@#&							Current.Selection = {1, #Current.Document.TextInput.Value:gsub('\\n','')}!@#&						end,!@#&						Keys = {!@#&							keys.leftCtrl,!@#&							keys.a!@#&						},!@#&						Enabled = function()!@#&							return Current.Document ~= nil!@#&						end!@#&					}!@#&				}, self, true)!@#&			else!@#&				Current.Menu = nil!@#&			end!@#&			return true !@#&		end, 'Edit', colours.lightGrey, false)!@#&	})!@#&end!@#&!@#&function LoadMenuBar()!@#&	Current.MenuBar = MenuBar:Initialise({!@#&		Button:Initialise(1, 1, nil, nil, colours.grey, Current.MenuBar, function(self, side, x, y, toggle)!@#&			if toggle then!@#&				Menu:New(1, 2, {!@#&					{!@#&						Title = \"New...\",!@#&						Click = function()!@#&							Current.Document = Document:Initialise('')							!@#&						end,!@#&						Keys = {!@#&							keys.leftCtrl,!@#&							keys.n!@#&						}!@#&					},!@#&					{!@#&						Title = 'Open...',!@#&						Click = function()!@#&							DisplayOpenDocumentWindow()!@#&						end,!@#&						Keys = {!@#&							keys.leftCtrl,!@#&							keys.o!@#&						}!@#&					},!@#&					{!@#&						Separator = true!@#&					},!@#&					{!@#&						Title = 'Save...',!@#&						Click = function()!@#&							SaveDocument()!@#&						end,!@#&						Keys = {!@#&							keys.leftCtrl,!@#&							keys.s!@#&						},!@#&						Enabled = function()!@#&							return Current.Document ~= nil!@#&						end!@#&					},!@#&					{!@#&						Separator = true!@#&					},!@#&					{!@#&						Title = 'Print...',!@#&						Click = function()!@#&							PrintDocument()!@#&						end,!@#&						Keys = {!@#&							keys.leftCtrl,!@#&							keys.p!@#&						},!@#&						Enabled = function()!@#&							return true!@#&						end!@#&					},!@#&					{!@#&						Separator = true!@#&					},!@#&					{!@#&						Title = 'Quit',!@#&						Click = function()!@#&							if Close() and OneOS then!@#&								OneOS.Close()!@#&							end!@#&						end,!@#&						Keys = {!@#&							keys.leftCtrl,!@#&							keys.q!@#&						}!@#&					},!@#&			--[[!@#&					{!@#&						Title = 'Save As...',!@#&						Click = function()!@#&!@#&						end!@#&					}	!@#&			]]--!@#&				}, self, true)!@#&			else!@#&				Current.Menu = nil!@#&			end!@#&			return true !@#&		end, 'File', colours.lightGrey, false),!@#&		Button:Initialise(7, 1, nil, nil, colours.grey, Current.MenuBar, function(self, side, x, y, toggle)!@#&			if not self.Toggle then!@#&				Menu:New(7, 2, {!@#&			--[[!@#&					{!@#&						Title = \"Undo\",!@#&						Click = function()!@#&						end,!@#&						Keys = {!@#&							keys.leftCtrl,!@#&							keys.z!@#&						},!@#&						Enabled = function()!@#&							return false!@#&						end!@#&					},!@#&					{!@#&						Title = 'Redo',!@#&						Click = function()!@#&							!@#&						end,!@#&						Keys = {!@#&							keys.leftCtrl,!@#&							keys.y!@#&						},!@#&						Enabled = function()!@#&							return false!@#&						end!@#&					},!@#&					{!@#&						Separator = true!@#&					},!@#&			]]--!@#&					{!@#&						Title = 'Cut',!@#&						Click = function()!@#&							Clipboard.Cut(Current.Document.TextInput:Extract(true), 'text')!@#&						end,!@#&						Keys = {!@#&							keys.leftCtrl,!@#&							keys.x!@#&						},!@#&						Enabled = function()!@#&							return Current.Document ~= nil and Current.Selection and Current.Selection[1] and Current.Selection[2] ~= nil!@#&						end!@#&					},!@#&					{!@#&						Title = 'Copy',!@#&						Click = function()!@#&							Clipboard.Copy(Current.Document.TextInput:Extract(), 'text')!@#&						end,!@#&						Keys = {!@#&							keys.leftCtrl,!@#&							keys.c!@#&						},!@#&						Enabled = function()!@#&							return Current.Document ~= nil and Current.Selection and Current.Selection[1] and Current.Selection[2] ~= nil!@#&						end!@#&					},!@#&					{!@#&						Title = 'Paste',!@#&						Click = function()!@#&							local paste = Clipboard.Paste()!@#&							Current.Document.TextInput:Insert(paste)!@#&							Current.Document.TextInput.CursorPos = Current.Document.TextInput.CursorPos + #paste - 1!@#&						end,!@#&						Keys = {!@#&							keys.leftCtrl,!@#&							keys.v!@#&						},!@#&						Enabled = function()!@#&							return Current.Document ~= nil and (not Clipboard.isEmpty()) and Clipboard.Type == 'text'!@#&						end!@#&					},!@#&					{!@#&						Separator = true,	!@#&					},!@#&					{!@#&						Title = 'Select All',!@#&						Click = function()!@#&							Current.Selection = {1, #Current.Document.TextInput.Value:gsub('\\n','')}!@#&						end,!@#&						Keys = {!@#&							keys.leftCtrl,!@#&							keys.a!@#&						},!@#&						Enabled = function()!@#&							return Current.Document ~= nil!@#&						end!@#&					}!@#&				}, self, true)!@#&			else!@#&				Current.Menu = nil!@#&			end!@#&			return true !@#&		end, 'Edit', colours.lightGrey, false),!@#&		Button:Initialise(13, 1, nil, nil, colours.grey, Current.MenuBar, function(self, side, x, y, toggle)!@#&			if not self.Toggle then!@#&				Menu:New(13, 2, {!@#&					{!@#&						Title = 'Red',!@#&						Click = function(item)!@#&							Current.Document:SetSelectionColour(item.Colour)!@#&						end,!@#&						Colour = colours.red,!@#&						Enabled = function()!@#&							return (Current.Document ~= nil and Current.Selection ~= nil and Current.Selection[1] ~= nil and Current.Selection[2] ~= nil)!@#&						end!@#&					},!@#&					{!@#&						Title = 'Orange',!@#&						Click = function(item)!@#&							Current.Document:SetSelectionColour(item.Colour)!@#&						end,!@#&						Colour = colours.orange,!@#&						Enabled = function()!@#&							return (Current.Document ~= nil and Current.Selection ~= nil and Current.Selection[1] ~= nil and Current.Selection[2] ~= nil)!@#&						end!@#&					},!@#&					{!@#&						Title = 'Yellow',!@#&						Click = function(item)!@#&							Current.Document:SetSelectionColour(item.Colour)!@#&						end,!@#&						Colour = colours.yellow,!@#&						Enabled = function()!@#&							return (Current.Document ~= nil and Current.Selection ~= nil and Current.Selection[1] ~= nil and Current.Selection[2] ~= nil)!@#&						end!@#&					},!@#&					{!@#&						Title = 'Pink',!@#&						Click = function(item)!@#&							Current.Document:SetSelectionColour(item.Colour)!@#&						end,!@#&						Colour = colours.pink,!@#&						Enabled = function()!@#&							return (Current.Document ~= nil and Current.Selection ~= nil and Current.Selection[1] ~= nil and Current.Selection[2] ~= nil)!@#&						end!@#&					},!@#&					{!@#&						Title = 'Magenta',!@#&						Click = function(item)!@#&							Current.Document:SetSelectionColour(item.Colour)!@#&						end,!@#&						Colour = colours.magenta,!@#&						Enabled = function()!@#&							return (Current.Document ~= nil and Current.Selection ~= nil and Current.Selection[1] ~= nil and Current.Selection[2] ~= nil)!@#&						end!@#&					},!@#&					{!@#&						Title = 'Purple',!@#&						Click = function(item)!@#&							Current.Document:SetSelectionColour(item.Colour)!@#&						end,!@#&						Colour = colours.purple,!@#&						Enabled = function()!@#&							return (Current.Document ~= nil and Current.Selection ~= nil and Current.Selection[1] ~= nil and Current.Selection[2] ~= nil)!@#&						end!@#&					},!@#&					{!@#&						Title = 'Light Blue',!@#&						Click = function(item)!@#&							Current.Document:SetSelectionColour(item.Colour)!@#&						end,!@#&						Colour = colours.lightBlue,!@#&						Enabled = function()!@#&							return (Current.Document ~= nil and Current.Selection ~= nil and Current.Selection[1] ~= nil and Current.Selection[2] ~= nil)!@#&						end!@#&					},!@#&					{!@#&						Title = 'Cyan',!@#&						Click = function(item)!@#&							Current.Document:SetSelectionColour(item.Colour)!@#&						end,!@#&						Colour = colours.cyan,!@#&						Enabled = function()!@#&							return (Current.Document ~= nil and Current.Selection ~= nil and Current.Selection[1] ~= nil and Current.Selection[2] ~= nil)!@#&						end!@#&					},!@#&					{!@#&						Title = 'Blue',!@#&						Click = function(item)!@#&							Current.Document:SetSelectionColour(item.Colour)!@#&						end,!@#&						Colour = colours.blue,!@#&						Enabled = function()!@#&							return (Current.Document ~= nil and Current.Selection ~= nil and Current.Selection[1] ~= nil and Current.Selection[2] ~= nil)!@#&						end!@#&					},!@#&					{!@#&						Title = 'Green',!@#&						Click = function(item)!@#&							Current.Document:SetSelectionColour(item.Colour)!@#&						end,!@#&						Colour = colours.green,!@#&						Enabled = function()!@#&							return (Current.Document ~= nil and Current.Selection ~= nil and Current.Selection[1] ~= nil and Current.Selection[2] ~= nil)!@#&						end!@#&					},!@#&					{!@#&						Title = 'Light Grey',!@#&						Click = function(item)!@#&							Current.Document:SetSelectionColour(item.Colour)!@#&						end,!@#&						Colour = colours.lightGrey,!@#&						Enabled = function()!@#&							return (Current.Document ~= nil and Current.Selection ~= nil and Current.Selection[1] ~= nil and Current.Selection[2] ~= nil)!@#&						end!@#&					},!@#&					{!@#&						Title = 'Grey',!@#&						Click = function(item)!@#&							Current.Document:SetSelectionColour(item.Colour)!@#&						end,!@#&						Colour = colours.grey,!@#&						Enabled = function()!@#&							return (Current.Document ~= nil and Current.Selection ~= nil and Current.Selection[1] ~= nil and Current.Selection[2] ~= nil)!@#&						end!@#&					},!@#&					{!@#&						Title = 'Black',!@#&						Click = function(item)!@#&							Current.Document:SetSelectionColour(item.Colour)!@#&						end,!@#&						Colour = colours.black,!@#&						Enabled = function()!@#&							return (Current.Document ~= nil and Current.Selection ~= nil and Current.Selection[1] ~= nil and Current.Selection[2] ~= nil)!@#&						end!@#&					},!@#&					{!@#&						Title = 'Brown',!@#&						Click = function(item)!@#&							Current.Document:SetSelectionColour(item.Colour)!@#&						end,!@#&						Colour = colours.brown,!@#&						Enabled = function()!@#&							return (Current.Document ~= nil and Current.Selection ~= nil and Current.Selection[1] ~= nil and Current.Selection[2] ~= nil)!@#&						end!@#&					}!@#&				}, self, true)!@#&			else!@#&				Current.Menu = nil!@#&			end!@#&			return true !@#&		end, 'Colour', colours.lightGrey, false)!@#&	})!@#&end!@#&!@#&function SplashScreen()!@#&	local w = colours.white!@#&	local b = colours.black!@#&	local u = colours.blue!@#&	local lb = colours.lightBlue!@#&	local splashIcon = {{w,w,w,b,w,w,w,b,w,w,w,},{w,w,w,b,w,w,w,b,w,w,w,},{w,w,w,b,u,u,u,b,w,w,w,},{w,b,b,u,u,u,u,u,b,b,w,},{b,u,u,lb,lb,u,u,u,u,u,b,},{b,u,lb,lb,u,u,u,u,u,u,b,},{b,u,lb,lb,u,u,u,u,u,u,b,},{b,u,u,u,u,u,u,u,u,u,b,},{w,b,b,b,b,b,b,b,b,b,w,},!@#&	[\"text\"]={{\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",},{\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",},{\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",},{\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",},{\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",},{\" \",\" \",\" \",\" \",\"W\",\"o\",\"r\",\"d\",\" \",\" \",\" \",},{\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",},{\" \",\" \",\"S\",\"p\",\"e\",\"e\",\"d\",\"O\",\"S\",\" \",\" \"},{\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",},},!@#&	[\"textcol\"]={{w,w,w,w,w,w,w,w,w,w,w,},{w,w,w,w,w,w,w,w,w,w,w,},{w,w,w,w,w,w,w,w,w,w,w,},{w,w,w,w,w,w,w,w,w,w,w,},{w,w,w,w,w,w,w,w,w,w,w,},{w,w,w,w,w,w,w,w,w,w,w,},{w,w,w,w,w,w,w,w,w,w,w,},{lb,lb,lb,lb,lb,lb,lb,lb,lb,lb,lb,},{w,w,w,w,w,w,w,w,w,w,w,},},}!@#&	Drawing.Clear(colours.white)!@#&	Drawing.DrawImage((Drawing.Screen.Width - 11)/2, (Drawing.Screen.Height - 9)/2, splashIcon, 11, 9)!@#&	Drawing.DrawBuffer()!@#&	Drawing.Clear(colours.black)!@#&	parallel.waitForAny(function()sleep(1)end, function()os.pullEvent('mouse_click')end)!@#&end!@#&!@#&function Initialise(arg)!@#&	if OneOS then!@#&		fs = OneOS.FS!@#&	end!@#&!@#&	if not OneOS then!@#&		SplashScreen()!@#&	end!@#&	EventRegister('mouse_click', TryClick)!@#&	EventRegister('mouse_drag', function(event, side, x, y)TryClick(event, side, x, y, true)end)!@#&	EventRegister('mouse_scroll', Scroll)!@#&	EventRegister('key', HandleKey)!@#&	EventRegister('char', HandleKey)!@#&	EventRegister('timer', Timer)!@#&	EventRegister('terminate', function(event) if Close() then error( \"Terminated\", 0 ) end end)!@#&	!@#&	LoadMenuBar()!@#&!@#&	--Current.Document = Document:Initialise('abcdefghijklmnopqrtuvwxy')--'Hello everybody!')!@#&	if tArgs[1] then!@#&		if fs.exists(tArgs[1]) then!@#&			OpenDocument(tArgs[1])!@#&		else!@#&			--new!@#&		end!@#&	else!@#&		Current.Document = Document:Initialise('')--'Hello everybody!')!@#&	end!@#&!@#&	--[[!@#&	if arg and fs.exists(arg) then!@#&			OpenDocument(arg)!@#&		else!@#&			DisplayNewDocumentWindow()!@#&		end!@#&	]]--!@#&	Draw()!@#&!@#&	EventHandler()!@#&end!@#&!@#&local isControlPushed = false!@#&controlPushedTimer = nil!@#&closeWindowTimer = nil!@#&function Timer(event, timer)!@#&	if timer == closeWindowTimer then!@#&		if Current.Window then!@#&			Current.Window:Close()!@#&		end!@#&		Draw()!@#&	elseif timer == controlPushedTimer then!@#&		isControlPushed = false!@#&	end!@#&end!@#&!@#&local ignoreNextChar = false!@#&function HandleKey(...)!@#&	local args = {...}!@#&	local event = args[1]!@#&	local keychar = args[2]!@#&																							--Mac left command character!@#&	if event == 'key' and keychar == keys.leftCtrl or keychar == keys.rightCtrl or keychar == 219 then!@#&		isControlPushed = true!@#&		controlPushedTimer = os.startTimer(0.5)!@#&	elseif isControlPushed then!@#&		if event == 'key' then!@#&			if CheckKeyboardShortcut(keychar) then!@#&				isControlPushed = false!@#&				ignoreNextChar = true!@#&			end!@#&		end!@#&	elseif ignoreNextChar then!@#&		ignoreNextChar = false!@#&	elseif Current.TextInput then!@#&		if event == 'char' then!@#&			Current.TextInput:Char(keychar)!@#&		elseif event == 'key' then!@#&			Current.TextInput:Key(keychar)!@#&		end!@#&	end!@#&end!@#&!@#&function CheckKeyboardShortcut(key)!@#&	local shortcuts = {}!@#&	shortcuts[keys.n] = function() Current.Document = Document:Initialise('') end!@#&	shortcuts[keys.o] = function() DisplayOpenDocumentWindow() end!@#&	shortcuts[keys.s] = function() if Current.Document ~= nil then SaveDocument() end end!@#&	shortcuts[keys.left] = function() if Current.TextInput then Current.TextInput:Key(keys.home) end end!@#&	shortcuts[keys.right] = function() if Current.TextInput then Current.TextInput:Key(keys[\"end\"]) end end!@#&--	shortcuts[keys.q] = function() DisplayOpenDocumentWindow() end!@#&	if Current.Document ~= nil then!@#&		shortcuts[keys.s] = function() SaveDocument() end!@#&		shortcuts[keys.p] = function() PrintDocument() end!@#&		if Current.Selection and Current.Selection[1] and Current.Selection[2] ~= nil then!@#&			shortcuts[keys.x] = function() Clipboard.Cut(Current.Document.TextInput:Extract(true), 'text') end!@#&			shortcuts[keys.c] = function() Clipboard.Copy(Current.Document.TextInput:Extract(), 'text') end!@#&		end!@#&		if (not Clipboard.isEmpty()) and Clipboard.Type == 'text' then!@#&			shortcuts[keys.v] = function() local paste = Clipboard.Paste()!@#&									Current.Document.TextInput:Insert(paste)!@#&									Current.Document.TextInput.CursorPos = Current.Document.TextInput.CursorPos + #paste - 1!@#&								end!@#&		end!@#&		shortcuts[keys.a] = function() Current.Selection = {1, #Current.Document.TextInput.Value:gsub('\\n','')} end!@#&	end!@#&							!@#&	if shortcuts[key] then!@#&		shortcuts[key]()!@#&		Draw()!@#&		return true!@#&	else!@#&		return false!@#&	end!@#&end!@#&!@#&--[[!@#&	Check if the given object falls under the click coordinates!@#&]]--!@#&function CheckClick(object, x, y)!@#&	if object.X <= x and object.Y <= y and object.X + object.Width > x and object.Y + object.Height > y then!@#&		return true!@#&	end!@#&end!@#&!@#&--[[!@#&	Attempt to clicka given object!@#&]]--!@#&function DoClick(object, side, x, y, drag)!@#&	local obj = GetAbsolutePosition(object)!@#&	obj.Width = object.Width!@#&	obj.Height = object.Height!@#&	if object and CheckClick(obj, x, y) then!@#&		return object:Click(side, x - object.X + 1, y - object.Y + 1, drag)!@#&	end	!@#&end!@#&!@#&--[[!@#&	Try to click at the given coordinates!@#&]]--!@#&function TryClick(event, side, x, y, drag)!@#&	if Current.Menu then!@#&		if DoClick(Current.Menu, side, x, y, drag) then!@#&			Draw()!@#&			return!@#&		else!@#&			if Current.Menu.Owner and Current.Menu.Owner.Toggle then!@#&				Current.Menu.Owner.Toggle = false!@#&			end!@#&			Current.Menu = nil!@#&			Draw()!@#&			return!@#&		end!@#&	elseif Current.Window then!@#&		if DoClick(Current.Window, side, x, y, drag) then!@#&			Draw()!@#&			return!@#&		else!@#&			Current.Window:Flash()!@#&			return!@#&		end!@#&	end!@#&	local interfaceElements = {}!@#&!@#&	table.insert(interfaceElements, Current.MenuBar)!@#&	table.insert(interfaceElements, Current.ScrollBar)!@#&	for i, page in ipairs(Current.Document.Pages) do!@#&		table.insert(interfaceElements, page)!@#&	end!@#&!@#&	for i, object in ipairs(interfaceElements) do!@#&		if DoClick(object, side, x, y, drag) then!@#&			Draw()!@#&			return!@#&		end		!@#&	end!@#&	Draw()!@#&end!@#&!@#&function Scroll(event, direction, x, y)!@#&	if Current.Window and Current.Window.OpenButton then!@#&		Current.Document.Scroll = Current.Document.Scroll + direction!@#&		if Current.Window.Scroll < 0 then!@#&			Current.Window.Scroll = 0!@#&		elseif Current.Window.Scroll > Current.Window.MaxScroll then!@#&			Current.Window.Scroll = Current.Window.MaxScroll!@#&		end!@#&		Draw()!@#&	elseif Current.ScrollBar then!@#&		if Current.ScrollBar:DoScroll(direction*2) then!@#&			Draw()!@#&		end!@#&	end!@#&end!@#&!@#&!@#&--[[!@#&	Registers functions to run on certain events!@#&]]--!@#&function EventRegister(event, func)!@#&	if not Events[event] then!@#&		Events[event] = {}!@#&	end!@#&!@#&	table.insert(Events[event], func)!@#&end!@#&!@#&--[[!@#&	The main loop event handler, runs registered event functinos!@#&]]--!@#&function EventHandler()!@#&	while true do!@#&		local event, arg1, arg2, arg3, arg4 = os.pullEventRaw()!@#&		if Events[event] then!@#&			for i, e in ipairs(Events[event]) do!@#&				e(event, arg1, arg2, arg3, arg4)!@#&			end!@#&		end!@#&	end!@#&end!@#&!@#&!@#&local function Extension(path, addDot)!@#&	if not path then!@#&		return nil!@#&	elseif not string.find(fs.getName(path), '%.') then!@#&		if not addDot then!@#&			return fs.getName(path)!@#&		else!@#&			return ''!@#&		end!@#&	else!@#&		local _path = path!@#&		if path:sub(#path) == '/' then!@#&			_path = path:sub(1,#path-1)!@#&		end!@#&		local extension = _path:gmatch('%.[0-9a-z]+$')()!@#&		if extension then!@#&			extension = extension:sub(2)!@#&		else!@#&			--extension = nil!@#&			return ''!@#&		end!@#&		if addDot then!@#&			extension = '.'..extension!@#&		end!@#&		return extension:lower()!@#&	end!@#&end!@#&!@#&local RemoveExtension = function(path)!@#&	if path:sub(1,1) == '.' then!@#&		return path!@#&	end!@#&	local extension = Extension(path)!@#&	if extension == path then!@#&		return fs.getName(path)!@#&	end!@#&	return string.gsub(path, extension, ''):sub(1, -2)!@#&end!@#&!@#&local acknowledgedColour = false!@#&function PrintDocument()!@#&	if OneOS then!@#&		OneOS.LoadAPI('/System/API/Helpers.lua')!@#&		OneOS.LoadAPI('/System/API/Peripheral.lua')!@#&		OneOS.LoadAPI('/System/API/Printer.lua')!@#&	end!@#&!@#&	local doPrint = function()!@#&		local window = PrintDocumentWindow:Initialise():Show()!@#&	end!@#&!@#&	if Peripheral.GetPeripheral('printer') == nil then!@#&		ButtonDialougeWindow:Initialise('No Printer Found', 'Please place a printer next to your computer. Ensure you also insert dye (left slot) and paper (top slots)', 'Ok', nil, function(window, ok)!@#&			window:Close()!@#&		end):Show()!@#&	elseif not acknowledgedColour and FindColours(Current.Document.TextInput.Value) ~= 0 then!@#&		ButtonDialougeWindow:Initialise('Important', 'Due to the way printers work, you can\\'t print in more than one colour. The dye you use will be the colour of the text.', 'Ok', nil, function(window, ok)!@#&			acknowledgedColour = true!@#&			window:Close()!@#&			doPrint()!@#&		end):Show()!@#&	else!@#&		doPrint()!@#&	end!@#&end!@#&!@#&function SaveDocument()!@#&	local function save()!@#&		local h = fs.open(Current.Document.Path, 'w')!@#&		if h then!@#&			if Current.Document.Format == TextFormatPlainText then!@#&				h.write(Current.Document.TextInput.Value)!@#&			else!@#&				local lines = {}!@#&				for p, page in ipairs(Current.Document.Pages) do!@#&					for i, line in ipairs(page.Lines) do!@#&						table.insert(lines, line)!@#&					end!@#&				end!@#&				h.write(textutils.serialize(lines))!@#&			end!@#&			Current.Modified = false!@#&		else!@#&			ButtonDialougeWindow:Initialise('Error', 'An error occured while saving the file, try again.', 'Ok', nil, function(window, ok)!@#&				window:Close()!@#&			end):Show()!@#&		end!@#&		h.close()!@#&	end!@#&!@#&	if not Current.Document.Path then!@#&		SaveDocumentWindow:Initialise(function(self, success, path)!@#&			self:Close()!@#&			if success then!@#&				local extension = ''!@#&				if Current.Document.Format == TextFormatPlainText then!@#&					extension = '.txt'!@#&				elseif Current.Document.Format == TextFormatInkText then!@#&					extension = '.ink'!@#&				end!@#&				!@#&				if path:sub(-4) ~= extension then!@#&					path = path .. extension!@#&				end!@#&!@#&				Current.Document.Path = path!@#&				Current.Document.Title = fs.getName(path)!@#&				save()!@#&			end!@#&			if Current.Document then!@#&				Current.TextInput = Current.Document.TextInput!@#&			end!@#&		end):Show()!@#&	else!@#&		save()!@#&	end!@#&end!@#&!@#&function DisplayOpenDocumentWindow()!@#&	OpenDocumentWindow:Initialise(function(self, success, path)!@#&		self:Close()!@#&		if success then!@#&			OpenDocument(path)!@#&		end!@#&	end):Show()!@#&end!@#&!@#&function OpenDocument(path)!@#&	Current.Selection = nil!@#&	local h = fs.open(path, 'r')!@#&	if h then!@#&		Current.Document = Document:Initialise(h.readAll(), RemoveExtension(fs.getName(path)), path)!@#&	else!@#&		ButtonDialougeWindow:Initialise('Error', 'An error occured while opening the file, try again.', 'Ok', nil, function(window, ok)!@#&			window:Close()!@#&			if Current.Document then!@#&				Current.TextInput = Current.Document.TextInput!@#&			end!@#&		end):Show()!@#&	end!@#&	h.close()!@#&end!@#&!@#&local TidyPath = function(path)!@#&	path = '/'..path!@#&	local fs = fs!@#&	if OneOS then!@#&		fs = OneOS.FS!@#&	end!@#&	if fs.isDir(path) then!@#&		path = path .. '/'!@#&	end!@#&!@#&	path, n = path:gsub(\"//\", \"/\")!@#&	while n > 0 do!@#&		path, n = path:gsub(\"//\", \"/\")!@#&	end!@#&	return path!@#&end!@#&!@#&OpenDocumentWindow = {!@#&	X = 1,!@#&	Y = 1,!@#&	Width = 0,!@#&	Height = 0,!@#&	CursorPos = 1,!@#&	Visible = true,!@#&	Return = nil,!@#&	OpenButton = nil,!@#&	PathTextBox = nil,!@#&	CurrentDirectory = '/',!@#&	Scroll = 0,!@#&	MaxScroll = 0,!@#&	GoUpButton = nil,!@#&	SelectedFile = '',!@#&	Files = {},!@#&	Typed = false,!@#&!@#&	AbsolutePosition = function(self)!@#&		return {X = self.X, Y = self.Y}!@#&	end,!@#&!@#&	Draw = function(self)!@#&		if not self.Visible then!@#&			return!@#&		end!@#&		Drawing.DrawBlankArea(self.X + 1, self.Y+1, self.Width, self.Height, colours.grey)!@#&		Drawing.DrawBlankArea(self.X, self.Y, self.Width, 3, colours.lightGrey)!@#&		Drawing.DrawBlankArea(self.X, self.Y+1, self.Width, self.Height-6, colours.white)!@#&		Drawing.DrawCharactersCenter(self.X, self.Y, self.Width, 1, self.Title, colours.black, colours.lightGrey)!@#&		Drawing.DrawBlankArea(self.X, self.Y + self.Height - 5, self.Width, 5, colours.lightGrey)!@#&		self:DrawFiles()!@#&!@#&		if (fs.exists(self.PathTextBox.TextInput.Value)) or (self.SelectedFile and #self.SelectedFile > 0 and fs.exists(self.CurrentDirectory .. self.SelectedFile)) then!@#&			self.OpenButton.TextColour = colours.black!@#&		else!@#&			self.OpenButton.TextColour = colours.lightGrey!@#&		end!@#&!@#&		self.PathTextBox:Draw()!@#&		self.OpenButton:Draw()!@#&		self.CancelButton:Draw()!@#&		self.GoUpButton:Draw()!@#&	end,!@#&!@#&	DrawFiles = function(self)!@#&		for i, file in ipairs(self.Files) do!@#&			if i > self.Scroll and i - self.Scroll <= 11 then!@#&				if file == self.SelectedFile then!@#&					Drawing.DrawCharacters(self.X + 1, self.Y + i - self.Scroll, file, colours.white, colours.lightBlue)!@#&				elseif string.find(file, '%.txt') or string.find(file, '%.text') or string.find(file, '%.ink') or fs.isDir(self.CurrentDirectory .. file) then!@#&					Drawing.DrawCharacters(self.X + 1, self.Y + i - self.Scroll, file, colours.black, colours.white)!@#&				else!@#&					Drawing.DrawCharacters(self.X + 1, self.Y + i - self.Scroll, file, colours.grey, colours.white)!@#&				end!@#&			end!@#&		end!@#&		self.MaxScroll = #self.Files - 11!@#&		if self.MaxScroll < 0 then!@#&			self.MaxScroll = 0!@#&		end!@#&	end,!@#&!@#&	Initialise = function(self, returnFunc)!@#&		local new = {}    -- the new instance!@#&		setmetatable( new, {__index = self} )!@#&		new.Width = 32!@#&		new.Height = 17!@#&		new.Return = returnFunc!@#&		new.X = math.ceil((Drawing.Screen.Width - new.Width) / 2)!@#&		new.Y = math.ceil((Drawing.Screen.Height - new.Height) / 2)!@#&		new.Title = 'Open Document'!@#&		new.Visible = true!@#&		new.CurrentDirectory = '/'!@#&		new.SelectedFile = nil!@#&		if OneOS and fs.exists('/Desktop/Documents/') then!@#&			new.CurrentDirectory = '/Desktop/Documents/'!@#&		end!@#&		new.OpenButton = Button:Initialise(new.Width - 6, new.Height - 1, nil, nil, colours.white, new, function(self, side, x, y, toggle)!@#&			if fs.exists(new.PathTextBox.TextInput.Value) and self.TextColour == colours.black and not fs.isDir(new.PathTextBox.TextInput.Value) then!@#&				returnFunc(new, true, TidyPath(new.PathTextBox.TextInput.Value))!@#&			elseif new.SelectedFile and self.TextColour == colours.black and fs.isDir(new.CurrentDirectory .. new.SelectedFile) then!@#&				new:GoToDirectory(new.CurrentDirectory .. new.SelectedFile)!@#&			elseif new.SelectedFile and self.TextColour == colours.black then!@#&				returnFunc(new, true, TidyPath(new.CurrentDirectory .. '/' .. new.SelectedFile))!@#&			end!@#&		end, 'Open', colours.black)!@#&		new.CancelButton = Button:Initialise(new.Width - 15, new.Height - 1, nil, nil, colours.white, new, function(self, side, x, y, toggle)!@#&			returnFunc(new, false)!@#&		end, 'Cancel', colours.black)!@#&		new.GoUpButton = Button:Initialise(2, new.Height - 1, nil, nil, colours.white, new, function(self, side, x, y, toggle)!@#&			local folderName = fs.getName(new.CurrentDirectory)!@#&			local parentDirectory = new.CurrentDirectory:sub(1, #new.CurrentDirectory-#folderName-1)!@#&			new:GoToDirectory(parentDirectory)!@#&		end, 'Go Up', colours.black)!@#&		new.PathTextBox = TextBox:Initialise(2, new.Height - 3, new.Width - 2, 1, new, new.CurrentDirectory, colours.white, colours.black)!@#&		new:GoToDirectory(new.CurrentDirectory)!@#&		return new!@#&	end,!@#&!@#&	Show = function(self)!@#&		Current.Window = self!@#&		return self!@#&	end,!@#&!@#&	Close = function(self)!@#&		Current.Input = nil!@#&		Current.Window = nil!@#&		self = nil!@#&	end,!@#&!@#&	GoToDirectory = function(self, path)!@#&		path = TidyPath(path)!@#&		self.CurrentDirectory = path!@#&		self.Scroll = 0!@#&		self.SelectedFile = nil!@#&		self.Typed = false!@#&		self.PathTextBox.TextInput.Value = path!@#&		local fs = fs!@#&		if OneOS then!@#&			fs = OneOS.FS!@#&		end!@#&		self.Files = fs.list(self.CurrentDirectory)!@#&		Draw()!@#&	end,!@#&!@#&	Flash = function(self)!@#&		self.Visible = false!@#&		Draw()!@#&		sleep(0.15)!@#&		self.Visible = true!@#&		Draw()!@#&		sleep(0.15)!@#&		self.Visible = false!@#&		Draw()!@#&		sleep(0.15)!@#&		self.Visible = true!@#&		Draw()!@#&	end,!@#&!@#&	Click = function(self, side, x, y)!@#&		local items = {self.OpenButton, self.CancelButton, self.PathTextBox, self.GoUpButton}!@#&		local found = false!@#&		for i, v in ipairs(items) do!@#&			if CheckClick(v, x, y) then!@#&				v:Click(side, x, y)!@#&				found = true!@#&			end!@#&		end!@#&!@#&		if not found then!@#&			if y <= 12 then!@#&				local fs = fs!@#&				if OneOS then!@#&					fs = OneOS.FS!@#&				end!@#&				self.SelectedFile = fs.list(self.CurrentDirectory)[y-1]!@#&				self.PathTextBox.TextInput.Value = TidyPath(self.CurrentDirectory .. '/' .. self.SelectedFile)!@#&				Draw()!@#&			end!@#&		end!@#&		return true!@#&	end!@#&}!@#&!@#&PrintDocumentWindow = {!@#&	X = 1,!@#&	Y = 1,!@#&	Width = 0,!@#&	Height = 0,!@#&	CursorPos = 1,!@#&	Visible = true,!@#&	Return = nil,!@#&	PrintButton = nil,!@#&	CopiesTextBox = nil,!@#&	Scroll = 0,!@#&	MaxScroll = 0,!@#&	PrinterSelectButton = nil,!@#&	Title = '',!@#&	Status = 0, --0 = neutral, 1 = good, -1 = error!@#&	StatusText = '',!@#&	SelectedPrinter = nil,!@#&!@#&	AbsolutePosition = function(self)!@#&		return {X = self.X, Y = self.Y}!@#&	end,!@#&!@#&	Draw = function(self)!@#&		if not self.Visible then!@#&			return!@#&		end!@#&		Drawing.DrawBlankArea(self.X + 1, self.Y+1, self.Width, self.Height, colours.grey)!@#&		Drawing.DrawBlankArea(self.X, self.Y, self.Width, 1, colours.lightGrey)!@#&		Drawing.DrawBlankArea(self.X, self.Y+1, self.Width, self.Height-1, colours.white)!@#&		Drawing.DrawCharactersCenter(self.X, self.Y, self.Width, 1, self.Title, colours.black, colours.lightGrey)!@#&		!@#&		self.PrinterSelectButton:Draw()!@#&		Drawing.DrawCharactersCenter(self.X,  self.Y + self.PrinterSelectButton.Y - 2, self.Width, 1, 'Printer', colours.black, colours.white)!@#&		Drawing.DrawCharacters(self.X + self.Width - 3, self.Y + self.PrinterSelectButton.Y - 1, '\\\\/', colours.black, colours.lightGrey)!@#&		Drawing.DrawCharacters(self.X + 1, self.Y + self.CopiesTextBox.Y - 1, 'Copies', colours.black, colours.white)!@#&		local statusColour = colours.grey!@#&		if self.Status == -1 then!@#&			statusColour = colours.red!@#&		elseif self.Status == 1 then!@#&			statusColour = colours.green!@#&		end!@#&		Drawing.DrawCharacters(self.X + 1, self.Y + self.CopiesTextBox.Y + 1, self.StatusText, statusColour, colours.white)!@#&!@#&		self.CopiesTextBox:Draw()!@#&		self.PrintButton:Draw()!@#&		self.CancelButton:Draw()!@#&	end,!@#&!@#&	Initialise = function(self)!@#&		local new = {}    -- the new instance!@#&		setmetatable( new, {__index = self} )!@#&		new.Width = 32!@#&		new.Height = 11!@#&		new.Return = returnFunc!@#&		new.X = math.ceil((Drawing.Screen.Width - new.Width) / 2)!@#&		new.Y = math.ceil((Drawing.Screen.Height - new.Height) / 2)!@#&		new.Title = 'Print Document'!@#&		new.Visible = true!@#&		new.PrintButton = Button:Initialise(new.Width - 7, new.Height - 1, nil, nil, colours.lightGrey, new, function(self, side, x, y, toggle)!@#&			local doPrint = true!@#&			if new.SelectedPrinter == nil then!@#&				local p = Peripheral.GetPeripheral('printer')!@#&				if p then!@#&					new.SelectedPrinter = p.Side!@#&					new.PrinterSelectButton.Text = p.Fullname!@#&				else!@#&					new.StatusText = 'No Connected Printer'!@#&					new.Status = -1!@#&					doPrint = false!@#&				end!@#&			end!@#&			if doPrint then!@#&				local printer = Printer:Initialise(new.SelectedPrinter)!@#&				local err = printer:PrintLines(Current.Document.Lines, Current.Document.Title, tonumber(new.CopiesTextBox.TextInput.Value))!@#&				if not err then!@#&					new.StatusText = 'Document Printed!'!@#&					new.Status = 1!@#&					closeWindowTimer = os.startTimer(1)!@#&				else!@#&					new.StatusText = err!@#&					new.Status = -1!@#&				end!@#&			end!@#&		end, 'Print', colours.black)!@#&		new.CancelButton = Button:Initialise(new.Width - 15, new.Height - 1, nil, nil, colours.lightGrey, new, function(self, side, x, y, toggle)!@#&			new:Close()!@#&			Draw()!@#&		end, 'Close', colours.black)!@#&		new.PrinterSelectButton = Button:Initialise(2, 4, new.Width - 2, nil, colours.lightGrey, new, function(self, side, x, y, toggle)!@#&			local printers = {!@#&					{!@#&						Title = \"Automatic\",!@#&						Click = function()!@#&							new.SelectedPrinter = nil!@#&							new.PrinterSelectButton.Text = 'Automatic'!@#&						end!@#&					},!@#&					{!@#&						Separator = true!@#&					}!@#&				}!@#&			for i, p in ipairs(Peripheral.GetPeripherals('printer')) do!@#&				table.insert(printers, {!@#&					Title = p.Fullname,!@#&					Click = function(self)!@#&						new.SelectedPrinter = p.Side!@#&						new.PrinterSelectButton.Text = p.Fullname!@#&					end!@#&				})!@#&			end!@#&			Current.Menu = Menu:New(x, y+4, printers, self, true)!@#&		end, 'Automatic', colours.black)!@#&		new.CopiesTextBox = TextBox:Initialise(9, 6, 4, 1, new, 1, colours.lightGrey, colours.black, nil, true)!@#&		Current.TextInput = new.CopiesTextBox.TextInput!@#&		new.StatusText = 'Waiting...'!@#&		new.Status = 0!@#&		return new!@#&	end,!@#&!@#&	Show = function(self)!@#&		Current.Window = self!@#&		return self!@#&	end,!@#&!@#&	Close = function(self)!@#&		Current.Input = nil!@#&		Current.Window = nil!@#&		self = nil!@#&	end,!@#&!@#&	Flash = function(self)!@#&		self.Visible = false!@#&		Draw()!@#&		sleep(0.15)!@#&		self.Visible = true!@#&		Draw()!@#&		sleep(0.15)!@#&		self.Visible = false!@#&		Draw()!@#&		sleep(0.15)!@#&		self.Visible = true!@#&		Draw()!@#&	end,!@#&!@#&	Click = function(self, side, x, y)!@#&		local items = {self.PrintButton, self.CancelButton, self.CopiesTextBox, self.PrinterSelectButton}!@#&		for i, v in ipairs(items) do!@#&			if CheckClick(v, x, y) then!@#&				v:Click(side, x, y)!@#&			end!@#&		end!@#&		return true!@#&	end!@#&}!@#&!@#&SaveDocumentWindow = {!@#&	X = 1,!@#&	Y = 1,!@#&	Width = 0,!@#&	Height = 0,!@#&	CursorPos = 1,!@#&	Visible = true,!@#&	Return = nil,!@#&	SaveButton = nil,!@#&	PathTextBox = nil,!@#&	CurrentDirectory = '/',!@#&	Scroll = 0,!@#&	MaxScroll = 0,!@#&	ScrollBar = nil,!@#&	GoUpButton = nil,!@#&	Files = {},!@#&	Typed = false,!@#&!@#&	AbsolutePosition = function(self)!@#&		return {X = self.X, Y = self.Y}!@#&	end,!@#&!@#&	Draw = function(self)!@#&		if not self.Visible then!@#&			return!@#&		end!@#&		Drawing.DrawBlankArea(self.X + 1, self.Y+1, self.Width, self.Height, colours.grey)!@#&		Drawing.DrawBlankArea(self.X, self.Y, self.Width, 3, colours.lightGrey)!@#&		Drawing.DrawBlankArea(self.X, self.Y+1, self.Width, self.Height-6, colours.white)!@#&		Drawing.DrawCharactersCenter(self.X, self.Y, self.Width, 1, self.Title, colours.black, colours.lightGrey)!@#&		Drawing.DrawBlankArea(self.X, self.Y + self.Height - 5, self.Width, 5, colours.lightGrey)!@#&		Drawing.DrawCharacters(self.X + 1, self.Y + self.Height - 5, self.CurrentDirectory, colours.grey, colours.lightGrey)!@#&		self:DrawFiles()!@#&!@#&		if (self.PathTextBox.TextInput.Value) then!@#&			self.SaveButton.TextColour = colours.black!@#&		else!@#&			self.SaveButton.TextColour = colours.lightGrey!@#&		end!@#&!@#&		self.PathTextBox:Draw()!@#&		self.SaveButton:Draw()!@#&		self.CancelButton:Draw()!@#&		self.GoUpButton:Draw()!@#&	end,!@#&!@#&	DrawFiles = function(self)!@#&		for i, file in ipairs(self.Files) do!@#&			if i > self.Scroll and i - self.Scroll <= 10 then!@#&				if file == self.SelectedFile then!@#&					Drawing.DrawCharacters(self.X + 1, self.Y + i - self.Scroll, file, colours.white, colours.lightBlue)!@#&				elseif fs.isDir(self.CurrentDirectory .. file) then!@#&					Drawing.DrawCharacters(self.X + 1, self.Y + i - self.Scroll, file, colours.black, colours.white)!@#&				else!@#&					Drawing.DrawCharacters(self.X + 1, self.Y + i - self.Scroll, file, colours.lightGrey, colours.white)!@#&				end!@#&			end!@#&		end!@#&		self.MaxScroll = #self.Files - 11!@#&		if self.MaxScroll < 0 then!@#&			self.MaxScroll = 0!@#&		end!@#&	end,!@#&!@#&	Initialise = function(self, returnFunc)!@#&		local new = {}    -- the new instance!@#&		setmetatable( new, {__index = self} )!@#&		new.Width = 32!@#&		new.Height = 16!@#&		new.Return = returnFunc!@#&		new.X = math.ceil((Drawing.Screen.Width - new.Width) / 2)!@#&		new.Y = math.ceil((Drawing.Screen.Height - new.Height) / 2)!@#&		new.Title = 'Save Document'!@#&		new.Visible = true!@#&		new.CurrentDirectory = '/'!@#&		if OneOS and fs.exists('/Desktop/Documents/') then!@#&			new.CurrentDirectory = '/Desktop/Documents/'!@#&		end!@#&		new.SaveButton = Button:Initialise(new.Width - 6, new.Height - 1, nil, nil, colours.white, new, function(self, side, x, y, toggle)!@#&			if self.TextColour == colours.black and not fs.isDir(new.CurrentDirectory ..'/' .. new.PathTextBox.TextInput.Value) then!@#&				returnFunc(new, true, TidyPath(new.CurrentDirectory ..'/' .. new.PathTextBox.TextInput.Value))!@#&			elseif new.SelectedFile and self.TextColour == colours.black and fs.isDir(new.CurrentDirectory .. new.SelectedFile) then!@#&				new:GoToDirectory(new.CurrentDirectory .. new.SelectedFile)!@#&			end!@#&		end, 'Save', colours.black)!@#&		new.CancelButton = Button:Initialise(new.Width - 15, new.Height - 1, nil, nil, colours.white, new, function(self, side, x, y, toggle)!@#&			returnFunc(new, false)!@#&		end, 'Cancel', colours.black)!@#&		new.GoUpButton = Button:Initialise(2, new.Height - 1, nil, nil, colours.white, new, function(self, side, x, y, toggle)!@#&			local folderName = fs.getName(new.CurrentDirectory)!@#&			local parentDirectory = new.CurrentDirectory:sub(1, #new.CurrentDirectory-#folderName-1)!@#&			new:GoToDirectory(parentDirectory)!@#&		end, 'Go Up', colours.black)!@#&		new.PathTextBox = TextBox:Initialise(2, new.Height - 3, new.Width - 2, 1, new, '', colours.white, colours.black, function(key)!@#&			if key == keys.enter then!@#&				new.SaveButton:Click()!@#&			end!@#&		end)!@#&		new.PathTextBox.Placeholder = 'Document Name'!@#&		Current.TextInput = new.PathTextBox.TextInput!@#&		new:GoToDirectory(new.CurrentDirectory)!@#&		return new!@#&	end,!@#&!@#&	Show = function(self)!@#&		Current.Window = self!@#&		return self!@#&	end,!@#&!@#&	Close = function(self)!@#&		Current.Input = nil!@#&		Current.Window = nil!@#&		self = nil!@#&	end,!@#&!@#&	GoToDirectory = function(self, path)!@#&		path = TidyPath(path)!@#&		self.CurrentDirectory = path!@#&		self.Scroll = 0!@#&		self.Typed = false!@#&		local fs = fs!@#&		if OneOS then!@#&			fs = OneOS.FS!@#&		end!@#&		self.Files = fs.list(self.CurrentDirectory)!@#&		Draw()!@#&	end,!@#&!@#&	Flash = function(self)!@#&		self.Visible = false!@#&		Draw()!@#&		sleep(0.15)!@#&		self.Visible = true!@#&		Draw()!@#&		sleep(0.15)!@#&		self.Visible = false!@#&		Draw()!@#&		sleep(0.15)!@#&		self.Visible = true!@#&		Draw()!@#&	end,!@#&!@#&	Click = function(self, side, x, y)!@#&		local items = {self.SaveButton, self.CancelButton, self.PathTextBox, self.GoUpButton}!@#&		local found = false!@#&		for i, v in ipairs(items) do!@#&			if CheckClick(v, x, y) then!@#&				v:Click(side, x, y)!@#&				found = true!@#&			end!@#&		end!@#&!@#&		if not found then!@#&			if y <= 11 then!@#&				local files = fs.list(self.CurrentDirectory)!@#&				if files[y-1] then!@#&					self:GoToDirectory(self.CurrentDirectory..files[y-1])!@#&					Draw()!@#&				end!@#&			end!@#&		end!@#&		return true!@#&	end!@#&}!@#&!@#&local WrapText = function(text, maxWidth)!@#&	local lines = {''}!@#&    for word, space in text:gmatch('(%S+)(%s*)') do!@#&            local temp = lines[#lines] .. word .. space:gsub('\\n','')!@#&            if #temp > maxWidth then!@#&                    table.insert(lines, '')!@#&            end!@#&            if space:find('\\n') then!@#&                    lines[#lines] = lines[#lines] .. word!@#&                    !@#&                    space = space:gsub('\\n', function()!@#&                            table.insert(lines, '')!@#&                            return ''!@#&                    end)!@#&            else!@#&                    lines[#lines] = lines[#lines] .. word .. space!@#&            end!@#&    end!@#&	return lines!@#&end!@#&!@#&ButtonDialougeWindow = {!@#&	X = 1,!@#&	Y = 1,!@#&	Width = 0,!@#&	Height = 0,!@#&	CursorPos = 1,!@#&	Visible = true,!@#&	CancelButton = nil,!@#&	OkButton = nil,!@#&	Lines = {},!@#&!@#&	AbsolutePosition = function(self)!@#&		return {X = self.X, Y = self.Y}!@#&	end,!@#&!@#&	Draw = function(self)!@#&		if not self.Visible then!@#&			return!@#&		end!@#&		Drawing.DrawBlankArea(self.X + 1, self.Y+1, self.Width, self.Height, colours.grey)!@#&		Drawing.DrawBlankArea(self.X, self.Y, self.Width, 1, colours.lightGrey)!@#&		Drawing.DrawBlankArea(self.X, self.Y+1, self.Width, self.Height-1, colours.white)!@#&		Drawing.DrawCharactersCenter(self.X, self.Y, self.Width, 1, self.Title, colours.black, colours.lightGrey)!@#&!@#&		for i, text in ipairs(self.Lines) do!@#&			Drawing.DrawCharacters(self.X + 1, self.Y + 1 + i, text, colours.black, colours.white)!@#&		end!@#&!@#&		self.OkButton:Draw()!@#&		if self.CancelButton then!@#&			self.CancelButton:Draw()!@#&		end!@#&	end,!@#&!@#&	Initialise = function(self, title, message, okText, cancelText, returnFunc)!@#&		local new = {}    -- the new instance!@#&		setmetatable( new, {__index = self} )!@#&		new.Width = 28!@#&		new.Lines = WrapText(message, new.Width - 2)!@#&		new.Height = 5 + #new.Lines!@#&		new.Return = returnFunc!@#&		new.X = math.ceil((Drawing.Screen.Width - new.Width) / 2)!@#&		new.Y = math.ceil((Drawing.Screen.Height - new.Height) / 2)!@#&		new.Title = title!@#&		new.Visible = true!@#&		new.Visible = true!@#&		new.OkButton = Button:Initialise(new.Width - #okText - 2, new.Height - 1, nil, 1, nil, new, function()!@#&			returnFunc(new, true)!@#&		end, okText)!@#&		if cancelText then!@#&			new.CancelButton = Button:Initialise(new.Width - #okText - 2 - 1 - #cancelText - 2, new.Height - 1, nil, 1, nil, new, function()!@#&				returnFunc(new, false)!@#&			end, cancelText)!@#&		end!@#&!@#&		return new!@#&	end,!@#&!@#&	Show = function(self)!@#&		Current.Window = self!@#&		return self!@#&	end,!@#&!@#&	Close = function(self)!@#&		Current.Window = nil!@#&		self = nil!@#&	end,!@#&!@#&	Flash = function(self)!@#&		self.Visible = false!@#&		Draw()!@#&		sleep(0.15)!@#&		self.Visible = true!@#&		Draw()!@#&		sleep(0.15)!@#&		self.Visible = false!@#&		Draw()!@#&		sleep(0.15)!@#&		self.Visible = true!@#&		Draw()!@#&	end,!@#&!@#&	Click = function(self, side, x, y)!@#&		local items = {self.OkButton, self.CancelButton}!@#&		local found = false!@#&		for i, v in ipairs(items) do!@#&			if CheckClick(v, x, y) then!@#&				v:Click(side, x, y)!@#&				found = true!@#&			end!@#&		end!@#&		return true!@#&	end!@#&}!@#&!@#&TextDialougeWindow = {!@#&	X = 1,!@#&	Y = 1,!@#&	Width = 0,!@#&	Height = 0,!@#&	CursorPos = 1,!@#&	Visible = true,!@#&	CancelButton = nil,!@#&	OkButton = nil,!@#&	Lines = {},!@#&	TextInput = nil,!@#&!@#&	AbsolutePosition = function(self)!@#&		return {X = self.X, Y = self.Y}!@#&	end,!@#&!@#&	Draw = function(self)!@#&		if not self.Visible then!@#&			return!@#&		end!@#&		Drawing.DrawBlankArea(self.X + 1, self.Y+1, self.Width, self.Height, colours.grey)!@#&		Drawing.DrawBlankArea(self.X, self.Y, self.Width, 1, colours.lightGrey)!@#&		Drawing.DrawBlankArea(self.X, self.Y+1, self.Width, self.Height-1, colours.white)!@#&		Drawing.DrawCharactersCenter(self.X, self.Y, self.Width, 1, self.Title, colours.black, colours.lightGrey)!@#&!@#&		for i, text in ipairs(self.Lines) do!@#&			Drawing.DrawCharacters(self.X + 1, self.Y + 1 + i, text, colours.black, colours.white)!@#&		end!@#&!@#&!@#&		Drawing.DrawBlankArea(self.X + 1, self.Y + self.Height - 4, self.Width - 2, 1, colours.lightGrey)!@#&		Drawing.DrawCharacters(self.X + 2, self.Y + self.Height - 4, self.TextInput.Value, colours.black, colours.lightGrey)!@#&		Current.CursorPos = {self.X + 2 + self.TextInput.CursorPos, self.Y + self.Height - 4}!@#&		Current.CursorColour = colours.black!@#&!@#&		self.OkButton:Draw()!@#&		if self.CancelButton then!@#&			self.CancelButton:Draw()!@#&		end!@#&	end,!@#&!@#&	Initialise = function(self, title, message, okText, cancelText, returnFunc, numerical)!@#&		local new = {}    -- the new instance!@#&		setmetatable( new, {__index = self} )!@#&		new.Width = 28!@#&		new.Lines = WrapText(message, new.Width - 2)!@#&		new.Height = 7 + #new.Lines!@#&		new.Return = returnFunc!@#&		new.X = math.ceil((Drawing.Screen.Width - new.Width) / 2)!@#&		new.Y = math.ceil((Drawing.Screen.Height - new.Height) / 2)!@#&		new.Title = title!@#&		new.Visible = true!@#&		new.Visible = true!@#&		new.OkButton = Button:Initialise(new.Width - #okText - 2, new.Height - 1, nil, 1, nil, new, function()!@#&			if #new.TextInput.Value > 0 then!@#&				returnFunc(new, true, new.TextInput.Value)!@#&			end!@#&		end, okText)!@#&		if cancelText then!@#&			new.CancelButton = Button:Initialise(new.Width - #okText - 2 - 1 - #cancelText - 2, new.Height - 1, nil, 1, nil, new, function()!@#&				returnFunc(new, false)!@#&			end, cancelText)!@#&		end!@#&		new.TextInput = TextInput:Initialise('', function(enter)!@#&			if enter then!@#&				new.OkButton:Click()!@#&			end!@#&			Draw()!@#&		end, numerical)!@#&!@#&		Current.Input = new.TextInput!@#&!@#&		return new!@#&	end,!@#&!@#&	Show = function(self)!@#&		Current.Window = self!@#&		return self!@#&	end,!@#&!@#&	Close = function(self)!@#&		Current.Window = nil!@#&		Current.Input = nil!@#&		self = nil!@#&	end,!@#&!@#&	Flash = function(self)!@#&		self.Visible = false!@#&		Draw()!@#&		sleep(0.15)!@#&		self.Visible = true!@#&		Draw()!@#&		sleep(0.15)!@#&		self.Visible = false!@#&		Draw()!@#&		sleep(0.15)!@#&		self.Visible = true!@#&		Draw()!@#&	end,!@#&!@#&	Click = function(self, side, x, y)!@#&		local items = {self.OkButton, self.CancelButton}!@#&		local found = false!@#&		for i, v in ipairs(items) do!@#&			if CheckClick(v, x, y) then!@#&				v:Click(side, x, y)!@#&				found = true!@#&			end!@#&		end!@#&		return true!@#&	end!@#&}!@#&!@#&function PrintCentered(text, y)!@#&    local w, h = term.getSize()!@#&    x = math.ceil(math.ceil((w / 2) - (#text / 2)), 0)+1!@#&    term.setCursorPos(x, y)!@#&    print(text)!@#&end!@#&!@#&function DoVanillaClose()!@#&	term.setBackgroundColour(colours.black)!@#&	term.setTextColour(colours.white)!@#&	term.clear()!@#&	term.setCursorPos(1, 1)!@#&	PrintCentered(\"Thanks for using Word!\", (Drawing.Screen.Height/2)-1)!@#&	term.setTextColour(colours.lightGrey)!@#&	PrintCentered(\"Word Proccessor for ComputerCraft\", (Drawing.Screen.Height/2))!@#&	term.setTextColour(colours.white)!@#&	PrintCentered(\"(c) SpeedOS 2024\", (Drawing.Screen.Height/2)+3)!@#&	term.setCursorPos(1, Drawing.Screen.Height)!@#&	error('', 0)!@#&end!@#&!@#&function Close()!@#&	if isQuitting or not Current.Document or not Current.Modified then!@#&		if not OneOS then!@#&			DoVanillaClose()!@#&		end!@#&		return true!@#&	else!@#&		local _w = ButtonDialougeWindow:Initialise('Quit Word?', 'You have unsaved changes, do you want to quit anyway?', 'Quit', 'Cancel', function(window, success)!@#&			if success then!@#&				if OneOS then!@#&					OneOS.Close(true)!@#&				else!@#&					DoVanillaClose()!@#&				end!@#&			end!@#&			window:Close()!@#&			Draw()!@#&		end):Show()!@#&		--it's hacky but it works!@#&		os.queueEvent('mouse_click', 1, _w.X, _w.Y)!@#&		return false!@#&	end!@#&end!@#&!@#&if OneOS then!@#&	OneOS.CanClose = function()!@#&		return Close()!@#&	end!@#&end!@#&!@#&Initialise()",["BSOD"]="os.loadAPI(\"/SpeedAPI/bsod\")!@#&!@#&bsod.bsod(\"It's just a test!\")!@#&!@#&term.setBackgroundColor(colors.black)!@#&term.setTextColor(colors.white)",["SpeedCode"]="--  -------- Variables!@#&!@#&os.loadAPI(\"/SpeedAPI/lddfm\")!@#&!@#&-- Version!@#&local version = \"1.0\"!@#&local args = {...}!@#&!@#&-- Editing!@#&local w, h = term.getSize()!@#&local tabWidth = 2!@#&!@#&local autosaveInterval = 20!@#&local allowEditorEvent = true!@#&local keyboardShortcutTimeout = 0.4!@#&!@#&-- Clipboard!@#&local clipboard = nil!@#&!@#&-- Theme!@#&local theme = {}!@#&!@#&-- Language!@#&local languages = {}!@#&local curLanguage = {}!@#&!@#&-- Events!@#&local event_distract = \"luaide_distractionEvent\"!@#&!@#&-- Locations!@#&local updateURL = \"https://raw.github.com/GravityScore/LuaIDE/master/luaide.lua\"!@#&local ideLocation = \"/\" .. shell.getRunningProgram()!@#&local themeLocation = \"/.LuaIDE-Theme\"!@#&!@#&local function isAdvanced() return term.isColor and term.isColor() end!@#&!@#&!@#&--  -------- Utilities!@#&!@#&local function modRead(properties)!@#&	local w, h = term.getSize()!@#&	local defaults = {replaceChar = nil, history = nil, visibleLength = nil, textLength = nil, !@#&		liveUpdates = nil, exitOnKey = nil}!@#&	if not properties then properties = {} end!@#&	for k, v in pairs(defaults) do if not properties[k] then properties[k] = v end end!@#&	if properties.replaceChar then properties.replaceChar = properties.replaceChar:sub(1, 1) end!@#&	if not properties.visibleLength then properties.visibleLength = w end!@#&!@#&	local sx, sy = term.getCursorPos()!@#&	local line = \"\"!@#&	local pos = 0!@#&	local historyPos = nil!@#&!@#&	local function redraw(repl)!@#&		local scroll = 0!@#&		if properties.visibleLength and sx + pos > properties.visibleLength + 1 then !@#&			scroll = (sx + pos) - (properties.visibleLength + 1)!@#&		end!@#&!@#&		term.setCursorPos(sx, sy)!@#&		local a = repl or properties.replaceChar!@#&		if a then term.write(string.rep(a, line:len() - scroll))!@#&		else term.write(line:sub(scroll + 1, -1)) end!@#&		term.setCursorPos(sx + pos - scroll, sy)!@#&	end!@#&!@#&	local function sendLiveUpdates(event, ...)!@#&		if type(properties.liveUpdates) == \"function\" then!@#&			local ox, oy = term.getCursorPos()!@#&			local a, data = properties.liveUpdates(line, event, ...)!@#&			if a == true and data == nil then!@#&				term.setCursorBlink(false)!@#&				return line!@#&			elseif a == true and data ~= nil then!@#&				term.setCursorBlink(false)!@#&				return data!@#&			end!@#&			term.setCursorPos(ox, oy)!@#&		end!@#&	end!@#&!@#&	term.setCursorBlink(true)!@#&	while true do!@#&		local e, but, x, y, p4, p5 = os.pullEvent()!@#&!@#&		if e == \"char\" then!@#&			local s = false!@#&			if properties.textLength and line:len() < properties.textLength then s = true!@#&			elseif not properties.textLength then s = true end!@#&!@#&			local canType = true!@#&			if not properties.grantPrint and properties.refusePrint then!@#&				local canTypeKeys = {}!@#&				if type(properties.refusePrint) == \"table\" then!@#&					for _, v in pairs(properties.refusePrint) do!@#&						table.insert(canTypeKeys, tostring(v):sub(1, 1))!@#&					end!@#&				elseif type(properties.refusePrint) == \"string\" then!@#&					for char in properties.refusePrint:gmatch(\".\") do!@#&						table.insert(canTypeKeys, char)!@#&					end!@#&				end!@#&				for _, v in pairs(canTypeKeys) do if but == v then canType = false end end!@#&			elseif properties.grantPrint then!@#&				canType = false!@#&				local canTypeKeys = {}!@#&				if type(properties.grantPrint) == \"table\" then!@#&					for _, v in pairs(properties.grantPrint) do!@#&						table.insert(canTypeKeys, tostring(v):sub(1, 1))!@#&					end!@#&				elseif type(properties.grantPrint) == \"string\" then!@#&					for char in properties.grantPrint:gmatch(\".\") do!@#&						table.insert(canTypeKeys, char)!@#&					end!@#&				end!@#&				for _, v in pairs(canTypeKeys) do if but == v then canType = true end end!@#&			end!@#&!@#&			if s and canType then!@#&				line = line:sub(1, pos) .. but .. line:sub(pos + 1, -1)!@#&				pos = pos + 1!@#&				redraw()!@#&			end!@#&		elseif e == \"key\" then!@#&			if but == keys.enter then break!@#&			elseif but == keys.left then if pos > 0 then pos = pos - 1 redraw() end!@#&			elseif but == keys.right then if pos < line:len() then pos = pos + 1 redraw() end!@#&			elseif (but == keys.up or but == keys.down) and properties.history then!@#&				redraw(\" \")!@#&				if but == keys.up then!@#&					if historyPos == nil and #properties.history > 0 then !@#&						historyPos = #properties.history!@#&					elseif historyPos > 1 then !@#&						historyPos = historyPos - 1!@#&					end!@#&				elseif but == keys.down then!@#&					if historyPos == #properties.history then historyPos = nil!@#&					elseif historyPos ~= nil then historyPos = historyPos + 1 end!@#&				end!@#&!@#&				if properties.history and historyPos then!@#&					line = properties.history[historyPos]!@#&					pos = line:len()!@#&				else!@#&					line = \"\"!@#&					pos = 0!@#&				end!@#&!@#&				redraw()!@#&				local a = sendLiveUpdates(\"history\")!@#&				if a then return a end!@#&			elseif but == keys.backspace and pos > 0 then!@#&				redraw(\" \")!@#&				line = line:sub(1, pos - 1) .. line:sub(pos + 1, -1)!@#&				pos = pos - 1!@#&				redraw()!@#&				local a = sendLiveUpdates(\"delete\")!@#&				if a then return a end!@#&			elseif but == keys.home then!@#&				pos = 0!@#&				redraw()!@#&			elseif but == keys.delete and pos < line:len() then!@#&				redraw(\" \")!@#&				line = line:sub(1, pos) .. line:sub(pos + 2, -1)!@#&				redraw()!@#&				local a = sendLiveUpdates(\"delete\")!@#&				if a then return a end!@#&			elseif but == keys[\"end\"] then!@#&				pos = line:len()!@#&				redraw()!@#&			elseif properties.exitOnKey then !@#&				if but == properties.exitOnKey or (properties.exitOnKey == \"control\" and !@#&						(but == 29 or but == 157)) then !@#&					term.setCursorBlink(false)!@#&					return nil!@#&				end!@#&			end!@#&		end!@#&		local a = sendLiveUpdates(e, but, x, y, p4, p5)!@#&		if a then return a end!@#&	end!@#&!@#&	term.setCursorBlink(false)!@#&	if line ~= nil then line = line:gsub(\"^%s*(.-)%s*$\", \"%1\") end!@#&	return line!@#&end!@#&!@#&!@#&--  -------- Themes!@#&!@#&local defaultTheme = {!@#&	background = \"gray\",!@#&	backgroundHighlight = \"lightGray\",!@#&	prompt = \"cyan\",!@#&	promptHighlight = \"lightBlue\",!@#&	err = \"red\",!@#&	errHighlight = \"pink\",!@#&!@#&	editorBackground = \"black\",!@#&	editorLineHightlight = \"gray\",!@#&	editorLineNumbers = \"gray\",!@#&	editorLineNumbersHighlight = \"lightGray\",!@#&	editorError = \"pink\",!@#&	editorErrorHighlight = \"red\",!@#&!@#&	textColor = \"white\",!@#&	conditional = \"yellow\",!@#&	constant = \"orange\",!@#&	[\"function\"] = \"magenta\",!@#&	string = \"cyan\",!@#&	comment = \"lime\"!@#&}!@#&!@#&local normalTheme = {!@#&	background = \"black\",!@#&	backgroundHighlight = \"black\",!@#&	prompt = \"black\",!@#&	promptHighlight = \"black\",!@#&	err = \"black\",!@#&	errHighlight = \"black\",!@#&!@#&	editorBackground = \"black\",!@#&	editorLineHightlight = \"black\",!@#&	editorLineNumbers = \"black\",!@#&	editorLineNumbersHighlight = \"white\",!@#&	editorError = \"black\",!@#&	editorErrorHighlight = \"black\",!@#&!@#&	textColor = \"white\",!@#&	conditional = \"white\",!@#&	constant = \"white\",!@#&	[\"function\"] = \"white\",!@#&	string = \"cyan\",!@#&	comment = \"white\"!@#&}!@#&!@#&local availableThemes = {!@#&	{\"Water (Default)\", \"https://raw.github.com/GravityScore/LuaIDE/master/themes/default.txt\"},!@#&	{\"Fire\", \"https://raw.github.com/GravityScore/LuaIDE/master/themes/fire.txt\"},!@#&	{\"Sublime Text 2\", \"https://raw.github.com/GravityScore/LuaIDE/master/themes/st2.txt\"},!@#&	{\"Midnight\", \"https://raw.github.com/GravityScore/LuaIDE/master/themes/midnight.txt\"},!@#&	{\"TheOriginalBIT\", \"https://raw.github.com/GravityScore/LuaIDE/master/themes/bit.txt\"},!@#&	{\"Superaxander\", \"https://raw.github.com/GravityScore/LuaIDE/master/themes/superaxander.txt\"},!@#&	{\"Forest\", \"https://raw.github.com/GravityScore/LuaIDE/master/themes/forest.txt\"},!@#&	{\"Night\", \"https://raw.github.com/GravityScore/LuaIDE/master/themes/night.txt\"},!@#&	{\"Original\", \"https://raw.github.com/GravityScore/LuaIDE/master/themes/original.txt\"},!@#&}!@#&!@#&local function loadTheme(path)!@#&	local f = io.open(path)!@#&	local l = f:read(\"*l\")!@#&	local config = {}!@#&	while l ~= nil do!@#&		local k, v = string.match(l, \"^(%a+)=(%a+)\")!@#&		if k and v then config[k] = v end!@#&		l = f:read(\"*l\")!@#&	end!@#&	f:close()!@#&	return config!@#&end!@#&!@#&-- Load Theme!@#&if isAdvanced() then theme = defaultTheme!@#&else theme = normalTheme end!@#&!@#&!@#&--  -------- Drawing!@#&!@#&local function centerPrint(text, ny)!@#&	if type(text) == \"table\" then for _, v in pairs(text) do centerPrint(v) end!@#&	else!@#&		local x, y = term.getCursorPos()!@#&		local w, h = term.getSize()!@#&		term.setCursorPos(w/2 - text:len()/2 + (#text % 2 == 0 and 1 or 0), ny or y)!@#&		print(text)!@#&	end!@#&end!@#&!@#&local function title(t)!@#&	term.setTextColor(colors[theme.textColor])!@#&	term.setBackgroundColor(colors[theme.background])!@#&	term.clear()!@#&!@#&	term.setBackgroundColor(colors[theme.backgroundHighlight])!@#&	for i = 2, 4 do term.setCursorPos(1, i) term.clearLine() end!@#&	term.setCursorPos(3, 3)!@#&	term.write(t)!@#&end!@#&!@#&local function centerRead(wid, begt)!@#&	local function liveUpdate(line, e, but, x, y, p4, p5)!@#&		if isAdvanced() and e == \"mouse_click\" and x >= w/2 - wid/2 and x <= w/2 - wid/2 + 10 !@#&				and y >= 13 and y <= 15 then!@#&			return true, \"\"!@#&		end!@#&	end!@#&!@#&	if not begt then begt = \"\" end!@#&	term.setTextColor(colors[theme.textColor])!@#&	term.setBackgroundColor(colors[theme.promptHighlight])!@#&	for i = 8, 10 do!@#&		term.setCursorPos(w/2 - wid/2, i)!@#&		term.write(string.rep(\" \", wid))!@#&	end!@#&!@#&	if isAdvanced() then!@#&		term.setBackgroundColor(colors[theme.errHighlight])!@#&		for i = 13, 15 do!@#&			term.setCursorPos(w/2 - wid/2 + 1, i)!@#&			term.write(string.rep(\" \", 10))!@#&		end!@#&		term.setCursorPos(w/2 - wid/2 + 2, 14)!@#&		term.write(\"> Cancel\")!@#&	end!@#&!@#&	term.setBackgroundColor(colors[theme.promptHighlight])!@#&	term.setCursorPos(w/2 - wid/2 + 1, 9)!@#&	term.write(\"> \" .. begt)!@#&	return modRead({visibleLength = w/2 + wid/2, liveUpdates = liveUpdate})!@#&end!@#&!@#&!@#&--  -------- Prompt!@#&!@#&local function prompt(list, dir, isGrid)!@#&	local function draw(sel)!@#&		for i, v in ipairs(list) do!@#&			if i == sel then term.setBackgroundColor(v.highlight or colors[theme.promptHighlight])!@#&			else term.setBackgroundColor(v.bg or colors[theme.prompt]) end!@#&			term.setTextColor(v.tc or colors[theme.textColor])!@#&			for i = -1, 1 do!@#&				term.setCursorPos(v[2], v[3] + i)!@#&				term.write(string.rep(\" \", v[1]:len() + 4))!@#&			end!@#&!@#&			term.setCursorPos(v[2], v[3])!@#&			if i == sel then!@#&				term.setBackgroundColor(v.highlight or colors[theme.promptHighlight])!@#&				term.write(\" > \")!@#&			else term.write(\" - \") end!@#&			term.write(v[1] .. \" \")!@#&		end!@#&	end!@#&!@#&	local key1 = dir == \"horizontal\" and 203 or 200!@#&	local key2 = dir == \"horizontal\" and 205 or 208!@#&	local sel = 1!@#&	draw(sel)!@#&!@#&	while true do!@#&		local e, but, x, y = os.pullEvent()!@#&		if e == \"key\" and but == 28 then!@#&			return list[sel][1]!@#&		elseif e == \"key\" and but == key1 and sel > 1 then!@#&			sel = sel - 1!@#&			draw(sel)!@#&		elseif e == \"key\" and but == key2 and ((err == true and sel < #list - 1) or (sel < #list)) then!@#&			sel = sel + 1!@#&			draw(sel)!@#&		elseif isGrid and e == \"key\" and but == 203 and sel > 2 then!@#&			sel = sel - 2!@#&			draw(sel)!@#&		elseif isGrid and e == \"key\" and but == 205 and sel < 3 then!@#&			sel = sel + 2!@#&			draw(sel)!@#&		elseif e == \"mouse_click\" then!@#&			for i, v in ipairs(list) do!@#&				if x >= v[2] - 1 and x <= v[2] + v[1]:len() + 3 and y >= v[3] - 1 and y <= v[3] + 1 then!@#&					return list[i][1]!@#&				end!@#&			end!@#&		end!@#&	end!@#&end!@#&!@#&local function scrollingPrompt(list)!@#&	local function draw(items, sel, loc)!@#&		for i, v in ipairs(items) do!@#&			local bg = colors[theme.prompt]!@#&			local bghigh = colors[theme.promptHighlight]!@#&			if v:find(\"Back\") or v:find(\"Return\") then!@#&				bg = colors[theme.err]!@#&				bghigh = colors[theme.errHighlight]!@#&			end!@#&!@#&			if i == sel then term.setBackgroundColor(bghigh)!@#&			else term.setBackgroundColor(bg) end!@#&			term.setTextColor(colors[theme.textColor])!@#&			for x = -1, 1 do!@#&				term.setCursorPos(3, (i * 4) + x + 4)!@#&				term.write(string.rep(\" \", w - 13))!@#&			end!@#&!@#&			term.setCursorPos(3, i * 4 + 4)!@#&			if i == sel then!@#&				term.setBackgroundColor(bghigh)!@#&				term.write(\" > \")!@#&			else term.write(\" - \") end!@#&			term.write(v .. \" \")!@#&		end!@#&	end!@#&!@#&	local function updateDisplayList(items, loc, len)!@#&		local ret = {}!@#&		for i = 1, len do!@#&			local item = items[i + loc - 1]!@#&			if item then table.insert(ret, item) end!@#&		end!@#&		return ret!@#&	end!@#&!@#&	-- Variables!@#&	local sel = 1!@#&	local loc = 1!@#&	local len = 3!@#&	local disList = updateDisplayList(list, loc, len)!@#&	draw(disList, sel, loc)!@#&!@#&	-- Loop!@#&	while true do!@#&		local e, key, x, y = os.pullEvent()!@#&!@#&		if e == \"mouse_click\" then!@#&			for i, v in ipairs(disList) do!@#&				if x >= 3 and x <= w - 11 and y >= i * 4 + 3 and y <= i * 4 + 5 then return v end!@#&			end!@#&		elseif e == \"key\" and key == 200 then!@#&			if sel > 1 then!@#&				sel = sel - 1!@#&				draw(disList, sel, loc)!@#&			elseif loc > 1 then!@#&				loc = loc - 1!@#&				disList = updateDisplayList(list, loc, len)!@#&				draw(disList, sel, loc)!@#&			end!@#&		elseif e == \"key\" and key == 208 then!@#&			if sel < len then!@#&				sel = sel + 1!@#&				draw(disList, sel, loc)!@#&			elseif loc + len - 1 < #list then!@#&				loc = loc + 1!@#&				disList = updateDisplayList(list, loc, len)!@#&				draw(disList, sel, loc)!@#&			end!@#&		elseif e == \"mouse_scroll\" then!@#&			os.queueEvent(\"key\", key == -1 and 200 or 208)!@#&		elseif e == \"key\" and key == 28 then!@#&			return disList[sel]!@#&		end!@#&	end!@#&end!@#&!@#&function monitorKeyboardShortcuts()!@#&	local ta, tb = nil, nil!@#&	local allowChar = false!@#&	local shiftPressed = false!@#&	while true do!@#&		local event, char = os.pullEvent()!@#&		if event == \"key\" and (char == 42 or char == 52) then!@#&			shiftPressed = true!@#&			tb = os.startTimer(keyboardShortcutTimeout)!@#&		elseif event == \"key\" and (char == 29 or char == 157 or char == 219 or char == 220) then!@#&			allowEditorEvent = false!@#&			allowChar = true!@#&			ta = os.startTimer(keyboardShortcutTimeout)!@#&		elseif event == \"key\" and allowChar then!@#&			local name = nil!@#&			for k, v in pairs(keys) do!@#&				if v == char then!@#&					if shiftPressed then os.queueEvent(\"shortcut\", \"ctrl shift\", k:lower())!@#&					else os.queueEvent(\"shortcut\", \"ctrl\", k:lower()) end!@#&					sleep(0.005)!@#&					allowEditorEvent = true!@#&				end!@#&			end!@#&			if shiftPressed then os.queueEvent(\"shortcut\", \"ctrl shift\", char)!@#&			else os.queueEvent(\"shortcut\", \"ctrl\", char) end!@#&		elseif event == \"timer\" and char == ta then!@#&			allowEditorEvent = true!@#&			allowChar = false!@#&		elseif event == \"timer\" and char == tb then!@#&			shiftPressed = false!@#&		end!@#&	end!@#&end!@#&!@#&!@#&--  -------- Saving and Loading!@#&!@#&local function download(url, path)!@#&	for i = 1, 3 do!@#&		local response = http.get(url)!@#&		if response then!@#&			local data = response.readAll()!@#&			response.close()!@#&			if path then!@#&				local f = io.open(path, \"w\")!@#&				f:write(data)!@#&				f:close()!@#&			end!@#&			return true!@#&		end!@#&	end!@#&!@#&	return false!@#&end!@#&!@#&local function saveFile(path, lines)!@#&	local dir = path:sub(1, path:len() - fs.getName(path):len())!@#&	if not fs.exists(dir) then fs.makeDir(dir) end!@#&	if not fs.isDir(path) and not fs.isReadOnly(path) then!@#&		local a = \"\"!@#&		for _, v in pairs(lines) do a = a .. v .. \"\\n\" end!@#&!@#&		local f = io.open(path, \"w\")!@#&		f:write(a)!@#&		f:close()!@#&		return true!@#&	else return false end!@#&end!@#&!@#&local function loadFile(path)!@#&	if not fs.exists(path) then!@#&		local dir = path:sub(1, path:len() - fs.getName(path):len())!@#&		if not fs.exists(dir) then fs.makeDir(dir) end!@#&		local f = io.open(path, \"w\")!@#&		f:write(\"\")!@#&		f:close()!@#&	end!@#&!@#&	local l = {}!@#&	if fs.exists(path) and not fs.isDir(path) then!@#&		local f = io.open(path, \"r\")!@#&		if f then!@#&			local a = f:read(\"*l\")!@#&			while a do!@#&				table.insert(l, a)!@#&				a = f:read(\"*l\")!@#&			end!@#&			f:close()!@#&		end!@#&	else return nil end!@#&!@#&	if #l < 1 then table.insert(l, \"\") end!@#&	return l!@#&end!@#&!@#&!@#&--  -------- Languages!@#&!@#&languages.lua = {}!@#&languages.brainfuck = {}!@#&languages.none = {}!@#&!@#&--  Lua!@#&!@#&languages.lua.helpTips = {!@#&	\"A function you tried to call doesn't exist.\",!@#&	\"You made a typo.\",!@#&	\"The index of an array is nil.\",!@#&	\"The wrong variable type was passed.\",!@#&	\"A function/variable doesn't exist.\",!@#&	\"You missed an 'end'.\",!@#&	\"You missed a 'then'.\",!@#&	\"You declared a variable incorrectly.\",!@#&	\"One of your variables is mysteriously nil.\"!@#&}!@#&!@#&languages.lua.defaultHelpTips = {!@#&	2, 5!@#&}!@#&!@#&languages.lua.errors = {!@#&	[\"Attempt to call nil.\"] = {1, 2},!@#&	[\"Attempt to index nil.\"] = {3, 2},!@#&	[\".+ expected, got .+\"] = {4, 2, 9},!@#&	[\"'end' expected\"] = {6, 2},!@#&	[\"'then' expected\"] = {7, 2},!@#&	[\"'=' expected\"] = {8, 2}!@#&}!@#&!@#&languages.lua.keywords = {!@#&	[\"and\"] = \"conditional\",!@#&	[\"break\"] = \"conditional\",!@#&	[\"do\"] = \"conditional\",!@#&	[\"else\"] = \"conditional\",!@#&	[\"elseif\"] = \"conditional\",!@#&	[\"end\"] = \"conditional\",!@#&	[\"for\"] = \"conditional\",!@#&	[\"function\"] = \"conditional\",!@#&	[\"if\"] = \"conditional\",!@#&	[\"in\"] = \"conditional\",!@#&	[\"local\"] = \"conditional\",!@#&	[\"not\"] = \"conditional\",!@#&	[\"or\"] = \"conditional\",!@#&	[\"repeat\"] = \"conditional\",!@#&	[\"return\"] = \"conditional\",!@#&	[\"then\"] = \"conditional\",!@#&	[\"until\"] = \"conditional\",!@#&	[\"while\"] = \"conditional\",!@#&!@#&	[\"true\"] = \"constant\",!@#&	[\"false\"] = \"constant\",!@#&	[\"nil\"] = \"constant\",!@#&!@#&	[\"print\"] = \"function\",!@#&	[\"write\"] = \"function\",!@#&	[\"sleep\"] = \"function\",!@#&	[\"pairs\"] = \"function\",!@#&	[\"ipairs\"] = \"function\",!@#&	[\"loadstring\"] = \"function\",!@#&	[\"loadfile\"] = \"function\",!@#&	[\"dofile\"] = \"function\",!@#&	[\"rawset\"] = \"function\",!@#&	[\"rawget\"] = \"function\",!@#&	[\"setfenv\"] = \"function\",!@#&	[\"getfenv\"] = \"function\",!@#&}!@#&!@#&languages.lua.parseError = function(e)!@#&	local ret = {filename = \"unknown\", line = -1, display = \"Unknown!\", err = \"\"}!@#&	if e and e ~= \"\" then!@#&		ret.err = e!@#&		if e:find(\":\") then!@#&			ret.filename = e:sub(1, e:find(\":\") - 1):gsub(\"^%s*(.-)%s*$\", \"%1\")!@#&			-- The \"\" is needed to circumvent a CC bug!@#&			e = (e:sub(e:find(\":\") + 1) .. \"\"):gsub(\"^%s*(.-)%s*$\", \"%1\")!@#&			if e:find(\":\") then!@#&				ret.line = e:sub(1, e:find(\":\") - 1)!@#&				e = e:sub(e:find(\":\") + 2):gsub(\"^%s*(.-)%s*$\", \"%1\") .. \"\"!@#&			end!@#&		end!@#&		ret.display = e:sub(1, 1):upper() .. e:sub(2, -1) .. \".\"!@#&	end!@#&!@#&	return ret!@#&end!@#&!@#&languages.lua.getCompilerErrors = function(code)!@#&	code = \"local function ee65da6af1cb6f63fee9a081246f2fd92b36ef2(...)\\n\\n\" .. code .. \"\\n\\nend\"!@#&	local fn, err = loadstring(code)!@#&	if not err then!@#&		local _, e = pcall(fn)!@#&		if e then err = e end!@#&	end!@#&!@#&	if err then!@#&		local a = err:find(\"]\", 1, true)!@#&		if a then err = \"string\" .. err:sub(a + 1, -1) end!@#&		local ret = languages.lua.parseError(err)!@#&		if tonumber(ret.line) then ret.line = tonumber(ret.line) end!@#&		return ret!@#&	else return languages.lua.parseError(nil) end!@#&end!@#&!@#&languages.lua.run = function(path, ar)!@#&	local fn, err = loadfile(path)!@#&	setfenv(fn, getfenv())!@#&	if not err then!@#&		_, err = pcall(function() fn(unpack(ar)) end)!@#&	end!@#&	return err!@#&end!@#&!@#&!@#&--  Brainfuck!@#&!@#&languages.brainfuck.helpTips = {!@#&	\"Well idk...\",!@#&	\"Isn't this the whole point of the language?\",!@#&	\"Ya know... Not being able to debug it?\",!@#&	\"You made a typo.\"!@#&}!@#&!@#&languages.brainfuck.defaultHelpTips = {!@#&	1, 2, 3!@#&}!@#&!@#&languages.brainfuck.errors = {!@#&	[\"No matching '['\"] = {1, 2, 3, 4}!@#&}!@#&!@#&languages.brainfuck.keywords = {}!@#&!@#&languages.brainfuck.parseError = function(e)!@#&	local ret = {filename = \"unknown\", line = -1, display = \"Unknown!\", err = \"\"}!@#&	if e and e ~= \"\" then!@#&		ret.err = e!@#&		ret.line = e:sub(1, e:find(\":\") - 1)!@#&		e = e:sub(e:find(\":\") + 2):gsub(\"^%s*(.-)%s*$\", \"%1\") .. \"\"!@#&		ret.display = e:sub(1, 1):upper() .. e:sub(2, -1) .. \".\"!@#&	end!@#&!@#&	return ret!@#&end!@#&!@#&languages.brainfuck.mapLoops = function(code)!@#&	-- Map loops!@#&	local loopLocations = {}!@#&	local loc = 1!@#&	local line = 1!@#&	for let in string.gmatch(code, \".\") do!@#&		if let == \"[\" then!@#&			loopLocations[loc] = true!@#&		elseif let == \"]\" then!@#&			local found = false!@#&			for i = loc, 1, -1 do !@#&				if loopLocations[i] == true then!@#&					loopLocations[i] = loc!@#&					found = true!@#&				end!@#&			end!@#&!@#&			if not found then!@#&				return line .. \": No matching '['\"!@#&			end!@#&		end!@#&!@#&		if let == \"\\n\" then line = line + 1 end!@#&		loc = loc + 1!@#&	end!@#&	return loopLocations!@#&end!@#&!@#&languages.brainfuck.getCompilerErrors = function(code)!@#&	local a = languages.brainfuck.mapLoops(code)!@#&	if type(a) == \"string\" then return languages.brainfuck.parseError(a)!@#&	else return languages.brainfuck.parseError(nil) end!@#&end!@#&!@#&languages.brainfuck.run = function(path)!@#&	-- Read from file!@#&	local f = io.open(path, \"r\")!@#&	local content = f:read(\"*a\")!@#&	f:close()!@#&!@#&	-- Define environment!@#&	local dataCells = {}!@#&	local dataPointer = 1!@#&	local instructionPointer = 1!@#&!@#&	-- Map loops!@#&	local loopLocations = languages.brainfuck.mapLoops(content)!@#&	if type(loopLocations) == \"string\" then return loopLocations end!@#&!@#&	-- Execute code!@#&	while true do!@#&		local let = content:sub(instructionPointer, instructionPointer)!@#&!@#&		if let == \">\" then!@#&			dataPointer = dataPointer + 1!@#&			if not dataCells[tostring(dataPointer)] then dataCells[tostring(dataPointer)] = 0 end!@#&		elseif let == \"<\" then!@#&			if not dataCells[tostring(dataPointer)] then dataCells[tostring(dataPointer)] = 0 end!@#&			dataPointer = dataPointer - 1!@#&			if not dataCells[tostring(dataPointer)] then dataCells[tostring(dataPointer)] = 0 end!@#&		elseif let == \"+\" then!@#&			if not dataCells[tostring(dataPointer)] then dataCells[tostring(dataPointer)] = 0 end!@#&			dataCells[tostring(dataPointer)] = dataCells[tostring(dataPointer)] + 1!@#&		elseif let == \"-\" then!@#&			if not dataCells[tostring(dataPointer)] then dataCells[tostring(dataPointer)] = 0 end!@#&			dataCells[tostring(dataPointer)] = dataCells[tostring(dataPointer)] - 1!@#&		elseif let == \".\" then!@#&			if not dataCells[tostring(dataPointer)] then dataCells[tostring(dataPointer)] = 0 end!@#&			if term.getCursorPos() >= w then print(\"\") end!@#&			write(string.char(math.max(1, dataCells[tostring(dataPointer)])))!@#&		elseif let == \",\" then!@#&			if not dataCells[tostring(dataPointer)] then dataCells[tostring(dataPointer)] = 0 end!@#&			term.setCursorBlink(true)!@#&			local e, but = os.pullEvent(\"char\")!@#&			term.setCursorBlink(false)!@#&			dataCells[tostring(dataPointer)] = string.byte(but)!@#&			if term.getCursorPos() >= w then print(\"\") end!@#&			write(but)!@#&		elseif let == \"/\" then!@#&			if not dataCells[tostring(dataPointer)] then dataCells[tostring(dataPointer)] = 0 end!@#&			if term.getCursorPos() >= w then print(\"\") end!@#&			write(dataCells[tostring(dataPointer)])!@#&		elseif let == \"[\" then!@#&			if dataCells[tostring(dataPointer)] == 0 then!@#&				for k, v in pairs(loopLocations) do!@#&					if k == instructionPointer then instructionPointer = v end!@#&				end!@#&			end!@#&		elseif let == \"]\" then!@#&			for k, v in pairs(loopLocations) do!@#&				if v == instructionPointer then instructionPointer = k - 1 end!@#&			end!@#&		end!@#&!@#&		instructionPointer = instructionPointer + 1!@#&		if instructionPointer > content:len() then print(\"\") break end!@#&	end!@#&end!@#&!@#&--  None!@#&!@#&languages.none.helpTips = {}!@#&languages.none.defaultHelpTips = {}!@#&languages.none.errors = {}!@#&languages.none.keywords = {}!@#&!@#&languages.none.parseError = function(err)!@#&	return {filename = \"\", line = -1, display = \"\", err = \"\"}!@#&end!@#&!@#&languages.none.getCompilerErrors = function(code)!@#&	return languages.none.parseError(nil)!@#&end!@#&!@#&languages.none.run = function(path) end!@#&!@#&!@#&-- Load language!@#&curLanguage = languages.lua!@#&!@#&!@#&--  -------- Run GUI!@#&!@#&local function viewErrorHelp(e)!@#&	title(\"SpeedCode - Error Help\")!@#&!@#&	local tips = nil!@#&	for k, v in pairs(curLanguage.errors) do!@#&		if e.display:find(k) then tips = v break end!@#&	end!@#&!@#&	term.setBackgroundColor(colors[theme.err])!@#&	for i = 6, 8 do!@#&		term.setCursorPos(5, i)!@#&		term.write(string.rep(\" \", 35))!@#&	end!@#&!@#&	term.setBackgroundColor(colors[theme.prompt])!@#&	for i = 10, 18 do!@#&		term.setCursorPos(5, i)!@#&		term.write(string.rep(\" \", 46))!@#&	end!@#&!@#&	if tips then!@#&		term.setBackgroundColor(colors[theme.err])!@#&		term.setCursorPos(6, 7)!@#&		term.write(\"Error Help\")!@#&!@#&		term.setBackgroundColor(colors[theme.prompt])!@#&		for i, v in ipairs(tips) do!@#&			term.setCursorPos(7, i + 10)!@#&			term.write(\"- \" .. curLanguage.helpTips[v])!@#&		end!@#&	else!@#&		term.setBackgroundColor(colors[theme.err])!@#&		term.setCursorPos(6, 7)!@#&		term.write(\"No Error Tips Available!\")!@#&!@#&		term.setBackgroundColor(colors[theme.prompt])!@#&		term.setCursorPos(6, 11)!@#&		term.write(\"There are no error tips available, but\")!@#&		term.setCursorPos(6, 12)!@#&		term.write(\"you could see if it was any of these:\")!@#&!@#&		for i, v in ipairs(curLanguage.defaultHelpTips) do!@#&			term.setCursorPos(7, i + 12)!@#&			term.write(\"- \" .. curLanguage.helpTips[v])!@#&		end!@#&	end!@#&!@#&	prompt({{\"Back\", w - 8, 7}}, \"horizontal\")!@#&end!@#&!@#&local function run(path, lines, useArgs)!@#&	local ar = {}!@#&	if useArgs then!@#&		title(\"S - Run \" .. fs.getName(path))!@#&		local s = centerRead(w - 13, fs.getName(path) .. \" \")!@#&		for m in string.gmatch(s, \"[^ \\t]+\") do ar[#ar + 1] = m:gsub(\"^%s*(.-)%s*$\", \"%1\") end!@#&	end!@#&	!@#&	saveFile(path, lines)!@#&	term.setCursorBlink(false)!@#&	term.setBackgroundColor(colors.black)!@#&	term.setTextColor(colors.white)!@#&	term.clear()!@#&	term.setCursorPos(1, 1)!@#&	local err = curLanguage.run(path, ar)!@#&!@#&	term.setBackgroundColor(colors.black)!@#&	print(\"\\n\")!@#&	if err then!@#&		if isAdvanced() then term.setTextColor(colors.red) end!@#&		centerPrint(\"The program has crashed!\")!@#&	end!@#&	term.setTextColor(colors.white)!@#&	centerPrint(\"Press any key to return to SpeedCode...\")!@#&	while true do!@#&		local e = os.pullEvent()!@#&		if e == \"key\" then break end!@#&	end!@#&!@#&	-- To prevent key from showing up in editor!@#&	os.queueEvent(event_distract)!@#&	os.pullEvent()!@#&!@#&	if err then!@#&		if curLanguage == languages.lua and err:find(\"]\") then!@#&			err = fs.getName(path) .. err:sub(err:find(\"]\", 1, true) + 1, -1)!@#&		end!@#&!@#&		while true do!@#&			title(\"SpeedCode - Error!\")!@#&!@#&			term.setBackgroundColor(colors[theme.err])!@#&			for i = 6, 8 do!@#&				term.setCursorPos(3, i)!@#&				term.write(string.rep(\" \", w - 5))!@#&			end!@#&			term.setCursorPos(4, 7)!@#&			term.write(\"The program has crashed!\")!@#&!@#&			term.setBackgroundColor(colors[theme.prompt])!@#&			for i = 10, 14 do!@#&				term.setCursorPos(3, i)!@#&				term.write(string.rep(\" \", w - 5))!@#&			end!@#&!@#&			local formattedErr = curLanguage.parseError(err)!@#&			term.setCursorPos(4, 11)!@#&			term.write(\"Line: \" .. formattedErr.line)!@#&			term.setCursorPos(4, 12)!@#&			term.write(\"Error:\")!@#&			term.setCursorPos(5, 13)!@#&!@#&			local a = formattedErr.display!@#&			local b = nil!@#&			if a:len() > w - 8 then!@#&				for i = a:len(), 1, -1 do!@#&					if a:sub(i, i) == \" \" then!@#&						b = a:sub(i + 1, -1)!@#&						a = a:sub(1, i)!@#&						break!@#&					end!@#&				end!@#&			end!@#&!@#&			term.write(a)!@#&			if b then!@#&				term.setCursorPos(5, 14)!@#&				term.write(b)!@#&			end!@#&			!@#&			local opt = prompt({{\"Error Help\", w/2 - 15, 17}, {\"Go To Line\", w/2 + 2, 17}},!@#&				\"horizontal\")!@#&			if opt == \"Error Help\" then!@#&				viewErrorHelp(formattedErr)!@#&			elseif opt == \"Go To Line\" then!@#&				-- To prevent key from showing up in editor!@#&				os.queueEvent(event_distract)!@#&				os.pullEvent()!@#&!@#&				return \"go to\", tonumber(formattedErr.line)!@#&			end!@#&		end!@#&	end!@#&end!@#&!@#&!@#&--  -------- Functions!@#&!@#&local function goto()!@#&	term.setBackgroundColor(colors[theme.backgroundHighlight])!@#&	term.setCursorPos(2, 1)!@#&	term.clearLine()!@#&	term.write(\"Line: \")!@#&	local line = modRead({visibleLength = w - 2})!@#&!@#&	local num = tonumber(line)!@#&	if num and num > 0 then return num!@#&	else!@#&		term.setCursorPos(2, 1)!@#&		term.clearLine()!@#&		term.write(\"Not a line number!\")!@#&		sleep(1.6)!@#&		return nil!@#&	end!@#&end!@#&!@#&local function setsyntax()!@#&	local opts = {!@#&		\"[Lua]   Brainfuck    None \",!@#&		\" Lua   [Brainfuck]   None \",!@#&		\" Lua    Brainfuck   [None]\"!@#&	}!@#&	local sel = 1!@#&!@#&	term.setCursorBlink(false)!@#&	term.setBackgroundColor(colors[theme.backgroundHighlight])!@#&	term.setCursorPos(2, 1)!@#&	term.clearLine()!@#&	term.write(opts[sel])!@#&	while true do!@#&		local e, but, x, y = os.pullEvent(\"key\")!@#&		if but == 203 then!@#&			sel = math.max(1, sel - 1)!@#&			term.setCursorPos(2, 1)!@#&			term.clearLine()!@#&			term.write(opts[sel])!@#&		elseif but == 205 then!@#&			sel = math.min(#opts, sel + 1)!@#&			term.setCursorPos(2, 1)!@#&			term.clearLine()!@#&			term.write(opts[sel])!@#&		elseif but == 28 then!@#&			if sel == 1 then curLanguage = languages.lua!@#&			elseif sel == 2 then curLanguage = languages.brainfuck!@#&			elseif sel == 3 then curLanguage = languages.none end!@#&			term.setCursorBlink(true)!@#&			return!@#&		end!@#&	end!@#&end!@#&!@#&!@#&--  -------- Re-Indenting!@#&!@#&local tabWidth = 2!@#&!@#&local comments = {}!@#&local strings = {}!@#&!@#&local increment = {!@#&	\"if%s+.+%s+then%s*$\",!@#&	\"for%s+.+%s+do%s*$\",!@#&	\"while%s+.+%s+do%s*$\",!@#&	\"repeat%s*$\",!@#&	\"function%s+[a-zA-Z_0-9]\\(.*\\)%s*$\"!@#&}!@#&!@#&local decrement = {!@#&	\"end\",!@#&	\"until%s+.+\"!@#&}!@#&!@#&local special = {!@#&	\"else%s*$\",!@#&	\"elseif%s+.+%s+then%s*$\"!@#&}!@#&!@#&local function check(func)!@#&	for _, v in pairs(func) do!@#&		local cLineStart = v[\"lineStart\"]!@#&		local cLineEnd = v[\"lineEnd\"]!@#&		local cCharStart = v[\"charStart\"]!@#&		local cCharEnd = v[\"charEnd\"]!@#&!@#&		if line >= cLineStart and line <= cLineEnd then!@#&			if line == cLineStart then return cCharStart < charNumb!@#&			elseif line == cLineEnd then return cCharEnd > charNumb!@#&			else return true end!@#&		end!@#&	end!@#&end!@#&!@#&local function isIn(line, loc)!@#&	if check(comments) then return true end!@#&	if check(strings) then return true end!@#&	return false!@#&end!@#&!@#&local function setComment(ls, le, cs, ce)!@#&	comments[#comments + 1] = {}!@#&	comments[#comments].lineStart = ls!@#&	comments[#comments].lineEnd = le!@#&	comments[#comments].charStart = cs!@#&	comments[#comments].charEnd = ce!@#&end!@#&!@#&local function setString(ls, le, cs, ce)!@#&	strings[#strings + 1] = {}!@#&	strings[#strings].lineStart = ls!@#&	strings[#strings].lineEnd = le!@#&	strings[#strings].charStart = cs!@#&	strings[#strings].charEnd = ce!@#&end!@#&!@#&local function map(contents)!@#&	local inCom = false!@#&	local inStr = false!@#&!@#&	for i = 1, #contents do!@#&		if content[i]:find(\"%-%-%[%[\") and not inStr and not inCom then!@#&			local cStart = content[i]:find(\"%-%-%[%[\")!@#&			setComment(i, nil, cStart, nil)!@#&			inCom = true!@#&		elseif content[i]:find(\"%-%-%[=%[\") and not inStr and not inCom then!@#&			local cStart = content[i]:find(\"%-%-%[=%[\")!@#&			setComment(i, nil, cStart, nil)!@#&			inCom = true!@#&		elseif content[i]:find(\"%[%[\") and not inStr and not inCom then!@#&			local cStart = content[i]:find(\"%[%[\")!@#&			setString(i, nil, cStart, nil)!@#&			inStr = true!@#&		elseif content[i]:find(\"%[=%[\") and not inStr and not inCom then!@#&			local cStart = content[i]:find(\"%[=%[\")!@#&			setString(i, nil, cStart, nil)!@#&			inStr = true!@#&		end!@#&!@#&		if content[i]:find(\"%]%]\") and inStr and not inCom then!@#&			local cStart, cEnd = content[i]:find(\"%]%]\")!@#&			strings[#strings].lineEnd = i!@#&			strings[#strings].charEnd = cEnd!@#&			inStr = false!@#&		elseif content[i]:find(\"%]=%]\") and inStr and not inCom then!@#&			local cStart, cEnd = content[i]:find(\"%]=%]\")!@#&			strings[#strings].lineEnd = i!@#&			strings[#strings].charEnd = cEnd!@#&			inStr = false!@#&		end!@#&!@#&		if content[i]:find(\"%]%]\") and not inStr and inCom then!@#&			local cStart, cEnd = content[i]:find(\"%]%]\")!@#&			comments[#comments].lineEnd = i!@#&			comments[#comments].charEnd = cEnd!@#&			inCom = false!@#&		elseif content[i]:find(\"%]=%]\") and not inStr and inCom then!@#&			local cStart, cEnd = content[i]:find(\"%]=%]\")!@#&			comments[#comments].lineEnd = i!@#&			comments[#comments].charEnd = cEnd!@#&			inCom = false!@#&		end!@#&!@#&		if content[i]:find(\"%-%-\") and not inStr and not inCom then!@#&			local cStart = content[i]:find(\"%-%-\")!@#&			setComment(i, i, cStart, -1)!@#&		elseif content[i]:find(\"'\") and not inStr and not inCom then!@#&			local cStart, cEnd = content[i]:find(\"'\")!@#&			local nextChar = content[i]:sub(cEnd + 1, string.len(content[i]))!@#&			local _, cEnd = nextChar:find(\"'\")!@#&			setString(i, i, cStart, cEnd)!@#&		elseif content[i]:find('\"') and not inStr and not inCom then!@#&			local cStart, cEnd = content[i]:find('\"')!@#&			local nextChar = content[i]:sub(cEnd + 1, string.len(content[i]))!@#&			local _, cEnd = nextChar:find('\"')!@#&			setString(i, i, cStart, cEnd)!@#&		end!@#&	end!@#&end!@#&!@#&local function reindent(contents)!@#&	local err = nil!@#&	if curLanguage ~= languages.lua then!@#&		err = \"Cannot indent languages other than Lua!\"!@#&	elseif curLanguage.getCompilerErrors(table.concat(contents, \"\\n\")).line ~= -1 then!@#&		err = \"Cannot indent a program with errors!\"!@#&	end!@#&!@#&	if err then!@#&		term.setCursorBlink(false)!@#&		term.setCursorPos(2, 1)!@#&		term.setBackgroundColor(colors[theme.backgroundHighlight])!@#&		term.clearLine()!@#&		term.write(err)!@#&		sleep(1.6)!@#&		return contents!@#&	end!@#&!@#&	local new = {}!@#&	local level = 0!@#&	for k, v in pairs(contents) do!@#&		local incrLevel = false!@#&		local foundIncr = false!@#&		for _, incr in pairs(increment) do!@#&			if v:find(incr) and not isIn(k, v:find(incr)) then!@#&				incrLevel = true!@#&			end!@#&			if v:find(incr:sub(1, -2)) and not isIn(k, v:find(incr)) then!@#&				foundIncr = true!@#&			end!@#&		end!@#&!@#&		local decrLevel = false!@#&		if not incrLevel then!@#&			for _, decr in pairs(decrement) do!@#&				if v:find(decr) and not isIn(k, v:find(decr)) and not foundIncr then!@#&					level = math.max(0, level - 1)!@#&					decrLevel = true!@#&				end!@#&			end!@#&		end!@#&!@#&		if not decrLevel then!@#&			for _, sp in pairs(special) do!@#&				if v:find(sp) and not isIn(k, v:find(sp)) then!@#&					incrLevel = true!@#&					level = math.max(0, level - 1)!@#&				end!@#&			end!@#&		end!@#&!@#&		new[k] = string.rep(\" \", level * tabWidth) .. v!@#&		if incrLevel then level = level + 1 end!@#&	end!@#&!@#&	return new!@#&end!@#&!@#&!@#&--  -------- Menu!@#&!@#&local menu = {!@#&	[1] = {\"File\",!@#&--		\"About\",!@#&--		\"Settings\",!@#&--		\"\",!@#&		\"New File  ^+N\",!@#&		\"Open File ^+O\",!@#&		\"Save File ^+S\",!@#&		\"Close     ^+W\",!@#&		\"Print     ^+P\",!@#&		\"Quit      ^+Q\"!@#&	}, [2] = {\"Edit\",!@#&		\"Cut Line   ^+X\",!@#&		\"Copy Line  ^+C\",!@#&		\"Paste Line ^+V\",!@#&		\"Delete Line\",!@#&		\"Clear Line\"!@#&	}, [3] = {\"Functions\",!@#&		\"Go To Line    ^+G\",!@#&		\"Re-Indent     ^+I\",!@#&		\"Set Syntax    ^+E\",!@#&		\"Start of Line ^+<\",!@#&		\"End of Line   ^+>\"!@#&	}, [4] = {\"Run\",!@#&		\"Run Program       ^+R\",!@#&		\"Run w/ Args ^+Shift+R\"!@#&	}!@#&}!@#&!@#&local shortcuts = {!@#&	-- File!@#&	[\"ctrl n\"] = \"New File  ^+N\",!@#&	[\"ctrl o\"] = \"Open File ^+O\",!@#&	[\"ctrl s\"] = \"Save File ^+S\",!@#&	[\"ctrl w\"] = \"Close     ^+W\",!@#&	[\"ctrl p\"] = \"Print     ^+P\",!@#&	[\"ctrl q\"] = \"Quit      ^+Q\",!@#&!@#&	-- Edit!@#&	[\"ctrl x\"] = \"Cut Line   ^+X\",!@#&	[\"ctrl c\"] = \"Copy Line  ^+C\",!@#&	[\"ctrl v\"] = \"Paste Line ^+V\",!@#&!@#&	-- Functions!@#&	[\"ctrl g\"] = \"Go To Line    ^+G\",!@#&	[\"ctrl i\"] = \"Re-Indent     ^+I\",!@#&	[\"ctrl e\"] = \"Set Syntax    ^+E\",!@#&	[\"ctrl 203\"] = \"Start of Line ^+<\",!@#&	[\"ctrl 205\"] = \"End of Line   ^+>\",!@#&!@#&	-- Run!@#&	[\"ctrl r\"] = \"Run Program       ^+R\",!@#&	[\"ctrl shift r\"] = \"Run w/ Args ^+Shift+R\"!@#&}!@#&!@#&local menuFunctions = {!@#&	-- File!@#&--	[\"About\"] = function() end,!@#&--	[\"Settings\"] = function() end,!@#&	[\"New File  ^+N\"] = function(path, lines) saveFile(path, lines) return \"new\" end,!@#&	[\"Open File ^+O\"] = function(path, lines) saveFile(path, lines) return \"open\" end,!@#&	[\"Save File ^+S\"] = function(path, lines) saveFile(path, lines) end,!@#&	[\"Close     ^+W\"] = function(path, lines) saveFile(path, lines) return \"menu\" end,!@#&	[\"Print     ^+P\"] = function(path, lines) saveFile(path, lines) return nil end,!@#&	[\"Quit      ^+Q\"] = function(path, lines) saveFile(path, lines) return \"exit\" end,!@#&!@#&	-- Edit!@#&	[\"Cut Line   ^+X\"] = function(path, lines, y)!@#&		clipboard = lines[y] table.remove(lines, y) return nil, lines end,!@#&	[\"Copy Line  ^+C\"] = function(path, lines, y) clipboard = lines[y] end,!@#&	[\"Paste Line ^+V\"] = function(path, lines, y)!@#&		if clipboard then table.insert(lines, y, clipboard) end return nil, lines end,!@#&	[\"Delete Line\"] = function(path, lines, y) table.remove(lines, y) return nil, lines end,!@#&	[\"Clear Line\"] = function(path, lines, y) lines[y] = \"\" return nil, lines, \"cursor\" end,!@#&!@#&	-- Functions!@#&	[\"Go To Line    ^+G\"] = function() return nil, \"go to\", goto() end,!@#&	[\"Re-Indent     ^+I\"] = function(path, lines)!@#&		local a = reindent(lines) saveFile(path, lines) return nil, a!@#&	end,!@#&	[\"Set Syntax    ^+E\"] = function(path, lines)!@#&		setsyntax()!@#&		if curLanguage == languages.brainfuck and lines[1] ~= \"-- Syntax: Brainfuck\" then!@#&			table.insert(lines, 1, \"-- Syntax: Brainfuck\")!@#&			return nil, lines!@#&		end!@#&	end,!@#&	[\"Start of Line ^+<\"] = function() os.queueEvent(\"key\", 199) end,!@#&	[\"End of Line   ^+>\"] = function() os.queueEvent(\"key\", 207) end,!@#&!@#&	-- Run!@#&	[\"Run Program       ^+R\"] = function(path, lines)!@#&		saveFile(path, lines)!@#&		return nil, run(path, lines, false)!@#&	end,!@#&	[\"Run w/ Args ^+Shift+R\"] = function(path, lines)!@#&		saveFile(path, lines)!@#&		return nil, run(path, lines, true)!@#&	end,!@#&}!@#&!@#&local function drawMenu(open)!@#&	term.setCursorPos(1, 1)!@#&	term.setTextColor(colors[theme.textColor])!@#&	term.setBackgroundColor(colors[theme.backgroundHighlight])!@#&	term.clearLine()!@#&	local curX = 0!@#&	for _, v in pairs(menu) do!@#&		term.setCursorPos(3 + curX, 1)!@#&		term.write(v[1])!@#&		curX = curX + v[1]:len() + 3!@#&	end!@#&!@#&	if open then!@#&		local it = {}!@#&		local x = 1!@#&		for _, v in pairs(menu) do!@#&			if open == v[1] then!@#&				it = v!@#&				break!@#&			end!@#&			x = x + v[1]:len() + 3!@#&		end!@#&		x = x + 1!@#&!@#&		local items = {}!@#&		for i = 2, #it do!@#&			table.insert(items, it[i])!@#&		end!@#&!@#&		local len = 1!@#&		for _, v in pairs(items) do if v:len() + 2 > len then len = v:len() + 2 end end!@#&!@#&		for i, v in ipairs(items) do!@#&			term.setCursorPos(x, i + 1)!@#&			term.write(string.rep(\" \", len))!@#&			term.setCursorPos(x + 1, i + 1)!@#&			term.write(v)!@#&		end!@#&		term.setCursorPos(x, #items + 2)!@#&		term.write(string.rep(\" \", len))!@#&		return items, len!@#&	end!@#&end!@#&!@#&local function triggerMenu(cx, cy)!@#&	-- Determine clicked menu!@#&	local curX = 0!@#&	local open = nil!@#&	for _, v in pairs(menu) do!@#&		if cx >= curX + 3 and cx <= curX + v[1]:len() + 2 then!@#&			open = v[1]!@#&			break!@#&		end!@#&		curX = curX + v[1]:len() + 3!@#&	end!@#&	local menux = curX + 2!@#&	if not open then return false end!@#&!@#&	-- Flash menu item!@#&	term.setCursorBlink(false)!@#&	term.setCursorPos(menux, 1)!@#&	term.setBackgroundColor(colors[theme.background])!@#&	term.write(string.rep(\" \", open:len() + 2))!@#&	term.setCursorPos(menux + 1, 1)!@#&	term.write(open)!@#&	sleep(0.1)!@#&	local items, len = drawMenu(open)!@#&!@#&	local ret = true!@#&!@#&	-- Pull events on menu!@#&	local ox, oy = term.getCursorPos()!@#&	while type(ret) ~= \"string\" do!@#&		local e, but, x, y = os.pullEvent()!@#&		if e == \"mouse_click\" then!@#&			-- If clicked outside menu!@#&			if x < menux - 1 or x > menux + len - 1 then break!@#&			elseif y > #items + 2 then break!@#&			elseif y == 1 then break end!@#&!@#&			for i, v in ipairs(items) do!@#&				if y == i + 1 and x >= menux and x <= menux + len - 2 then!@#&					-- Flash when clicked!@#&					term.setCursorPos(menux, y)!@#&					term.setBackgroundColor(colors[theme.background])!@#&					term.write(string.rep(\" \", len))!@#&					term.setCursorPos(menux + 1, y)!@#&					term.write(v)!@#&					sleep(0.1)!@#&					drawMenu(open)!@#&!@#&					-- Return item!@#&					ret = v!@#&					break!@#&				end!@#&			end!@#&		end!@#&	end!@#&!@#&	term.setCursorPos(ox, oy)!@#&	term.setCursorBlink(true)!@#&	return ret!@#&end!@#&!@#&!@#&--  -------- Editing!@#&!@#&local standardsCompletions = {!@#&	\"if%s+.+%s+then%s*$\",!@#&	\"for%s+.+%s+do%s*$\",!@#&	\"while%s+.+%s+do%s*$\",!@#&	\"repeat%s*$\",!@#&	\"function%s+[a-zA-Z_0-9]?\\(.*\\)%s*$\",!@#&	\"=%s*function%s*\\(.*\\)%s*$\",!@#&	\"else%s*$\",!@#&	\"elseif%s+.+%s+then%s*$\"!@#&}!@#&!@#&local liveCompletions = {!@#&	[\"(\"] = \")\",!@#&	[\"{\"] = \"}\",!@#&	[\"[\"] = \"]\",!@#&	[\"\\\"\"] = \"\\\"\",!@#&	[\"'\"] = \"'\",!@#&}!@#&!@#&local x, y = 0, 0!@#&local edw, edh = 0, h - 1!@#&local offx, offy = 0, 1!@#&local scrollx, scrolly = 0, 0!@#&local lines = {}!@#&local liveErr = curLanguage.parseError(nil)!@#&local displayCode = true!@#&local lastEventClock = os.clock()!@#&!@#&local function attemptToHighlight(line, regex, col)!@#&	local match = string.match(line, regex)!@#&	if match then!@#&		if type(col) == \"number\" then term.setTextColor(col)!@#&		elseif type(col) == \"function\" then term.setTextColor(col(match)) end!@#&		term.write(match)!@#&		term.setTextColor(colors[theme.textColor])!@#&		return line:sub(match:len() + 1, -1)!@#&	end!@#&	return nil!@#&end!@#&!@#&local function writeHighlighted(line)!@#&	if curLanguage == languages.lua then!@#&		while line:len() > 0 do	!@#&			line = attemptToHighlight(line, \"^%-%-%[%[.-%]%]\", colors[theme.comment]) or!@#&				attemptToHighlight(line, \"^%-%-.*\", colors[theme.comment]) or!@#&				attemptToHighlight(line, \"^\\\".*[^\\\\]\\\"\", colors[theme.string]) or!@#&				attemptToHighlight(line, \"^\\'.*[^\\\\]\\'\", colors[theme.string]) or!@#&				attemptToHighlight(line, \"^%[%[.-%]%]\", colors[theme.string]) or!@#&				attemptToHighlight(line, \"^[%w_]+\", function(match)!@#&					if curLanguage.keywords[match] then!@#&						return colors[theme[curLanguage.keywords[match]]]!@#&					end!@#&					return colors[theme.textColor]!@#&				end) or!@#&				attemptToHighlight(line, \"^[^%w_]\", colors[theme.textColor])!@#&		end!@#&	else term.write(line) end!@#&end!@#&!@#&local function draw()!@#&	-- Menu!@#&	term.setTextColor(colors[theme.textColor])!@#&	term.setBackgroundColor(colors[theme.editorBackground])!@#&	term.clear()!@#&	drawMenu()!@#&!@#&	-- Line numbers!@#&	offx, offy = tostring(#lines):len() + 1, 1!@#&	edw, edh = w - offx, h - 1!@#&!@#&	-- Draw text!@#&	for i = 1, edh do!@#&		local a = lines[scrolly + i]!@#&		if a then!@#&			local ln = string.rep(\" \", offx - 1 - tostring(scrolly + i):len()) .. tostring(scrolly + i) !@#&			local l = a:sub(scrollx + 1, edw + scrollx + 1)!@#&			ln = ln .. \":\"!@#&!@#&			if liveErr.line == scrolly + i then ln = string.rep(\" \", offx - 2) .. \"!:\" end!@#&!@#&			term.setCursorPos(1, i + offy)!@#&			term.setBackgroundColor(colors[theme.editorBackground])!@#&			if scrolly + i == y then!@#&				if scrolly + i == liveErr.line and os.clock() - lastEventClock > 3 then!@#&					term.setBackgroundColor(colors[theme.editorErrorHighlight])!@#&				else term.setBackgroundColor(colors[theme.editorLineHightlight]) end!@#&				term.clearLine()!@#&			elseif scrolly + i == liveErr.line then!@#&				term.setBackgroundColor(colors[theme.editorError])!@#&				term.clearLine()!@#&			end!@#&!@#&			term.setCursorPos(1 - scrollx + offx, i + offy)!@#&			if scrolly + i == y then!@#&				if scrolly + i == liveErr.line and os.clock() - lastEventClock > 3 then!@#&					term.setBackgroundColor(colors[theme.editorErrorHighlight])!@#&				else term.setBackgroundColor(colors[theme.editorLineHightlight]) end!@#&			elseif scrolly + i == liveErr.line then term.setBackgroundColor(colors[theme.editorError])!@#&			else term.setBackgroundColor(colors[theme.editorBackground]) end!@#&			if scrolly + i == liveErr.line then!@#&				if displayCode then term.write(a)!@#&				else term.write(liveErr.display) end!@#&			else writeHighlighted(a) end!@#&!@#&			term.setCursorPos(1, i + offy)!@#&			if scrolly + i == y then!@#&				if scrolly + i == liveErr.line and os.clock() - lastEventClock > 3 then!@#&					term.setBackgroundColor(colors[theme.editorError])!@#&				else term.setBackgroundColor(colors[theme.editorLineNumbersHighlight]) end!@#&			elseif scrolly + i == liveErr.line then!@#&				term.setBackgroundColor(colors[theme.editorErrorHighlight])!@#&			else term.setBackgroundColor(colors[theme.editorLineNumbers]) end!@#&			term.write(ln)!@#&		end!@#&	end!@#&	term.setCursorPos(x - scrollx + offx, y - scrolly + offy)!@#&end!@#&!@#&local function drawLine(...)!@#&	local ls = {...}!@#&	offx = tostring(#lines):len() + 1!@#&	for _, ly in pairs(ls) do!@#&		local a = lines[ly]!@#&		if a then!@#&			local ln = string.rep(\" \", offx - 1 - tostring(ly):len()) .. tostring(ly) !@#&			local l = a:sub(scrollx + 1, edw + scrollx + 1)!@#&			ln = ln .. \":\"!@#&!@#&			if liveErr.line == ly then ln = string.rep(\" \", offx - 2) .. \"!:\" end!@#&!@#&			term.setCursorPos(1, (ly - scrolly) + offy)!@#&			term.setBackgroundColor(colors[theme.editorBackground])!@#&			if ly == y then!@#&				if ly == liveErr.line and os.clock() - lastEventClock > 3 then!@#&					term.setBackgroundColor(colors[theme.editorErrorHighlight])!@#&				else term.setBackgroundColor(colors[theme.editorLineHightlight]) end!@#&			elseif ly == liveErr.line then!@#&				term.setBackgroundColor(colors[theme.editorError])!@#&			end!@#&			term.clearLine()!@#&!@#&			term.setCursorPos(1 - scrollx + offx, (ly - scrolly) + offy)!@#&			if ly == y then!@#&				if ly == liveErr.line and os.clock() - lastEventClock > 3 then!@#&					term.setBackgroundColor(colors[theme.editorErrorHighlight])!@#&				else term.setBackgroundColor(colors[theme.editorLineHightlight]) end!@#&			elseif ly == liveErr.line then term.setBackgroundColor(colors[theme.editorError])!@#&			else term.setBackgroundColor(colors[theme.editorBackground]) end!@#&			if ly == liveErr.line then!@#&				if displayCode then term.write(a)!@#&				else term.write(liveErr.display) end!@#&			else writeHighlighted(a) end!@#&!@#&			term.setCursorPos(1, (ly - scrolly) + offy)!@#&			if ly == y then!@#&				if ly == liveErr.line and os.clock() - lastEventClock > 3 then!@#&					term.setBackgroundColor(colors[theme.editorError])!@#&				else term.setBackgroundColor(colors[theme.editorLineNumbersHighlight]) end!@#&			elseif ly == liveErr.line then!@#&				term.setBackgroundColor(colors[theme.editorErrorHighlight])!@#&			else term.setBackgroundColor(colors[theme.editorLineNumbers]) end!@#&			term.write(ln)!@#&		end!@#&	end!@#&	term.setCursorPos(x - scrollx + offx, y - scrolly + offy)!@#&end!@#&!@#&local function cursorLoc(x, y, force)!@#&	local sx, sy = x - scrollx, y - scrolly!@#&	local redraw = false!@#&	if sx < 1 then!@#&		scrollx = x - 1!@#&		sx = 1!@#&		redraw = true!@#&	elseif sx > edw then!@#&		scrollx = x - edw!@#&		sx = edw!@#&		redraw = true!@#&	end if sy < 1 then!@#&		scrolly = y - 1!@#&		sy = 1!@#&		redraw = true!@#&	elseif sy > edh then!@#&		scrolly = y - edh!@#&		sy = edh!@#&		redraw = true!@#&	end if redraw or force then draw() end!@#&	term.setCursorPos(sx + offx, sy + offy)!@#&end!@#&!@#&local function executeMenuItem(a, path)!@#&	if type(a) == \"string\" and menuFunctions[a] then!@#&		local opt, nl, gtln = menuFunctions[a](path, lines, y)!@#&		if type(opt) == \"string\" then term.setCursorBlink(false) return opt end!@#&		if type(nl) == \"table\" then!@#&			if #lines < 1 then table.insert(lines, \"\") end!@#&			y = math.min(y, #lines)!@#&			x = math.min(x, lines[y]:len() + 1)!@#&			lines = nl!@#&		elseif type(nl) == \"string\" then!@#&			if nl == \"go to\" and gtln then!@#&				x, y = 1, math.min(#lines, gtln)!@#&				cursorLoc(x, y)!@#&			end!@#&		end!@#&	end!@#&	term.setCursorBlink(true)!@#&	draw()!@#&	term.setCursorPos(x - scrollx + offx, y - scrolly + offy)!@#&end!@#&!@#&local function edit(path)!@#&	-- Variables!@#&	x, y = 1, 1!@#&	offx, offy = 0, 1!@#&	scrollx, scrolly = 0, 0!@#&	lines = loadFile(path)!@#&	if not lines then return \"menu\" end!@#&!@#&	-- Enable brainfuck!@#&	if lines[1] == \"-- Syntax: Brainfuck\" then!@#&		curLanguage = languages.brainfuck!@#&	end!@#&!@#&	-- Clocks!@#&	local autosaveClock = os.clock()!@#&	local scrollClock = os.clock() -- To prevent redraw flicker!@#&	local liveErrorClock = os.clock()!@#&	local hasScrolled = false!@#&!@#&	-- Draw!@#&	draw()!@#&	term.setCursorPos(x + offx, y + offy)!@#&	term.setCursorBlink(true)!@#&	!@#&	-- Main loop!@#&	local tid = os.startTimer(3)!@#&	while true do!@#&		local e, key, cx, cy = os.pullEvent()!@#&		if e == \"key\" and allowEditorEvent then!@#&			if key == 200 and y > 1 then!@#&				-- Up!@#&				x, y = math.min(x, lines[y - 1]:len() + 1), y - 1!@#&				drawLine(y, y + 1)!@#&				cursorLoc(x, y)!@#&			elseif key == 208 and y < #lines then!@#&				-- Down!@#&				x, y = math.min(x, lines[y + 1]:len() + 1), y + 1!@#&				drawLine(y, y - 1)!@#&				cursorLoc(x, y)!@#&			elseif key == 203 and x > 1 then!@#&				-- Left!@#&				x = x - 1!@#&				local force = false!@#&				if y - scrolly + offy < offy + 1 then force = true end!@#&				cursorLoc(x, y, force)!@#&			elseif key == 205 and x < lines[y]:len() + 1 then!@#&				-- Right!@#&				x = x + 1!@#&				local force = false!@#&				if y - scrolly + offy < offy + 1 then force = true end!@#&				cursorLoc(x, y, force)!@#&			elseif (key == 28 or key == 156) and (displayCode and true or y + scrolly - 1 ==!@#&					liveErr.line) then!@#&				-- Enter!@#&				local f = nil!@#&				for _, v in pairs(standardsCompletions) do!@#&					if lines[y]:find(v) then f = v end!@#&				end!@#&!@#&				local _, spaces = lines[y]:find(\"^[ ]+\")!@#&				if not spaces then spaces = 0 end!@#&				if f then!@#&					table.insert(lines, y + 1, string.rep(\" \", spaces + 2))!@#&					if not f:find(\"else\", 1, true) and not f:find(\"elseif\", 1, true) then!@#&						table.insert(lines, y + 2, string.rep(\" \", spaces) .. !@#&							(f:find(\"repeat\", 1, true) and \"until \" or f:find(\"{\", 1, true) and \"}\" or !@#&							\"end\"))!@#&					end!@#&					x, y = spaces + 3, y + 1!@#&					cursorLoc(x, y, true)!@#&				else!@#&					local oldLine = lines[y]!@#&!@#&					lines[y] = lines[y]:sub(1, x - 1)!@#&					table.insert(lines, y + 1, string.rep(\" \", spaces) .. oldLine:sub(x, -1))!@#&!@#&					x, y = spaces + 1, y + 1!@#&					cursorLoc(x, y, true)!@#&				end!@#&			elseif key == 14 and (displayCode and true or y + scrolly - 1 == liveErr.line) then!@#&				-- Backspace!@#&				if x > 1 then!@#&					local f = false!@#&					for k, v in pairs(liveCompletions) do!@#&						if lines[y]:sub(x - 1, x - 1) == k then f = true end!@#&					end!@#&!@#&					lines[y] = lines[y]:sub(1, x - 2) .. lines[y]:sub(x + (f and 1 or 0), -1)!@#&					drawLine(y)!@#&					x = x - 1!@#&					cursorLoc(x, y)!@#&				elseif y > 1 then!@#&					local prevLen = lines[y - 1]:len() + 1!@#&					lines[y - 1] = lines[y - 1] .. lines[y]!@#&					table.remove(lines, y)!@#&					x, y = prevLen, y - 1!@#&					cursorLoc(x, y, true)!@#&				end!@#&			elseif key == 199 then!@#&				-- Home!@#&				x = 1!@#&				local force = false!@#&				if y - scrolly + offy < offy + 1 then force = true end!@#&				cursorLoc(x, y, force)!@#&			elseif key == 207 then!@#&				-- End!@#&				x = lines[y]:len() + 1!@#&				local force = false!@#&				if y - scrolly + offy < offy + 1 then force = true end!@#&				cursorLoc(x, y, force)!@#&			elseif key == 211 and (displayCode and true or y + scrolly - 1 == liveErr.line) then!@#&				-- Forward Delete!@#&				if x < lines[y]:len() + 1 then!@#&					lines[y] = lines[y]:sub(1, x - 1) .. lines[y]:sub(x + 1)!@#&					local force = false!@#&					if y - scrolly + offy < offy + 1 then force = true end!@#&					drawLine(y)!@#&					cursorLoc(x, y, force)!@#&				elseif y < #lines then!@#&					lines[y] = lines[y] .. lines[y + 1]!@#&					table.remove(lines, y + 1)!@#&					draw()!@#&					cursorLoc(x, y)!@#&				end!@#&			elseif key == 15 and (displayCode and true or y + scrolly - 1 == liveErr.line) then!@#&				-- Tab!@#&				lines[y] = string.rep(\" \", tabWidth) .. lines[y]!@#&				x = x + 2!@#&				local force = false!@#&				if y - scrolly + offy < offy + 1 then force = true end!@#&				drawLine(y)!@#&				cursorLoc(x, y, force)!@#&			elseif key == 201 then!@#&				-- Page up!@#&				y = math.min(math.max(y - edh, 1), #lines)!@#&				x = math.min(lines[y]:len() + 1, x)!@#&				cursorLoc(x, y, true)!@#&			elseif key == 209 then!@#&				-- Page down!@#&				y = math.min(math.max(y + edh, 1), #lines)!@#&				x = math.min(lines[y]:len() + 1, x)!@#&				cursorLoc(x, y, true)!@#&			end!@#&		elseif e == \"char\" and allowEditorEvent and (displayCode and true or !@#&				y + scrolly - 1 == liveErr.line) then!@#&			local shouldIgnore = false!@#&			for k, v in pairs(liveCompletions) do!@#&				if key == v and lines[y]:find(k, 1, true) and lines[y]:sub(x, x) == v then!@#&					shouldIgnore = true!@#&				end!@#&			end!@#&!@#&			local addOne = false!@#&			if not shouldIgnore then!@#&				for k, v in pairs(liveCompletions) do!@#&					if key == k and lines[y]:sub(x, x) ~= k then key = key .. v addOne = true end!@#&				end!@#&				lines[y] = lines[y]:sub(1, x - 1) .. key .. lines[y]:sub(x, -1)!@#&			end!@#&!@#&			x = x + (addOne and 1 or key:len())!@#&			local force = false!@#&			if y - scrolly + offy < offy + 1 then force = true end!@#&			drawLine(y)!@#&			cursorLoc(x, y, force)!@#&		elseif e == \"mouse_click\" and key == 1 then!@#&			if cy > 1 then!@#&				if cx <= offx and cy - offy == liveErr.line - scrolly then!@#&					displayCode = not displayCode!@#&					drawLine(liveErr.line)!@#&				else!@#&					local oldy = y!@#&					y = math.min(math.max(scrolly + cy - offy, 1), #lines)!@#&					x = math.min(math.max(scrollx + cx - offx, 1), lines[y]:len() + 1)!@#&					if oldy ~= y then drawLine(oldy, y) end!@#&					cursorLoc(x, y)!@#&				end!@#&			else!@#&				local a = triggerMenu(cx, cy)!@#&				if a then!@#&					local opt = executeMenuItem(a, path)!@#&					if opt then return opt end!@#&				end!@#&			end!@#&		elseif e == \"shortcut\" then!@#&			local a = shortcuts[key .. \" \" .. cx]!@#&			if a then!@#&				local parent = nil!@#&				local curx = 0!@#&				for i, mv in ipairs(menu) do!@#&					for _, iv in pairs(mv) do!@#&						if iv == a then!@#&							parent = menu[i][1]!@#&							break!@#&						end!@#&					end!@#&					if parent then break end!@#&					curx = curx + mv[1]:len() + 3!@#&				end!@#&				local menux = curx + 2!@#&!@#&				-- Flash menu item!@#&				term.setCursorBlink(false)!@#&				term.setCursorPos(menux, 1)!@#&				term.setBackgroundColor(colors[theme.background])!@#&				term.write(string.rep(\" \", parent:len() + 2))!@#&				term.setCursorPos(menux + 1, 1)!@#&				term.write(parent)!@#&				sleep(0.1)!@#&				drawMenu()!@#&!@#&				-- Execute item!@#&				local opt = executeMenuItem(a, path)!@#&				if opt then return opt end!@#&			end!@#&		elseif e == \"mouse_scroll\" then!@#&			if key == -1 and scrolly > 0 then!@#&				scrolly = scrolly - 1!@#&				if os.clock() - scrollClock > 0.0005 then!@#&					draw()!@#&					term.setCursorPos(x - scrollx + offx, y - scrolly + offy)!@#&				end!@#&				scrollClock = os.clock()!@#&				hasScrolled = true!@#&			elseif key == 1 and scrolly < #lines - edh then!@#&				scrolly = scrolly + 1!@#&				if os.clock() - scrollClock > 0.0005 then!@#&					draw()!@#&					term.setCursorPos(x - scrollx + offx, y - scrolly + offy)!@#&				end!@#&				scrollClock = os.clock()!@#&				hasScrolled = true!@#&			end!@#&		elseif e == \"timer\" and key == tid then!@#&			drawLine(y)!@#&			tid = os.startTimer(3)!@#&		end!@#&!@#&		-- Draw!@#&		if hasScrolled and os.clock() - scrollClock > 0.1 then!@#&			draw()!@#&			term.setCursorPos(x - scrollx + offx, y - scrolly + offy)!@#&			hasScrolled = false!@#&		end!@#&!@#&		-- Autosave!@#&		if os.clock() - autosaveClock > autosaveInterval then!@#&			saveFile(path, lines)!@#&			autosaveClock = os.clock()!@#&		end!@#&!@#&		-- Errors!@#&		if os.clock() - liveErrorClock > 1 then!@#&			local prevLiveErr = liveErr!@#&			liveErr = curLanguage.parseError(nil)!@#&			local code = \"\"!@#&			for _, v in pairs(lines) do code = code .. v .. \"\\n\" end!@#&!@#&			liveErr = curLanguage.getCompilerErrors(code)!@#&			liveErr.line = math.min(liveErr.line - 2, #lines)!@#&			if liveErr ~= prevLiveErr then draw() end!@#&			liveErrorClock = os.clock()!@#&		end!@#&	end!@#&!@#&	return \"menu\"!@#&end!@#&!@#&!@#&--  -------- Open File!@#&!@#&local function newFile()!@#&	local wid = w - 13!@#&!@#&	-- Get name!@#&	title(\"Lua IDE - New File\")!@#&	local name = centerRead(wid, \"/\")!@#&	if not name or name == \"\" then return \"menu\" end!@#&	name = \"/\" .. name!@#&!@#&	-- Clear!@#&	title(\"Lua IDE - New File\")!@#&	term.setTextColor(colors[theme.textColor])!@#&	term.setBackgroundColor(colors[theme.promptHighlight])!@#&	for i = 8, 10 do!@#&		term.setCursorPos(w/2 - wid/2, i)!@#&		term.write(string.rep(\" \", wid))!@#&	end!@#&	term.setCursorPos(1, 9)!@#&	if fs.isDir(name) then!@#&		centerPrint(\"Cannot Edit a Directory!\")!@#&		sleep(1.6)!@#&		return \"menu\"!@#&	elseif fs.exists(name) then!@#&		centerPrint(\"File Already Exists!\")!@#&		local opt = prompt({{\"Open\", w/2 - 9, 14}, {\"Cancel\", w/2 + 2, 14}}, \"horizontal\")!@#&		if opt == \"Open\" then return \"edit\", name!@#&		elseif opt == \"Cancel\" then return \"menu\" end!@#&	else return \"edit\", name end!@#&end!@#&!@#&local function openFile()!@#&	local wid = w - 13!@#&!@#&	-- Get name!@#&	title(\"Lua IDE - Open File\")!@#&	local name = tostring(lddfm.makeMenu())!@#&	if not name or name == \"\" then return \"menu\" end!@#&!@#&	-- Clear!@#&	title(\"Lua IDE - New File\")!@#&	term.setTextColor(colors[theme.textColor])!@#&	term.setBackgroundColor(colors[theme.promptHighlight])!@#&	for i = 8, 10 do!@#&		term.setCursorPos(w/2 - wid/2, i)!@#&		term.write(string.rep(\" \", wid))!@#&	end!@#&	term.setCursorPos(1, 9)!@#&	if fs.isDir(name) then!@#&		centerPrint(\"Cannot Open a Directory!\")!@#&		sleep(1.6)!@#&		return \"menu\"!@#&	elseif not fs.exists(name) then!@#&		centerPrint(\"File Doesn't Exist!\")!@#&		local opt = prompt({{\"Create\", w/2 - 11, 14}, {\"Cancel\", w/2 + 2, 14}}, \"horizontal\")!@#&		if opt == \"Create\" then return \"edit\", name!@#&		elseif opt == \"Cancel\" then return \"menu\" end!@#&	else return \"edit\", name end!@#&end!@#&!@#&!@#&--  -------- Settings!@#&!@#&local function update()!@#&	local function draw(status)!@#&		title(\"SpeedCode - Update\")!@#&		term.setBackgroundColor(colors[theme.prompt])!@#&		term.setTextColor(colors[theme.textColor])!@#&		for i = 8, 10 do!@#&			term.setCursorPos(w/2 - (status:len() + 4), i)!@#&			write(string.rep(\" \", status:len() + 4))!@#&		end!@#&		term.setCursorPos(w/2 - (status:len() + 4), 9)!@#&		term.write(\" - \" .. status .. \" \")!@#&!@#&		term.setBackgroundColor(colors[theme.errHighlight])!@#&		for i = 8, 10 do!@#&			term.setCursorPos(w/2 + 2, i)!@#&			term.write(string.rep(\" \", 10))!@#&		end!@#&		term.setCursorPos(w/2 + 2, 9)!@#&		term.write(\" > Cancel \")!@#&	end!@#&!@#&	if not http then!@#&		draw(\"HTTP API Disabled!\")!@#&		sleep(1.6)!@#&		return \"settings\"!@#&	end!@#&!@#&	draw(\"Updating...\")!@#&	local tID = os.startTimer(10)!@#&	http.request(updateURL)!@#&	while true do!@#&		local e, but, x, y = os.pullEvent()!@#&		if (e == \"key\" and but == 28) or!@#&				(e == \"mouse_click\" and x >= w/2 + 2 and x <= w/2 + 12 and y == 9) then!@#&			draw(\"Cancelled\")!@#&			sleep(1.6)!@#&			break!@#&		elseif e == \"http_success\" and but == updateURL then!@#&			local new = x.readAll()!@#&			local curf = io.open(ideLocation, \"r\")!@#&			local cur = curf:read(\"*a\")!@#&			curf:close()!@#&!@#&			if cur ~= new then!@#&				draw(\"Update Found\")!@#&				sleep(1.6)!@#&				local f = io.open(ideLocation, \"w\")!@#&				f:write(new)!@#&				f:close()!@#&!@#&				draw(\"Click to Exit\")!@#&				while true do!@#&					local e = os.pullEvent()!@#&					if e == \"mouse_click\" or (not isAdvanced() and e == \"key\") then break end!@#&				end!@#&				return \"exit\"!@#&			else!@#&				draw(\"No Updates Found!\")!@#&				sleep(1.6)!@#&				break!@#&			end!@#&		elseif e == \"http_failure\" or (e == \"timer\" and but == tID) then!@#&			draw(\"Update Failed!\")!@#&			sleep(1.6)!@#&			break!@#&		end!@#&	end!@#&!@#&	return \"settings\"!@#&end!@#&!@#&local function changeTheme()!@#&	title(\"SpeedCode - Theme\")!@#&!@#&	if isAdvanced() then!@#&		local disThemes = {\"Back\"}!@#&		for _, v in pairs(availableThemes) do table.insert(disThemes, v[1]) end!@#&		local t = scrollingPrompt(disThemes)!@#&		local url = nil!@#&		for _, v in pairs(availableThemes) do if v[1] == t then url = v[2] end end!@#&!@#&		if not url then return \"settings\" end!@#&		if t == \"Dawn (Default)\" then!@#&			term.setBackgroundColor(colors[theme.backgroundHighlight])!@#&			term.setCursorPos(3, 3)!@#&			term.clearLine()!@#&			term.write(\"SpeedCode - Loaded Theme!\")!@#&			sleep(1.6)!@#&!@#&			fs.delete(themeLocation)!@#&			theme = defaultTheme!@#&			return \"menu\"!@#&		end!@#&!@#&		term.setBackgroundColor(colors[theme.backgroundHighlight])!@#&		term.setCursorPos(3, 3)!@#&		term.clearLine()!@#&		term.write(\"SpeedCode - Downloading...\")!@#&!@#&		fs.delete(\"/.LuaIDE_temp_theme_file\")!@#&		download(url, \"/.LuaIDE_temp_theme_file\")!@#&		local a = loadTheme(\"/.LuaIDE_temp_theme_file\")!@#&!@#&		term.setCursorPos(3, 3)!@#&		term.clearLine()!@#&		if a then!@#&			term.write(\"SpeedCode - Loaded Theme!\")!@#&			fs.delete(themeLocation)!@#&			fs.move(\"/.LuaIDE_temp_theme_file\", themeLocation)!@#&			theme = a!@#&			sleep(1.6)!@#&			return \"menu\"!@#&		end!@#&		!@#&		term.write(\"SpeedCode - Could Not Load Theme!\")!@#&		fs.delete(\"/.LuaIDE_temp_theme_file\")!@#&		sleep(1.6)!@#&		return \"settings\"!@#&	else!@#&		term.setCursorPos(1, 8)!@#&		centerPrint(\"Themes are not available on\")!@#&		centerPrint(\"normal computers!\")!@#&	end!@#&end!@#&!@#&local function settings()!@#&	title(\"SpeedCode - Settings\")!@#&!@#&	local opt = prompt({{\"Change Theme\", w/2 - 17, 8}, {\"Return to Menu\", w/2 - 22, 13},!@#&		{\"Check for Updates\", w/2 + 2, 8}, {\"Exit IDE\", w/2 + 2, 13, bg = colors[theme.err], !@#&		highlight = colors[theme.errHighlight]}}, \"vertical\", true)!@#&	if opt == \"Change Theme\" then return changeTheme()!@#&	elseif opt == \"Check for Updates\" then return update()!@#&	elseif opt == \"Return to Menu\" then return \"menu\"!@#&	elseif opt == \"Exit IDE\" then return \"exit\" end!@#&end!@#&!@#&!@#&--  -------- Menu!@#&!@#&local function menu()!@#&	title(\"Welcome to SpeedCode \" .. version)!@#&!@#&	local opt = prompt({{\"New File\", w/2 - 13, 8}, {\"Open File\", w/2 - 14, 13},!@#&		{\"Settings\", w/2 + 2, 8}, {\"Exit IDE\", w/2 + 2, 13, bg = colors[theme.err],!@#&		highlight = colors[theme.errHighlight]}}, \"vertical\", true)!@#&	if opt == \"New File\" then return \"new\"!@#&	elseif opt == \"Open File\" then return \"open\"!@#&	elseif opt == \"Settings\" then return \"settings\"!@#&	elseif opt == \"Exit IDE\" then return \"exit\" end!@#&end!@#&!@#&!@#&--  -------- Main!@#&!@#&local function main(arguments)!@#&	local opt, data = \"menu\", nil!@#&!@#&	-- Check arguments!@#&	if type(arguments) == \"table\" and #arguments > 0 then!@#&		local f = \"/\" .. shell.resolve(arguments[1])!@#&		if fs.isDir(f) then print(\"Cannot edit a directory.\") end!@#&		opt, data = \"edit\", f!@#&	end!@#&!@#&	-- Main run loop!@#&	while true do!@#&		-- Menu!@#&		if opt == \"menu\" then opt = menu() end!@#&!@#&		-- Other!@#&		if opt == \"new\" then opt, data = newFile()!@#&		elseif opt == \"open\" then opt, data = openFile()!@#&		elseif opt == \"settings\" then opt = settings()!@#&		end if opt == \"exit\" then break end!@#&!@#&		-- Edit!@#&		if opt == \"edit\" and data then opt = edit(data) end!@#&	end!@#&end!@#&!@#&-- Load Theme!@#&if fs.exists(themeLocation) then theme = loadTheme(themeLocation) end!@#&if not theme and isAdvanced() then theme = defaultTheme!@#&elseif not theme then theme = normalTheme end!@#&!@#&-- Run!@#&local _, err = pcall(function()!@#&	parallel.waitForAny(function() main(args) end, monitorKeyboardShortcuts)!@#&end)!@#&!@#&-- Catch errors!@#&if err and not err:find(\"Terminated\") then!@#&	term.setCursorBlink(false)!@#&	title(\"SpeedCode - Crash! D:\")!@#&!@#&	term.setBackgroundColor(colors[theme.err])!@#&	for i = 6, 8 do!@#&		term.setCursorPos(5, i)!@#&		term.write(string.rep(\" \", 36))!@#&	end!@#&	term.setCursorPos(6, 7)!@#&	term.write(\"SpeedCode Has Crashed! D:\")!@#&!@#&	term.setBackgroundColor(colors[theme.background])!@#&	term.setCursorPos(2, 10)!@#&	print(err)!@#&!@#&	term.setBackgroundColor(colors[theme.prompt])!@#&	local _, cy = term.getCursorPos()!@#&	for i = cy + 1, cy + 4 do!@#&		term.setCursorPos(5, i)!@#&		term.write(string.rep(\" \", 36))!@#&	end!@#&	term.setCursorPos(6, cy + 2)!@#&	term.write(\"Please report this error to\")!@#&	term.setCursorPos(6, cy + 3)!@#&	term.write(\"Ma3rX! \")!@#&	!@#&	term.setBackgroundColor(colors[theme.background])!@#&	if isAdvanced() then centerPrint(\"Click to Exit...\", h - 1)!@#&	else centerPrint(\"Press Any Key to Exit...\", h - 1) end!@#&	while true do!@#&		local e = os.pullEvent()!@#&		if e == \"mouse_click\" or (not isAdvanced() and e == \"key\") then break end!@#&	end!@#&!@#&	-- Prevent key from being shown!@#&	os.queueEvent(event_distract)!@#&	os.pullEvent()!@#&end!@#&!@#&-- Exit!@#&term.setBackgroundColor(colors.black)!@#&term.setTextColor(colors.white)!@#&term.clear()!@#&term.setCursorPos(1, 1)",["GIFAnimator"]="os.loadAPI(\"/SpeedAPI/GIF\")!@#&os.loadAPI(\"/SpeedAPI/lddfm\")!@#&os.loadAPI(\"/SpeedAPI/peripheral\")!@#&!@#&local args = {...}!@#&!@#&local mon = peripheral.wrap(peripheral.find(\"monitor\"))!@#&mon.setTextScale(0.5)!@#&local x, y = mon.getSize()!@#&local image_name!@#&!@#&if args[1] then!@#&  image_name = args[1]!@#&!@#&else!@#&  image_name = tostring(lddfm.makeMenu())!@#&end!@#&!@#&local image = GIF.loadGIF(image_name)!@#&mon.setBackgroundColour(image[1].transparentCol or image.backgroundCol)!@#&mon.clear()!@#&	!@#&GIF.animateGIF(image, math.floor((x - image.width) / 2) + 1, math.floor((y - image.height) / 2) + 1, mon)",["PastebinClient"]="os.loadAPI(\"/SpeedAPI/SpeedGUI\")!@#&os.loadAPI(\"/SpeedAPI/lddfm\")!@#&term.setBackgroundColor(colors.gray)!@#&term.setCursorPos(18, 2)!@#&term.clear()!@#&print(\"Pastebin client\")!@#&!@#&function download()!@#&!@#&  term.setBackgroundColor(colors.gray)!@#&  term.setTextColor(colors.white)!@#&  term.setCursorPos(2, 2)!@#&  term.clear()!@#&  !@#&  print(\"Enter code: \")!@#&  term.setCursorPos(25, 2)!@#&  term.setBackgroundColor(colors.lightGray)!@#&  term.setTextColor(colors.white)!@#&  print(\"          \")!@#&  !@#&  term.setTextColor(colors.white)!@#&  term.setCursorPos(25, 2)!@#&  code = io.read()!@#&!@#&  term.setBackgroundColor(colors.gray)!@#&  term.setTextColor(colors.white)!@#&  term.setCursorPos(2, 4)!@#&  !@#&  print(\"Enter filename: \")!@#&  term.setCursorPos(25, 4)!@#&  term.setBackgroundColor(colors.lightGray)!@#&  term.setTextColor(colors.white)!@#&  print(\"          \")!@#&  !@#&  term.setTextColor(colors.white)!@#&  term.setCursorPos(25, 4)!@#&  fn = io.read()!@#&  !@#&  term.setBackgroundColor(colors.gray)!@#&  term.setTextColor(colors.lime)!@#&  term.setCursorPos(2, 6)!@#&!@#&  shell.run(\"pastebin get \"..tostring(code)..\" /SpeedOS/Downloads/\"..tostring(fn))!@#&  !@#&  sleep(1)!@#&  term.setTextColor(colors.white)!@#&  term.setBackgroundColor(colors.black)!@#&  term.clear()!@#&  error()!@#&end!@#&!@#&function upload()!@#&!@#&  term.setBackgroundColor(colors.gray)!@#&  term.setTextColor(colors.white)!@#&  term.setCursorPos(2, 2)!@#&  term.clear()!@#&  !@#&  print(\"Enter filename: \")!@#&  term.setCursorPos(25, 2)!@#&  term.setBackgroundColor(colors.lightGray)!@#&  term.setTextColor(colors.white)!@#&  print(\"          \")!@#&  !@#&  term.setTextColor(colors.white)!@#&  term.setCursorPos(25, 2)!@#&  f_n = tostring(lddfm.makeMenu())!@#&!@#&  term.setBackgroundColor(colors.gray)!@#&  term.setTextColor(colors.lime)!@#&  term.setCursorPos(2, 4)!@#&  term.clear()!@#&!@#&  shell.run(\"pastebin put \"..tostring(f_n))!@#&  !@#&  sleep(3)!@#&  term.setTextColor(colors.white)!@#&  term.setBackgroundColor(colors.black)!@#&  term.clear()!@#&  error()!@#&end!@#&!@#&SpeedGUI.gui.button.add(\"Upload to pastebin\",upload,15,5,2,3,colors.white,colors.orange)!@#&SpeedGUI.gui.button.add(\"Download from pastebin\",download,13,9,2,3,colors.white,colors.orange)!@#&SpeedGUI.start()",},["Videos"]={},},} local function makeFile(_path, _content) local file = fs.open(_path, "w") _content = _content:gsub("!@".."#&", "%\n") _content = textutils.unserialize(_content) file.write(_content) file.close() end local function makeFolder(_path, _content) fs.makeDir(_path) for k,v in pairs(_content) do if type(v) == "table" then makeFolder(_path .. "/" .. k, v) else makeFile(_path .. "/" .. k, v) end end end local sDest = shell.resolve( '/' ) or "/" if sDest == "root" then sDest = "/" end local tPackage = pkg makeFolder(sDest, tPackage)